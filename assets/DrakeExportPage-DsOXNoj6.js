import{aw as Kt,az as Qt,c as De,f as K,t as d,W as Zt,h as t,i as e,a as i,b as w,v as We,S as g,d as Oe,aA as Jt,F as Ae,A as Ue,aq as er,V as Ct,Y as tr,u as rr}from"./index-BF7AAaX4.js";import{F as nr,D as st}from"./drakeTypes-B0Dixu81.js";import{g as lt,b as lr,p as ht,a as xt,d as or,u as ir}from"./taxDocumentApi-Cr1zKaIa.js";import{g as bt,F as sr}from"./drakeFieldMappings-DyaT91Ke.js";const Pt={clientSelector:!0,documentUpload:!1,documentReview:!1,formSummary:!1,export:!1},$t={selectedClient:null,taxYear:2024,filingStatus:null,documents:[],uploadQueue:[],sectionState:{...Pt},isLoading:!1,error:null,exportStatus:"not_ready",exportResult:null,formSummaries:[],documentRequests:[]};function ar(){const[S,D]=Qt({...$t});return{state:S,selectClient:m=>{D(m===null?{selectedClient:null,sectionState:{...S.sectionState,clientSelector:!0,documentUpload:!1}}:{selectedClient:m,sectionState:{...S.sectionState,clientSelector:!1,documentUpload:!0}})},clearClient:()=>{D({selectedClient:null,sectionState:{...S.sectionState,clientSelector:!0,documentUpload:!1}})},setTaxYear:m=>{D("taxYear",m)},setFilingStatus:m=>{D("filingStatus",m)},addDocument:m=>{D("documents",k=>[...k,m])},updateDocument:(m,k)=>{D("documents",f=>f.id===m,k)},removeDocument:m=>{D("documents",k=>k.filter(f=>f.id!==m))},setDocuments:m=>{D("documents",m)},clearDocuments:()=>{D("documents",[])},verifyDocument:m=>{D("documents",k=>k.id===m,"verified",!0)},verifyAllDocuments:()=>{D("documents",{},"verified",!0)},toggleSection:m=>{D("sectionState",m,k=>!k)},setLoading:m=>{D("isLoading",m)},setError:m=>{D("error",m)},validateExportReadiness:()=>{const m=[],k=[];S.selectedClient||m.push("No client selected"),S.filingStatus||m.push("Filing status not selected"),S.documents.length===0&&m.push("No documents uploaded");const f=S.documents.filter(Y=>Y.verified),z=S.documents.filter(Y=>!Y.verified);z.length>0&&k.push(`${z.length} document(s) not verified`);const j=m.length===0,N=S.documents.reduce((Y,fe)=>{const Z=fe.extractedAmounts;return Z?Y+(Z.wages||0)+(Z.nonEmployeeCompensation||0)+(Z.interestIncome||0)+(Z.ordinaryDividends||0):Y},0),be=S.documents.reduce((Y,fe)=>{const Z=fe.extractedAmounts;return Z?Y+(Z.federalTaxWithheld||0)+(Z.federalTaxWithheld1099||0):Y},0);return{isReady:j,missingRequired:m,warnings:k,documentCount:S.documents.length,verifiedCount:f.length,unverifiedCount:z.length,totalIncome:N,totalWithholding:be}},setExportStatus:m=>{D("exportStatus",m)},setExportResult:m=>{D("exportResult",m)},calculateFormSummaries:()=>{const m=new Map;S.documents.forEach(k=>{const f=k.drakeFormType||"other",z=m.get(f),j=k.extractedAmounts||{},N=(j.wages||0)+(j.nonEmployeeCompensation||0)+(j.interestIncome||0)+(j.ordinaryDividends||0)+(j.mortgageInterest||0)+(j.totalAmount||0);z?m.set(f,{...z,documentCount:z.documentCount+1,totalAmount:z.totalAmount+N}):m.set(f,{formType:f,formLabel:f,documentCount:1,totalAmount:N,lines:[],isComplete:k.verified||!1,warnings:[]})}),D("formSummaries",Array.from(m.values()))},reset:()=>{D({...$t,sectionState:{...Pt}})},getVerifiedDocuments:()=>S.documents.filter(m=>m.verified),getUnverifiedDocuments:()=>S.documents.filter(m=>!m.verified),getTotalIncome:()=>S.documents.reduce((m,k)=>{const f=k.extractedAmounts;return f?m+(f.wages||0)+(f.nonEmployeeCompensation||0)+(f.interestIncome||0)+(f.ordinaryDividends||0)+(f.rents||0)+(f.royalties||0)+(f.otherIncome||0):m},0),getTotalWithholding:()=>S.documents.reduce((m,k)=>{const f=k.extractedAmounts;return f?m+(f.federalTaxWithheld||0)+(f.federalTaxWithheld1099||0)+(f.stateTaxWithheld||0)+(f.localTaxWithheld||0):m},0)}}const V=Kt(ar),v=V.state,A={selectClient:V.selectClient,clearClient:V.clearClient,setTaxYear:V.setTaxYear,setFilingStatus:V.setFilingStatus,addDocument:V.addDocument,updateDocument:V.updateDocument,updateDocumentStatus:(S,D,te)=>{V.updateDocument(S,{uploadStatus:D,processingProgress:te})},removeDocument:V.removeDocument,setDocuments:V.setDocuments,clearDocuments:V.clearDocuments,verifyDocument:V.verifyDocument,verifyAllDocuments:V.verifyAllDocuments,toggleSection:V.toggleSection,setLoading:V.setLoading,setError:V.setError,validateExportReadiness:V.validateExportReadiness,setExportStatus:V.setExportStatus,setExportResult:V.setExportResult,calculateFormSummaries:V.calculateFormSummaries,reset:V.reset};V.getVerifiedDocuments,V.getUnverifiedDocuments,V.getTotalIncome,V.getTotalWithholding;var St=d("<span>"),dr=d('<div><div><div><span></span><span></span></div><div><span><svg width=12 height=12 viewBox="0 0 12 12"fill=none xmlns=http://www.w3.org/2000/svg><path d="M2.5 4.5L6 8L9.5 4.5"stroke=currentColor stroke-width=1.5 stroke-linecap=round stroke-linejoin=round></path></svg></span></div></div><div><div>');const Be=S=>{const[D,te]=De(!1),le=K(()=>{switch(S.status){case"pending":return{color:"#6B7280",bgColor:"rgba(107, 114, 128, 0.15)",label:"Pending"};case"in_progress":return{color:"#3B82F6",bgColor:"rgba(59, 130, 246, 0.15)",label:"In Progress"};case"completed":return{color:"#10B981",bgColor:"rgba(16, 185, 129, 0.15)",label:"Completed"};case"error":return{color:"#EF4444",bgColor:"rgba(239, 68, 68, 0.15)",label:"Error"};default:return null}}),ue=K(()=>({display:"flex","flex-direction":"column",background:"var(--surface-color, #ffffff)","border-radius":"var(--border-radius, 8px)",border:"1px solid var(--border-color, #e5e7eb)","box-shadow":"var(--shadow-sm, 0 1px 2px rgba(0, 0, 0, 0.05))",overflow:"hidden",transition:"box-shadow 0.2s ease"})),me=K(()=>({display:"flex","align-items":"center","justify-content":"space-between",padding:"1rem 1.25rem",cursor:"pointer","user-select":"none",background:D()?"var(--hover-color, rgba(0, 0, 0, 0.02))":"transparent",transition:"background 0.2s ease"})),re={display:"flex","align-items":"center",gap:"0.75rem"},Q={"font-size":"1.25rem",display:"flex","align-items":"center","justify-content":"center",width:"2rem",height:"2rem"},Se={"font-size":"1rem","font-weight":"600",color:"var(--text-primary, #1f2937)"},ge={display:"flex","align-items":"center",gap:"0.75rem"},_e=K(()=>{const ne=le();return ne?{display:"inline-flex","align-items":"center",padding:"0.25rem 0.625rem","border-radius":"9999px",background:ne.bgColor,color:ne.color,"font-size":"0.75rem","font-weight":"600","text-transform":"uppercase","letter-spacing":"0.025em"}:null}),ie={display:"inline-flex","align-items":"center","justify-content":"center","min-width":"1.5rem",height:"1.5rem",padding:"0 0.5rem","border-radius":"9999px",background:"var(--primary-color, #3B82F6)",color:"#ffffff","font-size":"0.75rem","font-weight":"600"},we=K(()=>({display:"flex","align-items":"center","justify-content":"center",width:"1.5rem",height:"1.5rem","font-size":"0.75rem",color:"var(--text-secondary, #6B7280)",transform:S.isOpen?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s ease"})),Ce=K(()=>({overflow:"hidden","max-height":S.isOpen?"2000px":"0",opacity:S.isOpen?"1":"0",transition:"max-height 0.4s ease-in-out, opacity 0.3s ease-in-out"})),pe={padding:"0 1.25rem 1.25rem 1.25rem","border-top":"1px solid var(--border-color, #e5e7eb)"};return(()=>{var ne=dr(),se=ne.firstChild,ve=se.firstChild,ye=ve.firstChild,he=ye.nextSibling,xe=ve.nextSibling,oe=xe.firstChild,ae=se.nextSibling,de=ae.firstChild;return se.addEventListener("mouseleave",()=>te(!1)),se.addEventListener("mouseenter",()=>te(!0)),Zt(se,"click",S.onToggle,!0),t(ve,re),t(ye,Q),e(ye,()=>S.icon),t(he,Se),e(he,()=>S.title),t(xe,ge),e(xe,i(g,{get when(){return We(()=>!!S.status)()&&le()},get children(){var O=St();return e(O,()=>le().label),w(m=>t(O,_e(),m)),O}}),oe),e(xe,i(g,{get when(){return S.badge!==void 0},get children(){var O=St();return t(O,ie),e(O,()=>S.badge),O}}),oe),t(de,pe),e(de,()=>S.children),w(O=>{var m=ue(),k=me(),f=we(),z=Ce();return O.e=t(ne,m,O.e),O.t=t(se,k,O.t),O.a=t(oe,f,O.a),O.o=t(ae,z,O.o),O},{e:void 0,t:void 0,a:void 0,o:void 0}),ne})()};Oe(["click"]);var cr=d("<span>Selected"),ur=d("<div><div><div><label>Search Client</label></div><div><label>Tax Year</label><select></select></div><div><label>Filing Status</label><select><option value>Select filing status..."),mr=d("<div><div><div><span>1.</span><span>Client Selection</span></div><span>‚ñº"),_t=d("<option>"),gr=d("<div><span>A-Number:</span><span>"),pr=d("<div><span>Client ID:</span><span>"),fr=d("<div><div><div> </div><button type=button>Clear Selection</button></div><div><span>SSN:</span><span></span></div><div><span>Address:</span><span></span></div><div><span>Email:</span><span></span></div><div><span>Phone:</span><span>");const vr=[2023,2024,2025,2026],yr=S=>{const[D,te]=De(!0),le=m=>{if(!m)return"N/A";const k=m.replace(/\D/g,"");return k.length>=4?`***-**-${k.slice(-4)}`:"***-**-****"},ue=m=>{if(!m.residences)return"No address on file";const k=Object.keys(m.residences);if(k.length===0)return"No address on file";const f=m.residences[k[0]],z=[f.addressLineOne,f.addressLineTwo,f.city,f.state,f.zipcode].filter(Boolean);return z.length>0?z.join(", "):"No address on file"},me=m=>{A.selectClient(m),S.onClientSelected&&S.onClientSelected(m)},re=()=>{A.selectClient(null)},Q=m=>{A.setTaxYear(m)},Se=m=>{A.setFilingStatus(m)},ge={background:"var(--card-bg, #ffffff)","border-radius":"var(--border-radius, 8px)",border:"1px solid var(--border-color, #e2e8f0)","margin-bottom":"1rem",overflow:"hidden"},_e={display:"flex","justify-content":"space-between","align-items":"center",padding:"1rem 1.5rem",background:"var(--section-header-bg, #f8fafc)","border-bottom":D()?"1px solid var(--border-color, #e2e8f0)":"none",cursor:"pointer"},ie={display:"flex","align-items":"center",gap:"0.75rem","font-weight":"600","font-size":"1.125rem",color:"var(--text-primary, #1e293b)"},we={padding:"1.5rem"},Ce={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem","margin-bottom":"1.5rem"},pe={display:"flex","flex-direction":"column",gap:"0.5rem"},ne={"font-size":"0.875rem","font-weight":"500",color:"var(--text-secondary, #64748b)"},se={width:"100%",padding:"0.75rem",border:"2px solid var(--border-color, #e2e8f0)","border-radius":"var(--border-radius, 8px)","font-size":"1rem","font-family":"inherit",background:"white",cursor:"pointer"},ve={background:"var(--success-light, #f0fdf4)","border-radius":"var(--border-radius, 8px)",border:"1px solid var(--success-border, #86efac)",padding:"1.5rem","margin-top":"1rem"},ye={display:"flex","justify-content":"space-between","align-items":"flex-start","margin-bottom":"1rem"},he={"font-weight":"600","font-size":"1.125rem",color:"var(--success-dark, #166534)"},xe={padding:"0.5rem 1rem",background:"var(--danger-color, #ef4444)",color:"white",border:"none","border-radius":"var(--border-radius, 6px)",cursor:"pointer","font-size":"0.875rem","font-weight":"500"},oe={display:"flex","margin-bottom":"0.5rem","font-size":"0.9375rem"},ae={"font-weight":"500",color:"var(--text-secondary, #64748b)","min-width":"100px"},de={color:"var(--text-primary, #1e293b)"},O={"font-size":"1.25rem"};return(()=>{var m=mr(),k=m.firstChild,f=k.firstChild,z=f.firstChild;z.nextSibling;var j=f.nextSibling;return t(m,ge),k.$$click=()=>te(!D()),t(f,ie),t(z,O),e(f,i(g,{get when(){return v.selectedClient},get children(){var N=cr();return N.style.setProperty("background","var(--success-color, #22c55e)"),N.style.setProperty("color","white"),N.style.setProperty("padding","0.25rem 0.5rem"),N.style.setProperty("border-radius","9999px"),N.style.setProperty("font-size","0.75rem"),N.style.setProperty("font-weight","500"),N}}),null),j.style.setProperty("transition","transform 0.2s ease"),e(m,i(g,{get when(){return D()},get children(){var N=ur(),be=N.firstChild,Y=be.firstChild,fe=Y.firstChild,Z=Y.nextSibling,Pe=Z.firstChild,G=Pe.nextSibling,P=Z.nextSibling,C=P.firstChild,T=C.nextSibling;return T.firstChild,t(N,we),t(be,Ce),e(Y,i(Jt,{placeholder:"Search by name, email, or ID...",onSelect:me}),null),G.addEventListener("change",h=>Q(parseInt(h.currentTarget.value))),e(G,i(Ae,{each:vr,children:h=>(()=>{var q=_t();return q.value=h,e(q,h),q})()})),T.addEventListener("change",h=>Se(h.currentTarget.value)),e(T,i(Ae,{get each(){return Object.entries(nr)},children:([h,q])=>(()=>{var c=_t();return c.value=h,e(c,q),c})()}),null),e(N,i(g,{get when(){return v.selectedClient},children:h=>(()=>{var q=fr(),c=q.firstChild,n=c.firstChild,u=n.firstChild,E=n.nextSibling,U=c.nextSibling,L=U.firstChild,s=L.nextSibling,x=U.nextSibling,I=x.firstChild,p=I.nextSibling,r=x.nextSibling,F=r.firstChild,$=F.nextSibling,H=r.nextSibling,y=H.firstChild,M=y.nextSibling;return t(q,ve),t(c,ye),t(n,he),e(n,()=>h().firstName,u),e(n,(()=>{var b=We(()=>!!h().middleName);return()=>b()?`${h().middleName} `:""})(),null),e(n,()=>h().lastName,null),E.$$click=re,t(E,xe),e(s,()=>le(h().ss)),e(p,()=>ue(h())),e($,()=>h().email||"N/A"),e(M,()=>h().phoneNumber||"N/A"),e(q,i(g,{get when(){return h().alienNumber},get children(){var b=gr(),X=b.firstChild,W=X.nextSibling;return e(W,()=>h().alienNumber),w(B=>{var ee=oe,ce=ae,a=de;return B.e=t(b,ee,B.e),B.t=t(X,ce,B.t),B.a=t(W,a,B.a),B},{e:void 0,t:void 0,a:void 0}),b}}),null),e(q,i(g,{get when(){return h().clientNotaryId},get children(){var b=pr(),X=b.firstChild,W=X.nextSibling;return e(W,()=>h().clientNotaryId),w(B=>{var ee={...oe,"margin-top":"0.5rem","padding-top":"0.5rem","border-top":"1px dashed var(--border-color, #e2e8f0)"},ce=ae,a={...de,"font-family":"monospace","font-size":"0.875rem"};return B.e=t(b,ee,B.e),B.t=t(X,ce,B.t),B.a=t(W,a,B.a),B},{e:void 0,t:void 0,a:void 0}),b}}),null),w(b=>{var X=oe,W=ae,B=de,ee=oe,ce=ae,a=de,R=oe,_=ae,o=de,ke=oe,Le=ae,Fe=de;return b.e=t(U,X,b.e),b.t=t(L,W,b.t),b.a=t(s,B,b.a),b.o=t(x,ee,b.o),b.i=t(I,ce,b.i),b.n=t(p,a,b.n),b.s=t(r,R,b.s),b.h=t(F,_,b.h),b.r=t($,o,b.r),b.d=t(H,ke,b.d),b.l=t(y,Le,b.l),b.u=t(M,Fe,b.u),b},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),q})()}),null),w(h=>{var q={...pe,"grid-column":"span 2"},c=ne,n=pe,u=ne,E=se,U=pe,L=ne,s=se;return h.e=t(Y,q,h.e),h.t=t(fe,c,h.t),h.a=t(Z,n,h.a),h.o=t(Pe,u,h.o),h.i=t(G,E,h.i),h.n=t(P,U,h.n),h.s=t(C,L,h.s),h.h=t(T,s,h.h),h},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),w(()=>G.value=v.taxYear),w(()=>T.value=v.filingStatus||""),N}}),null),w(N=>{var be=_e,Y=D()?"rotate(180deg)":"rotate(0deg)";return N.e=t(k,be,N.e),Y!==N.t&&((N.t=Y)!=null?j.style.setProperty("transform",Y):j.style.removeProperty("transform")),N},{e:void 0,t:void 0}),m})()};Oe(["click"]);var hr=d("<span> document"),xr=d("<div><span>‚ö†Ô∏è</span><span>Please select a client first to view or upload documents."),br=d("<div><span>‚è≥</span><span>Loading existing documents for this client..."),$r=d("<div><span>‚ùå</span><span>"),Sr=d("<div><span>‚ö†Ô∏è</span><span>"),_r=d("<div><span>üìã</span><span>"),wr=d("<div><div></div><div><strong>Drag and drop</strong> your tax documents here</div><div>Accepts PDF, JPG, and PNG files (W-2, 1099, 1098, K-1, receipts)</div><button type=button>Browse Files"),Cr=d("<div><span>üìÅ Documents (<!>)</span><div><button type=button><span>‚Üª</span><span>Refresh</span></button><button type=button><span>üîÑ</span><span>"),Pr=d("<div>"),Dr=d("<div><div>üì≠</div><div>No documents found for this client.</div><div>Upload tax documents using the drop zone above."),kr=d("<div><input type=file multiple accept=.pdf,.jpg,.jpeg,.png>"),Ar=d("<div><div><div><span>2.</span><span>Document Upload</span></div><span>‚ñº"),Tr=d("<span>SERVER"),wt=d("<span>"),Er=d("<div><div>"),Ir=d("<div>‚ùå "),zr=d("<div>AI Confidence: <!>%"),Lr=d("<div>Payer: <!> "),Fr=d("<span>Wages: $"),Rr=d("<span>Fed Tax: $"),Nr=d("<span>SS Wages: $"),Br=d("<span>SS Tax: $"),Ur=d("<span>Medicare: $"),Wr=d("<span>State Tax: $"),Or=d("<span>Local Tax: $"),jr=d("<span>NEC: $"),Yr=d("<span>Rents: $"),Mr=d("<span>Royalties: $"),Vr=d("<span>Other Inc: $"),Gr=d("<span>Interest: $"),Xr=d("<span>Tax-Exempt Int: $"),qr=d("<span>Dividends: $"),Hr=d("<span>Qual Div: $"),Kr=d("<span>Cap Gains: $"),Qr=d("<span>Mortgage Int: $"),Zr=d("<span>Property Tax: $"),Jr=d("<span>Points: $"),en=d("<span>Tuition Paid: $"),tn=d("<span>Scholarships: $"),rn=d("<span>Business Inc: $"),nn=d("<span>Guar Pmts: $"),ln=d("<span>SE Earnings: $"),on=d("<span>Fed Withheld: $"),sn=d("<div><div>Extracted Data:</div><div>"),an=d('<button type=button title="View document">üëÅÔ∏è View'),dn=d('<button type=button title="Download document">‚¨áÔ∏è Download'),cn=d('<button type=button title="Reprocess document">üîÑ Reprocess'),un=d('<div><div></div><div><div><span></span></div><div><span></span><span>‚óè </span></div></div><div><button type=button title="Remove from list">‚úï Remove');const mn=["application/pdf","image/jpeg","image/png"],gn=()=>{const[S,D]=De(!0),[te,le]=De(!1),[ue,me]=De(null),[re,Q]=De(!1),[Se,ge]=De(null),[_e,ie]=De(!1),[we,Ce]=De(null);let pe;Ue(er(()=>[v.selectedClient?.clientNotaryId,v.taxYear],async([n,u])=>{if(n){Q(!0),ge(null);try{const E=await lt(n,u);A.setDocuments(E)}catch(E){console.error("Error loading existing documents:",E),ge("Failed to load existing documents")}finally{Q(!1)}}},{defer:!0}));const ne=()=>`doc_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,se=(n,u)=>v.documents.find(U=>U.originalFileName===n||U.originalFileName?.toLowerCase()===n.toLowerCase()&&U.fileSize===u)||null,ve=n=>{const u=n.toLowerCase();return u.includes("w2")||u.includes("w-2")?"w2":u.includes("1099-nec")||u.includes("1099nec")?"1099_nec":u.includes("1099-misc")||u.includes("1099misc")?"1099_misc":u.includes("1099-int")||u.includes("1099int")?"1099_int":u.includes("1099-div")||u.includes("1099div")?"1099_div":u.includes("1098-t")||u.includes("1098t")?"1098_t":u.includes("1098")?"1098":u.includes("k-1")||u.includes("k1")||u.includes("schedule k")?"schedule_k1":u.includes("receipt")||u.includes("expense")?"receipt":"other"},ye=async n=>{const u=v.selectedClient?.clientNotaryId;if(!u){me("Please select a client first");return}if(se(n.name,n.size)){Ce(`File "${n.name}" already exists. Skipping upload.`),setTimeout(()=>Ce(null),5e3);return}const U=ne(),L=ve(n.name),s={id:U,clientNotaryId:u,documentType:"other",drakeFormType:L,fileUrl:URL.createObjectURL(n),originalFileName:n.name,fileSize:n.size,mimeType:n.type,uploadedAt:Date.now(),uploadStatus:"uploading",processingProgress:10};A.addDocument(s),me(null);try{const x=await ir(n,u,v.taxYear);if(!x.success||!x.documentId){A.updateDocument(U,{uploadStatus:"error",errorMessage:x.error||"Upload failed"});return}const I=x.documentId;A.updateDocument(U,{id:I,fileUrl:x.document?.fileUrl||s.fileUrl,uploadStatus:"analyzing",processingProgress:40});const p=await ht(I);if(!p.success||!p.document){A.updateDocument(U,{uploadStatus:"error",errorMessage:p.error||"Processing failed"});return}const r=xt(p.document);A.updateDocument(U,{...r,processingProgress:100})}catch(x){console.error("Error processing file:",x),A.updateDocument(U,{uploadStatus:"error",errorMessage:x.message||"An unexpected error occurred"})}},he=async n=>{await ye(n)},xe=async n=>{A.updateDocument(n,{uploadStatus:"analyzing",processingProgress:20});try{const u=await ht(n);if(u.success&&u.document){const E=xt(u.document);A.updateDocument(n,{...E,processingProgress:100})}else A.updateDocument(n,{uploadStatus:"error",errorMessage:u.error||"Reprocessing failed"})}catch(u){A.updateDocument(n,{uploadStatus:"error",errorMessage:u.message})}},oe=async()=>{const n=v.documents.map(u=>u.id);if(n.length!==0){ie(!0);try{await lr(n);const u=v.selectedClient?.clientNotaryId;if(u){const E=await lt(u,v.taxYear);A.setDocuments(E)}}catch{ge("Failed to reprocess documents")}finally{ie(!1)}}},ae=n=>{n.fileUrl&&window.open(n.fileUrl,"_blank")},de=n=>{if(n.fileUrl){const u=document.createElement("a");u.href=n.fileUrl,u.download=n.originalFileName||"document",u.click()}},O=n=>{n.preventDefault(),le(!1);const u=n.dataTransfer?.files;u&&Array.from(u).filter(E=>mn.includes(E.type)).forEach(E=>he(E))},m=n=>{const u=n.target,E=u.files;E&&Array.from(E).forEach(U=>he(U)),u.value=""},k=async n=>{if(confirm("Are you sure you want to permanently delete this document?"))try{A.removeDocument(n);const u=await or(n);u.success||console.error("Failed to delete document from server:",u.error)}catch(u){console.error("Error deleting document:",u)}},f=async()=>{const n=v.selectedClient?.clientNotaryId;if(n){Q(!0),ge(null);try{const u=await lt(n,v.taxYear);A.setDocuments(u)}catch{ge("Failed to refresh documents")}finally{Q(!1)}}},z=n=>{switch(n){case"uploading":return"var(--info-color, #3b82f6)";case"analyzing":return"var(--warning-color, #f59e0b)";case"analyzed":return"var(--success-color, #22c55e)";case"verified":return"var(--success-dark, #16a34a)";case"error":return"var(--danger-color, #ef4444)";default:return"var(--text-muted, #94a3b8)"}},j=n=>{switch(n){case"uploading":return"Uploading...";case"analyzing":return"Analyzing...";case"analyzed":return"Ready for Review";case"verified":return"Verified";case"error":return"Error";default:return"Pending"}},N=n=>n?n<1024?`${n} B`:n<1024*1024?`${(n/1024).toFixed(1)} KB`:`${(n/(1024*1024)).toFixed(1)} MB`:"",be=n=>n?new Date(n).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",Y=n=>n?.includes("pdf")?"üìÑ":n?.includes("image")?"üñºÔ∏è":"üìé",fe={background:"var(--card-bg, #ffffff)","border-radius":"var(--border-radius, 8px)",border:"1px solid var(--border-color, #e2e8f0)","margin-bottom":"1rem",overflow:"hidden"},Z={display:"flex","justify-content":"space-between","align-items":"center",padding:"1rem 1.5rem",background:"var(--section-header-bg, #f8fafc)","border-bottom":S()?"1px solid var(--border-color, #e2e8f0)":"none",cursor:"pointer"},Pe={display:"flex","align-items":"center",gap:"0.75rem","font-weight":"600","font-size":"1.125rem",color:"var(--text-primary, #1e293b)"},G={background:"var(--primary-color, #3b82f6)",color:"white",padding:"0.25rem 0.625rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"600"},P={padding:"1.5rem"},C=n=>({border:`2px dashed ${n?"var(--primary-color, #3b82f6)":"var(--border-color, #cbd5e1)"}`,"border-radius":"var(--border-radius, 8px)",padding:"2rem","text-align":"center",background:n?"var(--primary-light, #eff6ff)":"var(--bg-light, #f8fafc)",transition:"all 0.2s ease",cursor:"pointer"}),T=n=>{const u={info:{bg:"#eff6ff",color:"#3b82f6"},error:{bg:"#fef2f2",color:"#ef4444"},warning:{bg:"#fffbeb",color:"#f59e0b"},success:{bg:"#f0fdf4",color:"#22c55e"}};return{padding:"0.75rem 1rem",background:u[n].bg,"border-radius":"6px","margin-bottom":"1rem",display:"flex","align-items":"center",gap:"0.5rem",color:u[n].color,"font-size":"0.875rem"}},h=(n="secondary")=>({...{primary:{background:"var(--primary-color, #3b82f6)",color:"white",border:"none"},secondary:{background:"transparent",color:"var(--text-secondary, #64748b)",border:"1px solid var(--border-color, #e2e8f0)"},ghost:{background:"transparent",color:"var(--text-muted, #94a3b8)",border:"none"}}[n],padding:"0.375rem 0.75rem","border-radius":"6px",cursor:"pointer","font-size":"0.875rem",display:"inline-flex","align-items":"center",gap:"0.375rem"}),q=n=>({display:"flex","align-items":"flex-start",gap:"1rem",padding:"1rem",background:n?"var(--bg-light, #f8fafc)":"var(--card-bg, #ffffff)","border-radius":"8px",border:`1px solid ${n?"var(--border-color, #e2e8f0)":"var(--primary-light, #bfdbfe)"}`,"margin-bottom":"0.75rem"}),c=()=>!!v.selectedClient?.clientNotaryId;return(()=>{var n=Ar(),u=n.firstChild,E=u.firstChild,U=E.firstChild;U.nextSibling;var L=E.nextSibling;return t(n,fe),u.$$click=()=>D(!S()),t(E,Pe),e(E,i(g,{get when(){return v.documents.length>0},get children(){var s=hr(),x=s.firstChild;return t(s,G),e(s,()=>v.documents.length,x),e(s,()=>v.documents.length!==1?"s":"",null),s}}),null),L.style.setProperty("transition","transform 0.2s ease"),e(n,i(g,{get when(){return S()},get children(){var s=kr(),x=s.firstChild;t(s,P),e(s,i(g,{get when(){return!c()},get children(){var p=xr();return w(r=>t(p,T("warning"),r)),p}}),x),x.addEventListener("change",m);var I=pe;return typeof I=="function"?tr(I,x):pe=x,x.style.setProperty("display","none"),e(s,i(g,{get when(){return re()},get children(){var p=br();return w(r=>t(p,T("info"),r)),p}}),null),e(s,i(g,{get when(){return Se()},get children(){var p=$r(),r=p.firstChild,F=r.nextSibling;return e(F,Se),w($=>t(p,T("error"),$)),p}}),null),e(s,i(g,{get when(){return ue()},get children(){var p=Sr(),r=p.firstChild,F=r.nextSibling;return e(F,ue),w($=>t(p,T("warning"),$)),p}}),null),e(s,i(g,{get when(){return we()},get children(){var p=_r(),r=p.firstChild,F=r.nextSibling;return e(F,we),w($=>t(p,T("warning"),$)),p}}),null),e(s,i(g,{get when(){return c()},get children(){var p=wr(),r=p.firstChild,F=r.nextSibling,$=F.nextSibling,H=$.nextSibling;return p.$$click=()=>pe?.click(),p.addEventListener("drop",O),p.addEventListener("dragleave",()=>le(!1)),p.addEventListener("dragover",y=>{y.preventDefault(),le(!0)}),r.style.setProperty("font-size","3rem"),r.style.setProperty("margin-bottom","0.5rem"),e(r,()=>te()?"üì•":"üì§"),F.style.setProperty("color","var(--text-secondary, #64748b)"),F.style.setProperty("margin-bottom","0.25rem"),$.style.setProperty("color","var(--text-muted, #94a3b8)"),$.style.setProperty("font-size","0.875rem"),w(y=>{var M=C(te()),b={...h("primary"),"margin-top":"1rem",padding:"0.5rem 1.25rem"};return y.e=t(p,M,y.e),y.t=t(H,b,y.t),y},{e:void 0,t:void 0}),p}}),null),e(s,i(g,{get when(){return v.documents.length>0},get children(){return[(()=>{var p=Cr(),r=p.firstChild,F=r.firstChild,$=F.nextSibling;$.nextSibling;var H=r.nextSibling,y=H.firstChild,M=y.nextSibling,b=M.firstChild,X=b.nextSibling;return p.style.setProperty("display","flex"),p.style.setProperty("justify-content","space-between"),p.style.setProperty("align-items","center"),p.style.setProperty("margin-top","1.5rem"),p.style.setProperty("margin-bottom","1rem"),p.style.setProperty("padding-bottom","0.75rem"),p.style.setProperty("border-bottom","1px solid var(--border-color, #e2e8f0)"),r.style.setProperty("font-weight","600"),r.style.setProperty("color","var(--text-primary, #1e293b)"),r.style.setProperty("font-size","1rem"),e(r,()=>v.documents.length,$),H.style.setProperty("display","flex"),H.style.setProperty("gap","0.5rem"),y.$$click=f,M.$$click=oe,e(X,()=>_e()?"Processing...":"Reprocess All"),w(W=>{var B=h("secondary"),ee=re(),ce=h("secondary"),a=_e()||v.documents.length===0;return W.e=t(y,B,W.e),ee!==W.t&&(y.disabled=W.t=ee),W.a=t(M,ce,W.a),a!==W.o&&(M.disabled=W.o=a),W},{e:void 0,t:void 0,a:void 0,o:void 0}),p})(),(()=>{var p=Pr();return p.style.setProperty("overflow","auto"),p.style.setProperty("max-height","600px"),e(p,i(Ae,{get each(){return v.documents},children:r=>{const F=!r.id.startsWith("doc_");return(()=>{var $=un(),H=$.firstChild,y=H.nextSibling,M=y.firstChild,b=M.firstChild,X=M.nextSibling,W=X.firstChild,B=W.nextSibling;B.firstChild;var ee=y.nextSibling,ce=ee.firstChild;return H.style.setProperty("font-size","2rem"),H.style.setProperty("flex-shrink","0"),e(H,()=>Y(r.mimeType)),y.style.setProperty("flex","1"),y.style.setProperty("min-width","0"),M.style.setProperty("display","flex"),M.style.setProperty("align-items","center"),M.style.setProperty("gap","0.5rem"),M.style.setProperty("margin-bottom","0.25rem"),b.style.setProperty("font-weight","500"),b.style.setProperty("color","var(--text-primary, #1e293b)"),b.style.setProperty("white-space","nowrap"),b.style.setProperty("overflow","hidden"),b.style.setProperty("text-overflow","ellipsis"),e(b,()=>r.originalFileName),e(M,i(g,{when:F,get children(){var a=Tr();return a.style.setProperty("background","var(--success-light, #dcfce7)"),a.style.setProperty("color","var(--success-color, #16a34a)"),a.style.setProperty("padding","0.125rem 0.5rem"),a.style.setProperty("border-radius","4px"),a.style.setProperty("font-size","0.7rem"),a.style.setProperty("font-weight","500"),a}}),null),X.style.setProperty("display","flex"),X.style.setProperty("flex-wrap","wrap"),X.style.setProperty("gap","0.75rem"),X.style.setProperty("font-size","0.8rem"),X.style.setProperty("color","var(--text-muted, #94a3b8)"),X.style.setProperty("margin-bottom","0.5rem"),e(X,i(g,{get when(){return r.fileSize},get children(){var a=wt();return e(a,()=>N(r.fileSize)),a}}),W),W.style.setProperty("background","var(--bg-light, #f1f5f9)"),W.style.setProperty("padding","0.125rem 0.5rem"),W.style.setProperty("border-radius","4px"),e(W,()=>st[r.drakeFormType||"other"]),e(X,i(g,{get when(){return r.uploadedAt},get children(){var a=wt();return e(a,()=>be(r.uploadedAt)),a}}),B),e(B,()=>j(r.uploadStatus),null),e(y,i(g,{get when(){return r.uploadStatus==="uploading"||r.uploadStatus==="analyzing"},get children(){var a=Er(),R=a.firstChild;return a.style.setProperty("height","4px"),a.style.setProperty("background","var(--border-color, #e2e8f0)"),a.style.setProperty("border-radius","2px"),a.style.setProperty("overflow","hidden"),a.style.setProperty("margin-bottom","0.5rem"),R.style.setProperty("height","100%"),R.style.setProperty("transition","width 0.3s ease"),w(_=>{var o=`${r.processingProgress||0}%`,ke=z(r.uploadStatus);return o!==_.e&&((_.e=o)!=null?R.style.setProperty("width",o):R.style.removeProperty("width")),ke!==_.t&&((_.t=ke)!=null?R.style.setProperty("background",ke):R.style.removeProperty("background")),_},{e:void 0,t:void 0}),a}}),null),e(y,i(g,{get when(){return r.uploadStatus==="error"&&r.errorMessage},get children(){var a=Ir();return a.firstChild,a.style.setProperty("color","var(--danger-color, #ef4444)"),a.style.setProperty("font-size","0.8rem"),a.style.setProperty("margin-bottom","0.5rem"),e(a,()=>r.errorMessage,null),a}}),null),e(y,i(g,{get when(){return r.aiConfidence&&r.uploadStatus!=="error"},get children(){var a=zr(),R=a.firstChild,_=R.nextSibling;return _.nextSibling,a.style.setProperty("font-size","0.75rem"),a.style.setProperty("color","var(--success-color, #22c55e)"),e(a,()=>r.aiConfidence,_),a}}),null),e(y,i(g,{get when(){return r.payerInfo?.name},get children(){var a=Lr(),R=a.firstChild,_=R.nextSibling;return _.nextSibling,a.style.setProperty("font-size","0.75rem"),a.style.setProperty("color","var(--text-secondary, #64748b)"),a.style.setProperty("margin-top","0.25rem"),e(a,()=>r.payerInfo?.name,_),e(a,()=>r.payerInfo?.ein?`(EIN: ${r.payerInfo.ein})`:"",null),a}}),null),e(y,i(g,{get when(){return We(()=>!!r.extractedAmounts)()&&Object.keys(r.extractedAmounts).length>0},get children(){var a=sn(),R=a.firstChild,_=R.nextSibling;return a.style.setProperty("margin-top","0.5rem"),a.style.setProperty("padding","0.5rem"),a.style.setProperty("background","var(--bg-light, #f1f5f9)"),a.style.setProperty("border-radius","4px"),a.style.setProperty("font-size","0.75rem"),R.style.setProperty("font-weight","500"),R.style.setProperty("margin-bottom","0.25rem"),R.style.setProperty("color","var(--text-primary, #1e293b)"),_.style.setProperty("display","grid"),_.style.setProperty("grid-template-columns","repeat(2, 1fr)"),_.style.setProperty("gap","0.25rem 1rem"),_.style.setProperty("color","var(--text-secondary, #64748b)"),e(_,i(g,{get when(){return r.extractedAmounts?.wages},get children(){var o=Fr();return o.firstChild,e(o,()=>r.extractedAmounts?.wages?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.federalTaxWithheld},get children(){var o=Rr();return o.firstChild,e(o,()=>r.extractedAmounts?.federalTaxWithheld?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.socialSecurityWages},get children(){var o=Nr();return o.firstChild,e(o,()=>r.extractedAmounts?.socialSecurityWages?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.socialSecurityTax},get children(){var o=Br();return o.firstChild,e(o,()=>r.extractedAmounts?.socialSecurityTax?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.medicareTax},get children(){var o=Ur();return o.firstChild,e(o,()=>r.extractedAmounts?.medicareTax?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.stateTaxWithheld},get children(){var o=Wr();return o.firstChild,e(o,()=>r.extractedAmounts?.stateTaxWithheld?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.localTaxWithheld},get children(){var o=Or();return o.firstChild,e(o,()=>r.extractedAmounts?.localTaxWithheld?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.nonEmployeeCompensation},get children(){var o=jr();return o.firstChild,e(o,()=>r.extractedAmounts?.nonEmployeeCompensation?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.rents},get children(){var o=Yr();return o.firstChild,e(o,()=>r.extractedAmounts?.rents?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.royalties},get children(){var o=Mr();return o.firstChild,e(o,()=>r.extractedAmounts?.royalties?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.otherIncome},get children(){var o=Vr();return o.firstChild,e(o,()=>r.extractedAmounts?.otherIncome?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.interestIncome},get children(){var o=Gr();return o.firstChild,e(o,()=>r.extractedAmounts?.interestIncome?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.taxExemptInterest},get children(){var o=Xr();return o.firstChild,e(o,()=>r.extractedAmounts?.taxExemptInterest?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.ordinaryDividends},get children(){var o=qr();return o.firstChild,e(o,()=>r.extractedAmounts?.ordinaryDividends?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.qualifiedDividends},get children(){var o=Hr();return o.firstChild,e(o,()=>r.extractedAmounts?.qualifiedDividends?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.capitalGainDistributions},get children(){var o=Kr();return o.firstChild,e(o,()=>r.extractedAmounts?.capitalGainDistributions?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.mortgageInterest},get children(){var o=Qr();return o.firstChild,e(o,()=>r.extractedAmounts?.mortgageInterest?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.propertyTaxes},get children(){var o=Zr();return o.firstChild,e(o,()=>r.extractedAmounts?.propertyTaxes?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.pointsPaid},get children(){var o=Jr();return o.firstChild,e(o,()=>r.extractedAmounts?.pointsPaid?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.paymentsReceived},get children(){var o=en();return o.firstChild,e(o,()=>r.extractedAmounts?.paymentsReceived?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.scholarshipsGrants},get children(){var o=tn();return o.firstChild,e(o,()=>r.extractedAmounts?.scholarshipsGrants?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.ordinaryBusinessIncome},get children(){var o=rn();return o.firstChild,e(o,()=>r.extractedAmounts?.ordinaryBusinessIncome?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.guaranteedPayments},get children(){var o=nn();return o.firstChild,e(o,()=>r.extractedAmounts?.guaranteedPayments?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.selfEmploymentEarnings},get children(){var o=ln();return o.firstChild,e(o,()=>r.extractedAmounts?.selfEmploymentEarnings?.toLocaleString(),null),o}}),null),e(_,i(g,{get when(){return r.extractedAmounts?.federalTaxWithheld1099},get children(){var o=on();return o.firstChild,e(o,()=>r.extractedAmounts?.federalTaxWithheld1099?.toLocaleString(),null),o}}),null),a}}),null),ee.style.setProperty("display","flex"),ee.style.setProperty("flex-direction","column"),ee.style.setProperty("gap","0.375rem"),ee.style.setProperty("flex-shrink","0"),e(ee,i(g,{get when(){return r.fileUrl},get children(){return[(()=>{var a=an();return a.$$click=R=>{R.stopPropagation(),ae(r)},w(R=>t(a,h("secondary"),R)),a})(),(()=>{var a=dn();return a.$$click=R=>{R.stopPropagation(),de(r)},w(R=>t(a,h("secondary"),R)),a})()]}}),ce),e(ee,i(g,{get when(){return F&&r.uploadStatus!=="analyzing"},get children(){var a=cn();return a.$$click=R=>{R.stopPropagation(),xe(r.id)},w(R=>t(a,h("secondary"),R)),a}}),ce),ce.$$click=a=>{a.stopPropagation(),k(r.id)},w(a=>{var R=q(F),_=r.originalFileName,o=z(r.uploadStatus),ke=h("ghost");return a.e=t($,R,a.e),_!==a.t&&Ct(b,"title",a.t=_),o!==a.a&&((a.a=o)!=null?B.style.setProperty("color",o):B.style.removeProperty("color")),a.o=t(ce,ke,a.o),a},{e:void 0,t:void 0,a:void 0,o:void 0}),$})()}})),p})()]}}),null),e(s,i(g,{get when(){return c()&&!re()&&v.documents.length===0},get children(){var p=Dr(),r=p.firstChild,F=r.nextSibling,$=F.nextSibling;return p.style.setProperty("text-align","center"),p.style.setProperty("padding","2rem"),p.style.setProperty("color","var(--text-muted, #94a3b8)"),p.style.setProperty("margin-top","1rem"),r.style.setProperty("font-size","3rem"),r.style.setProperty("margin-bottom","0.5rem"),$.style.setProperty("font-size","0.875rem"),p}}),null),s}}),null),w(s=>{var x=Z,I=S()?"rotate(180deg)":"rotate(0deg)";return s.e=t(u,x,s.e),I!==s.t&&((s.t=I)!=null?L.style.setProperty("transform",I):L.style.removeProperty("transform")),s},{e:void 0,t:void 0}),n})()};Oe(["click"]);var pn=d("<span> / <!> verified"),fn=d("<button type=button>‚úì Verify All (<!>)"),vn=d("<div><div>Review Progress</div><div><div></div></div><div> of "),yn=d("<div><div>üìã</div><div>No documents to review</div><div>Upload and process documents in the previous section to begin review"),ot=d("<div>"),hn=d("<div><div>‚úì</div><div>All documents verified!</div><div> document<!> ready for export"),xn=d("<div><div><div><span>3.</span><span>Document Review</span></div><span>‚ñº"),bn=d("<div>$"),$n=d("<span>‚úì"),Sn=d("<div><div><span></span><div><div></div><div>"),_n=d("<span>Manually edited"),wn=d("<button type=button>‚úì Verify"),Cn=d("<button type=button>‚Ü© Unverify"),Pn=d("<div><strong>Validation Issues:</strong> "),Dn=d('<div><div><div><div> </div><div> - </div></div><div><button type=button>‚úï</button></div></div><div><div><div><label>Document Type</label><select></select></div><div><label>Tax Year</label><input type=text readonly></div></div><div>Payer / Employer Information</div><div><div><label>Name</label><input type=text></div><div><label>EIN</label><input type=text placeholder=XX-XXXXXXX></div><div><label>Address</label><input type=text></div><div><label>City</label><input type=text></div><div><label>State</label><input type=text maxlength=2></div><div><label>ZIP</label><input type=text></div></div><div> - Extracted Amounts</div><div></div><div><div><label>Notes</label><textarea placeholder="Add any notes about this document...">'),kn=d("<option>"),An=d("<span> *"),Tn=d("<span>‚Üí <!> Line "),En=d("<div><label>Box <!>: </label><input type=text placeholder=0.00>");const In=()=>{const[S,D]=De(!0),[te,le]=De(null),ue=K(()=>v.documents.filter(c=>(c.uploadStatus==="analyzed"||c.uploadStatus==="verified")&&!c.verified)),me=K(()=>v.documents.filter(c=>c.uploadStatus==="analyzed"||c.uploadStatus==="verified")),re=K(()=>v.documents.filter(c=>c.verified).length),Q=K(()=>v.documents.filter(c=>c.uploadStatus==="analyzed"||c.verified).length),Se=K(()=>{const c=te();return c&&v.documents.find(n=>n.id===c)||null}),ge=(c,n)=>{A.updateDocument(c,{drakeFormType:n,manualOverride:!0})},_e=(c,n,u)=>{const E=v.documents.find(s=>s.id===c);if(!E)return;const U=parseFloat(u.replace(/,/g,""))||0,L={...E.extractedAmounts||{},[n]:U};A.updateDocument(c,{extractedAmounts:L,manualOverride:!0})},ie=(c,n,u)=>{const E=v.documents.find(L=>L.id===c);if(!E)return;const U={...E.payerInfo||{},[n]:u};A.updateDocument(c,{payerInfo:U,manualOverride:!0})},we=(c,n)=>{A.updateDocument(c,{notes:n})},Ce=c=>{A.verifyDocument(c)},pe=c=>{A.updateDocument(c,{verified:!1})},ne=()=>{ue().forEach(c=>{A.verifyDocument(c.id)})},se=c=>sr[c]?.boxes||[],ve=c=>c==null?"":c.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),ye=c=>(c?bt(c):null)?.icon||"üìÑ",he=c=>{const n=c.extractedAmounts;if(n)switch(c.drakeFormType){case"w2":return n.wages;case"1099_nec":return n.nonEmployeeCompensation;case"1099_misc":return n.rents||n.royalties||n.otherIncome;case"1099_int":return n.interestIncome;case"1099_div":return n.ordinaryDividends;case"1098":return n.mortgageInterest;case"1098_t":return n.paymentsReceived;case"schedule_k1":return n.ordinaryBusinessIncome;default:return n.totalAmount}},xe={background:"var(--card-bg, #ffffff)","border-radius":"var(--border-radius, 8px)",border:"1px solid var(--border-color, #e2e8f0)","margin-bottom":"1rem",overflow:"hidden"},oe={display:"flex","justify-content":"space-between","align-items":"center",padding:"1rem 1.5rem",background:"var(--section-header-bg, #f8fafc)","border-bottom":S()?"1px solid var(--border-color, #e2e8f0)":"none",cursor:"pointer"},ae={display:"flex","align-items":"center",gap:"0.75rem","font-weight":"600","font-size":"1.125rem",color:"var(--text-primary, #1e293b)"},de=c=>({background:c?"var(--success-color, #22c55e)":"var(--warning-color, #f59e0b)",color:"white",padding:"0.25rem 0.625rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"600"}),O={padding:"1.5rem"},m={display:"flex","align-items":"center",gap:"1rem","margin-bottom":"1.5rem",padding:"1rem",background:"var(--bg-light, #f8fafc)","border-radius":"var(--border-radius, 8px)"},k={flex:"1",height:"8px",background:"var(--border-color, #e2e8f0)","border-radius":"4px",overflow:"hidden"},f=c=>({height:"100%",width:`${c}%`,background:"var(--success-color, #22c55e)",transition:"width 0.3s ease"}),z={"font-size":"0.875rem",color:"var(--text-secondary, #64748b)","white-space":"nowrap"},j=(c="secondary")=>({...{primary:{background:"var(--primary-color, #3b82f6)",color:"white",border:"none"},success:{background:"var(--success-color, #22c55e)",color:"white",border:"none"},secondary:{background:"transparent",color:"var(--text-secondary, #64748b)",border:"1px solid var(--border-color, #e2e8f0)"},ghost:{background:"transparent",color:"var(--text-muted, #94a3b8)",border:"none"}}[c],padding:"0.5rem 1rem","border-radius":"6px",cursor:"pointer","font-weight":"500","font-size":"0.875rem",display:"inline-flex","align-items":"center",gap:"0.375rem"}),N={display:"grid","grid-template-columns":"repeat(auto-fill, minmax(280px, 1fr))",gap:"0.75rem","margin-bottom":"1.5rem"},be=(c,n)=>({padding:"1rem",border:`2px solid ${c?"var(--primary-color, #3b82f6)":n?"var(--success-color, #22c55e)":"var(--border-color, #e2e8f0)"}`,"border-radius":"8px",cursor:"pointer",background:n?"var(--success-light, #f0fdf4)":"var(--card-bg, #fff)",transition:"all 0.2s ease"}),Y={border:"1px solid var(--border-color, #e2e8f0)","border-radius":"8px",overflow:"hidden"},fe={display:"flex","justify-content":"space-between","align-items":"center",padding:"1rem 1.5rem",background:"var(--bg-light, #f8fafc)","border-bottom":"1px solid var(--border-color, #e2e8f0)"},Z={padding:"1.5rem","max-height":"500px",overflow:"auto"},Pe={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem","margin-bottom":"1.5rem"},G={display:"flex","flex-direction":"column",gap:"0.375rem"},P={"font-size":"0.75rem","font-weight":"500",color:"var(--text-secondary, #64748b)","text-transform":"uppercase","letter-spacing":"0.05em"},C={width:"100%",padding:"0.5rem 0.75rem",border:"1px solid var(--border-color, #e2e8f0)","border-radius":"6px","font-size":"0.9375rem","font-family":"inherit","box-sizing":"border-box"},T={...C,background:"white",cursor:"pointer"},h={"font-weight":"600","font-size":"0.875rem",color:"var(--text-primary, #1e293b)","margin-bottom":"0.75rem","padding-bottom":"0.5rem","border-bottom":"1px solid var(--border-color, #e2e8f0)"},q={"text-align":"center",padding:"3rem",color:"var(--text-muted, #94a3b8)"};return(()=>{var c=xn(),n=c.firstChild,u=n.firstChild,E=u.firstChild;E.nextSibling;var U=u.nextSibling;return t(c,xe),n.$$click=()=>D(!S()),t(u,ae),e(u,i(g,{get when(){return Q()>0},get children(){var L=pn(),s=L.firstChild,x=s.nextSibling;return x.nextSibling,e(L,re,s),e(L,Q,x),w(I=>t(L,de(re()===Q()),I)),L}}),null),U.style.setProperty("transition","transform 0.2s ease"),e(c,i(g,{get when(){return S()},get children(){var L=ot();return t(L,O),e(L,i(g,{get when(){return Q()>0},get children(){var s=vn(),x=s.firstChild,I=x.nextSibling,p=I.firstChild,r=I.nextSibling,F=r.firstChild;return t(s,m),t(I,k),e(r,re,F),e(r,Q,null),e(s,i(g,{get when(){return ue().length>0},get children(){var $=fn(),H=$.firstChild,y=H.nextSibling;return y.nextSibling,$.$$click=ne,e($,()=>ue().length,y),w(M=>t($,j("success"),M)),$}}),null),w($=>{var H=z,y=f(Q()>0?re()/Q()*100:0),M=z;return $.e=t(x,H,$.e),$.t=t(p,y,$.t),$.a=t(r,M,$.a),$},{e:void 0,t:void 0,a:void 0}),s}}),null),e(L,i(g,{get when(){return Q()===0},get children(){var s=yn(),x=s.firstChild,I=x.nextSibling,p=I.nextSibling;return x.style.setProperty("font-size","3rem"),x.style.setProperty("margin-bottom","1rem"),I.style.setProperty("font-size","1.125rem"),I.style.setProperty("margin-bottom","0.5rem"),p.style.setProperty("font-size","0.875rem"),w(r=>t(s,q,r)),s}}),null),e(L,i(g,{get when(){return me().length>0},get children(){var s=ot();return t(s,N),e(s,i(Ae,{get each(){return me()},children:x=>(()=>{var I=Sn(),p=I.firstChild,r=p.firstChild,F=r.nextSibling,$=F.firstChild,H=$.nextSibling;return I.$$click=()=>le(x.id),p.style.setProperty("display","flex"),p.style.setProperty("align-items","flex-start"),p.style.setProperty("gap","0.75rem"),r.style.setProperty("font-size","1.5rem"),e(r,()=>ye(x.drakeFormType)),F.style.setProperty("flex","1"),F.style.setProperty("min-width","0"),$.style.setProperty("font-weight","500"),$.style.setProperty("white-space","nowrap"),$.style.setProperty("overflow","hidden"),$.style.setProperty("text-overflow","ellipsis"),$.style.setProperty("margin-bottom","0.25rem"),e($,()=>x.originalFileName),H.style.setProperty("font-size","0.8rem"),H.style.setProperty("color","var(--text-muted)"),e(H,()=>st[x.drakeFormType||"other"]),e(F,i(g,{get when(){return he(x)},get children(){var y=bn();return y.firstChild,y.style.setProperty("font-size","1rem"),y.style.setProperty("font-weight","600"),y.style.setProperty("margin-top","0.5rem"),y.style.setProperty("color","var(--text-primary)"),e(y,()=>ve(he(x)),null),y}}),null),e(F,i(g,{get when(){return x.payerInfo?.name},get children(){var y=ot();return y.style.setProperty("font-size","0.75rem"),y.style.setProperty("color","var(--text-muted)"),y.style.setProperty("margin-top","0.25rem"),e(y,()=>x.payerInfo?.name),y}}),null),e(p,i(g,{get when(){return x.verified},get children(){var y=$n();return y.style.setProperty("color","var(--success-color)"),y.style.setProperty("font-size","1.25rem"),y}}),null),w(y=>{var M=be(te()===x.id,x.verified||!1),b=x.originalFileName;return y.e=t(I,M,y.e),b!==y.t&&Ct($,"title",y.t=b),y},{e:void 0,t:void 0}),I})()})),s}}),null),e(L,i(g,{get when(){return Se()},children:s=>{const x=se(s().drakeFormType||"other"),I=bt(s().drakeFormType||"other");return(()=>{var p=Dn(),r=p.firstChild,F=r.firstChild,$=F.firstChild,H=$.firstChild,y=$.nextSibling,M=y.firstChild,b=F.nextSibling,X=b.firstChild,W=r.nextSibling,B=W.firstChild,ee=B.firstChild,ce=ee.firstChild,a=ce.nextSibling,R=ee.nextSibling,_=R.firstChild,o=_.nextSibling,ke=B.nextSibling,Le=ke.nextSibling,Fe=Le.firstChild,at=Fe.firstChild,Me=at.nextSibling,Ve=Fe.nextSibling,dt=Ve.firstChild,Ge=dt.nextSibling,Xe=Ve.nextSibling,ct=Xe.firstChild,qe=ct.nextSibling,He=Xe.nextSibling,ut=He.firstChild,Ke=ut.nextSibling,Qe=He.nextSibling,mt=Qe.firstChild,Ze=mt.nextSibling,gt=Qe.nextSibling,pt=gt.firstChild,Je=pt.nextSibling,je=Le.nextSibling,Dt=je.firstChild,et=je.nextSibling,ft=et.nextSibling,vt=ft.firstChild,yt=vt.firstChild,tt=yt.nextSibling;return t(p,Y),t(r,fe),$.style.setProperty("font-weight","600"),$.style.setProperty("font-size","1.125rem"),e($,()=>ye(s().drakeFormType),H),e($,()=>s().originalFileName,null),y.style.setProperty("font-size","0.875rem"),y.style.setProperty("color","var(--text-muted)"),y.style.setProperty("margin-top","0.25rem"),e(y,()=>I.formName,M),e(y,()=>I.description,null),e(y,i(g,{get when(){return s().aiConfidence},get children(){return[" ","| AI Confidence: ",We(()=>s().aiConfidence),"%"]}}),null),e(y,i(g,{get when(){return s().manualOverride},get children(){return[" ","| ",(()=>{var l=_n();return l.style.setProperty("color","var(--warning-color)"),l})()]}}),null),b.style.setProperty("display","flex"),b.style.setProperty("gap","0.5rem"),e(b,i(g,{get when(){return!s().verified},get children(){var l=wn();return l.$$click=()=>Ce(s().id),w($e=>t(l,j("success"),$e)),l}}),X),e(b,i(g,{get when(){return s().verified},get children(){var l=Cn();return l.$$click=()=>pe(s().id),w($e=>t(l,j("secondary"),$e)),l}}),X),X.$$click=()=>le(null),t(W,Z),a.addEventListener("change",l=>ge(s().id,l.currentTarget.value)),e(a,i(Ae,{get each(){return Object.entries(st)},children:([l,$e])=>(()=>{var Te=kn();return Te.value=l,e(Te,$e),Te})()})),Me.$$input=l=>ie(s().id,"name",l.currentTarget.value),Ge.$$input=l=>ie(s().id,"ein",l.currentTarget.value),qe.$$input=l=>ie(s().id,"address",l.currentTarget.value),Ke.$$input=l=>ie(s().id,"city",l.currentTarget.value),Ze.$$input=l=>ie(s().id,"state",l.currentTarget.value),Je.$$input=l=>ie(s().id,"zip",l.currentTarget.value),e(je,()=>I.formName,Dt),e(et,i(Ae,{each:x,children:l=>{const $e=s().extractedAmounts?.[l.dataField],Te=typeof $e=="number"?$e:void 0;return(()=>{var Ie=En(),Ee=Ie.firstChild,rt=Ee.firstChild,Ye=rt.nextSibling;Ye.nextSibling;var Re=Ee.nextSibling;return e(Ee,()=>l.boxNumber,Ye),e(Ee,()=>l.description,null),e(Ee,i(g,{get when(){return l.required},get children(){var J=An();return J.style.setProperty("color","var(--danger-color)"),J}}),null),Re.$$input=J=>_e(s().id,l.dataField,J.currentTarget.value),e(Ie,i(g,{get when(){return l.scheduleMapping},get children(){var J=Tn(),Ne=J.firstChild,ze=Ne.nextSibling;return ze.nextSibling,J.style.setProperty("font-size","0.7rem"),J.style.setProperty("color","var(--text-muted)"),e(J,()=>l.scheduleMapping?.schedule,ze),e(J,()=>l.scheduleMapping?.line,null),J}}),null),w(J=>{var Ne=G,ze=P,nt=C;return J.e=t(Ie,Ne,J.e),J.t=t(Ee,ze,J.t),J.a=t(Re,nt,J.a),J},{e:void 0,t:void 0,a:void 0}),w(()=>Re.value=Te!==void 0?ve(Te):""),Ie})()}})),ft.style.setProperty("margin-top","1rem"),tt.$$input=l=>we(s().id,l.currentTarget.value),e(W,i(g,{get when(){return s().errorMessage},get children(){var l=Pn(),$e=l.firstChild;return $e.nextSibling,l.style.setProperty("margin-top","1rem"),l.style.setProperty("padding","0.75rem"),l.style.setProperty("background","var(--danger-light, #fef2f2)"),l.style.setProperty("border-radius","6px"),l.style.setProperty("color","var(--danger-color, #ef4444)"),l.style.setProperty("font-size","0.875rem"),e(l,()=>s().errorMessage,null),l}}),null),w(l=>{var $e=j("ghost"),Te={...Pe,"margin-bottom":"1.5rem"},Ie=G,Ee=P,rt=T,Ye=G,Re=P,J=C,Ne=h,ze={...Pe,"margin-bottom":"1.5rem"},nt=G,kt=P,At=C,Tt=G,Et=P,It=C,zt=G,Lt=P,Ft=C,Rt=G,Nt=P,Bt=C,Ut=G,Wt=P,Ot=C,jt=G,Yt=P,Mt=C,Vt=h,Gt=Pe,Xt=G,qt=P,Ht={...C,"min-height":"60px",resize:"vertical"};return l.e=t(X,$e,l.e),l.t=t(B,Te,l.t),l.a=t(ee,Ie,l.a),l.o=t(ce,Ee,l.o),l.i=t(a,rt,l.i),l.n=t(R,Ye,l.n),l.s=t(_,Re,l.s),l.h=t(o,J,l.h),l.r=t(ke,Ne,l.r),l.d=t(Le,ze,l.d),l.l=t(Fe,nt,l.l),l.u=t(at,kt,l.u),l.c=t(Me,At,l.c),l.w=t(Ve,Tt,l.w),l.m=t(dt,Et,l.m),l.f=t(Ge,It,l.f),l.y=t(Xe,zt,l.y),l.g=t(ct,Lt,l.g),l.p=t(qe,Ft,l.p),l.b=t(He,Rt,l.b),l.T=t(ut,Nt,l.T),l.A=t(Ke,Bt,l.A),l.O=t(Qe,Ut,l.O),l.I=t(mt,Wt,l.I),l.S=t(Ze,Ot,l.S),l.W=t(gt,jt,l.W),l.C=t(pt,Yt,l.C),l.B=t(Je,Mt,l.B),l.v=t(je,Vt,l.v),l.k=t(et,Gt,l.k),l.x=t(vt,Xt,l.x),l.j=t(yt,qt,l.j),l.q=t(tt,Ht,l.q),l},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0,S:void 0,W:void 0,C:void 0,B:void 0,v:void 0,k:void 0,x:void 0,j:void 0,q:void 0}),w(()=>a.value=s().drakeFormType||"other"),w(()=>o.value=s().taxYear||v.taxYear),w(()=>Me.value=s().payerInfo?.name||""),w(()=>Ge.value=s().payerInfo?.ein||""),w(()=>qe.value=s().payerInfo?.address||""),w(()=>Ke.value=s().payerInfo?.city||""),w(()=>Ze.value=s().payerInfo?.state||""),w(()=>Je.value=s().payerInfo?.zip||""),w(()=>tt.value=s().notes||""),p})()}}),null),e(L,i(g,{get when(){return We(()=>me().length>0&&re()===Q())()&&!te()},get children(){var s=hn(),x=s.firstChild,I=x.nextSibling,p=I.nextSibling,r=p.firstChild,F=r.nextSibling;return F.nextSibling,x.style.setProperty("font-size","2.5rem"),x.style.setProperty("margin-bottom","0.75rem"),x.style.setProperty("color","var(--success-color, #22c55e)"),I.style.setProperty("font-size","1.125rem"),I.style.setProperty("margin-bottom","0.5rem"),I.style.setProperty("color","var(--success-dark, #166534)"),p.style.setProperty("font-size","0.875rem"),p.style.setProperty("color","var(--success-color, #22c55e)"),e(p,re,r),e(p,()=>re()!==1?"s":"",F),w($=>t(s,{...q,background:"var(--success-light, #f0fdf4)","border-radius":"8px",padding:"2rem"},$)),s}}),null),L}}),null),w(L=>{var s=oe,x=S()?"rotate(180deg)":"rotate(0deg)";return L.e=t(n,s,L.e),x!==L.t&&((L.t=x)!=null?U.style.setProperty("transform",x):U.style.removeProperty("transform")),L},{e:void 0,t:void 0}),c})()};Oe(["click","input"]);var it=d("<div>"),zn=d("<p>Records exported: "),Ln=d("<div><p>Export completed successfully!"),Fn=d("<div><header><div><h1>Drake Tax Export</h1></div><div><span>Tax Year:</span><select></select></div></header><div></div><main><div>"),Rn=d("<option>"),Nn=d('<svg width=12 height=12 viewBox="0 0 12 12"fill=none><path d="M2.5 6L5 8.5L9.5 4"stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round>'),Bn=d("<div><div></div><span>"),Un=d("<p>Complete document review to see tax form summaries."),Wn=d("<div><strong></strong>: <!> document(s) - $"),On=d("<button>Generate Drake Export"),jn=d("<p>Complete all previous steps to export to Drake.");const Yn=[2023,2024,2025,2026],Mn=()=>{const S=K(()=>v.selectedClient?"completed":v.sectionState.clientSelector?"in_progress":"pending"),D=K(()=>v.documents.length>0?"completed":v.selectedClient&&v.sectionState.documentUpload?"in_progress":"pending"),te=K(()=>{const f=v.documents;return f.length>0&&f.every(z=>z.verified)?"completed":f.length>0&&v.sectionState.documentReview?"in_progress":"pending"}),le=K(()=>v.formSummaries.length>0?"completed":te()==="completed"&&v.sectionState.formSummary?"in_progress":"pending"),ue=K(()=>v.exportStatus==="completed"?"completed":v.exportStatus==="generating"||le()==="completed"&&v.sectionState.export?"in_progress":"pending"),me=K(()=>[{id:"client",label:"Client",status:S()},{id:"upload",label:"Upload",status:D()},{id:"review",label:"Review",status:te()},{id:"export",label:"Export",status:ue()}]);Ue(()=>{v.selectedClient&&!v.sectionState.documentUpload&&A.toggleSection("documentUpload")}),Ue(()=>{v.documents.length>0&&!v.sectionState.documentReview&&A.toggleSection("documentReview")}),Ue(()=>{const f=v.documents;f.length>0&&f.every(z=>z.verified)&&!v.sectionState.formSummary&&(A.toggleSection("formSummary"),A.calculateFormSummaries())}),Ue(()=>{v.formSummaries.length>0&&!v.sectionState.export&&A.toggleSection("export")});const re=K(()=>v.selectedClient?"1":"0"),Q=K(()=>v.documents.length.toString()),Se=K(()=>{const f=v.documents.filter(j=>j.verified).length,z=v.documents.length;return z>0?`${f}/${z}`:"0"}),ge=K(()=>v.formSummaries.length.toString()),_e=K(()=>{switch(v.exportStatus){case"completed":return"Done";case"generating":return"...";case"ready":return"Ready";default:return"-"}}),ie=f=>{switch(f){case"completed":return"#10B981";case"in_progress":return"#3B82F6";default:return"#9CA3AF"}},we={display:"flex","flex-direction":"column",height:"100%","min-height":"100vh",background:"var(--background-color, #f5f5f5)"},Ce={display:"flex","justify-content":"space-between","align-items":"center",padding:"1.5rem 2rem",background:"var(--surface-color, #ffffff)","border-bottom":"1px solid var(--border-color, #e5e7eb)","box-shadow":"var(--shadow-sm, 0 1px 2px rgba(0, 0, 0, 0.05))"},pe={display:"flex","align-items":"center",gap:"1rem"},ne={"font-size":"1.5rem","font-weight":"700",color:"var(--text-primary, #1f2937)",margin:"0"},se={display:"flex","align-items":"center",gap:"0.5rem"},ve={"font-size":"0.875rem",color:"var(--text-secondary, #6B7280)","font-weight":"500"},ye={padding:"0.5rem 1rem","border-radius":"6px",border:"1px solid var(--border-color, #e5e7eb)",background:"var(--surface-color, #ffffff)","font-size":"0.875rem","font-weight":"600",cursor:"pointer"},he={display:"flex","align-items":"center",gap:"0.5rem",padding:"1rem 2rem",background:"var(--surface-color, #ffffff)","border-bottom":"1px solid var(--border-color, #e5e7eb)"},xe=f=>({display:"flex","align-items":"center",gap:"0.5rem"}),oe=f=>({width:"2rem",height:"2rem","border-radius":"50%",background:ie(f),color:"#ffffff",display:"flex","align-items":"center","justify-content":"center","font-size":"0.75rem","font-weight":"600",transition:"background 0.3s ease"}),ae=f=>({"font-size":"0.875rem","font-weight":f==="in_progress"?"600":"500",color:f==="pending"?"var(--text-secondary, #6B7280)":"var(--text-primary, #1f2937)"}),de=f=>({width:"3rem",height:"2px",background:f==="completed"?"#10B981":"var(--border-color, #e5e7eb)",margin:"0 0.25rem",transition:"background 0.3s ease"}),O={flex:"1",overflow:"auto",padding:"1.5rem 2rem"},m={display:"flex","flex-direction":"column",gap:"1rem","max-width":"1200px",margin:"0 auto"},k=f=>{const z=f.target;A.setTaxYear(parseInt(z.value))};return(()=>{var f=Fn(),z=f.firstChild,j=z.firstChild,N=j.firstChild,be=j.nextSibling,Y=be.firstChild,fe=Y.nextSibling,Z=z.nextSibling,Pe=Z.nextSibling,G=Pe.firstChild;return t(z,Ce),t(j,pe),t(N,ne),t(be,se),t(Y,ve),fe.addEventListener("change",k),t(fe,ye),e(fe,i(Ae,{each:Yn,children:P=>(()=>{var C=Rn();return C.value=P,e(C,P),C})()})),t(Z,he),e(Z,i(Ae,{get each(){return me()},children:(P,C)=>[(()=>{var T=Bn(),h=T.firstChild,q=h.nextSibling;return e(h,i(g,{get when(){return P.status==="completed"},get fallback(){return C()+1},get children(){return Nn()}})),e(q,()=>P.label),w(c=>{var n=xe(P.status),u=oe(P.status),E=ae(P.status);return c.e=t(T,n,c.e),c.t=t(h,u,c.t),c.a=t(q,E,c.a),c},{e:void 0,t:void 0,a:void 0}),T})(),i(g,{get when(){return C()<me().length-1},get children(){var T=it();return w(h=>t(T,de(P.status),h)),T}})]})),t(Pe,O),e(G,i(Be,{title:"Client Selection",icon:"1",get isOpen(){return v.sectionState.clientSelector},onToggle:()=>A.toggleSection("clientSelector"),get status(){return S()},get badge(){return re()},get children(){return i(yr,{})}}),null),e(G,i(Be,{title:"Document Upload",icon:"2",get isOpen(){return v.sectionState.documentUpload},onToggle:()=>A.toggleSection("documentUpload"),get status(){return D()},get badge(){return Q()},get children(){return i(gn,{})}}),null),e(G,i(Be,{title:"Document Review",icon:"3",get isOpen(){return v.sectionState.documentReview},onToggle:()=>A.toggleSection("documentReview"),get status(){return te()},get badge(){return Se()},get children(){return i(In,{})}}),null),e(G,i(Be,{title:"Tax Form Summary",icon:"4",get isOpen(){return v.sectionState.formSummary},onToggle:()=>A.toggleSection("formSummary"),get status(){return le()},get badge(){return ge()},get children(){var P=it();return P.style.setProperty("padding","1rem"),P.style.setProperty("text-align","center"),P.style.setProperty("color","var(--text-secondary, #6B7280)"),e(P,i(g,{get when(){return v.formSummaries.length>0},get fallback(){return Un()},get children(){return i(Ae,{get each(){return v.formSummaries},children:C=>(()=>{var T=Wn(),h=T.firstChild,q=h.nextSibling,c=q.nextSibling;return c.nextSibling,T.style.setProperty("padding","0.75rem"),T.style.setProperty("background","var(--surface-color, #f9fafb)"),T.style.setProperty("border-radius","6px"),T.style.setProperty("margin-bottom","0.5rem"),T.style.setProperty("text-align","left"),e(h,()=>C.formType),e(T,()=>C.documentCount,c),e(T,()=>C.totalAmount.toLocaleString(),null),T})()})}})),P}}),null),e(G,i(Be,{title:"Export to Drake",icon:"5",get isOpen(){return v.sectionState.export},onToggle:()=>A.toggleSection("export"),get status(){return ue()},get badge(){return _e()},get children(){var P=it();return P.style.setProperty("padding","1rem"),P.style.setProperty("text-align","center"),P.style.setProperty("color","var(--text-secondary, #6B7280)"),e(P,i(g,{get when(){return v.exportStatus==="completed"},get fallback(){return i(g,{get when(){return le()==="completed"},get fallback(){return jn()},get children(){var C=On();return C.$$click=()=>A.setExportStatus("ready"),C.style.setProperty("padding","0.75rem 1.5rem"),C.style.setProperty("background","var(--primary-color, #3B82F6)"),C.style.setProperty("color","#ffffff"),C.style.setProperty("border","none"),C.style.setProperty("border-radius","6px"),C.style.setProperty("font-size","1rem"),C.style.setProperty("font-weight","600"),C.style.setProperty("cursor","pointer"),C}})},get children(){var C=Ln();return C.firstChild,C.style.setProperty("color","var(--success-color, #10B981)"),e(C,i(g,{get when(){return v.exportResult},get children(){var T=zn();return T.firstChild,e(T,()=>v.exportResult?.recordCount,null),T}}),null),C}})),P}}),null),w(P=>{var C=we,T=m;return P.e=t(f,C,P.e),P.t=t(G,T,P.t),P},{e:void 0,t:void 0}),w(()=>fe.value=v.taxYear),f})()};Oe(["click"]);var Vn=d("<div>");const Kn=()=>{rr();const S={width:"100%",height:"100%","min-height":"100vh",background:"var(--background-color, #f5f5f5)"};return(()=>{var D=Vn();return t(D,S),e(D,i(Mn,{})),D})()};export{Kn as default};
