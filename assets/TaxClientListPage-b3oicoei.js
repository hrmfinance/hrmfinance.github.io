import{G as Me,c as C,D as Oe,e as re,t as b,j as m,i as a,a as d,B as L,v as f,b as P,F as j,S as $,w as Y,aB as Ae,M as Fe,d as Xe}from"./index-BwmeK1hP.js";import{j as je,l as Re}from"./taxPortalApi-BKVe_xTl.js";import"./drakeTypes-DcjcYEfx.js";var qe=b("<div><div>Loading clients..."),Ge=b("<div><div></div><div></div><div>"),E=b("<div>"),Ue=b("<div><button>Manual Entry</button><button>Import from Notary"),Je=b("<div>Client data loaded. Review and edit fields below before creating."),We=b("<div><label>Search Notary Client"),Ze=b("<div><label>Address (from Notary)</label><div><div>"),He=b("<div><label>Tax Year</label><div>"),Ke=b("<div><div><div><h1>Tax Clients</h1><p>Manage your tax clients and their documents</p></div></div><div><div></div><div>"),le=b("<button>"),Qe=b("<span>"),Ve=b("<div><div></div><div><div><span> </span></div><div><span></span></div><div>/<!> docs</div><div>Last activity: ");const lt=()=>{const R=Me(),[q,G]=C([]),[I,U]=C(!0),[_,ae]=C(""),[N,oe]=C("all"),[se,k]=C(!1),[n,p]=C({firstName:"",middleName:"",lastName:"",email:"",phone:"",ssn:"",dateOfBirth:"",address:"",city:"",state:"",zipCode:"",taxYear:2024}),[J,W]=C(!1),[w,Z]=C(!1),[H,M]=C(null);Oe(async()=>{U(!0);try{const o=(await je()).map(c=>({...c,status:ne(c),lastActivity:c.updatedAt||c.createdAt,requiredDocs:8}));G(o)}catch(t){re("Error loading tax clients:",t)}finally{U(!1)}});const ne=t=>{const o=t.documentCount||0,c=t.verifiedDocumentCount||0,v=8;return c>=v?"complete":o>=v?"ready":o>0?"in_progress":"needs_docs"},O=()=>{let t=q();const o=_().toLowerCase().trim();return o&&(t=t.filter(c=>c.firstName.toLowerCase().includes(o)||c.lastName.toLowerCase().includes(o)||c.email?.toLowerCase().includes(o)||c.phone?.includes(o))),N()!=="all"&&(t=t.filter(c=>c.status===N())),t},ie=t=>t?new Date(t).toISOString().split("T")[0]:"",de=t=>{if(!t.residences)return null;const o=Object.values(t.residences);return o.find(c=>!c.toDate)||o[o.length-1]||null},ce=t=>{M(t);const o=de(t);p({firstName:t.firstName||"",middleName:t.middleName||"",lastName:t.lastName||"",email:t.email||"",phone:t.phoneNumber||"",ssn:t.ss||"",dateOfBirth:ie(t.dateOfBirth||t.dob),address:o?.addressLineOne||"",city:o?.city||"",state:o?.state||"",zipCode:o?.zipcode||"",taxYear:n().taxYear})},K=t=>{Z(t),M(null),p({firstName:"",middleName:"",lastName:"",email:"",phone:"",ssn:"",dateOfBirth:"",address:"",city:"",state:"",zipCode:"",taxYear:n().taxYear})},me=async()=>{const t=n();if(!(!t.firstName.trim()||!t.lastName.trim())){W(!0);try{const o=await Re({firstName:t.firstName.trim(),middleName:t.middleName?.trim()||void 0,lastName:t.lastName.trim(),email:t.email.trim()||void 0,phone:t.phone.trim()||void 0,ssn:t.ssn?.trim()||void 0,dateOfBirth:t.dateOfBirth||void 0,address:t.address?.trim()||void 0,city:t.city?.trim()||void 0,state:t.state?.trim()||void 0,zipCode:t.zipCode?.trim()||void 0,taxYear:t.taxYear}),c={...o,status:"needs_docs",lastActivity:Date.now(),requiredDocs:8};G([c,...q()]),k(!1),p({firstName:"",middleName:"",lastName:"",email:"",phone:"",ssn:"",dateOfBirth:"",address:"",city:"",state:"",zipCode:"",taxYear:2024}),Z(!1),M(null),R(`/accounting/tax-client/${o.id}`)}catch(o){re("Error creating client:",o),alert("Error creating client. Please try again.")}finally{W(!1)}}},ye=t=>{R(`/accounting/tax-client/${t}`)},ue=(t,o)=>`${t.charAt(0)}${o.charAt(0)}`.toUpperCase(),z=t=>{switch(t){case"complete":return"#22c55e";case"ready":return"#3b82f6";case"in_progress":return"#f59e0b";case"needs_docs":return"#ef4444";default:return"#6b7280"}},pe=t=>{switch(t){case"complete":return"Complete";case"ready":return"Ready";case"in_progress":return"In Progress";case"needs_docs":return"Needs Docs";default:return"Unknown"}},ge=t=>{if(!t)return"No activity";const c=Date.now()-t,v=Math.floor(c/(1e3*60*60*24)),S=Math.floor(c/(1e3*60*60)),B=Math.floor(c/(1e3*60));return v>30?new Date(t).toLocaleDateString():v>0?`${v} day${v>1?"s":""} ago`:S>0?`${S} hour${S>1?"s":""} ago`:B>0?`${B} min ago`:"Just now"},ve=[{value:"all",label:"All",color:"#6b7280"},{value:"needs_docs",label:"Needs Docs",color:"#ef4444"},{value:"in_progress",label:"In Progress",color:"#f59e0b"},{value:"ready",label:"Ready",color:"#3b82f6"},{value:"complete",label:"Complete",color:"#22c55e"}],he={padding:"1.5rem","max-width":"1400px",margin:"0 auto","min-height":"100vh",background:"var(--background-color)"},fe={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"1.5rem","flex-wrap":"wrap",gap:"1rem"},be={display:"flex",gap:"1rem","margin-bottom":"1.5rem","flex-wrap":"wrap","align-items":"center"},xe={flex:"1","min-width":"250px","max-width":"400px"},Ce={display:"flex",gap:"0.5rem","flex-wrap":"wrap"},Pe=(t,o)=>({padding:"0.5rem 1rem",border:`1px solid ${t?o:"var(--border-color)"}`,"border-radius":"9999px",background:t?o:"transparent",color:t?"white":"var(--text-primary)",cursor:"pointer","font-size":"0.875rem","font-weight":"500",transition:"all 0.2s","white-space":"nowrap"}),we={display:"grid","grid-template-columns":"repeat(auto-fill, minmax(320px, 1fr))",gap:"1rem"},$e={background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-md)",padding:"1.25rem",cursor:"pointer",transition:"all 0.2s ease",display:"flex",gap:"1rem","align-items":"flex-start"},Ne=t=>({width:"48px",height:"48px","min-width":"48px","border-radius":"50%",background:`linear-gradient(135deg, ${z(t)}, ${z(t)}dd)`,color:"white",display:"flex","align-items":"center","justify-content":"center","font-weight":"600","font-size":"1rem"}),Se={flex:"1","min-width":"0"},_e={"font-weight":"600","font-size":"1rem",color:"var(--text-primary)",margin:"0 0 0.25rem 0",display:"flex","align-items":"center",gap:"0.5rem","flex-wrap":"wrap"},ke={background:"var(--primary-color)",color:"white",padding:"0.125rem 0.5rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"500"},ze=t=>({display:"inline-flex","align-items":"center",gap:"0.25rem",padding:"0.25rem 0.5rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"500",background:`${z(t)}20`,color:z(t)}),Be=t=>({width:"8px",height:"8px","border-radius":"50%",background:z(t)}),De={"font-size":"0.875rem",color:"var(--text-muted)","margin-top":"0.5rem"},Te={"font-size":"0.75rem",color:"var(--text-muted)","margin-top":"0.25rem"},Q={"text-align":"center",padding:"4rem 2rem",color:"var(--text-muted)"},A={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},Le={display:"flex",gap:"1rem","justify-content":"flex-end","margin-top":"1.5rem"};return(()=>{var t=Ke(),o=t.firstChild,c=o.firstChild,v=c.firstChild,S=v.nextSibling,B=o.nextSibling,F=B.firstChild,V=F.nextSibling;return m(t,he),m(o,fe),v.style.setProperty("font-size","1.75rem"),v.style.setProperty("font-weight","700"),v.style.setProperty("margin","0 0 0.25rem 0"),v.style.setProperty("color","var(--text-primary)"),S.style.setProperty("color","var(--text-muted)"),S.style.setProperty("margin","0"),S.style.setProperty("font-size","0.875rem"),a(o,d(L,{onClick:()=>k(!0),children:"+ New Client"}),null),m(B,be),m(F,xe),a(F,d(f,{label:"",placeholder:"Search clients by name, email, or phone...",get value(){return _()},onChange:r=>ae(r)})),m(V,Ce),a(V,d(j,{each:ve,children:r=>(()=>{var e=le();return e.$$click=()=>oe(r.value),a(e,()=>r.label),P(l=>m(e,Pe(N()===r.value,r.color),l)),e})()})),a(t,d($,{get when(){return I()},get children(){var r=qe(),e=r.firstChild;return e.style.setProperty("font-size","1.25rem"),e.style.setProperty("margin-bottom","0.5rem"),P(l=>m(r,Q,l)),r}}),null),a(t,d($,{get when(){return Y(()=>!I())()&&O().length===0},get children(){var r=Ge(),e=r.firstChild,l=e.nextSibling,i=l.nextSibling;return e.style.setProperty("font-size","3rem"),e.style.setProperty("margin-bottom","1rem"),e.style.setProperty("opacity","0.5"),a(e,()=>_()||N()!=="all"?"(no results)":"(empty)"),l.style.setProperty("font-size","1.25rem"),l.style.setProperty("margin-bottom","0.5rem"),a(l,()=>_()||N()!=="all"?"No clients match your search criteria":"No tax clients yet"),i.style.setProperty("margin-bottom","1.5rem"),a(i,()=>_()||N()!=="all"?"Try adjusting your filters or search term":"Add your first client to get started"),a(r,d($,{get when(){return Y(()=>!_())()&&N()==="all"},get children(){return d(L,{onClick:()=>k(!0),children:"+ Add First Client"})}}),null),P(s=>m(r,Q,s)),r}}),null),a(t,d($,{get when(){return Y(()=>!I())()&&O().length>0},get children(){var r=E();return m(r,we),a(r,d(j,{get each(){return O()},children:e=>(()=>{var l=Ve(),i=l.firstChild,s=i.nextSibling,u=s.firstChild,g=u.firstChild,x=g.firstChild,h=u.nextSibling,D=h.firstChild,T=h.nextSibling,ee=T.firstChild,te=ee.nextSibling;te.nextSibling;var X=T.nextSibling;return X.firstChild,l.addEventListener("mouseleave",y=>{y.currentTarget.style.boxShadow="none",y.currentTarget.style.borderColor="var(--border-color)"}),l.addEventListener("mouseenter",y=>{y.currentTarget.style.boxShadow="var(--shadow-md)",y.currentTarget.style.borderColor="var(--primary-color)"}),l.$$click=()=>ye(e.id),m(l,$e),a(i,()=>ue(e.firstName,e.lastName)),m(s,Se),m(u,_e),g.style.setProperty("overflow","hidden"),g.style.setProperty("text-overflow","ellipsis"),g.style.setProperty("white-space","nowrap"),a(g,()=>e.firstName,x),a(g,()=>e.lastName,null),a(u,d($,{get when(){return e.taxYear},get children(){var y=Qe();return m(y,ke),a(y,()=>e.taxYear),y}}),null),a(h,()=>pe(e.status),null),m(T,De),a(T,()=>e.documentCount||0,ee),a(T,()=>e.requiredDocs||8,te),m(X,Te),a(X,()=>ge(e.lastActivity),null),P(y=>{var Ye=Ne(e.status),Ee=ze(e.status),Ie=Be(e.status);return y.e=m(i,Ye,y.e),y.t=m(h,Ee,y.t),y.a=m(D,Ie,y.a),y},{e:void 0,t:void 0,a:void 0}),l})()})),r}}),null),a(t,d(Fe,{get isOpen(){return se()},onClose:()=>k(!1),title:"New Tax Client",maxWidth:"90vw",get children(){return[(()=>{var r=Ue(),e=r.firstChild,l=e.nextSibling;return r.style.setProperty("display","flex"),r.style.setProperty("gap","0.5rem"),r.style.setProperty("margin-bottom","1.5rem"),r.style.setProperty("padding-bottom","1rem"),r.style.setProperty("border-bottom","1px solid var(--border-color)"),e.$$click=()=>K(!1),e.style.setProperty("flex","1"),e.style.setProperty("padding","0.75rem 1rem"),e.style.setProperty("border-radius","var(--border-radius-md)"),e.style.setProperty("cursor","pointer"),e.style.setProperty("font-weight","600"),e.style.setProperty("transition","all 0.2s"),l.$$click=()=>K(!0),l.style.setProperty("flex","1"),l.style.setProperty("padding","0.75rem 1rem"),l.style.setProperty("border-radius","var(--border-radius-md)"),l.style.setProperty("cursor","pointer"),l.style.setProperty("font-weight","600"),l.style.setProperty("transition","all 0.2s"),P(i=>{var s=`2px solid ${w()?"var(--border-color)":"var(--primary-color)"}`,u=w()?"transparent":"var(--primary-color)",g=w()?"var(--text-primary)":"white",x=`2px solid ${w()?"var(--primary-color)":"var(--border-color)"}`,h=w()?"var(--primary-color)":"transparent",D=w()?"white":"var(--text-primary)";return s!==i.e&&((i.e=s)!=null?e.style.setProperty("border",s):e.style.removeProperty("border")),u!==i.t&&((i.t=u)!=null?e.style.setProperty("background",u):e.style.removeProperty("background")),g!==i.a&&((i.a=g)!=null?e.style.setProperty("color",g):e.style.removeProperty("color")),x!==i.o&&((i.o=x)!=null?l.style.setProperty("border",x):l.style.removeProperty("border")),h!==i.i&&((i.i=h)!=null?l.style.setProperty("background",h):l.style.removeProperty("background")),D!==i.n&&((i.n=D)!=null?l.style.setProperty("color",D):l.style.removeProperty("color")),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),r})(),d($,{get when(){return w()},get children(){var r=We(),e=r.firstChild;return r.style.setProperty("margin-bottom","1.5rem"),e.style.setProperty("display","block"),e.style.setProperty("font-weight","500"),e.style.setProperty("margin-bottom","0.5rem"),e.style.setProperty("color","var(--text-primary)"),a(r,d(Ae,{placeholder:"Search by name, email, or A#...",onSelect:ce}),null),a(r,d($,{get when(){return H()},get children(){var l=Je();return l.style.setProperty("margin-top","0.75rem"),l.style.setProperty("padding","0.75rem"),l.style.setProperty("background","var(--success-light, #d1fae5)"),l.style.setProperty("border-radius","var(--border-radius-sm)"),l.style.setProperty("font-size","0.875rem"),l.style.setProperty("color","var(--success-color, #059669)"),l}}),null),r}}),(()=>{var r=E();return a(r,d(f,{label:"First Name",get value(){return n().firstName},onChange:e=>p({...n(),firstName:e}),required:!0,placeholder:"Enter first name"}),null),a(r,d(f,{label:"Middle Name",get value(){return n().middleName},onChange:e=>p({...n(),middleName:e}),placeholder:"Enter middle name"}),null),a(r,d(f,{label:"Last Name",get value(){return n().lastName},onChange:e=>p({...n(),lastName:e}),required:!0,placeholder:"Enter last name"}),null),a(r,d(f,{label:"SSN",get value(){return n().ssn},onChange:e=>p({...n(),ssn:e}),placeholder:"XXX-XX-XXXX"}),null),P(e=>m(r,A,e)),r})(),(()=>{var r=E();return a(r,d(f,{label:"Email",type:"email",get value(){return n().email},onChange:e=>p({...n(),email:e}),placeholder:"client@email.com"}),null),a(r,d(f,{label:"Phone",type:"tel",get value(){return n().phone},onChange:e=>p({...n(),phone:e}),placeholder:"(555) 123-4567"}),null),a(r,d(f,{label:"Date of Birth",type:"date",get value(){return n().dateOfBirth},onChange:e=>p({...n(),dateOfBirth:e})}),null),P(e=>m(r,{...A,"margin-top":"1rem"},e)),r})(),d($,{get when(){return Y(()=>!!w())()&&H()},get children(){var r=Ze(),e=r.firstChild,l=e.nextSibling,i=l.firstChild;return r.style.setProperty("margin-top","1rem"),e.style.setProperty("display","block"),e.style.setProperty("font-weight","500"),e.style.setProperty("margin-bottom","0.5rem"),e.style.setProperty("color","var(--text-primary)"),i.style.setProperty("grid-column","span 2"),a(i,d(f,{label:"",get value(){return n().address},onChange:s=>p({...n(),address:s}),placeholder:"Street address"})),a(l,d(f,{label:"",get value(){return n().city},onChange:s=>p({...n(),city:s}),placeholder:"City"}),null),a(l,d(f,{label:"",get value(){return n().state},onChange:s=>p({...n(),state:s}),placeholder:"State"}),null),a(l,d(f,{label:"",get value(){return n().zipCode},onChange:s=>p({...n(),zipCode:s}),placeholder:"ZIP Code"}),null),P(s=>m(l,A,s)),r}}),(()=>{var r=He(),e=r.firstChild,l=e.nextSibling;return r.style.setProperty("margin-top","1rem"),e.style.setProperty("display","block"),e.style.setProperty("font-weight","500"),e.style.setProperty("margin-bottom","0.5rem"),e.style.setProperty("color","var(--text-primary)"),l.style.setProperty("display","flex"),l.style.setProperty("gap","0.5rem"),a(l,d(j,{each:[2024,2025],children:i=>(()=>{var s=le();return s.$$click=()=>p({...n(),taxYear:i}),s.style.setProperty("padding","0.75rem 1.5rem"),s.style.setProperty("border-radius","var(--border-radius-md)"),s.style.setProperty("cursor","pointer"),s.style.setProperty("font-weight","600"),s.style.setProperty("transition","all 0.2s"),a(s,i),P(u=>{var g=`2px solid ${n().taxYear===i?"var(--primary-color)":"var(--border-color)"}`,x=n().taxYear===i?"var(--primary-color)":"transparent",h=n().taxYear===i?"white":"var(--text-primary)";return g!==u.e&&((u.e=g)!=null?s.style.setProperty("border",g):s.style.removeProperty("border")),x!==u.t&&((u.t=x)!=null?s.style.setProperty("background",x):s.style.removeProperty("background")),h!==u.a&&((u.a=h)!=null?s.style.setProperty("color",h):s.style.removeProperty("color")),u},{e:void 0,t:void 0,a:void 0}),s})()})),r})(),(()=>{var r=E();return m(r,Le),a(r,d(L,{variant:"secondary",onClick:()=>k(!1),children:"Cancel"}),null),a(r,d(L,{onClick:me,get disabled(){return!n().firstName.trim()||!n().lastName.trim()||J()},get children(){return J()?"Creating...":"Create Client"}}),null),r})()]}}),null),t})()};Xe(["click"]);export{lt as default};
