const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BvKKROTf.css"])))=>i.map(i=>d[i]);
import{e as l,aw as v}from"./index-oBwT-bFJ.js";const _=async(s,I)=>{try{l("Starting working PDF generation...");const f=(await v(()=>import("./index-oBwT-bFJ.js").then(r=>r.bb),__vite__mapDeps([0]))).default;l("jsPDF imported successfully");const e=new f;l("PDF document created");let t=20;const o=20,d=210;e.setFontSize(20),e.text("HRM FINANCE",o,t),e.setFontSize(16);const S="INVOICE",T=e.getTextWidth(S);e.text(S,d-o-T,t),t+=15,e.setFontSize(12);const g=`Invoice: ${s.invoice||"N/A"}`,b=e.getTextWidth(g);e.text(g,d-o-b,t),t+=8,e.setFontSize(10);const N=`Date: ${s.createDate?new Date(s.createDate).toLocaleDateString():"N/A"}`,m=e.getTextWidth(N);e.text(N,d-o-m,t),t=40,e.setFontSize(10),e.text(`Store: ${s.storeName||s.store||"N/A"}`,o,t),t+=6,e.text(`Order ID: ${s.ssg_sorder_key||"N/A"}`,o,t),t+=10,e.setDrawColor(200),e.line(o,t,d-o,t),t+=15,e.setFontSize(14),e.setFont(void 0,"bold"),e.text("CUSTOMER INFORMATION",o,t),e.setFont(void 0,"normal"),t+=10,e.setFontSize(10);const n=s.shipper_consignee||{};e.text(`Name: ${n.name||"N/A"}`,o,t),t+=6;const y=[n.firstName,n.middleName,n.lastName,n.lastName2].filter(Boolean).join(" ")||"N/A";e.text(`Full Name: ${y}`,o,t),t+=6,e.text(`Phone: ${n.phoneNumber||"N/A"}`,o,t),t+=6,e.text(`ID: ${n.cid||"N/A"}`,o,t),t+=6,n.passport&&(e.text(`Passport: ${n.passport}`,o,t),t+=6),t+=10,s.products&&s.products.length>0&&(e.setFontSize(14),e.setFont(void 0,"bold"),e.text("PRODUCTS",o,t),e.setFont(void 0,"normal"),t+=10,e.setFontSize(10),e.text("Code",o,t),e.text("Description",o+30,t),e.text("Qty",o+100,t),e.text("Price",o+120,t),e.text("Total",o+145,t),t+=2,e.line(o,t,d-o,t),t+=6,e.setFontSize(9),s.products.forEach(r=>{t>260&&(e.addPage(),t=20);const u=r.product?.code||"N/A",c=r.product?.label||"N/A",i=Math.abs(r.qty||0),F=parseFloat(r.salePrice||0),p=i*F;e.text(u,o,t);const z=60;let $=c;e.getTextWidth(c)>z&&($=c.substring(0,25)+"..."),e.text($,o+30,t),e.text(i.toString(),o+100,t),e.text(`$${F.toFixed(2)}`,o+120,t),e.text(`$${p.toFixed(2)}`,o+145,t),t+=6}),t+=10),s.reservas&&s.reservas.length>0&&(t>200&&(e.addPage(),t=20),e.setFontSize(14),e.setFont(void 0,"bold"),e.text("RESERVATIONS",o,t),e.setFont(void 0,"normal"),t+=10,e.setFontSize(10),e.text("Type",o,t),e.text("Qty",o+50,t),e.text("Price",o+80,t),e.text("Arancel",o+110,t),e.text("Total",o+145,t),t+=2,e.line(o,t,d-o,t),t+=6,e.setFontSize(9),s.reservas.forEach(r=>{t>260&&(e.addPage(),t=20);const u=r.type||"N/A",c=parseInt(r.qty||0),i=parseFloat(r.price||0),F=parseFloat(r.arancel||0),p=c*i+F;e.text(u,o,t),e.text(c.toString(),o+50,t),e.text(`$${i.toFixed(2)}`,o+80,t),e.text(r.arancel||"-",o+110,t),e.text(`$${p.toFixed(2)}`,o+145,t),t+=6}),t+=10),t>220&&(e.addPage(),t=20),t+=10,e.setFontSize(12);const a=120;s.productSubtotal!==void 0&&s.productSubtotal>0&&(e.text("Products Subtotal:",a,t),e.text(`$${s.productSubtotal.toFixed(2)}`,a+50,t),t+=8),s.reservaSubtotal!==void 0&&s.reservaSubtotal>0&&(e.text("Reservations Subtotal:",a,t),e.text(`$${s.reservaSubtotal.toFixed(2)}`,a+50,t),t+=8),t+=5,e.setFont(void 0,"bold"),e.setFontSize(14),e.text("TOTAL:",a,t),e.text(`$${(s.total||0).toFixed(2)}`,a+50,t),t=270,e.setFont(void 0,"normal"),e.setFontSize(10),e.setTextColor(100);const h="Thank you for your business!",A=e.getTextWidth(h);e.text(h,(d-A)/2,t),l("Saving PDF...");const P=`invoice-${s.invoice||"unknown"}.pdf`;e.save(P),l("PDF saved successfully:",P)}catch(x){throw console.error("Error in generateWorkingInvoicePDF:",x),console.error("Error details:",x),x}};export{_ as generateWorkingInvoicePDF};
