import{E as z,b as f,i as $}from"./index-C80V9X6h.js";const A=async(l,e,m="invoice-resume-report.pdf")=>{const t=new z("p","mm","a4"),p=t.internal.pageSize.width,d=t.internal.pageSize.height,s=15;let i=s;const n=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(o),u=o=>o?new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):e("invoiceReport.pdf.all"),C=()=>{t.setFillColor(44,62,80),t.rect(0,0,p,40,"F"),t.setTextColor(255,255,255),t.setFontSize(24),t.setFont("helvetica","bold"),t.text(e("invoiceReport.pdf.title"),p/2,20,{align:"center"}),t.setFontSize(12),t.setFont("helvetica","normal"),t.text(e("invoiceReport.pdf.subtitle"),p/2,30,{align:"center"}),i=50,t.setFillColor(236,240,241),t.rect(s,i-5,p-2*s,30,"F"),t.setTextColor(44,62,80),t.setFontSize(10),t.setFont("helvetica","normal"),t.text(`${e("invoiceReport.pdf.reportDate")} ${new Date().toLocaleDateString()}`,s+5,i+5),t.text(`${e("invoiceReport.pdf.dateRange")} ${u(l.dateRange.from)} - ${u(l.dateRange.to)}`,s+5,i+12),t.text(`${e("invoiceReport.pdf.totalInvoices")} ${l.totalInvoices}`,s+5,i+19);let o=$.getLocationById(l.store);const c=p/2+10;t.text(`${e("invoiceReport.store")}: ${l.store==="all"?e("invoiceReport.allStores"):o?.name}`,c,i+5);const r=l.shippingType==="all"?e("invoiceReport.pdf.allTypes"):l.shippingType==="SEA"?e("invoiceReport.maritime"):l.shippingType==="AEREO"?e("invoiceReport.air"):e("invoiceReport.notSet");t.text(`${e("invoiceReport.shippingTypeLabel")}: ${r}`,c,i+12),i+=35},y=o=>{t.setFillColor(52,152,219),t.rect(s,i,p-2*s,8,"F"),t.setTextColor(255,255,255),t.setFontSize(12),t.setFont("helvetica","bold"),t.text(o,s+3,i+5.5),i+=12},h=o=>i+o>d-s?(t.addPage(),i=s,!0):!1;C(),y(e("invoiceReport.pdf.paymentMethodsSummary"));const g=[[e("invoiceReport.cash"),n(l.paymentMethods.cash)],[e("invoiceReport.zelle"),n(l.paymentMethods.zelle)],[e("invoiceReport.other"),n(l.paymentMethods.other)],[e("invoiceReport.pdf.total").toUpperCase(),n(l.paymentMethods.total)]];if(f(t,{startY:i,head:[[e("invoiceReport.pdf.paymentMethod"),e("invoiceReport.pdf.amount")]],body:g,theme:"grid",headStyles:{fillColor:[44,62,80],fontSize:10,fontStyle:"bold"},bodyStyles:{fontSize:10},footStyles:{fillColor:[236,240,241],textColor:[44,62,80],fontStyle:"bold"},columnStyles:{0:{cellWidth:100},1:{halign:"right"}},didParseCell:function(o){o.row.index===g.length-1&&(o.cell.styles.fontStyle="bold",o.cell.styles.fillColor=[236,240,241])}}),i=t.lastAutoTable.finalY+10,l.productsByType.size>0){h(50),y(e("invoiceReport.pdf.productsSummary"));const o=Array.from(l.productsByType.entries()).sort((r,a)=>a[1].total-r[1].total).map(([r,a])=>[r,a.qty.toString(),n(a.total)]),c=Array.from(l.productsByType.values()).reduce((r,a)=>r+a.total,0);f(t,{startY:i,head:[[e("invoiceReport.pdf.product"),e("invoiceReport.pdf.quantity"),e("invoiceReport.pdf.total")]],body:o,foot:[[e("invoiceReport.pdf.total").toUpperCase(),"",n(c)]],theme:"striped",headStyles:{fillColor:[44,62,80],fontSize:10},bodyStyles:{fontSize:9},footStyles:{fillColor:[236,240,241],textColor:[44,62,80],fontStyle:"bold",fontSize:10},columnStyles:{0:{cellWidth:"auto"},1:{halign:"center",cellWidth:30},2:{halign:"right",cellWidth:40}}}),i=t.lastAutoTable.finalY+10}if(l.reservasByTypeAndPrice.size>0){h(50),y(e("invoiceReport.pdf.reservasSummary"));const o=[];Array.from(l.reservasByTypeAndPrice.entries()).sort((r,a)=>a[1].total-r[1].total).forEach(([r,a])=>{o.push([{content:r,styles:{fontStyle:"bold"}},{content:`${a.qty} ${e("invoiceReport.pdf.lbs")}`,styles:{halign:"center",fontStyle:"bold"}},{content:"",styles:{fillColor:[236,240,241]}},{content:n(a.total),styles:{halign:"right",fontStyle:"bold"}}]),Array.from(a.priceGroups.entries()).sort((v,S)=>v[0]-S[0]).forEach(([v,S])=>{o.push([{content:"",styles:{fillColor:[255,255,255]}},{content:"",styles:{fillColor:[255,255,255]}},{content:`${n(v)} X ${S?.qty} ${e("invoiceReport.pdf.lbs")}`,styles:{fontSize:8,textColor:[127,140,141]}},{content:"",styles:{fillColor:[255,255,255]}}])})});const c=Array.from(l.reservasByTypeAndPrice.values()).reduce((r,a)=>r+a.total,0);f(t,{startY:i,head:[[e("invoiceReport.pdf.type"),e("invoiceReport.pdf.totalQty"),e("invoiceReport.pdf.priceGroups"),e("invoiceReport.pdf.total")]],body:o,foot:[[e("invoiceReport.pdf.total").toUpperCase(),"","",n(c)]],theme:"grid",headStyles:{fillColor:[44,62,80],fontSize:10},bodyStyles:{fontSize:9},footStyles:{fillColor:[236,240,241],textColor:[44,62,80],fontStyle:"bold",fontSize:10},columnStyles:{0:{cellWidth:60},1:{halign:"center",cellWidth:30},2:{cellWidth:"auto"},3:{halign:"right",cellWidth:40}}}),i=t.lastAutoTable.finalY+10}if(l.otherServicesByType.size>0){h(50),y(e("invoiceReport.pdf.otherServicesTitle"));const o=Array.from(l.otherServicesByType.entries()).sort((c,r)=>r[1].total-c[1].total).map(([c,r])=>[`${c}`,n(r.total)]);f(t,{startY:i,head:[[e("invoiceReport.pdf.serviceType"),e("invoiceReport.pdf.total")]],body:o,foot:[[e("invoiceReport.totalOtherServices").toUpperCase(),n(l.transportTotal)]],theme:"striped",headStyles:{fillColor:[44,62,80],fontSize:10},bodyStyles:{fontSize:10},footStyles:{fillColor:[236,240,241],textColor:[44,62,80],fontStyle:"bold",fontSize:10},columnStyles:{0:{cellWidth:"auto"},1:{halign:"right",cellWidth:50}}}),i=t.lastAutoTable.finalY+10}h(60),y(e("invoiceReport.pdf.totalSummary"));const b=Array.from(l.productsByType.values()).reduce((o,c)=>o+c.total,0),x=Array.from(l.reservasByTypeAndPrice.values()).reduce((o,c)=>o+c.total,0),R=[[e("invoiceReport.pdf.productsTotal"),n(b)],[e("invoiceReport.pdf.reservasTotal"),n(x)],[e("invoiceReport.pdf.transportServices"),n(l.transportTotal)],[e("invoiceReport.aranceles"),n(l.arancelesTotal)],[e("invoiceReport.tax"),n(l.taxTotal)],[e("invoiceReport.pdf.grandTotal"),n(l.paymentMethods.total)]];f(t,{startY:i,body:R,theme:"plain",bodyStyles:{fontSize:11},columnStyles:{0:{cellWidth:120,fontStyle:"normal"},1:{halign:"right",cellWidth:60,fontStyle:"normal"}},didParseCell:function(o){o.row.index===R.length-1&&(o.cell.styles.fontStyle="bold",o.cell.styles.fontSize=14,o.cell.styles.fillColor=[231,76,60],o.cell.styles.textColor=[255,255,255])}});const T=t.getNumberOfPages();for(let o=1;o<=T;o++)t.setPage(o),t.setDrawColor(200,200,200),t.line(s,d-15,p-s,d-15),t.setFontSize(8),t.setTextColor(127,140,141),t.setFont("helvetica","normal"),t.text(`${e("invoiceReport.pdf.generatedOn")} ${new Date().toLocaleString()}`,s,d-10),t.text(`${e("invoiceReport.pdf.page")} ${o} ${e("invoiceReport.pdf.of")} ${T}`,p-s,d-10,{align:"right"});return t.save(m),m};export{A as generateInvoiceResumePDF};
