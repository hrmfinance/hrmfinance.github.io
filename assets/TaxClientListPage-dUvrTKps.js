import{G as Le,c as b,D as Te,e as K,t as h,j as o,i as a,a as d,B as D,v as k,b as L,F,S as T,w as I,M as De,d as ze}from"./index-CkaLb4-V.js";import{j as Ye,l as Ee}from"./taxPortalApi-DF7xImza.js";import"./drakeTypes-DcjcYEfx.js";var Ae=h("<div><div>Loading clients..."),Fe=h("<div><div></div><div></div><div>"),M=h("<div>"),Ie=h("<div><label>Tax Year</label><div>"),Me=h("<div><div><div><h1>Tax Clients</h1><p>Manage your tax clients and their documents</p></div></div><div><div></div><div>"),Q=h("<button>"),Be=h("<span>"),je=h("<div><div></div><div><div><span> </span></div><div><span></span></div><div>/<!> docs</div><div>Last activity: ");const Ue=()=>{const B=Le(),[j,q]=b([]),[z,R]=b(!0),[w,V]=b(""),[v,X]=b("all"),[Z,$]=b(!1),[m,C]=b({firstName:"",lastName:"",email:"",phone:"",taxYear:2024}),[G,U]=b(!1);Te(async()=>{R(!0);try{const l=(await Ye()).map(n=>({...n,status:ee(n),lastActivity:n.updatedAt||n.createdAt,requiredDocs:8}));q(l)}catch(e){K("Error loading tax clients:",e)}finally{R(!1)}});const ee=e=>{const l=e.documentCount||0,n=e.verifiedDocumentCount||0,u=8;return n>=u?"complete":l>=u?"ready":l>0?"in_progress":"needs_docs"},Y=()=>{let e=j();const l=w().toLowerCase().trim();return l&&(e=e.filter(n=>n.firstName.toLowerCase().includes(l)||n.lastName.toLowerCase().includes(l)||n.email?.toLowerCase().includes(l)||n.phone?.includes(l))),v()!=="all"&&(e=e.filter(n=>n.status===v())),e},te=async()=>{const e=m();if(!(!e.firstName.trim()||!e.lastName.trim())){U(!0);try{const l=await Ee({firstName:e.firstName.trim(),lastName:e.lastName.trim(),email:e.email.trim(),phone:e.phone.trim(),taxYear:e.taxYear}),n={...l,status:"needs_docs",lastActivity:Date.now(),requiredDocs:8};q([n,...j()]),$(!1),C({firstName:"",lastName:"",email:"",phone:"",taxYear:2024}),B(`/accounting/tax-client/${l.id}`)}catch(l){K("Error creating client:",l),alert("Error creating client. Please try again.")}finally{U(!1)}}},re=e=>{B(`/accounting/tax-client/${e}`)},ae=(e,l)=>`${e.charAt(0)}${l.charAt(0)}`.toUpperCase(),_=e=>{switch(e){case"complete":return"#22c55e";case"ready":return"#3b82f6";case"in_progress":return"#f59e0b";case"needs_docs":return"#ef4444";default:return"#6b7280"}},le=e=>{switch(e){case"complete":return"Complete";case"ready":return"Ready";case"in_progress":return"In Progress";case"needs_docs":return"Needs Docs";default:return"Unknown"}},ne=e=>{if(!e)return"No activity";const n=Date.now()-e,u=Math.floor(n/(1e3*60*60*24)),x=Math.floor(n/(1e3*60*60)),S=Math.floor(n/(1e3*60));return u>30?new Date(e).toLocaleDateString():u>0?`${u} day${u>1?"s":""} ago`:x>0?`${x} hour${x>1?"s":""} ago`:S>0?`${S} min ago`:"Just now"},oe=[{value:"all",label:"All",color:"#6b7280"},{value:"needs_docs",label:"Needs Docs",color:"#ef4444"},{value:"in_progress",label:"In Progress",color:"#f59e0b"},{value:"ready",label:"Ready",color:"#3b82f6"},{value:"complete",label:"Complete",color:"#22c55e"}],se={padding:"1.5rem","max-width":"1400px",margin:"0 auto","min-height":"100vh",background:"var(--background-color)"},ie={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"1.5rem","flex-wrap":"wrap",gap:"1rem"},de={display:"flex",gap:"1rem","margin-bottom":"1.5rem","flex-wrap":"wrap","align-items":"center"},ce={flex:"1","min-width":"250px","max-width":"400px"},me={display:"flex",gap:"0.5rem","flex-wrap":"wrap"},ue=(e,l)=>({padding:"0.5rem 1rem",border:`1px solid ${e?l:"var(--border-color)"}`,"border-radius":"9999px",background:e?l:"transparent",color:e?"white":"var(--text-primary)",cursor:"pointer","font-size":"0.875rem","font-weight":"500",transition:"all 0.2s","white-space":"nowrap"}),pe={display:"grid","grid-template-columns":"repeat(auto-fill, minmax(320px, 1fr))",gap:"1rem"},ye={background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-md)",padding:"1.25rem",cursor:"pointer",transition:"all 0.2s ease",display:"flex",gap:"1rem","align-items":"flex-start"},ge=e=>({width:"48px",height:"48px","min-width":"48px","border-radius":"50%",background:`linear-gradient(135deg, ${_(e)}, ${_(e)}dd)`,color:"white",display:"flex","align-items":"center","justify-content":"center","font-weight":"600","font-size":"1rem"}),fe={flex:"1","min-width":"0"},he={"font-weight":"600","font-size":"1rem",color:"var(--text-primary)",margin:"0 0 0.25rem 0",display:"flex","align-items":"center",gap:"0.5rem","flex-wrap":"wrap"},ve={background:"var(--primary-color)",color:"white",padding:"0.125rem 0.5rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"500"},xe=e=>({display:"inline-flex","align-items":"center",gap:"0.25rem",padding:"0.25rem 0.5rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"500",background:`${_(e)}20`,color:_(e)}),be=e=>({width:"8px",height:"8px","border-radius":"50%",background:_(e)}),we={"font-size":"0.875rem",color:"var(--text-muted)","margin-top":"0.5rem"},Ce={"font-size":"0.75rem",color:"var(--text-muted)","margin-top":"0.25rem"},J={"text-align":"center",padding:"4rem 2rem",color:"var(--text-muted)"},$e={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},_e={display:"flex",gap:"1rem","justify-content":"flex-end","margin-top":"1.5rem"};return(()=>{var e=Me(),l=e.firstChild,n=l.firstChild,u=n.firstChild,x=u.nextSibling,S=l.nextSibling,E=S.firstChild,O=E.nextSibling;return o(e,se),o(l,ie),u.style.setProperty("font-size","1.75rem"),u.style.setProperty("font-weight","700"),u.style.setProperty("margin","0 0 0.25rem 0"),u.style.setProperty("color","var(--text-primary)"),x.style.setProperty("color","var(--text-muted)"),x.style.setProperty("margin","0"),x.style.setProperty("font-size","0.875rem"),a(l,d(D,{onClick:()=>$(!0),children:"+ New Client"}),null),o(S,de),o(E,ce),a(E,d(k,{label:"",placeholder:"Search clients by name, email, or phone...",get value(){return w()},onChange:r=>V(r)})),o(O,me),a(O,d(F,{each:oe,children:r=>(()=>{var t=Q();return t.$$click=()=>X(r.value),a(t,()=>r.label),L(s=>o(t,ue(v()===r.value,r.color),s)),t})()})),a(e,d(T,{get when(){return z()},get children(){var r=Ae(),t=r.firstChild;return t.style.setProperty("font-size","1.25rem"),t.style.setProperty("margin-bottom","0.5rem"),L(s=>o(r,J,s)),r}}),null),a(e,d(T,{get when(){return I(()=>!z())()&&Y().length===0},get children(){var r=Fe(),t=r.firstChild,s=t.nextSibling,p=s.nextSibling;return t.style.setProperty("font-size","3rem"),t.style.setProperty("margin-bottom","1rem"),t.style.setProperty("opacity","0.5"),a(t,()=>w()||v()!=="all"?"(no results)":"(empty)"),s.style.setProperty("font-size","1.25rem"),s.style.setProperty("margin-bottom","0.5rem"),a(s,()=>w()||v()!=="all"?"No clients match your search criteria":"No tax clients yet"),p.style.setProperty("margin-bottom","1.5rem"),a(p,()=>w()||v()!=="all"?"Try adjusting your filters or search term":"Add your first client to get started"),a(r,d(T,{get when(){return I(()=>!w())()&&v()==="all"},get children(){return d(D,{onClick:()=>$(!0),children:"+ Add First Client"})}}),null),L(i=>o(r,J,i)),r}}),null),a(e,d(T,{get when(){return I(()=>!z())()&&Y().length>0},get children(){var r=M();return o(r,pe),a(r,d(F,{get each(){return Y()},children:t=>(()=>{var s=je(),p=s.firstChild,i=p.nextSibling,y=i.firstChild,g=y.firstChild,P=g.firstChild,f=y.nextSibling,Se=f.firstChild,N=f.nextSibling,W=N.firstChild,H=W.nextSibling;H.nextSibling;var A=N.nextSibling;return A.firstChild,s.addEventListener("mouseleave",c=>{c.currentTarget.style.boxShadow="none",c.currentTarget.style.borderColor="var(--border-color)"}),s.addEventListener("mouseenter",c=>{c.currentTarget.style.boxShadow="var(--shadow-md)",c.currentTarget.style.borderColor="var(--primary-color)"}),s.$$click=()=>re(t.id),o(s,ye),a(p,()=>ae(t.firstName,t.lastName)),o(i,fe),o(y,he),g.style.setProperty("overflow","hidden"),g.style.setProperty("text-overflow","ellipsis"),g.style.setProperty("white-space","nowrap"),a(g,()=>t.firstName,P),a(g,()=>t.lastName,null),a(y,d(T,{get when(){return t.taxYear},get children(){var c=Be();return o(c,ve),a(c,()=>t.taxYear),c}}),null),a(f,()=>le(t.status),null),o(N,we),a(N,()=>t.documentCount||0,W),a(N,()=>t.requiredDocs||8,H),o(A,Ce),a(A,()=>ne(t.lastActivity),null),L(c=>{var Pe=ge(t.status),Ne=xe(t.status),ke=be(t.status);return c.e=o(p,Pe,c.e),c.t=o(f,Ne,c.t),c.a=o(Se,ke,c.a),c},{e:void 0,t:void 0,a:void 0}),s})()})),r}}),null),a(e,d(De,{get isOpen(){return Z()},onClose:()=>$(!1),title:"New Tax Client",maxWidth:"500px",get children(){return[(()=>{var r=M();return o(r,$e),a(r,d(k,{label:"First Name",get value(){return m().firstName},onChange:t=>C({...m(),firstName:t}),required:!0,placeholder:"Enter first name"}),null),a(r,d(k,{label:"Last Name",get value(){return m().lastName},onChange:t=>C({...m(),lastName:t}),required:!0,placeholder:"Enter last name"}),null),a(r,d(k,{label:"Email",type:"email",get value(){return m().email},onChange:t=>C({...m(),email:t}),placeholder:"client@email.com"}),null),a(r,d(k,{label:"Phone",type:"tel",get value(){return m().phone},onChange:t=>C({...m(),phone:t}),placeholder:"(555) 123-4567"}),null),r})(),(()=>{var r=Ie(),t=r.firstChild,s=t.nextSibling;return r.style.setProperty("margin-top","1rem"),t.style.setProperty("display","block"),t.style.setProperty("font-weight","500"),t.style.setProperty("margin-bottom","0.5rem"),t.style.setProperty("color","var(--text-primary)"),s.style.setProperty("display","flex"),s.style.setProperty("gap","0.5rem"),a(s,d(F,{each:[2024,2025],children:p=>(()=>{var i=Q();return i.$$click=()=>C({...m(),taxYear:p}),i.style.setProperty("padding","0.75rem 1.5rem"),i.style.setProperty("border-radius","var(--border-radius-md)"),i.style.setProperty("cursor","pointer"),i.style.setProperty("font-weight","600"),i.style.setProperty("transition","all 0.2s"),a(i,p),L(y=>{var g=`2px solid ${m().taxYear===p?"var(--primary-color)":"var(--border-color)"}`,P=m().taxYear===p?"var(--primary-color)":"transparent",f=m().taxYear===p?"white":"var(--text-primary)";return g!==y.e&&((y.e=g)!=null?i.style.setProperty("border",g):i.style.removeProperty("border")),P!==y.t&&((y.t=P)!=null?i.style.setProperty("background",P):i.style.removeProperty("background")),f!==y.a&&((y.a=f)!=null?i.style.setProperty("color",f):i.style.removeProperty("color")),y},{e:void 0,t:void 0,a:void 0}),i})()})),r})(),(()=>{var r=M();return o(r,_e),a(r,d(D,{variant:"secondary",onClick:()=>$(!1),children:"Cancel"}),null),a(r,d(D,{onClick:te,get disabled(){return!m().firstName.trim()||!m().lastName.trim()||G()},get children(){return G()?"Creating...":"Create Client"}}),null),r})()]}}),null),e})()};ze(["click"]);export{Ue as default};
