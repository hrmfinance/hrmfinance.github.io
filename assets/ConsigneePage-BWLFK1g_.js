import{u as _e,c as $,o as xe,h as T,g as Se,aW as H,e as we,t as h,i as t,a as r,y as V,w as J,S as w,v as b,I as M,B as k,b as Ae,F as Ie,k as D,M as Ee}from"./index-CS63pYUf.js";var Be=h("<div><span>Filtrar por Business ID:"),Le=h("<div><strong></strong> "),Te=h("<div><p>Cargando..."),Me=h("<div>"),ke=h("<div><h3>Información Personal</h3><div>"),De=h("<div><h3>Dirección en Cuba</h3><div>"),Re=h("<div><h3>Información de Contacto</h3><div>"),ze=h("<div><h3>Información Adicional"),Oe=h("<div><h3>Configuración de Negocio</h3><p>Selecciona el Business ID al que pertenece este consignatario"),Ue=h("<div><h2></h2><div>"),Fe=h("<div><div><h1></h1><p></p></div><div><div><div>"),Ge=h("<th>Business ID"),qe=h("<div><table><thead><tr><th>Nombre Completo</th><th>CID</th><th>Teléfono</th><th>Email</th><th>Dirección</th><th>Nacionalidad</th><th>Acciones</th></tr></thead><tbody>"),je=h("<div><p>"),He=h("<td><span>"),Ve=h("<tr><td></td><td></td><td></td><td></td><td> #<br>, </td><td></td><td><div>");const Je=()=>{const{t:i}=_e(),[pe,ce]=$([]),[A,I]=$(!1),[_,ge]=$(""),[be,Y]=$(!1),[R,Q]=$(null),[G,ie]=$("all"),[de,ye]=$(["all"]),[y,W]=$({fullName:"",firstName:"",middleName:"",lastName:"",lastName2:"",passport:"",cid:"",nacionality:"",phoneNumber:"",altPhoneNumber:"",ybstreet:"",ybstreetNo:"",ybbetwen1:"",ybbetwen2:"",ybreparto:"",ybapt:"",ybcity:"",ybestate:"",email:"",comment:"",businessId:"all"}),[C,X]=$({}),[E,x]=$(null);xe(()=>{if(T.isAdmin())ye(["all","business1","business2","business3"]);else{const e=T.getBusinessId()||"all";ie(e),ye([e])}z()});const me=Se(()=>{let e=pe();return G()!=="all"&&(e=e.filter(d=>d.businessId===G())),_()&&(e=e.filter(d=>d.fullName.toLowerCase().includes(_().toLowerCase())||d.firstName.toLowerCase().includes(_().toLowerCase())||d.lastName.toLowerCase().includes(_().toLowerCase())||d.cid.toLowerCase().includes(_().toLowerCase())||d.email&&d.email.toLowerCase().includes(_().toLowerCase()))),e}),z=async()=>{try{I(!0),x(null);const e=await H.getConsignees(_(),G());we(JSON.stringify(e)),ce(e)}catch(e){console.error("Error loading consignees:",e),x({type:"error",text:i("consignee.messages.loadError")})}finally{I(!1)}},he=()=>{const e=y(),d={};return e.firstName.trim()||(d.firstName=i("consignee.validation.nameRequired")),e.lastName.trim()||(d.lastName=i("consignee.validation.lastNameRequired")),e.cid.trim()||(d.cid=i("consignee.validation.cidRequired")),e.ybstreet.trim()||(d.ybstreet=i("consignee.validation.streetRequired")),e.ybcity.trim()||(d.ybcity=i("consignee.validation.cityRequired")),e.ybestate.trim()||(d.ybestate=i("consignee.validation.stateRequired")),e.nacionality.trim()||(d.nacionality=i("consignee.validation.nationalityRequired")),e.email&&!/\S+@\S+\.\S+/.test(e.email)&&(d.email=i("consignee.validation.emailInvalid")),X(d),Object.keys(d).length===0},ve=async()=>{if(he())try{I(!0),x(null),R()?(await H.updateConsignee(R().id,y()),x({type:"success",text:i("consignee.messages.updateSuccess")})):(await H.createConsignee(y()),x({type:"success",text:i("consignee.messages.createSuccess")})),await z(),Z()}catch(e){console.error("Error saving consignee:",e),x({type:"error",text:R()?i("consignee.messages.updateError"):i("consignee.messages.createError")})}finally{I(!1)}},fe=e=>{Q(e),W({fullName:e.fullName,firstName:e.firstName,middleName:e.middleName||"",lastName:e.lastName,lastName2:e.lastName2||"",passport:e.passport||"",cid:e.cid,nacionality:e.nacionality,phoneNumber:e.phoneNumber,altPhoneNumber:e.altPhoneNumber||"",ybstreet:e.ybstreet,ybstreetNo:e.ybstreetNo,ybbetwen1:e.ybbetwen1||"",ybbetwen2:e.ybbetwen2||"",ybreparto:e.ybreparto||"",ybapt:e.ybapt||"",ybcity:e.ybcity,ybestate:e.ybestate,email:e.email||"",comment:e.comment||"",businessId:e.businessId}),Y(!0)},Pe=async e=>{if(confirm(i("consignee.deleteConfirm")))try{I(!0),await H.deleteConsignee(e.id),x({type:"success",text:i("consignee.messages.deleteSuccess")}),await z()}catch(d){console.error("Error deleting consignee:",d),x({type:"error",text:i("consignee.messages.deleteError")})}finally{I(!1)}},Ne=()=>{Q(null),W({fullName:"",firstName:"",middleName:"",lastName:"",lastName2:"",passport:"",cid:"",nacionality:"",phoneNumber:"",altPhoneNumber:"",ybstreet:"",ybstreetNo:"",ybbetwen1:"",ybbetwen2:"",ybreparto:"",ybapt:"",ybcity:"",ybestate:"",email:"",comment:"",businessId:"all"}),X({}),Y(!0)},Z=()=>{Y(!1),Q(null),X({})},u=(e,d)=>{W(S=>{const B={...S};let f=B;for(let v=0;v<e.length-1;v++)f=f[e[v]]={...f[e[v]]};return f[e[e.length-1]]=d,B})};return(()=>{var e=Fe(),d=e.firstChild,S=d.firstChild,B=S.nextSibling,f=d.nextSibling,v=f.firstChild,O=v.firstChild;return e.style.setProperty("padding","2rem"),e.style.setProperty("max-width","1200px"),e.style.setProperty("margin","0 auto"),d.style.setProperty("margin-bottom","2rem"),d.style.setProperty("text-align","center"),S.style.setProperty("font-size","2rem"),S.style.setProperty("font-weight","700"),S.style.setProperty("color","var(--text-primary)"),t(S,()=>i("consignee.pageTitle")),B.style.setProperty("color","var(--text-muted)"),B.style.setProperty("font-size","1.125rem"),t(B,()=>i("consignee.pageSubtitle")),f.style.setProperty("display","flex"),f.style.setProperty("flex-direction","column"),f.style.setProperty("gap","1rem"),f.style.setProperty("margin-bottom","2rem"),t(f,r(w,{get when(){return J(()=>!!T.isAdmin())()&&de().length>1},get children(){var s=Be(),m=s.firstChild;return s.style.setProperty("display","flex"),s.style.setProperty("gap","1rem"),s.style.setProperty("align-items","center"),s.style.setProperty("padding","1rem"),s.style.setProperty("background","var(--bg-secondary)"),s.style.setProperty("border-radius","var(--border-radius)"),s.style.setProperty("border","1px solid var(--border-color)"),m.style.setProperty("font-weight","500"),t(s,r(V,{get value(){return G()},onChange:n=>{ie(n),z()},get options(){return de().map(n=>({value:n,label:n==="all"?"Todos los negocios":`Business ID: ${n}`}))},style:{"min-width":"200px"}}),null),s}}),v),v.style.setProperty("display","flex"),v.style.setProperty("justify-content","space-between"),v.style.setProperty("align-items","center"),v.style.setProperty("gap","1rem"),v.style.setProperty("flex-wrap","wrap"),O.style.setProperty("display","flex"),O.style.setProperty("gap","1rem"),O.style.setProperty("align-items","center"),t(O,r(b,{placeholder:"Buscar consignatarios...",get value(){return _()},onChange:ge,style:{"min-width":"300px"}}),null),t(O,r(k,{onClick:z,get disabled(){return A()},get children(){return[r(M,{name:"search",size:"1em",style:{"margin-right":"0.5rem"}}),"Buscar"]}}),null),t(v,r(k,{onClick:Ne,variant:"primary",get disabled(){return A()},get children(){return[r(M,{name:"add",size:"1em",style:{"margin-right":"0.5rem"}}),J(()=>i("consignee.createNew"))]}}),null),t(e,r(w,{get when(){return E()},get children(){var s=Le(),m=s.firstChild;return m.nextSibling,s.style.setProperty("padding","1rem"),s.style.setProperty("margin-bottom","1rem"),s.style.setProperty("border-radius","var(--border-radius)"),t(m,()=>E().type==="success"?"✓ Éxito:":"⚠ Error:"),t(s,()=>E().text,null),Ae(n=>{var o=E().type==="success"?"var(--success-light)":"var(--error-light)",c=E().type==="success"?"var(--success-dark)":"var(--error-dark)",l=`1px solid ${E().type==="success"?"var(--success-color)":"var(--error-color)"}`;return o!==n.e&&((n.e=o)!=null?s.style.setProperty("background",o):s.style.removeProperty("background")),c!==n.t&&((n.t=c)!=null?s.style.setProperty("color",c):s.style.removeProperty("color")),l!==n.a&&((n.a=l)!=null?s.style.setProperty("border",l):s.style.removeProperty("border")),n},{e:void 0,t:void 0,a:void 0}),s}}),null),t(e,r(D,{get children(){var s=Me();return s.style.setProperty("padding","1.5rem"),t(s,r(w,{get when(){return A()},get fallback(){return r(w,{get when(){return me().length>0},get fallback(){return(()=>{var m=je(),n=m.firstChild;return m.style.setProperty("text-align","center"),m.style.setProperty("padding","2rem"),m.style.setProperty("color","var(--text-muted)"),t(m,r(M,{name:"customer",size:"3rem",style:{opacity:"0.3","margin-bottom":"1rem"}}),n),t(n,()=>i("consignee.messages.noRecords")),m})()},get children(){var m=qe(),n=m.firstChild,o=n.firstChild,c=o.firstChild,l=c.firstChild,a=l.nextSibling,g=a.nextSibling,P=g.nextSibling,K=P.nextSibling,ee=K.nextSibling,te=ee.nextSibling,Ce=o.nextSibling;return m.style.setProperty("overflow-x","auto"),n.style.setProperty("width","100%"),n.style.setProperty("border-collapse","collapse"),c.style.setProperty("border-bottom","2px solid var(--border-color)"),l.style.setProperty("padding","1rem"),l.style.setProperty("text-align","left"),a.style.setProperty("padding","1rem"),a.style.setProperty("text-align","left"),g.style.setProperty("padding","1rem"),g.style.setProperty("text-align","left"),P.style.setProperty("padding","1rem"),P.style.setProperty("text-align","left"),K.style.setProperty("padding","1rem"),K.style.setProperty("text-align","left"),ee.style.setProperty("padding","1rem"),ee.style.setProperty("text-align","left"),t(c,r(w,{get when(){return T.isAdmin()},get children(){var p=Ge();return p.style.setProperty("padding","1rem"),p.style.setProperty("text-align","left"),p}}),te),te.style.setProperty("padding","1rem"),te.style.setProperty("text-align","center"),t(Ce,r(Ie,{get each(){return me()},children:p=>(()=>{var q=Ve(),re=q.firstChild,le=re.nextSibling,ae=le.nextSibling,se=ae.nextSibling,N=se.nextSibling,ue=N.firstChild,U=ue.nextSibling,$e=U.nextSibling,ne=N.nextSibling,j=ne.nextSibling,F=j.firstChild;return q.style.setProperty("border-bottom","1px solid var(--border-light)"),re.style.setProperty("padding","1rem"),t(re,()=>p.fullName),le.style.setProperty("padding","1rem"),t(le,()=>p.cid),ae.style.setProperty("padding","1rem"),t(ae,()=>p.phoneNumber),se.style.setProperty("padding","1rem"),t(se,()=>p.email||"-"),N.style.setProperty("padding","1rem"),N.style.setProperty("font-size","0.875rem"),t(N,()=>p.ybstreet,ue),t(N,()=>p.ybstreetNo,U),t(N,()=>p.ybbetwen1&&p.ybbetwen2&&` e/ ${p.ybbetwen1} y ${p.ybbetwen2}`,U),t(N,()=>p.ybreparto&&`, ${p.ybreparto}`,U),t(N,()=>p.ybapt&&`, Apto ${p.ybapt}`,U),t(N,()=>p.ybcity,$e),t(N,()=>p.ybestate,null),ne.style.setProperty("padding","1rem"),t(ne,()=>p.nacionality),t(q,r(w,{get when(){return T.isAdmin()},get children(){var oe=He(),L=oe.firstChild;return oe.style.setProperty("padding","1rem"),L.style.setProperty("padding","0.25rem 0.5rem"),L.style.setProperty("border-radius","4px"),L.style.setProperty("font-size","0.875rem"),L.style.setProperty("background","var(--bg-secondary)"),L.style.setProperty("color","var(--text-primary)"),t(L,()=>p.businessId),oe}}),j),j.style.setProperty("padding","1rem"),j.style.setProperty("text-align","center"),F.style.setProperty("display","flex"),F.style.setProperty("gap","0.5rem"),F.style.setProperty("justify-content","center"),t(F,r(k,{size:"sm",variant:"secondary",onClick:()=>fe(p),get children(){return r(M,{name:"edit",size:"0.875rem"})}}),null),t(F,r(k,{size:"sm",variant:"secondary",onClick:()=>Pe(p),style:{color:"var(--error-color)"},get children(){return r(M,{name:"delete",size:"0.875rem"})}}),null),q})()})),m}})},get children(){var m=Te(),n=m.firstChild;return m.style.setProperty("text-align","center"),m.style.setProperty("padding","2rem"),t(m,r(M,{name:"loading",size:"2rem"}),n),m}})),s}}),null),t(e,r(Ee,{get isOpen(){return be()},onClose:Z,size:"large",get children(){var s=Ue(),m=s.firstChild,n=m.nextSibling;return s.style.setProperty("padding","2rem"),m.style.setProperty("margin-bottom","1.5rem"),t(m,(()=>{var o=J(()=>!!R());return()=>o()?i("consignee.editConsignee"):i("consignee.createNew")})()),t(s,r(D,{style:{"margin-bottom":"1.5rem"},get children(){var o=ke(),c=o.firstChild,l=c.nextSibling;return o.style.setProperty("padding","1.5rem"),c.style.setProperty("margin-bottom","1rem"),l.style.setProperty("display","grid"),l.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(300px, 1fr))"),l.style.setProperty("gap","1rem"),t(l,r(b,{label:"Primer Nombre *",get value(){return y().firstName},onChange:a=>{u(["firstName"],a);const g=y(),P=[g.firstName,g.middleName,g.lastName,g.lastName2].filter(Boolean).join(" ");u(["fullName"],P)},placeholder:"Primer nombre",get error(){return C().firstName}}),null),t(l,r(b,{label:"Segundo Nombre",get value(){return y().middleName||""},onChange:a=>{u(["middleName"],a);const g=y(),P=[g.firstName,a,g.lastName,g.lastName2].filter(Boolean).join(" ");u(["fullName"],P)},placeholder:"Segundo nombre"}),null),t(l,r(b,{label:"Primer Apellido *",get value(){return y().lastName},onChange:a=>{u(["lastName"],a);const g=y(),P=[g.firstName,g.middleName,a,g.lastName2].filter(Boolean).join(" ");u(["fullName"],P)},placeholder:"Primer apellido",get error(){return C().lastName}}),null),t(l,r(b,{label:"Segundo Apellido",get value(){return y().lastName2||""},onChange:a=>{u(["lastName2"],a);const g=y(),P=[g.firstName,g.middleName,g.lastName,a].filter(Boolean).join(" ");u(["fullName"],P)},placeholder:"Segundo apellido"}),null),t(l,r(b,{label:"CID *",get value(){return y().cid},onChange:a=>u(["cid"],a),placeholder:"Número de identidad",get error(){return C().cid}}),null),t(l,r(b,{label:"Pasaporte",get value(){return y().passport||""},onChange:a=>u(["passport"],a),placeholder:"Número de pasaporte"}),null),t(l,r(V,{label:"Nacionalidad *",get value(){return y().nacionality},onChange:a=>u(["nacionality"],a),options:[{value:"CUB",label:"Cubana"},{value:"USA",label:"Estadounidense"},{value:"MEX",label:"Mexicana"},{value:"ESP",label:"Española"},{value:"OTHER",label:"Otra"}],get error(){return C().nacionality}}),null),o}}),n),t(s,r(D,{style:{"margin-bottom":"1.5rem"},get children(){var o=De(),c=o.firstChild,l=c.nextSibling;return o.style.setProperty("padding","1.5rem"),c.style.setProperty("margin-bottom","1rem"),l.style.setProperty("display","grid"),l.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(300px, 1fr))"),l.style.setProperty("gap","1rem"),t(l,r(b,{label:"Calle *",get value(){return y().ybstreet},onChange:a=>u(["ybstreet"],a),placeholder:"Nombre de la calle",get error(){return C().ybstreet}}),null),t(l,r(b,{label:"Número *",get value(){return y().ybstreetNo},onChange:a=>u(["ybstreetNo"],a),placeholder:"Número de la casa",get error(){return C().ybstreetNo}}),null),t(l,r(b,{label:"Entre",get value(){return y().ybbetwen1||""},onChange:a=>u(["ybbetwen1"],a),placeholder:"Primera calle"}),null),t(l,r(b,{label:"Y",get value(){return y().ybbetwen2||""},onChange:a=>u(["ybbetwen2"],a),placeholder:"Segunda calle"}),null),t(l,r(b,{label:"Reparto",get value(){return y().ybreparto||""},onChange:a=>u(["ybreparto"],a),placeholder:"Nombre del reparto"}),null),t(l,r(b,{label:"Apartamento",get value(){return y().ybapt||""},onChange:a=>u(["ybapt"],a),placeholder:"Número de apartamento"}),null),t(l,r(b,{label:"Ciudad *",get value(){return y().ybcity},onChange:a=>u(["ybcity"],a),placeholder:"Ciudad",get error(){return C().ybcity}}),null),t(l,r(V,{label:"Provincia *",get value(){return y().ybestate},onChange:a=>u(["ybestate"],a),options:[{value:"PINAR DEL RIO",label:"Pinar del Río"},{value:"ARTEMISA",label:"Artemisa"},{value:"LA HABANA",label:"La Habana"},{value:"MAYABEQUE",label:"Mayabeque"},{value:"MATANZAS",label:"Matanzas"},{value:"VILLA CLARA",label:"Villa Clara"},{value:"CIENFUEGOS",label:"Cienfuegos"},{value:"SANCTI SPIRITUS",label:"Sancti Spíritus"},{value:"CIEGO DE AVILA",label:"Ciego de Ávila"},{value:"CAMAGUEY",label:"Camagüey"},{value:"LAS TUNAS",label:"Las Tunas"},{value:"HOLGUIN",label:"Holguín"},{value:"GRANMA",label:"Granma"},{value:"SANTIAGO DE CUBA",label:"Santiago de Cuba"},{value:"GUANTANAMO",label:"Guantánamo"},{value:"ISLA DE LA JUVENTUD",label:"Isla de la Juventud"}],get error(){return C().ybestate}}),null),o}}),n),t(s,r(D,{style:{"margin-bottom":"1.5rem"},get children(){var o=Re(),c=o.firstChild,l=c.nextSibling;return o.style.setProperty("padding","1.5rem"),c.style.setProperty("margin-bottom","1rem"),l.style.setProperty("display","grid"),l.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(300px, 1fr))"),l.style.setProperty("gap","1rem"),t(l,r(b,{label:"Teléfono Principal *",get value(){return y().phoneNumber},onChange:a=>u(["phoneNumber"],a),placeholder:"Teléfono principal",get error(){return C().phoneNumber}}),null),t(l,r(b,{label:"Teléfono Alternativo",get value(){return y().altPhoneNumber||""},onChange:a=>u(["altPhoneNumber"],a),placeholder:"Teléfono alternativo"}),null),t(l,r(b,{label:"Email",type:"email",get value(){return y().email||""},onChange:a=>u(["email"],a),placeholder:"Correo electrónico",get error(){return C().email}}),null),o}}),n),t(s,r(D,{style:{"margin-bottom":"1.5rem"},get children(){var o=ze(),c=o.firstChild;return o.style.setProperty("padding","1.5rem"),c.style.setProperty("margin-bottom","1rem"),t(o,r(b,{label:"Comentarios",get value(){return y().comment||""},onChange:l=>u(["comment"],l),placeholder:"Comentarios adicionales",multiline:!0,rows:3}),null),o}}),n),t(s,r(w,{get when(){return T.isAdmin()},get children(){return r(D,{style:{"margin-bottom":"1.5rem"},get children(){var o=Oe(),c=o.firstChild,l=c.nextSibling;return o.style.setProperty("padding","1.5rem"),c.style.setProperty("margin-bottom","1rem"),t(o,r(V,{label:"Business ID *",get value(){return y().businessId||"all"},onChange:a=>u(["businessId"],a),options:[{value:"all",label:"Todos los negocios"},{value:"business1",label:"Business 1"},{value:"business2",label:"Business 2"},{value:"business3",label:"Business 3"}]}),l),l.style.setProperty("margin-top","0.5rem"),l.style.setProperty("font-size","0.875rem"),l.style.setProperty("color","var(--text-muted)"),o}})}}),n),n.style.setProperty("display","flex"),n.style.setProperty("gap","1rem"),n.style.setProperty("justify-content","flex-end"),t(n,r(k,{variant:"outline",onClick:Z,get disabled(){return A()},children:"Cancelar"}),null),t(n,r(k,{variant:"primary",onClick:ve,get disabled(){return A()},get children(){return J(()=>!!A())()?"Guardando...":R()?"Actualizar":"Crear"}}),null),s}}),null),e})()};var Ye=h("<div>");const We=()=>(()=>{var i=Ye();return i.style.setProperty("min-height","100vh"),i.style.setProperty("background","var(--background-secondary)"),i.style.setProperty("padding","1rem 0"),t(i,r(Je,{})),i})();export{We as default};
