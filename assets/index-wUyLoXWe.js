(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();const Tk=!1,Ik=(t,e)=>t===e,Zs=Symbol("solid-proxy"),Cw=typeof Proxy=="function",P0=Symbol("solid-track"),Vy={equals:Ik};let _w=Nw;const hl=1,zy=2,Aw={owned:null,cleanups:null,context:null,owner:null},Yg={};var hn=null;let Xg=null,Nk=null,En=null,uo=null,Qa=null,Rm=0;function Yh(t,e){const r=En,n=hn,i=t.length===0,o=e===void 0?n:e,s=i?Aw:{owned:null,cleanups:null,context:o?o.context:null,owner:o},a=i?t:()=>t(()=>_o(()=>fp(s)));hn=s,En=null;try{return _a(a,!0)}finally{En=r,hn=n}}function Ae(t,e){e=e?Object.assign({},Vy,e):Vy;const r={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},n=i=>(typeof i=="function"&&(i=i(r.value)),Iw(r,i));return[Tw.bind(r),n]}function Rk(t,e,r){const n=Lm(t,e,!0,hl);ju(n)}function be(t,e,r){const n=Lm(t,e,!1,hl);ju(n)}function Ei(t,e,r){_w=Bk;const n=Lm(t,e,!1,hl);n.user=!0,Qa?Qa.push(n):ju(n)}function zt(t,e,r){r=r?Object.assign({},Vy,r):Vy;const n=Lm(t,e,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,ju(n),Tw.bind(n)}function Dk(t){return t&&typeof t=="object"&&"then"in t}function Lk(t,e,r){let n,i,o;typeof e=="function"?(n=t,i=e,o={}):(n=!0,i=t,o=e||{});let s=null,a=Yg,l=!1,d="initialValue"in o,u=typeof n=="function"&&zt(n);const h=new Set,[f,p]=(o.storage||Ae)(o.initialValue),[m,x]=Ae(void 0),[P,g]=Ae(void 0,{equals:!1}),[F,V]=Ae(d?"ready":"unresolved");function N(D,$,w,_){return s===D&&(s=null,_!==void 0&&(d=!0),(D===a||$===a)&&o.onHydrated&&queueMicrotask(()=>o.onHydrated(_,{value:$})),a=Yg,R($,w)),$}function R(D,$){_a(()=>{$===void 0&&p(()=>D),V($!==void 0?"errored":d?"ready":"unresolved"),x($);for(const w of h.keys())w.decrement();h.clear()},!1)}function M(){const D=Fk,$=f(),w=m();if(w!==void 0&&!s)throw w;return En&&En.user,$}function C(D=!0){if(D!==!1&&l)return;l=!1;const $=u?u():n;if($==null||$===!1){N(s,_o(f));return}let w;const _=a!==Yg?a:_o(()=>{try{return i($,{value:f(),refetching:D})}catch(v){w=v}});if(w!==void 0){N(s,void 0,by(w),$);return}else if(!Dk(_))return N(s,_,void 0,$),_;return s=_,"v"in _?(_.s===1?N(s,_.v,void 0,$):N(s,void 0,by(_.v),$),_):(l=!0,queueMicrotask(()=>l=!1),_a(()=>{V(d?"refreshing":"pending"),g()},!1),_.then(v=>N(_,v,void 0,$),v=>N(_,void 0,by(v),$)))}Object.defineProperties(M,{state:{get:()=>F()},error:{get:()=>m()},loading:{get(){const D=F();return D==="pending"||D==="refreshing"}},latest:{get(){if(!d)return M();const D=m();if(D&&!s)throw D;return f()}}});let k=hn;return u?Rk(()=>(k=hn,C(!1))):C(!1),[M,{refetch:D=>M1(k,()=>C(D)),mutate:p}]}function kw(t){return _a(t,!1)}function _o(t){if(En===null)return t();const e=En;En=null;try{return t()}finally{En=e}}function F1(t,e,r){const n=Array.isArray(t);let i,o=r&&r.defer;return s=>{let a;if(n){a=Array(t.length);for(let d=0;d<t.length;d++)a[d]=t[d]()}else a=t();if(o)return o=!1,s;const l=_o(()=>e(a,i,s));return i=a,l}}function Kn(t){Ei(()=>_o(t))}function Ta(t){return hn===null||(hn.cleanups===null?hn.cleanups=[t]:hn.cleanups.push(t)),t}function x0(){return En}function Ew(){return hn}function M1(t,e){const r=hn,n=En;hn=t,En=null;try{return _a(e,!0)}catch(i){j1(i)}finally{hn=r,En=n}}function $k(t){const e=En,r=hn;return Promise.resolve().then(()=>{En=e,hn=r;let n;return _a(t,!1),En=hn=null,n?n.done:void 0})}const[nJ,iJ]=Ae(!1);function O1(t,e){const r=Symbol("context");return{id:r,Provider:jk(r),defaultValue:t}}function Dm(t){let e;return hn&&hn.context&&(e=hn.context[t.id])!==void 0?e:t.defaultValue}function B1(t){const e=zt(t),r=zt(()=>S0(e()));return r.toArray=()=>{const n=r();return Array.isArray(n)?n:n!=null?[n]:[]},r}let Fk;function Tw(){if(this.sources&&this.state)if(this.state===hl)ju(this);else{const t=uo;uo=null,_a(()=>qy(this),!1),uo=t}if(En){const t=this.observers?this.observers.length:0;En.sources?(En.sources.push(this),En.sourceSlots.push(t)):(En.sources=[this],En.sourceSlots=[t]),this.observers?(this.observers.push(En),this.observerSlots.push(En.sources.length-1)):(this.observers=[En],this.observerSlots=[En.sources.length-1])}return this.value}function Iw(t,e,r){let n=t.value;return(!t.comparator||!t.comparator(n,e))&&(t.value=e,t.observers&&t.observers.length&&_a(()=>{for(let i=0;i<t.observers.length;i+=1){const o=t.observers[i],s=Xg&&Xg.running;s&&Xg.disposed.has(o),(s?!o.tState:!o.state)&&(o.pure?uo.push(o):Qa.push(o),o.observers&&Rw(o)),s||(o.state=hl)}if(uo.length>1e6)throw uo=[],new Error},!1)),e}function ju(t){if(!t.fn)return;fp(t);const e=Rm;Mk(t,t.value,e)}function Mk(t,e,r){let n;const i=hn,o=En;En=hn=t;try{n=t.fn(e)}catch(s){return t.pure&&(t.state=hl,t.owned&&t.owned.forEach(fp),t.owned=null),t.updatedAt=r+1,j1(s)}finally{En=o,hn=i}(!t.updatedAt||t.updatedAt<=r)&&(t.updatedAt!=null&&"observers"in t?Iw(t,n):t.value=n,t.updatedAt=r)}function Lm(t,e,r,n=hl,i){const o={fn:t,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:hn,context:hn?hn.context:null,pure:r};return hn===null||hn!==Aw&&(hn.owned?hn.owned.push(o):hn.owned=[o]),o}function Uy(t){if(t.state===0)return;if(t.state===zy)return qy(t);if(t.suspense&&_o(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Rm);)t.state&&e.push(t);for(let r=e.length-1;r>=0;r--)if(t=e[r],t.state===hl)ju(t);else if(t.state===zy){const n=uo;uo=null,_a(()=>qy(t,e[0]),!1),uo=n}}function _a(t,e){if(uo)return t();let r=!1;e||(uo=[]),Qa?r=!0:Qa=[],Rm++;try{const n=t();return Ok(r),n}catch(n){r||(Qa=null),uo=null,j1(n)}}function Ok(t){if(uo&&(Nw(uo),uo=null),t)return;const e=Qa;Qa=null,e.length&&_a(()=>_w(e),!1)}function Nw(t){for(let e=0;e<t.length;e++)Uy(t[e])}function Bk(t){let e,r=0;for(e=0;e<t.length;e++){const n=t[e];n.user?t[r++]=n:Uy(n)}for(e=0;e<r;e++)Uy(t[e])}function qy(t,e){t.state=0;for(let r=0;r<t.sources.length;r+=1){const n=t.sources[r];if(n.sources){const i=n.state;i===hl?n!==e&&(!n.updatedAt||n.updatedAt<Rm)&&Uy(n):i===zy&&qy(n,e)}}}function Rw(t){for(let e=0;e<t.observers.length;e+=1){const r=t.observers[e];r.state||(r.state=zy,r.pure?uo.push(r):Qa.push(r),r.observers&&Rw(r))}}function fp(t){let e;if(t.sources)for(;t.sources.length;){const r=t.sources.pop(),n=t.sourceSlots.pop(),i=r.observers;if(i&&i.length){const o=i.pop(),s=r.observerSlots.pop();n<i.length&&(o.sourceSlots[s]=n,i[n]=o,r.observerSlots[n]=s)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)fp(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)fp(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function by(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function j1(t,e=hn){throw by(t)}function S0(t){if(typeof t=="function"&&!t.length)return S0(t());if(Array.isArray(t)){const e=[];for(let r=0;r<t.length;r++){const n=S0(t[r]);Array.isArray(n)?e.push.apply(e,n):e.push(n)}return e}return t}function jk(t,e){return function(n){let i;return be(()=>i=_o(()=>(hn.context={...hn.context,[t]:n.value},B1(()=>n.children))),void 0),i}}const Vk=Symbol("fallback");function l5(t){for(let e=0;e<t.length;e++)t[e]()}function zk(t,e,r={}){let n=[],i=[],o=[],s=0,a=e.length>1?[]:null;return Ta(()=>l5(o)),()=>{let l=t()||[],d=l.length,u,h;return l[P0],_o(()=>{let p,m,x,P,g,F,V,N,R;if(d===0)s!==0&&(l5(o),o=[],n=[],i=[],s=0,a&&(a=[])),r.fallback&&(n=[Vk],i[0]=Yh(M=>(o[0]=M,r.fallback())),s=1);else if(s===0){for(i=new Array(d),h=0;h<d;h++)n[h]=l[h],i[h]=Yh(f);s=d}else{for(x=new Array(d),P=new Array(d),a&&(g=new Array(d)),F=0,V=Math.min(s,d);F<V&&n[F]===l[F];F++);for(V=s-1,N=d-1;V>=F&&N>=F&&n[V]===l[N];V--,N--)x[N]=i[V],P[N]=o[V],a&&(g[N]=a[V]);for(p=new Map,m=new Array(N+1),h=N;h>=F;h--)R=l[h],u=p.get(R),m[h]=u===void 0?-1:u,p.set(R,h);for(u=F;u<=V;u++)R=n[u],h=p.get(R),h!==void 0&&h!==-1?(x[h]=i[u],P[h]=o[u],a&&(g[h]=a[u]),h=m[h],p.set(R,h)):o[u]();for(h=F;h<d;h++)h in x?(i[h]=x[h],o[h]=P[h],a&&(a[h]=g[h],a[h](h))):i[h]=Yh(f);i=i.slice(0,s=d),n=l.slice(0)}return i});function f(p){if(o[h]=p,a){const[m,x]=Ae(h);return a[h]=x,e(l[h],m)}return e(l[h])}}}function T(t,e){return _o(()=>t(e||{}))}function Ef(){return!0}const w0={get(t,e,r){return e===Zs?r:t.get(e)},has(t,e){return e===Zs?!0:t.has(e)},set:Ef,deleteProperty:Ef,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:Ef,deleteProperty:Ef}},ownKeys(t){return t.keys()}};function Zg(t){return(t=typeof t=="function"?t():t)?t:{}}function Uk(){for(let t=0,e=this.length;t<e;++t){const r=this[t]();if(r!==void 0)return r}}function C0(...t){let e=!1;for(let s=0;s<t.length;s++){const a=t[s];e=e||!!a&&Zs in a,t[s]=typeof a=="function"?(e=!0,zt(a)):a}if(Cw&&e)return new Proxy({get(s){for(let a=t.length-1;a>=0;a--){const l=Zg(t[a])[s];if(l!==void 0)return l}},has(s){for(let a=t.length-1;a>=0;a--)if(s in Zg(t[a]))return!0;return!1},keys(){const s=[];for(let a=0;a<t.length;a++)s.push(...Object.keys(Zg(t[a])));return[...new Set(s)]}},w0);const r={},n=Object.create(null);for(let s=t.length-1;s>=0;s--){const a=t[s];if(!a)continue;const l=Object.getOwnPropertyNames(a);for(let d=l.length-1;d>=0;d--){const u=l[d];if(u==="__proto__"||u==="constructor")continue;const h=Object.getOwnPropertyDescriptor(a,u);if(!n[u])n[u]=h.get?{enumerable:!0,configurable:!0,get:Uk.bind(r[u]=[h.get.bind(a)])}:h.value!==void 0?h:void 0;else{const f=r[u];f&&(h.get?f.push(h.get.bind(a)):h.value!==void 0&&f.push(()=>h.value))}}}const i={},o=Object.keys(n);for(let s=o.length-1;s>=0;s--){const a=o[s],l=n[a];l&&l.get?Object.defineProperty(i,a,l):i[a]=l?l.value:void 0}return i}function qk(t,...e){if(Cw&&Zs in t){const i=new Set(e.length>1?e.flat():e[0]),o=e.map(s=>new Proxy({get(a){return s.includes(a)?t[a]:void 0},has(a){return s.includes(a)&&a in t},keys(){return s.filter(a=>a in t)}},w0));return o.push(new Proxy({get(s){return i.has(s)?void 0:t[s]},has(s){return i.has(s)?!1:s in t},keys(){return Object.keys(t).filter(s=>!i.has(s))}},w0)),o}const r={},n=e.map(()=>({}));for(const i of Object.getOwnPropertyNames(t)){const o=Object.getOwnPropertyDescriptor(t,i),s=!o.get&&!o.set&&o.enumerable&&o.writable&&o.configurable;let a=!1,l=0;for(const d of e)d.includes(i)&&(a=!0,s?n[l][i]=o.value:Object.defineProperty(n[l],i,o)),++l;a||(s?r[i]=o.value:Object.defineProperty(r,i,o))}return[...n,r]}const Hk=t=>`Stale read from <${t}>.`;function _t(t){const e="fallback"in t&&{fallback:()=>t.fallback};return zt(zk(()=>t.each,t.children,e||void 0))}function We(t){const e=t.keyed,r=zt(()=>t.when,void 0,void 0),n=e?r:zt(r,void 0,{equals:(i,o)=>!i==!o});return zt(()=>{const i=n();if(i){const o=t.children;return typeof o=="function"&&o.length>0?_o(()=>o(e?i:()=>{if(!_o(n))throw Hk("Show");return r()})):o}return t.fallback},void 0,void 0)}const Wk=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Gk=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline",...Wk]),Kk=new Set(["innerHTML","textContent","innerText","children"]),Yk=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Xk=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function Zk(t,e){const r=Xk[t];return typeof r=="object"?r[e]?r.$:void 0:r}const Jk=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Ve=t=>zt(()=>t());function Qk(t,e,r){let n=r.length,i=e.length,o=n,s=0,a=0,l=e[i-1].nextSibling,d=null;for(;s<i||a<o;){if(e[s]===r[a]){s++,a++;continue}for(;e[i-1]===r[o-1];)i--,o--;if(i===s){const u=o<n?a?r[a-1].nextSibling:r[o-a]:l;for(;a<o;)t.insertBefore(r[a++],u)}else if(o===a)for(;s<i;)(!d||!d.has(e[s]))&&e[s].remove(),s++;else if(e[s]===r[o-1]&&r[a]===e[i-1]){const u=e[--i].nextSibling;t.insertBefore(r[a++],e[s++].nextSibling),t.insertBefore(r[--o],u),e[i]=r[o]}else{if(!d){d=new Map;let h=a;for(;h<o;)d.set(r[h],h++)}const u=d.get(e[s]);if(u!=null)if(a<u&&u<o){let h=s,f=1,p;for(;++h<i&&h<o&&!((p=d.get(e[h]))==null||p!==u+f);)f++;if(f>u-a){const m=e[s];for(;a<u;)t.insertBefore(r[a++],m)}else t.replaceChild(r[a++],e[s++])}else s++;else e[s++].remove()}}}const c5="_$DX_DELEGATE";function Dw(t,e,r,n={}){let i;return Yh(o=>{i=o,e===document?t():c(e,t(),e.firstChild?null:void 0,r)},n.owner),()=>{i(),e.textContent=""}}function le(t,e,r,n){let i;const o=()=>{const a=n?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return a.innerHTML=t,r?a.content.firstChild.firstChild:n?a.firstChild:a.content.firstChild},s=e?()=>_o(()=>document.importNode(i||(i=o()),!0)):()=>(i||(i=o())).cloneNode(!0);return s.cloneNode=s,s}function tr(t,e=window.document){const r=e[c5]||(e[c5]=new Set);for(let n=0,i=t.length;n<i;n++){const o=t[n];r.has(o)||(r.add(o),e.addEventListener(o,oE))}}function ir(t,e,r){r==null?t.removeAttribute(e):t.setAttribute(e,r)}function eE(t,e,r){r?t.setAttribute(e,""):t.removeAttribute(e)}function $m(t,e){e==null?t.removeAttribute("class"):t.className=e}function Qn(t,e,r,n){if(n)Array.isArray(r)?(t[`$$${e}`]=r[0],t[`$$${e}Data`]=r[1]):t[`$$${e}`]=r;else if(Array.isArray(r)){const i=r[0];t.addEventListener(e,r[0]=o=>i.call(t,r[1],o))}else t.addEventListener(e,r,typeof r!="function"&&r)}function tE(t,e,r={}){const n=Object.keys(e||{}),i=Object.keys(r);let o,s;for(o=0,s=i.length;o<s;o++){const a=i[o];!a||a==="undefined"||e[a]||(d5(t,a,!1),delete r[a])}for(o=0,s=n.length;o<s;o++){const a=n[o],l=!!e[a];!a||a==="undefined"||r[a]===l||!l||(d5(t,a,!0),r[a]=l)}return r}function y(t,e,r){if(!e)return r?ir(t,"style"):e;const n=t.style;if(typeof e=="string")return n.cssText=e;typeof r=="string"&&(n.cssText=r=void 0),r||(r={}),e||(e={});let i,o;for(o in r)e[o]==null&&n.removeProperty(o),delete r[o];for(o in e)i=e[o],i!==r[o]&&(n.setProperty(o,i),r[o]=i);return r}function rE(t,e={},r,n){const i={};return be(()=>i.children=yp(t,e.children,i.children)),be(()=>typeof e.ref=="function"&&V1(e.ref,t)),be(()=>nE(t,e,r,!0,i,!0)),i}function V1(t,e,r){return _o(()=>t(e,r))}function c(t,e,r,n){if(r!==void 0&&!n&&(n=[]),typeof e!="function")return yp(t,e,n,r);be(i=>yp(t,e(),i,r),n)}function nE(t,e,r,n,i={},o=!1){e||(e={});for(const s in i)if(!(s in e)){if(s==="children")continue;i[s]=u5(t,s,null,i[s],r,o,e)}for(const s in e){if(s==="children")continue;const a=e[s];i[s]=u5(t,s,a,i[s],r,o,e)}}function iE(t){return t.toLowerCase().replace(/-([a-z])/g,(e,r)=>r.toUpperCase())}function d5(t,e,r){const n=e.trim().split(/\s+/);for(let i=0,o=n.length;i<o;i++)t.classList.toggle(n[i],r)}function u5(t,e,r,n,i,o,s){let a,l,d,u,h;if(e==="style")return y(t,r,n);if(e==="classList")return tE(t,r,n);if(r===n)return n;if(e==="ref")o||r(t);else if(e.slice(0,3)==="on:"){const f=e.slice(3);n&&t.removeEventListener(f,n,typeof n!="function"&&n),r&&t.addEventListener(f,r,typeof r!="function"&&r)}else if(e.slice(0,10)==="oncapture:"){const f=e.slice(10);n&&t.removeEventListener(f,n,!0),r&&t.addEventListener(f,r,!0)}else if(e.slice(0,2)==="on"){const f=e.slice(2).toLowerCase(),p=Jk.has(f);if(!p&&n){const m=Array.isArray(n)?n[0]:n;t.removeEventListener(f,m)}(p||r)&&(Qn(t,f,r,p),p&&tr([f]))}else e.slice(0,5)==="attr:"?ir(t,e.slice(5),r):e.slice(0,5)==="bool:"?eE(t,e.slice(5),r):(h=e.slice(0,5)==="prop:")||(d=Kk.has(e))||(u=Zk(e,t.tagName))||(l=Gk.has(e))||(a=t.nodeName.includes("-")||"is"in s)?(h&&(e=e.slice(5),l=!0),e==="class"||e==="className"?$m(t,r):a&&!l&&!d?t[iE(e)]=r:t[u||e]=r):ir(t,Yk[e]||e,r);return r}function oE(t){let e=t.target;const r=`$$${t.type}`,n=t.target,i=t.currentTarget,o=l=>Object.defineProperty(t,"target",{configurable:!0,value:l}),s=()=>{const l=e[r];if(l&&!e.disabled){const d=e[`${r}Data`];if(d!==void 0?l.call(e,d,t):l.call(e,t),t.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(t.target)&&o(e.host),!0},a=()=>{for(;s()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return e||document}}),t.composedPath){const l=t.composedPath();o(l[0]);for(let d=0;d<l.length-2&&(e=l[d],!!s());d++){if(e._$host){e=e._$host,a();break}if(e.parentNode===i)break}}else a();o(n)}function yp(t,e,r,n,i){for(;typeof r=="function";)r=r();if(e===r)return r;const o=typeof e,s=n!==void 0;if(t=s&&r[0]&&r[0].parentNode||t,o==="string"||o==="number"){if(o==="number"&&(e=e.toString(),e===r))return r;if(s){let a=r[0];a&&a.nodeType===3?a.data!==e&&(a.data=e):a=document.createTextNode(e),r=Jd(t,r,n,a)}else r!==""&&typeof r=="string"?r=t.firstChild.data=e:r=t.textContent=e}else if(e==null||o==="boolean")r=Jd(t,r,n);else{if(o==="function")return be(()=>{let a=e();for(;typeof a=="function";)a=a();r=yp(t,a,r,n)}),()=>r;if(Array.isArray(e)){const a=[],l=r&&Array.isArray(r);if(_0(a,e,r,i))return be(()=>r=yp(t,a,r,n,!0)),()=>r;if(a.length===0){if(r=Jd(t,r,n),s)return r}else l?r.length===0?h5(t,a,n):Qk(t,r,a):(r&&Jd(t),h5(t,a));r=a}else if(e.nodeType){if(Array.isArray(r)){if(s)return r=Jd(t,r,n,e);Jd(t,r,null,e)}else r==null||r===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);r=e}}return r}function _0(t,e,r,n){let i=!1;for(let o=0,s=e.length;o<s;o++){let a=e[o],l=r&&r[t.length],d;if(!(a==null||a===!0||a===!1))if((d=typeof a)=="object"&&a.nodeType)t.push(a);else if(Array.isArray(a))i=_0(t,a,l)||i;else if(d==="function")if(n){for(;typeof a=="function";)a=a();i=_0(t,Array.isArray(a)?a:[a],Array.isArray(l)?l:[l])||i}else t.push(a),i=!0;else{const u=String(a);l&&l.nodeType===3&&l.data===u?t.push(l):t.push(document.createTextNode(u))}}return i}function h5(t,e,r=null){for(let n=0,i=e.length;n<i;n++)t.insertBefore(e[n],r)}function Jd(t,e,r,n){if(r===void 0)return t.textContent="";const i=n||document.createTextNode("");if(e.length){let o=!1;for(let s=e.length-1;s>=0;s--){const a=e[s];if(i!==a){const l=a.parentNode===t;!o&&!s?l?t.replaceChild(i,a):t.insertBefore(i,r):l&&a.remove()}else o=!0}}else t.insertBefore(i,r);return[i]}const sE=!1;function Lw(){let t=new Set;function e(i){return t.add(i),()=>t.delete(i)}let r=!1;function n(i,o){if(r)return!(r=!1);const s={to:i,options:o,defaultPrevented:!1,preventDefault:()=>s.defaultPrevented=!0};for(const a of t)a.listener({...s,from:a.location,retry:l=>{l&&(r=!0),a.navigate(i,{...o,resolve:!1})}});return!s.defaultPrevented}return{subscribe:e,confirm:n}}let A0;function z1(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),A0=window.history.state._depth}z1();function aE(t){return{...t,_depth:window.history.state&&window.history.state._depth}}function lE(t,e){let r=!1;return()=>{const n=A0;z1();const i=n==null?null:A0-n;if(r){r=!1;return}i&&e(i)?(r=!0,window.history.go(-i)):t()}}const cE=/^(?:[a-z0-9]+:)?\/\//i,dE=/^\/+|(\/)\/+$/g,$w="http://sr";function cd(t,e=!1){const r=t.replace(dE,"$1");return r?e||/^[?#]/.test(r)?r:"/"+r:""}function Py(t,e,r){if(cE.test(e))return;const n=cd(t),i=r&&cd(r);let o="";return!i||e.startsWith("/")?o=n:i.toLowerCase().indexOf(n.toLowerCase())!==0?o=n+i:o=i,(o||"/")+cd(e,!o)}function uE(t,e){if(t==null)throw new Error(e);return t}function hE(t,e){return cd(t).replace(/\/*(\*.*)?$/g,"")+cd(e)}function Fw(t){const e={};return t.searchParams.forEach((r,n)=>{n in e?Array.isArray(e[n])?e[n].push(r):e[n]=[e[n],r]:e[n]=r}),e}function pE(t,e,r){const[n,i]=t.split("/*",2),o=n.split("/").filter(Boolean),s=o.length;return a=>{const l=a.split("/").filter(Boolean),d=l.length-s;if(d<0||d>0&&i===void 0&&!e)return null;const u={path:s?"":"/",params:{}},h=f=>r===void 0?void 0:r[f];for(let f=0;f<s;f++){const p=o[f],m=p[0]===":",x=m?l[f]:l[f].toLowerCase(),P=m?p.slice(1):p.toLowerCase();if(m&&Jg(x,h(P)))u.params[P]=x;else if(m||!Jg(x,P))return null;u.path+=`/${x}`}if(i){const f=d?l.slice(-d).join("/"):"";if(Jg(f,h(i)))u.params[i]=f;else return null}return u}}function Jg(t,e){const r=n=>n===t;return e===void 0?!0:typeof e=="string"?r(e):typeof e=="function"?e(t):Array.isArray(e)?e.some(r):e instanceof RegExp?e.test(t):!1}function fE(t){const[e,r]=t.pattern.split("/*",2),n=e.split("/").filter(Boolean);return n.reduce((i,o)=>i+(o.startsWith(":")?2:3),n.length-(r===void 0?0:1))}function Mw(t){const e=new Map,r=Ew();return new Proxy({},{get(n,i){return e.has(i)||M1(r,()=>e.set(i,zt(()=>t()[i]))),e.get(i)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(t())}})}function Ow(t){let e=/(\/?\:[^\/]+)\?/.exec(t);if(!e)return[t];let r=t.slice(0,e.index),n=t.slice(e.index+e[0].length);const i=[r,r+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(n);)i.push(r+=e[1]),n=n.slice(e[0].length);return Ow(n).reduce((o,s)=>[...o,...i.map(a=>a+s)],[])}const yE=100,Bw=O1(),U1=O1(),Fp=()=>uE(Dm(Bw),"<A> and 'use' router primitives can be only used inside a Route."),mE=()=>Dm(U1)||Fp().base,gE=t=>{const e=mE();return zt(()=>e.resolvePath(t()))},vE=t=>{const e=Fp();return zt(()=>{const r=t();return r!==void 0?e.renderPath(r):r})},Fm=()=>Fp().navigatorFactory(),bE=()=>Fp().location,jw=()=>Fp().params;function PE(t,e=""){const{component:r,preload:n,load:i,children:o,info:s}=t,a=!o||Array.isArray(o)&&!o.length,l={key:t,component:r,preload:n||i,info:s};return Vw(t.path).reduce((d,u)=>{for(const h of Ow(u)){const f=hE(e,h);let p=a?f:f.split("/*",1)[0];p=p.split("/").map(m=>m.startsWith(":")||m.startsWith("*")?m:encodeURIComponent(m)).join("/"),d.push({...l,originalPath:u,pattern:p,matcher:pE(p,!a,t.matchFilters)})}return d},[])}function xE(t,e=0){return{routes:t,score:fE(t[t.length-1])*1e4-e,matcher(r){const n=[];for(let i=t.length-1;i>=0;i--){const o=t[i],s=o.matcher(r);if(!s)return null;n.unshift({...s,route:o})}return n}}}function Vw(t){return Array.isArray(t)?t:[t]}function zw(t,e="",r=[],n=[]){const i=Vw(t);for(let o=0,s=i.length;o<s;o++){const a=i[o];if(a&&typeof a=="object"){a.hasOwnProperty("path")||(a.path="");const l=PE(a,e);for(const d of l){r.push(d);const u=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!u)zw(a.children,d.pattern,r,n);else{const h=xE([...r],n.length);n.push(h)}r.pop()}}}return r.length?n:n.sort((o,s)=>s.score-o.score)}function Qg(t,e){for(let r=0,n=t.length;r<n;r++){const i=t[r].matcher(e);if(i)return i}return[]}function SE(t,e,r){const n=new URL($w),i=zt(u=>{const h=t();try{return new URL(h,n)}catch{return console.error(`Invalid path ${h}`),u}},n,{equals:(u,h)=>u.href===h.href}),o=zt(()=>i().pathname),s=zt(()=>i().search,!0),a=zt(()=>i().hash),l=()=>"",d=F1(s,()=>Fw(i()));return{get pathname(){return o()},get search(){return s()},get hash(){return a()},get state(){return e()},get key(){return l()},query:r?r(d):Mw(d)}}let ed;function wE(){return ed}function CE(t,e,r,n={}){const{signal:[i,o],utils:s={}}=t,a=s.parsePath||(z=>z),l=s.renderPath||(z=>z),d=s.beforeLeave||Lw(),u=Py("",n.base||"");if(u===void 0)throw new Error(`${u} is not a valid base path`);u&&!i().value&&o({value:u,replace:!0,scroll:!1});const[h,f]=Ae(!1);let p;const m=(z,W)=>{W.value===x()&&W.state===g()||(p===void 0&&f(!0),ed=z,p=W,$k(()=>{p===W&&(P(p.value),F(p.state),R[1](A=>A.filter(I=>I.pending)))}).finally(()=>{p===W&&kw(()=>{ed=void 0,z==="navigate"&&_(p),f(!1),p=void 0})}))},[x,P]=Ae(i().value),[g,F]=Ae(i().state),V=SE(x,g,s.queryWrapper),N=[],R=Ae([]),M=zt(()=>typeof n.transformUrl=="function"?Qg(e(),n.transformUrl(V.pathname)):Qg(e(),V.pathname)),C=()=>{const z=M(),W={};for(let A=0;A<z.length;A++)Object.assign(W,z[A].params);return W},k=s.paramsWrapper?s.paramsWrapper(C,e):Mw(C),D={pattern:u,path:()=>u,outlet:()=>null,resolvePath(z){return Py(u,z)}};return be(F1(i,z=>m("native",z),{defer:!0})),{base:D,location:V,params:k,isRouting:h,renderPath:l,parsePath:a,navigatorFactory:w,matches:M,beforeLeave:d,preloadRoute:v,singleFlight:n.singleFlight===void 0?!0:n.singleFlight,submissions:R};function $(z,W,A){_o(()=>{if(typeof W=="number"){W&&(s.go?s.go(W):console.warn("Router integration does not support relative routing"));return}const I=!W||W[0]==="?",{replace:ee,resolve:Z,scroll:X,state:se}={replace:!1,resolve:!I,scroll:!0,...A},U=Z?z.resolvePath(W):Py(I&&V.pathname||"",W);if(U===void 0)throw new Error(`Path '${W}' is not a routable path`);if(N.length>=yE)throw new Error("Too many redirects");const E=x();(U!==E||se!==g())&&(sE||d.confirm(U,A)&&(N.push({value:E,replace:ee,scroll:X,state:g()}),m("navigate",{value:U,state:se})))})}function w(z){return z=z||Dm(U1)||D,(W,A)=>$(z,W,A)}function _(z){const W=N[0];W&&(o({...z,replace:W.replace,scroll:W.scroll}),N.length=0)}function v(z,W){const A=Qg(e(),z.pathname),I=ed;ed="preload";for(let ee in A){const{route:Z,params:X}=A[ee];Z.component&&Z.component.preload&&Z.component.preload();const{preload:se}=Z;W&&se&&M1(r(),()=>se({params:X,location:{pathname:z.pathname,search:z.search,hash:z.hash,query:Fw(z),state:null,key:""},intent:"preload"}))}ed=I}}function _E(t,e,r,n){const{base:i,location:o,params:s}=t,{pattern:a,component:l,preload:d}=n().route,u=zt(()=>n().path);l&&l.preload&&l.preload();const h=d?d({params:s,location:o,intent:ed||"initial"}):void 0;return{parent:e,pattern:a,path:u,outlet:()=>l?T(l,{params:s,location:o,data:h,get children(){return r()}}):r(),resolvePath(p){return Py(i.path(),p,u())}}}const AE=t=>e=>{const{base:r}=e,n=B1(()=>e.children),i=zt(()=>zw(n(),e.base||""));let o;const s=CE(t,i,()=>o,{base:r,singleFlight:e.singleFlight,transformUrl:e.transformUrl});return t.create&&t.create(s),T(Bw.Provider,{value:s,get children(){return T(kE,{routerState:s,get root(){return e.root},get preload(){return e.rootPreload||e.rootLoad},get children(){return[Ve(()=>(o=Ew())&&null),T(EE,{routerState:s,get branches(){return i()}})]}})}})};function kE(t){const e=t.routerState.location,r=t.routerState.params,n=zt(()=>t.preload&&_o(()=>{t.preload({params:r,location:e,intent:wE()||"initial"})}));return T(We,{get when(){return t.root},keyed:!0,get fallback(){return t.children},children:i=>T(i,{params:r,location:e,get data(){return n()},get children(){return t.children}})})}function EE(t){const e=[];let r;const n=zt(F1(t.routerState.matches,(i,o,s)=>{let a=o&&i.length===o.length;const l=[];for(let d=0,u=i.length;d<u;d++){const h=o&&o[d],f=i[d];s&&h&&f.route.key===h.route.key?l[d]=s[d]:(a=!1,e[d]&&e[d](),Yh(p=>{e[d]=p,l[d]=_E(t.routerState,l[d-1]||t.routerState.base,p5(()=>n()[d+1]),()=>t.routerState.matches()[d])}))}return e.splice(i.length).forEach(d=>d()),s&&a?s:(r=l[0],l)}));return p5(()=>n()&&r)()}const p5=t=>()=>T(We,{get when(){return t()},keyed:!0,children:e=>T(U1.Provider,{value:e,get children(){return e.outlet()}})}),$i=t=>{const e=B1(()=>t.children);return C0(t,{get children(){return e()}})};function TE([t,e],r,n){return[t,n?i=>e(n(i)):e]}function IE(t){let e=!1;const r=i=>typeof i=="string"?{value:i}:i,n=TE(Ae(r(t.get()),{equals:(i,o)=>i.value===o.value&&i.state===o.state}),void 0,i=>(!e&&t.set(i),i));return t.init&&Ta(t.init((i=t.get())=>{e=!0,n[1](r(i)),e=!1})),AE({signal:n,create:t.create,utils:t.utils})}function NE(t,e,r){return t.addEventListener(e,r),()=>t.removeEventListener(e,r)}function RE(t,e){const r=t&&document.getElementById(t);r?r.scrollIntoView():e&&window.scrollTo(0,0)}const DE=new Map;function LE(t=!0,e=!1,r="/_server",n){return i=>{const o=i.base.path(),s=i.navigatorFactory(i.base);let a,l;function d(x){return x.namespaceURI==="http://www.w3.org/2000/svg"}function u(x){if(x.defaultPrevented||x.button!==0||x.metaKey||x.altKey||x.ctrlKey||x.shiftKey)return;const P=x.composedPath().find(M=>M instanceof Node&&M.nodeName.toUpperCase()==="A");if(!P||e&&!P.hasAttribute("link"))return;const g=d(P),F=g?P.href.baseVal:P.href;if((g?P.target.baseVal:P.target)||!F&&!P.hasAttribute("state"))return;const N=(P.getAttribute("rel")||"").split(/\s+/);if(P.hasAttribute("download")||N&&N.includes("external"))return;const R=g?new URL(F,document.baseURI):new URL(F);if(!(R.origin!==window.location.origin||o&&R.pathname&&!R.pathname.toLowerCase().startsWith(o.toLowerCase())))return[P,R]}function h(x){const P=u(x);if(!P)return;const[g,F]=P,V=i.parsePath(F.pathname+F.search+F.hash),N=g.getAttribute("state");x.preventDefault(),s(V,{resolve:!1,replace:g.hasAttribute("replace"),scroll:!g.hasAttribute("noscroll"),state:N?JSON.parse(N):void 0})}function f(x){const P=u(x);if(!P)return;const[g,F]=P;i.preloadRoute(F,g.getAttribute("preload")!=="false")}function p(x){clearTimeout(a);const P=u(x);if(!P)return l=null;const[g,F]=P;l!==g&&(a=setTimeout(()=>{i.preloadRoute(F,g.getAttribute("preload")!=="false"),l=g},20))}function m(x){if(x.defaultPrevented)return;let P=x.submitter&&x.submitter.hasAttribute("formaction")?x.submitter.getAttribute("formaction"):x.target.getAttribute("action");if(!P)return;if(!P.startsWith("https://action/")){const F=new URL(P,$w);if(P=i.parsePath(F.pathname+F.search),!P.startsWith(r))return}if(x.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const g=DE.get(P);if(g){x.preventDefault();const F=new FormData(x.target,x.submitter);g.call({r:i,f:x.target},x.target.enctype==="multipart/form-data"?F:new URLSearchParams(F))}}tr(["click","submit"]),document.addEventListener("click",h),t&&(document.addEventListener("mousemove",p,{passive:!0}),document.addEventListener("focusin",f,{passive:!0}),document.addEventListener("touchstart",f,{passive:!0})),document.addEventListener("submit",m),Ta(()=>{document.removeEventListener("click",h),t&&(document.removeEventListener("mousemove",p),document.removeEventListener("focusin",f),document.removeEventListener("touchstart",f)),document.removeEventListener("submit",m)})}}function $E(t){const e=t.replace(/^.*?#/,"");if(!e.startsWith("/")){const[,r="/"]=window.location.hash.split("#",2);return`${r}#${e}`}return e}function FE(t){const e=()=>window.location.hash.slice(1),r=Lw();return IE({get:e,set({value:n,replace:i,scroll:o,state:s}){i?window.history.replaceState(aE(s),"","#"+n):window.history.pushState(s,"","#"+n);const a=n.indexOf("#"),l=a>=0?n.slice(a+1):"";RE(l,o),z1()},init:n=>NE(window,"hashchange",lE(n,i=>!r.confirm(i&&i<0?i:e()))),create:LE(t.preload,t.explicitLinks,t.actionBase),utils:{go:n=>window.history.go(n),renderPath:n=>`#${n}`,parsePath:$E,beforeLeave:r}})(t)}var ME=le("<a>");function Lh(t){t=C0({inactiveClass:"inactive",activeClass:"active"},t);const[,e]=qk(t,["href","state","class","activeClass","inactiveClass","end"]),r=gE(()=>t.href),n=vE(r),i=bE(),o=zt(()=>{const s=r();if(s===void 0)return[!1,!1];const a=cd(s.split(/[?#]/,1)[0]).toLowerCase(),l=decodeURI(cd(i.pathname).toLowerCase());return[t.end?a===l:l.startsWith(a+"/")||l===a,a===l]});return(()=>{var s=ME();return rE(s,C0(e,{get href(){return n()||t.href},get state(){return JSON.stringify(t.state)},get classList(){return{...t.class&&{[t.class]:!0},[t.inactiveClass]:!o()[0],[t.activeClass]:o()[0],...e.classList}},link:"",get"aria-current"(){return o()[1]?"page":void 0}}),!1),s})()}const k0=Symbol("store-raw"),Pu=Symbol("store-node"),Ya=Symbol("store-has"),Uw=Symbol("store-self");function qw(t){let e=t[Zs];if(!e&&(Object.defineProperty(t,Zs,{value:e=new Proxy(t,jE)}),!Array.isArray(t))){const r=Object.keys(t),n=Object.getOwnPropertyDescriptors(t);for(let i=0,o=r.length;i<o;i++){const s=r[i];n[s].get&&Object.defineProperty(t,s,{enumerable:n[s].enumerable,get:n[s].get.bind(e)})}}return e}function Hy(t){let e;return t!=null&&typeof t=="object"&&(t[Zs]||!(e=Object.getPrototypeOf(t))||e===Object.prototype||Array.isArray(t))}function mp(t,e=new Set){let r,n,i,o;if(r=t!=null&&t[k0])return r;if(!Hy(t)||e.has(t))return t;if(Array.isArray(t)){Object.isFrozen(t)?t=t.slice(0):e.add(t);for(let s=0,a=t.length;s<a;s++)i=t[s],(n=mp(i,e))!==i&&(t[s]=n)}else{Object.isFrozen(t)?t=Object.assign({},t):e.add(t);const s=Object.keys(t),a=Object.getOwnPropertyDescriptors(t);for(let l=0,d=s.length;l<d;l++)o=s[l],!a[o].get&&(i=t[o],(n=mp(i,e))!==i&&(t[o]=n))}return t}function Wy(t,e){let r=t[e];return r||Object.defineProperty(t,e,{value:r=Object.create(null)}),r}function gp(t,e,r){if(t[e])return t[e];const[n,i]=Ae(r,{equals:!1,internal:!0});return n.$=i,t[e]=n}function OE(t,e){const r=Reflect.getOwnPropertyDescriptor(t,e);return!r||r.get||!r.configurable||e===Zs||e===Pu||(delete r.value,delete r.writable,r.get=()=>t[Zs][e]),r}function Hw(t){x0()&&gp(Wy(t,Pu),Uw)()}function BE(t){return Hw(t),Reflect.ownKeys(t)}const jE={get(t,e,r){if(e===k0)return t;if(e===Zs)return r;if(e===P0)return Hw(t),r;const n=Wy(t,Pu),i=n[e];let o=i?i():t[e];if(e===Pu||e===Ya||e==="__proto__")return o;if(!i){const s=Object.getOwnPropertyDescriptor(t,e);x0()&&(typeof o!="function"||t.hasOwnProperty(e))&&!(s&&s.get)&&(o=gp(n,e,o)())}return Hy(o)?qw(o):o},has(t,e){return e===k0||e===Zs||e===P0||e===Pu||e===Ya||e==="__proto__"?!0:(x0()&&gp(Wy(t,Ya),e)(),e in t)},set(){return!0},deleteProperty(){return!0},ownKeys:BE,getOwnPropertyDescriptor:OE};function Gy(t,e,r,n=!1){if(!n&&t[e]===r)return;const i=t[e],o=t.length;r===void 0?(delete t[e],t[Ya]&&t[Ya][e]&&i!==void 0&&t[Ya][e].$()):(t[e]=r,t[Ya]&&t[Ya][e]&&i===void 0&&t[Ya][e].$());let s=Wy(t,Pu),a;if((a=gp(s,e,i))&&a.$(()=>r),Array.isArray(t)&&t.length!==o){for(let l=t.length;l<o;l++)(a=s[l])&&a.$();(a=gp(s,"length",o))&&a.$(t.length)}(a=s[Uw])&&a.$()}function Ww(t,e){const r=Object.keys(e);for(let n=0;n<r.length;n+=1){const i=r[n];Gy(t,i,e[i])}}function VE(t,e){if(typeof e=="function"&&(e=e(t)),e=mp(e),Array.isArray(e)){if(t===e)return;let r=0,n=e.length;for(;r<n;r++){const i=e[r];t[r]!==i&&Gy(t,r,i)}Gy(t,"length",n)}else Ww(t,e)}function $h(t,e,r=[]){let n,i=t;if(e.length>1){n=e.shift();const s=typeof n,a=Array.isArray(t);if(Array.isArray(n)){for(let l=0;l<n.length;l++)$h(t,[n[l]].concat(e),r);return}else if(a&&s==="function"){for(let l=0;l<t.length;l++)n(t[l],l)&&$h(t,[l].concat(e),r);return}else if(a&&s==="object"){const{from:l=0,to:d=t.length-1,by:u=1}=n;for(let h=l;h<=d;h+=u)$h(t,[h].concat(e),r);return}else if(e.length>1){$h(t[n],e,[n].concat(r));return}i=t[n],r=[n].concat(r)}let o=e[0];typeof o=="function"&&(o=o(i,r),o===i)||n===void 0&&o==null||(o=mp(o),n===void 0||Hy(i)&&Hy(o)&&!Array.isArray(o)?Ww(i,o):Gy(t,n,o))}function Vu(...[t,e]){const r=mp(t||{}),n=Array.isArray(r),i=qw(r);function o(...s){kw(()=>{n&&s.length===1?VE(r,s[0]):$h(r,s)})}return[i,o]}const Hr=(t=300+Math.random()*700)=>new Promise(e=>setTimeout(e,t)),Ua=(t="")=>`${t}${Date.now()}-${Math.random().toString(36).substr(2,9)}`,q1=(t,e)=>e.split(".").reduce((r,n)=>r?.[n],t),ev=(t,e)=>t.replace(/\{([^}]+)\}/g,(r,n)=>{const i=q1(e,n);return String(i||r)}),zE=(t,e)=>{try{if(!isNaN(Number(t)))return Number(t);const r=q1(e,t);return Number(r)||0}catch{return 0}};let Ut={products:[{id:"prod-001",name:"Wireless Headphones",sku:"WH-001",productCode:"WH-001",productName:"Wireless Headphones",description:"High-quality wireless bluetooth headphones",category:"Electronics",unitOfMeasure:"pcs",unitCost:45,sellingPrice:89.99,minStockLevel:10,maxStockLevel:100,isActive:!0,createdDate:"2024-01-15T10:00:00Z",lastModified:"2024-01-15T10:00:00Z",businessId:"YB100423253156428"},{id:"prod-002",name:"USB-C Cable",sku:"USB-001",description:"3ft USB-C charging cable",category:"Accessories",unitOfMeasure:"pcs",unitCost:8.5,sellingPrice:19.99,minStockLevel:25,maxStockLevel:200,isActive:!0,createdDate:"2024-01-16T10:00:00Z",lastModified:"2024-01-16T10:00:00Z",businessId:"YB100423253156428"},{id:"prod-003",name:"Laptop Stand",sku:"LS-001",description:"Adjustable aluminum laptop stand",category:"Office",unitOfMeasure:"pcs",unitCost:25,sellingPrice:49.99,minStockLevel:5,maxStockLevel:50,isActive:!0,createdDate:"2024-01-17T10:00:00Z",lastModified:"2024-01-17T10:00:00Z",businessId:"YB100423253156428"}],locations:[{id:"loc-001",name:"Main Warehouse",code:"WH-001",type:"warehouse",address:"123 Industrial Dr, City, State 12345",isActive:!0,createdDate:"2024-01-01T10:00:00Z"},{id:"loc-002",name:"Retail Store - Downtown",code:"ST-001",type:"store",address:"456 Main St, City, State 12345",isActive:!0,createdDate:"2024-01-01T10:00:00Z"},{id:"loc-003",name:"Retail Store - Mall",code:"ST-002",type:"store",address:"789 Mall Blvd, City, State 12345",isActive:!0,createdDate:"2024-01-01T10:00:00Z"}],movements:[{id:"mov-001",productId:"prod-001",productName:"Wireless Headphones",productSku:"WH-001",locationId:"loc-001",locationName:"Main Warehouse",movementType:"in",quantity:50,unitCost:45,totalCost:2250,referenceNumber:"PO-001",notes:"Initial stock purchase",createdBy:"admin",createdDate:"2024-01-15T10:00:00Z",invoiceId:"INV-1000001"},{id:"mov-002",productId:"prod-002",productName:"USB-C Cable",productSku:"USB-001",locationId:"loc-001",locationName:"Main Warehouse",movementType:"in",quantity:100,unitCost:8.5,totalCost:850,referenceNumber:"PO-001",notes:"Bulk purchase",createdBy:"admin",createdDate:"2024-01-15T10:05:00Z",invoiceId:"INV-1000001"}],accounts:[{id:"acc-001",accountNumber:"1000",accountName:"Cash",accountType:"asset",category:"currentAssets",balance:5e4,parentAccountId:null,description:"Cash and cash equivalents",isActive:!0,createdDate:"2024-01-01T10:00:00Z",lastModified:"2024-01-01T10:00:00Z"},{id:"acc-002",accountNumber:"1100",accountName:"Accounts Receivable",accountType:"asset",category:"currentAssets",balance:25e3,parentAccountId:null,description:"Money owed by customers",isActive:!0,createdDate:"2024-01-01T10:00:00Z",lastModified:"2024-01-01T10:00:00Z"}],journalEntries:[{id:"je-001",entryNumber:"JE-001",date:"2024-01-15",description:"Initial cash deposit",reference:"DEP-001",status:"posted",createdBy:"admin",createdAt:"2024-01-15T10:00:00Z",postedAt:"2024-01-15T10:05:00Z",lines:[{id:"jel-001",accountId:"acc-001",accountName:"Cash",description:"Initial deposit",debitAmount:5e4,creditAmount:0},{id:"jel-002",accountId:"acc-003",accountName:"Owner Equity",description:"Initial capital",debitAmount:0,creditAmount:5e4}]}],eventRules:[{id:"rule-001",name:"Auto-post completed invoices",description:"Automatically create journal entries for completed invoices",eventType:"invoice_completed",conditions:[{field:"data.isCompleted",operator:"equals",value:!0,dataType:"boolean"},{field:"data.total",operator:"greaterThan",value:0,dataType:"number"}],journalEntryTemplate:{description:"Invoice {data.invoice} - {data.shipper_consignee.name}",reference:"{data.invoice}",lines:[{accountExpression:"1101",descriptionTemplate:"Invoice {data.invoice} - Customer: {data.shipper_consignee.name}",amountExpression:"data.total",isDebit:!0},{accountExpression:"4001",descriptionTemplate:"Sales revenue for invoice {data.invoice}",amountExpression:"data.productSubtotal",isDebit:!1},{accountExpression:"4201",descriptionTemplate:"Transport services",amountExpression:"data.serviceSubtotal",isDebit:!1},{accountExpression:"2301",descriptionTemplate:"Sales tax",amountExpression:"data.taxAmount",isDebit:!1}]},isActive:!0,priority:100,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01"),businessId:"YB100423253156428"},{id:"rule-002",name:"Record cash payments",description:"Create journal entries for cash payments received",eventType:"payment_received",conditions:[{field:"data.paymentMethod",operator:"equals",value:"cash",dataType:"string"}],journalEntryTemplate:{description:"Payment received - {data.customerName}",reference:"{data.reference}",lines:[{accountExpression:"1001",descriptionTemplate:"Cash payment from {data.customerName}",amountExpression:"data.amount",isDebit:!0},{accountExpression:"1101",descriptionTemplate:"Payment for invoice {data.invoiceId}",amountExpression:"data.amount",isDebit:!1}]},isActive:!0,priority:90,createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-01"),businessId:"YB100423253156428"}],eventRuleHistory:[]};const Yn=(t=.05)=>Math.random()<t,Xn=()=>{const t=["Network timeout","Connection refused","Server temporarily unavailable","Invalid request"];throw new Error(t[Math.floor(Math.random()*t.length)])},Bn={products:{async getAll(t,e){await Hr(),Yn()&&Xn();let r=[...Ut.products];if(t&&t.trim()){const n=t.toLowerCase();r=r.filter(i=>i.name.toLowerCase().includes(n)||i.sku.toLowerCase().includes(n)||i.category.toLowerCase().includes(n)||i.description.toLowerCase().includes(n))}return e?.category&&(r=r.filter(n=>n.category===e.category)),e?.isActive!==void 0&&(r=r.filter(n=>n.isActive===e.isActive)),r},async getById(t){return await Hr(),Yn()&&Xn(),Ut.products.find(e=>e.id===t)||null},async create(t){if(await Hr(),Yn()&&Xn(),Ut.products.some(r=>r.sku===t.sku))throw new Error("SKU already exists");const e={...t,id:Ua("prod-"),createdDate:new Date().toISOString(),lastModified:new Date().toISOString()};return Ut.products.push(e),e},async update(t,e){await Hr(),Yn()&&Xn();const r=Ut.products.findIndex(i=>i.id===t);if(r===-1)throw new Error("Product not found");if(e.sku&&Ut.products.some(i=>i.id!==t&&i.sku===e.sku))throw new Error("SKU already exists");const n={...Ut.products[r],...e,lastModified:new Date().toISOString()};return Ut.products[r]=n,n},async delete(t){await Hr(),Yn()&&Xn();const e=Ut.products.findIndex(n=>n.id===t);if(e===-1)throw new Error("Product not found");return Ut.movements.some(n=>n.productId===t)?{success:!1,message:"Cannot delete product with existing movements"}:(Ut.products.splice(e,1),{success:!0,message:"Product deleted successfully"})}},locations:{async getAll(t){await Hr(),Yn()&&Xn();let e=[...Ut.locations];return t?.type&&(e=e.filter(r=>r.type===t.type)),t?.isActive!==void 0&&(e=e.filter(r=>r.isActive===t.isActive)),e},async getById(t){return await Hr(),Ut.locations.find(e=>e.id===t)||null},async create(t){if(await Hr(),Yn()&&Xn(),Ut.locations.some(r=>r.code===t.code))throw new Error("Location code already exists");const e={...t,id:Ua("loc-"),createdDate:new Date().toISOString()};return Ut.locations.push(e),e},async update(t,e){await Hr(),Yn()&&Xn();const r=Ut.locations.findIndex(n=>n.id===t);if(r===-1)throw new Error("Location not found");if(e.code&&Ut.locations.some(n=>n.id!==t&&n.code===e.code))throw new Error("Location code already exists");return Ut.locations[r]={...Ut.locations[r],...e},Ut.locations[r]}},movements:{async getAll(t){await Hr(),Yn()&&Xn();let e=[...Ut.movements];if(t?.productId&&(e=e.filter(r=>r.productId===t.productId)),t?.locationId&&(e=e.filter(r=>r.locationId===t.locationId)),t?.movementType&&(e=e.filter(r=>r.movementType===t.movementType)),t?.dateFrom&&(e=e.filter(r=>r.createdDate>=t.dateFrom)),t?.dateTo&&(e=e.filter(r=>r.createdDate<=t.dateTo)),t?.search){const r=t.search.toLowerCase();e=e.filter(n=>n.productName.toLowerCase().includes(r)||n.productSku.toLowerCase().includes(r)||n.referenceNumber.toLowerCase().includes(r)||n.notes.toLowerCase().includes(r))}return e.sort((r,n)=>new Date(n.createdDate).getTime()-new Date(r.createdDate).getTime()),e},async getById(t){return await Hr(),Ut.movements.find(e=>e.id===t)||null},async create(t){if(await Hr(),Yn()&&Xn(),!Ut.products.find(i=>i.id===t.productId))throw new Error("Product not found");if(!Ut.locations.find(i=>i.id===t.locationId))throw new Error("Location not found");if(t.movementType==="out"){const i=await this.getStockLevel(t.productId,t.locationId);if(i<t.quantity)throw new Error(`Insufficient stock. Available: ${i}, Requested: ${t.quantity}`)}const n={...t,id:Ua("mov-"),createdDate:new Date().toISOString()};return Ut.movements.push(n),n},async update(t,e){await Hr(),Yn()&&Xn();const r=Ut.movements.findIndex(i=>i.id===t);if(r===-1)throw new Error("Movement not found");const n={...Ut.movements[r],...e,lastModified:new Date().toISOString()};return Ut.movements[r]=n,n},async delete(t){await Hr(),Yn()&&Xn();const e=Ut.movements.findIndex(r=>r.id===t);if(e===-1)throw new Error("Movement not found");return Ut.movements.splice(e,1),{success:!0,message:"Movement deleted successfully"}},async createBulk(t){await Hr(),Yn()&&Xn();const e=[],r=[],n=new Date().toISOString(),i=Ut.locations.find(o=>o.id===t.locationId);if(!i)return{success:!1,movements:[],errors:["Invalid location"]};for(let o=0;o<t.items.length;o++){const s=t.items[o],a=Ut.products.find(u=>u.id===s.productId);if(!a){e.push(`Item ${o+1}: Product not found`);continue}if(s.quantity<=0){e.push(`Item ${o+1}: Quantity must be greater than 0`);continue}if(t.movementType==="out"){const u=await this.getStockLevel(s.productId,t.locationId);if(s.quantity>u){e.push(`Item ${o+1}: Insufficient stock. Available: ${u}, Requested: ${s.quantity}`);continue}}const l=s.unitCost||a.unitCost,d={id:Ua("mov-"),productId:a.id,productName:a.name,productSku:a.sku,locationId:t.locationId,locationName:i.name,movementType:t.movementType,quantity:s.quantity,unitCost:l,totalCost:s.quantity*l,referenceNumber:t.referenceNumber,notes:s.notes||t.generalNotes||"",createdBy:t.createdBy,createdDate:n,invoiceId:t.invoiceId,fromLocationId:t.fromLocationId,fromLocationName:t.fromLocationId?Ut.locations.find(u=>u.id===t.fromLocationId)?.name:void 0};r.push(d)}return e.length>0?{success:!1,movements:[],errors:e}:(Ut.movements.push(...r),{success:!0,movements:r,errors:[]})},async getStockLevel(t,e){return await Hr(50),Ut.movements.filter(r=>r.productId===t&&r.locationId===e).reduce((r,n)=>{switch(n.movementType){case"in":case"adjustment":return r+n.quantity;case"out":return r-n.quantity;case"transfer":return n.locationId===e?r+n.quantity:r;default:return r}},0)},async getStockLevels(){await Hr();const t=new Map;for(const e of Ut.movements){const r=`${e.productId}-${e.locationId}`;let n=t.get(r);switch(n||(n={id:r,productId:e.productId,locationId:e.locationId,quantity:0,reservedQuantity:0,availableQuantity:0,averageCost:0,lastMovementDate:e.createdDate,lastMovementType:e.movementType},t.set(r,n)),e.movementType){case"in":case"adjustment":n.quantity+=e.quantity;break;case"out":n.quantity-=e.quantity;break;case"transfer":e.locationId===e.locationId&&(n.quantity+=e.quantity);break}new Date(e.createdDate)>new Date(n.lastMovementDate)&&(n.lastMovementDate=e.createdDate,n.lastMovementType=e.movementType),n.averageCost=e.unitCost,n.availableQuantity=n.quantity-n.reservedQuantity}return Array.from(t.values())}},accounts:{async getAll(t){await Hr(),Yn()&&Xn();let e=[...Ut.accounts];return t?.accountType&&(e=e.filter(r=>r.accountType===t.accountType)),t?.category&&(e=e.filter(r=>r.category===t.category)),t?.isActive!==void 0&&(e=e.filter(r=>r.isActive===t.isActive)),e},async getById(t){return await Hr(),Ut.accounts.find(e=>e.id===t)||null},async create(t){if(await Hr(),Yn()&&Xn(),Ut.accounts.some(r=>r.accountNumber===t.accountNumber))throw new Error("Account number already exists");const e={...t,id:Ua("acc-"),createdDate:new Date().toISOString(),lastModified:new Date().toISOString()};return Ut.accounts.push(e),e},async update(t,e){await Hr(),Yn()&&Xn();const r=Ut.accounts.findIndex(n=>n.id===t);if(r===-1)throw new Error("Account not found");if(e.accountNumber&&Ut.accounts.some(n=>n.id!==t&&n.accountNumber===e.accountNumber))throw new Error("Account number already exists");return Ut.accounts[r]={...Ut.accounts[r],...e,lastModified:new Date().toISOString()},Ut.accounts[r]}},journal:{async getAll(t){await Hr(),Yn()&&Xn();let e=[...Ut.journalEntries];return t?.status&&(e=e.filter(r=>r.status===t.status)),t?.accountId&&(e=e.filter(r=>r.lines.some(n=>n.accountId===t.accountId))),t?.dateFrom&&(e=e.filter(r=>r.date>=t.dateFrom)),t?.dateTo&&(e=e.filter(r=>r.date<=t.dateTo)),e.sort((r,n)=>new Date(n.createdAt).getTime()-new Date(r.createdAt).getTime())},async getById(t){return await Hr(),Ut.journalEntries.find(e=>e.id===t)||null},async create(t){await Hr(),Yn()&&Xn();const e=t.lines.reduce((a,l)=>a+(l.debitAmount||0),0),r=t.lines.reduce((a,l)=>a+(l.creditAmount||0),0);if(Math.abs(e-r)>.01)throw new Error(`Entry is not balanced. Debit: ${e}, Credit: ${r}`);const n=Ut.journalEntries.sort((a,l)=>l.entryNumber.localeCompare(a.entryNumber))[0],o=`JE-${((n?parseInt(n.entryNumber.split("-")[1]):0)+1).toString().padStart(3,"0")}`,s={...t,id:Ua("je-"),entryNumber:o,createdAt:new Date().toISOString(),lines:t.lines.map(a=>({...a,id:Ua("jel-")}))};return Ut.journalEntries.push(s),s},async update(t,e){await Hr(),Yn()&&Xn();const r=Ut.journalEntries.findIndex(n=>n.id===t);if(r===-1)throw new Error("Journal entry not found");if(Ut.journalEntries[r].status==="posted")throw new Error("Cannot modify posted entries");return Ut.journalEntries[r]={...Ut.journalEntries[r],...e},Ut.journalEntries[r]},async post(t){await Hr(),Yn()&&Xn();const e=Ut.journalEntries.findIndex(o=>o.id===t);if(e===-1)throw new Error("Journal entry not found");const r=Ut.journalEntries[e];if(r.status==="posted")throw new Error("Entry is already posted");const n=r.lines.reduce((o,s)=>o+(s.debitAmount||0),0),i=r.lines.reduce((o,s)=>o+(s.creditAmount||0),0);if(Math.abs(n-i)>.01)throw new Error("Entry must be balanced before posting");return Ut.journalEntries[e]={...r,status:"posted",postedAt:new Date().toISOString()},r.lines.forEach(o=>{const s=Ut.accounts.findIndex(a=>a.id===o.accountId);if(s!==-1){const a=Ut.accounts[s],l=o.debitAmount||0,d=o.creditAmount||0;["asset","expense"].includes(a.accountType)?a.balance+=l-d:a.balance+=d-l}}),Ut.journalEntries[e]}},eventRules:{async getAll(){return await Hr(),Yn()&&Xn(),[...Ut.eventRules]},async getById(t){return await Hr(),Ut.eventRules.find(e=>e.id===t)||null},async getByEventType(t){return await Hr(),Ut.eventRules.filter(e=>e.eventType===t&&e.isActive).sort((e,r)=>r.priority-e.priority)},async create(t){await Hr(),Yn()&&Xn();const e={...t,id:Ua("rule-"),createdAt:new Date,updatedAt:new Date,businessId:"YB100423253156428"};return Ut.eventRules.push(e),e},async update(t,e){await Hr(),Yn()&&Xn();const r=Ut.eventRules.findIndex(n=>n.id===t);if(r===-1)throw new Error("Event rule not found");return Ut.eventRules[r]={...Ut.eventRules[r],...e,id:t,updatedAt:new Date},Ut.eventRules[r]},async delete(t){await Hr(),Yn()&&Xn();const e=Ut.eventRules.findIndex(r=>r.id===t);if(e===-1)throw new Error("Event rule not found");return Ut.eventRules.splice(e,1),{success:!0,message:"Event rule deleted successfully"}},async testRule(t,e){await Hr();try{return t.conditions.length===0||t.conditions.every(n=>{const i=q1(e,n.field);switch(n.operator){case"equals":return i===n.value;case"notEquals":return i!==n.value;case"greaterThan":return Number(i)>Number(n.value);case"lessThan":return Number(i)<Number(n.value);case"contains":return String(i).includes(String(n.value));case"exists":return i!=null;case"notExists":return i==null;default:return!1}})?{success:!0,result:{wouldTrigger:!0,estimatedJournalEntry:{description:ev(t.journalEntryTemplate.description,e),reference:ev(t.journalEntryTemplate.reference,e),lines:t.journalEntryTemplate.lines.map(i=>({accountId:i.accountExpression,description:ev(i.descriptionTemplate,e),amount:zE(i.amountExpression,e),isDebit:i.isDebit}))}}}:{success:!0,result:{wouldTrigger:!1,reason:"Conditions not met"}}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}},async getExecutionHistory(t,e=100){await Hr();let r=[...Ut.eventRuleHistory];return t&&(r=r.filter(n=>n.ruleId===t)),r.sort((n,i)=>i.executedAt.getTime()-n.executedAt.getTime()).slice(0,e)},async bulkToggle(t,e){await Hr();const r=[],n=[];for(const i of t){const o=Ut.eventRules.findIndex(s=>s.id===i);o!==-1?(Ut.eventRules[o].isActive=e,Ut.eventRules[o].updatedAt=new Date,r.push(i)):n.push(i)}return{success:n.length===0,updated:r.length,failed:n}},async importRules(t){await Hr();const e=[];let r=0;for(const n of t)try{const i={...n,id:Ua("rule-"),createdAt:new Date,updatedAt:new Date,businessId:"YB100423253156428"};Ut.eventRules.push(i),r++}catch(i){e.push(`Failed to import rule ${n.name}: ${i instanceof Error?i.message:"Unknown error"}`)}return{success:e.length===0,imported:r,failed:t.length-r,errors:e}}},utils:{async getNextEntryNumber(){await Hr(100);const t=Ut.journalEntries.sort((r,n)=>n.entryNumber.localeCompare(r.entryNumber))[0];return`JE-${((t?parseInt(t.entryNumber.split("-")[1]):0)+1).toString().padStart(3,"0")}`},async getNextProductCode(t){await Hr(100);const e=t.toUpperCase().slice(0,3),r=Ut.products.filter(i=>i.productCode?.startsWith(e)).sort((i,o)=>(o.productCode||"").localeCompare(i.productCode||""));if(r.length===0)return`${e}001`;const n=parseInt(r[0].productCode?.slice(-3)||"0");return`${e}${(n+1).toString().padStart(3,"0")}`},async healthCheck(){return await Hr(50),{status:"healthy",timestamp:new Date().toISOString(),version:"1.0.0"}},async resetDatabase(){return await Hr(200),Ut={products:[...Ut.products.slice(0,3)],locations:[...Ut.locations.slice(0,3)],movements:[...Ut.movements.slice(0,2)],accounts:[...Ut.accounts.slice(0,2)],journalEntries:[...Ut.journalEntries.slice(0,1)],eventRules:[...Ut.eventRules.slice(0,2)],eventRuleHistory:[]},{success:!0,message:"Database reset to initial state"}},async getStats(){return await Hr(100),{products:Ut.products.length,locations:Ut.locations.length,movements:Ut.movements.length,accounts:Ut.accounts.length,journalEntries:Ut.journalEntries.length,eventRules:Ut.eventRules.length,eventRuleHistory:Ut.eventRuleHistory.length,totalStockValue:Ut.movements.reduce((t,e)=>e.movementType==="in"?t+e.totalCost:e.movementType==="out"?t-e.totalCost:t,0)}}}},Gw=t=>t===null||typeof t!="object"?t:t instanceof Date?new Date(t.getTime()):Array.isArray(t)?t.map(e=>Gw(e)):JSON.parse(JSON.stringify(t)),So=(t=16)=>{const e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";let r="";for(let n=0;n<t;n++)r+=e.charAt(Math.floor(Math.random()*e.length));return r},f5=(t=16)=>{const e="123456789";let r="";for(let n=0;n<t;n++)r+=e.charAt(Math.floor(Math.random()*e.length));return r},y5=(t=4)=>{const e="0123456789BCDFGKSY";let r="";for(let n=0;n<t;n++)r+=e.charAt(Math.floor(Math.random()*e.length));return r},dd=t=>typeof t=="string"&&t.trim().length>0,Tn=async t=>{const n=await fetch("https://qvamarkets.com/gql_api",{method:"POST",headers:{"Content-Type":"application/json","Accept-Encoding":"gzip, deflate, br",Authorization:"eyJhbGciOiJSUzI1NiIsImtpZCI6IjhlOGZjOGU1NTZmN2E3NmQwOGQzNTgyOWQ2ZjkwYWUyZTEyY2ZkMGQiLCJ0eXAiOiJKV1QifQ"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const i=await n.json();if(i.errors)throw new Error(i.errors[0]?.message||"GraphQL error");return i.data},E0=async t=>{const n=await fetch("https://ssgloghr.com/api/query",{method:"POST",headers:{"Content-Type":"application/json","Accept-Encoding":"gzip, deflate, br",Authorization:"eyJhbGciOiJSUzI1NiIsImtpZCI6IjhlOGZjOGU1NTZmN2E3NmQwOGQzNTgyOWQ2ZjkwYWUyZTEyY2ZkMGQiLCJ0eXAiOiJKV1QifQ"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const i=await n.json();if(i.errors)throw new Error(i.errors[0]?.message||"GraphQL error");return i.data},UE=t=>({ENTRY:"in",in:"in",TRANSFER:"transfer",transfer:"transfer",SALES:"out",out:"out",adjustment:"adjustment"})[t],T0=t=>({ENTRY:"ENTRY",in:"ENTRY",TRANSFER:"TRANSFER",transfer:"TRANSFER",SALES:"SALES",out:"SALES",adjustment:"adjustment"})[t];function od(t){var e=[];return t&&Object.keys(t).map(r=>{e.push(t[r])}),e}function qE(t){if(!/^[a-z0-9+/]+={0,2}$/i.test(t)||t.length%4!=0)throw Error("Not base64 string");for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r,n,i,o,s,a,l,d,u=[],h=0;h<t.length;h+=4)o=e.indexOf(t.charAt(h)),s=e.indexOf(t.charAt(h+1)),a=e.indexOf(t.charAt(h+2)),l=e.indexOf(t.charAt(h+3)),d=o<<18|s<<12|a<<6|l,r=d>>>16&255,n=d>>>8&255,i=d&255,u[h/4]=String.fromCharCode(r,n,i),l==64&&(u[h/4]=String.fromCharCode(r,n)),a==64&&(u[h/4]=String.fromCharCode(r));return t=u.join(""),t}const Kw=(t,e,r,n)=>{let i=0,o={};return t.map(s=>{n?.[s]||Yw(e?.[s],r?.[s])||(i=1,o[s]=e[s])}),{hasChange:i,data:o}},Yw=(t,e)=>Object.prototype.toString.call(t)===Object.prototype.toString.call(e)?Object.prototype.toString.call(t)==="[object Object]"||Object.prototype.toString.call(t)==="[object Array]"?Object.keys(t).length!==Object.keys(e).length?!1:Object.keys(t).every(function(r){return Yw(t[r],e[r])}):t===e:!1,HE=()=>{};var m5={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},WE=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[r++];e[n++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[r++],s=t[r++],a=t[r++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const o=t[r++],s=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Zw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,d=l?t[i+2]:0,u=o>>2,h=(o&3)<<4|a>>4;let f=(a&15)<<2|d>>6,p=d&63;l||(p=64,s||(f=64)),n.push(r[u],r[h],r[f],r[p])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Xw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):WE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const o=r[t.charAt(i++)],a=i<t.length?r[t.charAt(i)]:0;++i;const d=i<t.length?r[t.charAt(i)]:64;++i;const h=i<t.length?r[t.charAt(i)]:64;if(++i,o==null||a==null||d==null||h==null)throw new GE;const f=o<<2|a>>4;if(n.push(f),d!==64){const p=a<<4&240|d>>2;if(n.push(p),h!==64){const m=d<<6&192|h;n.push(m)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class GE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KE=function(t){const e=Xw(t);return Zw.encodeByteArray(e,!0)},Ky=function(t){return KE(t).replace(/\./g,"")},Jw=function(t){try{return Zw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE=()=>YE().__FIREBASE_DEFAULTS__,ZE=()=>{if(typeof process>"u"||typeof m5>"u")return;const t=m5.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},JE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Jw(t[1]);return e&&JSON.parse(e)},Mm=()=>{try{return HE()||XE()||ZE()||JE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Qw=t=>Mm()?.emulatorHosts?.[t],eC=t=>{const e=Qw(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},tC=()=>Mm()?.config,rC=t=>Mm()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function H1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ky(JSON.stringify(r)),Ky(JSON.stringify(s)),""].join(".")}const Xh={};function eT(){const t={prod:[],emulator:[]};for(const e of Object.keys(Xh))Xh[e]?t.emulator.push(e):t.prod.push(e);return t}function tT(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let g5=!1;function W1(t,e){if(typeof window>"u"||typeof document>"u"||!_c(window.location.host)||Xh[t]===e||Xh[t]||g5)return;Xh[t]=e;function r(f){return`__firebase__banner__${f}`}const n="__firebase__banner",o=eT().prod.length>0;function s(){const f=document.getElementById(n);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,p){f.setAttribute("width","24"),f.setAttribute("id",p),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function d(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{g5=!0,s()},f}function u(f,p){f.setAttribute("id",p),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=tT(n),p=r("text"),m=document.getElementById(p)||document.createElement("span"),x=r("learnmore"),P=document.getElementById(x)||document.createElement("a"),g=r("preprendIcon"),F=document.getElementById(g)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const V=f.element;a(V),u(P,x);const N=d();l(F,g),V.append(F,m,P,N),document.body.appendChild(V)}o?(m.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,m.innerText="Preview backend running in this workspace."),m.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ho())}function nT(){const t=Mm()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function sT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aT(){const t=ho();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lT(){return!nT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cT(){try{return typeof indexedDB=="object"}catch{return!1}}function dT(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="FirebaseError";class Ia extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=uT,Object.setPrototypeOf(this,Ia.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mp.prototype.create)}}class Mp{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?hT(o,n):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Ia(i,a,n)}}function hT(t,e){return t.replace(pT,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const pT=/\{\$([^}]+)}/g;function fT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gd(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const o=t[i],s=e[i];if(v5(o)&&v5(s)){if(!gd(o,s))return!1}else if(o!==s)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function v5(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function yT(t,e){const r=new mT(t,e);return r.subscribe.bind(r)}class mT{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");gT(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=tv),i.error===void 0&&(i.error=tv),i.complete===void 0&&(i.complete=tv);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gT(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function tv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(t){return t&&t._delegate?t._delegate:t}class pc{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new QE;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PT(e))try{this.getOrInitializeService({instanceIdentifier:Jc})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:i});n.resolve(o)}catch{}}}}clearInstance(e=Jc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jc){return this.instances.has(e)}getOptions(e=Jc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);n===a&&s.resolve(i)}return i}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const o=this.instances.get(n);return o&&e(o,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:bT(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Jc){return this.component?this.component.multipleInstances?e:Jc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bT(t){return t===Jc?void 0:t}function PT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new vT(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var en;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(en||(en={}));const ST={debug:en.DEBUG,verbose:en.VERBOSE,info:en.INFO,warn:en.WARN,error:en.ERROR,silent:en.SILENT},wT=en.INFO,CT={[en.DEBUG]:"log",[en.VERBOSE]:"log",[en.INFO]:"info",[en.WARN]:"warn",[en.ERROR]:"error"},_T=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=CT[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class G1{constructor(e){this.name=e,this._logLevel=wT,this._logHandler=_T,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in en))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ST[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,en.DEBUG,...e),this._logHandler(this,en.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,en.VERBOSE,...e),this._logHandler(this,en.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,en.INFO,...e),this._logHandler(this,en.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,en.WARN,...e),this._logHandler(this,en.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,en.ERROR,...e),this._logHandler(this,en.ERROR,...e)}}const AT=(t,e)=>e.some(r=>t instanceof r);let b5,P5;function kT(){return b5||(b5=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ET(){return P5||(P5=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iC=new WeakMap,I0=new WeakMap,oC=new WeakMap,rv=new WeakMap,K1=new WeakMap;function TT(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{r(oc(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&iC.set(r,t)}).catch(()=>{}),K1.set(e,t),e}function IT(t){if(I0.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{r(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});I0.set(t,e)}let N0={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return I0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||oC.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return oc(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function NT(t){N0=t(N0)}function RT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(nv(this),e,...r);return oC.set(n,e.sort?e.sort():[e]),oc(n)}:ET().includes(t)?function(...e){return t.apply(nv(this),e),oc(iC.get(this))}:function(...e){return oc(t.apply(nv(this),e))}}function DT(t){return typeof t=="function"?RT(t):(t instanceof IDBTransaction&&IT(t),AT(t,kT())?new Proxy(t,N0):t)}function oc(t){if(t instanceof IDBRequest)return TT(t);if(rv.has(t))return rv.get(t);const e=DT(t);return e!==t&&(rv.set(t,e),K1.set(e,t)),e}const nv=t=>K1.get(t);function LT(t,e,{blocked:r,upgrade:n,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=oc(s);return n&&s.addEventListener("upgradeneeded",l=>{n(oc(s.result),l.oldVersion,l.newVersion,oc(s.transaction),l)}),r&&s.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}const $T=["get","getKey","getAll","getAllKeys","count"],FT=["put","add","delete","clear"],iv=new Map;function x5(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(iv.get(e))return iv.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=FT.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||$T.includes(r)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let d=l.store;return n&&(d=d.index(a.shift())),(await Promise.all([d[r](...a),i&&l.done]))[0]};return iv.set(e,o),o}NT(t=>({...t,get:(e,r,n)=>x5(e,r)||t.get(e,r,n),has:(e,r)=>!!x5(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(OT(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function OT(t){return t.getComponent()?.type==="VERSION"}const R0="@firebase/app",S5="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=new G1("@firebase/app"),BT="@firebase/app-compat",jT="@firebase/analytics-compat",VT="@firebase/analytics",zT="@firebase/app-check-compat",UT="@firebase/app-check",qT="@firebase/auth",HT="@firebase/auth-compat",WT="@firebase/database",GT="@firebase/data-connect",KT="@firebase/database-compat",YT="@firebase/functions",XT="@firebase/functions-compat",ZT="@firebase/installations",JT="@firebase/installations-compat",QT="@firebase/messaging",eI="@firebase/messaging-compat",tI="@firebase/performance",rI="@firebase/performance-compat",nI="@firebase/remote-config",iI="@firebase/remote-config-compat",oI="@firebase/storage",sI="@firebase/storage-compat",aI="@firebase/firestore",lI="@firebase/ai",cI="@firebase/firestore-compat",dI="firebase",uI="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="[DEFAULT]",hI={[R0]:"fire-core",[BT]:"fire-core-compat",[VT]:"fire-analytics",[jT]:"fire-analytics-compat",[UT]:"fire-app-check",[zT]:"fire-app-check-compat",[qT]:"fire-auth",[HT]:"fire-auth-compat",[WT]:"fire-rtdb",[GT]:"fire-data-connect",[KT]:"fire-rtdb-compat",[YT]:"fire-fn",[XT]:"fire-fn-compat",[ZT]:"fire-iid",[JT]:"fire-iid-compat",[QT]:"fire-fcm",[eI]:"fire-fcm-compat",[tI]:"fire-perf",[rI]:"fire-perf-compat",[nI]:"fire-rc",[iI]:"fire-rc-compat",[oI]:"fire-gcs",[sI]:"fire-gcs-compat",[aI]:"fire-fst",[cI]:"fire-fst-compat",[lI]:"fire-vertex","fire-js":"fire-js",[dI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=new Map,pI=new Map,L0=new Map;function w5(t,e){try{t.container.addComponent(e)}catch(r){il.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function vd(t){const e=t.name;if(L0.has(e))return il.debug(`There were multiple attempts to register component ${e}.`),!1;L0.set(e,t);for(const r of Yy.values())w5(r,t);for(const r of pI.values())w5(r,t);return!0}function Om(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Xo(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sc=new Mp("app","Firebase",fI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new pc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=uI;function sC(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:D0,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw sc.create("bad-app-name",{appName:String(i)});if(r||(r=tC()),!r)throw sc.create("no-options");const o=Yy.get(i);if(o){if(gd(r,o.options)&&gd(n,o.config))return o;throw sc.create("duplicate-app",{appName:i})}const s=new xT(i);for(const l of L0.values())s.addComponent(l);const a=new yI(r,n,s);return Yy.set(i,a),a}function Y1(t=D0){const e=Yy.get(t);if(!e&&t===D0&&tC())return sC();if(!e)throw sc.create("no-app",{appName:t});return e}function ga(t,e,r){let n=hI[t]??t;r&&(n+=`-${r}`);const i=n.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const s=[`Unable to register library "${n}" with version "${e}":`];i&&s.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),il.warn(s.join(" "));return}vd(new pc(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="firebase-heartbeat-database",gI=1,vp="firebase-heartbeat-store";let ov=null;function aC(){return ov||(ov=LT(mI,gI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(vp)}catch(r){console.warn(r)}}}}).catch(t=>{throw sc.create("idb-open",{originalErrorMessage:t.message})})),ov}async function vI(t){try{const r=(await aC()).transaction(vp),n=await r.objectStore(vp).get(lC(t));return await r.done,n}catch(e){if(e instanceof Ia)il.warn(e.message);else{const r=sc.create("idb-get",{originalErrorMessage:e?.message});il.warn(r.message)}}}async function C5(t,e){try{const n=(await aC()).transaction(vp,"readwrite");await n.objectStore(vp).put(e,lC(t)),await n.done}catch(r){if(r instanceof Ia)il.warn(r.message);else{const n=sc.create("idb-set",{originalErrorMessage:r?.message});il.warn(n.message)}}}function lC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=1024,PI=30;class xI{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new wI(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=_5();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(i=>i.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats.length>PI){const i=CI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){il.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=_5(),{heartbeatsToSend:r,unsentEntries:n}=SI(this._heartbeatsCache.heartbeats),i=Ky(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return il.warn(e),""}}}function _5(){return new Date().toISOString().substring(0,10)}function SI(t,e=bI){const r=[];let n=t.slice();for(const i of t){const o=r.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),A5(r)>e){o.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),A5(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class wI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cT()?dT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await vI(this.app);return r?.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return C5(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return C5(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function A5(t){return Ky(JSON.stringify({version:2,heartbeats:t})).length}function CI(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(t){vd(new pc("platform-logger",e=>new MT(e),"PRIVATE")),vd(new pc("heartbeat",e=>new xI(e),"PRIVATE")),ga(R0,S5,t),ga(R0,S5,"esm2020"),ga("fire-js","")}_I("");function cC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AI=cC,dC=new Mp("auth","Firebase",cC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy=new G1("@firebase/auth");function kI(t,...e){Xy.logLevel<=en.WARN&&Xy.warn(`Auth (${wd}): ${t}`,...e)}function xy(t,...e){Xy.logLevel<=en.ERROR&&Xy.error(`Auth (${wd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(t,...e){throw Z1(t,...e)}function Xs(t,...e){return Z1(t,...e)}function X1(t,e,r){const n={...AI(),[e]:r};return new Mp("auth","Firebase",n).create(e,{appName:t.name})}function ac(t){return X1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uC(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Aa(t,"argument-error"),X1(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Z1(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return dC.create(t,...e)}function kr(t,e,...r){if(!t)throw Z1(e,...r)}function Xa(t){const e="INTERNAL ASSERTION FAILED: "+t;throw xy(e),new Error(e)}function ol(t,e){t||Xa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(){return typeof self<"u"&&self.location?.href||""}function EI(){return k5()==="http:"||k5()==="https:"}function k5(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(EI()||oT()||"connection"in navigator)?navigator.onLine:!0}function II(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,r){this.shortDelay=e,this.longDelay=r,ol(r>e,"Short delay should be less than long delay!"),this.isMobile=rT()||sT()}get(){return TI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(t,e){ol(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DI=new Bp(3e4,6e4);function Q1(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function zu(t,e,r,n,i={}){return pC(t,i,async()=>{let o={},s={};n&&(e==="GET"?s=n:o={body:JSON.stringify(n)});const a=Op({key:t.config.apiKey,...s}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:l,...o};return iT()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&_c(t.emulatorConfig.host)&&(d.credentials="include"),hC.fetch()(await fC(t,t.config.apiHost,r,a),d)})}async function pC(t,e,r){t._canInitEmulator=!1;const n={...NI,...e};try{const i=new $I(t),o=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw Tf(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[l,d]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tf(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw Tf(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw Tf(t,"user-disabled",s);const u=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw X1(t,u,d);Aa(t,u)}}catch(i){if(i instanceof Ia)throw i;Aa(t,"network-request-failed",{message:String(i)})}}async function LI(t,e,r,n,i={}){const o=await zu(t,e,r,n,i);return"mfaPendingCredential"in o&&Aa(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function fC(t,e,r,n){const i=`${e}${r}?${n}`,o=t,s=o.config.emulator?J1(t.config,i):`${t.config.apiScheme}://${i}`;return RI.includes(r)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}class $I{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Xs(this.auth,"network-request-failed")),DI.get())})}}function Tf(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Xs(t,e,n);return i.customData._tokenResponse=r,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FI(t,e){return zu(t,"POST","/v1/accounts:delete",e)}async function Zy(t,e){return zu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function MI(t,e=!1){const r=ei(t),n=await r.getIdToken(e),i=eb(n);kr(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:n,authTime:Zh(sv(i.auth_time)),issuedAtTime:Zh(sv(i.iat)),expirationTime:Zh(sv(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function sv(t){return Number(t)*1e3}function eb(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return xy("JWT malformed, contained fewer than 3 sections"),null;try{const i=Jw(r);return i?JSON.parse(i):(xy("Failed to decode base64 JWT payload"),null)}catch(i){return xy("Caught error parsing JWT payload as JSON",i?.toString()),null}}function E5(t){const e=eb(t);return kr(e,"internal-error"),kr(typeof e.exp<"u","internal-error"),kr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bp(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Ia&&OI(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function OI({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zh(this.lastLoginAt),this.creationTime=Zh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jy(t){const e=t.auth,r=await t.getIdToken(),n=await bp(t,Zy(e,{idToken:r}));kr(n?.users.length,e,"internal-error");const i=n.users[0];t._notifyReloadListener(i);const o=i.providerUserInfo?.length?yC(i.providerUserInfo):[],s=VI(t.providerData,o),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!s?.length,d=a?l:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new F0(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,u)}async function jI(t){const e=ei(t);await Jy(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VI(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function yC(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zI(t,e){const r=await pC(t,{},async()=>{const n=Op({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await fC(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:n};return t.emulatorConfig&&_c(t.emulatorConfig.host)&&(l.credentials="include"),hC.fetch()(s,l)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function UI(t,e){return zu(t,"POST","/v2/accounts:revokeToken",Q1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){kr(e.idToken,"internal-error"),kr(typeof e.idToken<"u","internal-error"),kr(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):E5(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){kr(e.length!==0,"internal-error");const r=E5(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(kr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:o}=await zI(e,r);this.updateTokensAndExpiration(n,i,Number(o))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:o}=r,s=new xu;return n&&(kr(typeof n=="string","internal-error",{appName:e}),s.refreshToken=n),i&&(kr(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(kr(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xu,this.toJSON())}_performRefresh(){return Xa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(t,e){kr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ks{constructor({uid:e,auth:r,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new BI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new F0(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await bp(this,this.stsTokenManager.getToken(this.auth,e));return kr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return MI(this,e)}reload(){return jI(this)}_assign(e){this!==e&&(kr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Ks({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){kr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Jy(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xo(this.auth.app))return Promise.reject(ac(this.auth));const e=await this.getIdToken();return await bp(this,FI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,i=r.email??void 0,o=r.phoneNumber??void 0,s=r.photoURL??void 0,a=r.tenantId??void 0,l=r._redirectEventId??void 0,d=r.createdAt??void 0,u=r.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:p,providerData:m,stsTokenManager:x}=r;kr(h&&x,e,"internal-error");const P=xu.fromJSON(this.name,x);kr(typeof h=="string",e,"internal-error"),Vl(n,e.name),Vl(i,e.name),kr(typeof f=="boolean",e,"internal-error"),kr(typeof p=="boolean",e,"internal-error"),Vl(o,e.name),Vl(s,e.name),Vl(a,e.name),Vl(l,e.name),Vl(d,e.name),Vl(u,e.name);const g=new Ks({uid:h,auth:e,email:i,emailVerified:f,displayName:n,isAnonymous:p,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:P,createdAt:d,lastLoginAt:u});return m&&Array.isArray(m)&&(g.providerData=m.map(F=>({...F}))),l&&(g._redirectEventId=l),g}static async _fromIdTokenResponse(e,r,n=!1){const i=new xu;i.updateFromServerResponse(r);const o=new Ks({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Jy(o),o}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];kr(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?yC(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new xu;a.updateFromIdToken(n);const l=new Ks({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new F0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(l,d),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=new Map;function Za(t){ol(t instanceof Function,"Expected a class definition");let e=T5.get(t);return e?(ol(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,T5.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}mC.type="NONE";const I5=mC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t,e,r){return`firebase:${t}:${e}:${r}`}class Su{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:o}=this.auth;this.fullUserKey=Sy(this.userKey,i.apiKey,o),this.fullPersistenceKey=Sy("persistence",i.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await Zy(this.auth,{idToken:e}).catch(()=>{});return r?Ks._fromGetAccountInfoResponse(this.auth,r,e):null}return Ks._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Su(Za(I5),e,n);const i=(await Promise.all(r.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=i[0]||Za(I5);const s=Sy(n,e.config.apiKey,e.name);let a=null;for(const d of r)try{const u=await d._get(s);if(u){let h;if(typeof u=="string"){const f=await Zy(e,{idToken:u}).catch(()=>{});if(!f)break;h=await Ks._fromGetAccountInfoResponse(e,f,u)}else h=Ks._fromJSON(e,u);d!==o&&(a=h),o=d;break}}catch{}const l=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new Su(o,e,n):(o=l[0],a&&await o._set(s,a.toJSON()),await Promise.all(r.map(async d=>{if(d!==o)try{await d._remove(s)}catch{}})),new Su(o,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(SC(e))return"Blackberry";if(wC(e))return"Webos";if(vC(e))return"Safari";if((e.includes("chrome/")||bC(e))&&!e.includes("edge/"))return"Chrome";if(xC(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if(n?.length===2)return n[1]}return"Other"}function gC(t=ho()){return/firefox\//i.test(t)}function vC(t=ho()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bC(t=ho()){return/crios\//i.test(t)}function PC(t=ho()){return/iemobile/i.test(t)}function xC(t=ho()){return/android/i.test(t)}function SC(t=ho()){return/blackberry/i.test(t)}function wC(t=ho()){return/webos/i.test(t)}function tb(t=ho()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function qI(t=ho()){return tb(t)&&!!window.navigator?.standalone}function HI(){return aT()&&document.documentMode===10}function CC(t=ho()){return tb(t)||xC(t)||wC(t)||SC(t)||/windows phone/i.test(t)||PC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t,e=[]){let r;switch(t){case"Browser":r=N5(ho());break;case"Worker":r=`${N5(ho())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${wd}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=o=>new Promise((s,a)=>{try{const l=e(o);s(l)}catch(l){a(l)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GI(t,e={}){return zu(t,"GET","/v2/passwordPolicy",Q1(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=6;class YI{constructor(e){const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??KI,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new R5(this),this.idTokenSubscription=new R5(this),this.beforeStateQueue=new WI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Za(r)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Su.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Zy(this,{idToken:e}),n=await Ks._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Xo(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,s=n?._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(n=a.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return kr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Jy(e)}catch(r){if(r?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=II()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xo(this.app))return Promise.reject(ac(this));const r=e?ei(e):null;return r&&kr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&kr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xo(this.app)?Promise.reject(ac(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xo(this.app)?Promise.reject(ac(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Za(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GI(this),r=new YI(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Mp("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await UI(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Za(e)||this._popupRedirectResolver;kr(r,this,"argument-error"),this.redirectPersistenceManager=await Su.create(this,[Za(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(kr(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,i);return()=>{s=!0,l()}}else{const l=e.addObserver(r);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return kr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_C(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(Xo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&kI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Cd(t){return ei(t)}class R5{constructor(e){this.auth=e,this.observer=null,this.addObserver=yT(r=>this.observer=r)}get next(){return kr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rb={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZI(t){rb=t}function JI(t){return rb.loadJS(t)}function QI(){return rb.gapiScript}function e6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t6(t,e){const r=Om(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),o=r.getOptions();if(gd(o,e??{}))return i;Aa(i,"already-initialized")}return r.initialize({options:e})}function r6(t,e){const r=e?.persistence||[],n=(Array.isArray(r)?r:[r]).map(Za);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e?.popupRedirectResolver)}function n6(t,e,r){const n=Cd(t);kr(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,o=AC(e),{host:s,port:a}=i6(e),l=a===null?"":`:${a}`,d={url:`${o}//${s}${l}/`},u=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){kr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),kr(gd(d,n.config.emulator)&&gd(u,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=u,n.settings.appVerificationDisabledForTesting=!0,_c(s)?(H1(`${o}//${s}${l}`),W1("Auth",!0)):o6()}function AC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function i6(t){const e=AC(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const o=i[1];return{host:o,port:D5(n.substr(o.length+1))}}else{const[o,s]=n.split(":");return{host:o,port:D5(s)}}}function D5(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function o6(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Xa("not implemented")}_getIdTokenResponse(e){return Xa("not implemented")}_linkToIdToken(e,r){return Xa("not implemented")}_getReauthenticationResolver(e){return Xa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wu(t,e){return LI(t,"POST","/v1/accounts:signInWithIdp",Q1(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6="http://localhost";class bd extends kC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new bd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Aa("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...o}=r;if(!n||!i)return null;const s=new bd(n,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const r=this.buildRequest();return wu(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,wu(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,wu(e,r)}buildRequest(){const e={requestUri:s6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Op(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp extends Bm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl extends jp{constructor(){super("facebook.com")}static credential(e){return bd._fromParams({providerId:Zl.PROVIDER_ID,signInMethod:Zl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zl.credentialFromTaggedObject(e)}static credentialFromError(e){return Zl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zl.credential(e.oauthAccessToken)}catch{return null}}}Zl.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya extends jp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return bd._fromParams({providerId:ya.PROVIDER_ID,signInMethod:ya.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return ya.credentialFromTaggedObject(e)}static credentialFromError(e){return ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return ya.credential(r,n)}catch{return null}}}ya.GOOGLE_SIGN_IN_METHOD="google.com";ya.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends jp{constructor(){super("github.com")}static credential(e){return bd._fromParams({providerId:Jl.PROVIDER_ID,signInMethod:Jl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jl.credentialFromTaggedObject(e)}static credentialFromError(e){return Jl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jl.credential(e.oauthAccessToken)}catch{return null}}}Jl.GITHUB_SIGN_IN_METHOD="github.com";Jl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql extends jp{constructor(){super("twitter.com")}static credential(e,r){return bd._fromParams({providerId:Ql.PROVIDER_ID,signInMethod:Ql.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Ql.credentialFromTaggedObject(e)}static credentialFromError(e){return Ql.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Ql.credential(r,n)}catch{return null}}}Ql.TWITTER_SIGN_IN_METHOD="twitter.com";Ql.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const o=await Ks._fromIdTokenResponse(e,n,i),s=L5(n);return new Iu({user:o,providerId:s,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=L5(n);return new Iu({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function L5(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy extends Ia{constructor(e,r,n,i){super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Qy.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new Qy(e,r,n,i)}}function EC(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Qy._fromErrorAndOperation(t,o,e,n):o})}async function a6(t,e,r=!1){const n=await bp(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Iu._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l6(t,e,r=!1){const{auth:n}=t;if(Xo(n.app))return Promise.reject(ac(n));const i="reauthenticate";try{const o=await bp(t,EC(n,i,e,t),r);kr(o.idToken,n,"internal-error");const s=eb(o.idToken);kr(s,n,"internal-error");const{sub:a}=s;return kr(t.uid===a,n,"user-mismatch"),Iu._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Aa(n,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(t,e,r=!1){if(Xo(t.app))return Promise.reject(ac(t));const n="signIn",i=await EC(t,n,e),o=await Iu._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(o.user),o}async function c6(t,e){return TC(Cd(t),e)}function d6(t,e,r,n){return ei(t).onIdTokenChanged(e,r,n)}function u6(t,e,r){return ei(t).beforeAuthStateChanged(e,r)}function h6(t,e,r,n){return ei(t).onAuthStateChanged(e,r,n)}function p6(t){return ei(t).signOut()}const em="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(em,"1"),this.storage.removeItem(em),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6=1e3,y6=10;class NC extends IC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((s,a,l)=>{this.notifyListeners(s,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(n);!r&&this.localCache[n]===s||this.notifyListeners(n,s)},o=this.storage.getItem(n);HI()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,y6):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},f6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}NC.type="LOCAL";const m6=NC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC extends IC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}RC.type="SESSION";const DC=RC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new jm(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:o}=r.data,s=this.handlersMap[i];if(!s?.size)return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const a=Array.from(s).map(async d=>d(r.origin,o)),l=await g6(a);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,l)=>{const d=nb("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===d)switch(f.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(u),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:r},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(){return window}function b6(t){va().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(){return typeof va().WorkerGlobalScope<"u"&&typeof va().importScripts=="function"}async function P6(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function x6(){return navigator?.serviceWorker?.controller||null}function S6(){return LC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="firebaseLocalStorageDb",w6=1,tm="firebaseLocalStorage",FC="fbase_key";class Vp{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Vm(t,e){return t.transaction([tm],e?"readwrite":"readonly").objectStore(tm)}function C6(){const t=indexedDB.deleteDatabase($C);return new Vp(t).toPromise()}function M0(){const t=indexedDB.open($C,w6);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(tm,{keyPath:FC})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(tm)?e(n):(n.close(),await C6(),e(await M0()))})})}async function $5(t,e,r){const n=Vm(t,!0).put({[FC]:e,value:r});return new Vp(n).toPromise()}async function _6(t,e){const r=Vm(t,!1).get(e),n=await new Vp(r).toPromise();return n===void 0?null:n.value}function F5(t,e){const r=Vm(t,!0).delete(e);return new Vp(r).toPromise()}const A6=800,k6=3;class MC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await M0(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>k6)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jm._getInstance(S6()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await P6(),!this.activeServiceWorker)return;this.sender=new v6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||x6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await M0();return await $5(e,em,"1"),await F5(e,em),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>$5(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>_6(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>F5(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Vm(i,!1).getAll();return new Vp(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),A6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}MC.type="LOCAL";const E6=MC;new Bp(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(t,e){return e?Za(e):(kr(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob extends kC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wu(e,this._buildIdpRequest())}_linkToIdToken(e,r){return wu(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return wu(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function T6(t){return TC(t.auth,new ob(t),t.bypassAuthState)}function I6(t){const{auth:e,user:r}=t;return kr(r,e,"internal-error"),l6(r,new ob(t),t.bypassAuthState)}async function N6(t){const{auth:e,user:r}=t;return kr(r,e,"internal-error"),a6(r,new ob(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,r,n,i,o=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return T6;case"linkViaPopup":case"linkViaRedirect":return N6;case"reauthViaPopup":case"reauthViaRedirect":return I6;default:Aa(this.auth,"internal-error")}}resolve(e){ol(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ol(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6=new Bp(2e3,1e4);async function D6(t,e,r){if(Xo(t.app))return Promise.reject(Xs(t,"operation-not-supported-in-this-environment"));const n=Cd(t);uC(t,e,Bm);const i=ib(n,r);return new sd(n,"signInViaPopup",e,i).executeNotNull()}class sd extends OC{constructor(e,r,n,i,o){super(e,r,i,o),this.provider=n,this.authWindow=null,this.pollId=null,sd.currentPopupAction&&sd.currentPopupAction.cancel(),sd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return kr(e,this.auth,"internal-error"),e}async onExecution(){ol(this.filter.length===1,"Popup operations only handle one event");const e=nb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Xs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Xs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sd.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,R6.get())};e()}}sd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6="pendingRedirect",wy=new Map;class $6 extends OC{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=wy.get(this.auth._key());if(!e){try{const n=await F6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}wy.set(this.auth._key(),e)}return this.bypassAuthState||wy.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function F6(t,e){const r=jC(e),n=BC(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}async function M6(t,e){return BC(t)._set(jC(e),"true")}function O6(t,e){wy.set(t._key(),e)}function BC(t){return Za(t._redirectPersistence)}function jC(t){return Sy(L6,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B6(t,e,r){return j6(t,e,r)}async function j6(t,e,r){if(Xo(t.app))return Promise.reject(ac(t));const n=Cd(t);uC(t,e,Bm),await n._initializationPromise;const i=ib(n,r);return await M6(i,n),i._openRedirect(n,e,"signInViaRedirect")}async function V6(t,e){return await Cd(t)._initializationPromise,VC(t,e,!1)}async function VC(t,e,r=!1){if(Xo(t.app))return Promise.reject(ac(t));const n=Cd(t),i=ib(n,e),s=await new $6(n,i,r).execute();return s&&!r&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6=10*60*1e3;class U6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!q6(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){if(e.error&&!zC(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";r.onError(Xs(this.auth,n))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=z6&&this.cachedEventUids.clear(),this.cachedEventUids.has(M5(e))}saveEventToCache(e){this.cachedEventUids.add(M5(e)),this.lastProcessedEventTime=Date.now()}}function M5(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function zC({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function q6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H6(t,e={}){return zu(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,G6=/^https?/;async function K6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await H6(t);for(const r of e)try{if(Y6(r))return}catch{}Aa(t,"unauthorized-domain")}function Y6(t){const e=$0(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&s.hostname===n}if(!G6.test(r))return!1;if(W6.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6=new Bp(3e4,6e4);function O5(){const t=va().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Z6(t){return new Promise((e,r)=>{function n(){O5(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{O5(),r(Xs(t,"network-request-failed"))},timeout:X6.get()})}if(va().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(va().gapi?.load)n();else{const i=e6("iframefcb");return va()[i]=()=>{gapi.load?n():r(Xs(t,"network-request-failed"))},JI(`${QI()}?onload=${i}`).catch(o=>r(o))}}).catch(e=>{throw Cy=null,e})}let Cy=null;function J6(t){return Cy=Cy||Z6(t),Cy}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6=new Bp(5e3,15e3),e8="__/auth/iframe",t8="emulator/auth/iframe",r8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},n8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function i8(t){const e=t.config;kr(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?J1(e,t8):`https://${t.config.authDomain}/${e8}`,n={apiKey:e.apiKey,appName:t.name,v:wd},i=n8.get(t.config.apiHost);i&&(n.eid=i);const o=t._getFrameworks();return o.length&&(n.fw=o.join(",")),`${r}?${Op(n).slice(1)}`}async function o8(t){const e=await J6(t),r=va().gapi;return kr(r,t,"internal-error"),e.open({where:document.body,url:i8(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:r8,dontclear:!0},n=>new Promise(async(i,o)=>{await n.restyle({setHideOnLeave:!1});const s=Xs(t,"network-request-failed"),a=va().setTimeout(()=>{o(s)},Q6.get());function l(){va().clearTimeout(a),i(n)}n.ping(l).then(l,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},a8=500,l8=600,c8="_blank",d8="http://localhost";class B5{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function u8(t,e,r,n=a8,i=l8){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const l={...s8,width:n.toString(),height:i.toString(),top:o,left:s},d=ho().toLowerCase();r&&(a=bC(d)?c8:r),gC(d)&&(e=e||d8,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[p,m])=>`${f}${p}=${m},`,"");if(qI(d)&&a!=="_self")return h8(e||"",a),new B5(null);const h=window.open(e||"",a,u);kr(h,t,"popup-blocked");try{h.focus()}catch{}return new B5(h)}function h8(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p8="__/auth/handler",f8="emulator/auth/handler",y8=encodeURIComponent("fac");async function j5(t,e,r,n,i,o){kr(t.config.authDomain,t,"auth-domain-config-required"),kr(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:wd,eventId:i};if(e instanceof Bm){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",fT(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))s[u]=h}if(e instanceof jp){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(s.scopes=u.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),d=l?`#${y8}=${encodeURIComponent(l)}`:"";return`${m8(t)}?${Op(a).slice(1)}${d}`}function m8({config:t}){return t.emulator?J1(t,f8):`https://${t.authDomain}/${p8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="webStorageSupport";class g8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DC,this._completeRedirectFn=VC,this._overrideRedirectResult=O6}async _openPopup(e,r,n,i){ol(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await j5(e,r,n,$0(),i);return u8(e,o,nb())}async _openRedirect(e,r,n,i){await this._originValidation(e);const o=await j5(e,r,n,$0(),i);return b6(o),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:o}=this.eventManagers[r];return i?Promise.resolve(i):(ol(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await o8(e),n=new U6(e);return r.register("authEvent",i=>(kr(i?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(av,{type:av},i=>{const o=i?.[0]?.[av];o!==void 0&&r(!!o),Aa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=K6(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return CC()||vC()||tb()}}const v8=g8;var V5="@firebase/auth",z5="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){kr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function x8(t){vd(new pc("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=n.options;kr(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_C(t)},d=new XI(n,i,o,l);return r6(d,r),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),vd(new pc("auth-internal",e=>{const r=Cd(e.getProvider("auth").getImmediate());return(n=>new b8(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),ga(V5,z5,P8(t)),ga(V5,z5,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S8=5*60,w8=rC("authIdTokenMaxAge")||S8;let U5=null;const C8=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>w8)return;const i=r?.token;U5!==i&&(U5=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function _8(t=Y1()){const e=Om(t,"auth");if(e.isInitialized())return e.getImmediate();const r=t6(t,{popupRedirectResolver:v8,persistence:[E6,m6,DC]}),n=rC("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const s=C8(o.toString());u6(r,s,()=>s(r.currentUser)),d6(r,a=>s(a))}}const i=Qw("auth");return i&&n6(r,`http://${i}`),r}function A8(){return document.getElementsByTagName("head")?.[0]??document}ZI({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const o=Xs("internal-error");o.customData=i,r(o)},n.type="text/javascript",n.charset="UTF-8",A8().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});x8("Browser");var k8="firebase",E8="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ga(k8,E8,"app");var q5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lc,UC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,k){function D(){}D.prototype=k.prototype,C.D=k.prototype,C.prototype=new D,C.prototype.constructor=C,C.C=function($,w,_){for(var v=Array(arguments.length-2),z=2;z<arguments.length;z++)v[z-2]=arguments[z];return k.prototype[w].apply($,v)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,k,D){D||(D=0);var $=Array(16);if(typeof k=="string")for(var w=0;16>w;++w)$[w]=k.charCodeAt(D++)|k.charCodeAt(D++)<<8|k.charCodeAt(D++)<<16|k.charCodeAt(D++)<<24;else for(w=0;16>w;++w)$[w]=k[D++]|k[D++]<<8|k[D++]<<16|k[D++]<<24;k=C.g[0],D=C.g[1],w=C.g[2];var _=C.g[3],v=k+(_^D&(w^_))+$[0]+3614090360&4294967295;k=D+(v<<7&4294967295|v>>>25),v=_+(w^k&(D^w))+$[1]+3905402710&4294967295,_=k+(v<<12&4294967295|v>>>20),v=w+(D^_&(k^D))+$[2]+606105819&4294967295,w=_+(v<<17&4294967295|v>>>15),v=D+(k^w&(_^k))+$[3]+3250441966&4294967295,D=w+(v<<22&4294967295|v>>>10),v=k+(_^D&(w^_))+$[4]+4118548399&4294967295,k=D+(v<<7&4294967295|v>>>25),v=_+(w^k&(D^w))+$[5]+1200080426&4294967295,_=k+(v<<12&4294967295|v>>>20),v=w+(D^_&(k^D))+$[6]+2821735955&4294967295,w=_+(v<<17&4294967295|v>>>15),v=D+(k^w&(_^k))+$[7]+4249261313&4294967295,D=w+(v<<22&4294967295|v>>>10),v=k+(_^D&(w^_))+$[8]+1770035416&4294967295,k=D+(v<<7&4294967295|v>>>25),v=_+(w^k&(D^w))+$[9]+2336552879&4294967295,_=k+(v<<12&4294967295|v>>>20),v=w+(D^_&(k^D))+$[10]+4294925233&4294967295,w=_+(v<<17&4294967295|v>>>15),v=D+(k^w&(_^k))+$[11]+2304563134&4294967295,D=w+(v<<22&4294967295|v>>>10),v=k+(_^D&(w^_))+$[12]+1804603682&4294967295,k=D+(v<<7&4294967295|v>>>25),v=_+(w^k&(D^w))+$[13]+4254626195&4294967295,_=k+(v<<12&4294967295|v>>>20),v=w+(D^_&(k^D))+$[14]+2792965006&4294967295,w=_+(v<<17&4294967295|v>>>15),v=D+(k^w&(_^k))+$[15]+1236535329&4294967295,D=w+(v<<22&4294967295|v>>>10),v=k+(w^_&(D^w))+$[1]+4129170786&4294967295,k=D+(v<<5&4294967295|v>>>27),v=_+(D^w&(k^D))+$[6]+3225465664&4294967295,_=k+(v<<9&4294967295|v>>>23),v=w+(k^D&(_^k))+$[11]+643717713&4294967295,w=_+(v<<14&4294967295|v>>>18),v=D+(_^k&(w^_))+$[0]+3921069994&4294967295,D=w+(v<<20&4294967295|v>>>12),v=k+(w^_&(D^w))+$[5]+3593408605&4294967295,k=D+(v<<5&4294967295|v>>>27),v=_+(D^w&(k^D))+$[10]+38016083&4294967295,_=k+(v<<9&4294967295|v>>>23),v=w+(k^D&(_^k))+$[15]+3634488961&4294967295,w=_+(v<<14&4294967295|v>>>18),v=D+(_^k&(w^_))+$[4]+3889429448&4294967295,D=w+(v<<20&4294967295|v>>>12),v=k+(w^_&(D^w))+$[9]+568446438&4294967295,k=D+(v<<5&4294967295|v>>>27),v=_+(D^w&(k^D))+$[14]+3275163606&4294967295,_=k+(v<<9&4294967295|v>>>23),v=w+(k^D&(_^k))+$[3]+4107603335&4294967295,w=_+(v<<14&4294967295|v>>>18),v=D+(_^k&(w^_))+$[8]+1163531501&4294967295,D=w+(v<<20&4294967295|v>>>12),v=k+(w^_&(D^w))+$[13]+2850285829&4294967295,k=D+(v<<5&4294967295|v>>>27),v=_+(D^w&(k^D))+$[2]+4243563512&4294967295,_=k+(v<<9&4294967295|v>>>23),v=w+(k^D&(_^k))+$[7]+1735328473&4294967295,w=_+(v<<14&4294967295|v>>>18),v=D+(_^k&(w^_))+$[12]+2368359562&4294967295,D=w+(v<<20&4294967295|v>>>12),v=k+(D^w^_)+$[5]+4294588738&4294967295,k=D+(v<<4&4294967295|v>>>28),v=_+(k^D^w)+$[8]+2272392833&4294967295,_=k+(v<<11&4294967295|v>>>21),v=w+(_^k^D)+$[11]+1839030562&4294967295,w=_+(v<<16&4294967295|v>>>16),v=D+(w^_^k)+$[14]+4259657740&4294967295,D=w+(v<<23&4294967295|v>>>9),v=k+(D^w^_)+$[1]+2763975236&4294967295,k=D+(v<<4&4294967295|v>>>28),v=_+(k^D^w)+$[4]+1272893353&4294967295,_=k+(v<<11&4294967295|v>>>21),v=w+(_^k^D)+$[7]+4139469664&4294967295,w=_+(v<<16&4294967295|v>>>16),v=D+(w^_^k)+$[10]+3200236656&4294967295,D=w+(v<<23&4294967295|v>>>9),v=k+(D^w^_)+$[13]+681279174&4294967295,k=D+(v<<4&4294967295|v>>>28),v=_+(k^D^w)+$[0]+3936430074&4294967295,_=k+(v<<11&4294967295|v>>>21),v=w+(_^k^D)+$[3]+3572445317&4294967295,w=_+(v<<16&4294967295|v>>>16),v=D+(w^_^k)+$[6]+76029189&4294967295,D=w+(v<<23&4294967295|v>>>9),v=k+(D^w^_)+$[9]+3654602809&4294967295,k=D+(v<<4&4294967295|v>>>28),v=_+(k^D^w)+$[12]+3873151461&4294967295,_=k+(v<<11&4294967295|v>>>21),v=w+(_^k^D)+$[15]+530742520&4294967295,w=_+(v<<16&4294967295|v>>>16),v=D+(w^_^k)+$[2]+3299628645&4294967295,D=w+(v<<23&4294967295|v>>>9),v=k+(w^(D|~_))+$[0]+4096336452&4294967295,k=D+(v<<6&4294967295|v>>>26),v=_+(D^(k|~w))+$[7]+1126891415&4294967295,_=k+(v<<10&4294967295|v>>>22),v=w+(k^(_|~D))+$[14]+2878612391&4294967295,w=_+(v<<15&4294967295|v>>>17),v=D+(_^(w|~k))+$[5]+4237533241&4294967295,D=w+(v<<21&4294967295|v>>>11),v=k+(w^(D|~_))+$[12]+1700485571&4294967295,k=D+(v<<6&4294967295|v>>>26),v=_+(D^(k|~w))+$[3]+2399980690&4294967295,_=k+(v<<10&4294967295|v>>>22),v=w+(k^(_|~D))+$[10]+4293915773&4294967295,w=_+(v<<15&4294967295|v>>>17),v=D+(_^(w|~k))+$[1]+2240044497&4294967295,D=w+(v<<21&4294967295|v>>>11),v=k+(w^(D|~_))+$[8]+1873313359&4294967295,k=D+(v<<6&4294967295|v>>>26),v=_+(D^(k|~w))+$[15]+4264355552&4294967295,_=k+(v<<10&4294967295|v>>>22),v=w+(k^(_|~D))+$[6]+2734768916&4294967295,w=_+(v<<15&4294967295|v>>>17),v=D+(_^(w|~k))+$[13]+1309151649&4294967295,D=w+(v<<21&4294967295|v>>>11),v=k+(w^(D|~_))+$[4]+4149444226&4294967295,k=D+(v<<6&4294967295|v>>>26),v=_+(D^(k|~w))+$[11]+3174756917&4294967295,_=k+(v<<10&4294967295|v>>>22),v=w+(k^(_|~D))+$[2]+718787259&4294967295,w=_+(v<<15&4294967295|v>>>17),v=D+(_^(w|~k))+$[9]+3951481745&4294967295,C.g[0]=C.g[0]+k&4294967295,C.g[1]=C.g[1]+(w+(v<<21&4294967295|v>>>11))&4294967295,C.g[2]=C.g[2]+w&4294967295,C.g[3]=C.g[3]+_&4294967295}n.prototype.u=function(C,k){k===void 0&&(k=C.length);for(var D=k-this.blockSize,$=this.B,w=this.h,_=0;_<k;){if(w==0)for(;_<=D;)i(this,C,_),_+=this.blockSize;if(typeof C=="string"){for(;_<k;)if($[w++]=C.charCodeAt(_++),w==this.blockSize){i(this,$),w=0;break}}else for(;_<k;)if($[w++]=C[_++],w==this.blockSize){i(this,$),w=0;break}}this.h=w,this.o+=k},n.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var k=1;k<C.length-8;++k)C[k]=0;var D=8*this.o;for(k=C.length-8;k<C.length;++k)C[k]=D&255,D/=256;for(this.u(C),C=Array(16),k=D=0;4>k;++k)for(var $=0;32>$;$+=8)C[D++]=this.g[k]>>>$&255;return C};function o(C,k){var D=a;return Object.prototype.hasOwnProperty.call(D,C)?D[C]:D[C]=k(C)}function s(C,k){this.h=k;for(var D=[],$=!0,w=C.length-1;0<=w;w--){var _=C[w]|0;$&&_==k||(D[w]=_,$=!1)}this.g=D}var a={};function l(C){return-128<=C&&128>C?o(C,function(k){return new s([k|0],0>k?-1:0)}):new s([C|0],0>C?-1:0)}function d(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return P(d(-C));for(var k=[],D=1,$=0;C>=D;$++)k[$]=C/D|0,D*=4294967296;return new s(k,0)}function u(C,k){if(C.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(C.charAt(0)=="-")return P(u(C.substring(1),k));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=d(Math.pow(k,8)),$=h,w=0;w<C.length;w+=8){var _=Math.min(8,C.length-w),v=parseInt(C.substring(w,w+_),k);8>_?(_=d(Math.pow(k,_)),$=$.j(_).add(d(v))):($=$.j(D),$=$.add(d(v)))}return $}var h=l(0),f=l(1),p=l(16777216);t=s.prototype,t.m=function(){if(x(this))return-P(this).m();for(var C=0,k=1,D=0;D<this.g.length;D++){var $=this.i(D);C+=(0<=$?$:4294967296+$)*k,k*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(m(this))return"0";if(x(this))return"-"+P(this).toString(C);for(var k=d(Math.pow(C,6)),D=this,$="";;){var w=N(D,k).g;D=g(D,w.j(k));var _=((0<D.g.length?D.g[0]:D.h)>>>0).toString(C);if(D=w,m(D))return _+$;for(;6>_.length;)_="0"+_;$=_+$}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function m(C){if(C.h!=0)return!1;for(var k=0;k<C.g.length;k++)if(C.g[k]!=0)return!1;return!0}function x(C){return C.h==-1}t.l=function(C){return C=g(this,C),x(C)?-1:m(C)?0:1};function P(C){for(var k=C.g.length,D=[],$=0;$<k;$++)D[$]=~C.g[$];return new s(D,~C.h).add(f)}t.abs=function(){return x(this)?P(this):this},t.add=function(C){for(var k=Math.max(this.g.length,C.g.length),D=[],$=0,w=0;w<=k;w++){var _=$+(this.i(w)&65535)+(C.i(w)&65535),v=(_>>>16)+(this.i(w)>>>16)+(C.i(w)>>>16);$=v>>>16,_&=65535,v&=65535,D[w]=v<<16|_}return new s(D,D[D.length-1]&-2147483648?-1:0)};function g(C,k){return C.add(P(k))}t.j=function(C){if(m(this)||m(C))return h;if(x(this))return x(C)?P(this).j(P(C)):P(P(this).j(C));if(x(C))return P(this.j(P(C)));if(0>this.l(p)&&0>C.l(p))return d(this.m()*C.m());for(var k=this.g.length+C.g.length,D=[],$=0;$<2*k;$++)D[$]=0;for($=0;$<this.g.length;$++)for(var w=0;w<C.g.length;w++){var _=this.i($)>>>16,v=this.i($)&65535,z=C.i(w)>>>16,W=C.i(w)&65535;D[2*$+2*w]+=v*W,F(D,2*$+2*w),D[2*$+2*w+1]+=_*W,F(D,2*$+2*w+1),D[2*$+2*w+1]+=v*z,F(D,2*$+2*w+1),D[2*$+2*w+2]+=_*z,F(D,2*$+2*w+2)}for($=0;$<k;$++)D[$]=D[2*$+1]<<16|D[2*$];for($=k;$<2*k;$++)D[$]=0;return new s(D,0)};function F(C,k){for(;(C[k]&65535)!=C[k];)C[k+1]+=C[k]>>>16,C[k]&=65535,k++}function V(C,k){this.g=C,this.h=k}function N(C,k){if(m(k))throw Error("division by zero");if(m(C))return new V(h,h);if(x(C))return k=N(P(C),k),new V(P(k.g),P(k.h));if(x(k))return k=N(C,P(k)),new V(P(k.g),k.h);if(30<C.g.length){if(x(C)||x(k))throw Error("slowDivide_ only works with positive integers.");for(var D=f,$=k;0>=$.l(C);)D=R(D),$=R($);var w=M(D,1),_=M($,1);for($=M($,2),D=M(D,2);!m($);){var v=_.add($);0>=v.l(C)&&(w=w.add(D),_=v),$=M($,1),D=M(D,1)}return k=g(C,w.j(k)),new V(w,k)}for(w=h;0<=C.l(k);){for(D=Math.max(1,Math.floor(C.m()/k.m())),$=Math.ceil(Math.log(D)/Math.LN2),$=48>=$?1:Math.pow(2,$-48),_=d(D),v=_.j(k);x(v)||0<v.l(C);)D-=$,_=d(D),v=_.j(k);m(_)&&(_=f),w=w.add(_),C=g(C,v)}return new V(w,C)}t.A=function(C){return N(this,C).h},t.and=function(C){for(var k=Math.max(this.g.length,C.g.length),D=[],$=0;$<k;$++)D[$]=this.i($)&C.i($);return new s(D,this.h&C.h)},t.or=function(C){for(var k=Math.max(this.g.length,C.g.length),D=[],$=0;$<k;$++)D[$]=this.i($)|C.i($);return new s(D,this.h|C.h)},t.xor=function(C){for(var k=Math.max(this.g.length,C.g.length),D=[],$=0;$<k;$++)D[$]=this.i($)^C.i($);return new s(D,this.h^C.h)};function R(C){for(var k=C.g.length+1,D=[],$=0;$<k;$++)D[$]=C.i($)<<1|C.i($-1)>>>31;return new s(D,C.h)}function M(C,k){var D=k>>5;k%=32;for(var $=C.g.length-D,w=[],_=0;_<$;_++)w[_]=0<k?C.i(_+D)>>>k|C.i(_+D+1)<<32-k:C.i(_+D);return new s(w,C.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,UC=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=u,lc=s}).apply(typeof q5<"u"?q5:typeof self<"u"?self:typeof window<"u"?window:{});var If=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qC,Fh,HC,_y,O0,WC,GC,KC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(S,ae,Pe){return S==Array.prototype||S==Object.prototype||(S[ae]=Pe.value),S};function r(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof If=="object"&&If];for(var ae=0;ae<S.length;++ae){var Pe=S[ae];if(Pe&&Pe.Math==Math)return Pe}throw Error("Cannot find global object")}var n=r(this);function i(S,ae){if(ae)e:{var Pe=n;S=S.split(".");for(var Fe=0;Fe<S.length-1;Fe++){var st=S[Fe];if(!(st in Pe))break e;Pe=Pe[st]}S=S[S.length-1],Fe=Pe[S],ae=ae(Fe),ae!=Fe&&ae!=null&&e(Pe,S,{configurable:!0,writable:!0,value:ae})}}function o(S,ae){S instanceof String&&(S+="");var Pe=0,Fe=!1,st={next:function(){if(!Fe&&Pe<S.length){var pt=Pe++;return{value:ae(pt,S[pt]),done:!1}}return Fe=!0,{done:!0,value:void 0}}};return st[Symbol.iterator]=function(){return st},st}i("Array.prototype.values",function(S){return S||function(){return o(this,function(ae,Pe){return Pe})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(S){var ae=typeof S;return ae=ae!="object"?ae:S?Array.isArray(S)?"array":ae:"null",ae=="array"||ae=="object"&&typeof S.length=="number"}function d(S){var ae=typeof S;return ae=="object"&&S!=null||ae=="function"}function u(S,ae,Pe){return S.call.apply(S.bind,arguments)}function h(S,ae,Pe){if(!S)throw Error();if(2<arguments.length){var Fe=Array.prototype.slice.call(arguments,2);return function(){var st=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(st,Fe),S.apply(ae,st)}}return function(){return S.apply(ae,arguments)}}function f(S,ae,Pe){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,f.apply(null,arguments)}function p(S,ae){var Pe=Array.prototype.slice.call(arguments,1);return function(){var Fe=Pe.slice();return Fe.push.apply(Fe,arguments),S.apply(this,Fe)}}function m(S,ae){function Pe(){}Pe.prototype=ae.prototype,S.aa=ae.prototype,S.prototype=new Pe,S.prototype.constructor=S,S.Qb=function(Fe,st,pt){for(var jt=Array(arguments.length-2),$r=2;$r<arguments.length;$r++)jt[$r-2]=arguments[$r];return ae.prototype[st].apply(Fe,jt)}}function x(S){const ae=S.length;if(0<ae){const Pe=Array(ae);for(let Fe=0;Fe<ae;Fe++)Pe[Fe]=S[Fe];return Pe}return[]}function P(S,ae){for(let Pe=1;Pe<arguments.length;Pe++){const Fe=arguments[Pe];if(l(Fe)){const st=S.length||0,pt=Fe.length||0;S.length=st+pt;for(let jt=0;jt<pt;jt++)S[st+jt]=Fe[jt]}else S.push(Fe)}}class g{constructor(ae,Pe){this.i=ae,this.j=Pe,this.h=0,this.g=null}get(){let ae;return 0<this.h?(this.h--,ae=this.g,this.g=ae.next,ae.next=null):ae=this.i(),ae}}function F(S){return/^[\s\xa0]*$/.test(S)}function V(){var S=a.navigator;return S&&(S=S.userAgent)?S:""}function N(S){return N[" "](S),S}N[" "]=function(){};var R=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function M(S,ae,Pe){for(const Fe in S)ae.call(Pe,S[Fe],Fe,S)}function C(S,ae){for(const Pe in S)ae.call(void 0,S[Pe],Pe,S)}function k(S){const ae={};for(const Pe in S)ae[Pe]=S[Pe];return ae}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $(S,ae){let Pe,Fe;for(let st=1;st<arguments.length;st++){Fe=arguments[st];for(Pe in Fe)S[Pe]=Fe[Pe];for(let pt=0;pt<D.length;pt++)Pe=D[pt],Object.prototype.hasOwnProperty.call(Fe,Pe)&&(S[Pe]=Fe[Pe])}}function w(S){var ae=1;S=S.split(":");const Pe=[];for(;0<ae&&S.length;)Pe.push(S.shift()),ae--;return S.length&&Pe.push(S.join(":")),Pe}function _(S){a.setTimeout(()=>{throw S},0)}function v(){var S=Z;let ae=null;return S.g&&(ae=S.g,S.g=S.g.next,S.g||(S.h=null),ae.next=null),ae}class z{constructor(){this.h=this.g=null}add(ae,Pe){const Fe=W.get();Fe.set(ae,Pe),this.h?this.h.next=Fe:this.g=Fe,this.h=Fe}}var W=new g(()=>new A,S=>S.reset());class A{constructor(){this.next=this.g=this.h=null}set(ae,Pe){this.h=ae,this.g=Pe,this.next=null}reset(){this.next=this.g=this.h=null}}let I,ee=!1,Z=new z,X=()=>{const S=a.Promise.resolve(void 0);I=()=>{S.then(se)}};var se=()=>{for(var S;S=v();){try{S.h.call(S.g)}catch(Pe){_(Pe)}var ae=W;ae.j(S),100>ae.h&&(ae.h++,S.next=ae.g,ae.g=S)}ee=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function E(S,ae){this.type=S,this.g=this.target=ae,this.defaultPrevented=!1}E.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var S=!1,ae=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const Pe=()=>{};a.addEventListener("test",Pe,ae),a.removeEventListener("test",Pe,ae)}catch{}return S}();function L(S,ae){if(E.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S){var Pe=this.type=S.type,Fe=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;if(this.target=S.target||S.srcElement,this.g=ae,ae=S.relatedTarget){if(R){e:{try{N(ae.nodeName);var st=!0;break e}catch{}st=!1}st||(ae=null)}}else Pe=="mouseover"?ae=S.fromElement:Pe=="mouseout"&&(ae=S.toElement);this.relatedTarget=ae,Fe?(this.clientX=Fe.clientX!==void 0?Fe.clientX:Fe.pageX,this.clientY=Fe.clientY!==void 0?Fe.clientY:Fe.pageY,this.screenX=Fe.screenX||0,this.screenY=Fe.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=typeof S.pointerType=="string"?S.pointerType:G[S.pointerType]||"",this.state=S.state,this.i=S,S.defaultPrevented&&L.aa.h.call(this)}}m(L,E);var G={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var K="closure_listenable_"+(1e6*Math.random()|0),q=0;function B(S,ae,Pe,Fe,st){this.listener=S,this.proxy=null,this.src=ae,this.type=Pe,this.capture=!!Fe,this.ha=st,this.key=++q,this.da=this.fa=!1}function H(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function Y(S){this.src=S,this.g={},this.h=0}Y.prototype.add=function(S,ae,Pe,Fe,st){var pt=S.toString();S=this.g[pt],S||(S=this.g[pt]=[],this.h++);var jt=oe(S,ae,Fe,st);return-1<jt?(ae=S[jt],Pe||(ae.fa=!1)):(ae=new B(ae,this.src,pt,!!Fe,st),ae.fa=Pe,S.push(ae)),ae};function te(S,ae){var Pe=ae.type;if(Pe in S.g){var Fe=S.g[Pe],st=Array.prototype.indexOf.call(Fe,ae,void 0),pt;(pt=0<=st)&&Array.prototype.splice.call(Fe,st,1),pt&&(H(ae),S.g[Pe].length==0&&(delete S.g[Pe],S.h--))}}function oe(S,ae,Pe,Fe){for(var st=0;st<S.length;++st){var pt=S[st];if(!pt.da&&pt.listener==ae&&pt.capture==!!Pe&&pt.ha==Fe)return st}return-1}var pe="closure_lm_"+(1e6*Math.random()|0),ne={};function Q(S,ae,Pe,Fe,st){if(Array.isArray(ae)){for(var pt=0;pt<ae.length;pt++)Q(S,ae[pt],Pe,Fe,st);return null}return Pe=Oe(Pe),S&&S[K]?S.K(ae,Pe,d(Fe)?!!Fe.capture:!1,st):ce(S,ae,Pe,!1,Fe,st)}function ce(S,ae,Pe,Fe,st,pt){if(!ae)throw Error("Invalid event type");var jt=d(st)?!!st.capture:!!st,$r=Se(S);if($r||(S[pe]=$r=new Y(S)),Pe=$r.add(ae,Pe,Fe,jt,pt),Pe.proxy)return Pe;if(Fe=ue(),Pe.proxy=Fe,Fe.src=S,Fe.listener=Pe,S.addEventListener)O||(st=jt),st===void 0&&(st=!1),S.addEventListener(ae.toString(),Fe,st);else if(S.attachEvent)S.attachEvent(ye(ae.toString()),Fe);else if(S.addListener&&S.removeListener)S.addListener(Fe);else throw Error("addEventListener and attachEvent are unavailable.");return Pe}function ue(){function S(Pe){return ae.call(S.src,S.listener,Pe)}const ae=fe;return S}function de(S,ae,Pe,Fe,st){if(Array.isArray(ae))for(var pt=0;pt<ae.length;pt++)de(S,ae[pt],Pe,Fe,st);else Fe=d(Fe)?!!Fe.capture:!!Fe,Pe=Oe(Pe),S&&S[K]?(S=S.i,ae=String(ae).toString(),ae in S.g&&(pt=S.g[ae],Pe=oe(pt,Pe,Fe,st),-1<Pe&&(H(pt[Pe]),Array.prototype.splice.call(pt,Pe,1),pt.length==0&&(delete S.g[ae],S.h--)))):S&&(S=Se(S))&&(ae=S.g[ae.toString()],S=-1,ae&&(S=oe(ae,Pe,Fe,st)),(Pe=-1<S?ae[S]:null)&&ge(Pe))}function ge(S){if(typeof S!="number"&&S&&!S.da){var ae=S.src;if(ae&&ae[K])te(ae.i,S);else{var Pe=S.type,Fe=S.proxy;ae.removeEventListener?ae.removeEventListener(Pe,Fe,S.capture):ae.detachEvent?ae.detachEvent(ye(Pe),Fe):ae.addListener&&ae.removeListener&&ae.removeListener(Fe),(Pe=Se(ae))?(te(Pe,S),Pe.h==0&&(Pe.src=null,ae[pe]=null)):H(S)}}}function ye(S){return S in ne?ne[S]:ne[S]="on"+S}function fe(S,ae){if(S.da)S=!0;else{ae=new L(ae,this);var Pe=S.listener,Fe=S.ha||S.src;S.fa&&ge(S),S=Pe.call(Fe,ae)}return S}function Se(S){return S=S[pe],S instanceof Y?S:null}var qe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Oe(S){return typeof S=="function"?S:(S[qe]||(S[qe]=function(ae){return S.handleEvent(ae)}),S[qe])}function Ie(){U.call(this),this.i=new Y(this),this.M=this,this.F=null}m(Ie,U),Ie.prototype[K]=!0,Ie.prototype.removeEventListener=function(S,ae,Pe,Fe){de(this,S,ae,Pe,Fe)};function Be(S,ae){var Pe,Fe=S.F;if(Fe)for(Pe=[];Fe;Fe=Fe.F)Pe.push(Fe);if(S=S.M,Fe=ae.type||ae,typeof ae=="string")ae=new E(ae,S);else if(ae instanceof E)ae.target=ae.target||S;else{var st=ae;ae=new E(Fe,S),$(ae,st)}if(st=!0,Pe)for(var pt=Pe.length-1;0<=pt;pt--){var jt=ae.g=Pe[pt];st=ke(jt,Fe,!0,ae)&&st}if(jt=ae.g=S,st=ke(jt,Fe,!0,ae)&&st,st=ke(jt,Fe,!1,ae)&&st,Pe)for(pt=0;pt<Pe.length;pt++)jt=ae.g=Pe[pt],st=ke(jt,Fe,!1,ae)&&st}Ie.prototype.N=function(){if(Ie.aa.N.call(this),this.i){var S=this.i,ae;for(ae in S.g){for(var Pe=S.g[ae],Fe=0;Fe<Pe.length;Fe++)H(Pe[Fe]);delete S.g[ae],S.h--}}this.F=null},Ie.prototype.K=function(S,ae,Pe,Fe){return this.i.add(String(S),ae,!1,Pe,Fe)},Ie.prototype.L=function(S,ae,Pe,Fe){return this.i.add(String(S),ae,!0,Pe,Fe)};function ke(S,ae,Pe,Fe){if(ae=S.i.g[String(ae)],!ae)return!0;ae=ae.concat();for(var st=!0,pt=0;pt<ae.length;++pt){var jt=ae[pt];if(jt&&!jt.da&&jt.capture==Pe){var $r=jt.listener,Xr=jt.ha||jt.src;jt.fa&&te(S.i,jt),st=$r.call(Xr,Fe)!==!1&&st}}return st&&!Fe.defaultPrevented}function Ge(S,ae,Pe){if(typeof S=="function")Pe&&(S=f(S,Pe));else if(S&&typeof S.handleEvent=="function")S=f(S.handleEvent,S);else throw Error("Invalid listener argument");return 2147483647<Number(ae)?-1:a.setTimeout(S,ae||0)}function et(S){S.g=Ge(()=>{S.g=null,S.i&&(S.i=!1,et(S))},S.l);const ae=S.h;S.h=null,S.m.apply(null,ae)}class ve extends U{constructor(ae,Pe){super(),this.m=ae,this.l=Pe,this.h=null,this.i=!1,this.g=null}j(ae){this.h=arguments,this.g?this.i=!0:et(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function De(S){U.call(this),this.h=S,this.g={}}m(De,U);var He=[];function Je(S){M(S.g,function(ae,Pe){this.g.hasOwnProperty(Pe)&&ge(ae)},S),S.g={}}De.prototype.N=function(){De.aa.N.call(this),Je(this)},De.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Le=a.JSON.stringify,Te=a.JSON.parse,he=class{stringify(S){return a.JSON.stringify(S,void 0)}parse(S){return a.JSON.parse(S,void 0)}};function Ne(){}Ne.prototype.h=null;function rt(S){return S.h||(S.h=S.i())}function re(){}var Ue={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function we(){E.call(this,"d")}m(we,E);function xe(){E.call(this,"c")}m(xe,E);var je={},$e=null;function ft(){return $e=$e||new Ie}je.La="serverreachability";function ct(S){E.call(this,je.La,S)}m(ct,E);function yt(S){const ae=ft();Be(ae,new ct(ae))}je.STAT_EVENT="statevent";function $t(S,ae){E.call(this,je.STAT_EVENT,S),this.stat=ae}m($t,E);function bt(S){const ae=ft();Be(ae,new $t(ae,S))}je.Ma="timingevent";function Gt(S,ae){E.call(this,je.Ma,S),this.size=ae}m(Gt,E);function Wt(S,ae){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){S()},ae)}function Dt(){this.g=!0}Dt.prototype.xa=function(){this.g=!1};function Kt(S,ae,Pe,Fe,st,pt){S.info(function(){if(S.g)if(pt)for(var jt="",$r=pt.split("&"),Xr=0;Xr<$r.length;Xr++){var Fr=$r[Xr].split("=");if(1<Fr.length){var Cn=Fr[0];Fr=Fr[1];var Fn=Cn.split("_");jt=2<=Fn.length&&Fn[1]=="type"?jt+(Cn+"="+Fr+"&"):jt+(Cn+"=redacted&")}}else jt=null;else jt=pt;return"XMLHTTP REQ ("+Fe+") [attempt "+st+"]: "+ae+`
`+Pe+`
`+jt})}function gt(S,ae,Pe,Fe,st,pt,jt){S.info(function(){return"XMLHTTP RESP ("+Fe+") [ attempt "+st+"]: "+ae+`
`+Pe+`
`+pt+" "+jt})}function St(S,ae,Pe,Fe){S.info(function(){return"XMLHTTP TEXT ("+ae+"): "+vt(S,Pe)+(Fe?" "+Fe:"")})}function Qe(S,ae){S.info(function(){return"TIMEOUT: "+ae})}Dt.prototype.info=function(){};function vt(S,ae){if(!S.g)return ae;if(!ae)return null;try{var Pe=JSON.parse(ae);if(Pe){for(S=0;S<Pe.length;S++)if(Array.isArray(Pe[S])){var Fe=Pe[S];if(!(2>Fe.length)){var st=Fe[1];if(Array.isArray(st)&&!(1>st.length)){var pt=st[0];if(pt!="noop"&&pt!="stop"&&pt!="close")for(var jt=1;jt<st.length;jt++)st[jt]=""}}}}return Le(Pe)}catch{return ae}}var Ft={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},kt;function Yt(){}m(Yt,Ne),Yt.prototype.g=function(){return new XMLHttpRequest},Yt.prototype.i=function(){return{}},kt=new Yt;function nr(S,ae,Pe,Fe){this.j=S,this.i=ae,this.l=Pe,this.R=Fe||1,this.U=new De(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cr}function cr(){this.i=null,this.g="",this.h=!1}var on={},Dr={};function lr(S,ae,Pe){S.L=1,S.v=Ts(cn(ae)),S.m=Pe,S.P=!0,Zt(S,null)}function Zt(S,ae){S.F=Date.now(),Wr(S),S.A=cn(S.v);var Pe=S.A,Fe=S.R;Array.isArray(Fe)||(Fe=[String(Fe)]),wr(Pe.i,"t",Fe),S.C=0,Pe=S.j.J,S.h=new cr,S.g=Ce(S.j,Pe?ae:null,!S.m),0<S.O&&(S.M=new ve(f(S.Y,S,S.g),S.O)),ae=S.U,Pe=S.g,Fe=S.ca;var st="readystatechange";Array.isArray(st)||(st&&(He[0]=st.toString()),st=He);for(var pt=0;pt<st.length;pt++){var jt=Q(Pe,st[pt],Fe||ae.handleEvent,!1,ae.h||ae);if(!jt)break;ae.g[jt.key]=jt}ae=S.H?k(S.H):{},S.m?(S.u||(S.u="POST"),ae["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.A,S.u,S.m,ae)):(S.u="GET",S.g.ea(S.A,S.u,null,ae)),yt(),Kt(S.i,S.u,S.A,S.l,S.R,S.m)}nr.prototype.ca=function(S){S=S.target;const ae=this.M;ae&&xi(S)==3?ae.j():this.Y(S)},nr.prototype.Y=function(S){try{if(S==this.g)e:{const Fn=xi(this.g);var ae=this.g.Ba();const Ms=this.g.Z();if(!(3>Fn)&&(Fn!=3||this.g&&(this.h.h||this.g.oa()||Md(this.g)))){this.J||Fn!=4||ae==7||(ae==8||0>=Ms?yt(3):yt(2)),fr(this);var Pe=this.g.Z();this.X=Pe;t:if(yr(this)){var Fe=Md(this.g);S="";var st=Fe.length,pt=xi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){br(this),Yr(this);var jt="";break t}this.h.i=new a.TextDecoder}for(ae=0;ae<st;ae++)this.h.h=!0,S+=this.h.i.decode(Fe[ae],{stream:!(pt&&ae==st-1)});Fe.length=0,this.h.g+=S,this.C=0,jt=this.h.g}else jt=this.g.oa();if(this.o=Pe==200,gt(this.i,this.u,this.A,this.l,this.R,Fn,Pe),this.o){if(this.T&&!this.K){t:{if(this.g){var $r,Xr=this.g;if(($r=Xr.g?Xr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F($r)){var Fr=$r;break t}}Fr=null}if(Pe=Fr)St(this.i,this.l,Pe,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zn(this,Pe);else{this.o=!1,this.s=3,bt(12),br(this),Yr(this);break e}}if(this.P){Pe=!0;let zi;for(;!this.J&&this.C<jt.length;)if(zi=Lr(this,jt),zi==Dr){Fn==4&&(this.s=4,bt(14),Pe=!1),St(this.i,this.l,null,"[Incomplete Response]");break}else if(zi==on){this.s=4,bt(15),St(this.i,this.l,jt,"[Invalid Chunk]"),Pe=!1;break}else St(this.i,this.l,zi,null),zn(this,zi);if(yr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fn!=4||jt.length!=0||this.h.h||(this.s=1,bt(16),Pe=!1),this.o=this.o&&Pe,!Pe)St(this.i,this.l,jt,"[Invalid Chunked Response]"),br(this),Yr(this);else if(0<jt.length&&!this.W){this.W=!0;var Cn=this.j;Cn.g==this&&Cn.ba&&!Cn.M&&(Cn.j.info("Great, no buffering proxy detected. Bytes received: "+jt.length),kl(Cn),Cn.M=!0,bt(11))}}else St(this.i,this.l,jt,null),zn(this,jt);Fn==4&&br(this),this.o&&!this.J&&(Fn==4?oa(this.j,this):(this.o=!1,Wr(this)))}else na(this.g),Pe==400&&0<jt.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),br(this),Yr(this)}}}catch{}finally{}};function yr(S){return S.g?S.u=="GET"&&S.L!=2&&S.j.Ca:!1}function Lr(S,ae){var Pe=S.C,Fe=ae.indexOf(`
`,Pe);return Fe==-1?Dr:(Pe=Number(ae.substring(Pe,Fe)),isNaN(Pe)?on:(Fe+=1,Fe+Pe>ae.length?Dr:(ae=ae.slice(Fe,Fe+Pe),S.C=Fe+Pe,ae)))}nr.prototype.cancel=function(){this.J=!0,br(this)};function Wr(S){S.S=Date.now()+S.I,Ar(S,S.I)}function Ar(S,ae){if(S.B!=null)throw Error("WatchDog timer not null");S.B=Wt(f(S.ba,S),ae)}function fr(S){S.B&&(a.clearTimeout(S.B),S.B=null)}nr.prototype.ba=function(){this.B=null;const S=Date.now();0<=S-this.S?(Qe(this.i,this.A),this.L!=2&&(yt(),bt(17)),br(this),this.s=2,Yr(this)):Ar(this,this.S-S)};function Yr(S){S.j.G==0||S.J||oa(S.j,S)}function br(S){fr(S);var ae=S.M;ae&&typeof ae.ma=="function"&&ae.ma(),S.M=null,Je(S.U),S.g&&(ae=S.g,S.g=null,ae.abort(),ae.ma())}function zn(S,ae){try{var Pe=S.j;if(Pe.G!=0&&(Pe.g==S||os(Pe.h,S))){if(!S.K&&os(Pe.h,S)&&Pe.G==3){try{var Fe=Pe.Da.g.parse(ae)}catch{Fe=null}if(Array.isArray(Fe)&&Fe.length==3){var st=Fe;if(st[0]==0){e:if(!Pe.u){if(Pe.g)if(Pe.g.F+3e3<S.F)Fs(Pe),wl(Pe);else break e;$a(Pe),bt(18)}}else Pe.za=st[1],0<Pe.za-Pe.T&&37500>st[2]&&Pe.F&&Pe.v==0&&!Pe.C&&(Pe.C=Wt(f(Pe.Za,Pe),6e3));if(1>=Ri(Pe.h)&&Pe.ca){try{Pe.ca()}catch{}Pe.ca=void 0}}else Zi(Pe,11)}else if((S.K||Pe.g==S)&&Fs(Pe),!F(ae))for(st=Pe.Da.g.parse(ae),ae=0;ae<st.length;ae++){let Fr=st[ae];if(Pe.T=Fr[0],Fr=Fr[1],Pe.G==2)if(Fr[0]=="c"){Pe.K=Fr[1],Pe.ia=Fr[2];const Cn=Fr[3];Cn!=null&&(Pe.la=Cn,Pe.j.info("VER="+Pe.la));const Fn=Fr[4];Fn!=null&&(Pe.Aa=Fn,Pe.j.info("SVER="+Pe.Aa));const Ms=Fr[5];Ms!=null&&typeof Ms=="number"&&0<Ms&&(Fe=1.5*Ms,Pe.L=Fe,Pe.j.info("backChannelRequestTimeoutMs_="+Fe)),Fe=Pe;const zi=S.g;if(zi){const sa=zi.g?zi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(sa){var pt=Fe.h;pt.g||sa.indexOf("spdy")==-1&&sa.indexOf("quic")==-1&&sa.indexOf("h2")==-1||(pt.j=pt.l,pt.g=new Set,pt.h&&(xn(pt,pt.h),pt.h=null))}if(Fe.D){const aa=zi.g?zi.g.getResponseHeader("X-HTTP-Session-Id"):null;aa&&(Fe.ya=aa,yn(Fe.I,Fe.D,aa))}}Pe.G=3,Pe.l&&Pe.l.ua(),Pe.ba&&(Pe.R=Date.now()-S.F,Pe.j.info("Handshake RTT: "+Pe.R+"ms")),Fe=Pe;var jt=S;if(Fe.qa=J(Fe,Fe.J?Fe.ia:null,Fe.W),jt.K){ko(Fe.h,jt);var $r=jt,Xr=Fe.L;Xr&&($r.I=Xr),$r.B&&(fr($r),Wr($r)),Fe.g=jt}else Al(Fe);0<Pe.i.length&&Cl(Pe)}else Fr[0]!="stop"&&Fr[0]!="close"||Zi(Pe,7);else Pe.G==3&&(Fr[0]=="stop"||Fr[0]=="close"?Fr[0]=="stop"?Zi(Pe,7):$s(Pe):Fr[0]!="noop"&&Pe.l&&Pe.l.ta(Fr),Pe.v=0)}}yt(4)}catch{}}var Bi=class{constructor(S,ae){this.g=S,this.map=ae}};function Ni(S){this.l=S||10,a.PerformanceNavigationTiming?(S=a.performance.getEntriesByType("navigation"),S=0<S.length&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ao(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function Ri(S){return S.h?1:S.g?S.g.size:0}function os(S,ae){return S.h?S.h==ae:S.g?S.g.has(ae):!1}function xn(S,ae){S.g?S.g.add(ae):S.h=ae}function ko(S,ae){S.h&&S.h==ae?S.h=null:S.g&&S.g.has(ae)&&S.g.delete(ae)}Ni.prototype.cancel=function(){if(this.i=ks(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function ks(S){if(S.h!=null)return S.i.concat(S.h.D);if(S.g!=null&&S.g.size!==0){let ae=S.i;for(const Pe of S.g.values())ae=ae.concat(Pe.D);return ae}return x(S.i)}function Es(S){if(S.V&&typeof S.V=="function")return S.V();if(typeof Map<"u"&&S instanceof Map||typeof Set<"u"&&S instanceof Set)return Array.from(S.values());if(typeof S=="string")return S.split("");if(l(S)){for(var ae=[],Pe=S.length,Fe=0;Fe<Pe;Fe++)ae.push(S[Fe]);return ae}ae=[],Pe=0;for(Fe in S)ae[Pe++]=S[Fe];return ae}function Nr(S){if(S.na&&typeof S.na=="function")return S.na();if(!S.V||typeof S.V!="function"){if(typeof Map<"u"&&S instanceof Map)return Array.from(S.keys());if(!(typeof Set<"u"&&S instanceof Set)){if(l(S)||typeof S=="string"){var ae=[];S=S.length;for(var Pe=0;Pe<S;Pe++)ae.push(Pe);return ae}ae=[],Pe=0;for(const Fe in S)ae[Pe++]=Fe;return ae}}}function fn(S,ae){if(S.forEach&&typeof S.forEach=="function")S.forEach(ae,void 0);else if(l(S)||typeof S=="string")Array.prototype.forEach.call(S,ae,void 0);else for(var Pe=Nr(S),Fe=Es(S),st=Fe.length,pt=0;pt<st;pt++)ae.call(void 0,Fe[pt],Pe&&Pe[pt],S)}var Dn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ji(S,ae){if(S){S=S.split("&");for(var Pe=0;Pe<S.length;Pe++){var Fe=S[Pe].indexOf("="),st=null;if(0<=Fe){var pt=S[Pe].substring(0,Fe);st=S[Pe].substring(Fe+1)}else pt=S[Pe];ae(pt,st?decodeURIComponent(st.replace(/\+/g," ")):"")}}}function Sn(S){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,S instanceof Sn){this.h=S.h,fo(this,S.j),this.o=S.o,this.g=S.g,Eo(this,S.s),this.l=S.l;var ae=S.i,Pe=new ta;Pe.i=ae.i,ae.g&&(Pe.g=new Map(ae.g),Pe.h=ae.h),Vo(this,Pe),this.m=S.m}else S&&(ae=String(S).match(Dn))?(this.h=!1,fo(this,ae[1]||"",!0),this.o=Is(ae[2]||""),this.g=Is(ae[3]||"",!0),Eo(this,ae[4]),this.l=Is(ae[5]||"",!0),Vo(this,ae[6]||"",!0),this.m=Is(ae[7]||"")):(this.h=!1,this.i=new ta(null,this.h))}Sn.prototype.toString=function(){var S=[],ae=this.j;ae&&S.push(Ns(ae,Dd,!0),":");var Pe=this.g;return(Pe||ae=="file")&&(S.push("//"),(ae=this.o)&&S.push(Ns(ae,Dd,!0),"@"),S.push(encodeURIComponent(String(Pe)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Pe=this.s,Pe!=null&&S.push(":",String(Pe))),(Pe=this.l)&&(this.g&&Pe.charAt(0)!="/"&&S.push("/"),S.push(Ns(Pe,Pe.charAt(0)=="/"?Rs:Qu,!0))),(Pe=this.i.toString())&&S.push("?",Pe),(Pe=this.m)&&S.push("#",Ns(Pe,gl)),S.join("")};function cn(S){return new Sn(S)}function fo(S,ae,Pe){S.j=Pe?Is(ae,!0):ae,S.j&&(S.j=S.j.replace(/:$/,""))}function Eo(S,ae){if(ae){if(ae=Number(ae),isNaN(ae)||0>ae)throw Error("Bad port number "+ae);S.s=ae}else S.s=null}function Vo(S,ae,Pe){ae instanceof ta?(S.i=ae,eh(S.i,S.h)):(Pe||(ae=Ns(ae,ml)),S.i=new ta(ae,S.h))}function yn(S,ae,Pe){S.i.set(ae,Pe)}function Ts(S){return yn(S,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),S}function Is(S,ae){return S?ae?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function Ns(S,ae,Pe){return typeof S=="string"?(S=encodeURI(S).replace(ae,Ju),Pe&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function Ju(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var Dd=/[#\/\?@]/g,Qu=/[#\?:]/g,Rs=/[#\?]/g,ml=/[#\?@]/g,gl=/#/g;function ta(S,ae){this.h=this.g=null,this.i=S||null,this.j=!!ae}function Wn(S){S.g||(S.g=new Map,S.h=0,S.i&&ji(S.i,function(ae,Pe){S.add(decodeURIComponent(ae.replace(/\+/g," ")),Pe)}))}t=ta.prototype,t.add=function(S,ae){Wn(this),this.i=null,S=ra(this,S);var Pe=this.g.get(S);return Pe||this.g.set(S,Pe=[]),Pe.push(ae),this.h+=1,this};function Ld(S,ae){Wn(S),ae=ra(S,ae),S.g.has(ae)&&(S.i=null,S.h-=S.g.get(ae).length,S.g.delete(ae))}function Nc(S,ae){return Wn(S),ae=ra(S,ae),S.g.has(ae)}t.forEach=function(S,ae){Wn(this),this.g.forEach(function(Pe,Fe){Pe.forEach(function(st){S.call(ae,st,Fe,this)},this)},this)},t.na=function(){Wn(this);const S=Array.from(this.g.values()),ae=Array.from(this.g.keys()),Pe=[];for(let Fe=0;Fe<ae.length;Fe++){const st=S[Fe];for(let pt=0;pt<st.length;pt++)Pe.push(ae[Fe])}return Pe},t.V=function(S){Wn(this);let ae=[];if(typeof S=="string")Nc(this,S)&&(ae=ae.concat(this.g.get(ra(this,S))));else{S=Array.from(this.g.values());for(let Pe=0;Pe<S.length;Pe++)ae=ae.concat(S[Pe])}return ae},t.set=function(S,ae){return Wn(this),this.i=null,S=ra(this,S),Nc(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[ae]),this.h+=1,this},t.get=function(S,ae){return S?(S=this.V(S),0<S.length?String(S[0]):ae):ae};function wr(S,ae,Pe){Ld(S,ae),0<Pe.length&&(S.i=null,S.g.set(ra(S,ae),x(Pe)),S.h+=Pe.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],ae=Array.from(this.g.keys());for(var Pe=0;Pe<ae.length;Pe++){var Fe=ae[Pe];const pt=encodeURIComponent(String(Fe)),jt=this.V(Fe);for(Fe=0;Fe<jt.length;Fe++){var st=pt;jt[Fe]!==""&&(st+="="+encodeURIComponent(String(jt[Fe]))),S.push(st)}}return this.i=S.join("&")};function ra(S,ae){return ae=String(ae),S.j&&(ae=ae.toLowerCase()),ae}function eh(S,ae){ae&&!S.j&&(Wn(S),S.i=null,S.g.forEach(function(Pe,Fe){var st=Fe.toLowerCase();Fe!=st&&(Ld(this,Fe),wr(this,st,Pe))},S)),S.j=ae}function ss(S,ae){const Pe=new Dt;if(a.Image){const Fe=new Image;Fe.onload=p(zo,Pe,"TestLoadImage: loaded",!0,ae,Fe),Fe.onerror=p(zo,Pe,"TestLoadImage: error",!1,ae,Fe),Fe.onabort=p(zo,Pe,"TestLoadImage: abort",!1,ae,Fe),Fe.ontimeout=p(zo,Pe,"TestLoadImage: timeout",!1,ae,Fe),a.setTimeout(function(){Fe.ontimeout&&Fe.ontimeout()},1e4),Fe.src=S}else ae(!1)}function $d(S,ae){const Pe=new Dt,Fe=new AbortController,st=setTimeout(()=>{Fe.abort(),zo(Pe,"TestPingServer: timeout",!1,ae)},1e4);fetch(S,{signal:Fe.signal}).then(pt=>{clearTimeout(st),pt.ok?zo(Pe,"TestPingServer: ok",!0,ae):zo(Pe,"TestPingServer: server error",!1,ae)}).catch(()=>{clearTimeout(st),zo(Pe,"TestPingServer: error",!1,ae)})}function zo(S,ae,Pe,Fe,st){try{st&&(st.onload=null,st.onerror=null,st.onabort=null,st.ontimeout=null),Fe(Pe)}catch{}}function vl(){this.g=new he}function Rc(S,ae,Pe){const Fe=Pe||"";try{fn(S,function(st,pt){let jt=st;d(st)&&(jt=Le(st)),ae.push(Fe+pt+"="+encodeURIComponent(jt))})}catch(st){throw ae.push(Fe+"type="+encodeURIComponent("_badmap")),st}}function bl(S){this.l=S.Ub||null,this.j=S.eb||!1}m(bl,Ne),bl.prototype.g=function(){return new Pl(this.l,this.j)},bl.prototype.i=function(S){return function(){return S}}({});function Pl(S,ae){Ie.call(this),this.D=S,this.o=ae,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(Pl,Ie),t=Pl.prototype,t.open=function(S,ae){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=S,this.A=ae,this.readyState=1,Uo(this)},t.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const ae={headers:this.u,method:this.B,credentials:this.m,cache:void 0};S&&(ae.body=S),(this.D||a).fetch(new Request(this.A,ae)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},t.Sa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,Uo(this)),this.g&&(this.readyState=3,Uo(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fd(this)}else S.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fd(S){S.j.read().then(S.Pa.bind(S)).catch(S.ga.bind(S))}t.Pa=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var ae=S.value?S.value:new Uint8Array(0);(ae=this.v.decode(ae,{stream:!S.done}))&&(this.response=this.responseText+=ae)}S.done?Ds(this):Uo(this),this.readyState==3&&Fd(this)}},t.Ra=function(S){this.g&&(this.response=this.responseText=S,Ds(this))},t.Qa=function(S){this.g&&(this.response=S,Ds(this))},t.ga=function(){this.g&&Ds(this)};function Ds(S){S.readyState=4,S.l=null,S.j=null,S.v=null,Uo(S)}t.setRequestHeader=function(S,ae){this.u.append(S,ae)},t.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],ae=this.h.entries();for(var Pe=ae.next();!Pe.done;)Pe=Pe.value,S.push(Pe[0]+": "+Pe[1]),Pe=ae.next();return S.join(`\r
`)};function Uo(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty(Pl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function Ls(S){let ae="";return M(S,function(Pe,Fe){ae+=Fe,ae+=":",ae+=Pe,ae+=`\r
`}),ae}function Dc(S,ae,Pe){e:{for(Fe in Pe){var Fe=!1;break e}Fe=!0}Fe||(Pe=Ls(Pe),typeof S=="string"?Pe!=null&&encodeURIComponent(String(Pe)):yn(S,ae,Pe))}function wn(S){Ie.call(this),this.headers=new Map,this.o=S||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(wn,Ie);var Lc=/^https?$/i,xl=["POST","PUT"];t=wn.prototype,t.Ha=function(S){this.J=S},t.ea=function(S,ae,Pe,Fe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);ae=ae?ae.toUpperCase():"GET",this.D=S,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kt.g(),this.v=this.o?rt(this.o):rt(kt),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(ae,String(S),!0),this.B=!1}catch(pt){$c(this,pt);return}if(S=Pe||"",Pe=new Map(this.headers),Fe)if(Object.getPrototypeOf(Fe)===Object.prototype)for(var st in Fe)Pe.set(st,Fe[st]);else if(typeof Fe.keys=="function"&&typeof Fe.get=="function")for(const pt of Fe.keys())Pe.set(pt,Fe.get(pt));else throw Error("Unknown input type for opt_headers: "+String(Fe));Fe=Array.from(Pe.keys()).find(pt=>pt.toLowerCase()=="content-type"),st=a.FormData&&S instanceof a.FormData,!(0<=Array.prototype.indexOf.call(xl,ae,void 0))||Fe||st||Pe.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[pt,jt]of Pe)this.g.setRequestHeader(pt,jt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qo(this),this.u=!0,this.g.send(S),this.u=!1}catch(pt){$c(this,pt)}};function $c(S,ae){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=ae,S.m=5,Fc(S),Ra(S)}function Fc(S){S.A||(S.A=!0,Be(S,"complete"),Be(S,"error"))}t.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=S||7,Be(this,"complete"),Be(this,"abort"),Ra(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ra(this,!0)),wn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Mc(this):this.bb())},t.bb=function(){Mc(this)};function Mc(S){if(S.h&&typeof s<"u"&&(!S.v[1]||xi(S)!=4||S.Z()!=2)){if(S.u&&xi(S)==4)Ge(S.Ea,0,S);else if(Be(S,"readystatechange"),xi(S)==4){S.h=!1;try{const jt=S.Z();e:switch(jt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ae=!0;break e;default:ae=!1}var Pe;if(!(Pe=ae)){var Fe;if(Fe=jt===0){var st=String(S.D).match(Dn)[1]||null;!st&&a.self&&a.self.location&&(st=a.self.location.protocol.slice(0,-1)),Fe=!Lc.test(st?st.toLowerCase():"")}Pe=Fe}if(Pe)Be(S,"complete"),Be(S,"success");else{S.m=6;try{var pt=2<xi(S)?S.g.statusText:""}catch{pt=""}S.l=pt+" ["+S.Z()+"]",Fc(S)}}finally{Ra(S)}}}}function Ra(S,ae){if(S.g){qo(S);const Pe=S.g,Fe=S.v[0]?()=>{}:null;S.g=null,S.v=null,ae||Be(S,"ready");try{Pe.onreadystatechange=Fe}catch{}}}function qo(S){S.I&&(a.clearTimeout(S.I),S.I=null)}t.isActive=function(){return!!this.g};function xi(S){return S.g?S.g.readyState:0}t.Z=function(){try{return 2<xi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(S){if(this.g){var ae=this.g.responseText;return S&&ae.indexOf(S)==0&&(ae=ae.substring(S.length)),Te(ae)}};function Md(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.H){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function na(S){const ae={};S=(S.g&&2<=xi(S)&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let Fe=0;Fe<S.length;Fe++){if(F(S[Fe]))continue;var Pe=w(S[Fe]);const st=Pe[0];if(Pe=Pe[1],typeof Pe!="string")continue;Pe=Pe.trim();const pt=ae[st]||[];ae[st]=pt,pt.push(Pe)}C(ae,function(Fe){return Fe.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vi(S,ae,Pe){return Pe&&Pe.internalChannelParams&&Pe.internalChannelParams[S]||ae}function Sl(S){this.Aa=0,this.i=[],this.j=new Dt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vi("failFast",!1,S),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vi("baseRetryDelayMs",5e3,S),this.cb=Vi("retryDelaySeedMs",1e4,S),this.Wa=Vi("forwardChannelMaxRetries",2,S),this.wa=Vi("forwardChannelRequestTimeoutMs",2e4,S),this.pa=S&&S.xmlHttpFactory||void 0,this.Xa=S&&S.Tb||void 0,this.Ca=S&&S.useFetchStreams||!1,this.L=void 0,this.J=S&&S.supportsCrossDomainXhr||!1,this.K="",this.h=new Ni(S&&S.concurrentRequestLimit),this.Da=new vl,this.P=S&&S.fastHandshake||!1,this.O=S&&S.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=S&&S.Rb||!1,S&&S.xa&&this.j.xa(),S&&S.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&S&&S.detectBufferingProxy||!1,this.ja=void 0,S&&S.longPollingTimeout&&0<S.longPollingTimeout&&(this.ja=S.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Sl.prototype,t.la=8,t.G=1,t.connect=function(S,ae,Pe,Fe){bt(0),this.W=S,this.H=ae||{},Pe&&Fe!==void 0&&(this.H.OSID=Pe,this.H.OAID=Fe),this.F=this.X,this.I=J(this,null,this.W),Cl(this)};function $s(S){if(Da(S),S.G==3){var ae=S.U++,Pe=cn(S.I);if(yn(Pe,"SID",S.K),yn(Pe,"RID",ae),yn(Pe,"TYPE","terminate"),ia(S,Pe),ae=new nr(S,S.j,ae),ae.L=2,ae.v=Ts(cn(Pe)),Pe=!1,a.navigator&&a.navigator.sendBeacon)try{Pe=a.navigator.sendBeacon(ae.v.toString(),"")}catch{}!Pe&&a.Image&&(new Image().src=ae.v,Pe=!0),Pe||(ae.g=Ce(ae.j,null),ae.g.ea(ae.v)),ae.F=Date.now(),Wr(ae)}Tl(S)}function wl(S){S.g&&(kl(S),S.g.cancel(),S.g=null)}function Da(S){wl(S),S.u&&(a.clearTimeout(S.u),S.u=null),Fs(S),S.h.cancel(),S.s&&(typeof S.s=="number"&&a.clearTimeout(S.s),S.s=null)}function Cl(S){if(!Ao(S.h)&&!S.s){S.s=!0;var ae=S.Ga;I||X(),ee||(I(),ee=!0),Z.add(ae,S),S.B=0}}function Oc(S,ae){return Ri(S.h)>=S.h.j-(S.s?1:0)?!1:S.s?(S.i=ae.D.concat(S.i),!0):S.G==1||S.G==2||S.B>=(S.Va?0:S.Wa)?!1:(S.s=Wt(f(S.Ga,S,ae),El(S,S.B)),S.B++,!0)}t.Ga=function(S){if(this.s)if(this.s=null,this.G==1){if(!S){this.U=Math.floor(1e5*Math.random()),S=this.U++;const st=new nr(this,this.j,S);let pt=this.o;if(this.S&&(pt?(pt=k(pt),$(pt,this.S)):pt=this.S),this.m!==null||this.O||(st.H=pt,pt=null),this.P)e:{for(var ae=0,Pe=0;Pe<this.i.length;Pe++){t:{var Fe=this.i[Pe];if("__data__"in Fe.map&&(Fe=Fe.map.__data__,typeof Fe=="string")){Fe=Fe.length;break t}Fe=void 0}if(Fe===void 0)break;if(ae+=Fe,4096<ae){ae=Pe;break e}if(ae===4096||Pe===this.i.length-1){ae=Pe+1;break e}}ae=1e3}else ae=1e3;ae=La(this,st,ae),Pe=cn(this.I),yn(Pe,"RID",S),yn(Pe,"CVER",22),this.D&&yn(Pe,"X-HTTP-Session-Id",this.D),ia(this,Pe),pt&&(this.O?ae="headers="+encodeURIComponent(String(Ls(pt)))+"&"+ae:this.m&&Dc(Pe,this.m,pt)),xn(this.h,st),this.Ua&&yn(Pe,"TYPE","init"),this.P?(yn(Pe,"$req",ae),yn(Pe,"SID","null"),st.T=!0,lr(st,Pe,null)):lr(st,Pe,ae),this.G=2}}else this.G==3&&(S?_l(this,S):this.i.length==0||Ao(this.h)||_l(this))};function _l(S,ae){var Pe;ae?Pe=ae.l:Pe=S.U++;const Fe=cn(S.I);yn(Fe,"SID",S.K),yn(Fe,"RID",Pe),yn(Fe,"AID",S.T),ia(S,Fe),S.m&&S.o&&Dc(Fe,S.m,S.o),Pe=new nr(S,S.j,Pe,S.B+1),S.m===null&&(Pe.H=S.o),ae&&(S.i=ae.D.concat(S.i)),ae=La(S,Pe,1e3),Pe.I=Math.round(.5*S.wa)+Math.round(.5*S.wa*Math.random()),xn(S.h,Pe),lr(Pe,Fe,ae)}function ia(S,ae){S.H&&M(S.H,function(Pe,Fe){yn(ae,Fe,Pe)}),S.l&&fn({},function(Pe,Fe){yn(ae,Fe,Pe)})}function La(S,ae,Pe){Pe=Math.min(S.i.length,Pe);var Fe=S.l?f(S.l.Na,S.l,S):null;e:{var st=S.i;let pt=-1;for(;;){const jt=["count="+Pe];pt==-1?0<Pe?(pt=st[0].g,jt.push("ofs="+pt)):pt=0:jt.push("ofs="+pt);let $r=!0;for(let Xr=0;Xr<Pe;Xr++){let Fr=st[Xr].g;const Cn=st[Xr].map;if(Fr-=pt,0>Fr)pt=Math.max(0,st[Xr].g-100),$r=!1;else try{Rc(Cn,jt,"req"+Fr+"_")}catch{Fe&&Fe(Cn)}}if($r){Fe=jt.join("&");break e}}}return S=S.i.splice(0,Pe),ae.D=S,Fe}function Al(S){if(!S.g&&!S.u){S.Y=1;var ae=S.Fa;I||X(),ee||(I(),ee=!0),Z.add(ae,S),S.v=0}}function $a(S){return S.g||S.u||3<=S.v?!1:(S.Y++,S.u=Wt(f(S.Fa,S),El(S,S.v)),S.v++,!0)}t.Fa=function(){if(this.u=null,Od(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var S=2*this.R;this.j.info("BP detection timer enabled: "+S),this.A=Wt(f(this.ab,this),S)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),wl(this),Od(this))};function kl(S){S.A!=null&&(a.clearTimeout(S.A),S.A=null)}function Od(S){S.g=new nr(S,S.j,"rpc",S.Y),S.m===null&&(S.g.H=S.o),S.g.O=0;var ae=cn(S.qa);yn(ae,"RID","rpc"),yn(ae,"SID",S.K),yn(ae,"AID",S.T),yn(ae,"CI",S.F?"0":"1"),!S.F&&S.ja&&yn(ae,"TO",S.ja),yn(ae,"TYPE","xmlhttp"),ia(S,ae),S.m&&S.o&&Dc(ae,S.m,S.o),S.L&&(S.g.I=S.L);var Pe=S.g;S=S.ia,Pe.L=1,Pe.v=Ts(cn(ae)),Pe.m=null,Pe.P=!0,Zt(Pe,S)}t.Za=function(){this.C!=null&&(this.C=null,wl(this),$a(this),bt(19))};function Fs(S){S.C!=null&&(a.clearTimeout(S.C),S.C=null)}function oa(S,ae){var Pe=null;if(S.g==ae){Fs(S),kl(S),S.g=null;var Fe=2}else if(os(S.h,ae))Pe=ae.D,ko(S.h,ae),Fe=1;else return;if(S.G!=0){if(ae.o)if(Fe==1){Pe=ae.m?ae.m.length:0,ae=Date.now()-ae.F;var st=S.B;Fe=ft(),Be(Fe,new Gt(Fe,Pe)),Cl(S)}else Al(S);else if(st=ae.s,st==3||st==0&&0<ae.X||!(Fe==1&&Oc(S,ae)||Fe==2&&$a(S)))switch(Pe&&0<Pe.length&&(ae=S.h,ae.i=ae.i.concat(Pe)),st){case 1:Zi(S,5);break;case 4:Zi(S,10);break;case 3:Zi(S,6);break;default:Zi(S,2)}}}function El(S,ae){let Pe=S.Ta+Math.floor(Math.random()*S.cb);return S.isActive()||(Pe*=2),Pe*ae}function Zi(S,ae){if(S.j.info("Error code "+ae),ae==2){var Pe=f(S.fb,S),Fe=S.Xa;const st=!Fe;Fe=new Sn(Fe||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||fo(Fe,"https"),Ts(Fe),st?ss(Fe.toString(),Pe):$d(Fe.toString(),Pe)}else bt(2);S.G=0,S.l&&S.l.sa(ae),Tl(S),Da(S)}t.fb=function(S){S?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function Tl(S){if(S.G=0,S.ka=[],S.l){const ae=ks(S.h);(ae.length!=0||S.i.length!=0)&&(P(S.ka,ae),P(S.ka,S.i),S.h.i.length=0,x(S.i),S.i.length=0),S.l.ra()}}function J(S,ae,Pe){var Fe=Pe instanceof Sn?cn(Pe):new Sn(Pe);if(Fe.g!="")ae&&(Fe.g=ae+"."+Fe.g),Eo(Fe,Fe.s);else{var st=a.location;Fe=st.protocol,ae=ae?ae+"."+st.hostname:st.hostname,st=+st.port;var pt=new Sn(null);Fe&&fo(pt,Fe),ae&&(pt.g=ae),st&&Eo(pt,st),Pe&&(pt.l=Pe),Fe=pt}return Pe=S.D,ae=S.ya,Pe&&ae&&yn(Fe,Pe,ae),yn(Fe,"VER",S.la),ia(S,Fe),Fe}function Ce(S,ae,Pe){if(ae&&!S.J)throw Error("Can't create secondary domain capable XhrIo object.");return ae=S.Ca&&!S.pa?new wn(new bl({eb:Pe})):new wn(S.pa),ae.Ha(S.J),ae}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ze(){}t=Ze.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function tt(){}tt.prototype.g=function(S,ae){return new at(S,ae)};function at(S,ae){Ie.call(this),this.g=new Sl(ae),this.l=S,this.h=ae&&ae.messageUrlParams||null,S=ae&&ae.messageHeaders||null,ae&&ae.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=ae&&ae.initMessageHeaders||null,ae&&ae.messageContentType&&(S?S["X-WebChannel-Content-Type"]=ae.messageContentType:S={"X-WebChannel-Content-Type":ae.messageContentType}),ae&&ae.va&&(S?S["X-WebChannel-Client-Profile"]=ae.va:S={"X-WebChannel-Client-Profile":ae.va}),this.g.S=S,(S=ae&&ae.Sb)&&!F(S)&&(this.g.m=S),this.v=ae&&ae.supportsCrossDomainXhr||!1,this.u=ae&&ae.sendRawJson||!1,(ae=ae&&ae.httpSessionIdParam)&&!F(ae)&&(this.g.D=ae,S=this.h,S!==null&&ae in S&&(S=this.h,ae in S&&delete S[ae])),this.j=new er(this)}m(at,Ie),at.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},at.prototype.close=function(){$s(this.g)},at.prototype.o=function(S){var ae=this.g;if(typeof S=="string"){var Pe={};Pe.__data__=S,S=Pe}else this.u&&(Pe={},Pe.__data__=Le(S),S=Pe);ae.i.push(new Bi(ae.Ya++,S)),ae.G==3&&Cl(ae)},at.prototype.N=function(){this.g.l=null,delete this.j,$s(this.g),delete this.g,at.aa.N.call(this)};function wt(S){we.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var ae=S.__sm__;if(ae){e:{for(const Pe in ae){S=Pe;break e}S=void 0}(this.i=S)&&(S=this.i,ae=ae!==null&&S in ae?ae[S]:void 0),this.data=ae}else this.data=S}m(wt,we);function Mt(){xe.call(this),this.status=1}m(Mt,xe);function er(S){this.g=S}m(er,Ze),er.prototype.ua=function(){Be(this.g,"a")},er.prototype.ta=function(S){Be(this.g,new wt(S))},er.prototype.sa=function(S){Be(this.g,new Mt)},er.prototype.ra=function(){Be(this.g,"b")},tt.prototype.createWebChannel=tt.prototype.g,at.prototype.send=at.prototype.o,at.prototype.open=at.prototype.m,at.prototype.close=at.prototype.close,KC=function(){return new tt},GC=function(){return ft()},WC=je,O0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ft.NO_ERROR=0,Ft.TIMEOUT=8,Ft.HTTP_ERROR=6,_y=Ft,Pt.COMPLETE="complete",HC=Pt,re.EventType=Ue,Ue.OPEN="a",Ue.CLOSE="b",Ue.ERROR="c",Ue.MESSAGE="d",Ie.prototype.listen=Ie.prototype.K,Fh=re,wn.prototype.listenOnce=wn.prototype.L,wn.prototype.getLastError=wn.prototype.Ka,wn.prototype.getLastErrorCode=wn.prototype.Ba,wn.prototype.getStatus=wn.prototype.Z,wn.prototype.getResponseJson=wn.prototype.Oa,wn.prototype.getResponseText=wn.prototype.oa,wn.prototype.send=wn.prototype.ea,wn.prototype.setWithCredentials=wn.prototype.Ha,qC=wn}).apply(typeof If<"u"?If:typeof self<"u"?self:typeof window<"u"?window:{});const H5="@firebase/firestore",W5="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ao.UNAUTHENTICATED=new ao(null),ao.GOOGLE_CREDENTIALS=new ao("google-credentials-uid"),ao.FIRST_PARTY=new ao("first-party-uid"),ao.MOCK_USER=new ao("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=new G1("@firebase/firestore");function uu(){return Pd.logLevel}function sr(t,...e){if(Pd.logLevel<=en.DEBUG){const r=e.map(sb);Pd.debug(`Firestore (${Uu}): ${t}`,...r)}}function sl(t,...e){if(Pd.logLevel<=en.ERROR){const r=e.map(sb);Pd.error(`Firestore (${Uu}): ${t}`,...r)}}function Nu(t,...e){if(Pd.logLevel<=en.WARN){const r=e.map(sb);Pd.warn(`Firestore (${Uu}): ${t}`,...r)}}function sb(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,YC(t,n,r)}function YC(t,e,r){let n=`FIRESTORE (${Uu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw sl(n),new Error(n)}function _n(t,e,r,n){let i="Unexpected state";typeof r=="string"?i=r:n=r,t||YC(e,i,n)}function Br(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Jt extends Ia{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class T8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(ao.UNAUTHENTICATED))}shutdown(){}}class I8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class N8{constructor(e){this.t=e,this.currentUser=ao.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){_n(this.o===void 0,42304);let n=this.i;const i=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let o=new el;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new el,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{sr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(sr("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new el)}},0),s()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(sr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(_n(typeof n.accessToken=="string",31837,{l:n}),new XC(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _n(e===null||typeof e=="string",2055,{h:e}),new ao(e)}}class R8{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=ao.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class D8{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new R8(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(ao.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class G5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class L8{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xo(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){_n(this.o===void 0,3512);const n=o=>{o.error!=null&&sr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,sr("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>n(o))};const i=o=>{sr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):sr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new G5(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(_n(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new G5(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=$8(40);for(let o=0;o<i.length;++o)n.length<20&&i[o]<r&&(n+=e.charAt(i[o]%62))}return n}}function tn(t,e){return t<e?-1:t>e?1:0}function B0(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const i=t.charAt(n),o=e.charAt(n);if(i!==o)return lv(i)===lv(o)?tn(i,o):lv(i)?1:-1}return tn(t.length,e.length)}const F8=55296,M8=57343;function lv(t){const e=t.charCodeAt(0);return e>=F8&&e<=M8}function Ru(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5="__name__";class fa{constructor(e,r,n){r===void 0?r=0:r>e.length&&Sr(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&Sr(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return fa.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof fa?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const o=fa.compareSegments(e.get(i),r.get(i));if(o!==0)return o}return tn(e.length,r.length)}static compareSegments(e,r){const n=fa.isNumericId(e),i=fa.isNumericId(r);return n&&!i?-1:!n&&i?1:n&&i?fa.extractNumericId(e).compare(fa.extractNumericId(r)):B0(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return lc.fromString(e.substring(4,e.length-2))}}class Vn extends fa{construct(e,r,n){return new Vn(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Jt(Ct.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new Vn(r)}static emptyPath(){return new Vn([])}}const O8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wi extends fa{construct(e,r,n){return new Wi(e,r,n)}static isValidIdentifier(e){return O8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===K5}static keyField(){return new Wi([K5])}static fromServerFormat(e){const r=[];let n="",i=0;const o=()=>{if(n.length===0)throw new Jt(Ct.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Jt(Ct.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Jt(Ct.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(n+=a,i++):(o(),i++)}if(o(),s)throw new Jt(Ct.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wi(r)}static emptyPath(){return new Wi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.path=e}static fromPath(e){return new hr(Vn.fromString(e))}static fromName(e){return new hr(Vn.fromString(e).popFirst(5))}static empty(){return new hr(Vn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Vn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Vn.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new hr(new Vn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(t,e,r){if(!r)throw new Jt(Ct.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function B8(t,e,r,n){if(e===!0&&n===!0)throw new Jt(Ct.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Y5(t){if(!hr.isDocumentKey(t))throw new Jt(Ct.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function X5(t){if(hr.isDocumentKey(t))throw new Jt(Ct.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function JC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function zm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Sr(12329,{type:typeof t})}function al(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Jt(Ct.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=zm(t);throw new Jt(Ct.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function j8(t,e){if(e<=0)throw new Jt(Ct.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(t,e){const r={typeString:t};return e&&(r.value=e),r}function zp(t,e){if(!JC(t))throw new Jt(Ct.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const i=e[n].typeString,o="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const s=t[n];if(i&&typeof s!==i){r=`JSON field '${n}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){r=`Expected '${n}' field to equal '${o.value}'`;break}}if(r)throw new Jt(Ct.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5=-62135596800,J5=1e6;class In{static now(){return In.fromMillis(Date.now())}static fromDate(e){return In.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*J5);return new In(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Jt(Ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Jt(Ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<Z5)throw new Jt(Ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Jt(Ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/J5}_compareTo(e){return this.seconds===e.seconds?tn(this.nanoseconds,e.nanoseconds):tn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:In._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zp(e,In._jsonSchema))return new In(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Z5;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}In._jsonSchemaVersion="firestore/timestamp/1.0",In._jsonSchema={type:bi("string",In._jsonSchemaVersion),seconds:bi("number"),nanoseconds:bi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{static fromTimestamp(e){return new Rr(e)}static min(){return new Rr(new In(0,0))}static max(){return new Rr(new In(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp=-1;function V8(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=Rr.fromTimestamp(n===1e9?new In(r+1,0):new In(r,n));return new fc(i,hr.empty(),e)}function z8(t){return new fc(t.readTime,t.key,Pp)}class fc{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new fc(Rr.min(),hr.empty(),Pp)}static max(){return new fc(Rr.max(),hr.empty(),Pp)}}function U8(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=hr.comparator(t.documentKey,e.documentKey),r!==0?r:tn(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class H8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qu(t){if(t.code!==Ct.FAILED_PRECONDITION||t.message!==q8)throw t;sr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Sr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Rt((n,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,i)},this.catchCallback=o=>{this.wrapFailure(r,o).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Rt?r:Rt.resolve(r)}catch(r){return Rt.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Rt.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Rt.reject(r)}static resolve(e){return new Rt((r,n)=>{r(e)})}static reject(e){return new Rt((r,n)=>{n(e)})}static waitFor(e){return new Rt((r,n)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&r()},l=>n(l))}),s=!0,o===i&&r()})}static or(e){let r=Rt.resolve(!1);for(const n of e)r=r.next(i=>i?Rt.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,o)=>{n.push(r.call(this,i,o))}),this.waitFor(n)}static mapArray(e,r){return new Rt((n,i)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const d=l;r(e[d]).next(u=>{s[d]=u,++a,a===o&&n(s)},u=>i(u))}})}static doWhile(e,r){return new Rt((n,i)=>{const o=()=>{e()===!0?r().next(()=>{o()},i):n()};o()})}}function W8(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Hu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Um.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb=-1;function qm(t){return t==null}function rm(t){return t===0&&1/t==-1/0}function G8(t){return typeof t=="number"&&Number.isInteger(t)&&!rm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC="";function K8(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=Q5(e)),e=Y8(t.get(r),e);return Q5(e)}function Y8(t,e){let r=e;const n=t.length;for(let i=0;i<n;i++){const o=t.charAt(i);switch(o){case"\0":r+="";break;case QC:r+="";break;default:r+=o}}return r}function Q5(t){return t+QC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Ac(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function e_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,r){this.comparator=e,this.root=r||Hi.EMPTY}insert(e,r){return new ti(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Hi.BLACK,null,null))}remove(e){return new ti(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hi.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nf(this.root,e,this.comparator,!0)}}class Nf{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=r?n(e.key,r):1,r&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hi{constructor(e,r,n,i,o){this.key=e,this.value=r,this.color=n??Hi.RED,this.left=i??Hi.EMPTY,this.right=o??Hi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,o){return new Hi(e??this.key,r??this.value,n??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const o=n(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,r,n),null):o===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Hi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return Hi.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Sr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Sr(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Sr(27949);return e+(this.isRed()?0:1)}}Hi.EMPTY=null,Hi.RED=!0,Hi.BLACK=!1;Hi.EMPTY=new class{constructor(){this.size=0}get key(){throw Sr(57766)}get value(){throw Sr(16141)}get color(){throw Sr(16727)}get left(){throw Sr(29726)}get right(){throw Sr(36894)}copy(e,r,n,i,o){return this}insert(e,r,n){return new Hi(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this.comparator=e,this.data=new ti(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new tP(this.data.getIterator())}getIteratorFrom(e){return new tP(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof ki)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=n.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new ki(this.comparator);return r.data=e,r}}class tP{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e){this.fields=e,e.sort(Wi.comparator)}static empty(){return new Zo([])}unionWith(e){let r=new ki(Wi.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Zo(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Ru(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new t_("Invalid base64 string: "+o):o}}(e);return new Xi(r)}static fromUint8Array(e){const r=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Xi(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xi.EMPTY_BYTE_STRING=new Xi("");const X8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yc(t){if(_n(!!t,39018),typeof t=="string"){let e=0;const r=X8.exec(t);if(_n(!!r,46558,{timestamp:t}),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:ci(t.seconds),nanos:ci(t.nanos)}}function ci(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function mc(t){return typeof t=="string"?Xi.fromBase64String(t):Xi.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="server_timestamp",n_="__type__",i_="__previous_value__",o_="__local_write_time__";function Hm(t){return(t?.mapValue?.fields||{})[n_]?.stringValue===r_}function Wm(t){const e=t.mapValue.fields[i_];return Hm(e)?Wm(e):e}function xp(t){const e=yc(t.mapValue.fields[o_].timestampValue);return new In(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8{constructor(e,r,n,i,o,s,a,l,d,u){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=d,this.isUsingEmulator=u}}const nm="(default)";class Sp{constructor(e,r){this.projectId=e,this.database=r||nm}static empty(){return new Sp("","")}get isDefaultDatabase(){return this.database===nm}isEqual(e){return e instanceof Sp&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_="__type__",J8="__max__",Rf={mapValue:{}},a_="__vector__",im="value";function gc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hm(t)?4:eN(t)?9007199254740991:Q8(t)?10:11:Sr(28295,{value:t})}function ka(t,e){if(t===e)return!0;const r=gc(t);if(r!==gc(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xp(t).isEqual(xp(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=yc(i.timestampValue),a=yc(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return mc(i.bytesValue).isEqual(mc(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return ci(i.geoPointValue.latitude)===ci(o.geoPointValue.latitude)&&ci(i.geoPointValue.longitude)===ci(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ci(i.integerValue)===ci(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=ci(i.doubleValue),a=ci(o.doubleValue);return s===a?rm(s)===rm(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Ru(t.arrayValue.values||[],e.arrayValue.values||[],ka);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(eP(s)!==eP(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!ka(s[l],a[l])))return!1;return!0}(t,e);default:return Sr(52216,{left:t})}}function wp(t,e){return(t.values||[]).find(r=>ka(r,e))!==void 0}function Du(t,e){if(t===e)return 0;const r=gc(t),n=gc(e);if(r!==n)return tn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return tn(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=ci(o.integerValue||o.doubleValue),l=ci(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return rP(t.timestampValue,e.timestampValue);case 4:return rP(xp(t),xp(e));case 5:return B0(t.stringValue,e.stringValue);case 6:return function(o,s){const a=mc(o),l=mc(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let d=0;d<a.length&&d<l.length;d++){const u=tn(a[d],l[d]);if(u!==0)return u}return tn(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=tn(ci(o.latitude),ci(s.latitude));return a!==0?a:tn(ci(o.longitude),ci(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return nP(t.arrayValue,e.arrayValue);case 10:return function(o,s){const a=o.fields||{},l=s.fields||{},d=a[im]?.arrayValue,u=l[im]?.arrayValue,h=tn(d?.values?.length||0,u?.values?.length||0);return h!==0?h:nP(d,u)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Rf.mapValue&&s===Rf.mapValue)return 0;if(o===Rf.mapValue)return 1;if(s===Rf.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),d=s.fields||{},u=Object.keys(d);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const f=B0(l[h],u[h]);if(f!==0)return f;const p=Du(a[l[h]],d[u[h]]);if(p!==0)return p}return tn(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Sr(23264,{he:r})}}function rP(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return tn(t,e);const r=yc(t),n=yc(e),i=tn(r.seconds,n.seconds);return i!==0?i:tn(r.nanos,n.nanos)}function nP(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const o=Du(r[i],n[i]);if(o)return o}return tn(r.length,n.length)}function Lu(t){return j0(t)}function j0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=yc(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return mc(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return hr.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const o of r.values||[])i?i=!1:n+=",",n+=j0(o);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const s of n)o?o=!1:i+=",",i+=`${s}:${j0(r.fields[s])}`;return i+"}"}(t.mapValue):Sr(61005,{value:t})}function Ay(t){switch(gc(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wm(t);return e?16+Ay(e):16;case 5:return 2*t.stringValue.length;case 6:return mc(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((i,o)=>i+Ay(o),0)}(t.arrayValue);case 10:case 11:return function(n){let i=0;return Ac(n.fields,(o,s)=>{i+=o.length+Ay(s)}),i}(t.mapValue);default:throw Sr(13486,{value:t})}}function om(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function V0(t){return!!t&&"integerValue"in t}function cb(t){return!!t&&"arrayValue"in t}function iP(t){return!!t&&"nullValue"in t}function oP(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ky(t){return!!t&&"mapValue"in t}function Q8(t){return(t?.mapValue?.fields||{})[s_]?.stringValue===a_}function Jh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ac(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Jh(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Jh(t.arrayValue.values[r]);return e}return{...t}}function eN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===J8}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this.value=e}static empty(){return new Oo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!ky(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jh(r)}setAll(e){let r=Wi.emptyPath(),n={},i=[];e.forEach((s,a)=>{if(!r.isImmediateParentOf(a)){const l=this.getFieldsMap(r);this.applyChanges(l,n,i),n={},i=[],r=a.popLast()}s?n[a.lastSegment()]=Jh(s):i.push(a.lastSegment())});const o=this.getFieldsMap(r);this.applyChanges(o,n,i)}delete(e){const r=this.field(e.popLast());ky(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return ka(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];ky(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Ac(r,(i,o)=>e[i]=o);for(const i of n)delete e[i]}clone(){return new Oo(Jh(this.value))}}function l_(t){const e=[];return Ac(t.fields,(r,n)=>{const i=new Wi([r]);if(ky(n)){const o=l_(n.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Zo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,r,n,i,o,s,a){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new lo(e,0,Rr.min(),Rr.min(),Rr.min(),Oo.empty(),0)}static newFoundDocument(e,r,n,i){return new lo(e,1,r,Rr.min(),n,i,0)}static newNoDocument(e,r){return new lo(e,2,r,Rr.min(),Rr.min(),Oo.empty(),0)}static newUnknownDocument(e,r){return new lo(e,3,r,Rr.min(),Rr.min(),Oo.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Rr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Rr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof lo&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new lo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,r){this.position=e,this.inclusive=r}}function sP(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?n=hr.comparator(hr.fromName(s.referenceValue),r.key):n=Du(s,r.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function aP(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!ka(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,r="asc"){this.field=e,this.dir=r}}function tN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{}class vi extends c_{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new nN(e,r,n):r==="array-contains"?new sN(e,n):r==="in"?new aN(e,n):r==="not-in"?new lN(e,n):r==="array-contains-any"?new cN(e,n):new vi(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new iN(e,n):new oN(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Du(r,this.value)):r!==null&&gc(this.value)===gc(r)&&this.matchesComparison(Du(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Sr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Js extends c_{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Js(e,r)}matches(e){return d_(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function d_(t){return t.op==="and"}function u_(t){return rN(t)&&d_(t)}function rN(t){for(const e of t.filters)if(e instanceof Js)return!1;return!0}function z0(t){if(t instanceof vi)return t.field.canonicalString()+t.op.toString()+Lu(t.value);if(u_(t))return t.filters.map(e=>z0(e)).join(",");{const e=t.filters.map(r=>z0(r)).join(",");return`${t.op}(${e})`}}function h_(t,e){return t instanceof vi?function(n,i){return i instanceof vi&&n.op===i.op&&n.field.isEqual(i.field)&&ka(n.value,i.value)}(t,e):t instanceof Js?function(n,i){return i instanceof Js&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((o,s,a)=>o&&h_(s,i.filters[a]),!0):!1}(t,e):void Sr(19439)}function p_(t){return t instanceof vi?function(r){return`${r.field.canonicalString()} ${r.op} ${Lu(r.value)}`}(t):t instanceof Js?function(r){return r.op.toString()+" {"+r.getFilters().map(p_).join(" ,")+"}"}(t):"Filter"}class nN extends vi{constructor(e,r,n){super(e,r,n),this.key=hr.fromName(n.referenceValue)}matches(e){const r=hr.comparator(e.key,this.key);return this.matchesComparison(r)}}class iN extends vi{constructor(e,r){super(e,"in",r),this.keys=f_("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class oN extends vi{constructor(e,r){super(e,"not-in",r),this.keys=f_("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function f_(t,e){return(e.arrayValue?.values||[]).map(r=>hr.fromName(r.referenceValue))}class sN extends vi{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return cb(r)&&wp(r.arrayValue,this.value)}}class aN extends vi{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&wp(this.value.arrayValue,r)}}class lN extends vi{constructor(e,r){super(e,"not-in",r)}matches(e){if(wp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!wp(this.value.arrayValue,r)}}class cN extends vi{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!cb(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>wp(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,r=null,n=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}}function lP(t,e=null,r=[],n=[],i=null,o=null,s=null){return new dN(t,e,r,n,i,o,s)}function db(t){const e=Br(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>z0(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(o){return o.field.canonicalString()+o.dir}(n)).join(","),qm(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Lu(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Lu(n)).join(",")),e.Te=r}return e.Te}function ub(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!tN(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!h_(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!aP(t.startAt,e.startAt)&&aP(t.endAt,e.endAt)}function U0(t){return hr.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,r=null,n=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function uN(t,e,r,n,i,o,s,a){return new _d(t,e,r,n,i,o,s,a)}function hb(t){return new _d(t)}function cP(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function pb(t){return t.collectionGroup!==null}function Cu(t){const e=Br(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),r.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ki(Wi.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(o=>{r.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Cp(o,n))}),r.has(Wi.keyField().canonicalString())||e.Ie.push(new Cp(Wi.keyField(),n))}return e.Ie}function ba(t){const e=Br(t);return e.Ee||(e.Ee=hN(e,Cu(t))),e.Ee}function hN(t,e){if(t.limitType==="F")return lP(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Cp(i.field,o)});const r=t.endAt?new $u(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new $u(t.startAt.position,t.startAt.inclusive):null;return lP(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function q0(t,e){const r=t.filters.concat([e]);return new _d(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function sm(t,e,r){return new _d(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Gm(t,e){return ub(ba(t),ba(e))&&t.limitType===e.limitType}function y_(t){return`${db(ba(t))}|lt:${t.limitType}`}function hu(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>p_(i)).join(", ")}]`),qm(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>Lu(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>Lu(i)).join(",")),`Target(${n})`}(ba(t))}; limitType=${t.limitType})`}function Km(t,e){return e.isFoundDocument()&&function(n,i){const o=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):hr.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(t,e)&&function(n,i){for(const o of Cu(n))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const o of n.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(s,a,l){const d=sP(s,a,l);return s.inclusive?d<=0:d<0}(n.startAt,Cu(n),i)||n.endAt&&!function(s,a,l){const d=sP(s,a,l);return s.inclusive?d>=0:d>0}(n.endAt,Cu(n),i))}(t,e)}function pN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function m_(t){return(e,r)=>{let n=!1;for(const i of Cu(t)){const o=fN(i,e,r);if(o!==0)return o;n=n||i.field.isKeyField()}return 0}}function fN(t,e,r){const n=t.field.isKeyField()?hr.comparator(e.key,r.key):function(o,s,a){const l=s.data.field(o),d=a.data.field(o);return l!==null&&d!==null?Du(l,d):Sr(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Sr(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,o]of n)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ac(this.inner,(r,n)=>{for(const[i,o]of n)e(i,o)})}isEmpty(){return e_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=new ti(hr.comparator);function ll(){return yN}const g_=new ti(hr.comparator);function Mh(...t){let e=g_;for(const r of t)e=e.insert(r.key,r);return e}function v_(t){let e=g_;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function ad(){return Qh()}function b_(){return Qh()}function Qh(){return new Ad(t=>t.toString(),(t,e)=>t.isEqual(e))}const mN=new ti(hr.comparator),gN=new ki(hr.comparator);function rn(...t){let e=gN;for(const r of t)e=e.add(r);return e}const vN=new ki(tn);function bN(){return vN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rm(e)?"-0":e}}function P_(t){return{integerValue:""+t}}function PN(t,e){return G8(e)?P_(e):fb(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(){this._=void 0}}function xN(t,e,r){return t instanceof am?function(i,o){const s={fields:{[n_]:{stringValue:r_},[o_]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Hm(o)&&(o=Wm(o)),o&&(s.fields[i_]=o),{mapValue:s}}(r,e):t instanceof _p?S_(t,e):t instanceof Ap?w_(t,e):function(i,o){const s=x_(i,o),a=dP(s)+dP(i.Ae);return V0(s)&&V0(i.Ae)?P_(a):fb(i.serializer,a)}(t,e)}function SN(t,e,r){return t instanceof _p?S_(t,e):t instanceof Ap?w_(t,e):r}function x_(t,e){return t instanceof lm?function(n){return V0(n)||function(o){return!!o&&"doubleValue"in o}(n)}(e)?e:{integerValue:0}:null}class am extends Ym{}class _p extends Ym{constructor(e){super(),this.elements=e}}function S_(t,e){const r=C_(e);for(const n of t.elements)r.some(i=>ka(i,n))||r.push(n);return{arrayValue:{values:r}}}class Ap extends Ym{constructor(e){super(),this.elements=e}}function w_(t,e){let r=C_(e);for(const n of t.elements)r=r.filter(i=>!ka(i,n));return{arrayValue:{values:r}}}class lm extends Ym{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function dP(t){return ci(t.integerValue||t.doubleValue)}function C_(t){return cb(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function wN(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof _p&&i instanceof _p||n instanceof Ap&&i instanceof Ap?Ru(n.elements,i.elements,ka):n instanceof lm&&i instanceof lm?ka(n.Ae,i.Ae):n instanceof am&&i instanceof am}(t.transform,e.transform)}class CN{constructor(e,r){this.version=e,this.transformResults=r}}class Pa{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Pa}static exists(e){return new Pa(void 0,e)}static updateTime(e){return new Pa(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ey(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xm{}function __(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new k_(t.key,Pa.none()):new Up(t.key,t.data,Pa.none());{const r=t.data,n=Oo.empty();let i=new ki(Wi.comparator);for(let o of e.fields)if(!i.has(o)){let s=r.field(o);s===null&&o.length>1&&(o=o.popLast(),s=r.field(o)),s===null?n.delete(o):n.set(o,s),i=i.add(o)}return new kc(t.key,n,new Zo(i.toArray()),Pa.none())}}function _N(t,e,r){t instanceof Up?function(i,o,s){const a=i.value.clone(),l=hP(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,r):t instanceof kc?function(i,o,s){if(!Ey(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=hP(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(A_(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,r):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,r)}function ep(t,e,r,n){return t instanceof Up?function(o,s,a,l){if(!Ey(o.precondition,s))return a;const d=o.value.clone(),u=pP(o.fieldTransforms,l,s);return d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(t,e,r,n):t instanceof kc?function(o,s,a,l){if(!Ey(o.precondition,s))return a;const d=pP(o.fieldTransforms,l,s),u=s.data;return u.setAll(A_(o)),u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(o,s,a){return Ey(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,r)}function AN(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),o=x_(n.transform,i||null);o!=null&&(r===null&&(r=Oo.empty()),r.set(n.field,o))}return r||null}function uP(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Ru(n,i,(o,s)=>wN(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Up extends Xm{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class kc extends Xm{constructor(e,r,n,i,o=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function A_(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function hP(t,e,r){const n=new Map;_n(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let i=0;i<r.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);n.set(o.field,SN(s,a,r[i]))}return n}function pP(t,e,r){const n=new Map;for(const i of t){const o=i.transform,s=r.data.field(i.field);n.set(i.field,xN(o,s,e))}return n}class k_ extends Xm{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kN extends Xm{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&_N(o,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=ep(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=ep(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=b_();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=r.has(i.key)?null:a;const l=__(s,a);l!==null&&n.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(Rr.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),rn())}isEqual(e){return this.batchId===e.batchId&&Ru(this.mutations,e.mutations,(r,n)=>uP(r,n))&&Ru(this.baseMutations,e.baseMutations,(r,n)=>uP(r,n))}}class yb{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){_n(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=function(){return mN}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,n[s].version);return new yb(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mi,ln;function NN(t){switch(t){case Ct.OK:return Sr(64938);case Ct.CANCELLED:case Ct.UNKNOWN:case Ct.DEADLINE_EXCEEDED:case Ct.RESOURCE_EXHAUSTED:case Ct.INTERNAL:case Ct.UNAVAILABLE:case Ct.UNAUTHENTICATED:return!1;case Ct.INVALID_ARGUMENT:case Ct.NOT_FOUND:case Ct.ALREADY_EXISTS:case Ct.PERMISSION_DENIED:case Ct.FAILED_PRECONDITION:case Ct.ABORTED:case Ct.OUT_OF_RANGE:case Ct.UNIMPLEMENTED:case Ct.DATA_LOSS:return!0;default:return Sr(15467,{code:t})}}function E_(t){if(t===void 0)return sl("GRPC error has no .code"),Ct.UNKNOWN;switch(t){case mi.OK:return Ct.OK;case mi.CANCELLED:return Ct.CANCELLED;case mi.UNKNOWN:return Ct.UNKNOWN;case mi.DEADLINE_EXCEEDED:return Ct.DEADLINE_EXCEEDED;case mi.RESOURCE_EXHAUSTED:return Ct.RESOURCE_EXHAUSTED;case mi.INTERNAL:return Ct.INTERNAL;case mi.UNAVAILABLE:return Ct.UNAVAILABLE;case mi.UNAUTHENTICATED:return Ct.UNAUTHENTICATED;case mi.INVALID_ARGUMENT:return Ct.INVALID_ARGUMENT;case mi.NOT_FOUND:return Ct.NOT_FOUND;case mi.ALREADY_EXISTS:return Ct.ALREADY_EXISTS;case mi.PERMISSION_DENIED:return Ct.PERMISSION_DENIED;case mi.FAILED_PRECONDITION:return Ct.FAILED_PRECONDITION;case mi.ABORTED:return Ct.ABORTED;case mi.OUT_OF_RANGE:return Ct.OUT_OF_RANGE;case mi.UNIMPLEMENTED:return Ct.UNIMPLEMENTED;case mi.DATA_LOSS:return Ct.DATA_LOSS;default:return Sr(39323,{code:t})}}(ln=mi||(mi={}))[ln.OK=0]="OK",ln[ln.CANCELLED=1]="CANCELLED",ln[ln.UNKNOWN=2]="UNKNOWN",ln[ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ln[ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ln[ln.NOT_FOUND=5]="NOT_FOUND",ln[ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",ln[ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",ln[ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",ln[ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ln[ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ln[ln.ABORTED=10]="ABORTED",ln[ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",ln[ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",ln[ln.INTERNAL=13]="INTERNAL",ln[ln.UNAVAILABLE=14]="UNAVAILABLE",ln[ln.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=new lc([4294967295,4294967295],0);function fP(t){const e=RN().encode(t),r=new UC;return r.update(e),new Uint8Array(r.digest())}function yP(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new lc([r,n],0),new lc([i,o],0)]}class mb{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Oh(`Invalid padding: ${r}`);if(n<0)throw new Oh(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Oh(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Oh(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=lc.fromNumber(this.ge)}ye(e,r,n){let i=e.add(r.multiply(lc.fromNumber(n)));return i.compare(DN)===1&&(i=new lc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=fP(e),[n,i]=yP(r);for(let o=0;o<this.hashCount;o++){const s=this.ye(n,i,o);if(!this.we(s))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new mb(o,i,r);return n.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;const r=fP(e),[n,i]=yP(r);for(let o=0;o<this.hashCount;o++){const s=this.ye(n,i,o);this.Se(s)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Oh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,r,n,i,o){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,qp.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Zm(Rr.min(),i,new ti(tn),ll(),rn())}}class qp{constructor(e,r,n,i,o){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new qp(n,r,rn(),rn(),rn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,r,n,i){this.be=e,this.removedTargetIds=r,this.key=n,this.De=i}}class T_{constructor(e,r){this.targetId=e,this.Ce=r}}class I_{constructor(e,r,n=Xi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class mP{constructor(){this.ve=0,this.Fe=gP(),this.Me=Xi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=rn(),r=rn(),n=rn();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:Sr(38017,{changeType:o})}}),new qp(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=gP()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,_n(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class LN{constructor(e){this.Ge=e,this.ze=new Map,this.je=ll(),this.Je=Df(),this.He=Df(),this.Ye=new ti(tn)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:Sr(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,i)=>{this.rt(i)&&r(i)})}st(e){const r=e.targetId,n=e.Ce.count,i=this.ot(r);if(i){const o=i.target;if(U0(o))if(n===0){const s=new hr(o.path);this.et(r,s,lo.newNoDocument(s,Rr.min()))}else _n(n===1,20013,{expectedCount:n});else{const s=this._t(r);if(s!==n){const a=this.ut(e),l=a?this.ct(a,e,s):1;if(l!==0){this.it(r);const d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,d)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:o=0}=r;let s,a;try{s=mc(n).toUint8Array()}catch(l){if(l instanceof t_)return Nu("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new mb(s,i,o)}catch(l){return Nu(l instanceof Oh?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let i=0;return n.forEach(o=>{const s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(r,o,null),i++)}),i}Tt(e){const r=new Map;this.ze.forEach((o,s)=>{const a=this.ot(s);if(a){if(o.current&&U0(a.target)){const l=new hr(a.target.path);this.It(l).has(s)||this.Et(s,l)||this.et(s,l,lo.newNoDocument(l,e))}o.Be&&(r.set(s,o.ke()),o.qe())}});let n=rn();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const d=this.ot(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));const i=new Zm(e,r,this.Ye,this.je,n);return this.je=ll(),this.Je=Df(),this.He=Df(),this.Ye=new ti(tn),i}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,r)?i.Qe(r,1):i.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new mP,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new ki(tn),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new ki(tn),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||sr("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new mP),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function Df(){return new ti(hr.comparator)}function gP(){return new ti(hr.comparator)}const $N={asc:"ASCENDING",desc:"DESCENDING"},FN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MN={and:"AND",or:"OR"};class ON{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function H0(t,e){return t.useProto3Json||qm(e)?e:{value:e}}function cm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function N_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function BN(t,e){return cm(t,e.toTimestamp())}function xa(t){return _n(!!t,49232),Rr.fromTimestamp(function(r){const n=yc(r);return new In(n.seconds,n.nanos)}(t))}function gb(t,e){return W0(t,e).canonicalString()}function W0(t,e){const r=function(i){return new Vn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function R_(t){const e=Vn.fromString(t);return _n(M_(e),10190,{key:e.toString()}),e}function G0(t,e){return gb(t.databaseId,e.path)}function cv(t,e){const r=R_(e);if(r.get(1)!==t.databaseId.projectId)throw new Jt(Ct.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Jt(Ct.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new hr(L_(r))}function D_(t,e){return gb(t.databaseId,e)}function jN(t){const e=R_(t);return e.length===4?Vn.emptyPath():L_(e)}function K0(t){return new Vn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function L_(t){return _n(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function vP(t,e,r){return{name:G0(t,e),fields:r.value.mapValue.fields}}function VN(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Sr(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,u){return d.useProto3Json?(_n(u===void 0||typeof u=="string",58123),Xi.fromBase64String(u||"")):(_n(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Xi.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(d){const u=d.code===void 0?Ct.UNKNOWN:E_(d.code);return new Jt(u,d.message||"")}(s);r=new I_(n,i,o,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=cv(t,n.document.name),o=xa(n.document.updateTime),s=n.document.createTime?xa(n.document.createTime):Rr.min(),a=new Oo({mapValue:{fields:n.document.fields}}),l=lo.newFoundDocument(i,o,s,a),d=n.targetIds||[],u=n.removedTargetIds||[];r=new Ty(d,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=cv(t,n.document),o=n.readTime?xa(n.readTime):Rr.min(),s=lo.newNoDocument(i,o),a=n.removedTargetIds||[];r=new Ty([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=cv(t,n.document),o=n.removedTargetIds||[];r=new Ty([],o,i,null)}else{if(!("filter"in e))return Sr(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:o}=n,s=new IN(i,o),a=n.targetId;r=new T_(a,s)}}return r}function zN(t,e){let r;if(e instanceof Up)r={update:vP(t,e.key,e.value)};else if(e instanceof k_)r={delete:G0(t,e.key)};else if(e instanceof kc)r={update:vP(t,e.key,e.data),updateMask:ZN(e.fieldMask)};else{if(!(e instanceof kN))return Sr(16599,{Vt:e.type});r={verify:G0(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(o,s){const a=s.transform;if(a instanceof am)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof _p)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ap)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof lm)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw Sr(20930,{transform:s.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:BN(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Sr(27497)}(t,e.precondition)),r}function UN(t,e){return t&&t.length>0?(_n(e!==void 0,14353),t.map(r=>function(i,o){let s=i.updateTime?xa(i.updateTime):xa(o);return s.isEqual(Rr.min())&&(s=xa(o)),new CN(s,i.transformResults||[])}(r,e))):[]}function qN(t,e){return{documents:[D_(t,e.path)]}}function HN(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=D_(t,i);const o=function(d){if(d.length!==0)return F_(Js.create(d,"and"))}(e.filters);o&&(r.structuredQuery.where=o);const s=function(d){if(d.length!==0)return d.map(u=>function(f){return{field:pu(f.field),direction:KN(f.dir)}}(u))}(e.orderBy);s&&(r.structuredQuery.orderBy=s);const a=H0(t,e.limit);return a!==null&&(r.structuredQuery.limit=a),e.startAt&&(r.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:r,parent:i}}function WN(t){let e=jN(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){_n(n===1,65062);const u=r.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];r.where&&(o=function(h){const f=$_(h);return f instanceof Js&&u_(f)?f.getFilters():[f]}(r.where));let s=[];r.orderBy&&(s=function(h){return h.map(f=>function(m){return new Cp(fu(m.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(f))}(r.orderBy));let a=null;r.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,qm(f)?null:f}(r.limit));let l=null;r.startAt&&(l=function(h){const f=!!h.before,p=h.values||[];return new $u(p,f)}(r.startAt));let d=null;return r.endAt&&(d=function(h){const f=!h.before,p=h.values||[];return new $u(p,f)}(r.endAt)),uN(e,i,s,o,a,"F",l,d)}function GN(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Sr(28987,{purpose:i})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function $_(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=fu(r.unaryFilter.field);return vi.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=fu(r.unaryFilter.field);return vi.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=fu(r.unaryFilter.field);return vi.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=fu(r.unaryFilter.field);return vi.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Sr(61313);default:return Sr(60726)}}(t):t.fieldFilter!==void 0?function(r){return vi.create(fu(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Sr(58110);default:return Sr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Js.create(r.compositeFilter.filters.map(n=>$_(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Sr(1026)}}(r.compositeFilter.op))}(t):Sr(30097,{filter:t})}function KN(t){return $N[t]}function YN(t){return FN[t]}function XN(t){return MN[t]}function pu(t){return{fieldPath:t.canonicalString()}}function fu(t){return Wi.fromServerFormat(t.fieldPath)}function F_(t){return t instanceof vi?function(r){if(r.op==="=="){if(oP(r.value))return{unaryFilter:{field:pu(r.field),op:"IS_NAN"}};if(iP(r.value))return{unaryFilter:{field:pu(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(oP(r.value))return{unaryFilter:{field:pu(r.field),op:"IS_NOT_NAN"}};if(iP(r.value))return{unaryFilter:{field:pu(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pu(r.field),op:YN(r.op),value:r.value}}}(t):t instanceof Js?function(r){const n=r.getFilters().map(i=>F_(i));return n.length===1?n[0]:{compositeFilter:{op:XN(r.op),filters:n}}}(t):Sr(54877,{filter:t})}function ZN(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function M_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,r,n,i,o=Rr.min(),s=Rr.min(),a=Xi.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new rc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new rc(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.yt=e}}function QN(t){const e=WN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(){this.Cn=new tR}addToCollectionParentIndex(e,r){return this.Cn.add(r),Rt.resolve()}getCollectionParents(e,r){return Rt.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return Rt.resolve()}deleteFieldIndex(e,r){return Rt.resolve()}deleteAllFieldIndexes(e){return Rt.resolve()}createTargetIndexes(e,r){return Rt.resolve()}getDocumentsMatchingTarget(e,r){return Rt.resolve(null)}getIndexType(e,r){return Rt.resolve(0)}getFieldIndexes(e,r){return Rt.resolve([])}getNextCollectionGroupToUpdate(e){return Rt.resolve(null)}getMinOffset(e,r){return Rt.resolve(fc.min())}getMinOffsetFromCollectionGroup(e,r){return Rt.resolve(fc.min())}updateCollectionGroup(e,r,n){return Rt.resolve()}updateIndexEntries(e,r){return Rt.resolve()}}class tR{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new ki(Vn.comparator),o=!i.has(n);return this.index[r]=i.add(n),o}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new ki(Vn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},O_=41943040;class Fo{static withCacheSize(e){return new Fo(e,Fo.DEFAULT_COLLECTION_PERCENTILE,Fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fo.DEFAULT_COLLECTION_PERCENTILE=10,Fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fo.DEFAULT=new Fo(O_,Fo.DEFAULT_COLLECTION_PERCENTILE,Fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fo.DISABLED=new Fo(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Fu(0)}static cr(){return new Fu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP="LruGarbageCollector",rR=1048576;function xP([t,e],[r,n]){const i=tn(t,r);return i===0?tn(e,n):i}class nR{constructor(e){this.Ir=e,this.buffer=new ki(xP),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();xP(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class iR{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){sr(PP,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Hu(r)?sr(PP,"Ignoring IndexedDB error during garbage collection: ",r):await qu(r)}await this.Vr(3e5)})}}class oR{constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Rt.resolve(Um.ce);const n=new nR(r);return this.mr.forEachTarget(e,i=>n.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>n.Ar(i))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(sr("LruGarbageCollector","Garbage collection skipped; disabled"),Rt.resolve(bP)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(sr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bP):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,i,o,s,a,l,d;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(sr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(n=h,a=Date.now(),this.removeTargets(e,n,r))).next(h=>(o=h,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(d=Date.now(),uu()<=en.DEBUG&&sr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(d-l)+`ms
Total Duration: ${d-u}ms`),Rt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})))}}function sR(t,e){return new oR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(){this.changes=new Ad(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,lo.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Rt.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&ep(n.mutation,i,Zo.empty(),In.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,rn()).next(()=>n))}getLocalViewOfDocuments(e,r,n=rn()){const i=ad();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(o=>{let s=Mh();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,r){const n=ad();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,rn()))}populateOverlays(e,r,n){const i=[];return n.forEach(o=>{r.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{r.set(s,a)})})}computeViews(e,r,n,i){let o=ll();const s=Qh(),a=function(){return Qh()}();return r.forEach((l,d)=>{const u=n.get(d.key);i.has(d.key)&&(u===void 0||u.mutation instanceof kc)?o=o.insert(d.key,d):u!==void 0?(s.set(d.key,u.mutation.getFieldMask()),ep(u.mutation,d,u.mutation.getFieldMask(),In.now())):s.set(d.key,Zo.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((d,u)=>s.set(d,u)),r.forEach((d,u)=>a.set(d,new lR(u,s.get(d)??null))),a))}recalculateAndSaveOverlays(e,r){const n=Qh();let i=new ti((s,a)=>s-a),o=rn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(s=>{for(const a of s)a.keys().forEach(l=>{const d=r.get(l);if(d===null)return;let u=n.get(l)||Zo.empty();u=a.applyToLocalView(d,u),n.set(l,u);const h=(i.get(a.batchId)||rn()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),d=l.key,u=l.value,h=b_();u.forEach(f=>{if(!o.has(f)){const p=__(r.get(f),n.get(f));p!==null&&h.set(f,p),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,h))}return Rt.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(s){return hr.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):pb(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-o.size):Rt.resolve(ad());let a=Pp,l=o;return s.next(d=>Rt.forEach(d,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(u)?Rt.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,l,d,rn())).next(u=>({batchId:a,changes:v_(u)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new hr(r)).next(n=>{let i=Mh();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const o=r.collectionGroup;let s=Mh();return this.indexManager.getCollectionParents(e,o).next(a=>Rt.forEach(a,l=>{const d=function(h,f){return new _d(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,n,i).next(u=>{u.forEach((h,f)=>{s=s.insert(h,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,r,n,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,o,i))).next(s=>{o.forEach((l,d)=>{const u=d.getKey();s.get(u)===null&&(s=s.insert(u,lo.newInvalidDocument(u)))});let a=Mh();return s.forEach((l,d)=>{const u=o.get(l);u!==void 0&&ep(u.mutation,d,Zo.empty(),In.now()),Km(r,d)&&(a=a.insert(l,d))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return Rt.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:xa(i.createTime)}}(r)),Rt.resolve()}getNamedQuery(e,r){return Rt.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(i){return{name:i.name,query:QN(i.bundledQuery),readTime:xa(i.readTime)}}(r)),Rt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(){this.overlays=new ti(hr.comparator),this.qr=new Map}getOverlay(e,r){return Rt.resolve(this.overlays.get(r))}getOverlays(e,r){const n=ad();return Rt.forEach(r,i=>this.getOverlay(e,i).next(o=>{o!==null&&n.set(i,o)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,o)=>{this.St(e,r,o)}),Rt.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(n)),Rt.resolve()}getOverlaysForCollection(e,r,n){const i=ad(),o=r.length+1,s=new hr(r.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,d=l.getKey();if(!r.isPrefixOf(d.path))break;d.path.length===o&&l.largestBatchId>n&&i.set(l.getKey(),l)}return Rt.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let o=new ti((d,u)=>d-u);const s=this.overlays.getIterator();for(;s.hasNext();){const d=s.getNext().value;if(d.getKey().getCollectionGroup()===r&&d.largestBatchId>n){let u=o.get(d.largestBatchId);u===null&&(u=ad(),o=o.insert(d.largestBatchId,u)),u.set(d.getKey(),d)}}const a=ad(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,u)=>a.set(d,u)),!(a.size()>=i)););return Rt.resolve(a)}St(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new TN(r,n));let o=this.qr.get(r);o===void 0&&(o=rn(),this.qr.set(r,o)),this.qr.set(r,o.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(){this.sessionToken=Xi.EMPTY_BYTE_STRING}getSessionToken(e){return Rt.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Rt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(){this.Qr=new ki(Mi.$r),this.Ur=new ki(Mi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new Mi(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new Mi(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new hr(new Vn([])),n=new Mi(r,e),i=new Mi(r,e+1),o=[];return this.Ur.forEachInRange([n,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new hr(new Vn([])),n=new Mi(r,e),i=new Mi(r,e+1);let o=rn();return this.Ur.forEachInRange([n,i],s=>{o=o.add(s.key)}),o}containsKey(e){const r=new Mi(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Mi{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return hr.comparator(e.key,r.key)||tn(e.Yr,r.Yr)}static Kr(e,r){return tn(e.Yr,r.Yr)||hr.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new ki(Mi.$r)}checkEmpty(e){return Rt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new EN(o,r,n,i);this.mutationQueue.push(s);for(const a of i)this.Zr=this.Zr.add(new Mi(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Rt.resolve(s)}lookupMutationBatch(e,r){return Rt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.ei(n),o=i<0?0:i;return Rt.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Rt.resolve(this.mutationQueue.length===0?lb:this.tr-1)}getAllMutationBatches(e){return Rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Mi(r,0),i=new Mi(r,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([n,i],s=>{const a=this.Xr(s.Yr);o.push(a)}),Rt.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new ki(tn);return r.forEach(i=>{const o=new Mi(i,0),s=new Mi(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{n=n.add(a.Yr)})}),Rt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let o=n;hr.isDocumentKey(o)||(o=o.child(""));const s=new Mi(new hr(o),0);let a=new ki(tn);return this.Zr.forEachWhile(l=>{const d=l.key.path;return!!n.isPrefixOf(d)&&(d.length===i&&(a=a.add(l.Yr)),!0)},s),Rt.resolve(this.ti(a))}ti(e){const r=[];return e.forEach(n=>{const i=this.Xr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){_n(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Rt.forEach(r.mutations,i=>{const o=new Mi(i.key,r.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new Mi(r,0),i=this.Zr.firstAfterOrEqual(n);return Rt.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Rt.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this.ri=e,this.docs=function(){return new ti(hr.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),o=i?i.size:0,s=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Rt.resolve(n?n.document.mutableCopy():lo.newInvalidDocument(r))}getEntries(e,r){let n=ll();return r.forEach(i=>{const o=this.docs.get(i);n=n.insert(i,o?o.document.mutableCopy():lo.newInvalidDocument(i))}),Rt.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let o=ll();const s=r.path,a=new hr(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:d,value:{document:u}}=l.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||U8(z8(u),n)<=0||(i.has(u.key)||Km(r,u))&&(o=o.insert(u.key,u.mutableCopy()))}return Rt.resolve(o)}getAllFromCollectionGroup(e,r,n,i){Sr(9500)}ii(e,r){return Rt.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new yR(this)}getSize(e){return Rt.resolve(this.size)}}class yR extends aR{constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)}),Rt.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.persistence=e,this.si=new Ad(r=>db(r),ub),this.lastRemoteSnapshotVersion=Rr.min(),this.highestTargetId=0,this.oi=0,this._i=new vb,this.targetCount=0,this.ai=Fu.ur()}forEachTarget(e,r){return this.si.forEach((n,i)=>r(i)),Rt.resolve()}getLastRemoteSnapshotVersion(e){return Rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Rt.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Rt.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Rt.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new Fu(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,Rt.resolve()}updateTargetData(e,r){return this.Pr(r),Rt.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Rt.resolve()}removeTargets(e,r,n){let i=0;const o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=r&&n.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Rt.waitFor(o).next(()=>i)}getTargetCount(e){return Rt.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return Rt.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),Rt.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const i=this.persistence.referenceDelegate,o=[];return i&&r.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),Rt.waitFor(o)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),Rt.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return Rt.resolve(n)}containsKey(e,r){return Rt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,r){this.ui={},this.overlays={},this.ci=new Um(0),this.li=!1,this.li=!0,this.hi=new hR,this.referenceDelegate=e(this),this.Pi=new mR(this),this.indexManager=new eR,this.remoteDocumentCache=function(i){return new fR(i)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new JN(r),this.Ii=new dR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new uR,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new pR(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){sr("MemoryPersistence","Starting transaction:",e);const i=new gR(this.ci.next());return this.referenceDelegate.Ei(),n(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,r){return Rt.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class gR extends H8{constructor(e){super(),this.currentSequenceNumber=e}}class bb{constructor(e){this.persistence=e,this.Ri=new vb,this.Vi=null}static mi(e){return new bb(e)}get fi(){if(this.Vi)return this.Vi;throw Sr(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Rt.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Rt.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),Rt.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(i=>this.fi.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Rt.forEach(this.fi,n=>{const i=hr.fromPath(n);return this.gi(e,i).next(o=>{o||r.removeEntry(i,Rr.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return Rt.or([()=>Rt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class dm{constructor(e,r){this.persistence=e,this.pi=new Ad(n=>K8(n.path),(n,i)=>n.isEqual(i)),this.garbageCollector=sR(this,r)}static mi(e,r){return new dm(e,r)}Ei(){}di(e){return Rt.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(i=>n+i))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return Rt.forEach(this.pi,(n,i)=>this.br(e,n,i).next(o=>o?Rt.resolve():r(i)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,r).next(a=>{a||(n++,o.removeEntry(s,Rr.min()))})).next(()=>o.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),Rt.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),Rt.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),Rt.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),Rt.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Ay(e.data.value)),r}br(e,r,n){return Rt.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const i=this.pi.get(r);return Rt.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=i}static As(e,r){let n=rn(),i=rn();for(const o of r.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Pb(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return lT()?8:W8(ho())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,i){const o={result:null};return this.ys(e,r).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,r,i,n).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new vR;return this.Ss(e,r,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,r,s,a.size)})}).next(()=>o.result)}bs(e,r,n,i){return n.documentReadCount<this.fs?(uu()<=en.DEBUG&&sr("QueryEngine","SDK will not create cache indexes for query:",hu(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Rt.resolve()):(uu()<=en.DEBUG&&sr("QueryEngine","Query:",hu(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(uu()<=en.DEBUG&&sr("QueryEngine","The SDK decides to create cache indexes for query:",hu(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ba(r))):Rt.resolve())}ys(e,r){if(cP(r))return Rt.resolve(null);let n=ba(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=sm(r,null,"F"),n=ba(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(o=>{const s=rn(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,n).next(l=>{const d=this.Ds(r,a);return this.Cs(r,d,s,l.readTime)?this.ys(e,sm(r,null,"F")):this.vs(e,d,r,l)}))})))}ws(e,r,n,i){return cP(r)||i.isEqual(Rr.min())?Rt.resolve(null):this.ps.getDocuments(e,n).next(o=>{const s=this.Ds(r,o);return this.Cs(r,s,n,i)?Rt.resolve(null):(uu()<=en.DEBUG&&sr("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hu(r)),this.vs(e,s,r,V8(i,Pp)).next(a=>a))})}Ds(e,r){let n=new ki(m_(e));return r.forEach((i,o)=>{Km(e,o)&&(n=n.add(o))}),n}Cs(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const o=e.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,r,n){return uu()<=en.DEBUG&&sr("QueryEngine","Using full collection scan to execute query:",hu(r)),this.ps.getDocumentsMatchingQuery(e,r,fc.min(),n)}vs(e,r,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next(o=>(r.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="LocalStore",PR=3e8;class xR{constructor(e,r,n,i){this.persistence=e,this.Fs=r,this.serializer=i,this.Ms=new ti(tn),this.xs=new Ad(o=>db(o),ub),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function SR(t,e,r,n){return new xR(t,e,r,n)}async function j_(t,e){const r=Br(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(o=>(i=o,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(o=>{const s=[],a=[];let l=rn();for(const d of i){s.push(d.batchId);for(const u of d.mutations)l=l.add(u.key)}for(const d of o){a.push(d.batchId);for(const u of d.mutations)l=l.add(u.key)}return r.localDocuments.getDocuments(n,l).next(d=>({Ls:d,removedBatchIds:s,addedBatchIds:a}))})})}function wR(t,e){const r=Br(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),o=r.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,d,u){const h=d.batch,f=h.keys();let p=Rt.resolve();return f.forEach(m=>{p=p.next(()=>u.getEntry(l,m)).next(x=>{const P=d.docVersions.get(m);_n(P!==null,48541),x.version.compareTo(P)<0&&(h.applyToRemoteDocument(x,d),x.isValidDocument()&&(x.setReadTime(d.commitVersion),u.addEntry(x)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(r,n,e,o).next(()=>o.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let l=rn();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(l=l.add(a.batch.mutations[d].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function V_(t){const e=Br(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function CR(t,e){const r=Br(t),n=e.snapshotVersion;let i=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=r.Ns.newChangeBuffer({trackRemovals:!0});i=r.Ms;const a=[];e.targetChanges.forEach((u,h)=>{const f=i.get(h);if(!f)return;a.push(r.Pi.removeMatchingKeys(o,u.removedDocuments,h).next(()=>r.Pi.addMatchingKeys(o,u.addedDocuments,h)));let p=f.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(Xi.EMPTY_BYTE_STRING,Rr.min()).withLastLimboFreeSnapshotVersion(Rr.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,n)),i=i.insert(h,p),function(x,P,g){return x.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=PR?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(f,p,u)&&a.push(r.Pi.updateTargetData(o,p))});let l=ll(),d=rn();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(_R(o,s,e.documentUpdates).next(u=>{l=u.ks,d=u.qs})),!n.isEqual(Rr.min())){const u=r.Pi.getLastRemoteSnapshotVersion(o).next(h=>r.Pi.setTargetsMetadata(o,o.currentSequenceNumber,n));a.push(u)}return Rt.waitFor(a).next(()=>s.apply(o)).next(()=>r.localDocuments.getLocalViewOfDocuments(o,l,d)).next(()=>l)}).then(o=>(r.Ms=i,o))}function _R(t,e,r){let n=rn(),i=rn();return r.forEach(o=>n=n.add(o)),e.getEntries(t,n).next(o=>{let s=ll();return r.forEach((a,l)=>{const d=o.get(a);l.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Rr.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):sr(xb,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",l.version)}),{ks:s,qs:i}})}function AR(t,e){const r=Br(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=lb),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function kR(t,e){const r=Br(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Pi.getTargetData(n,e).next(o=>o?(i=o,Rt.resolve(i)):r.Pi.allocateTargetId(n).next(s=>(i=new rc(e,s,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function Y0(t,e,r){const n=Br(t),i=n.Ms.get(e),o=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",o,s=>n.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Hu(s))throw s;sr(xb,`Failed to update sequence numbers for target ${e}: ${s}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function SP(t,e,r){const n=Br(t);let i=Rr.min(),o=rn();return n.persistence.runTransaction("Execute query","readwrite",s=>function(l,d,u){const h=Br(l),f=h.xs.get(u);return f!==void 0?Rt.resolve(h.Ms.get(f)):h.Pi.getTargetData(d,u)}(n,s,ba(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(s,e,r?i:Rr.min(),r?o:rn())).next(a=>(ER(n,pN(e),a),{documents:a,Qs:o})))}function ER(t,e,r){let n=t.Os.get(e)||Rr.min();r.forEach((i,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)}),t.Os.set(e,n)}class wP{constructor(){this.activeTargetIds=bN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TR{constructor(){this.Mo=new wP,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wP,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP="ConnectivityMonitor";class _P{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){sr(CP,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){sr(CP,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lf=null;function X0(){return Lf===null?Lf=function(){return 268435456+Math.round(2147483648*Math.random())}():Lf++,"0x"+Lf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="RestConnection",NR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class RR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===nm?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,r,n,i,o){const s=X0(),a=this.zo(e,r.toUriEncodedString());sr(dv,`Sending RPC '${e}' ${s}:`,a,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,o);const{host:d}=new URL(a),u=_c(d);return this.Jo(e,a,l,n,u).then(h=>(sr(dv,`Received RPC '${e}' ${s}: `,h),h),h=>{throw Nu(dv,`RPC '${e}' ${s} failed with error: `,h,"url: ",a,"request:",n),h})}Ho(e,r,n,i,o,s){return this.Go(e,r,n,i,o)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Uu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>e[o]=i),n&&n.headers.forEach((i,o)=>e[o]=i)}zo(e,r){const n=NR[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji="WebChannelConnection";class LR extends RR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,i,o){const s=X0();return new Promise((a,l)=>{const d=new qC;d.setWithCredentials(!0),d.listenOnce(HC.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case _y.NO_ERROR:const h=d.getResponseJson();sr(Ji,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case _y.TIMEOUT:sr(Ji,`RPC '${e}' ${s} timed out`),l(new Jt(Ct.DEADLINE_EXCEEDED,"Request time out"));break;case _y.HTTP_ERROR:const f=d.getStatus();if(sr(Ji,`RPC '${e}' ${s} failed with status:`,f,"response text:",d.getResponseText()),f>0){let p=d.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p?.error;if(m&&m.status&&m.message){const x=function(g){const F=g.toLowerCase().replace(/_/g,"-");return Object.values(Ct).indexOf(F)>=0?F:Ct.UNKNOWN}(m.status);l(new Jt(x,m.message))}else l(new Jt(Ct.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new Jt(Ct.UNAVAILABLE,"Connection failed."));break;default:Sr(9055,{l_:e,streamId:s,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{sr(Ji,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);sr(Ji,`RPC '${e}' ${s} sending request:`,i),d.send(r,"POST",u,n,15)})}T_(e,r,n){const i=X0(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=KC(),a=GC(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const u=o.join("");sr(Ji,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=s.createWebChannel(u,l);this.I_(h);let f=!1,p=!1;const m=new DR({Yo:P=>{p?sr(Ji,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(f||(sr(Ji,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),sr(Ji,`RPC '${e}' stream ${i} sending:`,P),h.send(P))},Zo:()=>h.close()}),x=(P,g,F)=>{P.listen(g,V=>{try{F(V)}catch(N){setTimeout(()=>{throw N},0)}})};return x(h,Fh.EventType.OPEN,()=>{p||(sr(Ji,`RPC '${e}' stream ${i} transport opened.`),m.o_())}),x(h,Fh.EventType.CLOSE,()=>{p||(p=!0,sr(Ji,`RPC '${e}' stream ${i} transport closed`),m.a_(),this.E_(h))}),x(h,Fh.EventType.ERROR,P=>{p||(p=!0,Nu(Ji,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),m.a_(new Jt(Ct.UNAVAILABLE,"The operation could not be completed")))}),x(h,Fh.EventType.MESSAGE,P=>{if(!p){const g=P.data[0];_n(!!g,16349);const F=g,V=F?.error||F[0]?.error;if(V){sr(Ji,`RPC '${e}' stream ${i} received error:`,V);const N=V.status;let R=function(k){const D=mi[k];if(D!==void 0)return E_(D)}(N),M=V.message;R===void 0&&(R=Ct.INTERNAL,M="Unknown error status: "+N+" with message "+V.message),p=!0,m.a_(new Jt(R,M)),h.close()}else sr(Ji,`RPC '${e}' stream ${i} received:`,g),m.u_(g)}}),x(a,WC.STAT_EVENT,P=>{P.stat===O0.PROXY?sr(Ji,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===O0.NOPROXY&&sr(Ji,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.__()},0),m}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function uv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(t){return new ON(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,r,n=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,r-n);i>0&&sr("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP="PersistentStream";class U_{constructor(e,r,n,i,o,s,a,l){this.Mi=e,this.S_=n,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new z_(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===Ct.RESOURCE_EXHAUSTED?(sl(r.toString()),sl("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===Ct.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.D_===r&&this.G_(n,i)},n=>{e(()=>{const i=new Jt(Ct.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{n(()=>this.z_(i))}),this.stream.onMessage(i=>{n(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return sr(AP,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(sr(AP,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $R extends U_{constructor(e,r,n,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,s),this.serializer=o}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=VN(this.serializer,e),n=function(o){if(!("targetChange"in o))return Rr.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Rr.min():s.readTime?xa(s.readTime):Rr.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=K0(this.serializer),r.addTarget=function(o,s){let a;const l=s.target;if(a=U0(l)?{documents:qN(o,l)}:{query:HN(o,l).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=N_(o,s.resumeToken);const d=H0(o,s.expectedCount);d!==null&&(a.expectedCount=d)}else if(s.snapshotVersion.compareTo(Rr.min())>0){a.readTime=cm(o,s.snapshotVersion.toTimestamp());const d=H0(o,s.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);const n=GN(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=K0(this.serializer),r.removeTarget=e,this.q_(r)}}class FR extends U_{constructor(e,r,n,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return _n(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_n(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){_n(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=UN(e.writeResults,e.commitTime),n=xa(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=K0(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>zN(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{}class OR extends MR{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Jt(Ct.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,W0(r,n),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Jt(Ct.UNKNOWN,o.toString())})}Ho(e,r,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,W0(r,n),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Jt(Ct.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class BR{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(sl(r),this.aa=!1):sr("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd="RemoteStore";class jR{constructor(e,r,n,i,o){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{n.enqueueAndForget(async()=>{kd(this)&&(sr(xd,"Restarting streams for network reachability change."),await async function(l){const d=Br(l);d.Ea.add(4),await Hp(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Qm(d)}(this))})}),this.Ra=new BR(n,i)}}async function Qm(t){if(kd(t))for(const e of t.da)await e(!0)}async function Hp(t){for(const e of t.da)await e(!1)}function q_(t,e){const r=Br(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),_b(r)?Cb(r):Wu(r).O_()&&wb(r,e))}function Sb(t,e){const r=Br(t),n=Wu(r);r.Ia.delete(e),n.O_()&&H_(r,e),r.Ia.size===0&&(n.O_()?n.L_():kd(r)&&r.Ra.set("Unknown"))}function wb(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Rr.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Wu(t).Y_(e)}function H_(t,e){t.Va.Ue(e),Wu(t).Z_(e)}function Cb(t){t.Va=new LN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Wu(t).start(),t.Ra.ua()}function _b(t){return kd(t)&&!Wu(t).x_()&&t.Ia.size>0}function kd(t){return Br(t).Ea.size===0}function W_(t){t.Va=void 0}async function VR(t){t.Ra.set("Online")}async function zR(t){t.Ia.forEach((e,r)=>{wb(t,e)})}async function UR(t,e){W_(t),_b(t)?(t.Ra.ha(e),Cb(t)):t.Ra.set("Unknown")}async function qR(t,e,r){if(t.Ra.set("Online"),e instanceof I_&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(n){sr(xd,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await um(t,n)}else if(e instanceof Ty?t.Va.Ze(e):e instanceof T_?t.Va.st(e):t.Va.tt(e),!r.isEqual(Rr.min()))try{const n=await V_(t.localStore);r.compareTo(n)>=0&&await function(o,s){const a=o.Va.Tt(s);return a.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){const u=o.Ia.get(d);u&&o.Ia.set(d,u.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,d)=>{const u=o.Ia.get(l);if(!u)return;o.Ia.set(l,u.withResumeToken(Xi.EMPTY_BYTE_STRING,u.snapshotVersion)),H_(o,l);const h=new rc(u.target,l,d,u.sequenceNumber);wb(o,h)}),o.remoteSyncer.applyRemoteEvent(a)}(t,r)}catch(n){sr(xd,"Failed to raise snapshot:",n),await um(t,n)}}async function um(t,e,r){if(!Hu(e))throw e;t.Ea.add(1),await Hp(t),t.Ra.set("Offline"),r||(r=()=>V_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{sr(xd,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await Qm(t)})}function G_(t,e){return e().catch(r=>um(t,r,e))}async function eg(t){const e=Br(t),r=vc(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:lb;for(;HR(e);)try{const i=await AR(e.localStore,n);if(i===null){e.Ta.length===0&&r.L_();break}n=i.batchId,WR(e,i)}catch(i){await um(e,i)}K_(e)&&Y_(e)}function HR(t){return kd(t)&&t.Ta.length<10}function WR(t,e){t.Ta.push(e);const r=vc(t);r.O_()&&r.X_&&r.ea(e.mutations)}function K_(t){return kd(t)&&!vc(t).x_()&&t.Ta.length>0}function Y_(t){vc(t).start()}async function GR(t){vc(t).ra()}async function KR(t){const e=vc(t);for(const r of t.Ta)e.ea(r.mutations)}async function YR(t,e,r){const n=t.Ta.shift(),i=yb.from(n,e,r);await G_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await eg(t)}async function XR(t,e){e&&vc(t).X_&&await async function(n,i){if(function(s){return NN(s)&&s!==Ct.ABORTED}(i.code)){const o=n.Ta.shift();vc(n).B_(),await G_(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i)),await eg(n)}}(t,e),K_(t)&&Y_(t)}async function kP(t,e){const r=Br(t);r.asyncQueue.verifyOperationInProgress(),sr(xd,"RemoteStore received new credentials");const n=kd(r);r.Ea.add(3),await Hp(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await Qm(r)}async function ZR(t,e){const r=Br(t);e?(r.Ea.delete(2),await Qm(r)):e||(r.Ea.add(2),await Hp(r),r.Ra.set("Unknown"))}function Wu(t){return t.ma||(t.ma=function(r,n,i){const o=Br(r);return o.sa(),new $R(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:VR.bind(null,t),t_:zR.bind(null,t),r_:UR.bind(null,t),H_:qR.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),_b(t)?Cb(t):t.Ra.set("Unknown")):(await t.ma.stop(),W_(t))})),t.ma}function vc(t){return t.fa||(t.fa=function(r,n,i){const o=Br(r);return o.sa(),new FR(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:GR.bind(null,t),r_:XR.bind(null,t),ta:KR.bind(null,t),na:YR.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await eg(t)):(await t.fa.stop(),t.Ta.length>0&&(sr(xd,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e,r,n,i,o){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=o,this.deferred=new el,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,o){const s=Date.now()+n,a=new Ab(e,r,s,i,o);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Jt(Ct.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kb(t,e){if(sl("AsyncQueue",`${e}: ${t}`),Hu(t))return new Jt(Ct.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{static emptySet(e){return new _u(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||hr.comparator(r.key,n.key):(r,n)=>hr.comparator(r.key,n.key),this.keyedMap=Mh(),this.sortedSet=new ti(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof _u)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=n.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new _u;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(){this.ga=new ti(hr.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):Sr(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class Mu{constructor(e,r,n,i,o,s,a,l,d){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(e,r,n,i,o){const s=[];return r.forEach(a=>{s.push({type:0,doc:a})}),new Mu(e,r,_u.emptySet(r),s,n,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class QR{constructor(){this.queries=TP(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const i=Br(r),o=i.queries;i.queries=TP(),o.forEach((s,a)=>{for(const l of a.Sa)l.onError(n)})})(this,new Jt(Ct.ABORTED,"Firestore shutting down"))}}function TP(){return new Ad(t=>y_(t),Gm)}async function X_(t,e){const r=Br(t);let n=3;const i=e.query;let o=r.queries.get(i);o?!o.ba()&&e.Da()&&(n=2):(o=new JR,n=e.Da()?0:1);try{switch(n){case 0:o.wa=await r.onListen(i,!0);break;case 1:o.wa=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(s){const a=kb(s,`Initialization of query '${hu(e.query)}' failed`);return void e.onError(a)}r.queries.set(i,o),o.Sa.push(e),e.va(r.onlineState),o.wa&&e.Fa(o.wa)&&Eb(r)}async function Z_(t,e){const r=Br(t),n=e.query;let i=3;const o=r.queries.get(n);if(o){const s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function e7(t,e){const r=Br(t);let n=!1;for(const i of e){const o=i.query,s=r.queries.get(o);if(s){for(const a of s.Sa)a.Fa(i)&&(n=!0);s.wa=i}}n&&Eb(r)}function t7(t,e,r){const n=Br(t),i=n.queries.get(e);if(i)for(const o of i.Sa)o.onError(r);n.queries.delete(e)}function Eb(t){t.Ca.forEach(e=>{e.next()})}var Z0,IP;(IP=Z0||(Z0={})).Ma="default",IP.Cache="cache";class J_{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Mu(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=Mu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Z0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e){this.key=e}}class eA{constructor(e){this.key=e}}class r7{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=rn(),this.mutatedKeys=rn(),this.eu=m_(e),this.tu=new _u(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new EP,i=r?r.tu:this.tu;let o=r?r.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const f=i.get(u),p=Km(this.query,h)?h:null,m=!!f&&this.mutatedKeys.has(f.key),x=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let P=!1;f&&p?f.data.isEqual(p.data)?m!==x&&(n.track({type:3,doc:p}),P=!0):this.su(f,p)||(n.track({type:2,doc:p}),P=!0,(l&&this.eu(p,l)>0||d&&this.eu(p,d)<0)&&(a=!0)):!f&&p?(n.track({type:0,doc:p}),P=!0):f&&!p&&(n.track({type:1,doc:f}),P=!0,(l||d)&&(a=!0)),P&&(p?(s=s.add(p),o=x?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),n.track({type:1,doc:u})}return{tu:s,iu:n,Cs:a,mutatedKeys:o}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((u,h)=>function(p,m){const x=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Sr(20277,{Rt:P})}};return x(p)-x(m)}(u.type,h.type)||this.eu(u.doc,h.doc)),this.ou(n),i=i??!1;const a=r&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,d=l!==this.Za;return this.Za=l,s.length!==0||d?{snapshot:new Mu(this.query,e.tu,o,s,e.mutatedKeys,l===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new EP,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=rn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new eA(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new Q_(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=rn();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return Mu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Tb="SyncEngine";class n7{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class i7{constructor(e){this.key=e,this.hu=!1}}class o7{constructor(e,r,n,i,o,s){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Ad(a=>y_(a),Gm),this.Iu=new Map,this.Eu=new Set,this.du=new ti(hr.comparator),this.Au=new Map,this.Ru=new vb,this.Vu={},this.mu=new Map,this.fu=Fu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function s7(t,e,r=!0){const n=sA(t);let i;const o=n.Tu.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await tA(n,e,r,!0),i}async function a7(t,e){const r=sA(t);await tA(r,e,!0,!1)}async function tA(t,e,r,n){const i=await kR(t.localStore,ba(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,r);let a;return n&&(a=await l7(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&r&&q_(t.remoteStore,i),a}async function l7(t,e,r,n,i){t.pu=(h,f,p)=>async function(x,P,g,F){let V=P.view.ru(g);V.Cs&&(V=await SP(x.localStore,P.query,!1).then(({documents:C})=>P.view.ru(C,V)));const N=F&&F.targetChanges.get(P.targetId),R=F&&F.targetMismatches.get(P.targetId)!=null,M=P.view.applyChanges(V,x.isPrimaryClient,N,R);return RP(x,P.targetId,M.au),M.snapshot}(t,h,f,p);const o=await SP(t.localStore,e,!0),s=new r7(e,o.Qs),a=s.ru(o.documents),l=qp.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),d=s.applyChanges(a,t.isPrimaryClient,l);RP(t,r,d.au);const u=new n7(e,r,s);return t.Tu.set(e,u),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),d.snapshot}async function c7(t,e,r){const n=Br(t),i=n.Tu.get(e),o=n.Iu.get(i.targetId);if(o.length>1)return n.Iu.set(i.targetId,o.filter(s=>!Gm(s,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Y0(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&Sb(n.remoteStore,i.targetId),J0(n,i.targetId)}).catch(qu)):(J0(n,i.targetId),await Y0(n.localStore,i.targetId,!0))}async function d7(t,e){const r=Br(t),n=r.Tu.get(e),i=r.Iu.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Sb(r.remoteStore,n.targetId))}async function u7(t,e,r){const n=v7(t);try{const i=await function(s,a){const l=Br(s),d=In.now(),u=a.reduce((p,m)=>p.add(m.key),rn());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=ll(),x=rn();return l.Ns.getEntries(p,u).next(P=>{m=P,m.forEach((g,F)=>{F.isValidDocument()||(x=x.add(g))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,m)).next(P=>{h=P;const g=[];for(const F of a){const V=AN(F,h.get(F.key).overlayedDocument);V!=null&&g.push(new kc(F.key,V,l_(V.value.mapValue),Pa.exists(!0)))}return l.mutationQueue.addMutationBatch(p,d,g,a)}).next(P=>{f=P;const g=P.applyToLocalDocumentSet(h,x);return l.documentOverlayCache.saveOverlays(p,P.batchId,g)})}).then(()=>({batchId:f.batchId,changes:v_(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let d=s.Vu[s.currentUser.toKey()];d||(d=new ti(tn)),d=d.insert(a,l),s.Vu[s.currentUser.toKey()]=d}(n,i.batchId,r),await Wp(n,i.changes),await eg(n.remoteStore)}catch(i){const o=kb(i,"Failed to persist write");r.reject(o)}}async function rA(t,e){const r=Br(t);try{const n=await CR(r.localStore,e);e.targetChanges.forEach((i,o)=>{const s=r.Au.get(o);s&&(_n(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?_n(s.hu,14607):i.removedDocuments.size>0&&(_n(s.hu,42227),s.hu=!1))}),await Wp(r,n,e)}catch(n){await qu(n)}}function NP(t,e,r){const n=Br(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Tu.forEach((o,s)=>{const a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=Br(s);l.onlineState=a;let d=!1;l.queries.forEach((u,h)=>{for(const f of h.Sa)f.va(a)&&(d=!0)}),d&&Eb(l)}(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function h7(t,e,r){const n=Br(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Au.get(e),o=i&&i.key;if(o){let s=new ti(hr.comparator);s=s.insert(o,lo.newNoDocument(o,Rr.min()));const a=rn().add(o),l=new Zm(Rr.min(),new Map,new ti(tn),s,a);await rA(n,l),n.du=n.du.remove(o),n.Au.delete(e),Ib(n)}else await Y0(n.localStore,e,!1).then(()=>J0(n,e,r)).catch(qu)}async function p7(t,e){const r=Br(t),n=e.batch.batchId;try{const i=await wR(r.localStore,e);iA(r,n,null),nA(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Wp(r,i)}catch(i){await qu(i)}}async function f7(t,e,r){const n=Br(t);try{const i=await function(s,a){const l=Br(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let u;return l.mutationQueue.lookupMutationBatch(d,a).next(h=>(_n(h!==null,37113),u=h.keys(),l.mutationQueue.removeMutationBatch(d,h))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,u)).next(()=>l.localDocuments.getDocuments(d,u))})}(n.localStore,e);iA(n,e,r),nA(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Wp(n,i)}catch(i){await qu(i)}}function nA(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function iA(t,e,r){const n=Br(t);let i=n.Vu[n.currentUser.toKey()];if(i){const o=i.get(e);o&&(r?o.reject(r):o.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function J0(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||oA(t,n)})}function oA(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(Sb(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),Ib(t))}function RP(t,e,r){for(const n of r)n instanceof Q_?(t.Ru.addReference(n.key,e),y7(t,n)):n instanceof eA?(sr(Tb,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||oA(t,n.key)):Sr(19791,{wu:n})}function y7(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(sr(Tb,"New document in limbo: "+r),t.Eu.add(n),Ib(t))}function Ib(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new hr(Vn.fromString(e)),n=t.fu.next();t.Au.set(n,new i7(r)),t.du=t.du.insert(r,n),q_(t.remoteStore,new rc(ba(hb(r.path)),n,"TargetPurposeLimboResolution",Um.ce))}}async function Wp(t,e,r){const n=Br(t),i=[],o=[],s=[];n.Tu.isEmpty()||(n.Tu.forEach((a,l)=>{s.push(n.pu(l,e,r).then(d=>{if((d||r)&&n.isPrimaryClient){const u=d?!d.fromCache:r?.targetChanges.get(l.targetId)?.current;n.sharedClientState.updateQueryState(l.targetId,u?"current":"not-current")}if(d){i.push(d);const u=Pb.As(l.targetId,d);o.push(u)}}))}),await Promise.all(s),n.Pu.H_(i),await async function(l,d){const u=Br(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Rt.forEach(d,f=>Rt.forEach(f.Es,p=>u.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>Rt.forEach(f.ds,p=>u.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!Hu(h))throw h;sr(xb,"Failed to update sequence numbers: "+h)}for(const h of d){const f=h.targetId;if(!h.fromCache){const p=u.Ms.get(f),m=p.snapshotVersion,x=p.withLastLimboFreeSnapshotVersion(m);u.Ms=u.Ms.insert(f,x)}}}(n.localStore,o))}async function m7(t,e){const r=Br(t);if(!r.currentUser.isEqual(e)){sr(Tb,"User change. New user:",e.toKey());const n=await j_(r.localStore,e);r.currentUser=e,function(o,s){o.mu.forEach(a=>{a.forEach(l=>{l.reject(new Jt(Ct.CANCELLED,s))})}),o.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Wp(r,n.Ls)}}function g7(t,e){const r=Br(t),n=r.Au.get(e);if(n&&n.hu)return rn().add(n.key);{let i=rn();const o=r.Iu.get(e);if(!o)return i;for(const s of o){const a=r.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function sA(t){const e=Br(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=g7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=h7.bind(null,e),e.Pu.H_=e7.bind(null,e.eventManager),e.Pu.yu=t7.bind(null,e.eventManager),e}function v7(t){const e=Br(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=p7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f7.bind(null,e),e}class hm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return SR(this.persistence,new bR,e.initialUser,this.serializer)}Cu(e){return new B_(bb.mi,this.serializer)}Du(e){return new TR}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hm.provider={build:()=>new hm};class b7 extends hm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){_n(this.persistence.referenceDelegate instanceof dm,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new iR(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Fo.withCacheSize(this.cacheSizeBytes):Fo.DEFAULT;return new B_(n=>dm.mi(n,r),this.serializer)}}class Q0{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>NP(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=m7.bind(null,this.syncEngine),await ZR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new QR}()}createDatastore(e){const r=Jm(e.databaseInfo.databaseId),n=function(o){return new LR(o)}(e.databaseInfo);return function(o,s,a,l){return new OR(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,o,s,a){return new jR(n,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,r=>NP(this.syncEngine,r,0),function(){return _P.v()?new _P:new IR}())}createSyncEngine(e,r){return function(i,o,s,a,l,d,u){const h=new o7(i,o,s,a,l,d);return u&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){await async function(r){const n=Br(r);sr(xd,"RemoteStore shutting down."),n.Ea.add(5),await Hp(n),n.Aa.shutdown(),n.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Q0.provider={build:()=>new Q0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):sl("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc="FirestoreClient";class P7{constructor(e,r,n,i,o){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=ao.UNAUTHENTICATED,this.clientId=ab.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,async s=>{sr(bc,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(n,s=>(sr(bc,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new el;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=kb(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function hv(t,e){t.asyncQueue.verifyOperationInProgress(),sr(bc,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await j_(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function DP(t,e){t.asyncQueue.verifyOperationInProgress();const r=await x7(t);sr(bc,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>kP(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>kP(e.remoteStore,i)),t._onlineComponents=e}async function x7(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){sr(bc,"Using user provided OfflineComponentProvider");try{await hv(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(i){return i.name==="FirebaseError"?i.code===Ct.FAILED_PRECONDITION||i.code===Ct.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(r))throw r;Nu("Error using user provided cache. Falling back to memory cache: "+r),await hv(t,new hm)}}else sr(bc,"Using default OfflineComponentProvider"),await hv(t,new b7(void 0));return t._offlineComponents}async function lA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(sr(bc,"Using user provided OnlineComponentProvider"),await DP(t,t._uninitializedComponentsProvider._online)):(sr(bc,"Using default OnlineComponentProvider"),await DP(t,new Q0))),t._onlineComponents}function S7(t){return lA(t).then(e=>e.syncEngine)}async function cA(t){const e=await lA(t),r=e.eventManager;return r.onListen=s7.bind(null,e.syncEngine),r.onUnlisten=c7.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=a7.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=d7.bind(null,e.syncEngine),r}function w7(t,e,r={}){const n=new el;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,d){const u=new aA({next:f=>{u.Nu(),s.enqueueAndForget(()=>Z_(o,h));const p=f.docs.has(a);!p&&f.fromCache?d.reject(new Jt(Ct.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?d.reject(new Jt(Ct.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(f)},error:f=>d.reject(f)}),h=new J_(hb(a.path),u,{includeMetadataChanges:!0,qa:!0});return X_(o,h)}(await cA(t),t.asyncQueue,e,r,n)),n.promise}function C7(t,e,r={}){const n=new el;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,d){const u=new aA({next:f=>{u.Nu(),s.enqueueAndForget(()=>Z_(o,h)),f.fromCache&&l.source==="server"?d.reject(new Jt(Ct.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(f)},error:f=>d.reject(f)}),h=new J_(a,u,{includeMetadataChanges:!0,qa:!0});return X_(o,h)}(await cA(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA="firestore.googleapis.com",$P=!0;class FP{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Jt(Ct.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uA,this.ssl=$P}else this.host=e.host,this.ssl=e.ssl??$P;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=O_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rR)throw new Jt(Ct.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}B8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dA(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Jt(Ct.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Jt(Ct.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Jt(Ct.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tg{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FP({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Jt(Ct.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Jt(Ct.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FP(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new T8;switch(n.type){case"firstParty":return new D8(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Jt(Ct.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=LP.get(r);n&&(sr("ComponentProvider","Removing Datastore"),LP.delete(r),n.terminate())}(this),Promise.resolve()}}function _7(t,e,r,n={}){t=al(t,tg);const i=_c(e),o=t._getSettings(),s={...o,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${r}`;i&&(H1(`https://${a}`),W1("Firestore",!0)),o.host!==uA&&o.host!==a&&Nu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...o,host:a,ssl:i,emulatorOptions:n};if(!gd(l,s)&&(t._setSettings(l),n.mockUserToken)){let d,u;if(typeof n.mockUserToken=="string")d=n.mockUserToken,u=ao.MOCK_USER;else{d=nC(n.mockUserToken,t._app?.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new Jt(Ct.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ao(h)}t._authCredentials=new I8(new XC(d,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new pl(this.firestore,e,this._query)}}class pi{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pi(this.firestore,e,this._key)}toJSON(){return{type:pi._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(zp(r,pi._jsonSchema))return new pi(e,n||null,new hr(Vn.fromString(r.referencePath)))}}pi._jsonSchemaVersion="firestore/documentReference/1.0",pi._jsonSchema={type:bi("string",pi._jsonSchemaVersion),referencePath:bi("string")};class cc extends pl{constructor(e,r,n){super(e,r,hb(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pi(this.firestore,null,new hr(e))}withConverter(e){return new cc(this.firestore,e,this._path)}}function Nb(t,e,...r){if(t=ei(t),ZC("collection","path",e),t instanceof tg){const n=Vn.fromString(e,...r);return X5(n),new cc(t,null,n)}{if(!(t instanceof pi||t instanceof cc))throw new Jt(Ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Vn.fromString(e,...r));return X5(n),new cc(t.firestore,null,n)}}function cl(t,e,...r){if(t=ei(t),arguments.length===1&&(e=ab.newId()),ZC("doc","path",e),t instanceof tg){const n=Vn.fromString(e,...r);return Y5(n),new pi(t,null,new hr(n))}{if(!(t instanceof pi||t instanceof cc))throw new Jt(Ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Vn.fromString(e,...r));return Y5(n),new pi(t.firestore,t instanceof cc?t.converter:null,new hr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP="AsyncQueue";class OP{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new z_(this,"async_queue_retry"),this._c=()=>{const n=uv();n&&sr(MP,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=uv();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=uv();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new el;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Hu(e))throw e;sr(MP,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,sl("INTERNAL UNHANDLED ERROR: ",BP(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const i=Ab.createAndSchedule(this,e,r,n,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&Sr(47125,{Pc:BP(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function BP(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Gp extends tg{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new OP,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new OP(e),this._firestoreClient=void 0,await e}}}function A7(t,e){const r=typeof t=="object"?t:Y1(),n=typeof t=="string"?t:nm,i=Om(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const o=eC("firestore");o&&_7(i,...o)}return i}function Rb(t){if(t._terminated)throw new Jt(Ct.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||k7(t),t._firestoreClient}function k7(t){const e=t._freezeSettings(),r=function(i,o,s,a){return new Z8(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,dA(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new P7(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ps(Xi.fromBase64String(e))}catch(r){throw new Jt(Ct.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Ps(Xi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ps._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zp(e,Ps._jsonSchema))return Ps.fromBase64String(e.bytes)}}Ps._jsonSchemaVersion="firestore/bytes/1.0",Ps._jsonSchema={type:bi("string",Ps._jsonSchemaVersion),bytes:bi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Jt(Ct.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Jt(Ct.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Jt(Ct.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return tn(this._lat,e._lat)||tn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Sa._jsonSchemaVersion}}static fromJSON(e){if(zp(e,Sa._jsonSchema))return new Sa(e.latitude,e.longitude)}}Sa._jsonSchemaVersion="firestore/geoPoint/1.0",Sa._jsonSchema={type:bi("string",Sa._jsonSchemaVersion),latitude:bi("number"),longitude:bi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:wa._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zp(e,wa._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new wa(e.vectorValues);throw new Jt(Ct.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wa._jsonSchemaVersion="firestore/vectorValue/1.0",wa._jsonSchema={type:bi("string",wa._jsonSchemaVersion),vectorValues:bi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E7=/^__.*__$/;class T7{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new kc(e,this.data,this.fieldMask,r,this.fieldTransforms):new Up(e,this.data,r,this.fieldTransforms)}}class hA{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new kc(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function pA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Sr(40011,{Ac:t})}}class Lb{constructor(e,r,n,i,o,s){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Lb({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const r=this.path?.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){const r=this.path?.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return pm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(pA(this.Ac)&&E7.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class I7{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Jm(e)}Cc(e,r,n,i=!1){return new Lb({Ac:e,methodName:r,Dc:n,path:Wi.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ng(t){const e=t._freezeSettings(),r=Jm(t._databaseId);return new I7(t._databaseId,!!e.ignoreUndefinedProperties,r)}function N7(t,e,r,n,i,o={}){const s=t.Cc(o.merge||o.mergeFields?2:0,e,r,i);$b("Data must be an object, but it was:",s,n);const a=yA(n,s);let l,d;if(o.merge)l=new Zo(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){const u=[];for(const h of o.mergeFields){const f=e1(e,h,r);if(!s.contains(f))throw new Jt(Ct.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);gA(u,f)||u.push(f)}l=new Zo(u),d=s.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,d=s.fieldTransforms;return new T7(new Oo(a),l,d)}class ig extends Db{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ig}}function R7(t,e,r,n){const i=t.Cc(1,e,r);$b("Data must be an object, but it was:",i,n);const o=[],s=Oo.empty();Ac(n,(l,d)=>{const u=Fb(e,l,r);d=ei(d);const h=i.yc(u);if(d instanceof ig)o.push(u);else{const f=Kp(d,h);f!=null&&(o.push(u),s.set(u,f))}});const a=new Zo(o);return new hA(s,a,i.fieldTransforms)}function D7(t,e,r,n,i,o){const s=t.Cc(1,e,r),a=[e1(e,n,r)],l=[i];if(o.length%2!=0)throw new Jt(Ct.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<o.length;f+=2)a.push(e1(e,o[f])),l.push(o[f+1]);const d=[],u=Oo.empty();for(let f=a.length-1;f>=0;--f)if(!gA(d,a[f])){const p=a[f];let m=l[f];m=ei(m);const x=s.yc(p);if(m instanceof ig)d.push(p);else{const P=Kp(m,x);P!=null&&(d.push(p),u.set(p,P))}}const h=new Zo(d);return new hA(u,h,s.fieldTransforms)}function fA(t,e,r,n=!1){return Kp(r,t.Cc(n?4:3,e))}function Kp(t,e){if(mA(t=ei(t)))return $b("Unsupported field value:",e,t),yA(t,e);if(t instanceof Db)return function(n,i){if(!pA(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,i){const o=[];let s=0;for(const a of n){let l=Kp(a,i.wc(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(n,i){if((n=ei(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return PN(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=In.fromDate(n);return{timestampValue:cm(i.serializer,o)}}if(n instanceof In){const o=new In(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:cm(i.serializer,o)}}if(n instanceof Sa)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ps)return{bytesValue:N_(i.serializer,n._byteString)};if(n instanceof pi){const o=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:gb(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof wa)return function(s,a){return{mapValue:{fields:{[s_]:{stringValue:a_},[im]:{arrayValue:{values:s.toArray().map(d=>{if(typeof d!="number")throw a.Sc("VectorValues must only contain numeric values.");return fb(a.serializer,d)})}}}}}}(n,i);throw i.Sc(`Unsupported field value: ${zm(n)}`)}(t,e)}function yA(t,e){const r={};return e_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ac(t,(n,i)=>{const o=Kp(i,e.mc(n));o!=null&&(r[n]=o)}),{mapValue:{fields:r}}}function mA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof In||t instanceof Sa||t instanceof Ps||t instanceof pi||t instanceof Db||t instanceof wa)}function $b(t,e,r){if(!mA(r)||!JC(r)){const n=zm(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function e1(t,e,r){if((e=ei(e))instanceof rg)return e._internalPath;if(typeof e=="string")return Fb(t,e);throw pm("Field path arguments must be of type string or ",t,!1,void 0,r)}const L7=new RegExp("[~\\*/\\[\\]]");function Fb(t,e,r){if(e.search(L7)>=0)throw pm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new rg(...e.split("."))._internalPath}catch{throw pm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function pm(t,e,r,n,i){const o=n&&!n.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${n}`),s&&(l+=` in document ${i}`),l+=")"),new Jt(Ct.INVALID_ARGUMENT,a+t+l)}function gA(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,r,n,i,o){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new pi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(og("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class $7 extends Mb{data(){return super.data()}}function og(t,e){return typeof e=="string"?Fb(t,e):e instanceof rg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Jt(Ct.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ob{}class sg extends Ob{}function Bb(t,e,...r){let n=[];e instanceof Ob&&n.push(e),n=n.concat(r),function(o){const s=o.filter(l=>l instanceof jb).length,a=o.filter(l=>l instanceof ag).length;if(s>1||s>0&&a>0)throw new Jt(Ct.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class ag extends sg{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new ag(e,r,n)}_apply(e){const r=this._parse(e);return bA(e._query,r),new pl(e.firestore,e.converter,q0(e._query,r))}_parse(e){const r=ng(e.firestore);return function(o,s,a,l,d,u,h){let f;if(d.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Jt(Ct.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){VP(h,u);const m=[];for(const x of h)m.push(jP(l,o,x));f={arrayValue:{values:m}}}else f=jP(l,o,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||VP(h,u),f=fA(a,s,h,u==="in"||u==="not-in");return vi.create(d,u,f)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function gu(t,e,r){const n=e,i=og("where",t);return ag._create(i,n,r)}class jb extends Ob{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new jb(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Js.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const l of a)bA(s,l),s=q0(s,l)}(e._query,r),new pl(e.firestore,e.converter,q0(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vb extends sg{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Vb(e,r)}_apply(e){const r=function(i,o,s){if(i.startAt!==null)throw new Jt(Ct.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Jt(Ct.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Cp(o,s)}(e._query,this._field,this._direction);return new pl(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new _d(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function vA(t,e="asc"){const r=e,n=og("orderBy",t);return Vb._create(n,r)}class zb extends sg{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new zb(e,r,n)}_apply(e){return new pl(e.firestore,e.converter,sm(e._query,this._limit,this._limitType))}}function M7(t){return j8("limit",t),zb._create("limit",t,"F")}class Ub extends sg{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new Ub(e,r,n)}_apply(e){const r=B7(e,this.type,this._docOrFields,this._inclusive);return new pl(e.firestore,e.converter,function(i,o){return new _d(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,r))}}function O7(...t){return Ub._create("startAfter",t,!1)}function B7(t,e,r,n){if(r[0]=ei(r[0]),r[0]instanceof Mb)return function(o,s,a,l,d){if(!l)throw new Jt(Ct.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const h of Cu(o))if(h.field.isKeyField())u.push(om(s,l.key));else{const f=l.data.field(h.field);if(Hm(f))throw new Jt(Ct.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const p=h.field.canonicalString();throw new Jt(Ct.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}u.push(f)}return new $u(u,d)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const i=ng(t.firestore);return function(s,a,l,d,u,h){const f=s.explicitOrderBy;if(u.length>f.length)throw new Jt(Ct.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let m=0;m<u.length;m++){const x=u[m];if(f[m].field.isKeyField()){if(typeof x!="string")throw new Jt(Ct.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof x}`);if(!pb(s)&&x.indexOf("/")!==-1)throw new Jt(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${x}' contains a slash.`);const P=s.path.child(Vn.fromString(x));if(!hr.isDocumentKey(P))throw new Jt(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);const g=new hr(P);p.push(om(a,g))}else{const P=fA(l,d,x);p.push(P)}}return new $u(p,h)}(t._query,t.firestore._databaseId,i,e,r,n)}}function jP(t,e,r){if(typeof(r=ei(r))=="string"){if(r==="")throw new Jt(Ct.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pb(e)&&r.indexOf("/")!==-1)throw new Jt(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Vn.fromString(r));if(!hr.isDocumentKey(n))throw new Jt(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return om(t,new hr(n))}if(r instanceof pi)return om(t,r._key);throw new Jt(Ct.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zm(r)}.`)}function VP(t,e){if(!Array.isArray(t)||t.length===0)throw new Jt(Ct.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bA(t,e){const r=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Jt(Ct.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Jt(Ct.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class j7{convertValue(e,r="none"){switch(gc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ci(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(mc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Sr(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Ac(e,(i,o)=>{n[i]=this.convertValue(o,r)}),n}convertVectorValue(e){const r=e.fields?.[im].arrayValue?.values?.map(n=>ci(n.doubleValue));return new wa(r)}convertGeoPoint(e){return new Sa(ci(e.latitude),ci(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Wm(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(xp(e));default:return null}}convertTimestamp(e){const r=yc(e);return new In(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Vn.fromString(e);_n(M_(n),9688,{name:e});const i=new Sp(n.get(1),n.get(3)),o=new hr(n.popFirst(5));return i.isEqual(r)||sl(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V7(t,e,r){let n;return n=t?t.toFirestore(e):e,n}class Bh{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ud extends Mb{constructor(e,r,n,i,o,s){super(e,r,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Iy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(og("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Jt(Ct.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=ud._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}ud._jsonSchemaVersion="firestore/documentSnapshot/1.0",ud._jsonSchema={type:bi("string",ud._jsonSchemaVersion),bundleSource:bi("string","DocumentSnapshot"),bundleName:bi("string"),bundle:bi("string")};class Iy extends ud{data(e={}){return super.data(e)}}class Au{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Bh(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Iy(this._firestore,this._userDataWriter,n.key,n,new Bh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Jt(Ct.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const l=new Iy(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Bh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const l=new Iy(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Bh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,u=-1;return a.type!==0&&(d=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:z7(a.type),doc:l,oldIndex:d,newIndex:u}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Jt(Ct.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Au._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ab.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(r.push(o._document),n.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function z7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Sr(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(t){t=al(t,pi);const e=al(t.firestore,Gp);return w7(Rb(e),t._key).then(r=>U7(e,t,r))}Au._jsonSchemaVersion="firestore/querySnapshot/1.0",Au._jsonSchema={type:bi("string",Au._jsonSchemaVersion),bundleSource:bi("string","QuerySnapshot"),bundleName:bi("string"),bundle:bi("string")};class PA extends j7{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ps(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new pi(this.firestore,null,r)}}function Hb(t){t=al(t,pl);const e=al(t.firestore,Gp),r=Rb(e),n=new PA(e);return F7(t._query),C7(r,t._query).then(i=>new Au(e,n,t,i))}function Wb(t,e,r){t=al(t,pi);const n=al(t.firestore,Gp),i=V7(t.converter,e);return xA(n,[N7(ng(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,Pa.none())])}function Yp(t,e,r,...n){t=al(t,pi);const i=al(t.firestore,Gp),o=ng(i);let s;return s=typeof(e=ei(e))=="string"||e instanceof rg?D7(o,"updateDoc",t._key,e,r,n):R7(o,"updateDoc",t._key,e),xA(i,[s.toMutation(t._key,Pa.exists(!0))])}function xA(t,e){return function(n,i){const o=new el;return n.asyncQueue.enqueueAndForget(async()=>u7(await S7(n),i,o)),o.promise}(Rb(t),e)}function U7(t,e,r){const n=r.docs.get(e._key),i=new PA(t);return new ud(t,i,e._key,n,new Bh(r.hasPendingWrites,r.fromCache),e.converter)}(function(e,r=!0){(function(i){Uu=i})(wd),vd(new pc("firestore",(n,{instanceIdentifier:i,options:o})=>{const s=n.getProvider("app").getImmediate(),a=new Gp(new N8(n.getProvider("auth-internal")),new L8(s,n.getProvider("app-check-internal")),function(d,u){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Jt(Ct.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sp(d.options.projectId,u)}(s,i),s);return o={useFetchStreams:r,...o},a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ga(H5,W5,e),ga(H5,W5,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="firebasestorage.googleapis.com",wA="storageBucket",q7=2*60*1e3,H7=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si extends Ia{constructor(e,r,n=0){super(pv(e),`Firebase Storage: ${r} (${pv(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,si.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return pv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var oi;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(oi||(oi={}));function pv(t){return"storage/"+t}function Gb(){const t="An unknown error occurred, please check the error payload for server response.";return new si(oi.UNKNOWN,t)}function W7(t){return new si(oi.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function G7(t){return new si(oi.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function K7(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new si(oi.UNAUTHENTICATED,t)}function Y7(){return new si(oi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function X7(t){return new si(oi.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Z7(){return new si(oi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function J7(){return new si(oi.CANCELED,"User canceled the upload/download.")}function Q7(t){return new si(oi.INVALID_URL,"Invalid URL '"+t+"'.")}function eD(t){return new si(oi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function tD(){return new si(oi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+wA+"' property when initializing the app?")}function rD(){return new si(oi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function nD(){return new si(oi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function iD(t){return new si(oi.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function t1(t){return new si(oi.INVALID_ARGUMENT,t)}function CA(){return new si(oi.APP_DELETED,"The Firebase app was deleted.")}function oD(t){return new si(oi.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function tp(t,e){return new si(oi.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function yh(t){throw new si(oi.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Jo.makeFromUrl(e,r)}catch{return new Jo(e,"")}if(n.path==="")return n;throw eD(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function o(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),l={bucket:1,path:3};function d(N){N.path_=decodeURIComponent(N.path)}const u="v[A-Za-z0-9_]+",h=r.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${u}/b/${i}/o${f}`,"i"),m={bucket:1,path:3},x=r===SA?"(?:storage.googleapis.com|storage.cloud.google.com)":r,P="([^?#]*)",g=new RegExp(`^https?://${x}/${i}/${P}`,"i"),V=[{regex:a,indices:l,postModify:o},{regex:p,indices:m,postModify:d},{regex:g,indices:{bucket:1,path:2},postModify:d}];for(let N=0;N<V.length;N++){const R=V[N],M=R.regex.exec(e);if(M){const C=M[R.indices.bucket];let k=M[R.indices.path];k||(k=""),n=new Jo(C,k),R.postModify(n);break}}if(n==null)throw Q7(e);return n}}class sD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(t,e,r){let n=1,i=null,o=null,s=!1,a=0;function l(){return a===2}let d=!1;function u(...P){d||(d=!0,e.apply(null,P))}function h(P){i=setTimeout(()=>{i=null,t(p,l())},P)}function f(){o&&clearTimeout(o)}function p(P,...g){if(d){f();return}if(P){f(),u.call(null,P,...g);return}if(l()||s){f(),u.call(null,P,...g);return}n<64&&(n*=2);let V;a===1?(a=2,V=0):V=(n+Math.random())*1e3,h(V)}let m=!1;function x(P){m||(m=!0,f(),!d&&(i!==null?(P||(a=2),clearTimeout(i),h(0)):P||(a=1)))}return h(0),o=setTimeout(()=>{s=!0,x(!0)},r),x}function lD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(t){return t!==void 0}function dD(t){return typeof t=="object"&&!Array.isArray(t)}function Kb(t){return typeof t=="string"||t instanceof String}function zP(t){return Yb()&&t instanceof Blob}function Yb(){return typeof Blob<"u"}function UP(t,e,r,n){if(n<e)throw t1(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw t1(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function _A(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}var hd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(hd||(hd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return r||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,r,n,i,o,s,a,l,d,u,h,f=!0,p=!1){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=l,this.timeout_=d,this.progressCallback_=u,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,x)=>{this.resolve_=m,this.reject_=x,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new $f(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{const l=a.loaded,d=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,d)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===hd.NO_ERROR,l=o.getStatus();if(!a||uD(l,this.additionalRetryCodes_)&&this.retry){const u=o.getErrorCode()===hd.ABORT;n(!1,new $f(!1,null,u));return}const d=this.successCodes_.indexOf(l)!==-1;n(!0,new $f(d,o))})},r=(n,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());cD(l)?o(l):o()}catch(l){s(l)}else if(a!==null){const l=Gb();l.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,l)):s(l)}else if(i.canceled){const l=this.appDelete_?CA():J7();s(l)}else{const l=Z7();s(l)}};this.canceled_?r(!1,new $f(!1,null,!0)):this.backoffId_=aD(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&lD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class $f{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function pD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function fD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function yD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function mD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function gD(t,e,r,n,i,o,s=!0,a=!1){const l=_A(t.urlParams),d=t.url+l,u=Object.assign({},t.headers);return yD(u,e),pD(u,r),fD(u,o),mD(u,n),new hD(d,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function bD(...t){const e=vD();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(Yb())return new Blob(t);throw new si(oi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function PD(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t){if(typeof atob>"u")throw iD("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class fv{constructor(e,r){this.data=e,this.contentType=r||null}}function AA(t,e){switch(t){case Ys.RAW:return new fv(kA(e));case Ys.BASE64:case Ys.BASE64URL:return new fv(EA(t,e));case Ys.DATA_URL:return new fv(wD(e),CD(e))}throw Gb()}function kA(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const o=n,s=t.charCodeAt(++r);n=65536|(o&1023)<<10|s&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function SD(t){let e;try{e=decodeURIComponent(t)}catch{throw tp(Ys.DATA_URL,"Malformed data URL.")}return kA(e)}function EA(t,e){switch(t){case Ys.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw tp(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ys.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw tp(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=xD(e)}catch(i){throw i.message.includes("polyfill")?i:tp(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}class TA{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw tp(Ys.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=_D(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function wD(t){const e=new TA(t);return e.base64?EA(Ys.BASE64,e.rest):SD(e.rest)}function CD(t){return new TA(t).contentType}function _D(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,r){let n=0,i="";zP(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,r){if(zP(this.data_)){const n=this.data_,i=PD(n,e,r);return i===null?null:new ec(i)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new ec(n,!0)}}static getBlob(...e){if(Yb()){const r=e.map(n=>n instanceof ec?n.data_:n);return new ec(bD.apply(null,r))}else{const r=e.map(s=>Kb(s)?AA(Ys.RAW,s).data:s.data_);let n=0;r.forEach(s=>{n+=s.byteLength});const i=new Uint8Array(n);let o=0;return r.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new ec(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(t){let e;try{e=JSON.parse(t)}catch{return null}return dD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function kD(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function NA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(t,e){return e}class vo{constructor(e,r,n,i){this.server=e,this.local=r||e,this.writable=!!n,this.xform=i||ED}}let Ff=null;function TD(t){return!Kb(t)||t.length<2?t:NA(t)}function Xb(){if(Ff)return Ff;const t=[];t.push(new vo("bucket")),t.push(new vo("generation")),t.push(new vo("metageneration")),t.push(new vo("name","fullPath",!0));function e(o,s){return TD(s)}const r=new vo("name");r.xform=e,t.push(r);function n(o,s){return s!==void 0?Number(s):s}const i=new vo("size");return i.xform=n,t.push(i),t.push(new vo("timeCreated")),t.push(new vo("updated")),t.push(new vo("md5Hash",null,!0)),t.push(new vo("cacheControl",null,!0)),t.push(new vo("contentDisposition",null,!0)),t.push(new vo("contentEncoding",null,!0)),t.push(new vo("contentLanguage",null,!0)),t.push(new vo("contentType",null,!0)),t.push(new vo("metadata","customMetadata",!0)),Ff=t,Ff}function ID(t,e){function r(){const n=t.bucket,i=t.fullPath,o=new Jo(n,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:r})}function ND(t,e,r){const n={};n.type="file";const i=r.length;for(let o=0;o<i;o++){const s=r[o];n[s.local]=s.xform(n,e[s.server])}return ID(n,t),n}function RA(t,e,r){const n=IA(e);return n===null?null:ND(t,n,r)}function RD(t,e,r,n){const i=IA(e);if(i===null||!Kb(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(d=>{const u=t.bucket,h=t.fullPath,f="/b/"+s(u)+"/o/"+s(h),p=lg(f,r,n),m=_A({alt:"media",token:d});return p+m})[0]}function DD(t,e){const r={},n=e.length;for(let i=0;i<n;i++){const o=e[i];o.writable&&(r[o.server]=t[o.local])}return JSON.stringify(r)}class Zb{constructor(e,r,n,i){this.url=e,this.method=r,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(t){if(!t)throw Gb()}function LA(t,e){function r(n,i){const o=RA(t,i,e);return DA(o!==null),o}return r}function LD(t,e){function r(n,i){const o=RA(t,i,e);return DA(o!==null),RD(o,i,t.host,t._protocol)}return r}function $A(t){function e(r,n){let i;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?i=Y7():i=K7():r.getStatus()===402?i=G7(t.bucket):r.getStatus()===403?i=X7(t.path):i=n,i.status=r.getStatus(),i.serverResponse=n.serverResponse,i}return e}function FA(t){const e=$A(t);function r(n,i){let o=e(n,i);return n.getStatus()===404&&(o=W7(t.path)),o.serverResponse=i.serverResponse,o}return r}function $D(t,e,r){const n=e.fullServerUrl(),i=lg(n,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new Zb(i,o,LA(t,r),s);return a.errorHandler=FA(e),a}function FD(t,e,r){const n=e.fullServerUrl(),i=lg(n,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new Zb(i,o,LD(t,r),s);return a.errorHandler=FA(e),a}function MD(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function OD(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=MD(null,e)),n}function BD(t,e,r,n,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let V="";for(let N=0;N<2;N++)V=V+Math.random().toString().slice(2);return V}const l=a();s["Content-Type"]="multipart/related; boundary="+l;const d=OD(e,n,i),u=DD(d,r),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+d.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=ec.getBlob(h,n,f);if(p===null)throw rD();const m={name:d.fullPath},x=lg(o,t.host,t._protocol),P="POST",g=t.maxUploadRetryTime,F=new Zb(x,P,LA(t,r),g);return F.urlParams=m,F.headers=s,F.body=p.uploadData(),F.errorHandler=$A(e),F}class jD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=hd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=hd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=hd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,i,o){if(this.sent_)throw yh("cannot .send() more than once");if(_c(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,e,!0),o!==void 0)for(const s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw yh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw yh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw yh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw yh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class VD extends jD{initXhr(){this.xhr_.responseType="text"}}function Jb(){return new VD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,r){this._service=e,r instanceof Jo?this._location=r:this._location=Jo.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Sd(e,r)}get root(){const e=new Jo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return NA(this._location.path)}get storage(){return this._service}get parent(){const e=AD(this._location.path);if(e===null)return null;const r=new Jo(this._location.bucket,e);return new Sd(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw oD(e)}}function zD(t,e,r){t._throwIfRoot("uploadBytes");const n=BD(t.storage,t._location,Xb(),new ec(e,!0),r);return t.storage.makeRequestWithTokens(n,Jb).then(i=>({metadata:i,ref:t}))}function UD(t,e,r=Ys.RAW,n){t._throwIfRoot("uploadString");const i=AA(r,e),o={...n};return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),zD(t,i.data,o)}function qD(t){t._throwIfRoot("getMetadata");const e=$D(t.storage,t._location,Xb());return t.storage.makeRequestWithTokens(e,Jb)}function HD(t){t._throwIfRoot("getDownloadURL");const e=FD(t.storage,t._location,Xb());return t.storage.makeRequestWithTokens(e,Jb).then(r=>{if(r===null)throw nD();return r})}function WD(t,e){const r=kD(t._location.path,e),n=new Jo(t._location.bucket,r);return new Sd(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(t){return/^[A-Za-z]+:\/\//.test(t)}function KD(t,e){return new Sd(t,e)}function MA(t,e){if(t instanceof Qb){const r=t;if(r._bucket==null)throw tD();const n=new Sd(r,r._bucket);return e!=null?MA(n,e):n}else return e!==void 0?WD(t,e):t}function YD(t,e){if(e&&GD(e)){if(t instanceof Qb)return KD(t,e);throw t1("To use ref(service, url), the first argument must be a Storage instance.")}else return MA(t,e)}function qP(t,e){const r=e?.[wA];return r==null?null:Jo.makeFromBucketSpec(r,t)}function XD(t,e,r,n={}){t.host=`${e}:${r}`;const i=_c(e);i&&(H1(`https://${t.host}/b`),W1("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:o}=n;o&&(t._overrideAuthToken=typeof o=="string"?o:nC(o,t.app.options.projectId))}class Qb{constructor(e,r,n,i,o,s=!1){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=SA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=q7,this._maxUploadRetryTime=H7,this._requests=new Set,i!=null?this._bucket=Jo.makeFromBucketSpec(i,this._host):this._bucket=qP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Jo.makeFromBucketSpec(this._url,e):this._bucket=qP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){UP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){UP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(Xo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Sd(this,e)}_makeRequest(e,r,n,i,o=!0){if(this._deleted)return new sD(CA());{const s=gD(e,this._appId,n,i,r,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const HP="@firebase/storage",WP="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="storage";function ZD(t,e,r,n){return t=ei(t),UD(t,e,r,n)}function JD(t){return t=ei(t),qD(t)}function QD(t){return t=ei(t),HD(t)}function BA(t,e){return t=ei(t),YD(t,e)}function eL(t=Y1(),e){t=ei(t);const n=Om(t,OA).getImmediate({identifier:e}),i=eC("storage");return i&&tL(n,...i),n}function tL(t,e,r,n={}){XD(t,e,r,n)}function rL(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Qb(r,n,i,e,wd)}function nL(){vd(new pc(OA,rL,"PUBLIC").setMultipleInstances(!0)),ga(HP,WP,""),ga(HP,WP,"esm2020")}nL();let iL="eyAiYXBpS2V5IjogIkFJemFTeUJBbGN2WlRMMXRsQ05LRExENEJpTWJhR01iTnhCRjQtTSIsICAiYXV0aERvbWFpbiI6ICJocm0tMTEyOC5maXJlYmFzZWFwcC5jb20iLCAgImRhdGFiYXNlVVJMIjogImh0dHBzOi8vaHJtLTExMjguZmlyZWJhc2Vpby5jb20iLCAgInByb2plY3RJZCI6ICJocm0tMTEyOCIsICAic3RvcmFnZUJ1Y2tldCI6ICJocm0tMTEyOC5hcHBzcG90LmNvbSIsICAibWVzc2FnaW5nU2VuZGVySWQiOiAiMTA0OTI1MDU4NTI0NSIsICAiYXBwSWQiOiAiMToxMDQ5MjUwNTg1MjQ1OndlYjowZGFkMDAyMDI3MjM1MTRjY2M1Mjc0In0=";const e2=sC(JSON.parse(qE(iL))),td=_8(e2),fm=new ya,ws=A7(e2),jA=eL(e2);fm.addScope("profile");fm.addScope("email");class jh extends Error{}jh.prototype.name="InvalidTokenError";function oL(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,r)=>{let n=r.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function sL(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return oL(e)}catch{return atob(e)}}function aL(t,e){if(typeof t!="string")throw new jh("Invalid token specified: must be a string");e||(e={});const r=e.header===!0?0:1,n=t.split(".")[r];if(typeof n!="string")throw new jh(`Invalid token specified: missing part #${r+1}`);let i;try{i=sL(n)}catch(o){throw new jh(`Invalid token specified: invalid base64 for part #${r+1} (${o.message})`)}try{return JSON.parse(i)}catch(o){throw new jh(`Invalid token specified: invalid json for part #${r+1} (${o.message})`)}}const lL={clientId:"195275085181-8ccjpgp8v1g80qhnlk6v4lpgid7n81gr.apps.googleusercontent.com"},cL=t=>{const e=document.createElement("script");e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.onload=()=>{window.google&&window.google.accounts.id.initialize({client_id:lL.clientId,callback:r=>{t(r.credential)},auto_select:!1,cancel_on_tap_outside:!0})},document.head.appendChild(e)},dL=t=>aL(t),uL=()=>{window.google&&window.google.accounts.id.disableAutoSelect()},[hL,pL]=Vu({}),fL=async()=>{const e=await Tn({query:"qcm42351987"});if(e&&!e.error){let n=Object.assign({},{},e);pL(n)}return 1},yL=async t=>{let e=hL?.[992002];e&&(e.params={tkn:t})},[Qd,oo]=Vu({user:null,loading:!0,error:null,authMethod:null}),[VA,GP]=Ae(null);h6(td,t=>{t?oo({user:t,loading:!1,error:null,authMethod:"firebase"}):VA()||oo({user:null,loading:!1,error:null,authMethod:null})});V6(td).then(t=>{t&&oo({user:t.user,loading:!1,error:null,authMethod:"firebase"})}).catch(t=>{console.error("Redirect sign-in error:",t),oo({loading:!1,error:t.message})});const Xt={get state(){return Qd},async getUserProfile(t){try{const e=cl(ws,"users",t),r=await qb(e);if(r.exists()){oo("profile",r.data());let n={stores:{YY_8802:!1,YY_8803:!1,YY_8804:!1,YY_8805:!1,YY_8816:!1,YY_8818:!1,YY_8847:!1,YY_3251:!1,YY_32:!1,YY_76:!1,YY_2376:!1,YY_79:!1,YY_8635:!1,YY_8665:!1,YY_8901:!1},AccountAccess:!1,BankingAccess:!1,InventoryAccess:!1,JournalAccess:!1,HBLAccess:!1,PassportAccess:!1,inventoryDownsection:!1,onlyRead:!1,read_write:!1},i=r.data(),o={};return Object.keys(n).map(s=>{let a=n?.[s];i.hasOwnProperty(s)||(o[s]=a)}),Object.keys(o).length>0&&Yp(e,o),r.data()}else{let n=Xt?.state?.user,i={uid:n?.uid,email:n?.email,displayName:n?.displayName,createdAt:new Date,stores:{YY_8802:!1,YY_8803:!1,YY_8804:!1,YY_8805:!1,YY_8816:!1,YY_8818:!1,YY_8847:!1,YY_3251:!1,YY_32:!1,YY_76:!1,YY_2376:!1,YY_79:!1,YY_8635:!1,YY_8665:!1,YY_8901:!1},AccountAccess:!1,BankingAccess:!1,InventoryAccess:!1,JournalAccess:!1,HBLAccess:!1,PassportAccess:!1,inventoryDownsection:!1,onlyRead:!1,read_write:!1};return await Wb(e,i),console.log("No such user profile!"),null}}catch(e){return console.error("Error fetching user profile:",e),null}},getBusinessId:()=>Xt.state?.profile?.businessId,hasPermission:t=>{const e=Xt.state?.profile;return e?.isAdmin?!0:e?e?.[t]===!0:!1},async signInWithGoogle(){try{oo("loading",!0),oo("error",null);try{const t=await D6(td,fm);oo({user:t.user,loading:!1,error:null,authMethod:"firebase"});try{Xt.getUserProfile(t.user.uid)}catch(e){console.error("firestore error:",e)}}catch(t){if(t.code==="auth/popup-blocked")await B6(td,fm);else throw t}}catch(t){console.error("Sign-in error:",t),oo({loading:!1,error:t.message||"Failed to sign in with Google"})}},async signInWithGoogleP(t){const r=await Tn({params:{id_token:t},query:"getGoogleUserbyToken"});if(r&&r){let n=new Date().getTime(),i=new Date(n+6e4*60*24*365),o="hrm_tkn_acc";document.cookie=`${o}=${r.data}; expires=${i}; path=/;g_state = {"i_l":1,"i_p":${i}}; ssgl_access_tkn = ${t}`,document.cookie=`ssgl_access_tkn = ${t}; expires=${i};`,await fL(),yL(r.data)}},async signInWithGoogleCloud(t){try{oo("loading",!0),oo("error",null);const e=dL(t),r={uid:e.sub,email:e.email,displayName:e.name,photoURL:e.picture};GP(r);const n={uid:r.uid,email:r.email,displayName:r.displayName,photoURL:r.photoURL,emailVerified:!0};oo({user:n,loading:!1,error:null,authMethod:"google-cloud"});try{const i=ya.credential(t);await c6(td,i)}catch{console.log("Firebase sign-in optional, continuing with Google Cloud auth")}}catch(e){console.error("Google Cloud sign-in error:",e),oo({loading:!1,error:e.message||"Failed to sign in with Google Cloud"})}},async signOut(){try{oo("loading",!0),(Qd.authMethod==="firebase"||td.currentUser)&&await p6(td),Qd.authMethod==="google-cloud"&&(uL(),GP(null)),oo({user:null,loading:!1,error:null,authMethod:null})}catch(t){console.error("Sign-out error:",t),oo({loading:!1,error:t.message||"Failed to sign out"})}},get isAuthenticated(){return!!Qd.user||!!VA()},get currentUser(){return Qd.user},get authMethod(){return Qd.authMethod}},mL=async()=>({}),gL=()=>(typeof window<"u"&&localStorage.getItem("hrmfinance-api-mode"),"real");let rd=gL();const r1={getMode(){return rd},setMode(t){rd=t,typeof window<"u"&&localStorage.setItem("hrmfinance-api-mode",t)},isFakeMode(){return rd==="fake"},isRealMode(){return rd==="real"},isHybridMode(){return rd==="hybrid"}},Hn=async(t,e,r=!0)=>{if(rd==="fake")return e();if(rd==="real")return t();try{return await t()}catch(n){if(console.warn("Real API failed, falling back to fake server:",n),r)return e();throw n}},KP={async getAll(t,e){const r=await Tn({query:"getScanYabaProducts",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4",params:{businessId:Xt.getBusinessId(),":search0":"produ"}});return od(r)},async getById(t){return Hn(async()=>(await this.getAll()).find(r=>r.id===t)||null,()=>Bn.products.getById(t))},async create(t){return Hn(async()=>{throw console.log("Creating product via real API:",t),new Error("Real API not implemented yet")},()=>Bn.products.create(t))},async update(t,e){return Hn(async()=>{throw console.log("Updating product via real API:",t,e),new Error("Real API not implemented yet")},()=>Bn.products.update(t,e))},async delete(t){return Hn(async()=>{throw console.log("Deleting product via real API:",t),new Error("Real API not implemented yet")},()=>Bn.products.delete(t))}},Ki={async getInventory(t,e){if(!(t&&t?.trim()))return[];let r={businessId:Xt.getBusinessId()};return t&&t.split(" ").map((o,s)=>{o&&(r[":search"+s]=o.trim())}),await Tn({query:"getScanYabaInventory",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4",params:r})},async getProducts(t){if(!(t&&t?.trim()))return[];let e={businessId:Xt.getBusinessId()};return t&&t.split(" ").map((i,o)=>{i&&(e[":search"+o]=i.trim())}),await Tn({query:"getScanYabaProducts",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4",params:e})},async getConsigee(t){if(!(t&&t?.trim()))return[];let e={businessId:"all"};t&&t.split(" ").map((i,o)=>{i&&(e[":search"+o]=i.trim())});const n=await E0({query:"getConsigneeYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4",params:e});return console.log({response:n}),n.data},async getShipper(t){if(!(t&&t?.trim()))return[];let e={businessId:"all"};return t&&t.split(" ").map((i,o)=>{i&&(e[":search"+o]=i.trim())}),(await E0({query:"getShipperYabaExpress",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4",params:e})).data},async getInvoice(t,e){if(!(t&&t?.trim()))return[];let r={businessId:Xt.getBusinessId()};return t&&t.split(" ").map((o,s)=>{o&&(r[":search"+s]=o.trim())}),await Tn({query:"getScanYabaSalesOrders",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4",params:r})},async addInventory(t){let r={query:"addYabaInventory",params:{businessId:Xt.getBusinessId()},form:t};return await Tn(r)},async updInventory(t){return Xt.getBusinessId(),await mL()},async addInvoice(t){let r={query:"addYabaSalesOrders",params:{businessId:Xt.getBusinessId()},form:t};return await Tn(r)},async getHBLS(t,e){if(!(t&&t?.trim()))return[];let r={businessId:Xt.getBusinessId()};e?.search,e?.guia&&e.guia!=="all"&&(r.guia=e.guia),t&&t.split(" ").map((o,s)=>{o&&(r[":search"+s]=o.trim())});let n={query:"getScanYabaHbls",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4 AND guia = guia",params:r};const i=await Tn(n);return console.log(n),console.log(i),i},async updateHBLStatus(t,e){let r={businessId:Xt.getBusinessId(),":search0":t},n={timeStamp:new Date().getTime(),statusId:e?.idguidestate,userId:"107024974104054421738",userName:"Rrynier Moplesi"};const o=await Tn({query:"updateScanLocationBagsLocation",params:r,form:n});return console.log(o),o}},t2={async getAll(t){return Ki.getInventory("ref")},async getById(t){return Hn(async()=>{throw console.log("Getting movement by ID via real API:",t),new Error("Real API not implemented yet")},()=>Bn.movements.getById(t))},async create(t){return Hn(async()=>{throw console.log("Creating movement via real API:",t),new Error("Real API not implemented yet")},()=>Bn.movements.create(t))},async update(t,e){return Hn(async()=>{throw console.log("Updating movement via real API:",t,e),new Error("Real API not implemented yet")},()=>Bn.movements.update(t,e))},async createBulk(t){return Hn(async()=>{throw console.log("Creating bulk movements via real API:",t),new Error("Real API not implemented yet")},()=>Bn.movements.createBulk(t))},async getStockLevels(t){return await Tn({query:"calculateInventoryStock",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4",params:t})},async calcStockLevels(){return[]}},rp={async getAlls(t,e){if(console.log("getAlls",t),!(t&&t?.trim()))return[];let r={businessId:"hcPiDPfZFS8ymqoh"};e?.search,t&&t.split(" ").map((o,s)=>{o&&(r[":search"+s]=o.trim())});const i=await Tn({query:"getAllAccountsByUserId",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4 AND guia = guia",params:r});return console.log(i),i},async getAll(t){return Hn(async()=>{throw console.log("Getting accounts via real API:",t),new Error("Real API not implemented yet")},()=>Bn.accounts.getAll(t))},async getById(t){return Hn(async()=>{throw console.log("Getting account by ID via real API:",t),new Error("Real API not implemented yet")},()=>Bn.accounts.getById(t))},async create(t){let r={query:"addAccounts",params:{businessId:"hcPiDPfZFS8ymqoh"},form:t};console.log(r);const n=await Tn(r);return console.log(n),n},async update(t,e){let n={query:"updateAccounts",params:{businessId:"hcPiDPfZFS8ymqoh",accountId:t},data2update:e};console.log(n);const i=await Tn(n);return console.log(i),i},async delete(t){let r={query:"deleteAccounts",params:{businessId:"hcPiDPfZFS8ymqoh",accountId:t}};console.log(r);const n=await Tn(r);return console.log(n),n}},yv={async getAll(t,e){if(console.log("getAlls",t),!(t&&t?.trim()))return[];let r={businessId:"hcPiDPfZFS8ymqoh"};return e?.search,t&&t.split(" ").map((o,s)=>{o&&(r[":search"+s]=o.trim())}),await Tn({query:"getScanSSGEntryBooks",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4 AND createdTimeStamp > :date1 AND createdTimeStamp < :date2 AND account contain :account AND subAccount contain :subAccount AND status = :status",params:r})},async getById(t){return Hn(async()=>{throw console.log("Getting journal entry by ID via real API:",t),new Error("Real API not implemented yet")},()=>Bn.journal.getById(t))},async create(t){return await Tn({query:"addSSGEntryBooks",params:{businessId:"hcPiDPfZFS8ymqoh"},form:t})},async update(t,e){return await Tn({query:"updateSSGEntryBooks",params:{businessId:"hcPiDPfZFS8ymqoh",id:t},form:e})},async post(t){return Hn(async()=>{throw console.log("Posting journal entry via real API:",t),new Error("Real API not implemented yet")},()=>Bn.journal.post(t))}},YP={async getNextEntryNumber(){return Hn(async()=>{throw console.log("Getting next entry number via real API"),new Error("Real API not implemented yet")},()=>Bn.utils.getNextEntryNumber())},async getNextProductCode(t){return Hn(async()=>{throw console.log("Getting next product code via real API:",t),new Error("Real API not implemented yet")},()=>Bn.utils.getNextProductCode(t))},async healthCheck(){return Hn(async()=>{const t=await fetch("/api/health");if(!t.ok)throw new Error("Health check failed");return t.json()},()=>Bn.utils.healthCheck())},async getStats(){return Hn(async()=>{throw console.log("Getting stats via real API"),new Error("Real API not implemented yet")},()=>Bn.utils.getStats())}},vL=()=>{r1.setMode("real"),console.log("🚀 HRM Finance initialized in REAL API mode for production")};vL();var bL=le("<div><div><div><h2></h2><button type=button>×</button></div><div>");const zA=O1(),PL=()=>{const t=Dm(zA);if(!t)throw new Error("useModal must be used within a ModalProvider");return t},xL=t=>{const[e,r]=Ae(!1),[n,i]=Ae(null),o=u=>{i(u),r(!0),document.body.style.overflow="hidden"},s=()=>{const u=n();r(!1),i(null),document.body.style.overflow="",u?.onClose?.()},a=u=>{u.target===u.currentTarget&&s()},l=u=>{u.stopPropagation()},d={showModal:o,hideModal:s,isOpen:e};return T(zA.Provider,{value:d,get children(){return[Ve(()=>t.children),T(We,{get when(){return Ve(()=>!!e())()&&n()},get children(){var u=bL(),h=u.firstChild,f=h.firstChild,p=f.firstChild,m=p.nextSibling,x=f.nextSibling;return u.$$click=a,u.style.setProperty("position","fixed"),u.style.setProperty("top","0"),u.style.setProperty("left","0"),u.style.setProperty("right","0"),u.style.setProperty("bottom","0"),u.style.setProperty("background-color","rgba(0, 0, 0, 0.5)"),u.style.setProperty("display","flex"),u.style.setProperty("align-items","center"),u.style.setProperty("justify-content","center"),u.style.setProperty("z-index","9999"),u.style.setProperty("padding","1rem"),h.$$click=l,h.style.setProperty("background","white"),h.style.setProperty("border-radius","8px"),h.style.setProperty("box-shadow","0 10px 30px rgba(0, 0, 0, 0.2)"),h.style.setProperty("width","100%"),h.style.setProperty("max-width","600px"),h.style.setProperty("max-height","90vh"),h.style.setProperty("overflow","auto"),f.style.setProperty("padding","1.5rem 2rem"),f.style.setProperty("border-bottom","1px solid var(--border-color)"),f.style.setProperty("display","flex"),f.style.setProperty("justify-content","space-between"),f.style.setProperty("align-items","center"),p.style.setProperty("font-size","1.25rem"),p.style.setProperty("font-weight","600"),p.style.setProperty("color","var(--text-primary)"),p.style.setProperty("margin","0"),c(p,()=>n()?.title),m.$$click=s,m.style.setProperty("background","none"),m.style.setProperty("border","none"),m.style.setProperty("font-size","1.5rem"),m.style.setProperty("cursor","pointer"),m.style.setProperty("color","var(--text-muted)"),m.style.setProperty("padding","0.5rem"),m.style.setProperty("border-radius","4px"),c(x,()=>n()?.children),u}})]}})};tr(["click"]);var SL=le("<p>"),wL=le('<div><div><div><h1>HRM Finance</h1><p>Complete Business Management Solution</p><div><div><button><svg width=24 height=24 viewBox="0 0 24 24"><path fill=#4285F4 d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"></path><path fill=#34A853 d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"></path><path fill=#FBBC05 d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"></path><path fill=#EA4335 d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"></path></svg></button><p>Firebase Authentication</p></div></div></div><div><div><div>💰</div><h3>Financial Management</h3><p>Complete chart of accounts, balance sheets, journal entries, and invoice management in one place.</p></div><div><div>👥</div><h3>HR Management</h3><p>Track employees, manage onboarding, and monitor your workforce with powerful analytics.</p></div><div><div>📦</div><h3>Inventory Control</h3><p>Real-time inventory tracking, product management, and movement history across multiple locations.</p></div><div><div>🏦</div><h3>Banking Integration</h3><p>Streamline bank reconciliation with CSV imports and automated consolidation features.</p></div><div><div>📊</div><h3>Real-time Analytics</h3><p>Get instant insights with dashboards showing revenue, cash flow, and business performance.</p></div><div><div>🌐</div><h3>Multi-language Support</h3><p>Available in multiple languages to support your global business operations.</p></div></div><div><p>Secure authentication powered by Google • Your data is encrypted and protected</p><p>Choose your preferred authentication method above');const CL=()=>{Kn(()=>{cL(P=>{Xt.signInWithGoogleP(P)}),setTimeout(()=>{},100)});const t={"min-height":"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex","align-items":"center","justify-content":"center",padding:"2rem"},e={background:"white","border-radius":"1rem","box-shadow":"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","max-width":"1200px",width:"100%",overflow:"hidden"},r={padding:"3rem","text-align":"center","border-bottom":"1px solid #e2e8f0"},n={"font-size":"2.5rem","font-weight":"800",color:"#1a202c","margin-bottom":"1rem"},i={"font-size":"1.125rem",color:"#718096","margin-bottom":"2rem"},o={display:"flex","flex-direction":"column",gap:"1rem","align-items":"center","margin-bottom":"1rem"},s={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(300px, 1fr))",gap:"2rem",padding:"3rem"},a={"text-align":"center",padding:"2rem","border-radius":"0.5rem",background:"#f7fafc",transition:"transform 0.2s",cursor:"default"},l={"font-size":"3rem","margin-bottom":"1rem"},d={"font-size":"1.25rem","font-weight":"600",color:"#2d3748","margin-bottom":"0.5rem"},u={color:"#718096","line-height":"1.6"},h={display:"inline-flex","align-items":"center",gap:"0.75rem",background:"white",color:"#4285f4",border:"2px solid #4285f4",padding:"0.75rem 2rem","font-size":"1.125rem","font-weight":"500","border-radius":"0.5rem",cursor:"pointer",transition:"all 0.2s","min-width":"250px","justify-content":"center"},f={color:"#e53e3e","margin-top":"1rem","font-size":"0.875rem"},p={background:"#f7fafc",padding:"2rem","text-align":"center",color:"#718096","font-size":"0.875rem"},m={"font-size":"0.75rem",color:"#718096","margin-top":"0.25rem","font-style":"italic"},x=()=>{Xt.signInWithGoogle()};return(()=>{var P=wL(),g=P.firstChild,F=g.firstChild,V=F.firstChild,N=V.nextSibling,R=N.nextSibling,M=R.firstChild,C=M.firstChild;C.firstChild;var k=C.nextSibling,D=F.nextSibling,$=D.firstChild,w=$.firstChild,_=w.nextSibling,v=_.nextSibling,z=$.nextSibling,W=z.firstChild,A=W.nextSibling,I=A.nextSibling,ee=z.nextSibling,Z=ee.firstChild,X=Z.nextSibling,se=X.nextSibling,U=ee.nextSibling,E=U.firstChild,O=E.nextSibling,L=O.nextSibling,G=U.nextSibling,K=G.firstChild,q=K.nextSibling,B=q.nextSibling,H=G.nextSibling,Y=H.firstChild,te=Y.nextSibling,oe=te.nextSibling,pe=D.nextSibling,ne=pe.firstChild,Q=ne.nextSibling;return y(P,t),y(g,e),y(F,r),y(V,n),y(N,i),y(R,o),C.addEventListener("mouseleave",ce=>{ce.currentTarget.style.background="white",ce.currentTarget.style.color="#4285f4"}),C.addEventListener("mouseenter",ce=>{ce.currentTarget.style.background="#4285f4",ce.currentTarget.style.color="white"}),C.$$click=x,y(C,h),c(C,T(We,{get when(){return Xt.state.loading},fallback:"Sign in with Google",children:"Signing in..."}),null),y(k,m),c(F,T(We,{get when(){return Xt.state.error},get children(){var ce=SL();return y(ce,f),c(ce,()=>Xt.state.error),ce}}),null),y(D,s),y(pe,p),Q.style.setProperty("margin-top","0.5rem"),Q.style.setProperty("font-size","0.75rem"),be(ce=>{var ue=Xt.state.loading,de=a,ge=l,ye=d,fe=u,Se=a,qe=l,Oe=d,Ie=u,Be=a,ke=l,Ge=d,et=u,ve=a,De=l,He=d,Je=u,Le=a,Te=l,he=d,Ne=u,rt=a,re=l,Ue=d,we=u;return ue!==ce.e&&(C.disabled=ce.e=ue),ce.t=y($,de,ce.t),ce.a=y(w,ge,ce.a),ce.o=y(_,ye,ce.o),ce.i=y(v,fe,ce.i),ce.n=y(z,Se,ce.n),ce.s=y(W,qe,ce.s),ce.h=y(A,Oe,ce.h),ce.r=y(I,Ie,ce.r),ce.d=y(ee,Be,ce.d),ce.l=y(Z,ke,ce.l),ce.u=y(X,Ge,ce.u),ce.c=y(se,et,ce.c),ce.w=y(U,ve,ce.w),ce.m=y(E,De,ce.m),ce.f=y(O,He,ce.f),ce.y=y(L,Je,ce.y),ce.g=y(G,Le,ce.g),ce.p=y(K,Te,ce.p),ce.b=y(q,he,ce.b),ce.T=y(B,Ne,ce.T),ce.A=y(H,rt,ce.A),ce.O=y(Y,re,ce.O),ce.I=y(te,Ue,ce.I),ce.S=y(oe,we,ce.S),ce},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0,S:void 0}),P})()};tr(["click"]);var _L=le("<div><div>");const UA=t=>{const e={"min-height":"100vh",display:"flex","align-items":"center","justify-content":"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},r={width:"50px",height:"50px",border:"3px solid rgba(255, 255, 255, 0.3)","border-top-color":"white","border-radius":"50%",animation:"spin 1s linear infinite"},n=document.createElement("style");return n.textContent=`
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  `,document.head.appendChild(n),Ei(async()=>{Xt.state?.user?.uid&&Xt.getUserProfile(Xt.state?.user?.uid)}),Kn(()=>{}),T(We,{get when(){return!Xt.state.loading},get fallback(){return(()=>{var i=_L(),o=i.firstChild;return y(i,e),y(o,r),i})()},get children(){return T(We,{get when(){return Xt.isAuthenticated},get fallback(){return T(CL,{})},get children(){return t.children}})}})};var AL=le("<button>");const mt=t=>{const e=()=>{const r={"font-family":"inherit",cursor:t.disabled?"not-allowed":"pointer",border:"none","border-radius":"var(--border-radius-sm)","font-weight":"500",transition:"all 0.2s ease","text-decoration":"none",display:"inline-flex","align-items":"center","justify-content":"center",gap:"0.5rem",opacity:t.disabled?"0.6":"1"},n={sm:{padding:"0.5rem 1rem","font-size":"0.875rem"},md:{padding:"0.75rem 1.5rem","font-size":"1rem"},lg:{padding:"1rem 2rem","font-size":"1.125rem"}},i={primary:{background:"linear-gradient(135deg, var(--primary-color), var(--primary-dark))",color:"white","box-shadow":"var(--shadow-sm)"},secondary:{background:"var(--surface-color)",color:"var(--text-primary)",border:"1px solid var(--border-color)"},outline:{background:"transparent",color:"var(--primary-color)",border:"1px solid var(--primary-color)"}};return{...r,...n[t.size||"md"],...i[t.variant||"primary"]}};return(()=>{var r=AL();return Qn(r,"click",t.onClick,!0),c(r,()=>t.children),be(n=>{var i=e(),o=t.disabled,s=t.type||"button",a=`btn btn-${t.variant||"primary"} ${t.className||""}`;return n.e=y(r,i,n.e),o!==n.t&&(r.disabled=n.t=o),s!==n.a&&ir(r,"type",n.a=s),a!==n.o&&$m(r,n.o=a),n},{e:void 0,t:void 0,a:void 0,o:void 0}),r})()};tr(["click"]);var kL=le("<div><div><div><h2></h2><button type=button>×</button></div><div>");const Pi=t=>{Ei(()=>{t.isOpen?document.body.style.overflow="hidden":document.body.style.overflow=""}),Ta(()=>{document.body.style.overflow=""});const e=n=>{n.target===n.currentTarget&&t.onClose()},r=n=>{n.stopPropagation()};return T(We,{get when(){return t.isOpen},get children(){var n=kL(),i=n.firstChild,o=i.firstChild,s=o.firstChild,a=s.nextSibling,l=o.nextSibling;return n.$$click=e,n.style.setProperty("position","fixed"),n.style.setProperty("top","0"),n.style.setProperty("left","0"),n.style.setProperty("right","0"),n.style.setProperty("bottom","0"),n.style.setProperty("background-color","rgba(0, 0, 0, 0.5)"),n.style.setProperty("display","flex"),n.style.setProperty("align-items","center"),n.style.setProperty("justify-content","center"),n.style.setProperty("z-index","1000"),n.style.setProperty("padding","1rem"),i.$$click=r,i.style.setProperty("background","white"),i.style.setProperty("border-radius","8px"),i.style.setProperty("box-shadow","0 10px 30px rgba(0, 0, 0, 0.2)"),i.style.setProperty("width","100%"),i.style.setProperty("max-width","600px"),i.style.setProperty("max-height","90vh"),i.style.setProperty("overflow","auto"),o.style.setProperty("padding","1.5rem 2rem"),o.style.setProperty("border-bottom","1px solid var(--border-color)"),o.style.setProperty("display","flex"),o.style.setProperty("justify-content","space-between"),o.style.setProperty("align-items","center"),s.style.setProperty("font-size","1.25rem"),s.style.setProperty("font-weight","600"),s.style.setProperty("color","var(--text-primary)"),s.style.setProperty("margin","0"),c(s,()=>t.title),Qn(a,"click",t.onClose,!0),a.style.setProperty("background","none"),a.style.setProperty("border","none"),a.style.setProperty("font-size","1.5rem"),a.style.setProperty("cursor","pointer"),a.style.setProperty("color","var(--text-muted)"),a.style.setProperty("padding","0.5rem"),a.style.setProperty("border-radius","4px"),c(l,()=>t.children),n}})};tr(["click"]);var XP=le("<div>"),EL=le("<h3>"),TL=le("<p>");const Vt=t=>{const e={background:"var(--surface-color)","border-radius":"var(--border-radius)",padding:"1.5rem","box-shadow":"var(--shadow-sm)",border:"1px solid var(--border-color)",transition:"all 0.2s ease",cursor:t.onClick?"pointer":"default",margin:"9px"},r={"margin-bottom":"1rem"},n={"font-size":"1.25rem","font-weight":"600",color:"var(--text-primary)",margin:"0 0 0.5rem 0"},i={"font-size":"0.875rem",color:"var(--text-muted)",margin:"0"};return(()=>{var o=XP();return Qn(o,"click",t.onClick,!0),c(o,(()=>{var s=Ve(()=>!!(t.title||t.subtitle));return()=>s()&&(()=>{var a=XP();return y(a,r),c(a,(()=>{var l=Ve(()=>!!t.title);return()=>l()&&(()=>{var d=EL();return y(d,n),c(d,()=>t.title),d})()})(),null),c(a,(()=>{var l=Ve(()=>!!t.subtitle);return()=>l()&&(()=>{var d=TL();return y(d,i),c(d,()=>t.subtitle),d})()})(),null),a})()})(),null),c(o,()=>t.children,null),be(s=>{var a=e,l=`card ${t.className||""}`;return s.e=y(o,a,s.e),l!==s.t&&$m(o,s.t=l),s},{e:void 0,t:void 0}),o})()};tr(["click"]);var IL=le("<div><label></label><input>"),NL=le("<span>*");const Ot=t=>{const e={display:"block","font-weight":"500","margin-bottom":"0.5rem",color:"var(--text-primary)"},r={width:"100%",padding:"0.75rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"1rem","font-family":"inherit",background:"var(--surface-color)",color:"var(--text-primary)",transition:"border-color 0.2s ease"},n={"margin-bottom":"1rem"},[i,o]=Ae("");Ei(()=>{t?.value!==void 0&&o(t.value.toString())});const s=l=>{(l.key==="Enter"||l.key==="Escape"||l.key==="Tab")&&t.onChange&&dd(i())&&t.onChange(i())},a=()=>{dd(i())&&t.onChange(i())};return(()=>{var l=IL(),d=l.firstChild,u=d.nextSibling;return y(l,n),y(d,e),c(d,()=>t.label,null),c(d,(()=>{var h=Ve(()=>!!t.required);return()=>h()&&(()=>{var f=NL();return f.style.setProperty("color","var(--primary-color)"),f})()})(),null),u.addEventListener("blur",h=>{a(),h.target.style.borderColor="var(--border-color)"}),u.addEventListener("focus",h=>{h.target.style.borderColor="var(--primary-color)"}),u.$$keydown=s,u.$$input=h=>o(h.target.value),be(h=>{var f=t.type||"text",p=t.placeholder,m=t.required,x=t.disabled||t.readOnly,P=t.readOnly,g={...r,...t?.style};return f!==h.e&&ir(u,"type",h.e=f),p!==h.t&&ir(u,"placeholder",h.t=p),m!==h.a&&(u.required=h.a=m),x!==h.o&&(u.disabled=h.o=x),P!==h.i&&(u.readOnly=h.i=P),h.n=y(u,g,h.n),h},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),be(()=>u.value=i()),l})()};tr(["input","keydown"]);const RL={en:{common:{save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",add:"Add",close:"Close",search:"Search",filter:"Filter",reset:"Reset",back:"Back",next:"Next",previous:"Previous",yes:"Yes",no:"No",loading:"Loading...",error:"Error",success:"Success",warning:"Warning",info:"Information",confirm:"Confirm",actions:"Actions",status:"Status",active:"Active",inactive:"Inactive",date:"Date",time:"Time",description:"Description",notes:"Notes",amount:"Amount",total:"Total",subtotal:"Subtotal",currency:"USD",language:"Language",english:"English",spanish:"Spanish",noDataFound:"No data found",required:"Required",optional:"Optional",all:"All",none:"None",select:"Select",clear:"Clear",searching:"Searching...",refresh:"Refresh",showAll:"Show All",products:"products",filtered:"Filtered",view:"View",suggested:"Suggested",clearFilters:"Clear Filters",enhanced:"Enhanced",legacy:"Legacy",email:"Email",phone:"Phone",address:"Address",name:"Name",code:"Code",category:"Category",type:"Type",quantity:"Quantity",price:"Price",cost:"Cost",value:"Value",balance:"Balance",created:"Created",modified:"Modified",details:"Details",summary:"Summary",history:"History",new:"New",addNew:"Add New",unknown:"Unknown",notAvailable:"N/A",remove:"Remove",startDate:"Start Date",endDate:"End Date",from:"From",invoice:"Invoice",invoices:"invoices",reference:"Reference",createdBy:"Created By",units:"units",invoiceDocumentId:"Invoice/Document ID",referenceNumber:"Reference Number",referenceNumberPlaceholder:"Enter reference number...",generalNotes:"General Notes",auto:"Auto",optionalNotes:"Optional notes...",showPerPage:"Show per page",first:"First",last:"Last",store:"Store",orderId:"Order ID",tax:"Tax",paymentMethods:"Payment Methods",cash:"Cash",creditCard:"Credit Card",shipping:"Shipping",air:"Air",sea:"Sea",thankYouBusiness:"Thank you for your business!",thankForChoosingUs:"Thank you for choosing us!",taxExemptNote:"Tax exempted on cash payment.",youSaved:"You saved",generatedOn:"Generated on",printSavePDF:"Print / Save as PDF",pageOfPages:"Page {{current}} of {{total}}",showingXofY:"Showing {{start}}-{{end}} of {{total}}",page:"Page",of:"of",print:"Print",export:"Export",pending:"Pending",completed:"Completed",customer:"Customer",location:"Location",reservations:"Reservations",backToDashboard:"Back to Dashboard",lbs:"pounds"},navigation:{dashboard:"Dashboard",accounts:"Chart of Accounts",balanceSheet:"Balance Sheet",inventory:"Inventory",employees:"Employees",entryBooks:"Entry Books",consolidate:"Bank Consolidation",reports:"Reports",settings:"Settings"},dashboard:{title:"Dashboard",welcome:"Welcome to HRM Finance",totalRevenue:"Total Revenue",overview:"Overview",recentActivity:"Recent Activity",quickActions:"Quick Actions",employeeCount:"Employee Count",pendingInvoices:"Pending Invoices",cashBalance:"Cash Balance",totalAssets:"Total Assets",totalLiabilities:"Total Liabilities",totalExpenses:"Total Expenses",netIncome:"Net Income",netLoss:"Net Loss",monthlyPayroll:"Monthly Payroll",current:"Current",newHires:"+3 new hires",outstanding:"Outstanding",totalOutstanding:"$23,450 total",lastUpdatedToday:"Last updated today",commonTasks:"Common tasks",generateReport:"Generate Report",latestUpdates:"Latest updates",invoicePaid:"Invoice #1234 paid",hoursAgo:"2 hours ago",newEmployeeOnboarded:"New employee onboarded",dayAgo:"1 day ago",monthlyReportGenerated:"Monthly report generated",daysAgo:"2 days ago"},accounts:{title:"Chart of Accounts",accountNumber:"Account Number",accountName:"Account Name",accountType:"Account Type",category:"Category",balance:"Balance",parentAccount:"Parent Account",subAccounts:"Sub-accounts",addAccount:"Add Account",editAccount:"Edit Account",deleteAccount:"Delete Account",accountDetails:"Account Details",transactions:"Transactions",accountHistory:"Account History",backToAccounts:"Back to Accounts",accountNotFound:"Account not found",accountInformation:"Account Information",accountPurpose:"Account purpose",transactionHistory:"Transaction History",noTransactions:"No transactions found for this account",createdDate:"Created Date",lastModified:"Last Modified",noDescription:"No description provided.",totalCount:"Total count",basicDetails:"Basic details",currentBalance:"Current balance",classification:"Classification",allTransactions:"All account transactions",reference:"Reference",allAccounts:"All Accounts",types:{asset:"Asset",liability:"Liability",equity:"Equity",revenue:"Revenue",expense:"Expense"},categories:{currentAssets:"Current Assets",fixedAssets:"Fixed Assets",currentLiabilities:"Current Liabilities",longTermLiabilities:"Long-term Liabilities",ownersEquity:"Owner's Equity",operatingRevenue:"Operating Revenue",operatingExpenses:"Operating Expenses"}},inventory:{title:"Inventory Management",overview:"Overview",products:"Products & Stock",movements:"Movements",locations:"Locations",bulkMovement:"Bulk Movement",addMovement:"Add Movement",addProduct:"Add Product",addLocation:"Add Location",singleMovement:"Add Single Movement",addNewItem:"Add New Item",activeProducts:"Active Products",lowStockAlert:"Low Stock Items",totalValue:"Total Stock Value",activeLocations:"Active Locations",productsNeedRestocking:"products need restocking",recentMovements:"Recent Movements",noProducts:"No products at this location",productName:"Product Name",productCode:"Product Code",sku:"SKU",unitOfMeasure:"Unit of Measure",unitCost:"Unit Cost",minStockLevel:"Min Stock Level",maxStockLevel:"Max Stock Level",locationName:"Location Name",locationType:"Location Type",locationCode:"Location Code",movementType:"Movement Type",referenceNumber:"Reference Number",invoiceNumber:"Invoice Number",fromLocation:"From Location",toLocation:"To Location",stockIn:"Stock In",stockOut:"Stock Out",transfer:"Transfer",adjustment:"Adjustment",inStock:"In Stock",lowStock:"Low Stock",outOfStock:"Out of Stock",stockLevels:"Stock Levels",stockByLocation:"Stock by Location",searchProducts:"Search products by name, SKU, or category...",searchProductsStock:"Search products and check stock levels...",searchResult:"Search Result",searchResults:"Search Results",searchFallback:"Showing local results",tryDifferentTerm:"Try a different search term or check spelling.",showingTopResults:"Showing top {{count}} results",searchLocations:"Search locations...",noMovements:"No movements found",productDetails:"Product Details",locationDetails:"Location Details",movementDetails:"Movement Details",totalProducts:"Total Products",totalLocations:"Total Locations",lastSeen:"Last seen",warehouseType:"Warehouse",storeType:"Store",supplierType:"Supplier",customerType:"Customer",currentlyManaged:"Currently managed",needAttention:"Need attention",currentWorth:"Current worth",warehousesStores:"Warehouses & stores",thisMonth:"This Month",latestActivities:"Latest inventory activities",searchMovements:"Search Movements",countingSheet:"Counting Sheet",physicalCount:"Physical Count",physicalInventoryCount:"Physical Inventory Count",setupPhysicalCount:"Setup Physical Inventory Count",setupDescription:"Configure your physical inventory count settings and begin the counting process.",countWillInclude:"This count will include {{count}} products from {{location}} in {{category}} category.",startCounting:"Start Physical Count",counted:"Counted",remaining:"Remaining",variances:"Variances",complete:"Complete",systemQty:"System Qty",variance:"Variance",addNotes:"Add notes...",reviewAndConfirm:"Review and Confirm Adjustments",reviewDescription:"Review the inventory adjustments below and confirm to update your system.",stockIncreases:"Stock Increases",stockDecreases:"Stock Decreases",totalAdjustments:"Total Adjustments",confirmAdjustments:"Confirm Adjustments",perfectCount:"Perfect Count!",noVariances:"No variances found. Your physical count matches the system exactly.",physicalCountAdjustment:"Physical count adjustment",inventoryCountingSheetTitle:"INVENTORY COUNTING SHEET",location:"Location",allCategories:"All Categories",countedBy:"Counted by",verifiedBy:"Verified by",instructions:"Instructions",countInstructions:["Count all items physically present at this location",'Write the actual count in the "Physical Count" column',"Leave blank if item is not found",'Note any discrepancies in the "Notes" column',"Sign and date when complete"],unit:"Unit",totalProductsListed:"Total Products Listed",itemsCounted:"Items Counted",summaryFor:"SUMMARY FOR",discrepanciesFound:"Discrepancies Found",counterSignature:"Counter Signature",supervisorSignature:"Supervisor Signature",downloadCSV:"Download CSV",noAdjustmentsToDownload:"No adjustments to download",stockIncrease:"Stock Increase",stockDecrease:"Stock Decrease",purchaseReceive:"Purchase/Receive",saleIssue:"Sale/Issue",generalNotesPlaceholder:"Enter general notes for this movement...",sortBy:"Sort By",allLocations:"All Locations",searchByProduct:"Search by product, location, reference, notes, invoice...",allProducts:"All Products",bulkMovementReport:"Bulk Movement Report",totalQuantity:"Total Quantity",estimatedValue:"Estimated Value",viewHistoricalReports:"View Historical Reports",noBulkReportsFound:"No bulk movement reports found",bulkReportsAppearHere:"Bulk movement reports will appear here after you create bulk movements",allTypes:"All Types",startDate:"Start Date",endDate:"End Date",totalMovements:"Total Movements",totalItems:"Total Items",adjustMovements:"Try adjusting your filters or check back later.",inventoryMovements:"Inventory Movements",createdBy:"Created By",view:"View",enhanced:"Enhanced",legacy:"Legacy",addSingleMovement:"Add Single Movement",inStockSubtitle:"In stock",itemsBelowThreshold:"Items below threshold",inventoryWorth:"Inventory worth",quantity:"Quantity",units:"units",normal:"Normal",productsAndStock:"Products & Stock",lowStockItems:"Low Stock Items",totalStockValue:"Total Stock Value",warehousesAndStores:"Warehouses & stores",andMore:"...and {count} more",latestInventoryActivities:"Latest inventory activities",min:"Min",max:"Max",cost:"Cost",noProductsFound:"No products found matching your search.",noProductsAvailable:"No products available.",noLocationsFound:"No locations found matching your search.",noLocationsAvailable:"No locations available.",searchPlaceholder:"Search by product, location, reference, notes, invoice...",noMovementsFound:"No movements found",tryAdjustingFilters:"Try adjusting your filters or check back later.",transfers:"Transfers",adjustments:"Adjustments",bulk:"Bulk",product:"Product",store:"Store",supplier:"Supplier",warehouse:"Warehouse",movement:"Movement",editMovement:"Edit Movement",updateMovement:"Update Movement",movementInformation:"Movement Information",locationInformation:"Location Information",searchProductsImages:"Search products to view images...",searchForProducts:"Search for Products",startTypingToSearch:"Start typing to search and view product images",tryDifferentSearch:"Try a different search term"},employees:{title:"Employee Management",employeeList:"Employee List",addEmployee:"Add Employee",editEmployee:"Edit Employee",employeeDetails:"Employee Details",personalInfo:"Personal Information",employmentInfo:"Employment Information",payrollInfo:"Payroll Information",firstName:"First Name",lastName:"Last Name",fullName:"Full Name",email:"Email",phone:"Phone",address:"Address",dateOfBirth:"Date of Birth",employeeId:"Employee ID",department:"Department",position:"Position",hireDate:"Hire Date",employmentStatus:"Employment Status",salary:"Salary",payFrequency:"Pay Frequency",taxId:"Tax ID",bankAccount:"Bank Account",emergencyContact:"Emergency Contact",activeEmployees:"Active Employees",inactiveEmployees:"Inactive Employees",totalPayroll:"Total Payroll",searchEmployees:"Search employees...",enterFullName:"Enter employee's full name",enterPosition:"Enter job position",enterEmail:"Enter email address",enterPhone:"Enter phone number",enterSalary:"Enter annual salary",departments:{engineering:"Engineering",product:"Product",design:"Design",marketing:"Marketing",sales:"Sales",humanResources:"Human Resources",finance:"Finance",operations:"Operations",analytics:"Analytics"}},entryBooks:{title:"Entry Books",bookName:"Book Name",bookType:"Book Type",createBook:"Create Book",editBook:"Edit Book",salesBook:"Sales Book",purchaseBook:"Purchase Book",cashBook:"Cash Book",generalBook:"General Book",entries:"Entries",addEntry:"Add Entry",period:"Period",startDate:"Start Date",endDate:"End Date",bookBalance:"Book Balance",reconciledBalance:"Reconciled Balance",difference:"Difference",reconcile:"Reconcile",isReconciled:"Is Reconciled",noBooks:"No entry books found",createFirst:"Create your first entry book to get started",bookDetails:"Book Details",entriesCount:"entries",bookOverview:"Book overview and details",bookEntries:"Book Entries",allEntries:"All entries in this book",noEntries:"No entries found",addFirst:"Add your first entry to this book",entryDate:"Entry Date",entryDescription:"Entry Description",entryAmount:"Entry Amount",entryReference:"Entry Reference",subtitle:"Manage accounting entries and general ledger records",viewReconciliation:"View Reconciliation",totalEntries:"Total Entries",allJournalEntries:"All journal entries",postedEntriesOnly:"Posted entries only",fromPostedEntries:"From {count} posted entries",needBankReconciliation:"Need bank reconciliation",allReconciled:"All reconciled",sortBy:"Sort By",fromDate:"From Date",toDate:"To Date",order:"Order",newest:"Newest",oldest:"Oldest",resetFilters:"Reset Filters",activeFilters:"Active filters",from:"From",to:"To",entriesFound:"{count} entries found",noJournalEntries:"No Journal Entries",startByCreating:"Start by creating your first entry",noEntriesMatch:"No journal entries match your current filters.",createFirstEntry:"Create First Entry",void:"Void",confirmVoid:"Are you sure you want to void this journal entry?",entryBookRecords:"Entry Book Records"},banking:{title:"Bank Consolidation",bankAccount:"Bank Account",statementDate:"Statement Date",beginningBalance:"Beginning Balance",endingBalance:"Ending Balance",deposits:"Deposits",withdrawals:"Withdrawals",bankCharges:"Bank Charges",interest:"Interest",reconcile:"Reconcile",matched:"Matched",unmatched:"Unmatched",importStatement:"Import Statement",manualEntry:"Manual Entry",autoMatch:"Auto Match",clearAll:"Clear All",reconciliationStatus:"Reconciliation Status",difference:"Difference",bookBalance:"Book Balance",statementBalance:"Statement Balance",outstandingChecks:"Outstanding Checks",depositsInTransit:"Deposits in Transit",reconciled:"Reconciled",notReconciled:"Not Reconciled",unreconciled:"Unreconciled",reconciliation:"Reconciliation",compareStatements:"Compare bank statements with entry book records",importCSV:"Import CSV",startNewReconciliation:"Start New Reconciliation",bankAccountInfo:"Bank Account Info",currentAccountDetails:"Current account details",lastReconciled:"Last reconciled",bankTransactions:"Bank Transactions",selectedPeriod:"Selected period",pending:"pending",bookEntriesForComparison:"Book entries for comparison",reconciliationRate:"Reconciliation Rate",completionStatus:"Completion status",recentReconciliationSessions:"Recent Reconciliation Sessions",latestActivity:"Latest activity",noRecentSessions:"No recent reconciliation sessions found.",startFirstReconciliation:"Start First Reconciliation",entryBookRecords:"Entry Book Records",pleaseUploadCSV:"Please upload a CSV file",csvRequiresHeaderAndData:"CSV file must have at least a header and one data row",successfullyParsed:"Successfully parsed {count} rows",errorParsingCSV:"Error parsing CSV file. Please check the format.",dateDescriptionRequired:"Date and Description columns are required",importedTransaction:"Imported transaction",successfullyImported:"Successfully imported {count} bank transactions",errorImportingTransactions:"Error importing transactions. Please check your data.",importBankStatementCSV:"Import Bank Statement CSV",dropCSVHere:"Drop CSV file here",clickToUploadCSV:"Click to upload or drag and drop CSV file",supportedFormat:"Supported format: CSV with Date, Description, and Amount columns",mapCSVColumns:"Map CSV Columns",dateColumn:"Date Column",selectColumn:"Select column...",descriptionColumn:"Description Column",referenceColumn:"Reference Column",amountDebitColumn:"Amount/Debit Column",creditColumn:"Credit Column",balanceColumn:"Balance Column",andMoreRows:"... and {count} more rows",importing:"Importing...",importTransactions:"Import {count} Transactions",reconciliationComparison:"Reconciliation Comparison",bankStatements:"Bank Statements",totalTransactions:"Total transactions",totalEntries:"Total entries",unreconciledBank:"Unreconciled Bank",unreconciledBooks:"Unreconciled Books",needAttention:"Need attention",unreconcile:"Unreconcile",clickToReconcile:"Click to reconcile",potentialMatchesFound:"Potential Matches Found",clickRecordToReconcile:"Click on a record below to reconcile",exactMatch:"Exact Match",possibleMatch:"Possible Match",selected:"Selected",clearSelection:"Clear Selection"},journal:{title:"Journal Entries",entryNumber:"Entry Number",entryDate:"Entry Date",debit:"Debit",credit:"Credit",account:"Account",memo:"Memo",reference:"Reference",createEntry:"Create Entry",editEntry:"Edit Entry",deleteEntry:"Delete Entry",posted:"Posted",draft:"Draft",reversed:"Reversed",recurringEntry:"Recurring Entry",attachments:"Attachments",totalDebits:"Total Debits",totalCredits:"Total Credits",outOfBalance:"Out of Balance",balanced:"Balanced",addEntry:"Add Journal Entry",allEntries:"All Entries",totalDebit:"Total Debit",totalCredit:"Total Credit",debitShort:"Dr.",creditShort:"Cr.",noReference:"No reference",createdBy:"By",totalAmount:"Total Amount",lines:"Lines",entryNotBalancedShort:"Entry is not balanced",accountLines:"Account Lines",noDescription:"No description",andMoreLines:"... and {count} more lines",viewDetails:"View Details",entryLines:"Journal Entry Lines",addLine:"Add Line",lineDescription:"Line description",notBalanced:"Not Balanced",updateEntry:"Update Entry",saveAsDraft:"Save as Draft",entryDetails:"Journal Entry Details",entryNotFound:"Entry Not Found",entryNotFoundMessage:"The journal entry you're looking for could not be found or may have been deleted.",editEntryTooltip:"Edit this journal entry",post:"Post",entryMustBeBalanced:"Entry must be balanced to post",postEntryTooltip:"Post this journal entry",voidEntryTooltip:"Void this journal entry",journalLines:"Journal Lines",balanceStatus:"Balance Status",unbalanced:"Unbalanced",difference:"difference",createdAt:"Created At",postedAt:"Posted At",quickActions:"Quick Actions",postEntry:"Post Entry",fixBalance:"Fix Balance",voidEntry:"Void Entry",draftEntry:"Draft Entry",draftEntryDescription:"This entry can be edited and posted.",entryMustBeBalancedBeforePosting:"Entry must be balanced before posting.",postedEntry:"Posted Entry",postedEntryDescription:"This entry has been posted to the general ledger. Editing will create a new draft copy.",voidEntryDescription:"This entry has been voided and cannot be modified.",confirmEditPosted:"This entry has been posted. Editing will create a new draft copy. Continue?",confirmPost:"Are you sure you want to post this journal entry? This action cannot be undone.",confirmVoid:"Are you sure you want to void this journal entry?",minTwoLinesRequired:"At least 2 line items are required",entryNotBalanced:"Entry is not balanced. Debit: ${debit}, Credit: ${credit}",lineAccountRequired:"Line {lineNumber}: Account is required",lineAmountRequired:"Line {lineNumber}: Either debit or credit amount must be provided",lineBothAmounts:"Line {lineNumber}: Cannot have both debit and credit amounts",enterEntryDescription:"Enter journal entry description",enterReferenceNumber:"Enter reference number"},invoices:{title:"Invoice Dashboard",invoice:"Invoice",invoices:"Invoices",invoiceNumber:"Invoice Number",invoiceDetails:"Invoice Details",customerInformation:"Customer Information",customerName:"Customer Name",legalName:"Legal Name",contactInformation:"Contact Information",idPassport:"ID/Passport",phoneNumber:"Phone Number",altPhone:"Alt Phone",address:"Address",between:"Between",and:"and",products:"Products",reservations:"Reservations",services:"Services",unitPrice:"Unit Price",total:"Total",subtotal:"Subtotal",totalRevenue:"Total Revenue",totalProducts:"Total Products",totalReservations:"Total Reservations",aranceles:"Aranceles (Customs)",uniqueCustomers:"Unique Customers",averageInvoice:"Average Invoice",completed:"Completed",pending:"Pending",storesActive:"Stores Active",topProducts:"Top Products",mostSoldProducts:"Most sold products by quantity",reservationsByType:"Reservations by Type",distributionOfCategories:"Distribution of reservation categories",recentInvoices:"Recent Invoices",showingInvoices:"Showing {{count}} invoices",date:"Date",customer:"Customer",store:"Store",actions:"Actions",view:"View",status:"Status",printInvoice:"Print Invoice",exportPdf:"Export PDF",backToDashboard:"Back to Dashboard",fromInvoices:"From {{count}} invoices",value:"value",activeCustomers:"Active customers",perInvoiceValue:"Per invoice value",locations:"Locations",mostRecentActivity:"Most recent activity",storeLocation:"Store Location",allStores:"All Stores",fromDate:"From Date",toDate:"To Date",clearFilters:"Clear Filters",search:"Search",searchPlaceholder:"Search by invoice #, customer, store...",customsFees:"Total customs fees",salesType:"SALES",packagesOrder:"Packages Order",businessId:"Business ID",orderKey:"Order Key",reservationType:"Reservation Type",arancel:"Arancel",key:"Key",noInvoicesFound:"No invoices found",loadingInvoices:"Loading invoices...",errorLoadingInvoices:"Error loading invoices",refreshData:"Refresh Data",currentStockValue:"Current Stock Value",filterByStore:"Filter by store",filterByDate:"Filter by date range",totalCustomsFees:"Total customs fees",averageValue:"Average value",senderInformation:"Sender Information",receiptInformation:"Receipt Information",productsSubtotal:"Products Subtotal",reservationsSubtotal:"Reservations Subtotal",servicesSubtotal:"Services Subtotal",code:"Code",description:"Description",qty:"Qty",type:"Type",id:"ID",passport:"Passport",createNew:"Create New Invoice",totalOutstanding:"Total Outstanding",unpaidInvoices:"Unpaid invoices",thisMonth:"This Month",revenueCollected:"Revenue collected",overdue:"Overdue",pastDueInvoices:"Past due invoices",latestBillingActivity:"Latest billing activity",paid:"Paid"},forms:{requiredField:"This field is required",invalidEmail:"Invalid email address",invalidNumber:"Invalid number",invalidDate:"Invalid date",selectOption:"Please select an option",enterValue:"Please enter a value",confirmDelete:"Are you sure you want to delete this item?",unsavedChanges:"You have unsaved changes. Do you want to continue?",saveSuccess:"Saved successfully",saveError:"Error saving data",deleteSuccess:"Deleted successfully",deleteError:"Error deleting item",duplicateAccountNumber:"Account number already exists",descriptionRequired:"Description is required",errorOccurred:"An error occurred",errorPostingEntry:"An error occurred while posting the entry",referenceNumberRequired:"Reference number is required",locationRequired:"Location is required",fromLocationRequired:"From location is required for transfers",atLeastOneProduct:"At least one product is required",itemProductRequired:"Product is required for item {{index}}",itemQuantityRequired:"Quantity must be greater than 0 for item {{index}}"},modals:{addInventory:"Add Inventory Movement",bulkMovement:"Bulk Inventory Movement",addProduct:"Add New Product",addLocation:"Add New Location",inventoryDetail:"Inventory Item Details",quickAdd:"Quick Add",selectProduct:"Select Product",selectLocation:"Select Location",enterQuantity:"Enter quantity",enterCost:"Enter unit cost",enterReference:"Enter reference number",addNotes:"Add notes (optional)",generalInformation:"General Information",stockInformation:"Stock Information",locationInformation:"Location Information",movementInformation:"Movement Information",addToInventory:"Add to Inventory",createProduct:"Create Product",createLocation:"Create Location",processing:"Processing...",addingMovement:"Adding movement...",creatingProduct:"Creating product...",creatingLocation:"Creating location..."},products:{title:"Products",addNew:"Add New Product",totalProducts:"Total Products",inCatalog:"In catalog",activeProducts:"Active Products",currentlyAvailable:"Currently available",outOfStock:"Out of Stock",needsRestock:"Needs restock",productCatalog:"Product Catalog",manageYourProducts:"Manage your products and pricing",inStock:"In Stock",furniture:"Furniture",electronics:"Electronics",supplies:"Supplies",lighting:"Lighting",searchPlaceholder:"Search products by name, SKU, or category...",allCategories:"All Categories",clearFilters:"Clear filters",noResults:"No products found matching your criteria.",noProducts:"No products available.",showing:"Showing",filtered:"Filtered results",allProducts:"All products",searchResult:"Search Result",stock:"Stock",lowStock:"Low Stock"},unauthorized:{title:"Access Restricted",accessDenied:"Access Denied",noPermission:"You don't have permission to access",thisFeature:"this feature",whySeeing:"Why am I seeing this?",explanation:"Your account doesn't have the necessary permissions to view this content.",requiredPermission:"Required permission:",goToDashboard:"Go to Dashboard",goBack:"Go Back",featuresCanAccess:"Features you can access:",dashboardAccess:"Dashboard and overview statistics",profileAccess:"Your profile and settings",roleBasedAccess:"Features enabled for your role",needAccess:"Need access? Contact your administrator or manager to request the appropriate permissions.",permissions:{accountAccess:"Account Management Access",inventoryAccess:"Inventory Access",employeeAccess:"HR Access",bankingAccess:"Banking Access",journalAccess:"Journal Entry Access",adminAccess:"Administrative Access",financialReporting:"Financial Reporting Access",invoiceManagement:"Invoice Management Access",productManagement:"Product Management Access"}}},es:{common:{save:"Guardar",cancel:"Cancelar",delete:"Eliminar",edit:"Editar",add:"Agregar",close:"Cerrar",search:"Buscar",filter:"Filtrar",reset:"Restablecer",back:"Atrás",next:"Siguiente",previous:"Anterior",yes:"Sí",no:"No",loading:"Cargando...",error:"Error",success:"Éxito",warning:"Advertencia",info:"Información",confirm:"Confirmar",actions:"Acciones",status:"Estado",active:"Activo",inactive:"Inactivo",date:"Fecha",time:"Hora",description:"Descripción",notes:"Notas",amount:"Monto",total:"Total",subtotal:"Subtotal",currency:"USD",language:"Idioma",english:"Inglés",spanish:"Español",noDataFound:"No se encontraron datos",required:"Requerido",optional:"Opcional",all:"Todos",none:"Ninguno",select:"Seleccionar",clear:"Limpiar",view:"Ver",suggested:"Sugerido",clearFilters:"Limpiar Filtros",enhanced:"Mejorado",legacy:"Clásico",email:"Correo Electrónico",phone:"Teléfono",address:"Dirección",name:"Nombre",code:"Código",category:"Categoría",type:"Tipo",quantity:"Cantidad",price:"Precio",cost:"Costo",value:"Valor",balance:"Saldo",created:"Creado",modified:"Modificado",details:"Detalles",summary:"Resumen",history:"Historial",new:"Nuevo",addNew:"Agregar Nuevo",unknown:"Desconocido",notAvailable:"N/A",remove:"Remover",startDate:"Fecha de Inicio",endDate:"Fecha de Fin",from:"De",invoice:"Factura",invoices:"facturas",reference:"Referencia",createdBy:"Creado Por",units:"unidades",invoiceDocumentId:"ID de Factura/Documento",referenceNumber:"Número de Referencia",referenceNumberPlaceholder:"Ingrese número de referencia...",generalNotes:"Notas Generales",auto:"Auto",optionalNotes:"Notas opcionales...",showPerPage:"Mostrar por página",first:"Primera",last:"Última",store:"Tienda",orderId:"ID de Orden",tax:"Impuesto",paymentMethods:"Métodos de Pago",cash:"Efectivo",creditCard:"Tarjeta de Crédito",shipping:"Envío",air:"Aéreo",sea:"Marítimo",thankYouBusiness:"¡Gracias por su negocio!",thankForChoosingUs:"¡Gracias por elejirnos!",taxExemptNote:"Impuesto exento en pago en efectivo.",youSaved:"Usted ahorró",generatedOn:"Generado el",printSavePDF:"Imprimir / Guardar como PDF",pageOfPages:"Página {{current}} de {{total}}",showingXofY:"Mostrando {{start}}-{{end}} de {{total}}",page:"Página",of:"de",lbs:"libras"},navigation:{dashboard:"Panel de Control",accounts:"Plan de Cuentas",balanceSheet:"Balance General",inventory:"Inventario",employees:"Empleados",entryBooks:"Libros de Entrada",consolidate:"Consolidación Bancaria",reports:"Reportes",settings:"Configuración"},dashboard:{title:"Panel de Control",welcome:"Bienvenido a HRM Finance",totalRevenue:"Ingresos Totales",overview:"Resumen",recentActivity:"Actividad Reciente",quickActions:"Acciones Rápidas",employeeCount:"Número de Empleados",pendingInvoices:"Facturas Pendientes",cashBalance:"Saldo en Efectivo",totalAssets:"Activos Totales",totalLiabilities:"Pasivos Totales",totalExpenses:"Gastos Totales",netIncome:"Ingreso Neto",netLoss:"Pérdida Neta",monthlyPayroll:"Nómina Mensual",current:"Actual",newHires:"+3 nuevas contrataciones",outstanding:"Pendiente",totalOutstanding:"$23,450 total",lastUpdatedToday:"Última actualización hoy",commonTasks:"Tareas comunes",generateReport:"Generar Reporte",latestUpdates:"Últimas actualizaciones",invoicePaid:"Factura #1234 pagada",hoursAgo:"hace 2 horas",newEmployeeOnboarded:"Nuevo empleado incorporado",dayAgo:"hace 1 día",monthlyReportGenerated:"Reporte mensual generado",daysAgo:"hace 2 días"},accounts:{title:"Plan de Cuentas",accountNumber:"Número de Cuenta",accountName:"Nombre de Cuenta",accountType:"Tipo de Cuenta",category:"Categoría",balance:"Saldo",parentAccount:"Cuenta Padre",subAccounts:"Subcuentas",addAccount:"Agregar Cuenta",editAccount:"Editar Cuenta",deleteAccount:"Eliminar Cuenta",accountDetails:"Detalles de Cuenta",transactions:"Transacciones",accountHistory:"Historial de Cuenta",backToAccounts:"Volver a Cuentas",accountNotFound:"Cuenta no encontrada",accountInformation:"Información de Cuenta",accountPurpose:"Propósito de la cuenta",transactionHistory:"Historial de Transacciones",noTransactions:"No se encontraron transacciones para esta cuenta",createdDate:"Fecha de Creación",lastModified:"Última Modificación",noDescription:"No se proporcionó descripción.",totalCount:"Conteo total",basicDetails:"Detalles básicos",currentBalance:"Saldo actual",classification:"Clasificación",allTransactions:"Todas las transacciones de la cuenta",reference:"Referencia",types:{asset:"Activo",liability:"Pasivo",equity:"Patrimonio",revenue:"Ingreso",expense:"Gasto"},categories:{currentAssets:"Activos Corrientes",fixedAssets:"Activos Fijos",currentLiabilities:"Pasivos Corrientes",longTermLiabilities:"Pasivos a Largo Plazo",ownersEquity:"Patrimonio del Propietario",operatingRevenue:"Ingresos Operacionales",operatingExpenses:"Gastos Operacionales"}},inventory:{title:"Gestión de Inventario",overview:"Resumen",products:"Productos y Stock",movements:"Movimientos",locations:"Ubicaciones",bulkMovement:"Movimiento Masivo",addMovement:"Agregar Movimiento",addProduct:"Agregar Producto",addLocation:"Agregar Ubicación",singleMovement:"Agregar Movimiento Individual",addNewItem:"Agregar Nuevo Artículo",activeProducts:"Productos Activos",lowStockAlert:"Artículos con Stock Bajo",totalValue:"Valor Total del Stock",activeLocations:"Ubicaciones Activas",productsNeedRestocking:"productos necesitan reabastecimiento",recentMovements:"Movimientos Recientes",noProducts:"No hay productos en esta ubicación",productName:"Nombre del Producto",productCode:"Código del Producto",sku:"SKU",category:"Categoria",unitOfMeasure:"Unidad de Medida",unitCost:"Costo Unitario",minStockLevel:"Nivel Mínimo de Stock",maxStockLevel:"Nivel Máximo de Stock",locationName:"Nombre de Ubicación",locationType:"Tipo de Ubicación",locationCode:"Código de Ubicación",movementType:"Tipo de Movimiento",referenceNumber:"Número de Referencia",invoiceNumber:"Número de Factura",fromLocation:"Desde Ubicación",toLocation:"Hacia Ubicación",stockIn:"Entrada de Stock",stockOut:"Salida de Stock",transfer:"Transferencia",adjustment:"Ajuste",inStock:"En Stock",lowStock:"Stock Bajo",outOfStock:"Sin Stock",stockLevels:"Niveles de Stock",stockByLocation:"Stock por Ubicación",searchProducts:"Buscar productos...",searchLocations:"Buscar ubicaciones...",noMovements:"No se encontraron movimientos",productDetails:"Detalles del Producto",locationDetails:"Detalles de Ubicación",movementDetails:"Detalles del Movimiento",totalProducts:"Total de Productos",totalLocations:"Total de Ubicaciones",lastSeen:"Visto por última vez",warehouseType:"Almacén",storeType:"Tienda",supplierType:"Proveedor",customerType:"Cliente",currentlyManaged:"Gestionados actualmente",needAttention:"Necesitan atención",currentWorth:"Valor actual",warehousesStores:"Almacenes y tiendas",thisMonth:"Este Mes",latestActivities:"Últimas actividades de inventario",searchMovements:"Buscar Movimientos",countingSheet:"Hoja de Conteo",physicalCount:"Conteo Físico",physicalInventoryCount:"Conteo Físico de Inventario",setupPhysicalCount:"Configurar Conteo Físico de Inventario",setupDescription:"Configure los ajustes de su conteo físico de inventario y comience el proceso de conteo.",countWillInclude:"Este conteo incluirá {{count}} productos de {{location}} en la categoría {{category}}.",startCounting:"Iniciar Conteo Físico",counted:"Contado",remaining:"Restante",variances:"Variaciones",complete:"Completo",systemQty:"Cant. Sistema",variance:"Variación",addNotes:"Agregar notas...",reviewAndConfirm:"Revisar y Confirmar Ajustes",reviewDescription:"Revise los ajustes de inventario a continuación y confirme para actualizar su sistema.",stockIncreases:"Aumentos de Stock",stockDecreases:"Disminuciones de Stock",totalAdjustments:"Ajustes Totales",confirmAdjustments:"Confirmar Ajustes",perfectCount:"¡Conteo Perfecto!",noVariances:"No se encontraron variaciones. Su conteo físico coincide exactamente con el sistema.",physicalCountAdjustment:"Ajuste de conteo físico",inventoryCountingSheetTitle:"HOJA DE CONTEO DE INVENTARIO",location:"Ubicación",allCategories:"Todas las Categorías",countedBy:"Contado por",verifiedBy:"Verificado por",instructions:"Instrucciones",countInstructions:["Contar todos los artículos físicamente presentes en esta ubicación",'Escribir el conteo real en la columna "Conteo Físico"',"Dejar en blanco si el artículo no se encuentra",'Anotar cualquier discrepancia en la columna "Notas"',"Firmar y fechar cuando esté completo"],unit:"Unidad",totalProductsListed:"Total de Productos Listados",itemsCounted:"Artículos Contados",summaryFor:"RESUMEN PARA",discrepanciesFound:"Discrepancias Encontradas",counterSignature:"Firma del Contador",supervisorSignature:"Firma del Supervisor",downloadCSV:"Descargar CSV",noAdjustmentsToDownload:"No hay ajustes para descargar",stockIncrease:"Aumento de Stock",stockDecrease:"Disminución de Stock",purchaseReceive:"Compra/Recepción",saleIssue:"Venta/Emisión",generalNotesPlaceholder:"Ingrese notas generales para este movimiento...",sortBy:"Ordenar Por",allLocations:"Todas las Ubicaciones",searchByProduct:"Buscar por producto, ubicación, referencia, notas, factura...",allProducts:"Todos los Productos",bulkMovementReport:"Reporte de Movimiento en Lote",totalQuantity:"Cantidad Total",estimatedValue:"Valor Estimado",viewHistoricalReports:"Ver Reportes Históricos",noBulkReportsFound:"No se encontraron reportes de movimientos en lote",bulkReportsAppearHere:"Los reportes de movimientos en lote aparecerán aquí después de crear movimientos en lote",allTypes:"Todos los Tipos",startDate:"Fecha de Inicio",endDate:"Fecha de Fin",totalMovements:"Movimientos Totales",adjustMovements:"Intenta ajustar tus filtros o revisa más tarde.",inventoryMovements:"Movimientos de Inventario",createdBy:"Creado Por",view:"Ver",enhanced:"Mejorado",legacy:"Clásico",addSingleMovement:"Agregar Movimiento Individual",inStockSubtitle:"En stock",itemsBelowThreshold:"Artículos bajo el umbral",inventoryWorth:"Valor del inventario",quantity:"Cantidad",units:"unidades",normal:"Normal",productsAndStock:"Productos y Stock",lowStockItems:"Artículos con Stock Bajo",totalStockValue:"Valor Total del Stock",warehousesAndStores:"Almacenes y tiendas",andMore:"...y {count} más",latestInventoryActivities:"Últimas actividades de inventario",min:"Mín",max:"Máx",cost:"Costo",noProductsFound:"No se encontraron productos que coincidan con su búsqueda.",noProductsAvailable:"No hay productos disponibles.",noLocationsFound:"No se encontraron ubicaciones que coincidan con su búsqueda.",noLocationsAvailable:"No hay ubicaciones disponibles.",searchPlaceholder:"Buscar por producto, ubicación, referencia, notas, factura...",noMovementsFound:"No se encontraron movimientos",tryAdjustingFilters:"Intenta ajustar tus filtros o revisa más tarde.",transfers:"Transferencias",adjustments:"Ajustes",bulk:"Masivo",product:"Producto",store:"Tienda",supplier:"Proveedor",warehouse:"Almacén",movement:"Movimiento",editMovement:"Editar Movimiento",updateMovement:"Actualizar Movimiento",movementInformation:"Información del Movimiento",locationInformation:"Información de Ubicación",searchProductsImages:"Buscar productos para ver imágenes...",searchForProducts:"Buscar Productos",startTypingToSearch:"Comienza a escribir para buscar y ver imágenes de productos",tryDifferentSearch:"Prueba con un término de búsqueda diferente"},employees:{title:"Gestión de Empleados",employeeList:"Lista de Empleados",addEmployee:"Agregar Empleado",editEmployee:"Editar Empleado",employeeDetails:"Detalles del Empleado",personalInfo:"Información Personal",employmentInfo:"Información Laboral",payrollInfo:"Información de Nómina",firstName:"Nombre",lastName:"Apellido",fullName:"Nombre Completo",email:"Correo Electrónico",phone:"Teléfono",address:"Dirección",dateOfBirth:"Fecha de Nacimiento",employeeId:"ID de Empleado",department:"Departamento",position:"Puesto",hireDate:"Fecha de Contratación",employmentStatus:"Estado Laboral",salary:"Salario",payFrequency:"Frecuencia de Pago",taxId:"ID Fiscal",bankAccount:"Cuenta Bancaria",emergencyContact:"Contacto de Emergencia",activeEmployees:"Empleados Activos",inactiveEmployees:"Empleados Inactivos",totalPayroll:"Nómina Total",searchEmployees:"Buscar empleados...",enterFullName:"Ingrese el nombre completo del empleado",enterPosition:"Ingrese el puesto de trabajo",enterEmail:"Ingrese la dirección de correo electrónico",enterPhone:"Ingrese el número de teléfono",enterSalary:"Ingrese el salario anual",departments:{engineering:"Ingeniería",product:"Producto",design:"Diseño",marketing:"Marketing",sales:"Ventas",humanResources:"Recursos Humanos",finance:"Finanzas",operations:"Operaciones",analytics:"Analítica"}},entryBooks:{title:"Libros de Entrada",bookName:"Nombre del Libro",bookType:"Tipo de Libro",createBook:"Crear Libro",editBook:"Editar Libro",salesBook:"Libro de Ventas",purchaseBook:"Libro de Compras",cashBook:"Libro de Caja",generalBook:"Libro General",entries:"Entradas",addEntry:"Agregar Entrada",period:"Período",startDate:"Fecha de Inicio",endDate:"Fecha de Fin",bookBalance:"Saldo del Libro",reconciledBalance:"Saldo Conciliado",difference:"Diferencia",reconcile:"Conciliar",isReconciled:"Está Conciliado",noBooks:"No se encontraron libros de entrada",createFirst:"Crea tu primer libro de entrada para comenzar",bookDetails:"Detalles del Libro",entriesCount:"entradas",bookOverview:"Resumen y detalles del libro",bookEntries:"Entradas del Libro",allEntries:"Todas las entradas en este libro",noEntries:"No se encontraron entradas",addFirst:"Agrega tu primera entrada a este libro",entryDate:"Fecha de Entrada",entryDescription:"Descripción de Entrada",entryAmount:"Monto de Entrada",entryReference:"Referencia de Entrada"},banking:{title:"Consolidación Bancaria",bankAccount:"Cuenta Bancaria",statementDate:"Fecha del Estado",beginningBalance:"Saldo Inicial",endingBalance:"Saldo Final",deposits:"Depósitos",withdrawals:"Retiros",bankCharges:"Cargos Bancarios",interest:"Intereses",reconcile:"Conciliar",matched:"Conciliado",unmatched:"No Conciliado",importStatement:"Importar Estado",manualEntry:"Entrada Manual",autoMatch:"Coincidencia Automática",clearAll:"Limpiar Todo",reconciliationStatus:"Estado de Conciliación",difference:"Diferencia",bookBalance:"Saldo en Libros",statementBalance:"Saldo del Estado",outstandingChecks:"Cheques Pendientes",depositsInTransit:"Depósitos en Tránsito",reconciled:"Conciliado",notReconciled:"No Conciliado",unreconciled:"No Conciliado",reconciliation:"Conciliación",compareStatements:"Comparar estados bancarios con registros de libros de entrada",importCSV:"Importar CSV",startNewReconciliation:"Iniciar Nueva Conciliación",bankAccountInfo:"Información de Cuenta Bancaria",currentAccountDetails:"Detalles de cuenta actual",lastReconciled:"Última conciliación",bankTransactions:"Transacciones Bancarias",selectedPeriod:"Período seleccionado",pending:"pendiente",bookEntriesForComparison:"Entradas de libros para comparación",reconciliationRate:"Tasa de Conciliación",completionStatus:"Estado de finalización",recentReconciliationSessions:"Sesiones de Conciliación Recientes",latestActivity:"Actividad reciente",noRecentSessions:"No se encontraron sesiones de conciliación recientes.",startFirstReconciliation:"Iniciar Primera Conciliación",entryBookRecords:"Registros de Libros de Entrada",pleaseUploadCSV:"Por favor suba un archivo CSV",csvRequiresHeaderAndData:"El archivo CSV debe tener al menos un encabezado y una fila de datos",successfullyParsed:"Se analizaron exitosamente {count} filas",errorParsingCSV:"Error al analizar el archivo CSV. Verifique el formato.",dateDescriptionRequired:"Las columnas de Fecha y Descripción son requeridas",importedTransaction:"Transacción importada",successfullyImported:"Se importaron exitosamente {count} transacciones bancarias",errorImportingTransactions:"Error al importar transacciones. Verifique sus datos.",importBankStatementCSV:"Importar CSV de Estado Bancario",dropCSVHere:"Suelte el archivo CSV aquí",clickToUploadCSV:"Haga clic para cargar o arrastre y suelte el archivo CSV",supportedFormat:"Formato soportado: CSV con columnas de Fecha, Descripción y Monto",mapCSVColumns:"Mapear Columnas CSV",dateColumn:"Columna de Fecha",selectColumn:"Seleccionar columna...",descriptionColumn:"Columna de Descripción",referenceColumn:"Columna de Referencia",amountDebitColumn:"Columna de Monto/Débito",creditColumn:"Columna de Crédito",balanceColumn:"Columna de Saldo",andMoreRows:"... y {count} filas más",importing:"Importando...",importTransactions:"Importar {count} Transacciones",reconciliationComparison:"Comparación de Conciliación",bankStatements:"Estados Bancarios",totalTransactions:"Transacciones totales",totalEntries:"Entradas totales",unreconciledBank:"Banco No Conciliado",unreconciledBooks:"Libros No Conciliados",needAttention:"Necesitan atención",unreconcile:"Desconciliar",clickToReconcile:"Hacer clic para conciliar",potentialMatchesFound:"Coincidencias Potenciales Encontradas",clickRecordToReconcile:"Haga clic en un registro a continuación para conciliar",exactMatch:"Coincidencia Exacta",possibleMatch:"Posible Coincidencia",selected:"Seleccionado",clearSelection:"Limpiar Selección"},journal:{title:"Asientos Contables",entryNumber:"Número de Asiento",entryDate:"Fecha del Asiento",debit:"Débito",credit:"Crédito",account:"Cuenta",memo:"Memo",reference:"Referencia",createEntry:"Crear Asiento",editEntry:"Editar Asiento",deleteEntry:"Eliminar Asiento",posted:"Registrado",draft:"Borrador",reversed:"Revertido",recurringEntry:"Asiento Recurrente",attachments:"Adjuntos",totalDebits:"Débitos Totales",totalCredits:"Créditos Totales",outOfBalance:"Desbalanceado",balanced:"Balanceado"},forms:{requiredField:"Este campo es requerido",invalidEmail:"Dirección de correo inválida",invalidNumber:"Número inválido",invalidDate:"Fecha inválida",selectOption:"Por favor seleccione una opción",enterValue:"Por favor ingrese un valor",confirmDelete:"¿Está seguro de que desea eliminar este elemento?",unsavedChanges:"Tiene cambios sin guardar. ¿Desea continuar?",saveSuccess:"Guardado exitosamente",saveError:"Error al guardar datos",deleteSuccess:"Eliminado exitosamente",deleteError:"Error al eliminar elemento",duplicateAccountNumber:"El número de cuenta ya existe",referenceNumberRequired:"El número de referencia es requerido",locationRequired:"La ubicación es requerida",fromLocationRequired:"La ubicación de origen es requerida para transferencias",atLeastOneProduct:"Al menos un producto es requerido",itemProductRequired:"El producto es requerido para el artículo {{index}}",itemQuantityRequired:"La cantidad debe ser mayor que 0 para el artículo {{index}}"},modals:{addInventory:"Agregar Movimiento de Inventario",bulkMovement:"Movimiento Masivo de Inventario",addProduct:"Agregar Nuevo Producto",addLocation:"Agregar Nueva Ubicación",inventoryDetail:"Detalles del Artículo de Inventario",quickAdd:"Agregar Rápido",selectProduct:"Seleccionar Producto",selectLocation:"Seleccionar Ubicación",enterQuantity:"Ingresar cantidad",enterCost:"Ingresar costo unitario",enterReference:"Ingresar número de referencia",addNotes:"Agregar notas (opcional)",generalInformation:"Información General",stockInformation:"Información de Stock",locationInformation:"Información de Ubicación",movementInformation:"Información de Movimiento",addToInventory:"Agregar al Inventario",createProduct:"Crear Producto",createLocation:"Crear Ubicación",processing:"Procesando...",addingMovement:"Agregando movimiento...",creatingProduct:"Creando producto...",creatingLocation:"Creando ubicación..."},products:{title:"Productos",addNew:"Agregar Nuevo Producto",totalProducts:"Total de Productos",inCatalog:"En catálogo",activeProducts:"Productos Activos",currentlyAvailable:"Actualmente disponibles",outOfStock:"Sin Stock",needsRestock:"Necesita reabastecimiento",productCatalog:"Catálogo de Productos",manageYourProducts:"Gestiona tus productos y precios",inStock:"En Stock",furniture:"Muebles",electronics:"Electrónicos",supplies:"Suministros",lighting:"Iluminación"},invoices:{title:"Panel de Facturas",invoice:"Factura",invoices:"Facturas",invoiceNumber:"Número de Factura",invoiceDetails:"Detalles de Factura",customerInformation:"Información del Cliente",customerName:"Nombre del Cliente",legalName:"Nombre Legal",contactInformation:"Información de Contacto",idPassport:"ID/Pasaporte",phoneNumber:"Número de Teléfono",altPhone:"Teléfono Alt.",address:"Dirección",between:"Entre",and:"y",products:"Productos",reservations:"Reservaciones",services:"Servicios",unitPrice:"Precio Unitario",total:"Total",subtotal:"Subtotal",category:"Categoria",totalRevenue:"Ingresos Totales",totalProducts:"Total de Productos",totalReservations:"Total de Reservaciones",aranceles:"Aranceles (Aduanas)",uniqueCustomers:"Clientes Únicos",averageInvoice:"Factura Promedio",completed:"Completada",pending:"Pendiente",storesActive:"Tiendas Activas",topProducts:"Productos Principales",mostSoldProducts:"Productos más vendidos por cantidad",reservationsByType:"Reservaciones por Tipo",distributionOfCategories:"Distribución de categorías de reservaciones",recentInvoices:"Facturas Recientes",showingInvoices:"Mostrando {{count}} facturas",date:"Fecha",customer:"Cliente",store:"Tienda",actions:"Acciones",view:"Ver",status:"Estado",printInvoice:"Imprimir Factura",exportPdf:"Exportar PDF",backToDashboard:"Volver al Panel",fromInvoices:"De {{count}} facturas",value:"valor",activeCustomers:"Clientes activos",perInvoiceValue:"Valor por factura",locations:"Ubicaciones",mostRecentActivity:"Actividad más reciente",storeLocation:"Ubicación de Tienda",allStores:"Todas las Tiendas",fromDate:"Fecha Desde",toDate:"Fecha Hasta",clearFilters:"Limpiar Filtros",search:"Buscar",searchPlaceholder:"Buscar por # factura, cliente, tienda...",customsFees:"Aranceles totales",salesType:"VENTAS",packagesOrder:"Orden de Paquetes",businessId:"ID de Negocio",orderKey:"Clave de Orden",reservationType:"Tipo de Reservación",arancel:"Arancel",key:"Clave",noInvoicesFound:"No se encontraron facturas",loadingInvoices:"Cargando facturas...",errorLoadingInvoices:"Error al cargar facturas",refreshData:"Actualizar Datos",currentStockValue:"Valor de Stock Actual",filterByStore:"Filtrar por tienda",filterByDate:"Filtrar por rango de fechas",totalCustomsFees:"Aranceles totales",averageValue:"Valor promedio",senderInformation:"Información del Remitente",receiptInformation:"Información del Destinatario",productsSubtotal:"Subtotal de Productos",reservationsSubtotal:"Subtotal de Reservaciones",servicesSubtotal:"Subtotal de Servicios",code:"Código",description:"Descripción",qty:"Cant.",type:"Tipo",id:"ID",passport:"Pasaporte"},unauthorized:{title:"Acceso Restringido",accessDenied:"Acceso Denegado",noPermission:"No tienes permisos para acceder a",thisFeature:"esta funcionalidad",whySeeing:"¿Por qué veo esto?",explanation:"Tu cuenta no tiene los permisos necesarios para ver este contenido.",requiredPermission:"Permiso requerido:",goToDashboard:"Ir al Panel de Control",goBack:"Regresar",featuresCanAccess:"Funcionalidades a las que puedes acceder:",dashboardAccess:"Panel de control y estadísticas generales",profileAccess:"Tu perfil y configuraciones",roleBasedAccess:"Funcionalidades habilitadas para tu rol",needAccess:"¿Necesitas acceso? Contacta a tu administrador o gerente para solicitar los permisos apropiados.",permissions:{accountAccess:"Acceso a Gestión de Cuentas",inventoryAccess:"Acceso a Inventario",employeeAccess:"Acceso a Recursos Humanos",bankingAccess:"Acceso Bancario",journalAccess:"Acceso a Asientos Contables",adminAccess:"Acceso Administrativo",financialReporting:"Acceso a Reportes Financieros",invoiceManagement:"Acceso a Gestión de Facturas",productManagement:"Acceso a Gestión de Productos"}}}},DL=()=>{if(typeof window<"u"){const t=localStorage.getItem("hrmfinance-language");if(t&&["en","es"].includes(t))return t}return"en"},[mv,LL]=Ae(DL()),pr=()=>({t:(n,i,o)=>{const s=mv(),a=n.split(".");let l=RL[s];for(const u of a)if(l&&typeof l=="object"&&u in l)l=l[u];else return i||n;let d=typeof l=="string"?l:i||n;return o&&typeof d=="string"&&Object.keys(o).forEach(u=>{const h=o[u],f=`{{${u}}}`;d=d.replace(new RegExp(f,"g"),String(h))}),d},language:()=>mv(),setLanguage:n=>{LL(n),typeof window<"u"&&localStorage.setItem("hrmfinance-language",n)},currentLanguage:mv});var $L=le("<div><label></label><select><option value>"),FL=le("<span>*"),ML=le("<option>");const Nn=t=>{const{t:e}=pr(),r={display:"block","font-weight":"500","margin-bottom":"0.5rem",color:"var(--text-primary)"},n={width:"100%",padding:"0.75rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"1rem","font-family":"inherit",background:"var(--surface-color)",color:"var(--text-primary)",transition:"border-color 0.2s ease"},i={"margin-bottom":"1rem"};return(()=>{var o=$L(),s=o.firstChild,a=s.nextSibling,l=a.firstChild;return y(o,i),y(s,r),c(s,()=>t.label,null),c(s,(()=>{var d=Ve(()=>!!t.required);return()=>d()&&(()=>{var u=FL();return u.style.setProperty("color","var(--primary-color)"),u})()})(),null),a.addEventListener("blur",d=>d.target.style.borderColor="var(--border-color)"),a.addEventListener("focus",d=>d.target.style.borderColor="var(--primary-color)"),a.addEventListener("change",d=>t.onChange(d.target.value)),y(a,n),c(l,()=>e("forms.selectOption")),c(a,()=>t.options.map(d=>(()=>{var u=ML();return c(u,()=>d.label),be(()=>u.value=d.value),u})()),null),be(d=>{var u=t.required,h=t.disabled;return u!==d.e&&(a.required=d.e=u),h!==d.t&&(a.disabled=d.t=h),d},{e:void 0,t:void 0}),be(()=>a.value=t.value),o})()};var OL=le("<main><div>"),BL=le("<header><h1>");const Bo=t=>{const e={"min-height":"100vh",background:"var(--background-color)"},r={"max-width":"1200px",margin:"0 auto",padding:"2rem"},n={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"2rem"},i={"font-size":"2rem","font-weight":"700",color:"var(--text-primary)",margin:"0"};return(()=>{var o=OL(),s=o.firstChild;return y(o,e),y(s,r),c(s,(()=>{var a=Ve(()=>!!t.title);return()=>a()&&(()=>{var l=BL(),d=l.firstChild;return y(l,n),y(d,i),c(d,()=>t.title),l})()})(),null),c(s,()=>t.children,null),o})()};var jL=le("<div><span></span><select><option value=en>🇺🇸 </option><option value=es>🇪🇸 ");const VL=()=>{const{t,language:e,setLanguage:r}=pr(),n={display:"flex","align-items":"center",gap:"0.5rem","margin-left":"auto"},i={padding:"0.5rem 1rem","border-radius":"var(--border-radius-sm)",border:"1px solid var(--border-color)",background:"var(--surface-color)",color:"var(--text-primary)",cursor:"pointer","font-size":"0.875rem","font-weight":"500",transition:"all 0.2s ease","min-width":"120px"},o={"font-weight":"500",color:"var(--text-muted)","font-size":"0.875rem"},s=a=>{const l=a.target;r(l.value)};return(()=>{var a=jL(),l=a.firstChild,d=l.nextSibling,u=d.firstChild;u.firstChild;var h=u.nextSibling;return h.firstChild,y(a,n),y(l,o),d.addEventListener("change",s),y(d,i),c(u,()=>t("common.english"),null),c(h,()=>t("common.spanish"),null),be(()=>d.value=e()),a})()},zL={finance:{name:"finance",category:"finance",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V21C3 22.1 3.9 23 5 23H19C20.1 23 21 22.1 21 21V9M19 21H5V3H13V9H19Z"/></svg>'},accounts:{name:"accounts",category:"finance",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 3V21H21V19H5V3H3M9 17H7V10H9V17M13 17H11V7H13V17M17 17H15V13H17V17Z"/></svg>'},books:{name:"books",category:"finance",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 2L14 6.5V17.5L19 13V2M6.5 5C4.55 5 2.45 5.4 1 6.5V21.16C1 21.41 1.25 21.66 1.5 21.66C1.6 21.66 1.65 21.59 1.75 21.59C3.1 20.94 5.05 20.5 6.5 20.5C8.45 20.5 10.55 20.9 12 22C13.35 21.15 15.8 20.5 17.5 20.5C19.15 20.5 20.85 20.81 22.25 21.56C22.35 21.61 22.4 21.59 22.5 21.59C22.75 21.59 23 21.34 23 21.09V6.5C22.4 6.05 21.75 5.75 21 5.5V19C19.9 18.65 18.7 18.5 17.5 18.5C15.8 18.5 13.35 19.15 12 20V6.5C10.55 5.4 8.45 5 6.5 5Z"/></svg>'},"balance-sheet":{name:"balance-sheet",category:"finance",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M7 14H9V8H7V14M11 14H13V8H11V14M15 14H17V8H15V14M5 21H19V19H5V21M5 7H19V5H5V7Z"/></svg>'},bank:{name:"bank",category:"finance",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M11.5 1L2 6V8H22V6M16 10V17H20V10M4 10V17H8V10M10 10V17H14V10M2 19H22V21H2Z"/></svg>'},"automation-target":{name:"automation-target",category:"finance",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C17.5 2 22 6.5 22 12S17.5 22 12 22 2 17.5 2 12 6.5 2 12 2M12 4C7.58 4 4 7.58 4 12S7.58 20 12 20 20 16.42 20 12 16.42 4 12 4M12 6C15.31 6 18 8.69 18 12S15.31 18 12 18 6 15.31 6 12 8.69 6 12 6M12 8C9.79 8 8 9.79 8 12S9.79 16 12 16 16 14.21 16 12 14.21 8 12 8M12 10C13.1 10 14 10.9 14 12S13.1 14 12 14 10 13.1 10 12 10.9 10 12 10Z"/></svg>'},"automation-bolt":{name:"automation-bolt",category:"finance",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M7 2V13H10V22L17 10H13L17 2H7Z"/></svg>'},operations:{name:"operations",category:"operations",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L2 7L12 12L22 7L12 2M2 17L12 22L22 17M2 12L12 17L22 12"/></svg>'},inventory:{name:"inventory",category:"operations",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L2 7L12 12L22 7L12 2M2 17L12 22L22 17M2 12L12 17L22 12"/></svg>'},invoice:{name:"invoice",category:"operations",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3M19 19H5V5H19V19M17 17H7V15H17V17M17 13H7V11H17V13M17 9H7V7H17V9Z"/></svg>'},shipping:{name:"shipping",category:"operations",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 4H16.5L21 8.5V17H18.5C18.5 18.38 17.38 19.5 16 19.5S13.5 18.38 13.5 17H8.5C8.5 18.38 7.38 19.5 6 19.5S3.5 18.38 3.5 17H1V6C1 4.89 1.89 4 3 4M16 18C16.55 18 17 17.55 17 17S16.55 16 16 16 15 16.45 15 17 15.45 18 16 18M6 18C6.55 18 7 17.55 7 17S6.55 16 6 16 5 16.45 5 17 5.45 18 6 18M15 8.5H19.5L16.5 5.5H15V8.5Z"/></svg>'},passport:{name:"passport",category:"operations",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M14 2H6C4.89 2 4 2.89 4 4V20C4 21.11 4.89 22 6 22H18C19.11 22 20 21.11 20 20V8L14 2M18 20H6V4H13V9H18V20M16 11H8V13H16V11M16 15H8V17H16V15M12 6.5C13.38 6.5 14.5 7.62 14.5 9S13.38 11.5 12 11.5 9.5 10.38 9.5 9 10.62 6.5 12 6.5Z"/></svg>'},management:{name:"management",category:"management",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M16 4C18.2 4 20 5.8 20 8S18.2 12 16 12C13.8 12 12 10.2 12 8S13.8 4 16 4M16 13C18.67 13 22 14.33 22 17V20H10V17C10 14.33 13.33 13 16 13M8 12C10.21 12 12 10.21 12 8S10.21 4 8 4 4 5.79 4 8 5.79 12 8 12M8 13C5.33 13 0 14.33 0 17V20H8V17.5C8 15.5 8.5 13.7 9.5 13.2C9 13.1 8.5 13 8 13Z"/></svg>'},employees:{name:"employees",category:"management",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M16 4C18.2 4 20 5.8 20 8S18.2 12 16 12C13.8 12 12 10.2 12 8S13.8 4 16 4M16 13C18.67 13 22 14.33 22 17V20H10V17C10 14.33 13.33 13 16 13M8 12C10.21 12 12 10.21 12 8S10.21 4 8 4 4 5.79 4 8 5.79 12 8 12M8 13C5.33 13 0 14.33 0 17V20H8V17.5C8 15.5 8.5 13.7 9.5 13.2C9 13.1 8.5 13 8 13Z"/></svg>'},admin:{name:"admin",category:"management",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M5 16L3 14L5 12L10 17L21 6L23 8L10 21L5 16Z"/></svg>'},dashboard:{name:"dashboard",category:"navigation",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M10 20V14H14V20H19V12H22L12 3L2 12H5V20H10Z"/></svg>'},add:{name:"add",category:"actions",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 13H13V19H11V13H5V11H11V5H13V11H19V13Z"/></svg>'},delete:{name:"delete",category:"actions",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 4H15.5L14.5 3H9.5L8.5 4H5V6H19M6 19C6 20.1 6.9 21 8 21H16C17.1 21 18 20.1 18 19V7H6V19Z"/></svg>'},edit:{name:"edit",category:"actions",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M20.71 7.04C21.1 6.65 21.1 6 20.71 5.63L18.37 3.29C18 2.9 17.35 2.9 16.96 3.29L15.12 5.12L18.87 8.87M3 17.25V21H6.75L17.81 9.93L14.06 6.18L3 17.25Z"/></svg>'},save:{name:"save",category:"actions",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M15 9H5V5H15M12 19C9.24 19 7 16.76 7 14S9.24 9 12 9 17 11.24 17 14 14.76 19 12 19M17 3H5C3.89 3 3 3.89 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V7L17 3Z"/></svg>'},print:{name:"print",category:"actions",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M18 3H6V7H18M19 12C18.4 12 18 11.6 18 11S18.4 10 19 10 20 10.4 20 11 19.6 12 19 12M16 19H8V14H16M19 8H5C3.9 8 3 8.9 3 10V17H6V21H18V17H21V10C21 8.9 20.1 8 19 8Z"/></svg>'},search:{name:"search",category:"actions",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M9.5 3C13.09 3 16 5.91 16 9.5C16 11.11 15.41 12.59 14.44 13.73L14.71 14H15.5L20.5 19L19 20.5L14 15.5V14.71L13.73 14.44C12.59 15.41 11.11 16 9.5 16C5.91 16 3 13.09 3 9.5S5.91 3 9.5 3M9.5 5C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>'},clear:{name:"clear",category:"actions",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"/></svg>'},close:{name:"close",category:"actions",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z"/></svg>'},copy:{name:"copy",category:"actions",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 21H8V7H19M19 5H8C6.9 5 6 5.9 6 7V21C6 22.1 6.9 23 8 23H19C20.1 23 21 22.1 21 21V7C21 5.9 20.1 5 19 5M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1Z"/></svg>'},file:{name:"file",category:"actions",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2M18 20H6V4H13V9H18V20Z"/></svg>'},success:{name:"success",category:"status",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V21C3 22.1 3.9 23 5 23H19C20.1 23 21 22.1 21 21V9M19 21H5V3H13V9H19Z"/></svg>'},warning:{name:"warning",category:"status",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M1 21H23L12 2L1 21M13 18H11V16H13V18M13 14H11V10H13V14Z"/></svg>'},error:{name:"error",category:"status",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C17.5 2 22 6.5 22 12S17.5 22 12 22 2 17.5 2 12 6.5 2 12 2M12 4C7.58 4 4 7.58 4 12S7.58 20 12 20 20 16.42 20 12 16.42 4 12 4M15.59 7L12 10.59L8.41 7L7 8.41L10.59 12L7 15.59L8.41 17L12 13.41L15.59 17L17 15.59L13.41 12L17 8.41L15.59 7Z"/></svg>'},info:{name:"info",category:"status",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM12 8C13.1 8 14 8.9 14 10V20C14 21.1 13.1 22 12 22S10 21.1 10 20V10C10 8.9 10.9 8 12 8Z"/></svg>'},loading:{name:"loading",category:"status",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 4V2C17.5 2 22 6.5 22 12H20C20 7.58 16.42 4 12 4Z"><animateTransform attributeName="transform" type="rotate" values="0 12 12;360 12 12" dur="1s" repeatCount="indefinite"/></path></svg>'},monitor:{name:"monitor",category:"products",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M21 16H3V4H21M21 2H3C1.89 2 1 2.89 1 4V16C1 17.1 1.89 18 3 18H10V20H8V22H16V20H14V18H21C22.1 18 23 17.1 23 16V4C23 2.89 22.1 2 21 2Z"/></svg>'},tv:{name:"tv",category:"products",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M21 17H3V5H21M21 3H3C1.89 3 1 3.89 1 5V17C1 18.1 1.89 19 3 19H8V21H16V19H21C22.1 19 23 18.1 23 17V5C23 3.89 22.1 3 21 3Z"/></svg>'},laptop:{name:"laptop",category:"products",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M4 6H20V16H4M20 18C21.11 18 22 17.11 22 16V6C22 4.89 21.11 4 20 4H4C2.89 4 2 4.89 2 6V16C2 17.11 2.89 18 4 18H0V20H24V18H20Z"/></svg>'},generator:{name:"generator",category:"products",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M7 2V13H10V22L17 10H13L17 2H7Z"/></svg>'},power:{name:"power",category:"products",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M16.56 5.44L15.11 6.89C16.84 7.94 18 9.83 18 12C18 15.31 15.31 18 12 18S6 15.31 6 12C6 9.83 7.16 7.94 8.88 6.88L7.44 5.44C5.36 6.88 4 9.28 4 12C4 16.42 7.58 20 12 20S20 16.42 20 12C20 9.28 18.64 6.88 16.56 5.44M13 3H11V13H13"/></svg>'},sound:{name:"sound",category:"products",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M14 3.23V5.29C16.89 6.15 19 8.83 19 12C19 15.17 16.89 17.84 14 18.7V20.77C18 19.86 21 16.28 21 12C21 7.72 18 4.14 14 3.23M16.5 12C16.5 10.23 15.5 8.71 14 7.97V16C15.5 15.29 16.5 13.76 16.5 12M3 9V15H7L12 20V4L7 9H3Z"/></svg>'},printer:{name:"printer",category:"products",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M18 3H6V7H18M19 12C18.4 12 18 11.6 18 11S18.4 10 19 10 20 10.4 20 11 19.6 12 19 12M16 19H8V14H16M19 8H5C3.9 8 3 8.9 3 10V17H6V21H18V17H21V10C21 8.9 20.1 8 19 8Z"/></svg>'},fax:{name:"fax",category:"products",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M4 6H2V20C2 21.11 2.89 22 4 22H18V20H4V6M20 2H8C6.89 2 6 2.89 6 4V16C6 17.11 6.89 18 8 18H20C21.11 18 22 17.11 22 16V4C22 2.89 21.11 2 20 2M20 12H8V14H20V12M20 8H8V10H20V8M20 4H8V6H20V4Z"/></svg>'},refrigerator:{name:"refrigerator",category:"products",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M9 2H15C16.1 2 17 2.9 17 4V9H15V4H9V9H7V4C7 2.9 7.9 2 9 2M7 10V20C7 21.1 7.9 22 9 22H15C16.1 22 17 21.1 17 20V10H7M15 11V13H13V11H15M15 14V17H13V14H15Z"/></svg>'},fan:{name:"fan",category:"products",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 11C12.6 11 13 11.4 13 12S12.6 13 12 13 11 12.6 11 12 11.4 11 12 11M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2M12 22L10.91 15.74L2 15L10.91 14.26L12 8L13.09 14.26L22 15L13.09 15.74L12 22Z"/></svg>'},coffee:{name:"coffee",category:"products",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M2 19H20L18 17H4L2 19M5 4V7H3V9H4V14H18V9H19V7H17V4H5M7 6H15V7H7V6Z"/></svg>'},microphone:{name:"microphone",category:"products",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C13.1 2 14 2.9 14 4V10C14 11.1 13.1 12 12 12S10 11.1 10 10V4C10 2.9 10.9 2 12 2M19 10V12C19 15.9 15.9 19 12 19S5 15.9 5 12V10H7V12C7 14.8 9.2 17 12 17S17 14.8 17 12V10H19M12 19.9V22H8V24H16V22H12V19.9Z"/></svg>'},robot:{name:"robot",category:"system",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V21C3 22.1 3.9 23 5 23H19C20.1 23 21 22.1 21 21V9M19 21H5V3H13V9H19Z"/></svg>'},hand:{name:"hand",category:"system",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M23 15C23 18.31 20.31 21 17 21C14.98 21 13.2 20.23 12 18.95C10.8 20.23 9.02 21 7 21C3.69 21 1 18.31 1 15V9C1 8.45 1.45 8 2 8S3 8.45 3 9V15C3 17.21 4.79 19 7 19S11 17.21 11 15V11C11 9.9 11.9 9 13 9S15 9.9 15 11V15C15 17.21 16.79 19 19 19S23 17.21 23 15V9C23 8.45 22.55 8 22 8S21 8.45 21 9V15Z"/></svg>'},"folder-open":{name:"folder-open",category:"system",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 20H4C2.89 20 2 19.1 2 18V6C2 4.89 2.89 4 4 4H10L12 6H19C20.1 6 21 6.89 21 8H21L4 8V18L6.14 10H23.21L20.93 18.5C20.7 19.37 19.92 20 19 20Z"/></svg>'},"folder-closed":{name:"folder-closed",category:"system",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M10 4H4C2.89 4 2 4.89 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.89 21.1 6 20 6H12L10 4Z"/></svg>'},"stock-in":{name:"stock-in",category:"operations",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L2 7L12 12L22 7L12 2M2 17L12 22L22 17M2 12L12 17L22 12"/></svg>'},"stock-out":{name:"stock-out",category:"operations",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M7 14L5 12L5 10L12 3L19 10V12L17 14H7M12 6.8L9 9.8H15L12 6.8Z"/></svg>'},transfer:{name:"transfer",category:"operations",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M6.99 11L3 15L6.99 19V16H14V14H6.99V11M21 9L17.01 5V8H10V10H17.01V13L21 9Z"/></svg>'},adjustment:{name:"adjustment",category:"operations",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 15.5C10.07 15.5 8.5 13.93 8.5 12S10.07 8.5 12 8.5 15.5 10.07 15.5 12 13.93 15.5 12 15.5M19.43 12.98C19.47 12.66 19.5 12.34 19.5 12S19.47 11.34 19.43 11.02L21.54 9.37C21.73 9.22 21.78 8.95 21.66 8.73L19.66 5.27C19.54 5.05 19.27 4.97 19.05 5.05L16.56 6.05C16.04 5.65 15.48 5.32 14.87 5.07L14.5 2.42C14.46 2.18 14.25 2 14 2H10C9.75 2 9.54 2.18 9.5 2.42L9.13 5.07C8.52 5.32 7.96 5.66 7.44 6.05L4.95 5.05C4.72 4.96 4.46 5.05 4.34 5.27L2.34 8.73C2.21 8.95 2.27 9.22 2.46 9.37L4.57 11.02C4.53 11.34 4.5 11.67 4.5 12S4.53 12.66 4.57 12.98L2.46 14.63C2.27 14.78 2.21 15.05 2.34 15.27L4.34 18.73C4.46 18.95 4.72 19.03 4.95 18.95L7.44 17.95C7.96 18.35 8.52 18.68 9.13 18.93L9.5 21.58C9.54 21.82 9.75 22 10 22H14C14.25 22 14.46 21.82 14.5 21.58L14.87 18.93C15.48 18.68 16.04 18.34 16.56 17.95L19.05 18.95C19.28 19.04 19.54 18.95 19.66 18.73L21.66 15.27C21.78 15.05 21.73 14.78 21.54 14.63L19.43 12.98Z"/></svg>'},maritime:{name:"maritime",category:"operations",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 4H16.5L21 8.5V17H18.5C18.5 18.38 17.38 19.5 16 19.5S13.5 18.38 13.5 17H8.5C8.5 18.38 7.38 19.5 6 19.5S3.5 18.38 3.5 17H1V6C1 4.89 1.89 4 3 4M16 18C16.55 18 17 17.55 17 17S16.55 16 16 16 15 16.45 15 17 15.45 18 16 18M6 18C6.55 18 7 17.55 7 17S6.55 16 6 16 5 16.45 5 17 5.45 18 6 18M15 8.5H19.5L16.5 5.5H15V8.5Z"/></svg>'},airplane:{name:"airplane",category:"operations",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M21 16V14L13 9V3.5C13 2.67 12.33 2 11.5 2S10 2.67 10 3.5V9L2 14V16L10 13.5V19L8 20.5V22L11.5 21L15 22V20.5L13 19V13.5L21 16Z"/></svg>'},location:{name:"location",category:"system",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C15.31 2 18 4.66 18 7.95C18 12.41 12 19 12 19S6 12.41 6 7.95C6 4.66 8.69 2 12 2M12 6C10.9 6 10 6.9 10 8S10.9 10 12 10 14 9.1 14 8 13.1 6 12 6Z"/></svg>'},calendar:{name:"calendar",category:"system",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H18V1H16V3H8V1H6V3H5C3.89 3 3 3.89 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.89 20.1 3 19 3M19 19H5V8H19V19M7 10H12V15H7V10Z"/></svg>'},category:{name:"category",category:"system",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M10 4H4C2.89 4 2 4.89 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.89 21.1 6 20 6H12L10 4Z"/></svg>'},lightbulb:{name:"lightbulb",category:"system",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C8.14 2 5 5.14 5 9C5 11.38 6.19 13.47 8 14.74V17C8 17.55 8.45 18 9 18H15C15.55 18 16 17.55 16 17V14.74C17.81 13.47 19 11.38 19 9C19 5.14 15.86 2 12 2M9.5 11.5C9.5 11.78 9.22 12 8.5 12S7.5 11.78 7.5 11.5S7.78 11 8.5 11 9.5 11.22 9.5 11.5M14.5 11.5C14.5 11.78 14.22 12 13.5 12S12.5 11.78 12.5 11.5S12.78 11 13.5 11 14.5 11.22 14.5 11.5M15 20C15 20.55 14.55 21 14 21H10C9.45 21 9 20.55 9 20V19H15V20Z"/></svg>'},cash:{name:"cash",category:"finance",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 6H21V18H3V6M12 9C10.89 9 10 9.89 10 11S10.89 13 12 13 14 12.11 14 11 13.11 9 12 9M18 8V10H21V8H18M3 8V10H6V8H3Z"/></svg>'},"credit-card":{name:"credit-card",category:"finance",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 4H4C2.89 4 2 4.89 2 6V18C2 19.11 2.89 20 4 20H20C21.11 20 22 19.11 22 18V6C22 4.89 21.11 4 20 4M20 11H4V8H20V11Z"/></svg>'},warehouse:{name:"warehouse",category:"operations",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 3L2 12H5V20H19V12H22L12 3M12 7.7L17 11.9V18H15V13H9V18H7V11.9L12 7.7M11 14H13V16H11V14Z"/></svg>'},store:{name:"store",category:"operations",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 3L4 9V21H20V9L12 3M18 19H6V10L12 5.69L18 10V19M8 12H16V14H8V12Z"/></svg>'},supplier:{name:"supplier",category:"operations",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M18 15H16V17H18M18 11H16V13H18M20 19H12V17H14V15H12V13H14V11H12V9H20M10 7H8V5H10M10 11H8V9H10M10 15H8V13H10M10 19H8V17H10M6 7H4V5H6M6 11H4V9H6M6 15H4V13H6M6 19H4V17H6M12 7V3H2V21H22V7H12Z"/></svg>'},customer:{name:"customer",category:"management",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 4C14.21 4 16 5.79 16 8S14.21 12 12 12 8 10.21 8 8 9.79 4 12 4M12 14C16.42 14 20 15.79 20 18V20H4V18C4 15.79 7.58 14 12 14Z"/></svg>'},quick:{name:"quick",category:"actions",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M7 2V13H10V22L17 10H13L17 2H7Z"/></svg>'},template:{name:"template",category:"system",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3M19 19H5V5H19V19M17 17H7V15H17V17M17 13H7V11H17V13M17 9H7V7H17V9Z"/></svg>'},check:{name:"check",category:"status",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M21 7L9 19L3.5 13.5L4.91 12.09L9 16.17L19.59 5.59L21 7Z"/></svg>'},uncheck:{name:"uncheck",category:"status",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3M19 19H5V5H19V19Z"/></svg>'},signature:{name:"signature",category:"status",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M22,22H2V20H22V22M6.2,17.3L5.5,18L4.1,16.6L2.7,18L2,17.3L3.4,15.9L2,14.5L2.7,13.8L4.1,15.2L5.5,13.8L6.2,14.5L4.8,15.9L6.2,17.3M16.22,14.43C16.22,13.85 15.5,13.2 14.06,12.46C12.23,11.54 11,10.79 10.36,10.24C9.71,9.68 9.39,9.06 9.39,8.37C9.39,6.59 10.3,5.12 12.12,3.95C13.94,2.78 15.43,2.19 16.57,2.19C17.31,2.19 17.85,2.32 18.18,2.58C18.5,2.83 18.68,3.27 18.68,3.9C18.68,4.18 18.56,4.42 18.31,4.63C18.07,4.83 17.87,4.93 17.74,4.93C17.63,4.93 17.43,4.83 17.13,4.64L16.55,4.38C16.08,4.38 15.14,4.71 13.71,5.38C12.29,6.04 11.58,6.79 11.58,7.63C11.58,8.14 11.82,8.6 12.32,9C12.82,9.42 13.71,9.93 15,10.53C16.03,11 16.86,11.5 17.5,12.07C18.1,12.61 18.41,13.25 18.41,14C18.41,15.34 17.47,16.41 15.58,17.17C13.7,17.94 11.9,18.32 10.19,18.32C8.75,18.32 8,17.83 8,16.86C8,16.5 8.19,16.27 8.5,16.11C8.83,15.95 9.16,15.87 9.5,15.87L10.25,16L10.97,16.13C11.95,16.13 13,15.97 14.13,15.64C15.26,15.32 15.96,14.91 16.22,14.43Z"/></svg>'},email:{name:"email",category:"actions",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 4H4C2.9 4 2.01 4.9 2.01 6L2 18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6C22 4.9 21.1 4 20 4ZM20 8L12 13L4 8V6L12 11L20 6V8Z"/></svg>'},mail:{name:"mail",category:"actions",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 4H4C2.9 4 2.01 4.9 2.01 6L2 18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6C22 4.9 21.1 4 20 4ZM20 8L12 13L4 8V6L12 11L20 6V8Z"/></svg>'},phone:{name:"phone",category:"actions",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M6.62 10.79C8.06 13.62 10.38 15.94 13.21 17.38L15.41 15.18C15.69 14.9 16.08 14.82 16.43 14.93C17.55 15.3 18.75 15.5 20 15.5C20.55 15.5 21 15.95 21 16.5V20C21 20.55 20.55 21 20 21C10.61 21 3 13.39 3 4C3 3.45 3.45 3 4 3H7.5C8.05 3 8.5 3.45 8.5 4C8.5 5.25 8.7 6.45 9.07 7.57C9.18 7.92 9.1 8.31 8.82 8.59L6.62 10.79Z"/></svg>'},link:{name:"link",category:"actions",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M3.9 12C3.9 10.29 5.29 8.9 7 8.9H11V7H7C4.24 7 2 9.24 2 12S4.24 17 7 17H11V15.1H7C5.29 15.1 3.9 13.71 3.9 12ZM8 13H16V11H8V13ZM17 7H13V8.9H17C18.71 8.9 20.1 10.29 20.1 12S18.71 15.1 17 15.1H13V17H17C19.76 17 22 14.76 22 12S19.76 7 17 7Z"/></svg>'},document:{name:"document",category:"actions",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2M18 20H6V4H13V9H18V20Z"/></svg>'},download:{name:"download",category:"actions",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M5 20H19V18H5M19 9H15V3H9V9H5L12 16L19 9Z"/></svg>'},eye:{name:"eye",category:"actions",svg:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 9C13.38 9 14.5 10.12 14.5 11.5S13.38 14 12 14 9.5 12.88 9.5 11.5 10.62 9 12 9M12 7C9.79 7 7.8 8.24 6.71 10.09C6.34 10.68 6.34 11.32 6.71 11.91C7.8 13.76 9.79 15 12 15S16.2 13.76 17.29 11.91C17.66 11.32 17.66 10.68 17.29 10.09C16.2 8.24 14.21 7 12 7M12 4C7 4 2.73 7.11 1 11.5C2.73 15.89 7 19 12 19S21.27 15.89 23 11.5C21.27 7.11 17 4 12 4Z"/></svg>'}},[UL,sJ]=Vu({icons:zL}),qL=t=>UL.icons[t];var HL=le("<span>");const Gr=t=>{const e=zt(()=>qL(t.name)),r=zt(()=>typeof t.size=="number"?`${t.size}px`:t.size||"1em"),n=zt(()=>({width:r(),height:r(),display:"inline-block",color:t.color||"currentColor",cursor:t.onClick?"pointer":"default",...t.style}));return(()=>{var i=HL();return Qn(i,"click",t.onClick,!0),be(o=>{var s=`icon ${t.class||""}`,a=n(),l=t.title||t.name,d=e()?.svg||`<svg viewBox="0 0 ${r()} ${r()}" fill=${t.color||"currentColor"}><path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM12 8C13.1 8 14 8.9 14 10V20C14 21.1 13.1 22 12 22S10 21.1 10 20V10C10 8.9 10.9 8 12 8Z"/></svg>`;return s!==o.e&&$m(i,o.e=s),o.t=y(i,a,o.t),l!==o.a&&ir(i,"title",o.a=l),d!==o.o&&(i.innerHTML=o.o=d),o},{e:void 0,t:void 0,a:void 0,o:void 0}),i})()};tr(["click"]);var ZP=le('<img alt="User avatar">'),WL=le("<div class=user-info-desktop><span>"),GL=le("<button class=sign-out-desktop>Sign Out"),KL=le("<div><div><span></span></div><button>Sign Out"),YL=le(`<nav><div><div class=desktop-nav></div><div><button class=mobile-menu-button><svg width=24 height=24 viewBox="0 0 24 24"fill=currentColor><path></path></svg></button></div></div><div class=mobile-nav></div><style>
        .nav-active {
          background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)) !important;
          color: white !important;
          box-shadow: var(--shadow-sm);
        }
        
        .desktop-nav a:hover:not(.nav-active),
        .nav-group button:hover {
          background: var(--background-color);
          color: var(--text-primary);
        }
        
        .mobile-nav a:hover:not(.nav-active) {
          background: var(--background-color);
          color: var(--text-primary);
        }

        /* Create invisible bridge to prevent gap issues */
        .nav-group::before {
          content: '';
          position: absolute;
          top: 100%;
          left: 0;
          right: 0;
          height: 0.5rem;
          z-index: 9;
        }
        
        @media (max-width: 768px) {
          .desktop-nav {
            display: none !important;
          }
          
          .mobile-menu-button {
            display: block !important;
          }
          
          .user-info-desktop,
          .sign-out-desktop {
            display: none !important;
          }
          
          nav > div:first-child {
            padding: 1rem;
          }
        }
        
        @media (min-width: 769px) {
          .mobile-nav {
            display: none !important;
          }
        }
      `),XL=le("<div class=nav-group><button> <span>▼</span></button><div>"),ZL=le("<div>"),JL=le("<div><div><span> </span><span>▼");const QL=()=>{const{t}=pr(),[e,r]=Ae(!1),[n,i]=Ae(null),[o,s]=Ae(null),a={background:"var(--surface-color)","border-bottom":"1px solid var(--border-color)","box-shadow":"var(--shadow-sm)","backdrop-filter":"blur(10px)",position:"sticky",top:"0","z-index":"100"},l={display:"flex","align-items":"center","justify-content":"space-between",padding:"1rem 2rem",margin:"0 auto",position:"relative"},d={"font-size":"1.5rem","font-weight":"700",color:"var(--primary-color)","text-decoration":"none"},u={display:"flex",gap:"1rem","align-items":"center",flex:"1","margin-left":"2rem"},h={display:"none",position:"absolute",top:"100%",left:"0",right:"0",background:"var(--surface-color)","border-top":"1px solid var(--border-color)","box-shadow":"var(--shadow-md)","max-height":"70vh","overflow-y":"auto"},f={position:"relative",display:"flex","align-items":"center"},p={display:"flex","align-items":"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"transparent",border:"none",color:"var(--text-secondary)","font-weight":"500","font-size":"0.875rem",cursor:"pointer","border-radius":"var(--border-radius-sm)",transition:"all 0.2s ease","white-space":"nowrap"},m={position:"absolute",top:"100%",left:"0",background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius)","box-shadow":"var(--shadow-lg)","min-width":"200px","margin-top":"0.25rem","z-index":"10",display:"none","padding-top":"0.25rem"},x={"border-bottom":"1px solid var(--border-color)"},P={display:"flex","justify-content":"space-between","align-items":"center",padding:"1rem",cursor:"pointer","font-weight":"600",color:"var(--text-primary)"},g={display:"block","text-decoration":"none",color:"var(--text-secondary)",padding:"0.75rem 1rem","font-weight":"500","font-size":"0.875rem",transition:"all 0.2s ease","white-space":"nowrap"},F={...g,padding:"0.75rem 1.5rem","border-bottom":"1px solid var(--border-light)"},V={display:"none",background:"transparent",border:"none",padding:"0.5rem",cursor:"pointer",color:"var(--text-primary)"},N={display:"flex","align-items":"center",gap:"1rem"},R={display:"flex","align-items":"center",gap:"0.75rem",padding:"0.5rem 1rem",background:"var(--background-color)","border-radius":"var(--border-radius-sm)","font-size":"0.875rem",color:"var(--text-primary)"},M={width:"32px",height:"32px","border-radius":"50%","object-fit":"cover"},C={...g,cursor:"pointer",border:"1px solid var(--border-color)",background:"transparent","border-radius":"var(--border-radius-sm)"},k=()=>{Xt.signOut()},D=A=>{const I=Xt.state?.profile;return I?I[A]===!0||I.isAdmin===!0:!1},$=()=>{r(!e())},w=A=>{i(n()===A?null:A)},_=A=>{const I=o();I&&(clearTimeout(I),s(null)),i(A)},v=()=>{const A=setTimeout(()=>{i(null)},300);s(A)},z=[{name:"Finance",icon:"finance",items:[{path:"/accounts",label:t("navigation.accounts"),permission:"AccountAccess",icon:"accounts"},{path:"/entry-books",label:t("navigation.entryBooks"),permission:"JournalAccess",icon:"books"},{path:"/balance-sheet",label:t("navigation.balanceSheet"),permission:"AccountAccess",icon:"balance-sheet"},{path:"/bank-consolidations",label:t("navigation.consolidate"),permission:"BankingAccess",icon:"bank"},{path:"/automation",label:"Manual Automation",permission:"AccountAccess",icon:"automation-target"},{path:"/event-automation",label:"Event Automation",permission:"AccountAccess",icon:"automation-bolt"}]},{name:"Operations",icon:"operations",items:[{path:"/inventory",label:t("navigation.inventory"),permission:"InventoryAccess",icon:"inventory"},{path:"/invoices",label:t("invoices.invoices"),permission:"invoiceAccess",icon:"invoice"},{path:"/hbl",label:t("navigation.hbl"),permission:"HBLAccess",icon:"shipping"},{path:"/cuban-passport",label:t("navigation.cubanPassport","Cuban Passport"),permission:"PassportAccess",icon:"passport"},{path:"/pdf-signature",label:t("navigation.pdfSignature","PDF Signature"),permission:"PassportAccess",icon:"edit"},{path:"/signature-requests",label:t("navigation.signatureRequests","Signature Requests"),permission:"PassportAccess",icon:"signature"}]},{name:"Management",icon:"management",items:[{path:"/employees",label:t("navigation.employees"),permission:"EmployeeAccess",icon:"employees"},{path:"/admin/users",label:"Admin",permission:"isAdmin",icon:"admin",adminOnly:!0}]}],W=()=>z.map(A=>({...A,items:A.items.filter(I=>I.adminOnly?Xt.state?.profile?.isAdmin:D(I.permission))})).filter(A=>A.items.length>0);return(()=>{var A=YL(),I=A.firstChild,ee=I.firstChild,Z=ee.nextSibling,X=Z.firstChild,se=X.firstChild,U=se.firstChild,E=I.nextSibling;return c(I,T(Lh,{href:"/",style:d,children:"HRM Finance"}),ee),y(ee,u),c(ee,T(_t,{get each(){return W()},children:O=>(()=>{var L=XL(),G=L.firstChild,K=G.firstChild,q=K.nextSibling,B=G.nextSibling;return L.addEventListener("mouseleave",v),L.addEventListener("mouseenter",()=>_(O.name)),c(G,T(Gr,{get name(){return O.icon},size:"1em",style:{"margin-right":"0.5rem"}}),K),c(G,()=>O.name,q),q.style.setProperty("font-size","0.75rem"),B.addEventListener("mouseleave",v),B.addEventListener("mouseenter",()=>_(O.name)),c(B,T(_t,{get each(){return O.items},children:H=>T(Lh,{get href(){return H.path},style:g,activeClass:"nav-active",onClick:()=>i(null),get children(){return[T(Gr,{get name(){return H.icon},size:"1em",style:{"margin-right":"0.5rem"}})," ",Ve(()=>H.label)]}})})),be(H=>{var Y=f,te=p,oe={...m,display:n()===O.name?"block":"none"};return H.e=y(L,Y,H.e),H.t=y(G,te,H.t),H.a=y(B,oe,H.a),H},{e:void 0,t:void 0,a:void 0}),L})()})),y(Z,N),c(Z,T(VL,{}),X),c(Z,T(We,{get when(){return Xt.currentUser},get children(){return[(()=>{var O=WL(),L=O.firstChild;return c(O,T(We,{get when(){return Xt.currentUser?.photoURL},get children(){var G=ZP();return be(K=>{var q=Xt.currentUser.photoURL,B=M;return q!==K.e&&ir(G,"src",K.e=q),K.t=y(G,B,K.t),K},{e:void 0,t:void 0}),G}}),L),c(L,()=>Xt.currentUser?.displayName||Xt.currentUser?.email),be(G=>y(O,R,G)),O})(),(()=>{var O=GL();return O.addEventListener("mouseleave",L=>{L.currentTarget.style.background="transparent",L.currentTarget.style.color="var(--text-secondary)"}),O.addEventListener("mouseenter",L=>{L.currentTarget.style.background="var(--background-color)",L.currentTarget.style.color="var(--text-primary)"}),O.$$click=k,be(L=>y(O,C,L)),O})()]}}),X),X.$$click=$,y(X,V),c(E,T(Lh,{href:"/",style:F,activeClass:"nav-active",onClick:()=>r(!1),get children(){return[T(Gr,{name:"dashboard",size:"1em",style:{"margin-right":"0.5rem"}})," ",Ve(()=>t("navigation.dashboard"))]}}),null),c(E,T(_t,{get each(){return W()},children:O=>(()=>{var L=JL(),G=L.firstChild,K=G.firstChild,q=K.firstChild,B=K.nextSibling;return y(L,x),G.$$click=()=>w(O.name),y(G,P),c(K,T(Gr,{get name(){return O.icon},size:"1em",style:{"margin-right":"0.5rem"}}),q),c(K,()=>O.name,null),B.style.setProperty("transition","transform 0.2s"),c(L,T(We,{get when(){return n()===O.name},get children(){var H=ZL();return H.style.setProperty("background","var(--background-color)"),c(H,T(_t,{get each(){return O.items},children:Y=>T(Lh,{get href(){return Y.path},get style(){return{...F,"padding-left":"3rem"}},activeClass:"nav-active",onClick:()=>r(!1),get children(){return[T(Gr,{get name(){return Y.icon},size:"1em",style:{"margin-right":"0.5rem"}})," ",Ve(()=>Y.label)]}})})),H}}),null),be(H=>(H=n()===O.name?"rotate(180deg)":"none")!=null?B.style.setProperty("transform",H):B.style.removeProperty("transform")),L})()}),null),c(E,T(We,{get when(){return Xt.currentUser},get children(){var O=KL(),L=O.firstChild,G=L.firstChild,K=L.nextSibling;return O.style.setProperty("padding","1rem"),O.style.setProperty("border-top","2px solid var(--border-color)"),c(L,T(We,{get when(){return Xt.currentUser?.photoURL},get children(){var q=ZP();return be(B=>{var H=Xt.currentUser.photoURL,Y=M;return H!==B.e&&ir(q,"src",B.e=H),B.t=y(q,Y,B.t),B},{e:void 0,t:void 0}),q}}),G),c(G,()=>Xt.currentUser?.displayName||Xt.currentUser?.email),K.$$click=()=>{k(),r(!1)},be(q=>{var B={...R,"margin-bottom":"1rem"},H={...C,width:"100%"};return q.e=y(L,B,q.e),q.t=y(K,H,q.t),q},{e:void 0,t:void 0}),O}}),null),be(O=>{var L=a,G=l,K=e()?"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z":"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z",q={...h,display:e()?"block":"none"};return O.e=y(A,L,O.e),O.t=y(I,G,O.t),K!==O.a&&ir(U,"d",O.a=K),O.o=y(E,q,O.o),O},{e:void 0,t:void 0,a:void 0,o:void 0}),A})()};tr(["click"]);var e$=le("<div><div><div>🔒</div><h1></h1><p>.</p><div><p><strong></strong><br></p></div><div><button></button></div><div><h3></h3><div><span>✓</span><span></span></div><div><span>✓</span><span></span></div><div><span>✓</span><span></span></div></div><div><p>"),JP=le("<br>"),t$=le("<strong>");const r$=t=>{const{t:e}=pr(),r={"min-height":"calc(100vh - 200px)",display:"flex","align-items":"center","justify-content":"center",padding:"2rem"},n={"text-align":"center","max-width":"600px",width:"100%"},i={"font-size":"5rem",color:"#e53e3e","margin-bottom":"2rem"},o={"font-size":"2.5rem","font-weight":"700",color:"#1a202c","margin-bottom":"1rem"},s={"font-size":"1.25rem",color:"#718096","margin-bottom":"2rem","line-height":"1.6"},a={background:"#f7fafc",border:"1px solid #e2e8f0","border-radius":"0.5rem",padding:"1.5rem","margin-bottom":"2rem"},l={color:"#4a5568","font-size":"1rem","line-height":"1.6"},d={display:"flex",gap:"1rem","justify-content":"center","flex-wrap":"wrap"},u={padding:"0.75rem 2rem","border-radius":"0.5rem","text-decoration":"none","font-weight":"500",transition:"all 0.2s",display:"inline-block"},h={...u,background:"var(--primary-color)",color:"white",border:"2px solid var(--primary-color)"},f={...u,background:"white",color:"var(--primary-color)",border:"2px solid var(--primary-color)"},p={"text-align":"left","margin-top":"2rem",padding:"0 2rem"},m={display:"flex","align-items":"center",gap:"0.75rem","margin-bottom":"1rem",color:"#4a5568"},x={color:"#48bb78","font-size":"1.25rem"};return T(Bo,{get title(){return e("unauthorized.title")},get children(){var P=e$(),g=P.firstChild,F=g.firstChild,V=F.nextSibling,N=V.nextSibling,R=N.firstChild,M=N.nextSibling,C=M.firstChild,k=C.firstChild;k.nextSibling;var D=M.nextSibling,$=D.firstChild,w=D.nextSibling,_=w.firstChild,v=_.nextSibling,z=v.firstChild,W=z.nextSibling,A=v.nextSibling,I=A.firstChild,ee=I.nextSibling,Z=A.nextSibling,X=Z.firstChild,se=X.nextSibling,U=w.nextSibling,E=U.firstChild;return y(P,r),y(g,n),y(F,i),y(V,o),c(V,()=>e("unauthorized.accessDenied")),y(N,s),c(N,()=>e("unauthorized.noPermission"),R),c(N,(()=>{var O=Ve(()=>!!t.featureName);return()=>O()?` ${t.featureName}`:` ${e("unauthorized.thisFeature")}`})(),R),y(M,a),y(C,l),c(k,()=>e("unauthorized.whySeeing")),c(C,()=>e("unauthorized.explanation"),null),c(C,(()=>{var O=Ve(()=>!!t.requiredPermission);return()=>O()&&[JP(),JP(),(()=>{var L=t$();return c(L,()=>e("unauthorized.requiredPermission")),L})()," ",Ve(()=>t.requiredPermission)]})(),null),y(D,d),c(D,T(Lh,{href:"/",style:h,get children(){return e("unauthorized.goToDashboard")}}),$),$.$$click=()=>window.history.back(),c($,()=>e("unauthorized.goBack")),y(w,p),_.style.setProperty("margin-bottom","1rem"),_.style.setProperty("color","#2d3748"),c(_,()=>e("unauthorized.featuresCanAccess")),c(W,()=>e("unauthorized.dashboardAccess")),c(ee,()=>e("unauthorized.profileAccess")),c(se,()=>e("unauthorized.roleBasedAccess")),U.style.setProperty("margin-top","3rem"),U.style.setProperty("padding","1.5rem"),U.style.setProperty("background","#edf2f7"),U.style.setProperty("border-radius","0.5rem"),E.style.setProperty("color","#4a5568"),E.style.setProperty("font-size","0.875rem"),c(E,()=>e("unauthorized.needAccess")),be(O=>{var L=f,G=m,K=x,q=m,B=x,H=m,Y=x;return O.e=y($,L,O.e),O.t=y(v,G,O.t),O.a=y(z,K,O.a),O.o=y(A,q,O.o),O.i=y(I,B,O.i),O.n=y(Z,H,O.n),O.s=y(X,Y,O.s),O},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),P}})};tr(["click"]);const n$=t=>{const{t:e}=pr(),r=()=>{if(!t.permission)return!0;const i=Xt.state?.profile;if(!i)return!1;if(i.isAdmin)return!0;switch(t.permission){case"AccountAccess":return i.AccountAccess===!0;case"InventoryAccess":return i.InventoryAccess===!0;case"EmployeeAccess":return i.EmployeeAccess===!0;case"BankingAccess":return i.BankingAccess===!0;case"JournalAccess":return i.JournalAccess===!0;case"PassportAccess":return i.PassportAccess===!0;case"AdminAccess":return i.isAdmin===!0;default:return i[t.permission]===!0}},n=()=>{if(t.requiredPermission)return t.requiredPermission;switch(t.permission){case"AccountAccess":return e("unauthorized.permissions.accountAccess");case"InventoryAccess":return e("unauthorized.permissions.inventoryAccess");case"EmployeeAccess":return e("unauthorized.permissions.employeeAccess");case"BankingAccess":return e("unauthorized.permissions.bankingAccess");case"JournalAccess":return e("unauthorized.permissions.journalAccess");case"AdminAccess":return e("unauthorized.permissions.adminAccess");default:return t.permission}};return T(We,{get when(){return r()},get fallback(){return t.fallback||T(r$,{get featureName(){return t.featureName},get requiredPermission(){return n()}})},get children(){return t.children}})};var i$=le('<button title="Open Dev Tools">🛠️'),o$=le("<span>(<!>)"),s$=le("<div><span></span><span>"),QP=le("<div>"),a$=le("<div>Database reset only available in fake mode"),l$=le("<div><div>Loading..."),c$=le("<div><div><h3>🛠️ Dev Tools</h3><button>✕</button></div><div><div>API Mode</div><div><button>Fake Server</button><button>Real API</button><button>Hybrid</button></div><div>Current: <strong></strong></div></div><div><div>Health Status</div></div><div><div>Database Stats</div></div><div><div>Actions</div><div><button>🔄 Refresh Stats</button><button>💊 Health Check</button></div><div><button>🗑️ Reset DB</button></div></div><div><div>Info</div><div>• <strong>Fake Server:</strong> Uses local mock data<br>• <strong>Real API:</strong> Connects to actual backend<br>• <strong>Hybrid:</strong> Real API with fake fallback<br>• Settings are saved in localStorage"),d$=le("<div>Loading..."),u$=le("<div><span>:</span><span>");const h$=()=>{const[t,e]=Ae(!1),[r,n]=Ae(r1.getMode()),[i,o]=Ae({}),[s,a]=Ae(null),[l,d]=Ae(!1);Kn(async()=>{await u(),await h()});const u=async()=>{try{const C=await YP.getStats();o(C)}catch(C){console.error("Failed to load stats:",C)}},h=async()=>{try{const C=await YP.healthCheck();a(C)}catch(C){console.error("Health check failed:",C),a({status:"error",error:C.message})}},f=async C=>{d(!0);try{r1.setMode(C),n(C),await u(),await h()}catch(k){console.error("Failed to change API mode:",k)}finally{d(!1)}},p=async()=>{if(confirm("Are you sure you want to reset the fake database to its initial state?")){d(!0);try{const C=await Bn.utils.resetDatabase();alert(C.message),await u()}catch(C){console.error("Failed to reset database:",C),alert("Failed to reset database")}finally{d(!1)}}},m={position:"fixed",bottom:"20px",right:"20px","z-index":"10000","font-family":"monospace"},x={background:"#1a1a1a",color:"#fff",border:"1px solid #333","border-radius":"8px",padding:"16px","min-width":"300px","max-width":"400px","box-shadow":"0 4px 20px rgba(0,0,0,0.3)"},P={background:"#007acc",color:"#fff",border:"none","border-radius":"50%",width:"50px",height:"50px",cursor:"pointer","font-size":"20px","box-shadow":"0 2px 10px rgba(0,0,0,0.2)",display:"flex","align-items":"center","justify-content":"center"},g={background:"#333",color:"#fff",border:"1px solid #555","border-radius":"4px",padding:"6px 12px",cursor:"pointer","font-size":"12px","margin-right":"8px","margin-bottom":"8px"},F={...g,background:"#007acc","border-color":"#007acc"},V={"margin-bottom":"16px","padding-bottom":"12px","border-bottom":"1px solid #333"},N={"font-size":"14px","font-weight":"bold","margin-bottom":"8px",color:"#007acc"},R={display:"flex","justify-content":"space-between","font-size":"12px","margin-bottom":"4px"},M=C=>({display:"inline-block",width:"8px",height:"8px","border-radius":"50%","margin-right":"8px",background:C==="healthy"?"#00ff00":C==="error"?"#ff0000":"#ffff00"});return(()=>{var C=QP();return c(C,T(We,{get when(){return!t()},get children(){var k=i$();return k.$$click=()=>e(!0),y(k,P),k}}),null),c(C,T(We,{get when(){return t()},get children(){var k=c$(),D=k.firstChild,$=D.firstChild,w=$.nextSibling,_=D.nextSibling,v=_.firstChild,z=v.nextSibling,W=z.firstChild,A=W.nextSibling,I=A.nextSibling,ee=z.nextSibling,Z=ee.firstChild,X=Z.nextSibling,se=_.nextSibling,U=se.firstChild,E=se.nextSibling,O=E.firstChild,L=E.nextSibling,G=L.firstChild,K=G.nextSibling,q=K.firstChild,B=q.nextSibling,H=K.nextSibling,Y=H.firstChild,te=L.nextSibling,oe=te.firstChild,pe=oe.nextSibling;return y(k,x),D.style.setProperty("display","flex"),D.style.setProperty("justify-content","space-between"),D.style.setProperty("align-items","center"),D.style.setProperty("margin-bottom","16px"),$.style.setProperty("margin","0"),$.style.setProperty("color","#007acc"),$.style.setProperty("font-size","16px"),w.$$click=()=>e(!1),W.$$click=()=>f("fake"),A.$$click=()=>f("real"),I.$$click=()=>f("hybrid"),ee.style.setProperty("font-size","11px"),ee.style.setProperty("color","#888"),ee.style.setProperty("margin-top","4px"),c(X,r),c(ee,()=>r()==="fake"&&" (Using fake server)",null),c(ee,()=>r()==="real"&&" (Using real API)",null),c(ee,()=>r()==="hybrid"&&" (Real API with fallback)",null),c(se,T(We,{get when(){return s()},get fallback(){return(()=>{var ne=d$();return ne.style.setProperty("font-size","12px"),ne})()},get children(){return[(()=>{var ne=s$(),Q=ne.firstChild,ce=Q.nextSibling;return ne.style.setProperty("display","flex"),ne.style.setProperty("align-items","center"),ne.style.setProperty("font-size","12px"),c(ce,()=>s()?.status||"Unknown"),c(ne,T(We,{get when(){return s()?.timestamp},get children(){var ue=o$(),de=ue.firstChild,ge=de.nextSibling;return ge.nextSibling,ue.style.setProperty("margin-left","8px"),ue.style.setProperty("color","#888"),c(ue,()=>new Date(s().timestamp).toLocaleTimeString(),ge),ue}}),null),be(ue=>y(Q,M(s()?.status||"unknown"),ue)),ne})(),T(We,{get when(){return s()?.error},get children(){var ne=QP();return ne.style.setProperty("font-size","11px"),ne.style.setProperty("color","#ff6666"),ne.style.setProperty("margin-top","4px"),c(ne,()=>s().error),ne}})]}}),null),c(E,T(_t,{get each(){return Object.entries(i())},children:([ne,Q])=>(()=>{var ce=u$(),ue=ce.firstChild,de=ue.firstChild,ge=ue.nextSibling;return y(ce,R),ue.style.setProperty("text-transform","capitalize"),c(ue,ne,de),ge.style.setProperty("color","#00ff00"),c(ge,Q),ce})()}),null),q.$$click=u,B.$$click=h,H.style.setProperty("margin-top","8px"),Y.$$click=p,c(L,T(We,{get when(){return r()!=="fake"},get children(){var ne=a$();return ne.style.setProperty("font-size","11px"),ne.style.setProperty("color","#888"),ne.style.setProperty("margin-top","4px"),ne}}),null),pe.style.setProperty("font-size","11px"),pe.style.setProperty("color","#888"),pe.style.setProperty("line-height","1.4"),c(k,T(We,{get when(){return l()},get children(){var ne=l$(),Q=ne.firstChild;return ne.style.setProperty("position","absolute"),ne.style.setProperty("top","0"),ne.style.setProperty("left","0"),ne.style.setProperty("right","0"),ne.style.setProperty("bottom","0"),ne.style.setProperty("background","rgba(0,0,0,0.7)"),ne.style.setProperty("display","flex"),ne.style.setProperty("align-items","center"),ne.style.setProperty("justify-content","center"),ne.style.setProperty("border-radius","8px"),Q.style.setProperty("color","#fff"),Q.style.setProperty("font-size","14px"),ne}}),null),be(ne=>{var Q={...g,padding:"4px 8px"},ce=V,ue=N,de=r()==="fake"?F:g,ge=l(),ye=r()==="real"?F:g,fe=l(),Se=r()==="hybrid"?F:g,qe=l(),Oe=V,Ie=N,Be=V,ke=N,Ge=V,et=N,ve=g,De=l(),He=g,Je=l(),Le={...g,background:"#cc4400","border-color":"#cc4400"},Te=l()||r()!=="fake",he=N;return ne.e=y(w,Q,ne.e),ne.t=y(_,ce,ne.t),ne.a=y(v,ue,ne.a),ne.o=y(W,de,ne.o),ge!==ne.i&&(W.disabled=ne.i=ge),ne.n=y(A,ye,ne.n),fe!==ne.s&&(A.disabled=ne.s=fe),ne.h=y(I,Se,ne.h),qe!==ne.r&&(I.disabled=ne.r=qe),ne.d=y(se,Oe,ne.d),ne.l=y(U,Ie,ne.l),ne.u=y(E,Be,ne.u),ne.c=y(O,ke,ne.c),ne.w=y(L,Ge,ne.w),ne.m=y(G,et,ne.m),ne.f=y(q,ve,ne.f),De!==ne.y&&(q.disabled=ne.y=De),ne.g=y(B,He,ne.g),Je!==ne.p&&(B.disabled=ne.p=Je),ne.b=y(Y,Le,ne.b),Te!==ne.T&&(Y.disabled=ne.T=Te),ne.A=y(oe,he,ne.A),ne},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0}),k}}),null),be(k=>y(C,m,k)),C})()};tr(["click"]);const p$=[{id:"1",accountNumber:"1000",name:"Cash and Cash Equivalents",accountType:"Asset",category:"Current Assets",description:"Cash on hand and in bank accounts",balance:45230.5,isActive:!0,createdDate:"2024-01-01",lastModified:"2024-01-15"},{id:"1001",accountNumber:"1001",name:"Petty Cash",accountType:"Asset",category:"Current Assets",description:"Small amounts of cash for minor expenses",balance:500,isActive:!0,parentAccountId:"1",createdDate:"2024-01-01",lastModified:"2024-01-15"},{id:"1002",accountNumber:"1002",name:"Bank - Checking Account",accountType:"Asset",category:"Current Assets",description:"Main operating checking account",balance:32730.5,isActive:!0,parentAccountId:"1",createdDate:"2024-01-01",lastModified:"2024-01-15"},{id:"1003",accountNumber:"1003",name:"Bank - Savings Account",accountType:"Asset",category:"Current Assets",description:"Interest-bearing savings account",balance:12e3,isActive:!0,parentAccountId:"1",createdDate:"2024-01-01",lastModified:"2024-01-15"},{id:"2",accountNumber:"1100",name:"Accounts Receivable",accountType:"Asset",category:"Current Assets",description:"Money owed by customers",balance:23450.75,isActive:!0,createdDate:"2024-01-01",lastModified:"2024-01-14"},{id:"2001",accountNumber:"1101",name:"Trade Receivables",accountType:"Asset",category:"Current Assets",description:"Receivables from regular customers",balance:18450.75,isActive:!0,parentAccountId:"2",createdDate:"2024-01-01",lastModified:"2024-01-14"},{id:"2002",accountNumber:"1102",name:"Employee Advances",accountType:"Asset",category:"Current Assets",description:"Money advanced to employees",balance:5e3,isActive:!0,parentAccountId:"2",createdDate:"2024-01-01",lastModified:"2024-01-14"},{id:"3",accountNumber:"1200",name:"Inventory",accountType:"Asset",category:"Current Assets",description:"Products held for sale",balance:78920.25,isActive:!0,createdDate:"2024-01-01",lastModified:"2024-01-13"},{id:"4",accountNumber:"1500",name:"Equipment",accountType:"Asset",category:"Fixed Assets",description:"Office equipment and machinery",balance:125e3,isActive:!0,createdDate:"2024-01-01",lastModified:"2024-01-12"},{id:"5",accountNumber:"2000",name:"Accounts Payable",accountType:"Liability",category:"Current Liabilities",description:"Money owed to suppliers",balance:15670.3,isActive:!0,createdDate:"2024-01-01",lastModified:"2024-01-11"},{id:"6",accountNumber:"2100",name:"Accrued Expenses",accountType:"Liability",category:"Current Liabilities",description:"Expenses incurred but not yet paid",balance:8945.6,isActive:!0,createdDate:"2024-01-01",lastModified:"2024-01-10"},{id:"7",accountNumber:"2500",name:"Long-term Debt",accountType:"Liability",category:"Long-term Liabilities",description:"Long-term loans and mortgages",balance:85e3,isActive:!0,createdDate:"2024-01-01",lastModified:"2024-01-09"},{id:"8",accountNumber:"3000",name:"Owner's Equity",accountType:"Equity",category:"Owner's Equity",description:"Owner's investment in the business",balance:15e4,isActive:!0,createdDate:"2024-01-01",lastModified:"2024-01-08"},{id:"9",accountNumber:"3100",name:"Retained Earnings",accountType:"Equity",category:"Owner's Equity",description:"Accumulated profits retained in business",balance:32450.8,isActive:!0,createdDate:"2024-01-01",lastModified:"2024-01-07"},{id:"10",accountNumber:"4000",name:"Sales Revenue",accountType:"Revenue",category:"Operating Revenue",description:"Revenue from product sales",balance:245678.9,isActive:!0,createdDate:"2024-01-01",lastModified:"2024-01-06"},{id:"11",accountNumber:"4100",name:"Service Revenue",accountType:"Revenue",category:"Operating Revenue",description:"Revenue from services provided",balance:89432.15,isActive:!0,createdDate:"2024-01-01",lastModified:"2024-01-05"},{id:"12",accountNumber:"5000",name:"Cost of Goods Sold",accountType:"Expense",category:"Operating Expenses",description:"Direct costs of producing goods",balance:125678.45,isActive:!0,createdDate:"2024-01-01",lastModified:"2024-01-04"},{id:"13",accountNumber:"5100",name:"Salaries Expense",accountType:"Expense",category:"Operating Expenses",description:"Employee salary expenses",balance:98765.32,isActive:!0,createdDate:"2024-01-01",lastModified:"2024-01-03"},{id:"14",accountNumber:"5200",name:"Rent Expense",accountType:"Expense",category:"Operating Expenses",description:"Office rent expenses",balance:24e3,isActive:!0,createdDate:"2024-01-01",lastModified:"2024-01-02"}],f$=[{id:"1",accountId:"1",date:"2024-01-15",description:"Customer payment received",debitAmount:5e3,creditAmount:0,reference:"INV-2024-001",type:"debit"},{id:"2",accountId:"2",date:"2024-01-15",description:"Customer payment received",debitAmount:0,creditAmount:5e3,reference:"INV-2024-001",type:"credit"},{id:"3",accountId:"5",date:"2024-01-14",description:"Office supplies purchased",debitAmount:0,creditAmount:1250,reference:"PO-2024-001",type:"credit"}],[ca,mh]=Ae(p$),[gv,y$]=Ae(f$),zr={get accounts(){return ca()},get transactions(){return gv()},parseAccount(t){let e={id:t?.accountId||t.id||t?.code,accountNumber:t.accountNumber||t?.code,code:t?.code,name:t.name,type:t.type,accountType:t.accountType,classification:t.classification||t.clasification,category:t.category,description:t.description,isActive:!0,accountId:t?.accountId,parentAccountId:t?.parentAccountId,parentAccountNumber:t?.parentAccountNumber};return console.log(e),e},updAccount(t){try{mh(t.map(zr.parseAccount))}catch(e){console.log(e)}},fetchAllAccount(t){const e={...t,createdDate:new Date().toISOString().split("T")[0],lastModified:new Date().toISOString().split("T")[0]};return mh([...ca(),e]),e},async addAccount(t){const e={...t,accountId:So(),id:So(),createdDate:new Date().toISOString().split("T")[0],lastModified:new Date().toISOString().split("T")[0]};console.log("newAccount",e);let r=await rp.create(e);return console.log(r),mh([...ca(),e]),e},async updateAccountServer(t,e){let r=await rp.update(t,e);zr.updateAccount(t,e),console.log(r,t,e)},updateAccount(t,e){mh(ca().map(r=>r.id===t?{...r,...e,lastModified:new Date().toISOString().split("T")[0]}:r))},async deleteAccount(t){let e=await rp.delete(t);console.log("deleteAccount",e),mh(ca().filter(r=>r.id!==t))},getAccountById(t){return ca().find(e=>e.id===t)},getAccountsByType(t){return ca().filter(e=>e.type===t)},getAccountTransactions(t){return gv().filter(e=>e.accountId===t)},addTransaction(t){const e={...t,id:Date.now().toString()};y$([...gv(),e]);const r=this.getAccountById(t.accountId);if(r){const n=t.type==="debit"?t.debitAmount:-t.creditAmount;this.updateAccount(t.accountId,{balance:r.balance+n})}return e},getTotalByType(t){return ca().filter(e=>e.type===t&&e.isActive).reduce((e,r)=>e+r.balance,0)},getAccountCategories(t){const e=this.getAccountsByType(t);return[...new Set(e.map(r=>r.category))]},getSubAccounts(t){return ca().filter(e=>e.parentAccountId===t)},getParentAccounts(){return ca().filter(t=>!t.parentAccountId)},getAccountHierarchy(){const t=this.getParentAccounts();return console.log(this.getSubAccounts("20110")),console.log(t),t.map(e=>({...e,subAccounts:this.getSubAccounts(e?.id)}))},getAccountWithSubAccounts(t){const e=this.getAccountById(t);return e?{...e,subAccounts:this.getSubAccounts(t),parentAccount:e.parentAccountId?this.getAccountById(e.parentAccountId):null}:null},getAccountPath(t){const e=this.getAccountById(t);if(!e)return[];const r=[e];let n=e;for(;n.parentAccountId;){const i=this.getAccountById(n.parentAccountId);if(i)r.unshift(i),n=i;else break}return r},getTotalBalanceWithSubAccounts(t){const e=this.getAccountById(t);if(!e)return 0;const n=this.getSubAccounts(t).reduce((i,o)=>i+this.getTotalBalanceWithSubAccounts(o.id),0);return e.balance+n},canDeleteAccount(t){const e=this.getSubAccounts(t);if(e.length>0)return{canDelete:!1,reason:`Account has ${e.length} sub-account(s). Delete or move sub-accounts first.`};const r=this.getAccountTransactions(t);return r.length>0?{canDelete:!1,reason:`Account has ${r.length} transaction(s). Cannot delete account with transaction history.`}:{canDelete:!0}}};var zl=le("<div>"),gh=le("<div> ");const m$=()=>{const{t}=pr(),e={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem","margin-bottom":"2rem"},r={"font-size":"1.5rem","font-weight":"600",color:"var(--primary-color)","margin-bottom":"0.5rem"},n={"font-size":"0.875rem",color:"var(--text-muted)"},i=x=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(x),o=zr.getTotalByType("Asset"),s=zr.getTotalByType("Liability"),a=zr.getTotalByType("Equity"),l=zr.getTotalByType("Revenue"),d=zr.getTotalByType("Expense"),u=zr.getAccountsByType("Asset").length,h=zr.getAccountsByType("Liability").length,f=zr.getAccountsByType("Equity").length,p=zr.getAccountsByType("Revenue").length,m=zr.getAccountsByType("Expense").length;return(()=>{var x=zl();return y(x,e),c(x,T(Vt,{get title(){return t("dashboard.totalAssets")},get subtitle(){return t("dashboard.overview")},get children(){return[(()=>{var P=zl();return c(P,()=>i(o)),be(g=>y(P,r,g)),P})(),(()=>{var P=gh(),g=P.firstChild;return c(P,u,g),c(P,()=>t("navigation.accounts"),null),be(F=>y(P,n,F)),P})()]}}),null),c(x,T(Vt,{get title(){return t("dashboard.totalLiabilities")},get subtitle(){return t("dashboard.overview")},get children(){return[(()=>{var P=zl();return c(P,()=>i(s)),be(g=>y(P,r,g)),P})(),(()=>{var P=gh(),g=P.firstChild;return c(P,h,g),c(P,()=>t("navigation.accounts"),null),be(F=>y(P,n,F)),P})()]}}),null),c(x,T(Vt,{get title(){return t("dashboard.totalEquity")},get subtitle(){return t("accounts.categories.ownersEquity")},get children(){return[(()=>{var P=zl();return c(P,()=>i(a)),be(g=>y(P,r,g)),P})(),(()=>{var P=gh(),g=P.firstChild;return c(P,f,g),c(P,()=>t("navigation.accounts"),null),be(F=>y(P,n,F)),P})()]}}),null),c(x,T(Vt,{get title(){return t("dashboard.totalRevenue")},get subtitle(){return t("accounts.categories.operatingRevenue")},get children(){return[(()=>{var P=zl();return c(P,()=>i(l)),be(g=>y(P,r,g)),P})(),(()=>{var P=gh(),g=P.firstChild;return c(P,p,g),c(P,()=>t("navigation.accounts"),null),be(F=>y(P,n,F)),P})()]}}),null),c(x,T(Vt,{get title(){return t("dashboard.totalExpenses")},get subtitle(){return t("accounts.categories.operatingExpenses")},get children(){return[(()=>{var P=zl();return c(P,()=>i(d)),be(g=>y(P,r,g)),P})(),(()=>{var P=gh(),g=P.firstChild;return c(P,m,g),c(P,()=>t("navigation.accounts"),null),be(F=>y(P,n,F)),P})()]}}),null),c(x,T(Vt,{get title(){return t("dashboard.netIncome")},get subtitle(){return`${t("dashboard.totalRevenue")} - ${t("dashboard.totalExpenses")}`},get children(){return[(()=>{var P=zl();return c(P,()=>i(l-d)),be(g=>y(P,{...r,color:l-d>=0?"#4caf50":"#f44336"},g)),P})(),(()=>{var P=zl();return c(P,()=>l-d>=0?t("dashboard.netIncome"):t("dashboard.netLoss")),be(g=>y(P,n,g)),P})()]}}),null),x})()};var g$=le("<div><div></div><div>"),v$=le("<h3>"),vh=le("<div>");const b$=t=>{const{t:e}=pr();Fm();const r={display:"flex","justify-content":"flex-end","margin-top":"1rem","padding-top":"1rem","border-top":"1px solid var(--border-color)"},n={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"1rem"},i={"font-size":"0.875rem","font-weight":"600",color:"var(--text-muted)","text-transform":"uppercase","letter-spacing":"0.5px"},o={padding:"0.25rem 0.75rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"500","text-transform":"uppercase","letter-spacing":"0.5px"},s={"font-size":"1.5rem","font-weight":"600",color:"var(--primary-color)","margin-bottom":"0.5rem"},a={"font-size":"0.875rem",color:"var(--text-muted)","margin-bottom":"0.5rem"},l={"font-size":"0.875rem",color:"var(--text-secondary)","line-height":"1.4"},d=f=>({Asset:{bg:"#e8f5e8",color:"#2d7d32"},Liability:{bg:"#fff3e0",color:"#f57c00"},Equity:{bg:"#e3f2fd",color:"#1976d2"},Revenue:{bg:"#e8f5e8",color:"#388e3c"},Expense:{bg:"#ffebee",color:"#d32f2f"}})[f]||{bg:"#f5f5f5",color:"#666"},u=f=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(f),h=d(t.account.accountType);return T(Vt,{get children(){return[(()=>{var f=g$(),p=f.firstChild,m=p.nextSibling;return y(f,n),y(p,i),c(p,()=>t.account.accountNumber),c(m,()=>e(`accounts.types.${t.account.accountType.toLowerCase()}`)),be(x=>y(m,{...o,background:h.bg,color:h.color},x)),f})(),(()=>{var f=v$();return f.style.setProperty("margin","0 0 0.5rem 0"),f.style.setProperty("font-size","1.1rem"),c(f,()=>t.account.name),f})(),(()=>{var f=vh();return y(f,a),c(f,()=>t.account.category),f})(),(()=>{var f=vh();return y(f,s),c(f,()=>u(t.account.balance)),f})(),(()=>{var f=vh();return y(f,l),c(f,()=>t.account.description),f})(),Ve(()=>Ve(()=>!t.account.isActive)()&&(()=>{var f=vh();return f.style.setProperty("margin-top","0.5rem"),f.style.setProperty("padding","0.25rem 0.75rem"),f.style.setProperty("border-radius","9999px"),f.style.setProperty("font-size","0.75rem"),f.style.setProperty("font-weight","500"),f.style.setProperty("background","#ffebee"),f.style.setProperty("color","#d32f2f"),f.style.setProperty("text-align","center"),c(f,()=>e("common.inactive")),f})()),(()=>{var f=vh();return y(f,r),c(f,T(mt,{variant:"primary",size:"sm",onClick:()=>t.onViewDetails?.(t.account),get children(){return[Ve(()=>e("common.view"))," ",Ve(()=>e("accounts.accountDetails"))]}})),f})()]}})};var P$=le("<div><div></div><div>"),x$=le("<div><div><div><div></div><h3>"),S$=le("<div>"),w$=le("<button>"),C$=le("<div><h4> (<!>)"),_$=le("<div><div><div></div><div> • </div></div><div>");const A$=t=>{const{t:e}=pr(),r=Fm(),[n,i]=Ae(!0),o={"margin-bottom":"1rem"},s={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"1rem"},a={display:"flex","align-items":"center",gap:"1rem"},l={background:"none",border:"none",cursor:"pointer","font-size":"1.2rem",color:"var(--text-muted)",padding:"0.25rem","border-radius":"var(--border-radius-sm)",transition:"all 0.2s ease"},d={"font-size":"0.875rem","font-weight":"600",color:"var(--text-muted)","text-transform":"uppercase"},u={"font-size":"1.1rem","font-weight":"600",color:"var(--text-primary)",margin:"0"},h={"font-size":"1.25rem","font-weight":"600",color:"var(--primary-color)"},f={padding:"0.25rem 0.75rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"500","text-transform":"uppercase","letter-spacing":"0.5px"},p={"margin-left":"1rem","border-left":"2px solid var(--border-color)","padding-left":"1rem","margin-top":"1rem"},m={display:"flex","justify-content":"space-between","align-items":"center",padding:"0.75rem","margin-bottom":"0.5rem",background:"var(--background-color)","border-radius":"var(--border-radius-sm)",border:"1px solid var(--border-color)",cursor:"pointer",transition:"all 0.2s ease"},x={flex:"1"},P={"font-weight":"500","margin-bottom":"0.25rem"},g={"font-size":"0.875rem",color:"var(--text-muted)"},F={"font-weight":"600",color:"var(--primary-color)"},V={display:"flex",gap:"0.5rem"},N=$=>({Asset:{bg:"#e8f5e8",color:"#2d7d32"},Liability:{bg:"#fff3e0",color:"#f57c00"},Equity:{bg:"#e3f2fd",color:"#1976d2"},Revenue:{bg:"#e8f5e8",color:"#388e3c"},Expense:{bg:"#ffebee",color:"#d32f2f"}})[$]||{bg:"#f5f5f5",color:"#666"},R=$=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format($),M=$=>{t.onViewDetails?t.onViewDetails($):r(`/accounts/${$.id}`)},C=()=>{t.onAddSubAccount&&t.onAddSubAccount(t.account)},k=t.account.balance+t.account.subAccounts.reduce(($,w)=>$+w.balance,0),D=N(t.account.accountType);return T(Vt,{className:"account-hierarchy-card",style:o,get children(){return[(()=>{var $=x$(),w=$.firstChild,_=w.firstChild,v=_.firstChild,z=v.nextSibling;return y($,s),y(w,a),c(w,(()=>{var W=Ve(()=>t.account.subAccounts.length>0);return()=>W()&&(()=>{var A=w$();return A.addEventListener("mouseleave",I=>I.target.style.background="none"),A.addEventListener("mouseenter",I=>I.target.style.background="var(--background-color)"),A.$$click=()=>i(!n()),y(A,l),c(A,()=>n()?"▼":"▶"),A})()})(),_),_.$$click=()=>M(t.account),_.style.setProperty("cursor","pointer"),y(v,d),c(v,()=>t.account.accountNumber),y(z,u),c(z,()=>t.account.name),c($,T(We,{get when(){return t?.account?.accountType},get children(){var W=P$(),A=W.firstChild,I=A.nextSibling;return W.style.setProperty("text-align","right"),y(A,h),c(A,()=>R(k||0)),c(I,()=>e(`accounts.types.${t?.account?.accountType?.toLowerCase()}`)),be(ee=>y(I,{...f,background:D.bg,color:D.color},ee)),W}}),null),$})(),(()=>{var $=S$();return y($,V),c($,T(mt,{variant:"secondary",size:"sm",onClick:()=>M(t.account),get children(){return[Ve(()=>e("common.view"))," ",Ve(()=>e("accounts.accountDetails"))]}}),null),c($,T(mt,{variant:"outline",size:"sm",onClick:C,get children(){return[Ve(()=>e("common.add"))," ",Ve(()=>e("accounts.subAccounts"))]}}),null),$})(),Ve(()=>Ve(()=>!!(n()&&t.account.subAccounts.length>0))()&&(()=>{var $=C$(),w=$.firstChild,_=w.firstChild,v=_.nextSibling;return v.nextSibling,y($,p),w.style.setProperty("margin","0 0 1rem 0"),w.style.setProperty("font-size","1rem"),w.style.setProperty("color","var(--text-muted)"),c(w,()=>e("accounts.subAccounts"),_),c(w,()=>t.account.subAccounts.length,v),c($,()=>t.account.subAccounts.map(z=>(()=>{var W=_$(),A=W.firstChild,I=A.firstChild,ee=I.nextSibling,Z=ee.firstChild,X=A.nextSibling;return W.addEventListener("mouseleave",se=>{se.currentTarget.style.background="var(--background-color)",se.currentTarget.style.transform="translateY(0)"}),W.addEventListener("mouseenter",se=>{se.currentTarget.style.background="var(--surface-color)",se.currentTarget.style.transform="translateY(-1px)"}),W.$$click=()=>M(z),y(W,m),y(A,x),y(I,P),c(I,()=>z.name),y(ee,g),c(ee,()=>z.accountNumber,Z),c(ee,()=>z.description,null),y(X,F),c(X,()=>R(z.balance)),W})()),null),$})())]}})};tr(["click"]);var k$=le("<form><div>");const E$=t=>{const{t:e}=pr(),[r,n]=Ae({accountNumber:"",name:"",accountType:"",category:"",type:"",classification:"",description:"",balance:"0",isActive:"true"}),i=[{value:"Asset",label:e("accounts.types.asset"),type:"debit",classification:"real"},{value:"Liability",label:e("accounts.types.liability"),type:"credit",classification:"real"},{value:"Equity",label:e("accounts.types.equity"),type:"credit",classification:"real"},{value:"Revenue",label:e("accounts.types.revenue"),type:"credit",classification:"nominal"},{value:"Expense",label:e("accounts.types.expense"),type:"debit",classification:"nominal"}],o=()=>{const u=r().accountType;return u?{Asset:[{value:"Current Assets",label:e("accounts.categories.currentAssets")},{value:"Fixed Assets",label:e("accounts.categories.fixedAssets")}],Liability:[{value:"Current Liabilities",label:e("accounts.categories.currentLiabilities")},{value:"Long-term Liabilities",label:e("accounts.categories.longTermLiabilities")}],Equity:[{value:"Owner's Equity",label:e("accounts.categories.ownersEquity")}],Revenue:[{value:"Operating Revenue",label:e("accounts.categories.operatingRevenue")},{value:"Sales Revenue",label:e("accounts.categories.salesRevenue")},{value:"Service Revenue",label:e("accounts.categories.servicesRevenue")},{value:"Subscription Revenue",label:e("accounts.categories.subscriptionRevenue")},{value:"Rental Revenue",label:e("accounts.categories.rentalRevenue")},{value:"Commission Revenue",label:e("accounts.categories.commissionRevenue")},{value:"Franchise Revenue",label:e("accounts.categories.franchiseRevenue")},{value:"Licensing Revenue",label:e("accounts.categories.licensingRevenue")}],Expense:[{value:"Operating Expenses",label:e("accounts.categories.operatingExpenses")}]}[u]||[]:[]},s=[{value:"true",label:e("common.active")},{value:"false",label:e("common.inactive")}],a={display:"flex",gap:"1rem","justify-content":"flex-end","margin-top":"2rem"},l=u=>{u.preventDefault();const h=r();if(!h.accountNumber||!h.name||!h.accountType||!h.category){alert(e("forms.requiredField"));return}const f=zr.accounts.find(x=>x.accountNumber===h.accountNumber),p=i.find(x=>x.value===h.accountType);if(f){alert(e("forms.duplicateAccountNumber"));return}const m={accountNumber:h.accountNumber,code:h.accountNumber,name:h.name,accountType:"",classification:p?.classification,type:p?.type,category:h.category,description:h.description,balance:parseFloat(h.balance)||0,isActive:h.isActive==="true"};zr.addAccount(m),n({accountNumber:"",name:"",accountType:"",type:"",category:"",description:"",classification:"",balance:"0",isActive:"true"}),t.onClose()},d=(u,h)=>{n(f=>{const p={...f,[u]:h};return u==="type"&&(p.category=""),p})};return T(Pi,{get isOpen(){return t.isOpen},get onClose(){return t.onClose},get title(){return e("accounts.addAccount")},get children(){var u=k$(),h=u.firstChild;return u.addEventListener("submit",l),c(u,T(Ot,{get label(){return e("accounts.accountNumber")},get value(){return r().accountNumber},onChange:f=>d("accountNumber",f),get placeholder(){return e("accounts.accountNumber")},required:!0}),h),c(u,T(Ot,{get label(){return e("accounts.accountName")},get value(){return r().name},onChange:f=>d("name",f),get placeholder(){return e("accounts.accountName")},required:!0}),h),c(u,T(Nn,{get label(){return e("accounts.accountType")},get value(){return r().accountType},onChange:f=>d("accountType",f),options:i,required:!0}),h),c(u,T(Nn,{get label(){return e("accounts.category")},get value(){return r().category},onChange:f=>d("category",f),get options(){return o()},required:!0}),h),c(u,T(Ot,{get label(){return e("common.description")},get value(){return r().description},onChange:f=>d("description",f),get placeholder(){return e("common.description")}}),h),c(u,T(Ot,{get label(){return e("accounts.balance")},type:"number",get value(){return r().balance},onChange:f=>d("balance",f),get placeholder(){return e("accounts.balance")}}),h),c(u,T(Nn,{get label(){return e("common.status")},get value(){return r().isActive},onChange:f=>d("isActive",f),options:s,required:!0}),h),y(h,a),c(h,T(mt,{variant:"secondary",type:"button",get onClick(){return t.onClose},get children(){return e("common.cancel")}}),null),c(h,T(mt,{variant:"primary",type:"submit",get children(){return e("accounts.addAccount")}}),null),u}})};var T$=le("<form><div>"),I$=le("<div><div></div><div> - </div><div> • ");const N$=t=>{const{t:e}=pr(),[r,n]=Ae({accountNumber:"",name:"",category:"",description:"",balance:"0",isActive:"true"});e("accounts.types.asset"),e("accounts.types.liability"),e("accounts.types.equity"),e("accounts.types.revenue"),e("accounts.types.expense");const i=[{value:"true",label:e("common.active")},{value:"false",label:e("common.inactive")}],o={display:"flex",gap:"1rem","justify-content":"flex-end","margin-top":"2rem"},s={background:"var(--background-color)",padding:"1rem","border-radius":"var(--border-radius-sm)","margin-bottom":"1.5rem",border:"1px solid var(--border-color)"},a={"font-size":"0.875rem","font-weight":"500",color:"var(--text-muted)","margin-bottom":"0.5rem"},l={"font-weight":"600",color:"var(--text-primary)"},d={"font-size":"0.875rem",color:"var(--text-secondary)"},u=m=>{m.preventDefault();const x=r();if(console.log(x),!x.accountNumber||!x.name||!t.parentAccount){alert(e("forms.requiredField"));return}const P=zr.accounts.find(F=>F.accountNumber===x.accountNumber);if(console.log(P),P){alert(e("forms.duplicateAccountNumber"));return}const g={accountNumber:x.accountNumber,code:x.accountNumber,name:x.name,description:x.description,accountType:t.parentAccount.accountType,category:t.parentAccount.category,classification:t.parentAccount?.classification,type:t.parentAccount?.type,isActive:x.isActive==="true",parentAccountId:t.parentAccount.id,parentAccountNumber:t.parentAccount.accountId};zr.addAccount(g),n({accountNumber:"",name:"",category:"",description:"",balance:"0",isActive:"true"}),t.onClose()},h=(m,x)=>{n(P=>({...P,[m]:x}))},f=()=>{if(!t.parentAccount)return"";const m=t.parentAccount.accountNumber,P=zr.getSubAccounts(t.parentAccount.id).length+1;return(parseInt(m)+P).toString()},p=()=>r().accountNumber===""&&t.parentAccount?f():r().accountNumber;return T(Pi,{get isOpen(){return t.isOpen},get onClose(){return t.onClose},get title(){return`${e("common.add")} ${e("accounts.subAccounts")}`},get children(){return[Ve(()=>Ve(()=>!!t.parentAccount)()&&(()=>{var m=I$(),x=m.firstChild,P=x.nextSibling,g=P.firstChild,F=P.nextSibling,V=F.firstChild;return y(m,s),y(x,a),c(x,()=>e("accounts.parentAccount")),y(P,l),c(P,()=>t.parentAccount.accountNumber,g),c(P,()=>t.parentAccount.name,null),y(F,d),c(F,()=>e(`accounts.types.${t.parentAccount?.accountType?.toLowerCase()}`),V),c(F,()=>t.parentAccount.category,null),m})()),(()=>{var m=T$(),x=m.firstChild;return m.addEventListener("submit",u),c(m,T(Ot,{get label(){return e("accounts.accountNumber")},get value(){return p()},onChange:P=>h("accountNumber",P),get placeholder(){return`${e("common.suggested")}: ${f()}`},required:!0}),x),c(m,T(Ot,{get label(){return e("accounts.accountName")},get value(){return r().name},onChange:P=>h("name",P),get placeholder(){return e("accounts.accountName")},required:!0}),x),c(m,T(Ot,{get label(){return e("common.description")},get value(){return r().description},onChange:P=>h("description",P),get placeholder(){return e("common.description")}}),x),c(m,T(Ot,{get label(){return e("accounts.balance")},type:"number",get value(){return r().balance},onChange:P=>h("balance",P),get placeholder(){return e("accounts.balance")}}),x),c(m,T(Nn,{get label(){return e("common.status")},get value(){return r().isActive},onChange:P=>h("isActive",P),options:i,required:!0}),x),y(x,o),c(x,T(mt,{variant:"secondary",type:"button",get onClick(){return t.onClose},get children(){return e("common.cancel")}}),null),c(x,T(mt,{variant:"primary",type:"submit",get children(){return[Ve(()=>e("common.add"))," ",Ve(()=>e("accounts.subAccounts"))]}}),null),m})()]}})};var R$=le("<form><div>"),D$=le("<div>");const L$=t=>{const{t:e}=pr(),[r,n]=Ae({accountNumber:"",name:"",type:"",accountType:"",category:"",description:"",isActive:"true"}),[i,o]=Ae(null);Ei(()=>{t.account&&(console.log(t.account),n({accountNumber:t.account.accountNumber,name:t.account.name,type:t.account.type,accountType:t.account.accountType,category:t.account.category,description:t.account.description,isActive:t.account.isActive.toString()}),o(null))});const s=[{value:"Asset",label:e("accounts.types.asset")},{value:"Liability",label:e("accounts.types.liability")},{value:"Equity",label:e("accounts.types.equity")},{value:"Revenue",label:e("accounts.types.revenue")},{value:"Expense",label:e("accounts.types.expense")}],a=()=>{const p=r().accountType;return p?{Asset:[{value:"Current Assets",label:e("accounts.categories.currentAssets")},{value:"Fixed Assets",label:e("accounts.categories.fixedAssets")}],Liability:[{value:"Current Liabilities",label:e("accounts.categories.currentLiabilities")},{value:"Long-term Liabilities",label:e("accounts.categories.longTermLiabilities")}],Equity:[{value:"Owner's Equity",label:e("accounts.categories.ownersEquity")}],Revenue:[{value:"Operating Revenue",label:e("accounts.categories.operatingRevenue")}],Expense:[{value:"Operating Expenses",label:e("accounts.categories.operatingExpenses")}]}[p]||[]:[]},l=[{value:"true",label:e("common.active")},{value:"false",label:e("common.inactive")}],d={display:"flex",gap:"1rem","justify-content":"flex-end","margin-top":"2rem"},u=p=>{if(p.preventDefault(),o(null),!t.account)return;const m=r();if(!m.accountNumber||!m.name||!m.type||!m.category){o(e("forms.requiredField"));return}if(zr.accounts.find(F=>F.accountNumber===m.accountNumber&&F.id!==t.account.id)){o(e("forms.duplicateAccountNumber"));return}const P={accountNumber:m.accountNumber,name:m.name,type:m.type,accountType:m.accountType,category:m.category,description:m.description,isActive:m.isActive==="true"};console.log({data:m,updatedAccount:P});let g=Kw(Object.keys(t.account),P,t.account,{accountId:1,id:1});try{zr.updateAccountServer(t.account?.accountId,g.data),t.onClose()}catch(F){o(F instanceof Error?F.message:e("forms.saveError"))}},h=()=>{if(!t.account)return;const p=zr.canDeleteAccount(t.account.id);if(!p.canDelete){o(p.reason||e("forms.deleteError"));return}const m=e("forms.confirmDelete");if(confirm(m))try{zr.deleteAccount(t.account.id),t.onClose()}catch(x){o(x instanceof Error?x.message:e("forms.deleteError"))}},f=(p,m)=>{n(x=>{const P={...x,[p]:m};return p==="type"&&(P.category=""),P}),i()&&o(null)};return t.account?T(Pi,{get isOpen(){return t.isOpen},get onClose(){return t.onClose},get title(){return e("accounts.editAccount")},get children(){var p=R$(),m=p.firstChild;return p.addEventListener("submit",u),c(p,T(Ot,{get label(){return e("accounts.accountNumber")},get value(){return r().accountNumber},onChange:x=>f("accountNumber",x),get placeholder(){return e("accounts.accountNumber")},required:!0}),m),c(p,T(Ot,{get label(){return e("accounts.accountName")},get value(){return r().name},onChange:x=>f("name",x),get placeholder(){return e("accounts.accountName")},required:!0}),m),c(p,T(Nn,{get label(){return e("accounts.accountType")},get value(){return r().accountType},onChange:x=>f("accountType",x),options:s,required:!0}),m),c(p,T(Nn,{get label(){return e("accounts.category")},get value(){return r().category},onChange:x=>f("category",x),get options(){return a()},required:!0}),m),c(p,T(Ot,{get label(){return e("common.description")},get value(){return r().description},onChange:x=>f("description",x),get placeholder(){return e("common.description")}}),m),c(p,T(Nn,{get label(){return e("common.status")},get value(){return r().isActive},onChange:x=>f("isActive",x),options:l,required:!0}),m),c(p,(()=>{var x=Ve(()=>!!i());return()=>x()&&(()=>{var P=D$();return P.style.setProperty("padding","1rem"),P.style.setProperty("border-radius","var(--border-radius-sm)"),P.style.setProperty("margin-top","1rem"),P.style.setProperty("background","#f8d7da"),P.style.setProperty("color","#721c24"),P.style.setProperty("border","1px solid #f5c6cb"),c(P,i),P})()})(),m),y(m,d),c(m,T(mt,{variant:"outline",type:"button",onClick:h,style:{color:"#dc3545","border-color":"#dc3545","margin-right":"auto"},get children(){return e("accounts.deleteAccount")}}),null),c(m,T(mt,{variant:"secondary",type:"button",get onClick(){return t.onClose},get children(){return e("common.cancel")}}),null),c(m,T(mt,{variant:"primary",type:"submit",get children(){return e("common.save")}}),null),p}}):null};var $$=le("<div><div>⚠️</div><div></div><div></div><div>"),Mf=le("<div>"),F$=le("<div><div></div><div>"),M$=le("<div><button></button><button> (<!>)"),O$=le("<div><div><span></span><span></span></div><div><span></span><span></span></div><div><span></span><span></span></div><div><span></span><span></span></div><div><span></span><span></span></div><div><span></span><span>"),B$=le("<div><div><div></div><div> • </div></div><div>");const j$=t=>{const{t:e}=pr(),[r,n]=Ae("details"),[i,o]=Ae(!1),s=zt(()=>t.account?zr.getAccountById(t.account.id)||t.account:null),a={display:"flex","justify-content":"space-between","align-items":"center",padding:"0.75rem 0","border-bottom":"1px solid var(--border-color)"},l={"font-weight":"500",color:"var(--text-muted)","font-size":"0.875rem"},d={"font-weight":"600",color:"var(--text-primary)"},u={"text-align":"center","margin-bottom":"2rem"},h={"font-size":"1.5rem","font-weight":"600",color:"var(--text-primary)",margin:"0.5rem 0"},f={"font-size":"2rem","font-weight":"700",color:"var(--primary-color)","margin-bottom":"0.5rem"},p={padding:"0.25rem 0.75rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"500","text-transform":"uppercase","letter-spacing":"0.5px","margin-bottom":"1rem"},m={display:"flex","border-bottom":"1px solid var(--border-color)","margin-bottom":"1.5rem"},x=$=>({padding:"0.75rem 1rem",background:"none",border:"none",cursor:"pointer","font-weight":"500",color:$?"var(--primary-color)":"var(--text-muted)","border-bottom":$?"2px solid var(--primary-color)":"2px solid transparent",transition:"all 0.2s ease"}),P={display:"flex","justify-content":"space-between","align-items":"center",padding:"1rem 0","border-bottom":"1px solid var(--border-color)"},g={flex:"1"},F={"font-size":"0.875rem",color:"var(--text-muted)"},V={"font-weight":"500","margin-bottom":"0.25rem"},N=$=>({"font-weight":"600",color:$==="debit"?"#4caf50":"#f44336"}),R={display:"flex",gap:"1rem","justify-content":"flex-end","margin-top":"2rem"},M=$=>({Asset:{bg:"#e8f5e8",color:"#2d7d32"},Liability:{bg:"#fff3e0",color:"#f57c00"},Equity:{bg:"#e3f2fd",color:"#1976d2"},Revenue:{bg:"#e8f5e8",color:"#388e3c"},Expense:{bg:"#ffebee",color:"#d32f2f"}})[$]||{bg:"#f5f5f5",color:"#666"},C=$=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format($),k=$=>new Date($).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),D=$=>{zr.deleteAccount(s()?.accountId),t.onClose()};return T(Pi,{get isOpen(){return t.isOpen},get onClose(){return t.onClose},get title(){return e("accounts.accountDetails")},get children(){return[Ve(()=>Ve(()=>!s())()?(()=>{var $=$$(),w=$.firstChild,_=w.nextSibling,v=_.nextSibling,z=v.nextSibling;return $.style.setProperty("text-align","center"),$.style.setProperty("padding","3rem"),$.style.setProperty("color","var(--text-muted)"),w.style.setProperty("font-size","1.5rem"),w.style.setProperty("margin-bottom","1rem"),_.style.setProperty("font-size","1.1rem"),_.style.setProperty("margin-bottom","0.5rem"),c(_,()=>e("common.error")),v.style.setProperty("font-size","0.875rem"),c(v,()=>e("common.noDataFound")),z.style.setProperty("margin-top","2rem"),c(z,T(mt,{variant:"primary",get onClick(){return t.onClose},get children(){return e("common.close")}})),$})():(()=>{const $=zt(()=>M(s().accountType)),w=zt(()=>zr.getAccountTransactions(s().id));return[(()=>{var _=F$(),v=_.firstChild,z=v.nextSibling;return y(_,u),y(v,h),c(v,()=>s().name),y(z,f),c(z,()=>C(s().balance||0)),c(_,T(We,{get when(){return s().accountType},get children(){var W=Mf();return c(W,()=>e(`accounts.types.${s().accountType?.toLowerCase()}`)),be(A=>y(W,{...p,background:$().bg,color:$().color},A)),W}}),null),_})(),(()=>{var _=M$(),v=_.firstChild,z=v.nextSibling,W=z.firstChild,A=W.nextSibling;return A.nextSibling,y(_,m),v.$$click=()=>n("details"),c(v,()=>e("accounts.accountDetails")),z.$$click=()=>n("transactions"),c(z,()=>e("accounts.transactions"),W),c(z,()=>w().length,A),be(I=>{var ee=x(r()==="details"),Z=x(r()==="transactions");return I.e=y(v,ee,I.e),I.t=y(z,Z,I.t),I},{e:void 0,t:void 0}),_})(),Ve(()=>Ve(()=>r()==="details")()&&(()=>{var _=O$(),v=_.firstChild,z=v.firstChild,W=z.nextSibling,A=v.nextSibling,I=A.firstChild,ee=I.nextSibling,Z=A.nextSibling,X=Z.firstChild,se=X.nextSibling,U=Z.nextSibling,E=U.firstChild,O=E.nextSibling,L=U.nextSibling,G=L.firstChild,K=G.nextSibling,q=L.nextSibling,B=q.firstChild,H=B.nextSibling;return c(z,()=>e("accounts.accountNumber")),c(W,()=>s().accountNumber),c(I,()=>e("accounts.category")),c(ee,()=>s().category),c(X,()=>e("common.description")),c(se,()=>s().description),c(E,()=>e("common.status")),c(O,(()=>{var Y=Ve(()=>!!s().isActive);return()=>Y()?e("common.active"):e("common.inactive")})()),c(G,()=>e("accounts.createdDate")),c(K,()=>k(s().createdDate)),c(B,()=>e("accounts.lastModified")),c(H,()=>k(s().lastModified)),be(Y=>{var te=a,oe=l,pe=d,ne=a,Q=l,ce=d,ue=a,de=l,ge=d,ye=a,fe=l,Se=d,qe=a,Oe=l,Ie=d,Be=a,ke=l,Ge=d;return Y.e=y(v,te,Y.e),Y.t=y(z,oe,Y.t),Y.a=y(W,pe,Y.a),Y.o=y(A,ne,Y.o),Y.i=y(I,Q,Y.i),Y.n=y(ee,ce,Y.n),Y.s=y(Z,ue,Y.s),Y.h=y(X,de,Y.h),Y.r=y(se,ge,Y.r),Y.d=y(U,ye,Y.d),Y.l=y(E,fe,Y.l),Y.u=y(O,Se,Y.u),Y.c=y(L,qe,Y.c),Y.w=y(G,Oe,Y.w),Y.m=y(K,Ie,Y.m),Y.f=y(q,Be,Y.f),Y.y=y(B,ke,Y.y),Y.g=y(H,Ge,Y.g),Y},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0}),_})()),Ve(()=>Ve(()=>r()==="transactions")()&&(()=>{var _=Mf();return c(_,(()=>{var v=Ve(()=>w().length===0);return()=>v()?(()=>{var z=Mf();return z.style.setProperty("text-align","center"),z.style.setProperty("color","var(--text-muted)"),z.style.setProperty("padding","2rem"),c(z,()=>e("common.noDataFound")),z})():w().map(z=>(()=>{var W=B$(),A=W.firstChild,I=A.firstChild,ee=I.nextSibling,Z=ee.firstChild,X=A.nextSibling;return y(W,P),y(A,g),y(I,V),c(I,()=>z.description),y(ee,F),c(ee,()=>k(z.date),Z),c(ee,()=>z.reference,null),c(X,()=>z.type==="debit"?"+":"-",null),c(X,()=>C(z.type==="debit"?z.debitAmount:z.creditAmount),null),be(se=>y(X,N(z.type),se)),W})())})()),_})()),(()=>{var _=Mf();return y(_,R),c(_,T(mt,{variant:"secondary",get onClick(){return t.onClose},get children(){return e("common.close")}}),null),c(_,T(mt,{variant:"primary",onClick:()=>o(!0),get children(){return e("accounts.editAccount")}}),null),c(_,T(We,{get when(){return Xt.state?.profile?.isAdmin},get children(){return T(mt,{variant:"primary",onClick:D,children:"Remove"})}}),null),_})()]})()),Ve(()=>Ve(()=>!!s())()&&T(L$,{get isOpen(){return i()},onClose:()=>{o(!1)},get account(){return s()}}))]}})};tr(["click"]);var V$=le("<div><h2></h2><div><span>:</span><button></button><button>"),z$=le("<div><span>:"),ex=le("<div>"),U$=le("<button>");const q$=()=>{const{t}=pr(),[e,r]=Ae(!1),[n,i]=Ae(!1),[o,s]=Ae(!1),[a,l]=Ae(null),[d,u]=Ae(null),[h,f]=Ae("All"),[p,m]=Ae("hierarchy"),x=D=>{l(D),s(!0)},P=D=>{u(D),i(!0)},g=()=>h()==="All"?p()==="hierarchy"?zr.getAccountHierarchy():zr.accounts:p()==="hierarchy"?zr.getAccountHierarchy().filter(D=>D.accountType===h()):zr.getAccountsByType(h()),F={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(350px, 1fr))",gap:"1.5rem","margin-bottom":"2rem"},V={display:"flex",gap:"1rem","margin-bottom":"2rem","align-items":"center"},N=D=>({padding:"0.5rem 1rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)",background:D?"var(--primary-color)":"var(--surface-color)",color:D?"white":"var(--text-primary)",cursor:"pointer","font-weight":"500",transition:"all 0.2s ease"}),R={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"2rem"},M={display:"flex",gap:"0.5rem","align-items":"center","margin-left":"auto","margin-right":"1rem"},C=D=>({padding:"0.5rem 1rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)",background:D?"var(--primary-color)":"var(--surface-color)",color:D?"white":"var(--text-primary)",cursor:"pointer","font-weight":"500","font-size":"0.875rem",transition:"all 0.2s ease"}),k=async()=>{let D=await rp.getAlls("acc");zr.updAccount(Object.values(D))};return Kn(()=>{k()}),T(Bo,{get title(){return t("accounts.title")},get children(){return[T(m$,{}),(()=>{var D=V$(),$=D.firstChild,w=$.nextSibling,_=w.firstChild,v=_.firstChild,z=_.nextSibling,W=z.nextSibling;return y(D,R),$.style.setProperty("margin","0"),$.style.setProperty("font-size","1.5rem"),c($,()=>t("accounts.title")),y(w,M),_.style.setProperty("font-weight","500"),_.style.setProperty("color","var(--text-muted)"),_.style.setProperty("font-size","0.875rem"),c(_,()=>t("common.view"),v),z.$$click=()=>m("hierarchy"),c(z,()=>t("accounts.accountHierarchy")),W.$$click=()=>{m("flat"),rp.getAlls("iDP")},c(W,()=>t("common.all")),c(D,T(mt,{variant:"primary",onClick:()=>r(!0),get children(){return t("accounts.addAccount")}}),null),be(A=>{var I=C(p()==="hierarchy"),ee=C(p()==="flat");return A.e=y(z,I,A.e),A.t=y(W,ee,A.t),A},{e:void 0,t:void 0}),D})(),(()=>{var D=z$(),$=D.firstChild,w=$.firstChild;return y(D,V),$.style.setProperty("font-weight","500"),$.style.setProperty("color","var(--text-muted)"),c($,()=>t("common.filter"),w),c(D,()=>[t("common.all"),t("accounts.types.asset"),t("accounts.types.liability"),t("accounts.types.equity"),t("accounts.types.revenue"),t("accounts.types.expense")].map((_,v)=>{const W=["All","Asset","Liability","Equity","Revenue","Expense"][v];return(()=>{var A=U$();return A.$$click=()=>f(W),c(A,_),be(I=>y(A,N(h()===W),I)),A})()}),null),D})(),(()=>{var D=ex();return c(D,(()=>{var $=Ve(()=>p()==="hierarchy");return()=>$()?g().map(w=>T(A$,{account:w,onAddSubAccount:P,onViewDetails:x})):g().map(w=>T(b$,{account:w,onViewDetails:x}))})()),be($=>y(D,p()==="hierarchy"?{display:"flex","flex-direction":"column",gap:"1rem"}:F,$)),D})(),Ve(()=>Ve(()=>g().length===0)()&&(()=>{var D=ex();return D.style.setProperty("text-align","center"),D.style.setProperty("color","var(--text-muted)"),D.style.setProperty("padding","3rem"),D.style.setProperty("font-size","1.1rem"),c(D,()=>t("common.noDataFound")),D})()),T(E$,{get isOpen(){return e()},onClose:()=>r(!1)}),T(N$,{get isOpen(){return n()},onClose:()=>i(!1),get parentAccount(){return d()}}),T(j$,{get isOpen(){return o()},onClose:()=>s(!1),get account(){return a()}})]}})};tr(["click"]);var H$=le("<div><h2>"),eu=le("<div>"),W$=le("<div><div><div></div><h1></h1><div></div></div><div>"),G$=le("<div><button></button><button> (<!>)"),Of=le("<div><span></span><span>"),K$=le("<p>"),Y$=le("<div><div></div><div>"),X$=le("<div><div><div></div><div> • </div></div><div>");const Z$=()=>{const{t}=pr(),e=jw(),r=Fm(),[n,i]=Ae(null),[o,s]=Ae("overview");Kn(()=>{const v=zr.getAccountById(e.id);v?i(v):r("/accounts")});const a={display:"flex","align-items":"center",gap:"0.5rem","margin-bottom":"1rem"},l={display:"flex","align-items":"center",gap:"1rem","margin-bottom":"2rem"},d={"font-size":"1rem","font-weight":"600",color:"var(--text-muted)","text-transform":"uppercase"},u={"font-size":"2.5rem","font-weight":"700",color:"var(--primary-color)"},h={padding:"0.5rem 1rem","border-radius":"9999px","font-size":"0.875rem","font-weight":"500","text-transform":"uppercase","letter-spacing":"0.5px"},f={display:"flex","border-bottom":"1px solid var(--border-color)","margin-bottom":"2rem"},p=v=>({padding:"1rem 2rem",background:"none",border:"none",cursor:"pointer","font-weight":"500",color:v?"var(--primary-color)":"var(--text-muted)","border-bottom":v?"2px solid var(--primary-color)":"2px solid transparent",transition:"all 0.2s ease"}),m={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem","margin-bottom":"2rem"},x={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},P={display:"flex","justify-content":"space-between","align-items":"center",padding:"0.75rem 0","border-bottom":"1px solid var(--border-color)"},g={"font-weight":"500",color:"var(--text-muted)"},F={"font-weight":"600",color:"var(--text-primary)"},V={display:"flex","justify-content":"space-between","align-items":"center",padding:"1rem 0","border-bottom":"1px solid var(--border-color)"},N={flex:"1"},R={"font-weight":"500","margin-bottom":"0.25rem"},M={"font-size":"0.875rem",color:"var(--text-muted)"},C=v=>({"font-weight":"600",color:v==="debit"?"#4caf50":"#f44336"});if(!n())return T(Bo,{get title(){return t("accounts.accountDetails")},get children(){var v=H$(),z=v.firstChild;return v.style.setProperty("text-align","center"),v.style.setProperty("padding","3rem"),c(z,()=>t("common.error")),c(v,T(mt,{variant:"primary",onClick:()=>r("/accounts"),get children(){return[Ve(()=>t("common.back"))," ",Ve(()=>t("navigation.accounts"))]}}),null),v}});const k=v=>({Asset:{bg:"#e8f5e8",color:"#2d7d32"},Liability:{bg:"#fff3e0",color:"#f57c00"},Equity:{bg:"#e3f2fd",color:"#1976d2"},Revenue:{bg:"#e8f5e8",color:"#388e3c"},Expense:{bg:"#ffebee",color:"#d32f2f"}})[v]||{bg:"#f5f5f5",color:"#666"},D=v=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(v),$=v=>new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),w=k(n().accountType),_=zr.getAccountTransactions(n().id);return T(Bo,{get title(){return n().name},get children(){return[(()=>{var v=eu();return y(v,a),c(v,T(mt,{variant:"secondary",onClick:()=>r("/accounts"),get children(){return["← ",Ve(()=>t("common.back"))," ",Ve(()=>t("navigation.accounts"))]}})),v})(),(()=>{var v=W$(),z=v.firstChild,W=z.firstChild,A=W.nextSibling,I=A.nextSibling,ee=z.nextSibling;return y(v,l),y(W,d),c(W,()=>n().accountNumber),A.style.setProperty("margin","0.5rem 0"),A.style.setProperty("font-size","2rem"),c(A,()=>n().name),y(I,u),c(I,()=>D(n().balance)),c(ee,()=>n().accountType),be(Z=>y(ee,{...h,background:w.bg,color:w.color},Z)),v})(),(()=>{var v=G$(),z=v.firstChild,W=z.nextSibling,A=W.firstChild,I=A.nextSibling;return I.nextSibling,y(v,f),z.$$click=()=>s("overview"),c(z,()=>t("dashboard.overview")),W.$$click=()=>s("transactions"),c(W,()=>t("accounts.transactions"),A),c(W,()=>_.length,I),be(ee=>{var Z=p(o()==="overview"),X=p(o()==="transactions");return ee.e=y(z,Z,ee.e),ee.t=y(W,X,ee.t),ee},{e:void 0,t:void 0}),v})(),Ve(()=>Ve(()=>o()==="overview")()&&(()=>{var v=Y$(),z=v.firstChild,W=z.nextSibling;return y(z,m),c(z,T(Vt,{get title(){return t("accounts.balance")},get subtitle(){return t("dashboard.overview")},get children(){var A=eu();return A.style.setProperty("font-size","1.5rem"),A.style.setProperty("font-weight","600"),A.style.setProperty("color","var(--primary-color)"),c(A,()=>D(n().balance)),A}}),null),c(z,T(Vt,{get title(){return t("accounts.accountType")},get subtitle(){return t("accounts.category")},get children(){var A=eu();return A.style.setProperty("font-size","1.5rem"),A.style.setProperty("font-weight","600"),A.style.setProperty("color","var(--primary-color)"),c(A,()=>t(`accounts.types.${n().accountType?.toLowerCase()}`)),A}}),null),c(z,T(Vt,{get title(){return t("common.status")},get subtitle(){return t("accounts.accountDetails")},get children(){var A=eu();return A.style.setProperty("font-size","1.5rem"),A.style.setProperty("font-weight","600"),c(A,(()=>{var I=Ve(()=>!!n().isActive);return()=>I()?t("common.active"):t("common.inactive")})()),be(I=>(I=n().isActive?"#4caf50":"#f44336")!=null?A.style.setProperty("color",I):A.style.removeProperty("color")),A}}),null),c(z,T(Vt,{get title(){return t("accounts.transactions")},get subtitle(){return t("common.total")},get children(){var A=eu();return A.style.setProperty("font-size","1.5rem"),A.style.setProperty("font-weight","600"),A.style.setProperty("color","var(--primary-color)"),c(A,()=>_.length),A}}),null),y(W,x),c(W,T(Vt,{get title(){return t("accounts.accountDetails")},get subtitle(){return t("dashboard.overview")},get children(){return[(()=>{var A=Of(),I=A.firstChild,ee=I.nextSibling;return c(I,()=>t("accounts.accountNumber")),c(ee,()=>n().accountNumber),be(Z=>{var X=P,se=g,U=F;return Z.e=y(A,X,Z.e),Z.t=y(I,se,Z.t),Z.a=y(ee,U,Z.a),Z},{e:void 0,t:void 0,a:void 0}),A})(),(()=>{var A=Of(),I=A.firstChild,ee=I.nextSibling;return c(I,()=>t("accounts.category")),c(ee,()=>n().category),be(Z=>{var X=P,se=g,U=F;return Z.e=y(A,X,Z.e),Z.t=y(I,se,Z.t),Z.a=y(ee,U,Z.a),Z},{e:void 0,t:void 0,a:void 0}),A})(),(()=>{var A=Of(),I=A.firstChild,ee=I.nextSibling;return c(I,()=>t("common.date")),c(ee,()=>$(n().createdDate)),be(Z=>{var X=P,se=g,U=F;return Z.e=y(A,X,Z.e),Z.t=y(I,se,Z.t),Z.a=y(ee,U,Z.a),Z},{e:void 0,t:void 0,a:void 0}),A})(),(()=>{var A=Of(),I=A.firstChild,ee=I.nextSibling;return c(I,()=>t("common.date")),c(ee,()=>$(n().lastModified)),be(Z=>{var X=P,se=g,U=F;return Z.e=y(A,X,Z.e),Z.t=y(I,se,Z.t),Z.a=y(ee,U,Z.a),Z},{e:void 0,t:void 0,a:void 0}),A})()]}}),null),c(W,T(Vt,{get title(){return t("common.description")},get subtitle(){return t("accounts.accountDetails")},get children(){var A=K$();return A.style.setProperty("margin","0"),A.style.setProperty("color","var(--text-secondary)"),c(A,()=>n().description||t("common.noDataFound")),A}}),null),v})()),Ve(()=>Ve(()=>o()==="transactions")()&&T(Vt,{get title(){return t("accounts.accountHistory")},get subtitle(){return t("accounts.transactions")},get children(){return Ve(()=>_.length===0)()?(()=>{var v=eu();return v.style.setProperty("text-align","center"),v.style.setProperty("color","var(--text-muted)"),v.style.setProperty("padding","2rem"),c(v,()=>t("common.noDataFound")),v})():_.map(v=>(()=>{var z=X$(),W=z.firstChild,A=W.firstChild,I=A.nextSibling,ee=I.firstChild,Z=W.nextSibling;return y(z,V),y(W,N),y(A,R),c(A,()=>v.description),y(I,M),c(I,()=>$(v.date),ee),c(I,()=>v.reference,null),c(Z,()=>v.type==="debit"?"+":"-",null),c(Z,()=>D(v.type==="debit"?v.debitAmount:v.creditAmount),null),be(X=>y(Z,C(v.type),X)),z})())}}))]}})};tr(["click"]);var J$=le("<div><div><h1></h1><p> </p></div><div><input type=date>"),qa=le("<div><span></span><span>"),Q$=le("<div><div></div><div>"),eF=le("<div><div><div></div><div></div></div><div><div></div><div></div></div><div><div></div><div>"),tF=le("<div><div> (<!> = <!> + <!>)</div><div> = "),rF=le("<span>(<!>: <!>)");const nF=()=>{const{t}=pr(),[e,r]=Ae(new Date().toISOString().split("T")[0]),[n,i]=Ae(0),[o,s]=Ae(0),[a,l]=Ae(0);Kn(()=>{d()});const d=()=>{const m=zr.getAccountsByType("Asset"),x=zr.getAccountsByType("Liability"),P=zr.getAccountsByType("Equity"),g=m.reduce((N,R)=>N+R.balance,0),F=x.reduce((N,R)=>N+R.balance,0),V=P.reduce((N,R)=>N+R.balance,0);i(g),s(F),l(V)},u=m=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(m),h={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"2rem"},f={"margin-bottom":"2rem"},p={"font-weight":"bold","font-size":"1.1rem","border-top":"2px solid var(--border-color)","padding-top":"0.5rem","margin-top":"1rem"};return T(Bo,{get title(){return t("balanceSheet.title")},get children(){return[(()=>{var m=J$(),x=m.firstChild,P=x.firstChild,g=P.nextSibling,F=g.firstChild,V=x.nextSibling,N=V.firstChild;return y(m,h),P.style.setProperty("margin","0"),c(P,()=>t("balanceSheet.title")),g.style.setProperty("margin","0.5rem 0 0 0"),g.style.setProperty("color","var(--text-muted)"),c(g,()=>t("balanceSheet.asOf"),F),c(g,()=>new Date(e()).toLocaleDateString(),null),V.style.setProperty("display","flex"),V.style.setProperty("gap","1rem"),N.addEventListener("change",R=>r(R.target.value)),N.style.setProperty("padding","0.5rem"),N.style.setProperty("border","1px solid var(--border-color)"),N.style.setProperty("border-radius","var(--border-radius-sm)"),c(V,T(mt,{variant:"primary",onClick:d,get children(){return t("balanceSheet.generateReport")}}),null),be(()=>N.value=e()),m})(),(()=>{var m=Q$(),x=m.firstChild,P=x.nextSibling;return m.style.setProperty("display","grid"),m.style.setProperty("grid-template-columns","1fr 1fr"),m.style.setProperty("gap","2rem"),c(x,T(Vt,{get title(){return t("balanceSheet.assets")},style:f,get children(){return[(()=>{var g=qa(),F=g.firstChild,V=F.nextSibling;return g.style.setProperty("display","flex"),g.style.setProperty("justify-content","space-between"),g.style.setProperty("align-items","center"),c(F,()=>t("balanceSheet.currentAssets")),c(V,()=>u(n()*.6)),g})(),(()=>{var g=qa(),F=g.firstChild,V=F.nextSibling;return g.style.setProperty("display","flex"),g.style.setProperty("justify-content","space-between"),g.style.setProperty("align-items","center"),c(F,()=>t("balanceSheet.nonCurrentAssets")),c(V,()=>u(n()*.4)),g})(),(()=>{var g=qa(),F=g.firstChild,V=F.nextSibling;return c(F,()=>t("balanceSheet.totalAssets")),c(V,()=>u(n())),be(N=>y(g,{...p,display:"flex","justify-content":"space-between"},N)),g})()]}})),c(P,T(Vt,{get title(){return t("balanceSheet.liabilities")},style:f,get children(){return[(()=>{var g=qa(),F=g.firstChild,V=F.nextSibling;return g.style.setProperty("display","flex"),g.style.setProperty("justify-content","space-between"),g.style.setProperty("align-items","center"),c(F,()=>t("balanceSheet.currentLiabilities")),c(V,()=>u(o()*.7)),g})(),(()=>{var g=qa(),F=g.firstChild,V=F.nextSibling;return g.style.setProperty("display","flex"),g.style.setProperty("justify-content","space-between"),g.style.setProperty("align-items","center"),c(F,()=>t("balanceSheet.nonCurrentLiabilities")),c(V,()=>u(o()*.3)),g})(),(()=>{var g=qa(),F=g.firstChild,V=F.nextSibling;return c(F,()=>t("balanceSheet.totalLiabilities")),c(V,()=>u(o())),be(N=>y(g,{...p,display:"flex","justify-content":"space-between"},N)),g})()]}}),null),c(P,T(Vt,{get title(){return t("balanceSheet.equity")},get children(){return[(()=>{var g=qa(),F=g.firstChild,V=F.nextSibling;return g.style.setProperty("display","flex"),g.style.setProperty("justify-content","space-between"),g.style.setProperty("align-items","center"),c(F,()=>t("balanceSheet.commonStock")),c(V,()=>u(a()*.8)),g})(),(()=>{var g=qa(),F=g.firstChild,V=F.nextSibling;return g.style.setProperty("display","flex"),g.style.setProperty("justify-content","space-between"),g.style.setProperty("align-items","center"),c(F,()=>t("balanceSheet.retainedEarnings")),c(V,()=>u(a()*.2)),g})(),(()=>{var g=qa(),F=g.firstChild,V=F.nextSibling;return c(F,()=>t("balanceSheet.totalEquity")),c(V,()=>u(a())),be(N=>y(g,{...p,display:"flex","justify-content":"space-between"},N)),g})()]}}),null),m})(),T(Vt,{get title(){return t("dashboard.overview")},style:{"margin-top":"2rem"},get children(){return[(()=>{var m=eF(),x=m.firstChild,P=x.firstChild,g=P.nextSibling,F=x.nextSibling,V=F.firstChild,N=V.nextSibling,R=F.nextSibling,M=R.firstChild,C=M.nextSibling;return m.style.setProperty("display","grid"),m.style.setProperty("grid-template-columns","repeat(3, 1fr)"),m.style.setProperty("gap","2rem"),x.style.setProperty("text-align","center"),P.style.setProperty("font-size","0.875rem"),P.style.setProperty("color","var(--text-muted)"),P.style.setProperty("margin-bottom","0.5rem"),c(P,()=>t("balanceSheet.totalAssets")),g.style.setProperty("font-size","1.5rem"),g.style.setProperty("font-weight","bold"),g.style.setProperty("color","var(--primary-color)"),c(g,()=>u(n())),F.style.setProperty("text-align","center"),V.style.setProperty("font-size","0.875rem"),V.style.setProperty("color","var(--text-muted)"),V.style.setProperty("margin-bottom","0.5rem"),c(V,()=>t("balanceSheet.totalLiabilities")),N.style.setProperty("font-size","1.5rem"),N.style.setProperty("font-weight","bold"),N.style.setProperty("color","#f44336"),c(N,()=>u(o())),R.style.setProperty("text-align","center"),M.style.setProperty("font-size","0.875rem"),M.style.setProperty("color","var(--text-muted)"),M.style.setProperty("margin-bottom","0.5rem"),c(M,()=>t("balanceSheet.totalEquity")),C.style.setProperty("font-size","1.5rem"),C.style.setProperty("font-weight","bold"),C.style.setProperty("color","#4caf50"),c(C,()=>u(a())),m})(),(()=>{var m=tF(),x=m.firstChild,P=x.firstChild,g=P.nextSibling,F=g.nextSibling,V=F.nextSibling,N=V.nextSibling,R=N.nextSibling;R.nextSibling;var M=x.nextSibling,C=M.firstChild;return m.style.setProperty("margin-top","2rem"),m.style.setProperty("text-align","center"),x.style.setProperty("font-size","0.875rem"),x.style.setProperty("color","var(--text-muted)"),x.style.setProperty("margin-bottom","0.5rem"),c(x,()=>t("common.total"),P),c(x,()=>t("balanceSheet.totalAssets"),g),c(x,()=>t("balanceSheet.totalLiabilities"),V),c(x,()=>t("balanceSheet.totalEquity"),R),M.style.setProperty("font-size","1.2rem"),M.style.setProperty("font-weight","bold"),c(M,()=>u(n()),C),c(M,()=>u(o()+a()),null),c(M,(()=>{var k=Ve(()=>Math.abs(n()-(o()+a()))>.01);return()=>k()&&(()=>{var D=rF(),$=D.firstChild,w=$.nextSibling,_=w.nextSibling,v=_.nextSibling;return v.nextSibling,D.style.setProperty("font-size","0.875rem"),D.style.setProperty("color","#f44336"),D.style.setProperty("display","block"),c(D,()=>t("common.error"),w),c(D,()=>u(n()-(o()+a())),v),D})()})(),null),be(k=>(k=Math.abs(n()-(o()+a()))<.01?"#4caf50":"#f44336")!=null?M.style.setProperty("color",k):M.style.removeProperty("color")),m})()]}})]}})};tr(["click"]);const iF="modulepreload",oF=function(t){return"/"+t},tx={},Qo=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){let s=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");i=s(r.map(d=>{if(d=oF(d),d in tx)return;tx[d]=!0;const u=d.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":iF,u||(f.as="script"),f.crossOrigin="",f.href=d,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})},sF=[{id:"YY_8802",code:"YY_8802",name:"CENTER",type:"store",bussinesId:"YB100423253156428",address:"321 Supply Ave, City, State 12345",isActive:!0,createdDate:"2024-01-01"},{id:"YY_8803",code:"YY_8803",name:"BISSONNET",type:"store",bussinesId:"YB100423253156428",address:"321 Supply Ave, City, State 12345",isActive:!0,createdDate:"2024-01-01"},{id:"YY_8804",code:"YY_8804",name:"IRVIN",type:"store",bussinesId:"YB100423253156428",address:"321 Supply Ave, City, State 12345",isActive:!0,createdDate:"2024-01-01"},{id:"YY_8805",code:"YY_8805",name:"KATTY",type:"store",bussinesId:"YB100423253156428",address:"321 Supply Ave, City, State 12345",isActive:!0,createdDate:"2024-01-01"},{id:"YY_8816",code:"YY_8816",type:"store",name:"YABA GLOBAL",bussinesId:"YB100423253156428",address:"321 Supply Ave, City, State 12345",isActive:!0,createdDate:"2024-01-01"},{id:"YY_8818",code:"YY_8818",type:"store",name:"YABASURAUSTIN",bussinesId:"YB100423253156428",address:"321 Supply Ave, City, State 12345",isActive:!0,createdDate:"2024-01-01"},{id:"YY_8847",code:"YY_8847",type:"store",name:"YABAOFICINA AZ",bussinesId:"YB100423253156428",address:"321 Supply Ave, City, State 12345",isActive:!0,createdDate:"2024-01-01"},{id:"YY_3251",code:"YY_3251",type:"store",name:"YABA FASHION",bussinesId:"YB100423253156428",address:"321 Supply Ave, City, State 12345",isActive:!0,createdDate:"2024-01-01"},{id:"YY_32",code:"YY_32",type:"store",name:"YABA MESQUITE",bussinesId:"YB100423253156428",address:"321 Supply Ave, City, State 12345",isActive:!0,createdDate:"2024-01-01"},{id:"YY_76",code:"YY_76",type:"store",name:"YABA DALLAS",bussinesId:"YB100423253156428",address:"321 Supply Ave, City, State 12345",isActive:!0,createdDate:"2024-01-01"},{id:"YY_2376",code:"YY_2376",type:"store",name:"YABA SAN ANTONIO",bussinesId:"YB100423253156428",address:"321 Supply Ave, City, State 12345",isActive:!0,createdDate:"2025-08-14"},{id:"YY_79",code:"YY_79",type:"warehouse",name:"ALMACEN DALLAS",bussinesId:"YB100423253156428",address:"321 Supply Ave, City, State 12345",isActive:!0,createdDate:"2024-01-01"},{id:"YY_8635",code:"YY_8635",type:"store",name:"FASHION MESQUITE",bussinesId:"YB100423253156428",address:"321 Supply Ave, City, State 12345",isActive:!0,createdDate:"2024-01-01"},{id:"YY_8665",code:"YY_8665",name:"IRVIN FASHION",bussinesId:"YB100423253156428",address:"321 Supply Ave, City, State 12345",isActive:!0,type:"store",createdDate:"2024-01-01"},{id:"YY_3303",code:"YY_3303",name:"YABA MIAMI",bussinesId:"YB100423253156428",address:"Miami",isActive:!0,type:"store",createdDate:"2025-08-01"},{id:"YY_8901",code:"YY_8901",name:"ALMACEN CENTRAL YABA",bussinesId:"YB100423253156428",type:"warehouse",address:"123 Industrial Dr, City, State 12345",isActive:!0,createdDate:"2024-01-01"},{id:"SS_42",code:"SS_42",name:"STEPHANIE SOLUTION",bussinesId:"SS695841584167881",type:"store",address:"5520 Fern Valley Rd, Ste 108, Louisville, KY 40228",isActive:!0,createdDate:"2024-01-01"}],aF=[{id:"1",name:'MacBook Pro 16"',price:2399,quantity:75,category:"Electronics",description:"Apple MacBook Pro 16-inch with M2 Pro chip",sku:"MBP-16-M2P",supplier:"Apple Inc.",minStock:10,location:"Warehouse A",lastUpdated:"2024-01-15"},{id:"2",name:'Dell Monitor 27"',price:299,quantity:35,category:"Electronics",description:"Dell 27-inch 4K UHD Monitor",sku:"DELL-MON-27-4K",supplier:"Dell Technologies",minStock:15,location:"Warehouse B",lastUpdated:"2024-01-14"},{id:"3",name:"Wireless Mouse",price:49.99,quantity:12,category:"Accessories",description:"Ergonomic wireless mouse with precision tracking",sku:"MOUSE-WL-001",supplier:"Logitech",minStock:25,location:"Warehouse A",lastUpdated:"2024-01-13"}],Bf=()=>{const t=new Map;return Lo().forEach(e=>{const r=`${e.productId}-${e.locationId}`;let n=At.getLocationById(e.locationId),i=t.get(r);i||(i={id:r,productId:e.productId,locationId:e.locationId,locationName:n?.name,quantity:0,reservedQuantity:0,availableQuantity:0,averageCost:0,lastMovementDate:e.createdDate,lastMovementType:e.movementType},t.set(r,i)),e.movementType==="in"||e.movementType==="transfer"?(e.locationId===e.toLocationId||e.movementType==="in")&&(i.quantity+=e.quantity*1):e.movementType==="out"?i.quantity-=e.quantity*1:e.movementType==="adjustment"&&(i.quantity=e.quantity*1),new Date(e.createdDate)>new Date(i.lastMovementDate)&&(i.lastMovementDate=e.createdDate,i.lastMovementType=e.movementType),i.averageCost=e.unitCost*1,i.availableQuantity=i.quantity*1-i.reservedQuantity*1}),Array.from(t.values())},[Hc,vv]=Ae([]),[Ul,rx]=Ae(sF),[Lo,jf]=Ae([]),[ql,bh]=Ae([]),[Vf,bv]=Ae(aF),lF={TRANSFER:1,transfer:1},nx=173442384e4,At={get products(){return Hc()},get locations(){return Ul()},get movements(){return Lo()},get stockLevels(){return ql()},parseInventoryData:t=>{const e=Object.keys(t).slice(0,900),r=[],n=i=>{let o=t;o[i]?.products&&o[i]?.products?.map(s=>{let a=UE(o[i]?.type),l=s?.price*1||s?.unitCost*1,d=s?.qty*1||s?.quantity*1;l=isNaN(l)?0:l,d=isNaN(d)?0:d;let u={id:o[i]?.ssg_inventory_key,productId:s?.product?.id,productName:s?.product?.label,productSku:s?.product?.code,locationId:o[i]?.store,locationName:o[i]?.store,location:o[i]?.store,movementType:a,quantity:d,unitCost:l,totalCost:l*1*d,minStock:10,referenceNumber:"PO-001",notes:o[i]?.description||o[i]?.notes,createdBy:"admin",createdDate:o[i]?.createDate?new Date(o[i]?.createDate).toISOString():new Date(nx).toISOString(),invoiceId:o[i]?.invoice};if(r.push(u),lF[o[i].movementType]&&o[i]?.fromLocationId){let h=At.getLocationById(o[i]?.fromLocationId);const f={id:o[i]?.ssg_inventory_key,productId:s?.product?.id,productName:s?.product?.label,productSku:s?.product?.code,locationId:o[i]?.fromLocationId,locationName:h?.name||"",movementType:"out",quantity:d*-1,unitCost:l,totalCost:l*-1*d,minStock:10,referenceNumber:o[i]?.referenceNumber,notes:`Transfer to ${o[i]?.locationName}`+(o[i].notes?` - ${o[i].notes}`:""),createdBy:o[i].createdBy,createdDate:o[i]?.createDate?new Date(o[i]?.createDate).toISOString():new Date(nx).toISOString(),invoiceId:o[i]?.invoiceId,toLocationId:o[i]?.locationId,toLocationName:o[i]?.locationName};r.push(f)}})};return e.map(n),r},fecthInventory:async t=>{const e=await Ki.getInventory(t),r=At.parseInventoryData(e);At.updMovements(r)},getStockLevels:async t=>{const e=await t2.getStockLevels(t);bh(e)},fecthProduct:async t=>{const e=await Ki.getProducts(t),r=Object.keys(e),n=o=>{let s=e;return{id:o,name:s[o].name,businessId:s[o].businessId,sku:s[o].code,UPC:s[o].UPC,numCode:s[o].codeN,category:s[o].category,unitCost:s[o].unitCost||0,unitOfMeasure:s[o].unitOfMeasure||s[o].unit,minStockLevel:s[o].minStockLevel,maxStockLevel:s[o].maxStockLevel,isActive:s[o].isActive,productImageUrl:s[o].productImageUrl,description:s[o].description||"",createdDate:s[o].createdAt||new Date().toISOString(),lastModified:s[o].updatedAt||new Date().toISOString()}},i=r.map(n);return At.updProduct(i),i},getProductById:t=>Hc().find(e=>e.id===t),updProduct:t=>{vv(t)},getProductsBySku:t=>Hc().filter(e=>e.sku.toLowerCase().includes(t.toLowerCase())),getProductsByCategory:t=>Hc().filter(e=>e.category===t),getActiveProducts:()=>Hc().filter(t=>t.name),getLocationById:t=>Ul().find(e=>e.id===t),getLocationsByType:t=>Ul().filter(e=>e.type===t),getActiveLocations:()=>{if(Xt?.state?.profile?.isAdmin)return Ul();let t=Xt?.state?.profile?.stores;return Ul().filter(e=>t?.[e?.id])},getMovementsByProduct:t=>Lo().filter(e=>e.productId===t),updMovements:t=>{jf([...t]),bh(Bf())},getMovementsByLocation:t=>Lo()?.filter(e=>e.locationId===t),getMovementsByDateRange:(t,e)=>Lo()?.filter(r=>r.createdDate>=t&&r.createdDate<=e),getStockByProduct:t=>ql()?.filter(e=>e.productId===t),getStockByLocation:t=>ql()?.filter(e=>e.locationId===t),getStockByProductAndLocation:(t,e)=>ql()?.find(r=>r.productId===t&&r.locationId===e),getTotalStockByProduct:t=>ql()?.filter(e=>e.productId===t).reduce((e,r)=>e*1+r.quantity*1,0),getLastLocationByProduct:t=>{const e=Lo()?.filter(r=>r.productId===t).sort((r,n)=>new Date(n.createdDate).getTime()-new Date(r.createdDate).getTime());if(e.length>0)return Ul().find(r=>r.id===e[0].locationId)},getLowStockProducts:()=>(Hc()||[])?.map(t=>{const e=ql()?.filter(r=>r.productId===t.id).reduce((r,n)=>r+n.quantity,0)||0;return{...t,currentStock:e}}).filter(t=>t.currentStock<=t.minStockLevel),generateMovementInvoice:async(t,e,r,n="compact")=>{try{const{getUserLanguage:i}=await Qo(async()=>{const{getUserLanguage:u}=await import("./languageUtils-BVmHbHaj.js");return{getUserLanguage:u}},[]),o=r||i();let s;switch(n){case"compact":const{generateCompactModernInvoicePDF:u}=await Qo(async()=>{const{generateCompactModernInvoicePDF:p}=await import("./compactModernInvoicePdfGenerator-CId3xFPn.js");return{generateCompactModernInvoicePDF:p}},[]);s=u;break;case"modern":const{generateModernMovementInvoicePDF:h}=await Qo(async()=>{const{generateModernMovementInvoicePDF:p}=await import("./modernMovementInvoicePdfGenerator-B6KrqHQ4.js");return{generateModernMovementInvoicePDF:p}},[]);s=h;break;case"classic":default:const{generateMovementInvoicePDF:f}=await Qo(async()=>{const{generateMovementInvoicePDF:p}=await import("./movementInvoicePdfGenerator-CiKh6Hmj.js");return{generateMovementInvoicePDF:p}},[]);s=f;break}const a=Lo().filter(u=>u.invoiceId===t||u.id===t);if(a.length===0)throw new Error(`No movements found with ID: ${t}`);const l=a.reduce((u,h)=>{const f=h.invoiceId||h.id;return u[f]||(u[f]={invoiceId:f,movementType:h.movementType,referenceNumber:h.referenceNumber,createdBy:h.createdBy,createdDate:h.createdDate,locationName:h.locationName,fromLocationName:h.fromLocationName,toLocationName:h.toLocationName,notes:h.notes,items:[]}),u[f].items.push({productSku:h.productSku,productName:h.productName,quantity:h.quantity,unitCost:h.unitCost,totalCost:h.totalCost,receivedQuantity:h.movementType==="transfer"?null:void 0}),u},{}),d=[];for(const[u,h]of Object.entries(l)){const f=await s(h,e,o);d.push(f)}return d}catch(i){throw console.error("Error generating movement invoice:",i),i}},getMovementsByInvoiceId:t=>Lo().filter(e=>e.invoiceId===t),generateCompactMovementInvoice:async(t,e,r)=>At.generateMovementInvoice(t,e,r,"compact"),generateModernMovementInvoice:async(t,e,r)=>At.generateMovementInvoice(t,e,r,"modern"),generateClassicMovementInvoice:async(t,e,r)=>At.generateMovementInvoice(t,e,r,"classic"),getMovementInvoiceData:t=>{const e=Lo().filter(i=>i.invoiceId===t||i.id===t);if(e.length===0)return null;const r=e[0],n=e.reduce((i,o)=>i+(o.totalCost||o.quantity*o.unitCost),0);return{invoiceId:r.invoiceId||r.id,movementType:r.movementType,referenceNumber:r.referenceNumber,createdBy:r.createdBy,createdDate:r.createdDate,locationName:r.locationName,fromLocationName:r.fromLocationName,toLocationName:r.toLocationName,notes:r.notes,totalValue:n,itemCount:e.length,items:e.map(i=>({productSku:i.productSku,productName:i.productName,quantity:i.quantity,unitCost:i.unitCost,totalCost:i.totalCost||i.quantity*i.unitCost}))}},addInventoryMovement:t=>{const e={...t,id:`mov-${Date.now()}`,createdDate:new Date().toISOString()};jf(r=>[...r,e]),bh(Bf())},addBulkInventoryMovements:async t=>{const e=[],r=[],n=new Date().toISOString(),i=Ul().find(a=>a.id===t.locationId);if(!i)return{success:!1,errors:["Invalid location"]};let o;if(t.movementType==="transfer"){if(!t.fromLocationId)return{success:!1,errors:["From location required for transfers"]};if(o=Ul().find(a=>a.id===t.fromLocationId),!o)return{success:!1,errors:["Invalid from location"]};if(t.fromLocationId===t.locationId)return{success:!1,errors:["From and to locations cannot be the same"]}}if(t.items.forEach((a,l)=>{const d=Hc().find(p=>p.id===a.productId);if(!d){e.push(`Item ${l+1}: Product not found`);return}if(a.quantity<=0){e.push(`Item ${l+1}: Quantity must be greater than 0`);return}if(t.movementType==="out"){const p=ql().filter(m=>m.productId===a.productId&&m.locationId===t.locationId).reduce((m,x)=>m+x.quantity,0);if(a.quantity>p){e.push(`Item ${l+1}: Insufficient stock. Available: ${p}, Requested: ${a.quantity}`);return}}if(t.movementType==="transfer"){const p=ql().filter(m=>m.productId===a.productId&&m.locationId===t.fromLocationId).reduce((m,x)=>m+x.quantity,0);if(a.quantity>p){e.push(`Item ${l+1}: Insufficient stock at ${o?.name}. Available: ${p}, Requested: ${a.quantity}`);return}}const u=a.unitCost||d.unitCost,h=a.quantity*u,f={id:`mov-${Date.now()}-${l}`,productId:d.id,productName:d.name,productSku:d.sku,locationId:t.locationId,locationName:i.name,movementType:t.movementType,quantity:a.quantity,unitCost:u,totalCost:h,minStock:10,referenceNumber:t.referenceNumber||"",notes:a.notes||t.generalNotes||"",createdBy:t.createdBy,createdDate:n,invoiceId:t.invoiceId,fromLocationId:t.fromLocationId,fromLocationName:o?.name};if(r.push(f),t.movementType==="transfer"&&o){const p={id:`mov-${Date.now()}-${l}-out`,productId:d.id,productName:d.name,productSku:d.sku,locationId:t.fromLocationId,locationName:o.name,movementType:"out",quantity:a.quantity,unitCost:u,totalCost:h,minStock:10,referenceNumber:t.referenceNumber||"",notes:`Transfer to ${i.name}`+(a.notes?` - ${a.notes}`:""),createdBy:t.createdBy,createdDate:n,invoiceId:t.invoiceId,toLocationId:t.locationId,toLocationName:i.name};r.push(p)}}),e.length>0)return{success:!1,errors:e};jf(a=>[...a,...r]),bh(Bf()),console.log({bulkRequest:t});const s=await Ki.addInventory(t);return console.log({prodResults:s}),{success:!0,errors:[]}},getMovementsByInvoice:t=>Lo().filter(e=>e.invoiceId===t),getInvoiceSummary:t=>{const e=Lo().filter(o=>o.invoiceId===t);if(e.length===0)return null;const r=e.reduce((o,s)=>o+s.totalCost,0),n=new Set(e.map(o=>o.productId)).size,i=e[0];return{invoiceId:t,referenceNumber:i.referenceNumber,movementType:i.movementType,location:i.locationName,fromLocation:i.fromLocationName,productCount:n,totalItems:e.reduce((o,s)=>o+s.quantity,0),totalValue:r,createdDate:i.createdDate,createdBy:i.createdBy}},addProduct:t=>{const e={...t,id:`prod-${Date.now()}`,createdDate:new Date().toISOString(),lastModified:new Date().toISOString()};vv(r=>[...r,e])},addLocation:t=>{const e={...t,id:`loc-${Date.now()}`,createdDate:new Date().toISOString()};rx(r=>[...r,e])},updateProduct:(t,e)=>{vv(r=>r.map(n=>n.id===t?{...n,...e,lastModified:new Date().toISOString()}:n))},updateLocation:(t,e)=>{rx(r=>r.map(n=>n.id===t?{...n,...e}:n))},updateMovement:(t,e)=>{jf(r=>r.map(n=>n.id===t?{...n,...e,lastModified:new Date().toISOString()}:n)),bh(Bf())},get inventory(){return Vf()},addItem(t){const e={...t,id:Date.now().toString(),lastUpdated:new Date().toISOString().split("T")[0]};return bv([...Vf(),e]),e},updateItem(t,e){bv(Vf().map(r=>r.id===t?{...r,...e,lastUpdated:new Date().toISOString().split("T")[0]}:r))},deleteItem(t){bv(Vf().filter(e=>e.id!==t))},getItemById(t){return Lo().find(e=>e.id===t)},getLowStockItems(){return Lo().filter(t=>t.quantity*1<=t.minStock*1)},getTotalValue(){return Lo().reduce((t,e)=>t*1+e.unitCost*1*e.quantity*1,0)}};var ix=le("<div>"),cF=le("<div><div><input type=text autocomplete=off>"),dF=le("<button type=button>+"),uF=le("<div><div><div><div></div><div><span>: </span><span>•</span><span></span><span>•</span><span></span></div></div><div><div> </div><div>");const cg=t=>{const{t:e}=pr(),[r,n]=Ae(!1),[i,o]=Ae(""),[s,a]=Ae(-1),l=zt(()=>t.value?At.getProductById(t.value):null),d=zt(()=>{const W=i().toLowerCase();return W?At.getActiveProducts().filter(A=>A.name.toLowerCase().includes(W)||A.sku.toLowerCase().includes(W)||A?.UPC?.toLowerCase().includes(W)||A.category.toLowerCase().includes(W)):At.getActiveProducts()}),u=()=>{n(!0),o(""),a(-1)},h=W=>{const A=W.target;o(A.value),n(!0),a(-1)},f=W=>{t.onChange(W),n(!1),o(""),a(-1)},p=W=>{const A=d();switch(W.key){case"ArrowDown":W.preventDefault(),a(I=>Math.min(I+1,A.length-1));break;case"ArrowUp":W.preventDefault(),a(I=>Math.max(I-1,-1));break;case"Enter":W.preventDefault(),s()>=0&&A[s()]&&f(A[s()]);break;case"Escape":n(!1),o(""),a(-1);break}},m=W=>{setTimeout(()=>{n(!1),o(""),a(-1)},150)},x=W=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(W),P=W=>At.stockLevels?.filter(A=>A.productId===W).reduce((A,I)=>A+I.quantity,0),g={position:"relative",width:"100%",...t.style},F={width:"100%",padding:"0.75rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"1rem",background:"var(--surface-color)",cursor:t.disabled?"not-allowed":"text",opacity:t.disabled?"0.6":"1"},V={position:"absolute",top:"100%",left:"0",right:"0","z-index":"1000","max-height":"300px","overflow-y":"auto",background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","box-shadow":"0 4px 12px rgba(0,0,0,0.15)","margin-top":"2px"},N=W=>({padding:"0.75rem",cursor:"pointer","border-bottom":"1px solid "+W?"var(--primary-color)":"var(--border-color)",background:W?"var(--strip-color)":"transparent",color:W?"var(--primary-color)":"var(--text-primary)",transition:"all 0.2s ease"}),R={display:"flex","justify-content":"space-between","align-items":"center"},M={flex:"1"},C={"font-weight":"500","margin-bottom":"0.25rem"},k={"font-size":"0.875rem",color:"var(--text-muted)",display:"flex",gap:"0.5rem"},D={"text-align":"right","font-size":"0.875rem"},$={padding:"1rem","text-align":"center",color:"var(--text-muted)","font-style":"italic"},w=()=>r()&&i()?i():l()?`${l().name} (${l().sku})`:"",_={display:"flex","align-items":"stretch",width:"100%"},v={padding:"0.75rem",border:"1px solid var(--border-color)","border-left":"none","border-radius":"0 var(--border-radius-sm) var(--border-radius-sm) 0",background:"var(--surface-color)",cursor:"pointer",color:"var(--primary-color)","font-weight":"600","font-size":"1rem",transition:"all 0.2s ease","min-width":"40px",display:"flex","align-items":"center","justify-content":"center"},z={...F,"border-radius":t.onAddNew?"var(--border-radius-sm) 0 0 var(--border-radius-sm)":"var(--border-radius-sm)","border-right":t.onAddNew?"none":"1px solid var(--border-color)"};return(()=>{var W=cF(),A=W.firstChild,I=A.firstChild;return y(A,_),I.addEventListener("blur",m),I.$$keydown=p,I.$$click=u,I.$$input=h,c(A,(()=>{var ee=Ve(()=>!!t.onAddNew);return()=>ee()&&(()=>{var Z=dF();return Z.addEventListener("mouseleave",X=>{X.currentTarget.style.background="var(--surface-color)",X.currentTarget.style.color="var(--primary-color)"}),Z.addEventListener("mouseenter",X=>{X.currentTarget.style.background="var(--primary-color)",X.currentTarget.style.color="white"}),Qn(Z,"click",t.onAddNew,!0),y(Z,v),be(()=>ir(Z,"title",e("inventory.addProduct","Add new product"))),Z})()})(),null),c(W,T(We,{get when(){return r()},get children(){var ee=ix();return c(ee,T(We,{get when(){return d().length>0},get fallback(){return(()=>{var Z=ix();return y(Z,$),c(Z,(()=>{var X=Ve(()=>!!i());return()=>X()?e("inventory.noProductsFound","No products found matching your search."):e("inventory.noProductsAvailable","No products available.")})()),Z})()},get children(){return T(_t,{get each(){return d()},children:(Z,X)=>{const se=P(Z.id),U=se<=Z.minStockLevel;return(()=>{var E=uF(),O=E.firstChild,L=O.firstChild,G=L.firstChild,K=G.nextSibling,q=K.firstChild,B=q.firstChild,H=q.nextSibling,Y=H.nextSibling,te=Y.nextSibling,oe=te.nextSibling,pe=L.nextSibling,ne=pe.firstChild,Q=ne.firstChild,ce=ne.nextSibling;return E.addEventListener("mouseenter",()=>a(X())),E.$$click=()=>f(Z),y(O,R),y(L,M),y(G,C),c(G,()=>Z.name),y(K,k),c(q,()=>e("inventory.sku","SKU"),B),c(q,()=>Z.sku,null),c(Y,()=>Z.category),c(oe,()=>x(Z.unitCost)),y(pe,D),ne.style.setProperty("font-weight","600"),(U?"#f44336":"var(--text-primary)")!=null?ne.style.setProperty("color",U?"#f44336":"var(--text-primary)"):ne.style.removeProperty("color"),c(ne,se,Q),c(ne,()=>Z.unitOfMeasure,null),ce.style.setProperty("color","var(--text-muted)"),c(ce,()=>U?e("inventory.lowStock","Low Stock"):e("inventory.inStock","In Stock")),be(ue=>y(E,N(X()===s()),ue)),E})()}})}})),be(Z=>y(ee,V,Z)),ee}}),null),be(ee=>{var Z=g,X=z,se=t.placeholder||e("inventory.searchProducts","Search products by name, SKU, or category..."),U=t.disabled,E=t.required;return ee.e=y(W,Z,ee.e),ee.t=y(I,X,ee.t),se!==ee.a&&ir(I,"placeholder",ee.a=se),U!==ee.o&&(I.disabled=ee.o=U),E!==ee.i&&(I.required=ee.i=E),ee},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),be(()=>I.value=w()),W})()};tr(["input","click","keydown"]);var ox=le("<div>"),hF=le("<div><div><input type=text autocomplete=off>"),pF=le("<button type=button>+"),fF=le("<div><div><div><div> </div><div><span>: </span><span></span></div><div>");const kp=t=>{const{t:e}=pr(),[r,n]=Ae(!1),[i,o]=Ae(""),[s,a]=Ae(-1),l=zt(()=>t.value?At.getLocationById(t.value):null),d=zt(()=>{let W=At.getActiveLocations();t.filterType&&(W=W.filter(I=>I.type===t.filterType));const A=i().toLowerCase();return A?W.filter(I=>I.name.toLowerCase().includes(A)||I?.code?.toLowerCase().includes(A)||I?.type?.toLowerCase().includes(A)||I?.address?.toLowerCase().includes(A)):W}),u=()=>{n(!0),o(""),a(-1)},h=W=>{const A=W.target;o(A.value),n(!0),a(-1)},f=W=>{t.onChange(W.id),n(!1),o(""),a(-1)},p=W=>{const A=d();switch(W.key){case"ArrowDown":W.preventDefault(),a(I=>Math.min(I+1,A.length-1));break;case"ArrowUp":W.preventDefault(),a(I=>Math.max(I-1,-1));break;case"Enter":W.preventDefault(),s()>=0&&A[s()]&&f(A[s()]);break;case"Escape":n(!1),o(""),a(-1);break}},m=W=>{setTimeout(()=>{n(!1),o(""),a(-1)},150)},x=W=>({warehouse:"🏭",store:"🏪",supplier:"🚚",customer:"👥"})[W]||"📍",P=W=>({warehouse:"#2196F3",store:"#4CAF50",supplier:"#FF9800",customer:"#9C27B0"})[W]||"#757575",g={position:"relative",width:"100%",...t.style},F={width:"100%",padding:"0.75rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"1rem",background:"var(--surface-color)",cursor:t.disabled?"not-allowed":"text",opacity:t.disabled?"0.6":"1"},V={display:"flex","align-items":"stretch",width:"100%"},N={padding:"0.75rem",border:"1px solid var(--border-color)","border-left":"none","border-radius":"0 var(--border-radius-sm) var(--border-radius-sm) 0",background:"var(--surface-color)",cursor:"pointer",color:"var(--primary-color)","font-weight":"600","font-size":"1rem",transition:"all 0.2s ease","min-width":"40px",display:"flex","align-items":"center","justify-content":"center"},R={...F,"border-radius":t.onAddNew?"var(--border-radius-sm) 0 0 var(--border-radius-sm)":"var(--border-radius-sm)","border-right":t.onAddNew?"none":"1px solid var(--border-color)"},M={position:"absolute",top:"100%",left:"0",right:"0","z-index":"1000","max-height":"300px","overflow-y":"auto",background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","box-shadow":"0 4px 12px rgba(0,0,0,0.15)","margin-top":"2px"},C=W=>({padding:"0.75rem",cursor:"pointer","border-bottom":"1px solid var(--border-color)",background:W?"var(--strip-color)":"transparent",color:W?"var(--primary-dark)":"var(--text-primary)",transition:"all 0.2s ease"}),k={display:"flex","justify-content":"space-between","align-items":"center"},D={flex:"1"},$={"font-weight":"500","margin-bottom":"0.25rem"},w={"font-size":"0.875rem",color:"var(--text-muted)",display:"flex",gap:"0.5rem","align-items":"center"},_=W=>({padding:"0.2rem 0.5rem","border-radius":"var(--border-radius-sm)","font-size":"0.7rem","font-weight":"500",background:P(W),color:"white","text-transform":"uppercase"}),v={padding:"1rem","text-align":"center",color:"var(--text-muted)","font-style":"italic"},z=()=>r()&&i()?i():l()?`${l().name} (${l().code})`:"";return(()=>{var W=hF(),A=W.firstChild,I=A.firstChild;return y(A,V),I.addEventListener("blur",m),I.$$keydown=p,I.$$click=u,I.$$input=h,c(A,(()=>{var ee=Ve(()=>!!t.onAddNew);return()=>ee()&&(()=>{var Z=pF();return Z.addEventListener("mouseleave",X=>{X.currentTarget.style.background="var(--surface-color)",X.currentTarget.style.color="var(--primary-color)"}),Z.addEventListener("mouseenter",X=>{X.currentTarget.style.background="var(--primary-color)",X.currentTarget.style.color="white"}),Qn(Z,"click",t.onAddNew,!0),y(Z,N),be(()=>ir(Z,"title",e("inventory.addLocation","Add new location"))),Z})()})(),null),c(W,T(We,{get when(){return r()},get children(){var ee=ox();return c(ee,T(We,{get when(){return d().length>0},get fallback(){return(()=>{var Z=ox();return y(Z,v),c(Z,(()=>{var X=Ve(()=>!!i());return()=>X()?e("inventory.noLocationsFound","No locations found matching your search."):e("inventory.noLocationsAvailable","No locations available.")})()),Z})()},get children(){return T(_t,{get each(){return d()},children:(Z,X)=>(()=>{var se=fF(),U=se.firstChild,E=U.firstChild,O=E.firstChild,L=O.firstChild,G=O.nextSibling,K=G.firstChild,q=K.firstChild,B=K.nextSibling,H=G.nextSibling;return se.addEventListener("mouseenter",()=>a(X())),se.$$click=()=>f(Z),y(U,k),y(E,D),y(O,$),c(O,()=>x(Z.type),L),c(O,()=>Z.name,null),y(G,w),c(K,()=>e("inventory.locationCode","Code"),q),c(K,()=>Z.code,null),c(B,()=>Z.type),H.style.setProperty("font-size","0.75rem"),H.style.setProperty("color","var(--text-muted)"),H.style.setProperty("margin-top","0.25rem"),c(H,()=>Z.address),be(Y=>{var te=C(X()===s()),oe=_(Z.type);return Y.e=y(se,te,Y.e),Y.t=y(B,oe,Y.t),Y},{e:void 0,t:void 0}),se})()})}})),be(Z=>y(ee,M,Z)),ee}}),null),be(ee=>{var Z=g,X=R,se=t.placeholder||e("inventory.searchLocations","Search locations by name, code, or type..."),U=t.disabled,E=t.required;return ee.e=y(W,Z,ee.e),ee.t=y(I,X,ee.t),se!==ee.a&&ir(I,"placeholder",ee.a=se),U!==ee.o&&(I.disabled=ee.o=U),E!==ee.i&&(I.required=ee.i=E),ee},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),be(()=>I.value=z()),W})()};tr(["input","click","keydown"]);var yF=le("<form><div><label> *</label><input type=text required></div><div><div><label> *</label><input type=text required></div><div><label> *</label><input type=text list=categories required><datalist id=categories><option value=Electronics></option><option value=Accessories></option><option value=Office></option><option value=Furniture></option><option value=Software></option><option value=Hardware></option></datalist></div></div><div><label></label><textarea></textarea></div><div><div><label></label><select><option value=pcs></option><option value=kg></option><option value=lbs></option><option value=m></option><option value=ft></option><option value=l></option><option value=gal></option><option value=box></option><option value=pack></option></select></div><div><label></label><input type=number min=0 step=0.01 placeholder=0.00></div></div><div><div><label></label><input type=number min=0 step=0.01 placeholder=0.00></div><div></div></div><div><div><label></label><input type=number min=0 step=1></div><div><label></label><input type=number min=1 step=1></div></div><div>"),mF=le("<div>");const r2=t=>{const{t:e}=pr(),[r,n]=Ae(""),[i,o]=Ae(""),[s,a]=Ae(""),[l,d]=Ae(""),[u,h]=Ae("pcs"),[f,p]=Ae(0),[m,x]=Ae(0),[P,g]=Ae(10),[F,V]=Ae(100),[N,R]=Ae(""),M=()=>{n(""),o(""),a(""),d(""),h("pcs"),p(0),x(0),g(10),V(100),R("")},C=A=>{if(A.preventDefault(),R(""),!r().trim()){R(e("forms.productNameRequired"));return}if(!i().trim()){R(e("forms.skuRequired"));return}if(!l().trim()){R(e("forms.categoryRequired"));return}if(f()<0){R(e("forms.unitCostNotNegative"));return}if(m()<0){R(e("forms.sellingPriceNotNegative"));return}if(P()<0){R(e("forms.minStockNotNegative"));return}if(F()<=P()){R(e("forms.maxStockGreaterThanMin"));return}if(At.getProductsBySku(i()).length>0){R(e("forms.skuAlreadyExists"));return}const ee={name:r().trim(),sku:i().trim().toUpperCase(),description:s().trim(),category:l().trim(),unitOfMeasure:u(),unitCost:f(),sellingPrice:m(),minStockLevel:P(),maxStockLevel:F(),isActive:!0,businessId:"default-business"};At.addProduct(ee);const Z=`prod-${Date.now()}`;t.onProductAdded&&t.onProductAdded(Z),M(),t.onClose()},k=()=>{M(),t.onClose()},D={"margin-bottom":"1.5rem"},$={display:"block","margin-bottom":"0.5rem","font-weight":"500",color:"var(--text-primary)"},w={width:"100%",padding:"0.75rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"1rem",background:"var(--surface-color)"},_={...w,cursor:"pointer"},v={color:"#f44336","font-size":"0.875rem","margin-bottom":"1rem"},z={display:"flex",gap:"1rem","justify-content":"flex-end","margin-top":"2rem"},W={display:"grid","grid-template-columns":"1fr 1fr",gap:"1rem"};return T(Pi,{get isOpen(){return t.isOpen},onClose:k,get title(){return e("inventory.addNewProduct")},get children(){var A=yF(),I=A.firstChild,ee=I.firstChild,Z=ee.firstChild,X=ee.nextSibling,se=I.nextSibling,U=se.firstChild,E=U.firstChild,O=E.firstChild,L=E.nextSibling,G=U.nextSibling,K=G.firstChild,q=K.firstChild,B=K.nextSibling,H=se.nextSibling,Y=H.firstChild,te=Y.nextSibling,oe=H.nextSibling,pe=oe.firstChild,ne=pe.firstChild,Q=ne.nextSibling,ce=Q.firstChild,ue=ce.nextSibling,de=ue.nextSibling,ge=de.nextSibling,ye=ge.nextSibling,fe=ye.nextSibling,Se=fe.nextSibling,qe=Se.nextSibling,Oe=qe.nextSibling,Ie=pe.nextSibling,Be=Ie.firstChild,ke=Be.nextSibling,Ge=oe.nextSibling,et=Ge.firstChild,ve=et.firstChild,De=ve.nextSibling,He=Ge.nextSibling,Je=He.firstChild,Le=Je.firstChild,Te=Le.nextSibling,he=Je.nextSibling,Ne=he.firstChild,rt=Ne.nextSibling,re=He.nextSibling;return A.addEventListener("submit",C),c(ee,()=>e("inventory.productName"),Z),X.addEventListener("change",Ue=>n(Ue.target.value)),c(E,()=>e("inventory.sku"),O),L.addEventListener("change",Ue=>o(Ue.target.value)),c(K,()=>e("inventory.category"),q),B.addEventListener("change",Ue=>d(Ue.target.value)),c(Y,()=>e("common.description")),te.addEventListener("change",Ue=>a(Ue.target.value)),c(ne,()=>e("inventory.unitOfMeasure")),Q.addEventListener("change",Ue=>h(Ue.target.value)),c(ce,()=>e("inventory.pieces")),c(ue,()=>e("inventory.kilograms")),c(de,()=>e("inventory.pounds")),c(ge,()=>e("inventory.meters")),c(ye,()=>e("inventory.feet")),c(fe,()=>e("inventory.liters")),c(Se,()=>e("inventory.gallons")),c(qe,()=>e("inventory.boxes")),c(Oe,()=>e("inventory.packs")),c(Be,()=>e("inventory.unitCost")),ke.addEventListener("change",Ue=>p(Number(Ue.target.value))),c(ve,()=>e("inventory.sellingPrice")),De.addEventListener("change",Ue=>x(Number(Ue.target.value))),c(Le,()=>e("inventory.minimumStockLevel")),Te.addEventListener("change",Ue=>g(Number(Ue.target.value))),c(Ne,()=>e("inventory.maximumStockLevel")),rt.addEventListener("change",Ue=>V(Number(Ue.target.value))),c(A,(()=>{var Ue=Ve(()=>!!N());return()=>Ue()&&(()=>{var we=mF();return y(we,v),c(we,N),we})()})(),re),y(re,z),c(re,T(mt,{variant:"secondary",type:"button",onClick:k,get children(){return e("common.cancel")}}),null),c(re,T(mt,{variant:"primary",type:"submit",get children(){return e("inventory.addProduct")}}),null),be(Ue=>{var we=D,xe=$,je=w,$e=e("inventory.enterProductName"),ft=W,ct=$,yt=w,$t=e("inventory.enterSkuCode"),bt=$,Gt=w,Wt=e("inventory.enterCategory"),Dt=D,Kt=$,gt={...w,"min-height":"80px",resize:"vertical"},St=e("inventory.enterProductDescription"),Qe=W,vt=$,Ft=_,Pt=$,kt=w,Yt=W,nr=$,cr=w,on=W,Dr=$,lr=w,Zt=$,yr=w;return Ue.e=y(I,we,Ue.e),Ue.t=y(ee,xe,Ue.t),Ue.a=y(X,je,Ue.a),$e!==Ue.o&&ir(X,"placeholder",Ue.o=$e),Ue.i=y(se,ft,Ue.i),Ue.n=y(E,ct,Ue.n),Ue.s=y(L,yt,Ue.s),$t!==Ue.h&&ir(L,"placeholder",Ue.h=$t),Ue.r=y(K,bt,Ue.r),Ue.d=y(B,Gt,Ue.d),Wt!==Ue.l&&ir(B,"placeholder",Ue.l=Wt),Ue.u=y(H,Dt,Ue.u),Ue.c=y(Y,Kt,Ue.c),Ue.w=y(te,gt,Ue.w),St!==Ue.m&&ir(te,"placeholder",Ue.m=St),Ue.f=y(oe,Qe,Ue.f),Ue.y=y(ne,vt,Ue.y),Ue.g=y(Q,Ft,Ue.g),Ue.p=y(Be,Pt,Ue.p),Ue.b=y(ke,kt,Ue.b),Ue.T=y(Ge,Yt,Ue.T),Ue.A=y(ve,nr,Ue.A),Ue.O=y(De,cr,Ue.O),Ue.I=y(He,on,Ue.I),Ue.S=y(Le,Dr,Ue.S),Ue.W=y(Te,lr,Ue.W),Ue.C=y(Ne,Zt,Ue.C),Ue.B=y(rt,yr,Ue.B),Ue},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0,S:void 0,W:void 0,C:void 0,B:void 0}),be(()=>X.value=r()),be(()=>L.value=i()),be(()=>B.value=l()),be(()=>te.value=s()),be(()=>Q.value=u()),be(()=>ke.value=f()),be(()=>De.value=m()),be(()=>Te.value=P()),be(()=>rt.value=F()),A}})};var gF=le('<form><div><label> *</label><input type=text required></div><div><div><label> *<button type=button title="Generate code automatically"></button></label><input type=text required><div></div></div><div><label> *</label><select required><option value=warehouse> </option><option value=store> </option><option value=supplier> </option><option value=customer> </option></select><div></div></div></div><div><label> *</label><textarea required></textarea></div><div>'),vF=le("<div><div>:</div><div><span></span><div><div></div><div>"),bF=le("<div>");const n2=t=>{const{t:e}=pr(),[r,n]=Ae(""),[i,o]=Ae(""),[s,a]=Ae("warehouse"),[l,d]=Ae(""),[u,h]=Ae(""),f=()=>{n(""),o(""),a("warehouse"),d(""),h("")},p=()=>{if(r()){const w=s()==="warehouse"?"WH":s()==="store"?"ST":s()==="supplier"?"SUP":"CUST",_=r().toUpperCase().replace(/[^A-Z0-9]/g,"").substring(0,3),v=String(Math.floor(Math.random()*1e3)).padStart(3,"0");o(`${w}-${_}-${v}`)}},m=w=>{if(w.preventDefault(),h(""),!r().trim()){h(e("forms.locationNameRequired"));return}if(!i().trim()){h(e("forms.locationCodeRequired"));return}if(!l().trim()){h(e("forms.addressRequired"));return}if(At.locations.filter(W=>W.code.toLowerCase()===i().toLowerCase()).length>0){h(e("forms.locationCodeExists"));return}const v={name:r().trim(),code:i().trim().toUpperCase(),type:s(),address:l().trim(),isActive:!0};At.addLocation(v);const z=`loc-${Date.now()}`;t.onLocationAdded&&t.onLocationAdded(z),f(),t.onClose()},x=()=>{f(),t.onClose()},P={"margin-bottom":"1.5rem"},g={display:"block","margin-bottom":"0.5rem","font-weight":"500",color:"var(--text-primary)"},F={width:"100%",padding:"0.75rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"1rem",background:"var(--surface-color)"},V={...F,cursor:"pointer"},N={color:"#f44336","font-size":"0.875rem","margin-bottom":"1rem"},R={display:"flex",gap:"1rem","justify-content":"flex-end","margin-top":"2rem"},M={display:"grid","grid-template-columns":"2fr 1fr",gap:"1rem"},C={"font-size":"0.875rem",color:"var(--text-muted)","margin-top":"0.25rem"},k={padding:"0.25rem 0.5rem","font-size":"0.75rem","margin-left":"0.5rem",background:"var(--background-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)",cursor:"pointer",color:"var(--text-muted)"},D=w=>({warehouse:"🏭",store:"🏪",supplier:"🚚",customer:"👥"})[w]||"📍",$=w=>({warehouse:e("inventory.warehouseDescription"),store:e("inventory.storeDescription"),supplier:e("inventory.supplierDescription"),customer:e("inventory.customerDescription")})[w]||"";return T(Pi,{get isOpen(){return t.isOpen},onClose:x,get title(){return e("inventory.addNewLocation")},get children(){var w=gF(),_=w.firstChild,v=_.firstChild,z=v.firstChild,W=v.nextSibling,A=_.nextSibling,I=A.firstChild,ee=I.firstChild,Z=ee.firstChild,X=Z.nextSibling,se=ee.nextSibling,U=se.nextSibling,E=I.nextSibling,O=E.firstChild,L=O.firstChild,G=O.nextSibling,K=G.firstChild,q=K.firstChild,B=K.nextSibling,H=B.firstChild,Y=B.nextSibling,te=Y.firstChild,oe=Y.nextSibling,pe=oe.firstChild,ne=G.nextSibling,Q=A.nextSibling,ce=Q.firstChild,ue=ce.firstChild,de=ce.nextSibling,ge=Q.nextSibling;return w.addEventListener("submit",m),c(v,()=>e("inventory.locationName"),z),W.addEventListener("change",ye=>n(ye.target.value)),y(A,M),c(ee,()=>e("inventory.locationCode"),Z),X.$$click=p,y(X,k),c(X,()=>e("common.generate")),se.addEventListener("change",ye=>o(ye.target.value)),c(U,()=>e("inventory.uniqueIdentifierHelp")),c(O,()=>e("inventory.locationType"),L),G.addEventListener("change",ye=>a(ye.target.value)),c(K,()=>D("warehouse"),q),c(K,()=>e("inventory.warehouse"),null),c(B,()=>D("store"),H),c(B,()=>e("inventory.store"),null),c(Y,()=>D("supplier"),te),c(Y,()=>e("inventory.supplier"),null),c(oe,()=>D("customer"),pe),c(oe,()=>e("inventory.customer"),null),c(ne,()=>$(s())),c(ce,()=>e("common.address"),ue),de.addEventListener("change",ye=>d(ye.target.value)),c(w,(()=>{var ye=Ve(()=>!!r());return()=>ye()&&(()=>{var fe=vF(),Se=fe.firstChild,qe=Se.firstChild,Oe=Se.nextSibling,Ie=Oe.firstChild,Be=Ie.nextSibling,ke=Be.firstChild,Ge=ke.nextSibling;return fe.style.setProperty("padding","1rem"),fe.style.setProperty("background","var(--background-color)"),fe.style.setProperty("border-radius","var(--border-radius-sm)"),fe.style.setProperty("border","1px solid var(--border-color)"),fe.style.setProperty("margin-bottom","1rem"),Se.style.setProperty("font-weight","500"),Se.style.setProperty("margin-bottom","0.5rem"),c(Se,()=>e("common.preview"),qe),Oe.style.setProperty("display","flex"),Oe.style.setProperty("align-items","center"),Oe.style.setProperty("gap","0.5rem"),Ie.style.setProperty("font-size","1.2rem"),c(Ie,()=>D(s())),ke.style.setProperty("font-weight","600"),c(ke,r),Ge.style.setProperty("font-size","0.875rem"),Ge.style.setProperty("color","var(--text-muted)"),c(Ge,(()=>{var et=Ve(()=>!!i());return()=>et()&&`${i()} • `})(),null),c(Ge,s,null),fe})()})(),ge),c(w,(()=>{var ye=Ve(()=>!!u());return()=>ye()&&(()=>{var fe=bF();return y(fe,N),c(fe,u),fe})()})(),ge),y(ge,R),c(ge,T(mt,{variant:"secondary",type:"button",onClick:x,get children(){return e("common.cancel")}}),null),c(ge,T(mt,{variant:"primary",type:"submit",get children(){return e("inventory.addLocation")}}),null),be(ye=>{var fe=P,Se=g,qe=F,Oe=e("inventory.enterLocationName"),Ie=g,Be=F,ke=e("inventory.enterUniqueCode"),Ge=C,et=g,ve=V,De=C,He=P,Je=g,Le={...F,"min-height":"100px",resize:"vertical"},Te=e("inventory.enterCompleteAddress");return ye.e=y(_,fe,ye.e),ye.t=y(v,Se,ye.t),ye.a=y(W,qe,ye.a),Oe!==ye.o&&ir(W,"placeholder",ye.o=Oe),ye.i=y(ee,Ie,ye.i),ye.n=y(se,Be,ye.n),ke!==ye.s&&ir(se,"placeholder",ye.s=ke),ye.h=y(U,Ge,ye.h),ye.r=y(O,et,ye.r),ye.d=y(G,ve,ye.d),ye.l=y(ne,De,ye.l),ye.u=y(Q,He,ye.u),ye.c=y(ce,Je,ye.c),ye.w=y(de,Le,ye.w),Te!==ye.m&&ir(de,"placeholder",ye.m=Te),ye},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0}),be(()=>W.value=r()),be(()=>se.value=i()),be(()=>G.value=s()),be(()=>de.value=l()),w}})};tr(["click"]);var PF=le("<form><div>"),sx=le("<div><label> *"),xF=le("<div><label> *</label><select required><option value=in></option><option value=out></option><option value=transfer></option><option value=adjustment>"),SF=le("<div><label>"),wF=le("<div><label> *</label><input type=number min=0 step=1 required>"),CF=le("<div><label></label><input type=number min=0 step=0.01>"),_F=le("<div><label></label><input type=text>"),AF=le("<div><label></label><textarea>"),kF=le("<div><div><span>:</span><span> </span></div><div><span>:</span><span></span></div><div><span>:</span><span> "),EF=le("<div><div><span>:</span><span>"),TF=le("<div>");const IF=t=>{const{t:e}=pr(),[r,n]=Ae({name:"",price:"",quantity:"",category:"",description:"",sku:"",supplier:"",minStock:"",location:""}),[i,o]=Ae(""),[s,a]=Ae(""),[l,d]=Ae("in"),[u,h]=Ae(0),[f,p]=Ae(0),[m,x]=Ae(""),[P,g]=Ae(""),[F,V]=Ae(""),[N,R]=Ae(""),[M,C]=Ae(!1),[k,D]=Ae(!1),$=()=>t.mode==="movement",w=zt(()=>i()?At.getProductById(i()):null),_=zt(()=>s()?At.getLocationById(s()):null),v=zt(()=>F()?At.getLocationById(F()):null),z=zt(()=>u()*f()),W=zt(()=>!i()||!s()?0:At.getStockByProductAndLocation(i(),s())?.quantity||0),A=[{value:"Electronics",label:"Electronics"},{value:"Accessories",label:"Accessories"},{value:"Furniture",label:"Furniture"},{value:"Office Supplies",label:"Office Supplies"},{value:"Software",label:"Software"},{value:"Hardware",label:"Hardware"},{value:"Consumables",label:"Consumables"}],I=[{value:"Warehouse A",label:"Warehouse A"},{value:"Warehouse B",label:"Warehouse B"},{value:"Warehouse C",label:"Warehouse C"},{value:"Storage Room",label:"Storage Room"},{value:"Main Office",label:"Main Office"}],ee={display:"flex",gap:"1rem","justify-content":"flex-end","margin-top":"2rem"},Z=()=>{o(""),a(""),d("in"),h(0),p(0),x(""),g(""),V(""),R("")},X=()=>{n({name:"",price:"",quantity:"",category:"",description:"",sku:"",supplier:"",minStock:"",location:""})},se=oe=>{if(oe.preventDefault(),$()){if(R(""),!i()){R(e("forms.selectProduct"));return}if(!s()){R(e("forms.selectLocation"));return}if(u()<=0){R(e("forms.quantityGreaterThanZero"));return}if(f()<0){R(e("forms.unitCostNotNegative"));return}if(l()==="transfer"&&!F()){R(e("forms.selectFromLocation"));return}if(l()==="transfer"&&F()===s()){R(e("forms.sameLocationError"));return}if(l()==="out"&&u()>W()){R(e("forms.insufficientStock",{currentStock:W()}));return}const pe=w(),ne=_(),Q={productId:pe.id,productName:pe.name,productSku:pe.sku,locationId:ne.id,locationName:ne.name,movementType:l(),quantity:u(),unitCost:f()||pe.unitCost,totalCost:z()||u()*pe.unitCost,referenceNumber:m()||`AUTO-${Date.now()}`,notes:P(),createdBy:"admin",fromLocationId:l()==="transfer"?F():void 0,fromLocationName:l()==="transfer"?v()?.name:void 0};At.addInventoryMovement(Q),Z()}else{const pe=r();if(!pe.name||!pe.price||!pe.quantity||!pe.category||!pe.sku||!pe.supplier||!pe.minStock||!pe.location){alert(e("forms.fillAllRequired"));return}const ne={name:pe.name,price:parseFloat(pe.price),quantity:parseInt(pe.quantity),category:pe.category,description:pe.description,sku:pe.sku,supplier:pe.supplier,minStock:parseInt(pe.minStock),location:pe.location};At.addItem(ne),X()}t.onClose()},U=(oe,pe)=>{n(ne=>({...ne,[oe]:pe}))},E=()=>{$()?Z():X(),t.onClose()},O=oe=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(oe),L={width:"100%",padding:"0.75rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"1rem",background:"var(--surface-color)"},G={...L,cursor:"pointer"},K={color:"#f44336","font-size":"0.875rem","margin-top":"0.5rem"},q={padding:"1rem",background:"var(--background-color)","border-radius":"var(--border-radius-sm)",border:"1px solid var(--border-color)","margin-bottom":"1rem"},B={display:"flex","justify-content":"space-between","margin-bottom":"0.5rem"},H={"font-weight":"500",color:"var(--text-muted)"},Y={"font-weight":"600",color:"var(--text-primary)"},te=()=>$()?e("inventory.addMovement"):e("inventory.addNewItem");return T(Pi,{get isOpen(){return t.isOpen},onClose:E,get title(){return te()},get children(){return[(()=>{var oe=PF(),pe=oe.firstChild;return oe.addEventListener("submit",se),c(oe,(()=>{var ne=Ve(()=>!!$());return()=>ne()?[(()=>{var Q=sx(),ce=Q.firstChild,ue=ce.firstChild;return Q.style.setProperty("margin-bottom","1.5rem"),ce.style.setProperty("display","block"),ce.style.setProperty("margin-bottom","0.5rem"),ce.style.setProperty("font-weight","500"),c(ce,()=>e("inventory.product"),ue),c(Q,T(cg,{get value(){return i()},onChange:de=>{o(de);const ge=At.getProductById(de);ge&&p(ge.unitCost)},get placeholder(){return e("inventory.searchProductsPlaceholder")},onAddNew:()=>C(!0),required:!0}),null),Q})(),(()=>{var Q=xF(),ce=Q.firstChild,ue=ce.firstChild,de=ce.nextSibling,ge=de.firstChild,ye=ge.nextSibling,fe=ye.nextSibling,Se=fe.nextSibling;return Q.style.setProperty("margin-bottom","1.5rem"),ce.style.setProperty("display","block"),ce.style.setProperty("margin-bottom","0.5rem"),ce.style.setProperty("font-weight","500"),c(ce,()=>e("inventory.movementType"),ue),de.addEventListener("change",qe=>d(qe.target.value)),c(ge,()=>e("inventory.stockInPurchase")),c(ye,()=>e("inventory.stockOutSale")),c(fe,()=>e("inventory.transferBetween")),c(Se,()=>e("inventory.stockAdjustment")),be(qe=>y(de,G,qe)),be(()=>de.value=l()),Q})(),Ve(()=>Ve(()=>l()==="transfer")()&&(()=>{var Q=sx(),ce=Q.firstChild,ue=ce.firstChild;return Q.style.setProperty("margin-bottom","1.5rem"),ce.style.setProperty("display","block"),ce.style.setProperty("margin-bottom","0.5rem"),ce.style.setProperty("font-weight","500"),c(ce,()=>e("inventory.fromLocation"),ue),c(Q,T(kp,{get value(){return F()},onChange:de=>V(de),get placeholder(){return e("inventory.searchSourceLocation")},onAddNew:()=>D(!0),required:!0}),null),Q})()),(()=>{var Q=SF(),ce=Q.firstChild;return Q.style.setProperty("margin-bottom","1.5rem"),ce.style.setProperty("display","block"),ce.style.setProperty("margin-bottom","0.5rem"),ce.style.setProperty("font-weight","500"),c(ce,(()=>{var ue=Ve(()=>l()==="transfer");return()=>ue()?e("inventory.toLocation")+" *":e("inventory.locationName")+" *"})()),c(Q,T(kp,{get value(){return s()},onChange:ue=>a(ue),get placeholder(){return Ve(()=>l()==="transfer")()?e("inventory.searchDestinationLocation"):e("inventory.searchLocation")},onAddNew:()=>D(!0),required:!0}),null),Q})(),Ve(()=>Ve(()=>!!(w()&&_()))()&&(()=>{var Q=kF(),ce=Q.firstChild,ue=ce.firstChild,de=ue.firstChild,ge=ue.nextSibling,ye=ge.firstChild,fe=ce.nextSibling,Se=fe.firstChild,qe=Se.firstChild,Oe=Se.nextSibling,Ie=fe.nextSibling,Be=Ie.firstChild,ke=Be.firstChild,Ge=Be.nextSibling,et=Ge.firstChild;return c(ue,()=>e("inventory.currentStockAt",{location:_()?.name}),de),c(ge,W,ye),c(ge,()=>w()?.unitOfMeasure,null),c(Se,()=>e("inventory.productCost"),qe),c(Oe,()=>O(w()?.unitCost||0)),c(Be,()=>e("inventory.minStockLevel"),ke),c(Ge,()=>w()?.minStockLevel,et),c(Ge,()=>w()?.unitOfMeasure,null),be(ve=>{var De=q,He=B,Je=H,Le=Y,Te=B,he=H,Ne=Y,rt=B,re=H,Ue=Y;return ve.e=y(Q,De,ve.e),ve.t=y(ce,He,ve.t),ve.a=y(ue,Je,ve.a),ve.o=y(ge,Le,ve.o),ve.i=y(fe,Te,ve.i),ve.n=y(Se,he,ve.n),ve.s=y(Oe,Ne,ve.s),ve.h=y(Ie,rt,ve.h),ve.r=y(Be,re,ve.r),ve.d=y(Ge,Ue,ve.d),ve},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),Q})()),(()=>{var Q=wF(),ce=Q.firstChild,ue=ce.firstChild,de=ce.nextSibling;return Q.style.setProperty("margin-bottom","1.5rem"),ce.style.setProperty("display","block"),ce.style.setProperty("margin-bottom","0.5rem"),ce.style.setProperty("font-weight","500"),c(ce,()=>e("inventory.quantity"),ue),de.addEventListener("change",ge=>h(Number(ge.target.value))),be(ge=>y(de,L,ge)),be(()=>de.value=u()),Q})(),(()=>{var Q=CF(),ce=Q.firstChild,ue=ce.nextSibling;return Q.style.setProperty("margin-bottom","1.5rem"),ce.style.setProperty("display","block"),ce.style.setProperty("margin-bottom","0.5rem"),ce.style.setProperty("font-weight","500"),c(ce,()=>e("inventory.unitCost")),ue.addEventListener("change",de=>p(Number(de.target.value))),be(de=>{var ge=L,ye=e("inventory.willUseDefaultCost");return de.e=y(ue,ge,de.e),ye!==de.t&&ir(ue,"placeholder",de.t=ye),de},{e:void 0,t:void 0}),be(()=>ue.value=f()),Q})(),Ve(()=>Ve(()=>u()>0&&f()>0)()&&(()=>{var Q=EF(),ce=Q.firstChild,ue=ce.firstChild,de=ue.firstChild,ge=ue.nextSibling;return c(ue,()=>e("inventory.totalCost"),de),c(ge,()=>O(z())),be(ye=>{var fe=q,Se=B,qe=H,Oe={...Y,"font-size":"1.2rem",color:"var(--primary-color)"};return ye.e=y(Q,fe,ye.e),ye.t=y(ce,Se,ye.t),ye.a=y(ue,qe,ye.a),ye.o=y(ge,Oe,ye.o),ye},{e:void 0,t:void 0,a:void 0,o:void 0}),Q})()),(()=>{var Q=_F(),ce=Q.firstChild,ue=ce.nextSibling;return Q.style.setProperty("margin-bottom","1.5rem"),ce.style.setProperty("display","block"),ce.style.setProperty("margin-bottom","0.5rem"),ce.style.setProperty("font-weight","500"),c(ce,()=>e("common.referenceNumber")),ue.addEventListener("change",de=>x(de.target.value)),be(de=>{var ge=L,ye=e("common.referenceNumberPlaceholder");return de.e=y(ue,ge,de.e),ye!==de.t&&ir(ue,"placeholder",de.t=ye),de},{e:void 0,t:void 0}),be(()=>ue.value=m()),Q})(),(()=>{var Q=AF(),ce=Q.firstChild,ue=ce.nextSibling;return Q.style.setProperty("margin-bottom","1.5rem"),ce.style.setProperty("display","block"),ce.style.setProperty("margin-bottom","0.5rem"),ce.style.setProperty("font-weight","500"),c(ce,()=>e("common.notes")),ue.addEventListener("change",de=>g(de.target.value)),be(de=>{var ge={...L,"min-height":"100px",resize:"vertical"},ye=e("inventory.additionalNotesPlaceholder");return de.e=y(ue,ge,de.e),ye!==de.t&&ir(ue,"placeholder",de.t=ye),de},{e:void 0,t:void 0}),be(()=>ue.value=P()),Q})(),Ve(()=>Ve(()=>!!N())()&&(()=>{var Q=TF();return y(Q,K),c(Q,N),Q})())]:[T(Ot,{get label(){return e("inventory.itemName")},get value(){return r().name},onChange:Q=>U("name",Q),get placeholder(){return e("inventory.enterItemName")},required:!0}),T(Ot,{get label(){return e("inventory.sku")},get value(){return r().sku},onChange:Q=>U("sku",Q),get placeholder(){return e("inventory.enterSkuCode")},required:!0}),T(Nn,{get label(){return e("inventory.category")},get value(){return r().category},onChange:Q=>U("category",Q),options:A,required:!0}),T(Ot,{get label(){return e("common.description")},get value(){return r().description},onChange:Q=>U("description",Q),get placeholder(){return e("inventory.enterItemDescription")}}),T(Ot,{get label(){return e("common.price")},type:"number",get value(){return r().price},onChange:Q=>U("price",Q),get placeholder(){return e("common.enterPrice")},required:!0}),T(Ot,{get label(){return e("inventory.quantity")},type:"number",get value(){return r().quantity},onChange:Q=>U("quantity",Q),get placeholder(){return e("inventory.enterQuantity")},required:!0}),T(Ot,{get label(){return e("inventory.minimumStock")},type:"number",get value(){return r().minStock},onChange:Q=>U("minStock",Q),get placeholder(){return e("inventory.enterMinStockLevel")},required:!0}),T(Ot,{get label(){return e("inventory.supplier")},get value(){return r().supplier},onChange:Q=>U("supplier",Q),get placeholder(){return e("inventory.enterSupplierName")},required:!0}),T(Nn,{get label(){return e("inventory.location")},get value(){return r().location},onChange:Q=>U("location",Q),options:I,required:!0})]})(),pe),y(pe,ee),c(pe,T(mt,{variant:"secondary",type:"button",onClick:E,get children(){return e("common.cancel")}}),null),c(pe,T(mt,{variant:"primary",type:"submit",get children(){return Ve(()=>!!$())()?e("inventory.addMovement"):e("inventory.addItem")}}),null),oe})(),T(r2,{get isOpen(){return M()},onClose:()=>C(!1),onProductAdded:oe=>{o(oe),C(!1)}}),T(n2,{get isOpen(){return k()},onClose:()=>D(!1),onLocationAdded:oe=>{l()==="transfer"&&!F()?V(oe):a(oe),D(!1)}})]}})};tr(["input","keydown"]);var NF=le("<div><div></div><div></div><div></div><div>"),RF=le("<div><strong>:</strong> "),DF=le("<div><div><span></span><span></span></div><div><span></span><span> </span></div><div><span></span><span> </span></div><div><span></span><span></span></div><div><span></span><span></span></div><div><span></span><span></span></div><div><span></span><span>"),LF=le("<div>");const $F=t=>{const{t:e}=pr(),r={display:"flex","justify-content":"space-between","align-items":"center",padding:"0.75rem 0","border-bottom":"1px solid var(--border-color)"},n={"font-weight":"500",color:"var(--text-muted)","font-size":"0.875rem"},i={"font-weight":"600",color:"var(--text-primary)"},o={"text-align":"center","margin-bottom":"2rem"},s={"font-size":"1.5rem","font-weight":"600",color:"var(--text-primary)",margin:"0.5rem 0"},a={color:"var(--text-muted)","font-size":"1rem"},l={"font-size":"1.25rem","font-weight":"600",color:"var(--primary-color)","margin-bottom":"1rem"},d=(x,P)=>({padding:"0.25rem 0.75rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"500","text-transform":"uppercase","letter-spacing":"0.5px",background:x>P?"#d4edda":"#f8d7da",color:x>P?"#155724":"#721c24"}),u={display:"flex",gap:"1rem","justify-content":"flex-end","margin-top":"2rem"},h={"margin-bottom":"1.5rem",padding:"1rem",background:"var(--background-color)","border-radius":"var(--border-radius-sm)",color:"var(--text-secondary)"};if(!t.item)return null;const f=x=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(x),p=x=>new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),m=t.item.price*t.item.quantity;return T(Pi,{get isOpen(){return t.isOpen},get onClose(){return t.onClose},get title(){return e("inventory.itemDetails")},get children(){return[(()=>{var x=NF(),P=x.firstChild,g=P.nextSibling,F=g.nextSibling,V=F.nextSibling;return y(x,o),y(P,s),c(P,()=>t.item.name),y(g,a),c(g,()=>t.item.category),y(F,l),c(F,()=>f(t.item.price)),c(V,(()=>{var N=Ve(()=>t.item.quantity>t.item.minStock);return()=>N()?e("inventory.inStock"):e("inventory.lowStockAlert")})()),be(N=>y(V,d(t.item.quantity,t.item.minStock),N)),x})(),(()=>{var x=RF(),P=x.firstChild,g=P.firstChild;return P.nextSibling,y(x,h),c(P,()=>e("common.description"),g),c(x,()=>t.item.description,null),x})(),(()=>{var x=DF(),P=x.firstChild,g=P.firstChild,F=g.nextSibling,V=P.nextSibling,N=V.firstChild,R=N.nextSibling,M=R.firstChild,C=V.nextSibling,k=C.firstChild,D=k.nextSibling,$=D.firstChild,w=C.nextSibling,_=w.firstChild,v=_.nextSibling,z=w.nextSibling,W=z.firstChild,A=W.nextSibling,I=z.nextSibling,ee=I.firstChild,Z=ee.nextSibling,X=I.nextSibling,se=X.firstChild,U=se.nextSibling;return c(g,()=>e("inventory.sku")),c(F,()=>t.item.sku),c(N,()=>e("inventory.quantity")),c(R,()=>t.item.quantity,M),c(R,()=>e("common.units"),null),c(k,()=>e("inventory.minimumStock")),c(D,()=>t.item.minStock,$),c(D,()=>e("common.units"),null),c(_,()=>e("inventory.totalValue")),c(v,()=>f(m)),c(W,()=>e("inventory.supplier")),c(A,()=>t.item.supplier),c(ee,()=>e("inventory.location")),c(Z,()=>t.item.location),c(se,()=>e("common.lastUpdated")),c(U,()=>p(t.item.lastUpdated)),be(E=>{var O=r,L=n,G=i,K=r,q=n,B=i,H=r,Y=n,te=i,oe=r,pe=n,ne=i,Q=r,ce=n,ue=i,de=r,ge=n,ye=i,fe=r,Se=n,qe=i;return E.e=y(P,O,E.e),E.t=y(g,L,E.t),E.a=y(F,G,E.a),E.o=y(V,K,E.o),E.i=y(N,q,E.i),E.n=y(R,B,E.n),E.s=y(C,H,E.s),E.h=y(k,Y,E.h),E.r=y(D,te,E.r),E.d=y(w,oe,E.d),E.l=y(_,pe,E.l),E.u=y(v,ne,E.u),E.c=y(z,Q,E.c),E.w=y(W,ce,E.w),E.m=y(A,ue,E.m),E.f=y(I,de,E.f),E.y=y(ee,ge,E.y),E.g=y(Z,ye,E.g),E.p=y(X,fe,E.p),E.b=y(se,Se,E.b),E.T=y(U,qe,E.T),E},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0}),x})(),(()=>{var x=LF();return y(x,u),c(x,T(mt,{variant:"secondary",get onClick(){return t.onClose},get children(){return e("common.close")}}),null),c(x,T(mt,{variant:"primary",onClick:()=>{console.log("Edit item:",t.item.id)},get children(){return e("common.editItem")}}),null),x})()]}})};var FF=le("<div>🔄"),MF=le("<button type=button>×"),OF=le("<div>⚠️ "),ax=le("<div>"),BF=le("<div><div><input type=text autocomplete=off>"),jF=le("<div><div><div><div></div><div><span>: </span><span>•</span><span></span><span>•</span><span></span></div></div><div><div> </div><div>"),VF=le("<span>⚠️ ");const zF=t=>{const{t:e}=pr(),[r,n]=Ae(""),[i,o]=Ae(!1),[s,a]=Ae(null),[l,d]=Ae([]),[u,h]=Ae(!1),[f,p]=Ae(-1),[m,x]=Ae(null),P=t.searchDelay||300;t.maxResults;const g=async O=>{if(!O.trim()||O.trim().length<3){d([]),t.onSearchResults?.([]);return}try{o(!0),a(null);try{console.log("apiResults",O),t.onSearchResults?.(O)}catch(L){console.warn("API search failed, using local fallback:",L),a("API search failed, showing local results")}}catch(L){const G=L instanceof Error?L.message:"Search failed";a(G),d([]),t.onSearchResults?.([])}finally{o(!1)}},F=O=>{const G=O.target.value;n(G),a(null),console.log(),t.showResults,m()&&clearTimeout(m());const K=setTimeout(()=>{g(G)},P);x(K)},V=O=>{n(O.name),h(!1),p(-1),t.onInventorySelect?.(O)},N=O=>{if(!(!u()||l().length===0))switch(O.key){case"ArrowDown":O.preventDefault(),p(L=>Math.min(L+1,l().length-1));break;case"ArrowUp":O.preventDefault(),p(L=>Math.max(L-1,-1));break;case"Enter":O.preventDefault(),f()>=0&&l()[f()]&&V(l()[f()]);break;case"Escape":h(!1),p(-1);break}},R=()=>{t.showResults!==!1&&l().length>0&&h(!0)},M=()=>{setTimeout(()=>{h(!1),p(-1)},150)},C=()=>{n(""),d([]),a(null),h(!1),p(-1),t.onSearchResults?.([]),m()&&(clearTimeout(m()),x(null))},k=O=>At.stockLevels.filter(L=>L.inventoryId===O).reduce((L,G)=>L+G.quantity,0),D=O=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(O),$={position:"relative",width:"100%",...t.style},w={position:"relative",display:"flex","align-items":"center"},_={width:"100%",padding:"0.75rem","padding-right":r()?"2.5rem":"0.75rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"1rem",background:"var(--surface-color)",cursor:t.disabled?"not-allowed":"text",opacity:t.disabled?"0.6":"1",outline:"none",transition:"border-color 0.2s ease"},v={position:"absolute",right:"0.5rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--text-muted)","font-size":"1.2rem","line-height":"1",padding:"0.25rem","border-radius":"50%",transition:"all 0.2s ease"},z={position:"absolute",right:r()?"2.5rem":"0.75rem",top:"50%",transform:"translateY(-50%)","font-size":"0.875rem",color:"var(--text-muted)"},W={position:"absolute",top:"100%",left:"0",right:"0","z-index":"1000","max-height":"300px","overflow-y":"auto",background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","box-shadow":"0 4px 12px rgba(0,0,0,0.15)","margin-top":"2px"},A=O=>({padding:"0.75rem",cursor:"pointer","border-bottom":"1px solid var(--border-color)",background:O?"var(--strip-color)":"transparent",transition:"background-color 0.2s ease"}),I={display:"flex","justify-content":"space-between","align-items":"center"},ee={flex:"1"},Z={"font-weight":"500","margin-bottom":"0.25rem",color:"var(--text-primary)"},X={"font-size":"0.875rem",color:"var(--text-muted)",display:"flex",gap:"0.5rem"},se={"text-align":"right","font-size":"0.875rem"},U={padding:"1rem","text-align":"center",color:"var(--text-muted)","font-style":"italic"},E={padding:"0.5rem 1rem",background:"#fff3cd",color:"#856404","border-bottom":"1px solid var(--border-color)","font-size":"0.875rem"};return(()=>{var O=BF(),L=O.firstChild,G=L.firstChild;return G.addEventListener("blur",M),G.addEventListener("focus",R),G.$$keydown=N,G.$$input=F,c(L,T(We,{get when(){return i()},get children(){var K=FF();return be(q=>y(K,z,q)),K}}),null),c(L,T(We,{get when(){return Ve(()=>!!r())()&&!i()},get children(){var K=MF();return K.addEventListener("mouseleave",q=>{q.currentTarget.style.background="none",q.currentTarget.style.color="var(--text-muted)"}),K.addEventListener("mouseenter",q=>{q.currentTarget.style.background="var(--border-color)",q.currentTarget.style.color="var(--text-primary)"}),K.$$click=C,be(q=>{var B=v,H=e("common.clear","Clear search");return q.e=y(K,B,q.e),H!==q.t&&ir(K,"title",q.t=H),q},{e:void 0,t:void 0}),K}}),null),c(O,T(We,{get when(){return u()&&t.showResults!==!1},get children(){var K=ax();return c(K,T(We,{get when(){return s()},get children(){var q=OF();return q.firstChild,y(q,E),c(q,s,null),q}}),null),c(K,T(We,{get when(){return l().length>0},get fallback(){return Ve(()=>!!(r()&&!i()))()&&(()=>{var q=ax();return y(q,U),c(q,()=>e("inventory.noInventorysFound","No inventorys found matching your search.")),q})()},get children(){return T(_t,{get each(){return l()},children:(q,B)=>{const H=k(q.id),Y=H<=q.minStockLevel;return(()=>{var te=jF(),oe=te.firstChild,pe=oe.firstChild,ne=pe.firstChild,Q=ne.nextSibling,ce=Q.firstChild,ue=ce.firstChild,de=ce.nextSibling,ge=de.nextSibling,ye=ge.nextSibling,fe=ye.nextSibling,Se=pe.nextSibling,qe=Se.firstChild,Oe=qe.firstChild,Ie=qe.nextSibling;return te.addEventListener("mouseenter",()=>p(B())),te.$$click=()=>V(q),y(oe,I),y(pe,ee),y(ne,Z),c(ne,()=>q.name),y(Q,X),c(ce,()=>e("inventory.sku","SKU"),ue),c(ce,()=>q.sku,null),c(ge,()=>q.category),c(fe,()=>D(q.unitCost)),y(Se,se),qe.style.setProperty("font-weight","600"),(Y?"#f44336":"var(--text-primary)")!=null?qe.style.setProperty("color",Y?"#f44336":"var(--text-primary)"):qe.style.removeProperty("color"),c(qe,H,Oe),c(qe,()=>q.unitOfMeasure,null),Ie.style.setProperty("color","var(--text-muted)"),c(Ie,()=>Y?(()=>{var Be=VF();return Be.firstChild,Be.style.setProperty("color","#f44336"),c(Be,()=>e("inventory.lowStock","Low Stock"),null),Be})():e("inventory.inStock","In Stock")),be(Be=>y(te,A(B()===f()),Be)),te})()}})}}),null),be(q=>y(K,W,q)),K}}),null),be(K=>{var q=$,B=w,H=_,Y=t.placeholder||e("inventory.searchInventorys","Search inventorys by name, SKU, or category..."),te=t.disabled;return K.e=y(O,q,K.e),K.t=y(L,B,K.t),K.a=y(G,H,K.a),Y!==K.o&&ir(G,"placeholder",K.o=Y),te!==K.i&&(G.disabled=K.i=te),K},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),be(()=>G.value=r()),O})()};tr(["input","keydown","click"]);var UF=le("<div>"),Pv=le("<div><span>:</span><span>"),qF=le("<div><button> "),HF=le("<div><div><div><h3></h3><div>: </div></div><div><span></span></div></div><div><h4></h4><div><span>:</span><span></span></div><div><span>:</span><span> </span></div><div><span>:</span><span></span></div><div><span> <!>:</span><span></span></div></div><div><h4></h4><div><span>:</span><span></span></div></div><div><h4></h4><div><span>:</span><span></span></div><div><span>:</span><span>");const WF=t=>{const{t:e}=pr(),r=p=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(p),n=p=>new Date(p).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),i=p=>({in:{bg:"#e8f5e8",color:"#2d7d32"},out:{bg:"#ffebee",color:"#d32f2f"},transfer:{bg:"#e3f2fd",color:"#1976d2"},adjustment:{bg:"#fff3e0",color:"#f57c00"}})[p]||{bg:"#f5f5f5",color:"#666"},o=p=>({in:"📦",out:"📤",transfer:"🔄",adjustment:"⚖️"})[p]||"📋",s=()=>t.movement,a={display:"flex","justify-content":"space-between","align-items":"center",padding:"0.75rem 0","border-bottom":"1px solid var(--border-color)"},l={"font-weight":"500",color:"var(--text-muted)","font-size":"0.875rem"},d={"font-weight":"600",color:"var(--text-primary)","text-align":"right"},u={"margin-bottom":"1.5rem"},h={"font-weight":"600","margin-bottom":"0.75rem","padding-bottom":"0.5rem","border-bottom":"2px solid var(--border-color)"},f=p=>({display:"inline-flex","align-items":"center",gap:"0.5rem",padding:"0.5rem 1rem","border-radius":"9999px","font-size":"0.875rem","font-weight":"600","text-transform":"uppercase","letter-spacing":"0.5px",background:i(p).bg,color:i(p).color});return T(Pi,{get isOpen(){return t.isOpen},get onClose(){return t.onClose},get title(){return e("inventory.movementDetails")},size:"lg",get children(){return T(We,{get when(){return s()},get fallback(){return(()=>{var p=UF();return c(p,()=>e("common.noDataFound")),p})()},children:p=>(()=>{var m=HF(),x=m.firstChild,P=x.firstChild,g=P.firstChild,F=g.nextSibling,V=F.firstChild,N=P.nextSibling,R=N.firstChild,M=x.nextSibling,C=M.firstChild,k=C.nextSibling,D=k.firstChild,$=D.firstChild,w=D.nextSibling,_=k.nextSibling,v=_.firstChild,z=v.firstChild,W=v.nextSibling,A=W.firstChild,I=_.nextSibling,ee=I.firstChild,Z=ee.firstChild,X=ee.nextSibling,se=I.nextSibling,U=se.firstChild,E=U.firstChild,O=E.nextSibling;O.nextSibling;var L=U.nextSibling,G=M.nextSibling,K=G.firstChild,q=K.nextSibling,B=q.firstChild,H=B.firstChild,Y=B.nextSibling,te=G.nextSibling,oe=te.firstChild,pe=oe.nextSibling,ne=pe.firstChild,Q=ne.firstChild,ce=ne.nextSibling,ue=pe.nextSibling,de=ue.firstChild,ge=de.firstChild,ye=de.nextSibling;return x.style.setProperty("display","flex"),x.style.setProperty("justify-content","space-between"),x.style.setProperty("align-items","center"),x.style.setProperty("margin-bottom","1.5rem"),x.style.setProperty("padding-bottom","1rem"),x.style.setProperty("border-bottom","2px solid var(--border-color)"),g.style.setProperty("margin","0 0 0.5rem 0"),g.style.setProperty("font-size","1.25rem"),c(g,()=>p().productName),F.style.setProperty("font-size","0.875rem"),F.style.setProperty("color","var(--text-muted)"),c(F,()=>e("inventory.sku"),V),c(F,()=>p().productSku,null),N.$$click=()=>At.generateMovementInvoice(p().id,e),R.style.setProperty("font-size","1.2rem"),c(R,()=>o(p().movementType)),c(N,()=>p().movementType,null),c(C,()=>e("inventory.movementInformation")),c(D,()=>e("inventory.referenceNumber"),$),c(w,()=>p().referenceNumber),c(v,()=>e("common.quantity"),z),c(W,()=>p().quantity,A),c(W,()=>e("common.units"),null),c(ee,()=>e("inventory.unitCost"),Z),c(X,()=>r(p().unitCost)),c(U,()=>e("common.total"),E),c(U,()=>e("common.value"),O),c(L,()=>r(p().totalCost)),c(K,()=>e("inventory.locationInformation")),c(B,()=>e("inventory.location"),H),c(Y,()=>p().locationName),c(G,T(We,{get when(){return p().fromLocationName},get children(){var fe=Pv(),Se=fe.firstChild,qe=Se.firstChild,Oe=Se.nextSibling;return c(Se,()=>e("common.from"),qe),c(Oe,()=>p().fromLocationName),be(Ie=>{var Be=a,ke=l,Ge=d;return Ie.e=y(fe,Be,Ie.e),Ie.t=y(Se,ke,Ie.t),Ie.a=y(Oe,Ge,Ie.a),Ie},{e:void 0,t:void 0,a:void 0}),fe}}),null),c(G,T(We,{get when(){return p().invoiceId},get children(){var fe=Pv(),Se=fe.firstChild,qe=Se.firstChild,Oe=Se.nextSibling;return c(Se,()=>e("common.invoice"),qe),c(Oe,()=>p().invoiceId),be(Ie=>{var Be=a,ke=l,Ge={...d,color:"var(--primary-color)"};return Ie.e=y(fe,Be,Ie.e),Ie.t=y(Se,ke,Ie.t),Ie.a=y(Oe,Ge,Ie.a),Ie},{e:void 0,t:void 0,a:void 0}),fe}}),null),c(oe,()=>e("common.details")),c(ne,()=>e("common.createdBy"),Q),c(ce,()=>p().createdBy),c(de,()=>e("common.created"),ge),c(ye,()=>n(p().createdDate)),c(te,T(We,{get when(){return p().notes},get children(){var fe=Pv(),Se=fe.firstChild,qe=Se.firstChild,Oe=Se.nextSibling;return c(Se,()=>e("common.notes"),qe),c(Oe,()=>p().notes),be(Ie=>{var Be={...a,"border-bottom":"none"},ke=l,Ge={...d,"font-style":"italic","max-width":"60%","white-space":"pre-wrap"};return Ie.e=y(fe,Be,Ie.e),Ie.t=y(Se,ke,Ie.t),Ie.a=y(Oe,Ge,Ie.a),Ie},{e:void 0,t:void 0,a:void 0}),fe}}),null),c(m,T(We,{get when(){return t.onEdit},get children(){var fe=qF(),Se=fe.firstChild,qe=Se.firstChild;return fe.style.setProperty("display","flex"),fe.style.setProperty("justify-content","flex-end"),fe.style.setProperty("margin-top","1.5rem"),fe.style.setProperty("padding-top","1rem"),fe.style.setProperty("border-top","1px solid var(--border-color)"),Se.addEventListener("mouseleave",Oe=>{Oe.currentTarget.style.transform="translateY(0)",Oe.currentTarget.style.boxShadow="none"}),Se.addEventListener("mouseenter",Oe=>{Oe.currentTarget.style.transform="translateY(-1px)",Oe.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.15)"}),Se.$$click=()=>t.onEdit?.(p()),Se.style.setProperty("padding","0.5rem 1.5rem"),Se.style.setProperty("border-radius","var(--border-radius-sm)"),Se.style.setProperty("border","1px solid var(--primary-color)"),Se.style.setProperty("background","var(--primary-color)"),Se.style.setProperty("color","white"),Se.style.setProperty("cursor","pointer"),Se.style.setProperty("font-weight","500"),Se.style.setProperty("transition","all 0.2s ease"),c(Se,()=>e("common.edit"),qe),c(Se,()=>e("inventory.movement"),null),fe}}),null),be(fe=>{var Se=f(p().movementType),qe=u,Oe=h,Ie=a,Be=l,ke=d,Ge=a,et=l,ve={...d,"font-size":"1.1rem",color:"var(--primary-color)"},De=a,He=l,Je=d,Le=a,Te=l,he={...d,"font-size":"1.1rem",color:"var(--primary-color)"},Ne=u,rt=h,re=a,Ue=l,we=d,xe=u,je=h,$e=a,ft=l,ct=d,yt=a,$t=l,bt=d;return fe.e=y(N,Se,fe.e),fe.t=y(M,qe,fe.t),fe.a=y(C,Oe,fe.a),fe.o=y(k,Ie,fe.o),fe.i=y(D,Be,fe.i),fe.n=y(w,ke,fe.n),fe.s=y(_,Ge,fe.s),fe.h=y(v,et,fe.h),fe.r=y(W,ve,fe.r),fe.d=y(I,De,fe.d),fe.l=y(ee,He,fe.l),fe.u=y(X,Je,fe.u),fe.c=y(se,Le,fe.c),fe.w=y(U,Te,fe.w),fe.m=y(L,he,fe.m),fe.f=y(G,Ne,fe.f),fe.y=y(K,rt,fe.y),fe.g=y(q,re,fe.g),fe.p=y(B,Ue,fe.p),fe.b=y(Y,we,fe.b),fe.T=y(te,xe,fe.T),fe.A=y(oe,je,fe.A),fe.O=y(pe,$e,fe.O),fe.I=y(ne,ft,fe.I),fe.S=y(ce,ct,fe.S),fe.W=y(ue,yt,fe.W),fe.C=y(de,$t,fe.C),fe.B=y(ye,bt,fe.B),fe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0,S:void 0,W:void 0,C:void 0,B:void 0}),m})()})}})};tr(["click"]);var Wc=le("<div>"),GF=le("<div><label></label><select><option value>"),KF=le("<div><div><span>:</span><span>$"),YF=le("<form><div><label></label><select><option value=in></option><option value=out></option><option value=transfer></option><option value=adjustment></option></select></div><div><label></label><select><option value></option></select></div><div><label></label><input type=number min=0.01 step=0.01></div><div><label></label><input type=number min=0 step=0.01></div><div><label></label><input type=text></div><div><label> (<!>)</label><input type=text></div><div><label> (<!>)</label><textarea></textarea></div><div><button type=button></button><button type=submit>"),lx=le("<option> (<!>)");const XF=t=>{const{t:e}=pr(),[r,n]=Ae("in"),[i,o]=Ae(""),[s,a]=Ae(""),[l,d]=Ae(""),[u,h]=Ae(""),[f,p]=Ae(""),[m,x]=Ae(""),[P,g]=Ae(""),[F,V]=Ae(!1),[N,R]=Ae({});Ei(()=>{const z=t.movement;z&&t.isOpen&&(n(z.movementType),o(z.quantity.toString()),a(z.unitCost.toString()),d(z.referenceNumber),h(z.notes),x(z.locationId),p(z.fromLocationId||""),g(z.invoiceId||""),R({}))});const M=()=>{const z={};return(!i()||parseFloat(i())<=0)&&(z.quantity=e("forms.requiredField")),(!s()||parseFloat(s())<0)&&(z.unitCost=e("forms.requiredField")),l().trim()||(z.referenceNumber=e("forms.requiredField")),m()||(z.locationId=e("forms.requiredField")),r()==="transfer"&&!f()&&(z.fromLocationId=e("forms.requiredField")),R(z),Object.keys(z).length===0},C=async z=>{if(z.preventDefault(),!(!M()||!t.movement)){V(!0);try{const W=t.movement,A=At.getProductById(W.productId),I=At.getLocationById(m()),ee=f()?At.getLocationById(f()):null;if(!A||!I)throw new Error("Product or location not found");const Z={...W,movementType:r(),quantity:parseFloat(i()),unitCost:parseFloat(s()),totalCost:parseFloat(i())*parseFloat(s()),referenceNumber:l().trim(),notes:u().trim(),locationId:m(),locationName:I.name,fromLocationId:f()||void 0,fromLocationName:ee?.name,invoiceId:P().trim()||void 0,lastModified:new Date().toISOString()};At.updateMovement(W.id,Z),t.onMovementUpdated?.(),t.onClose(),k()}catch(W){console.error("Error updating movement:",W),R({submit:e("forms.saveError")})}finally{V(!1)}}},k=()=>{n("in"),o(""),a(""),d(""),h(""),p(""),x(""),g(""),R({})},D=()=>{k(),t.onClose()},$={width:"100%",padding:"0.5rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"1rem",transition:"border-color 0.2s ease"},w={display:"block","margin-bottom":"0.25rem","font-weight":"500","font-size":"0.875rem"},_={color:"#d32f2f","font-size":"0.75rem","margin-top":"0.25rem"},v={"margin-bottom":"1rem"};return T(Pi,{get isOpen(){return t.isOpen},onClose:D,get title(){return e("inventory.editMovement","Edit Movement")},get children(){return T(We,{get when(){return t.movement},get fallback(){return(()=>{var z=Wc();return c(z,()=>e("common.loading")),z})()},get children(){var z=YF(),W=z.firstChild,A=W.firstChild,I=A.nextSibling,ee=I.firstChild,Z=ee.nextSibling,X=Z.nextSibling,se=X.nextSibling,U=W.nextSibling,E=U.firstChild,O=E.nextSibling,L=O.firstChild,G=U.nextSibling,K=G.firstChild,q=K.nextSibling,B=G.nextSibling,H=B.firstChild,Y=H.nextSibling,te=B.nextSibling,oe=te.firstChild,pe=oe.nextSibling,ne=te.nextSibling,Q=ne.firstChild,ce=Q.firstChild,ue=ce.nextSibling;ue.nextSibling;var de=Q.nextSibling,ge=ne.nextSibling,ye=ge.firstChild,fe=ye.firstChild,Se=fe.nextSibling;Se.nextSibling;var qe=ye.nextSibling,Oe=ge.nextSibling,Ie=Oe.firstChild,Be=Ie.nextSibling;return z.addEventListener("submit",C),c(A,()=>e("inventory.movementType")),I.addEventListener("change",ke=>n(ke.target.value)),c(ee,()=>e("inventory.stockIn")),c(Z,()=>e("inventory.stockOut")),c(X,()=>e("inventory.transfer")),c(se,()=>e("inventory.adjustment")),c(E,(()=>{var ke=Ve(()=>r()==="transfer");return()=>ke()?e("inventory.toLocation"):e("inventory.location")})()),O.addEventListener("change",ke=>x(ke.target.value)),c(L,()=>e("modals.selectLocation")),c(O,T(_t,{get each(){return At.getActiveLocations()},children:ke=>(()=>{var Ge=lx(),et=Ge.firstChild,ve=et.nextSibling;return ve.nextSibling,c(Ge,()=>ke.name,et),c(Ge,()=>ke.type,ve),be(()=>Ge.value=ke.id),Ge})()}),null),c(U,T(We,{get when(){return N().locationId},get children(){var ke=Wc();return c(ke,()=>N().locationId),be(Ge=>y(ke,_,Ge)),ke}}),null),c(z,T(We,{get when(){return r()==="transfer"},get children(){var ke=GF(),Ge=ke.firstChild,et=Ge.nextSibling,ve=et.firstChild;return c(Ge,()=>e("inventory.fromLocation")),et.addEventListener("change",De=>p(De.target.value)),c(ve,()=>e("modals.selectLocation")),c(et,T(_t,{get each(){return At.getActiveLocations().filter(De=>De.id!==m())},children:De=>(()=>{var He=lx(),Je=He.firstChild,Le=Je.nextSibling;return Le.nextSibling,c(He,()=>De.name,Je),c(He,()=>De.type,Le),be(()=>He.value=De.id),He})()}),null),c(ke,T(We,{get when(){return N().fromLocationId},get children(){var De=Wc();return c(De,()=>N().fromLocationId),be(He=>y(De,_,He)),De}}),null),be(De=>{var He=v,Je=w,Le={...$,"border-color":N().fromLocationId?"#d32f2f":"var(--border-color)"},Te=F();return De.e=y(ke,He,De.e),De.t=y(Ge,Je,De.t),De.a=y(et,Le,De.a),Te!==De.o&&(et.disabled=De.o=Te),De},{e:void 0,t:void 0,a:void 0,o:void 0}),be(()=>et.value=f()),ke}}),G),c(K,()=>e("common.quantity")),q.$$input=ke=>o(ke.target.value),c(G,T(We,{get when(){return N().quantity},get children(){var ke=Wc();return c(ke,()=>N().quantity),be(Ge=>y(ke,_,Ge)),ke}}),null),c(H,()=>e("inventory.unitCost")),Y.$$input=ke=>a(ke.target.value),c(B,T(We,{get when(){return N().unitCost},get children(){var ke=Wc();return c(ke,()=>N().unitCost),be(Ge=>y(ke,_,Ge)),ke}}),null),c(z,T(We,{get when(){return Ve(()=>!!i())()&&s()},get children(){var ke=KF(),Ge=ke.firstChild,et=Ge.firstChild,ve=et.firstChild,De=et.nextSibling;return De.firstChild,Ge.style.setProperty("display","flex"),Ge.style.setProperty("justify-content","space-between"),et.style.setProperty("font-weight","500"),c(et,()=>e("common.total"),ve),De.style.setProperty("font-weight","600"),De.style.setProperty("color","var(--primary-color)"),c(De,()=>(parseFloat(i()||"0")*parseFloat(s()||"0")).toFixed(2),null),be(He=>y(ke,{...v,padding:"0.75rem",background:"var(--surface-color)","border-radius":"var(--border-radius-sm)"},He)),ke}}),te),c(oe,()=>e("inventory.referenceNumber")),pe.$$input=ke=>d(ke.target.value),c(te,T(We,{get when(){return N().referenceNumber},get children(){var ke=Wc();return c(ke,()=>N().referenceNumber),be(Ge=>y(ke,_,Ge)),ke}}),null),c(Q,()=>e("inventory.invoiceNumber"),ce),c(Q,()=>e("common.optional"),ue),de.$$input=ke=>g(ke.target.value),c(ye,()=>e("common.notes"),fe),c(ye,()=>e("common.optional"),Se),qe.$$input=ke=>h(ke.target.value),c(z,T(We,{get when(){return N().submit},get children(){var ke=Wc();return c(ke,()=>N().submit),be(Ge=>y(ke,{..._,"margin-bottom":"1rem"},Ge)),ke}}),Oe),Oe.style.setProperty("display","flex"),Oe.style.setProperty("gap","1rem"),Oe.style.setProperty("justify-content","flex-end"),Ie.$$click=D,Ie.style.setProperty("padding","0.5rem 1rem"),Ie.style.setProperty("border","1px solid var(--border-color)"),Ie.style.setProperty("border-radius","var(--border-radius-sm)"),Ie.style.setProperty("background","white"),Ie.style.setProperty("cursor","pointer"),c(Ie,()=>e("common.cancel")),Be.style.setProperty("padding","0.5rem 1rem"),Be.style.setProperty("border","none"),Be.style.setProperty("border-radius","var(--border-radius-sm)"),Be.style.setProperty("background","var(--primary-color)"),Be.style.setProperty("color","white"),Be.style.setProperty("cursor","pointer"),Be.style.setProperty("font-weight","500"),c(Be,(()=>{var ke=Ve(()=>!!F());return()=>ke()?e("modals.processing"):e("inventory.updateMovement","Update Movement")})()),be(ke=>{var Ge=v,et=w,ve=$,De=F(),He=v,Je=w,Le={...$,"border-color":N().locationId?"#d32f2f":"var(--border-color)"},Te=F(),he=v,Ne=w,rt={...$,"border-color":N().quantity?"#d32f2f":"var(--border-color)"},re=e("modals.enterQuantity"),Ue=F(),we=v,xe=w,je={...$,"border-color":N().unitCost?"#d32f2f":"var(--border-color)"},$e=e("modals.enterCost"),ft=F(),ct=v,yt=w,$t={...$,"border-color":N().referenceNumber?"#d32f2f":"var(--border-color)"},bt=e("modals.enterReference"),Gt=F(),Wt=v,Dt=w,Kt=$,gt=e("inventory.invoiceNumber"),St=F(),Qe=v,vt=w,Ft={...$,resize:"vertical","min-height":"80px"},Pt=e("modals.addNotes"),kt=F(),Yt=F(),nr=F();return ke.e=y(W,Ge,ke.e),ke.t=y(A,et,ke.t),ke.a=y(I,ve,ke.a),De!==ke.o&&(I.disabled=ke.o=De),ke.i=y(U,He,ke.i),ke.n=y(E,Je,ke.n),ke.s=y(O,Le,ke.s),Te!==ke.h&&(O.disabled=ke.h=Te),ke.r=y(G,he,ke.r),ke.d=y(K,Ne,ke.d),ke.l=y(q,rt,ke.l),re!==ke.u&&ir(q,"placeholder",ke.u=re),Ue!==ke.c&&(q.disabled=ke.c=Ue),ke.w=y(B,we,ke.w),ke.m=y(H,xe,ke.m),ke.f=y(Y,je,ke.f),$e!==ke.y&&ir(Y,"placeholder",ke.y=$e),ft!==ke.g&&(Y.disabled=ke.g=ft),ke.p=y(te,ct,ke.p),ke.b=y(oe,yt,ke.b),ke.T=y(pe,$t,ke.T),bt!==ke.A&&ir(pe,"placeholder",ke.A=bt),Gt!==ke.O&&(pe.disabled=ke.O=Gt),ke.I=y(ne,Wt,ke.I),ke.S=y(Q,Dt,ke.S),ke.W=y(de,Kt,ke.W),gt!==ke.C&&ir(de,"placeholder",ke.C=gt),St!==ke.B&&(de.disabled=ke.B=St),ke.v=y(ge,Qe,ke.v),ke.k=y(ye,vt,ke.k),ke.x=y(qe,Ft,ke.x),Pt!==ke.j&&ir(qe,"placeholder",ke.j=Pt),kt!==ke.q&&(qe.disabled=ke.q=kt),Yt!==ke.z&&(Ie.disabled=ke.z=Yt),nr!==ke.P&&(Be.disabled=ke.P=nr),ke},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0,S:void 0,W:void 0,C:void 0,B:void 0,v:void 0,k:void 0,x:void 0,j:void 0,q:void 0,z:void 0,P:void 0}),be(()=>I.value=r()),be(()=>O.value=m()),be(()=>q.value=i()),be(()=>Y.value=s()),be(()=>pe.value=l()),be(()=>de.value=P()),be(()=>qe.value=u()),z}})}})};tr(["input","click"]);var ZF=le("<div><div></div><div><div><label></label><select><option value=all></option><option value=in></option><option value=out></option><option value=transfer></option><option value=adjustment></option></select></div><div><label></label><input type=date></div><div><label></label><input type=date></div></div><div><div><div></div><div></div></div><div><div></div><div></div></div><div><div></div><div></div></div><div><div></div><div></div></div><div><div></div><div></div></div><div><div></div><div>"),JF=le("<div><h2>"),QF=le("<div><label>"),e9=le("<div><label></label><select><option value>"),t9=le("<option>"),r9=le("<div><div>📦</div><div></div><div>"),n9=le("<div><div><div><div><span></span><h3></h3><span></span></div><div> • </div></div><div><div></div><div> <!> @ </div></div></div><div><div><div><span>:</span><span></span></div><div><span>:</span><span></span></div></div><div><div><span>:</span><span>"),i9=le("<span>"),o9=le("<span>• <!>: "),cx=le("<div><span>:</span><span>"),s9=le("<div><div><span>:</span><select><option value=10>10</option><option value=25>25</option><option value=50>50</option><option value=100>100</option></select><span></span></div><div><div><span>:</span><input type=number min=1><span> "),a9=le("<span>..."),l9=le("<button>");const c9=t=>{const{t:e}=pr(),[r,n]=Ae(""),[i,o]=Ae(""),[s,a]=Ae("all"),[l,d]=Ae({start:"",end:""}),[u,h]=Ae(""),[f,p]=Ae(""),[m,x]=Ae(1),[P,g]=Ae(25),[F,V]=Ae(null),[N,R]=Ae(!1),[M,C]=Ae(!1),k=zt(()=>{let de=At.movements;if(t.filterBy==="product"&&t.filterId?de=de.filter(ge=>ge.productId===t.filterId):t.filterBy==="location"&&t.filterId&&(de=de.filter(ge=>ge.locationId===t.filterId)),r()&&(de=de.filter(ge=>ge.productId===r())),i()&&(de=de.filter(ge=>ge.locationId===i())),s()!=="all"&&(de=de.filter(ge=>ge.movementType===s())),l().start&&(de=de.filter(ge=>ge.createdDate>=l().start)),l().end&&(de=de.filter(ge=>ge.createdDate<=l().end+"T23:59:59Z")),u()){const ge=u().toLowerCase();de=de.filter(ye=>ye.productName.toLowerCase().includes(ge)||ye.productSku.toLowerCase().includes(ge)||ye.locationName.toLowerCase().includes(ge)||ye.referenceNumber.toLowerCase().includes(ge)||ye.notes.toLowerCase().includes(ge)||ye.createdBy.toLowerCase().includes(ge)||ye.invoiceId&&ye.invoiceId.toLowerCase().includes(ge)||ye.fromLocationName&&ye.fromLocationName.toLowerCase().includes(ge)||ye.movementType.toLowerCase().includes(ge))}return de.sort((ge,ye)=>new Date(ye.createdDate).getTime()-new Date(ge.createdDate).getTime())});Ei(()=>{r(),i(),s(),l(),u(),x(1)});const D=zt(()=>{const de=(m()-1)*P(),ge=de+P();return k().slice(de,ge)}),$=zt(()=>Math.ceil(k().length/P())),w=zt(()=>{const de=k();return{total:de.length,stockIn:de.filter(ge=>ge.movementType==="in").length,stockOut:de.filter(ge=>ge.movementType==="out").length,transfers:de.filter(ge=>ge.movementType==="transfer").length,adjustments:de.filter(ge=>ge.movementType==="adjustment").length,totalValue:de.reduce((ge,ye)=>ge+ye.totalCost,0)}}),_={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"2rem"},v={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem","margin-bottom":"2rem",padding:"1.5rem",background:"var(--surface-color)","border-radius":"var(--border-radius)",border:"1px solid var(--border-color)"},z={width:"100%",padding:"0.5rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)",background:"var(--background-color)",cursor:"pointer"},W={width:"100%",padding:"0.5rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)",background:"var(--background-color)"},A={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem","margin-bottom":"2rem"},I={padding:"1rem",background:"var(--surface-color)","border-radius":"var(--border-radius-sm)",border:"1px solid var(--border-color)","text-align":"center"},ee={"font-size":"1.5rem","font-weight":"700",color:"var(--primary-color)","margin-bottom":"0.5rem"},Z={"font-size":"0.875rem",color:"var(--text-muted)","font-weight":"500"},X={padding:"1.5rem","margin-bottom":"1rem",background:"var(--surface-color)","border-radius":"var(--border-radius)",border:"1px solid var(--border-color)",transition:"all 0.2s ease"},se={display:"flex","justify-content":"space-between","align-items":"flex-start","margin-bottom":"1rem"};function U(de){return{in:{bg:"#e8f5e8",color:"#2d7d32"},out:{bg:"#ffebee",color:"#d32f2f"},transfer:{bg:"#e3f2fd",color:"#1976d2"},adjustment:{bg:"#fff3e0",color:"#f57c00"}}[de]||{bg:"#f5f5f5",color:"#666"}}const E=de=>({padding:"0.25rem 0.75rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"500","text-transform":"uppercase","letter-spacing":"0.5px",background:U(de).bg,color:U(de).color}),O={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem","margin-bottom":"1rem"},L={display:"flex","justify-content":"space-between","align-items":"center",padding:"0.5rem 0","border-bottom":"1px solid var(--border-color)"},G={"font-weight":"500",color:"var(--text-muted)","font-size":"0.875rem"},K={"font-weight":"600",color:"var(--text-primary)"},q={display:"flex","justify-content":"space-between","align-items":"center","margin-top":"2rem",padding:"1rem",background:"var(--surface-color)","border-radius":"var(--border-radius)",border:"1px solid var(--border-color)"},B=de=>({padding:"0.25rem 0.75rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)",background:de?"var(--primary-color)":"var(--surface-color)",color:de?"white":"var(--text-primary)",cursor:"pointer","font-weight":"500","font-size":"0.875rem",transition:"all 0.2s ease"}),H=de=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(de),Y=de=>new Date(de).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),te=de=>({in:"📦",out:"📤",transfer:"🔄",adjustment:"⚖️"})[de]||"📋",oe=()=>{n(""),o(""),a("all"),d({start:"",end:""}),h(""),x(1)},pe=de=>{V(de),R(!0)},ne=de=>{V(de),R(!1),C(!0)},Q=()=>{C(!1),V(null)},ce=async de=>{i()&&(de+=" "+i()),T0(s())&&(de+=" "+T0(s()));const ge=await Ki.getInventory(de),ye=At.parseInventoryData(ge);At.updMovements(ye)},ue=()=>{};return(()=>{var de=ZF(),ge=de.firstChild,ye=ge.nextSibling,fe=ye.firstChild,Se=fe.firstChild,qe=Se.nextSibling,Oe=qe.firstChild,Ie=Oe.nextSibling,Be=Ie.nextSibling,ke=Be.nextSibling,Ge=ke.nextSibling,et=fe.nextSibling,ve=et.firstChild,De=ve.nextSibling,He=et.nextSibling,Je=He.firstChild,Le=Je.nextSibling,Te=ye.nextSibling,he=Te.firstChild,Ne=he.firstChild,rt=Ne.nextSibling,re=he.nextSibling,Ue=re.firstChild,we=Ue.nextSibling,xe=re.nextSibling,je=xe.firstChild,$e=je.nextSibling,ft=xe.nextSibling,ct=ft.firstChild,yt=ct.nextSibling,$t=ft.nextSibling,bt=$t.firstChild,Gt=bt.nextSibling,Wt=$t.nextSibling,Dt=Wt.firstChild,Kt=Dt.nextSibling;return c(de,(()=>{var gt=Ve(()=>!t.filterBy);return()=>gt()&&(()=>{var St=JF(),Qe=St.firstChild;return y(St,_),Qe.style.setProperty("margin","0"),Qe.style.setProperty("font-size","1.5rem"),c(Qe,()=>e("inventory.movements")),c(St,T(mt,{variant:"outline",onClick:oe,get children(){return e("common.clearFilters")}}),null),St})()})(),ge),c(de,T(zF,{filters:{selectedLocation:i,movementType:s},onSearchResults:gt=>{p(gt),ce(gt)},get placeholder(){return e("inventory.searchProductsStock","Search inventories...")},showResults:!1,maxResults:20}),ge),ge.style.setProperty("margin","20px"),y(ye,v),c(ye,(()=>{var gt=Ve(()=>!t.filterBy);return()=>gt()&&[(()=>{var St=QF(),Qe=St.firstChild;return Qe.style.setProperty("display","block"),Qe.style.setProperty("margin-bottom","0.5rem"),Qe.style.setProperty("font-weight","500"),c(Qe,()=>e("inventory.product")),c(St,T(cg,{onChange:vt=>{console.log(vt),n(vt.id)},get placeholder(){return e("inventory.searchProductsImages","Search products to view images...")}}),null),St})(),(()=>{var St=e9(),Qe=St.firstChild,vt=Qe.nextSibling,Ft=vt.firstChild;return Qe.style.setProperty("display","block"),Qe.style.setProperty("margin-bottom","0.5rem"),Qe.style.setProperty("font-weight","500"),c(Qe,()=>e("inventory.location")),vt.addEventListener("change",Pt=>o(Pt.target.value)),c(Ft,()=>e("inventory.allLocations")),c(vt,T(_t,{get each(){return At.locations},children:Pt=>(()=>{var kt=t9();return c(kt,()=>Pt.name),be(()=>kt.value=Pt.id),kt})()}),null),be(Pt=>y(vt,z,Pt)),be(()=>vt.value=i()),St})()]})(),fe),Se.style.setProperty("display","block"),Se.style.setProperty("margin-bottom","0.5rem"),Se.style.setProperty("font-weight","500"),c(Se,()=>e("inventory.movementType")),qe.addEventListener("change",gt=>{a(gt.target.value),ce(f())}),c(Oe,()=>e("inventory.allTypes")),c(Ie,()=>e("inventory.stockIn")),c(Be,()=>e("inventory.stockOut")),c(ke,()=>e("inventory.transfer")),c(Ge,()=>e("inventory.adjustment")),ve.style.setProperty("display","block"),ve.style.setProperty("margin-bottom","0.5rem"),ve.style.setProperty("font-weight","500"),c(ve,()=>e("common.startDate")),De.addEventListener("change",gt=>d(St=>({...St,start:gt.target.value}))),Je.style.setProperty("display","block"),Je.style.setProperty("margin-bottom","0.5rem"),Je.style.setProperty("font-weight","500"),c(Je,()=>e("common.endDate")),Le.addEventListener("change",gt=>d(St=>({...St,end:gt.target.value}))),y(Te,A),c(Ne,()=>w().total),c(rt,()=>e("inventory.totalMovements")),c(Ue,()=>w().stockIn),c(we,()=>e("inventory.stockIn")),c(je,()=>w().stockOut),c($e,()=>e("inventory.stockOut")),c(ct,()=>w().transfers),c(yt,()=>e("inventory.transfers")),c(bt,()=>w().adjustments),c(Gt,()=>e("inventory.adjustments")),Dt.$$click=ue,c(Dt,()=>H(w().totalValue)),c(Kt,()=>e("inventory.totalValue")),c(de,(()=>{var gt=Ve(()=>D().length===0);return()=>gt()?(()=>{var St=r9(),Qe=St.firstChild,vt=Qe.nextSibling,Ft=vt.nextSibling;return St.style.setProperty("text-align","center"),St.style.setProperty("padding","3rem"),St.style.setProperty("color","var(--text-muted)"),St.style.setProperty("background","var(--surface-color)"),St.style.setProperty("border-radius","var(--border-radius)"),St.style.setProperty("border","1px solid var(--border-color)"),Qe.style.setProperty("font-size","1.5rem"),Qe.style.setProperty("margin-bottom","1rem"),vt.style.setProperty("font-size","1.1rem"),vt.style.setProperty("margin-bottom","0.5rem"),c(vt,()=>e("inventory.noMovementsFound")),Ft.style.setProperty("font-size","0.875rem"),c(Ft,()=>e("inventory.tryAdjustingFilters")),St})():[T(_t,{get each(){return D()},children:St=>(()=>{var Qe=n9(),vt=Qe.firstChild,Ft=vt.firstChild,Pt=Ft.firstChild,kt=Pt.firstChild,Yt=kt.nextSibling,nr=Yt.nextSibling,cr=Pt.nextSibling,on=cr.firstChild,Dr=Ft.nextSibling,lr=Dr.firstChild,Zt=lr.nextSibling,yr=Zt.firstChild,Lr=yr.nextSibling;Lr.nextSibling;var Wr=vt.nextSibling,Ar=Wr.firstChild,fr=Ar.firstChild,Yr=fr.firstChild,br=Yr.firstChild,zn=Yr.nextSibling,Bi=fr.nextSibling,Ni=Bi.firstChild,Ao=Ni.firstChild,Ri=Ni.nextSibling,os=Ar.nextSibling,xn=os.firstChild,ko=xn.firstChild,ks=ko.firstChild,Es=ko.nextSibling;return Qe.addEventListener("mouseleave",Nr=>{Nr.currentTarget.style.transform="translateY(0)",Nr.currentTarget.style.boxShadow="none"}),Qe.addEventListener("mouseenter",Nr=>{Nr.currentTarget.style.transform="translateY(-2px)",Nr.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"}),Qe.$$click=()=>pe(St),y(vt,se),Pt.style.setProperty("display","flex"),Pt.style.setProperty("align-items","center"),Pt.style.setProperty("gap","0.5rem"),Pt.style.setProperty("margin-bottom","0.5rem"),kt.style.setProperty("font-size","1.2rem"),c(kt,()=>te(St.movementType)),Yt.style.setProperty("margin","0"),Yt.style.setProperty("font-size","1.1rem"),c(Yt,()=>St.productName),c(nr,()=>St.movementType),c(Pt,(()=>{var Nr=Ve(()=>!!St.invoiceId);return()=>Nr()&&(()=>{var fn=i9();return fn.style.setProperty("padding","0.2rem 0.5rem"),fn.style.setProperty("border-radius","var(--border-radius-sm)"),fn.style.setProperty("font-size","0.7rem"),fn.style.setProperty("font-weight","500"),fn.style.setProperty("background","var(--primary-color)"),fn.style.setProperty("color","white"),c(fn,()=>e("inventory.bulk")),fn})()})(),null),cr.style.setProperty("font-size","0.875rem"),cr.style.setProperty("color","var(--text-muted)"),c(cr,()=>St.productSku,on),c(cr,()=>Y(St.createdDate),null),c(cr,(()=>{var Nr=Ve(()=>!!St.invoiceId);return()=>Nr()&&(()=>{var fn=o9(),Dn=fn.firstChild,ji=Dn.nextSibling;return ji.nextSibling,fn.style.setProperty("margin-left","0.5rem"),fn.style.setProperty("font-weight","500"),c(fn,()=>e("common.invoice"),ji),c(fn,()=>St.invoiceId,null),fn})()})(),null),Dr.style.setProperty("text-align","right"),lr.style.setProperty("font-size","1.25rem"),lr.style.setProperty("font-weight","700"),lr.style.setProperty("color","var(--primary-color)"),c(lr,()=>H(St.totalCost)),Zt.style.setProperty("font-size","0.875rem"),Zt.style.setProperty("color","var(--text-muted)"),c(Zt,()=>St.quantity,yr),c(Zt,()=>e("common.units"),Lr),c(Zt,()=>H(St.unitCost),null),y(Wr,O),c(Yr,()=>e("inventory.location"),br),c(zn,()=>St.locationName),c(Ar,(()=>{var Nr=Ve(()=>!!St.fromLocationName);return()=>Nr()&&(()=>{var fn=cx(),Dn=fn.firstChild,ji=Dn.firstChild,Sn=Dn.nextSibling;return c(Dn,()=>e("common.from"),ji),c(Sn,()=>St.fromLocationName),be(cn=>{var fo=L,Eo=G,Vo=K;return cn.e=y(fn,fo,cn.e),cn.t=y(Dn,Eo,cn.t),cn.a=y(Sn,Vo,cn.a),cn},{e:void 0,t:void 0,a:void 0}),fn})()})(),Bi),c(Ni,()=>e("common.reference"),Ao),c(Ri,()=>St.referenceNumber),c(ko,()=>e("common.createdBy"),ks),c(Es,()=>St.createdBy),c(os,(()=>{var Nr=Ve(()=>!!St.notes);return()=>Nr()&&(()=>{var fn=cx(),Dn=fn.firstChild,ji=Dn.firstChild,Sn=Dn.nextSibling;return c(Dn,()=>e("common.notes"),ji),c(Sn,()=>St.notes),be(cn=>{var fo={...L,"border-bottom":"none"},Eo=G,Vo={...K,"max-width":"200px","text-align":"right","font-style":"italic"};return cn.e=y(fn,fo,cn.e),cn.t=y(Dn,Eo,cn.t),cn.a=y(Sn,Vo,cn.a),cn},{e:void 0,t:void 0,a:void 0}),fn})()})(),null),be(Nr=>{var fn={...X,"border-left":St.invoiceId?"4px solid var(--primary-color)":"1px solid var(--border-color)",cursor:"pointer"},Dn=E(St.movementType),ji=L,Sn=G,cn=K,fo=L,Eo=G,Vo=K,yn=L,Ts=G,Is=K;return Nr.e=y(Qe,fn,Nr.e),Nr.t=y(nr,Dn,Nr.t),Nr.a=y(fr,ji,Nr.a),Nr.o=y(Yr,Sn,Nr.o),Nr.i=y(zn,cn,Nr.i),Nr.n=y(Bi,fo,Nr.n),Nr.s=y(Ni,Eo,Nr.s),Nr.h=y(Ri,Vo,Nr.h),Nr.r=y(xn,yn,Nr.r),Nr.d=y(ko,Ts,Nr.d),Nr.l=y(Es,Is,Nr.l),Nr},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0}),Qe})()}),Ve(()=>Ve(()=>$()>1)()&&(()=>{var St=s9(),Qe=St.firstChild,vt=Qe.firstChild,Ft=vt.firstChild,Pt=vt.nextSibling,kt=Pt.nextSibling,Yt=Qe.nextSibling,nr=Yt.firstChild,cr=nr.firstChild,on=cr.firstChild,Dr=cr.nextSibling,lr=Dr.nextSibling,Zt=lr.firstChild;return y(St,q),Qe.style.setProperty("display","flex"),Qe.style.setProperty("align-items","center"),Qe.style.setProperty("gap","0.5rem"),vt.style.setProperty("font-size","0.875rem"),vt.style.setProperty("color","var(--text-muted)"),c(vt,()=>e("common.showPerPage","Show per page"),Ft),Pt.addEventListener("change",yr=>{g(Number(yr.target.value)),x(1)}),Pt.style.setProperty("padding","0.25rem 0.5rem"),Pt.style.setProperty("border","1px solid var(--border-color)"),Pt.style.setProperty("border-radius","var(--border-radius-sm)"),Pt.style.setProperty("background","var(--surface-color)"),Pt.style.setProperty("cursor","pointer"),Pt.style.setProperty("font-size","0.875rem"),kt.style.setProperty("font-size","0.875rem"),kt.style.setProperty("color","var(--text-muted)"),kt.style.setProperty("margin-left","1rem"),c(kt,()=>e("common.showingXofY","Showing {{start}}-{{end}} of {{total}}",{start:(m()-1)*P()+1,end:Math.min(m()*P(),k().length),total:k().length})),Yt.style.setProperty("display","flex"),Yt.style.setProperty("align-items","center"),Yt.style.setProperty("gap","0.5rem"),c(Yt,T(mt,{variant:"outline",size:"sm",onClick:()=>x(1),get disabled(){return m()===1},style:{padding:"0.25rem 0.5rem"},get children(){return e("common.first","First")}}),nr),c(Yt,T(mt,{variant:"outline",size:"sm",onClick:()=>x(yr=>Math.max(1,yr-1)),get disabled(){return m()===1},style:{padding:"0.25rem 0.5rem"},get children(){return e("common.previous")}}),nr),c(Yt,()=>{const yr=[],Lr=$(),Wr=m();if(Lr<=7)for(let Ar=1;Ar<=Lr;Ar++)yr.push(Ar);else{yr.push(1),Wr>3&&yr.push("...");for(let Ar=Math.max(2,Wr-1);Ar<=Math.min(Lr-1,Wr+1);Ar++)yr.includes(Ar)||yr.push(Ar);Wr<Lr-2&&yr.push("..."),yr.includes(Lr)||yr.push(Lr)}return T(_t,{each:yr,children:Ar=>Ar==="..."?(()=>{var fr=a9();return fr.style.setProperty("padding","0 0.5rem"),fr.style.setProperty("color","var(--text-muted)"),fr})():(()=>{var fr=l9();return fr.$$click=()=>x(Ar),c(fr,Ar),be(Yr=>y(fr,B(Ar===m()),Yr)),fr})()})},nr),c(Yt,T(mt,{variant:"outline",size:"sm",onClick:()=>x(yr=>Math.min($(),yr+1)),get disabled(){return m()===$()},style:{padding:"0.25rem 0.5rem"},get children(){return e("common.next")}}),nr),c(Yt,T(mt,{variant:"outline",size:"sm",onClick:()=>x($()),get disabled(){return m()===$()},style:{padding:"0.25rem 0.5rem"},get children(){return e("common.last","Last")}}),nr),nr.style.setProperty("display","flex"),nr.style.setProperty("align-items","center"),nr.style.setProperty("gap","0.5rem"),nr.style.setProperty("margin-left","1rem"),cr.style.setProperty("font-size","0.875rem"),cr.style.setProperty("color","var(--text-muted)"),c(cr,()=>e("common.page","Page"),on),Dr.addEventListener("change",yr=>{const Lr=Number(yr.target.value);Lr>=1&&Lr<=$()&&x(Lr)}),Dr.style.setProperty("width","4rem"),Dr.style.setProperty("padding","0.25rem 0.5rem"),Dr.style.setProperty("border","1px solid var(--border-color)"),Dr.style.setProperty("border-radius","var(--border-radius-sm)"),Dr.style.setProperty("background","var(--surface-color)"),Dr.style.setProperty("text-align","center"),Dr.style.setProperty("font-size","0.875rem"),lr.style.setProperty("font-size","0.875rem"),lr.style.setProperty("color","var(--text-muted)"),c(lr,()=>e("common.of","of"),Zt),c(lr,$,null),be(()=>ir(Dr,"max",$())),be(()=>Pt.value=P()),be(()=>Dr.value=m()),St})())]})(),null),c(de,T(WF,{get isOpen(){return N()},onClose:()=>{R(!1),V(null)},get movement(){return F()},onEdit:ne}),null),c(de,T(We,{get when(){return Xt.hasPermission("read_write")},get children(){return T(XF,{get isOpen(){return M()},onClose:()=>{C(!1),V(null)},get movement(){return F()},onMovementUpdated:Q})}}),null),be(gt=>{var St=z,Qe=W,vt=W,Ft=I,Pt=ee,kt=Z,Yt=I,nr={...ee,color:"#2d7d32"},cr=Z,on=I,Dr={...ee,color:"#d32f2f"},lr=Z,Zt=I,yr={...ee,color:"#1976d2"},Lr=Z,Wr=I,Ar={...ee,color:"#f57c00"},fr=Z,Yr=I,br=ee,zn=Z;return gt.e=y(qe,St,gt.e),gt.t=y(De,Qe,gt.t),gt.a=y(Le,vt,gt.a),gt.o=y(he,Ft,gt.o),gt.i=y(Ne,Pt,gt.i),gt.n=y(rt,kt,gt.n),gt.s=y(re,Yt,gt.s),gt.h=y(Ue,nr,gt.h),gt.r=y(we,cr,gt.r),gt.d=y(xe,on,gt.d),gt.l=y(je,Dr,gt.l),gt.u=y($e,lr,gt.u),gt.c=y(ft,Zt,gt.c),gt.w=y(ct,yr,gt.w),gt.m=y(yt,Lr,gt.m),gt.f=y($t,Wr,gt.f),gt.y=y(bt,Ar,gt.y),gt.g=y(Gt,fr,gt.g),gt.p=y(Wt,Yr,gt.p),gt.b=y(Dt,br,gt.b),gt.T=y(Kt,zn,gt.T),gt},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0}),be(()=>qe.value=s()),be(()=>De.value=l().start),be(()=>Le.value=l().end),de})()};tr(["click"]);var d9=le("<div><p>📋 "),u9=le("<div>"),h9=le("<div><div>📊</div><h3></h3><p></p><div><div><label>:</label><select><option value=all></option></select></div><div><label>:</label><select><option value=all></option></select></div><div><label>:</label><select><option value=name></option><option value=sku></option><option value=category>"),p9=le("<div><div></div><div><div><div></div><div></div></div><div><div></div><div></div></div><div><div></div><div></div></div><div><div>%</div><div></div></div></div><div></div><div><table><thead><tr><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody>"),f9=le("<div><table><thead><tr><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody>"),y9=le("<div><div>✅</div><h3></h3><p>"),m9=le("<div><div><h3>📋 </h3><p></p></div><div><div><div></div><div></div></div><div><div></div><div></div></div><div><div></div><div></div></div></div><div>"),g9=le("<div><div><div><h2>📋 </h2><button>×"),dx=le("<option>"),v9=le("<div>..."),b9=le("<tr><td><div></div><div> • </div></td><td><div></div></td><td><div></div></td><td><div></div></td><td><div>"),P9=le("<tr><td><div></div></td><td><div></div><div> • <!> • </div></td><td><div></div></td><td><input type=number placeholder=0 min=0 step=0.01></td><td><div></div></td><td><input type=text>");const x9=t=>{const{t:e}=pr(),[r,n]=Ae([]),[i,o]=Ae(!1),[s,a]=Ae(!1),[l,d]=Ae("all"),[u,h]=Ae("all"),[f,p]=Ae("name"),[m,x]=Ae([]),[P,g]=Ae("setup"),F=async()=>{try{o(!0);const Z=await Ki.getProducts("prod");if(!Z||typeof Z!="object"){console.warn("No API results, using local store"),n(At.products);return}const X=Object.keys(Z),se=E=>{let L=Z[E];return{id:E,name:L.name||"Unknown Product",businessId:L.businessId||"",sku:L.code||L.sku||"",UPC:L.UPC||"",numCode:L.codeN||"",category:L.category||"General",unitCost:L.unitCost||0,unitOfMeasure:L.unitOfMeasure||"pcs",minStockLevel:L.minStockLevel||0,maxStockLevel:L.maxStockLevel||100,isActive:L.isActive!==!1,description:L.description||"",createdDate:L.createdAt||new Date().toISOString(),lastModified:L.updatedAt||new Date().toISOString(),sellingPrice:parseFloat(L.sellingPrice||L.price||"0")}},U=X.map(se);n(U)}catch(Z){console.error("Failed to load products from API:",Z),n(At.products)}finally{o(!1)}},V=zt(()=>[...new Set(r().map(X=>X.category).filter(X=>X))].sort()),N=zt(()=>{let Z=r().filter(X=>X.isActive);return u()!=="all"&&(Z=Z.filter(X=>X.category===u())),Z.sort((X,se)=>{switch(f()){case"name":return X.name.localeCompare(se.name);case"sku":return X.sku.localeCompare(se.sku);case"category":return X.category.localeCompare(se.category)||X.name.localeCompare(se.name);default:return 0}}),Z}),R=zt(()=>At.getActiveLocations()),M=(Z,X)=>X&&X!=="all"?At.getStockByProductAndLocation(Z,X)?.quantity||0:At.getTotalStockByProduct(Z),C=()=>{const Z=N().map(X=>{const se=M(X.id,l()!=="all"?l():void 0);return{productId:X.id,systemQuantity:se,physicalCount:null,notes:"",variance:0,product:X}});x(Z),g("counting")},k=(Z,X)=>{x(se=>se.map(U=>{if(U.productId===Z){const E=X,O=E!==null?E-U.systemQuantity:0;return{...U,physicalCount:E,variance:O}}return U}))},D=(Z,X)=>{x(se=>se.map(U=>U.productId===Z?{...U,notes:X}:U))},$=zt(()=>{const Z=m(),X=Z.length,se=Z.filter(L=>L.physicalCount!==null).length,U=Z.filter(L=>L.variance!==0).length,E=Z.filter(L=>L.variance>0).length,O=Z.filter(L=>L.variance<0).length;return{totalProducts:X,countedProducts:se,remainingProducts:X-se,variances:U,positiveVariances:E,negativeVariances:O,isComplete:se===X}}),w=()=>{const Z=m().filter(E=>E.physicalCount!==null&&E.variance!==0);if(Z.length===0)return null;const X=[e("inventory.product","Product"),e("inventory.sku","SKU"),e("inventory.category","Category"),e("inventory.location","Location"),e("inventory.systemQty","System Qty"),e("inventory.physicalCount","Physical Count"),e("inventory.variance","Variance"),e("inventory.adjustment","Adjustment"),e("common.notes","Notes"),e("common.date","Date")],se=Z.map(E=>[`"${E.product.name}"`,`"${E.product.sku}"`,`"${E.product.category}"`,`"${z()}"`,E.systemQuantity,E.physicalCount,E.variance,E.variance>0?e("inventory.stockIncrease","Stock Increase"):e("inventory.stockDecrease","Stock Decrease"),`"${E.notes||e("inventory.physicalCountAdjustment","Physical count adjustment")}"`,`"${W()}"`]);return[X.join(","),...se.map(E=>E.join(","))].join(`
`)},_=()=>{const Z=w();if(!Z){alert(e("inventory.noAdjustmentsToDownload","No adjustments to download"));return}const X=new Blob([Z],{type:"text/csv;charset=utf-8;"}),se=document.createElement("a");if(se.download!==void 0){const U=URL.createObjectURL(X);se.setAttribute("href",U),se.setAttribute("download",`inventory-adjustments-${W().replace(/[/:,\s]/g,"-")}.csv`),se.style.visibility="hidden",document.body.appendChild(se),se.click(),document.body.removeChild(se)}},v=async(Z=!0)=>{try{a(!0),console.log(m());const X=G=>{let K=At.getProductById(G.productId),q=At.getStockByProductAndLocation(G.productId,l()),B=parseFloat(q?.averageCost+""),H=parseFloat(q?.quantity+"");return{product:{id:G.productId,label:K?.name,code:K?.code},productId:G?.productId,reason:"Physical Count Adjustment",notes:G?.notes||"Physical inventory adjustment",quantity:G?.variance,unitCost:B}},se=m().filter(G=>G.physicalCount!==null&&G.variance!==0).map(X);let U="ADJ_"+f5();const E=new Date().toISOString(),O={ssg_inventory_key:So(),invoiceId:U,referenceNumber:f5(),movementType:"adjustment",type:"adjustment",locationId:l(),items:se,products:se,generalNotes:"Physical inventory adjustment",description:"Physical Count Adjustment",invoice:U,store:l(),createdBy:"admin",createDate:E};console.log("Saving inventory bulkRequest:",O);const L=await Ki.addInventory(O);Z&&se.length>0&&_(),console.log("Saving inventory adjustments:",se),await new Promise(G=>setTimeout(G,1e3)),t.onClose()}catch(X){console.error("Failed to save inventory adjustments:",X)}finally{a(!1)}},z=zt(()=>l()==="all"?"All Locations":R().find(X=>X.id===l())?.name||"Unknown Location"),W=()=>new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),A=async()=>{await At.fecthInventory("prod"),await F()};Kn(async()=>{t.selectedLocationId&&d(t.selectedLocationId),A()});const I=()=>{const Z=window.open("","_blank");if(!Z){alert("Please allow pop-ups to print the counting sheet");return}const X=ee();Z.document.write(X),Z.document.close(),Z.onload=()=>{Z.print(),Z.onafterprint=()=>{Z.close()}}},ee=()=>{const Z=N().map((X,se)=>{const U=M(X.id,l()!=="all"?l():void 0);return`
        <tr>
          <td style="border: 1px solid #000; padding: 8px; text-align: center;">${se+1}</td>
          <td style="border: 1px solid #000; padding: 8px; font-family: monospace;">${X.sku}</td>
          <td style="border: 1px solid #000; padding: 8px;">
            <div style="font-weight: 500;">${X.name}</div>
            ${X.UPC?`<div style="font-size: 0.8em; color: #666;">UPC: ${X.UPC}</div>`:""}
          </td>
         
          <td style="border: 1px solid #000; padding: 8px; text-align: center;">${X.unitOfMeasure}</td>
          <td style="border: 1px solid #000; padding: 8px; text-align: center; font-weight: bold;">${U}</td>
          <td style="border: 1px solid #000; padding: 8px; text-align: center; background-color: #f9f9f9;"></td>
          <td style="border: 1px solid #000; padding: 8px;"></td>
        </tr>
      `}).join("");return`
      <!DOCTYPE html>
      <html>
      <head>
        <title> ${z()}_${u()}_${e("inventory.countingSheet","Inventory Counting Sheet")} - ${W()}</title>
        <style>
          @page {
            size: letter;
            margin: 0.5in 0.8in 0.5in 0.8in;
            @top-center {
              content: "${z()} | ${u()==="all"?e("inventory.allCategories","All Categories"):u()} | Page " counter(page);
              font-size: 10px;
              font-weight: bold;
              border-bottom: 1px solid #ccc;
              padding-bottom: 5px;
            }
          }
          body {
            font-family: Arial, sans-serif;
            font-size: 12px;
            margin: 0;
            padding: 0;
            position: relative;
          }
          .page-identifier {
            position: fixed;
            left: 5px;
            top: 50%;
            transform: rotate(-90deg) translateX(-50%);
            transform-origin: left center;
            background: #f0f0f0;
            padding: 5px 15px;
            border: 1px solid #ccc;
            font-weight: bold;
            font-size: 10px;
            color: #333;
            z-index: 100;
          }
          .page-identifier-right {
            position: fixed;
            right: 5px;
            top: 50%;
            transform: rotate(90deg) translateX(50%);
            transform-origin: right center;
            background: #f0f0f0;
            padding: 5px 15px;
            border: 1px solid #ccc;
            font-weight: bold;
            font-size: 10px;
            color: #333;
            z-index: 100;
          }
          h1 {
            text-align: center;
            margin: 0 0 10px 0;
            font-size: 22px;
            page-break-after: avoid;
          }
          .header-info {
            text-align: center;
            margin-bottom: 20px;
            background: #f8f8f8;
            padding: 10px;
            border: 2px solid #333;
            page-break-after: avoid;
          }
          .page-header {
            display: none;
            text-align: center;
            background: #e0e0e0;
            padding: 8px;
            border: 1px solid #333;
            margin-bottom: 10px;
            font-weight: bold;
            font-size: 11px;
          }
          table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
          }
          th {
            background-color: #333;
            color: white;
            padding: 8px;
            text-align: left;
            font-weight: bold;
            border: 1px solid #000;
          }
          .summary-table {
            width: 50%;
            margin: 20px auto;
            /*page-break-before: auto;*/
          }
          .signature-section {
            margin-top: 40px;
            display: flex;
            justify-content: space-between;
            page-break-before: auto;
          }
          .signature-box {
            width: 45%;
            text-align: center;
          }
          .signature-line {
            border-bottom: 1px solid #000;
            margin-bottom: 5px;
            height: 30px;
          }
          @media print {
            body { margin: 0; }
            .page-identifier, .page-identifier-right { display: block; }
            .page-header { display: block; }
            tr { page-break-inside: avoid; }
            thead { display: table-header-group; }
            tfoot { display: table-footer-group; }
            .header-info { page-break-after: avoid; }
            h1 { page-break-after: avoid; }
            table { page-break-before: auto; }
            /*.summary-table { page-break-before: always; }*/
            .signature-section { page-break-before: avoid; }
            
            /* Repeat headers on each page */
            @page :first {
              @top-center { content: none; }
            }
            
            /* Force page headers to show on continuation pages */
            tbody::before {
              content: "";
              display: block;
              height: 0;
            }
          }
        </style>
      </head>
      <body>
        <!-- Page identifiers for multi-page documents -->
        <div class="page-identifier-right">
          ${z()} - ${u()==="all"?e("inventory.allCategories","All Categories"):u()} - ${W()} 
        </div>
       
        
        <h1>${e("inventory.inventoryCountingSheetTitle","INVENTORY COUNTING SHEET")}</h1>
        <div class="header-info">
          <p><strong>${e("inventory.location","Location")}:</strong> ${z()}</p>
          <p><strong>${e("common.category","Category")}:</strong> ${u()==="all"?e("inventory.allCategories","All Categories"):u()}</p>
          <p><strong>${e("common.date","Date")}:</strong> ${W()}</p>
          <p style="margin-top: 10px;">
            <span style="margin-right: 30px;">${e("inventory.countedBy","Counted by")}: _________________________</span>
            <span>${e("inventory.verifiedBy","Verified by")}: _________________________</span>
          </p>
        </div>

        <!-- Page header for continuation pages (hidden on first page) -->
        <div class="page-header">
          ${z()} | ${u()==="all"?e("inventory.allCategories","All Categories"):u()} | ${W()} 
        </div>

        <table>
          <thead>
            <tr>
              <th style="width: 5%; text-align: center;">#</th>
              <th style="width: 12%;">${e("inventory.sku","SKU")}</th>
              <th style="width: 25%;">${e("inventory.productName","Product Name")}</th>
              <th style="width: 8%; text-align: center;">${e("inventory.unit","Unit")}</th>
              <th style="width: 10%; text-align: center;">${e("inventory.systemQty","System Qty")}</th>
              <th style="width: 12%; text-align: center; background-color: #f0f0f0;">${e("inventory.physicalCount","Physical Count")}</th>
              <th style="width: 28%;">${e("common.notes","Notes")}</th>
            </tr>
            <!-- Repeat header info row for clarity -->
            <tr style="background-color: #f8f8f8; font-size: 10px;">
              <td colspan="8" style="text-align: center; padding: 4px; border: 1px solid #000; font-weight: bold;">
                📍 ${z()} | 📂 ${u()==="all"?e("inventory.allCategories","All Categories"):u()} | 📅 ${W()}
              </td>
            </tr>
          </thead>
          <tbody>
            ${Z}
          </tbody>
        </table>
        
        <!-- Summary section with location/category context -->
        <div style="margin: 30px 0; padding: 15px; background: #f8f8f8;">
          <h3 style="text-align: center; margin: 0 0 15px 0; font-size: 16px;">
            ${e("inventory.summaryFor","SUMMARY FOR")}: ${z()} - ${u()==="all"?e("inventory.allCategories","All Categories"):u()}
          </h3>
          
          <table class="summary-table">
            <tr>
              <td style="border: 1px solid #000; padding: 8px; font-weight: bold; background-color: #f0f0f0;">
                ${e("inventory.totalProductsListed","Total Products Listed")}:
              </td>
              <td style="border: 1px solid #000; padding: 8px; text-align: center; font-weight: bold;">
                ${N().length}
              </td>
            </tr>
            <tr>
              <td style="border: 1px solid #000; padding: 8px; font-weight: bold; background-color: #f0f0f0;">
                ${e("inventory.itemsCounted","Items Counted")}:
              </td>
              <td style="border: 1px solid #000; padding: 8px; text-align: center;">
                ___________
              </td>
            </tr>
            <tr>
              <td style="border: 1px solid #000; padding: 8px; font-weight: bold; background-color: #f0f0f0;">
                ${e("inventory.discrepanciesFound","Discrepancies Found")}:
              </td>
              <td style="border: 1px solid #000; padding: 8px; text-align: center;">
                ___________
              </td>
            </tr>
          </table>
        </div>
        
        <div class="signature-section">
          <div class="signature-box">
            <div class="signature-line"></div>
            <p>${e("inventory.counterSignature","Counter Signature")}</p>
            <p>${e("common.date","Date")}: _______________</p>
          </div>
          <div class="signature-box">
            <div class="signature-line"></div>
            <p>${e("inventory.supervisorSignature","Supervisor Signature")}</p>
            <p>${e("common.date","Date")}: _______________</p>
          </div>
        </div>
      </body>
      </html>
    `};return T(We,{get when(){return t.isOpen},get children(){var Z=g9(),X=Z.firstChild,se=X.firstChild,U=se.firstChild;U.firstChild;var E=U.nextSibling;return Z.style.setProperty("position","fixed"),Z.style.setProperty("top","0"),Z.style.setProperty("left","0"),Z.style.setProperty("right","0"),Z.style.setProperty("bottom","0"),Z.style.setProperty("background","rgba(0, 0, 0, 0.5)"),Z.style.setProperty("z-index","1000"),Z.style.setProperty("display","flex"),Z.style.setProperty("align-items","center"),Z.style.setProperty("justify-content","center"),X.style.setProperty("background","white"),X.style.setProperty("border-radius","var(--border-radius)"),X.style.setProperty("padding","2rem"),X.style.setProperty("width","95%"),X.style.setProperty("height","95%"),X.style.setProperty("max-width","1400px"),X.style.setProperty("overflow-y","auto"),X.style.setProperty("position","relative"),se.style.setProperty("display","flex"),se.style.setProperty("justify-content","space-between"),se.style.setProperty("align-items","center"),se.style.setProperty("margin-bottom","2rem"),se.style.setProperty("border-bottom","1px solid var(--border-color)"),se.style.setProperty("padding-bottom","1rem"),U.style.setProperty("margin","0"),U.style.setProperty("font-size","1.5rem"),c(U,()=>e("inventory.physicalInventoryCount","Physical Inventory Count"),null),Qn(E,"click",t.onClose,!0),E.style.setProperty("background","none"),E.style.setProperty("border","none"),E.style.setProperty("font-size","1.5rem"),E.style.setProperty("cursor","pointer"),E.style.setProperty("padding","0.5rem"),c(X,T(We,{get when(){return P()==="setup"},get children(){var O=h9(),L=O.firstChild,G=L.nextSibling,K=G.nextSibling,q=K.nextSibling,B=q.firstChild,H=B.firstChild,Y=H.firstChild,te=H.nextSibling,oe=te.firstChild,pe=B.nextSibling,ne=pe.firstChild,Q=ne.firstChild,ce=ne.nextSibling,ue=ce.firstChild,de=pe.nextSibling,ge=de.firstChild,ye=ge.firstChild,fe=ge.nextSibling,Se=fe.firstChild,qe=Se.nextSibling,Oe=qe.nextSibling;return O.style.setProperty("text-align","center"),O.style.setProperty("padding","2rem"),O.style.setProperty("max-width","600px"),O.style.setProperty("margin","0 auto"),L.style.setProperty("font-size","3rem"),L.style.setProperty("margin-bottom","1rem"),G.style.setProperty("margin-bottom","1rem"),c(G,()=>e("inventory.setupPhysicalCount","Setup Physical Inventory Count")),K.style.setProperty("margin-bottom","2rem"),K.style.setProperty("color","var(--text-muted)"),c(K,()=>e("inventory.setupDescription","Configure your physical inventory count settings and begin the counting process.")),q.style.setProperty("display","grid"),q.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(200px, 1fr))"),q.style.setProperty("gap","1rem"),q.style.setProperty("margin-bottom","2rem"),q.style.setProperty("padding","1rem"),q.style.setProperty("background","var(--surface-color)"),q.style.setProperty("border-radius","var(--border-radius)"),q.style.setProperty("text-align","left"),H.style.setProperty("display","block"),H.style.setProperty("margin-bottom","0.5rem"),H.style.setProperty("font-weight","500"),c(H,()=>e("inventory.location","Location"),Y),te.addEventListener("change",Ie=>d(Ie.target.value)),te.style.setProperty("width","100%"),te.style.setProperty("padding","0.5rem"),te.style.setProperty("border","1px solid var(--border-color)"),te.style.setProperty("border-radius","var(--border-radius-sm)"),c(oe,()=>e("inventory.allLocations","All Locations")),c(te,T(_t,{get each(){return R()},children:Ie=>(()=>{var Be=dx();return c(Be,()=>Ie.name),be(()=>Be.value=Ie.id),Be})()}),null),ne.style.setProperty("display","block"),ne.style.setProperty("margin-bottom","0.5rem"),ne.style.setProperty("font-weight","500"),c(ne,()=>e("inventory.category","Category"),Q),ce.addEventListener("change",Ie=>h(Ie.target.value)),ce.style.setProperty("width","100%"),ce.style.setProperty("padding","0.5rem"),ce.style.setProperty("border","1px solid var(--border-color)"),ce.style.setProperty("border-radius","var(--border-radius-sm)"),c(ue,()=>e("products.allCategories","All Categories")),c(ce,T(_t,{get each(){return V()},children:Ie=>(()=>{var Be=dx();return Be.value=Ie,c(Be,Ie),Be})()}),null),ge.style.setProperty("display","block"),ge.style.setProperty("margin-bottom","0.5rem"),ge.style.setProperty("font-weight","500"),c(ge,()=>e("inventory.sortBy","Sort By"),ye),fe.addEventListener("change",Ie=>p(Ie.target.value)),fe.style.setProperty("width","100%"),fe.style.setProperty("padding","0.5rem"),fe.style.setProperty("border","1px solid var(--border-color)"),fe.style.setProperty("border-radius","var(--border-radius-sm)"),c(Se,()=>e("inventory.productName","Product Name")),c(qe,()=>e("inventory.sku","SKU")),c(Oe,()=>e("inventory.category","Category")),c(O,T(We,{get when(){return!i()},get fallback(){return(()=>{var Ie=v9(),Be=Ie.firstChild;return Ie.style.setProperty("padding","2rem"),c(Ie,()=>e("common.loading","Loading"),Be),Ie})()},get children(){return[(()=>{var Ie=d9(),Be=Ie.firstChild;return Be.firstChild,Ie.style.setProperty("padding","1rem"),Ie.style.setProperty("background","#fff3cd"),Ie.style.setProperty("border-radius","var(--border-radius-sm)"),Ie.style.setProperty("margin-bottom","2rem"),Be.style.setProperty("margin","0"),Be.style.setProperty("color","#856404"),c(Be,()=>e("inventory.countWillInclude","This count will include {{count}} products from {{location}} in {{category}} category.",{count:N().length,location:z(),category:u()==="all"?e("inventory.allCategories","all categories"):u()}),null),Ie})(),T(We,{get when(){return Ve(()=>u()!=="all")()&&l()!=="all"},get children(){var Ie=u9();return Ie.style.setProperty("display","grid"),Ie.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(150px, 1fr))"),Ie.style.setProperty("gap","1rem"),Ie.style.setProperty("margin-bottom","2rem"),Ie.style.setProperty("padding","1rem"),Ie.style.setProperty("background","var(--surface-color)"),Ie.style.setProperty("border-radius","var(--border-radius)"),c(Ie,T(We,{get when(){return Xt.hasPermission("physicalInventoryCountingForm")},get children(){return T(mt,{variant:"primary",size:"large",onClick:C,get disabled(){return i()||N().length===0},get children(){return["🚀 ",Ve(()=>e("inventory.startCounting","Start Physical Count"))]}})}}),null),c(Ie,T(mt,{variant:"primary",onClick:I,get disabled(){return i()},get children(){return["🖨️ ",Ve(()=>e("common.print","Print"))]}}),null),Ie}})]}}),null),be(()=>te.value=l()),be(()=>ce.value=u()),be(()=>fe.value=f()),O}}),null),c(X,T(We,{get when(){return P()==="counting"},get children(){var O=p9(),L=O.firstChild,G=L.nextSibling,K=G.firstChild,q=K.firstChild,B=q.nextSibling,H=K.nextSibling,Y=H.firstChild,te=Y.nextSibling,oe=H.nextSibling,pe=oe.firstChild,ne=pe.nextSibling,Q=oe.nextSibling,ce=Q.firstChild,ue=ce.firstChild,de=ce.nextSibling,ge=G.nextSibling,ye=ge.nextSibling,fe=ye.firstChild,Se=fe.firstChild,qe=Se.firstChild,Oe=qe.firstChild,Ie=Oe.nextSibling,Be=Ie.nextSibling,ke=Be.nextSibling,Ge=ke.nextSibling,et=Ge.nextSibling,ve=Se.nextSibling;return L.style.setProperty("display","grid"),L.style.setProperty("grid-template-columns","repeat(auto-fit)"),L.style.setProperty("gap","1rem"),L.style.setProperty("margin-bottom","2rem"),L.style.setProperty("padding","1rem"),L.style.setProperty("background","var(--surface-color)"),L.style.setProperty("border-radius","var(--border-radius)"),c(L,z),G.style.setProperty("display","grid"),G.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(150px, 1fr))"),G.style.setProperty("gap","1rem"),G.style.setProperty("margin-bottom","2rem"),G.style.setProperty("padding","1rem"),G.style.setProperty("background","var(--surface-color)"),G.style.setProperty("border-radius","var(--border-radius)"),K.style.setProperty("text-align","center"),q.style.setProperty("font-size","1.5rem"),q.style.setProperty("font-weight","700"),q.style.setProperty("color","var(--primary-color)"),c(q,()=>$().countedProducts),B.style.setProperty("font-size","0.875rem"),B.style.setProperty("color","var(--text-muted)"),c(B,()=>e("inventory.counted","Counted")),H.style.setProperty("text-align","center"),Y.style.setProperty("font-size","1.5rem"),Y.style.setProperty("font-weight","700"),Y.style.setProperty("color","#ff9800"),c(Y,()=>$().remainingProducts),te.style.setProperty("font-size","0.875rem"),te.style.setProperty("color","var(--text-muted)"),c(te,()=>e("inventory.remaining","Remaining")),oe.style.setProperty("text-align","center"),pe.style.setProperty("font-size","1.5rem"),pe.style.setProperty("font-weight","700"),pe.style.setProperty("color","#f44336"),c(pe,()=>$().variances),ne.style.setProperty("font-size","0.875rem"),ne.style.setProperty("color","var(--text-muted)"),c(ne,()=>e("inventory.variances","Variances")),Q.style.setProperty("text-align","center"),ce.style.setProperty("font-size","1.5rem"),ce.style.setProperty("font-weight","700"),c(ce,()=>Math.round($().countedProducts/$().totalProducts*100),ue),de.style.setProperty("font-size","0.875rem"),de.style.setProperty("color","var(--text-muted)"),c(de,()=>e("inventory.complete","Complete")),ge.style.setProperty("display","flex"),ge.style.setProperty("gap","1rem"),ge.style.setProperty("margin-bottom","2rem"),ge.style.setProperty("justify-content","center"),c(ge,T(mt,{variant:"outline",onClick:()=>g("setup"),get children(){return["⬅️ ",Ve(()=>e("common.back","Back to Setup"))]}}),null),c(ge,T(mt,{variant:"primary",onClick:()=>g("review"),get children(){return["📋 ",Ve(()=>e("inventory.reviewAdjustments","Review Adjustments"))]}}),null),ye.style.setProperty("border","1px solid var(--border-color)"),ye.style.setProperty("border-radius","var(--border-radius)"),ye.style.setProperty("overflow-x","auto"),fe.style.setProperty("width","100%"),fe.style.setProperty("border-collapse","collapse"),qe.style.setProperty("background","var(--surface-color)"),Oe.style.setProperty("padding","1rem"),Oe.style.setProperty("text-align","left"),Oe.style.setProperty("border-bottom","1px solid var(--border-color)"),c(Oe,()=>e("inventory.no","No")),Ie.style.setProperty("padding","1rem"),Ie.style.setProperty("text-align","left"),Ie.style.setProperty("border-bottom","1px solid var(--border-color)"),c(Ie,()=>e("inventory.product","Product")),Be.style.setProperty("padding","1rem"),Be.style.setProperty("text-align","center"),Be.style.setProperty("border-bottom","1px solid var(--border-color)"),c(Be,()=>e("inventory.systemQty","System Qty")),ke.style.setProperty("padding","1rem"),ke.style.setProperty("text-align","center"),ke.style.setProperty("border-bottom","1px solid var(--border-color)"),c(ke,()=>e("inventory.physicalCount","Physical Count")),Ge.style.setProperty("padding","1rem"),Ge.style.setProperty("text-align","center"),Ge.style.setProperty("border-bottom","1px solid var(--border-color)"),c(Ge,()=>e("inventory.variance","Variance")),et.style.setProperty("padding","1rem"),et.style.setProperty("text-align","left"),et.style.setProperty("border-bottom","1px solid var(--border-color)"),c(et,()=>e("common.notes","Notes")),c(ve,T(_t,{get each(){return m()},children:(De,He)=>T(S9,{get index(){return He()},updatePhysicalCount:k,entry:De,updateNotes:D})})),be(De=>(De=$().isComplete?"#4caf50":"#ff9800")!=null?ce.style.setProperty("color",De):ce.style.removeProperty("color")),O}}),null),c(X,T(We,{get when(){return P()==="review"},get children(){var O=m9(),L=O.firstChild,G=L.firstChild;G.firstChild;var K=G.nextSibling,q=L.nextSibling,B=q.firstChild,H=B.firstChild,Y=H.nextSibling,te=B.nextSibling,oe=te.firstChild,pe=oe.nextSibling,ne=te.nextSibling,Q=ne.firstChild,ce=Q.nextSibling,ue=q.nextSibling;return L.style.setProperty("text-align","center"),L.style.setProperty("margin-bottom","2rem"),G.style.setProperty("margin-bottom","1rem"),c(G,()=>e("inventory.reviewAndConfirm","Review and Confirm Adjustments"),null),K.style.setProperty("color","var(--text-muted)"),c(K,()=>e("inventory.reviewDescription","Review the inventory adjustments below and confirm to update your system.")),q.style.setProperty("display","grid"),q.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(200px, 1fr))"),q.style.setProperty("gap","1rem"),q.style.setProperty("margin-bottom","2rem"),q.style.setProperty("padding","1rem"),q.style.setProperty("background","var(--surface-color)"),q.style.setProperty("border-radius","var(--border-radius)"),B.style.setProperty("text-align","center"),H.style.setProperty("font-size","1.5rem"),H.style.setProperty("font-weight","700"),H.style.setProperty("color","#4caf50"),c(H,()=>$().positiveVariances),Y.style.setProperty("font-size","0.875rem"),Y.style.setProperty("color","var(--text-muted)"),c(Y,()=>e("inventory.stockIncreases","Stock Increases")),te.style.setProperty("text-align","center"),oe.style.setProperty("font-size","1.5rem"),oe.style.setProperty("font-weight","700"),oe.style.setProperty("color","#f44336"),c(oe,()=>$().negativeVariances),pe.style.setProperty("font-size","0.875rem"),pe.style.setProperty("color","var(--text-muted)"),c(pe,()=>e("inventory.stockDecreases","Stock Decreases")),ne.style.setProperty("text-align","center"),Q.style.setProperty("font-size","1.5rem"),Q.style.setProperty("font-weight","700"),Q.style.setProperty("color","var(--primary-color)"),c(Q,()=>$().variances),ce.style.setProperty("font-size","0.875rem"),ce.style.setProperty("color","var(--text-muted)"),c(ce,()=>e("inventory.totalAdjustments","Total Adjustments")),ue.style.setProperty("display","flex"),ue.style.setProperty("gap","1rem"),ue.style.setProperty("margin-bottom","2rem"),ue.style.setProperty("justify-content","center"),ue.style.setProperty("flex-wrap","wrap"),c(ue,T(mt,{variant:"outline",onClick:()=>g("counting"),get children(){return["⬅️ ",Ve(()=>e("common.back","Back to Counting"))]}}),null),c(ue,T(mt,{variant:"outline",onClick:_,get disabled(){return $().variances===0},get children(){return["📥 ",Ve(()=>e("inventory.downloadCSV","Download CSV"))]}}),null),c(ue,T(mt,{variant:"primary",onClick:v,get disabled(){return s()||$().variances===0},get children(){return Ve(()=>!!s())()?"💾 "+e("common.saving","Saving")+"...":"✅ "+e("inventory.confirmAdjustments","Confirm Adjustments")}}),null),c(O,T(We,{get when(){return $().variances>0},get children(){var de=f9(),ge=de.firstChild,ye=ge.firstChild,fe=ye.firstChild,Se=fe.firstChild,qe=Se.nextSibling,Oe=qe.nextSibling,Ie=Oe.nextSibling,Be=Ie.nextSibling,ke=ye.nextSibling;return de.style.setProperty("border","1px solid var(--border-color)"),de.style.setProperty("border-radius","var(--border-radius)"),de.style.setProperty("overflow-x","auto"),ge.style.setProperty("width","100%"),ge.style.setProperty("border-collapse","collapse"),fe.style.setProperty("background","var(--surface-color)"),Se.style.setProperty("padding","1rem"),Se.style.setProperty("text-align","left"),Se.style.setProperty("border-bottom","1px solid var(--border-color)"),c(Se,()=>e("inventory.product","Product")),qe.style.setProperty("padding","1rem"),qe.style.setProperty("text-align","center"),qe.style.setProperty("border-bottom","1px solid var(--border-color)"),c(qe,()=>e("inventory.systemQty","System Qty")),Oe.style.setProperty("padding","1rem"),Oe.style.setProperty("text-align","center"),Oe.style.setProperty("border-bottom","1px solid var(--border-color)"),c(Oe,()=>e("inventory.physicalCount","Physical Count")),Ie.style.setProperty("padding","1rem"),Ie.style.setProperty("text-align","center"),Ie.style.setProperty("border-bottom","1px solid var(--border-color)"),c(Ie,()=>e("inventory.adjustment","Adjustment")),Be.style.setProperty("padding","1rem"),Be.style.setProperty("text-align","left"),Be.style.setProperty("border-bottom","1px solid var(--border-color)"),c(Be,()=>e("common.notes","Notes")),c(ke,T(_t,{get each(){return m().filter(Ge=>Ge.variance!==0)},children:Ge=>(()=>{var et=b9(),ve=et.firstChild,De=ve.firstChild,He=De.nextSibling,Je=He.firstChild,Le=ve.nextSibling,Te=Le.firstChild,he=Le.nextSibling,Ne=he.firstChild,rt=he.nextSibling,re=rt.firstChild,Ue=rt.nextSibling,we=Ue.firstChild;return et.style.setProperty("border-bottom","1px solid var(--border-color)"),ve.style.setProperty("padding","1rem"),De.style.setProperty("font-weight","500"),c(De,()=>Ge.product.name),He.style.setProperty("font-size","0.875rem"),He.style.setProperty("color","var(--text-muted)"),c(He,()=>Ge.product.sku,Je),c(He,()=>Ge.product.category,null),Le.style.setProperty("padding","1rem"),Le.style.setProperty("text-align","center"),Te.style.setProperty("font-weight","600"),c(Te,()=>Ge.systemQuantity),he.style.setProperty("padding","1rem"),he.style.setProperty("text-align","center"),Ne.style.setProperty("font-weight","600"),c(Ne,()=>Ge.physicalCount),rt.style.setProperty("padding","1rem"),rt.style.setProperty("text-align","center"),re.style.setProperty("font-weight","700"),c(re,()=>Ge.variance>0?"+":"",null),c(re,()=>Ge.variance,null),Ue.style.setProperty("padding","1rem"),we.style.setProperty("font-size","0.875rem"),c(we,()=>Ge.notes||e("inventory.physicalCountAdjustment","Physical count adjustment")),be(xe=>{var je=Ge.variance>0?"#d4edda":"#f8d7da",$e=Ge.variance>0?"#4caf50":"#f44336";return je!==xe.e&&((xe.e=je)!=null?et.style.setProperty("background",je):et.style.removeProperty("background")),$e!==xe.t&&((xe.t=$e)!=null?re.style.setProperty("color",$e):re.style.removeProperty("color")),xe},{e:void 0,t:void 0}),et})()})),de}}),null),c(O,T(We,{get when(){return $().variances===0},get children(){var de=y9(),ge=de.firstChild,ye=ge.nextSibling,fe=ye.nextSibling;return de.style.setProperty("text-align","center"),de.style.setProperty("padding","3rem"),de.style.setProperty("background","var(--surface-color)"),de.style.setProperty("border-radius","var(--border-radius)"),ge.style.setProperty("font-size","3rem"),ge.style.setProperty("margin-bottom","1rem"),ye.style.setProperty("margin-bottom","0.5rem"),c(ye,()=>e("inventory.perfectCount","Perfect Count!")),fe.style.setProperty("color","var(--text-muted)"),c(fe,()=>e("inventory.noVariances","No variances found. Your physical count matches the system exactly.")),de}}),null),O}}),null),Z}})},S9=t=>{const{t:e}=pr(),[r,n]=Ae(""),[i,o]=Ae("");let{entry:s,updatePhysicalCount:a,updateNotes:l,index:d}=t;Kn(()=>{o(s?.notes),n(s?.physicalCount)});const u=()=>{let h=document.getElementById(`physicalCountInput_${d+2}`);if(console.log(dd(r()),!h),dd(r())&&!h){a(s?.productId,r()===""?null:parseFloat(r()));return}if(dd(r())&&h){h.focus(),a(s?.productId,r()===""?null:parseFloat(r()));return}};return(()=>{var h=P9(),f=h.firstChild,p=f.firstChild,m=f.nextSibling,x=m.firstChild,P=x.nextSibling,g=P.firstChild,F=g.nextSibling;F.nextSibling;var V=m.nextSibling,N=V.firstChild,R=V.nextSibling,M=R.firstChild,C=R.nextSibling,k=C.firstChild,D=C.nextSibling,$=D.firstChild;return h.style.setProperty("border-bottom","1px solid var(--border-color)"),f.style.setProperty("padding","1rem"),f.style.setProperty("text-align","center"),p.style.setProperty("font-weight","600"),c(p,d+1),m.style.setProperty("padding","1rem"),x.style.setProperty("font-weight","500"),c(x,()=>s?.product.name),P.style.setProperty("font-size","0.875rem"),P.style.setProperty("color","var(--text-muted)"),c(P,()=>s?.product.sku,g),c(P,()=>s?.product.category,F),c(P,()=>s?.product.unitOfMeasure,null),V.style.setProperty("padding","1rem"),V.style.setProperty("text-align","center"),N.style.setProperty("font-weight","600"),c(N,()=>s?.systemQuantity),R.style.setProperty("padding","1rem"),R.style.setProperty("text-align","center"),M.addEventListener("blur",()=>{u()}),M.$$keydown=w=>{w.keyCode===13&&u(),w.keyCode===27&&u(),w.keyCode},M.$$input=w=>{const _=w.target.value;n(_)},ir(M,"id",`physicalCountInput_${d+1}`),ir(M,"tabindex",d),M.style.setProperty("width","100px"),M.style.setProperty("padding","0.5rem"),M.style.setProperty("border","1px solid var(--border-color)"),M.style.setProperty("border-radius","var(--border-radius-sm)"),M.style.setProperty("text-align","center"),C.style.setProperty("padding","1rem"),C.style.setProperty("text-align","center"),k.style.setProperty("font-weight","600"),c(k,()=>s?.variance>0?"+":"",null),c(k,()=>s?.variance||"—",null),D.style.setProperty("padding","1rem"),$.addEventListener("blur",w=>{l(s?.productId,i())}),$.$$keydown=w=>{w.keyCode===13&&l(s?.productId,i()),w.keyCode===27&&l(s?.productId,i()),w.keyCode===9&&l(s?.productId,i())},$.$$input=w=>{const _=w.target.value;o(_)},$.style.setProperty("width","200px"),$.style.setProperty("padding","0.5rem"),$.style.setProperty("border","1px solid var(--border-color)"),$.style.setProperty("border-radius","var(--border-radius-sm)"),be(w=>{var _=s?.physicalCount!==null?s?.variance!==0?"#fff3cd":"#d4edda":"transparent",v=s?.variance>0?"#4caf50":s?.variance<0?"#f44336":"var(--text-muted)",z=e("inventory.addNotes","Add notes...");return _!==w.e&&((w.e=_)!=null?h.style.setProperty("background",_):h.style.removeProperty("background")),v!==w.t&&((w.t=v)!=null?k.style.setProperty("color",v):k.style.removeProperty("color")),z!==w.a&&ir($,"placeholder",w.a=z),w},{e:void 0,t:void 0,a:void 0}),be(()=>M.value=r()||""),be(()=>$.value=i()||""),h})()};tr(["click","input","keydown"]);function w9(t,e=300,r=!1){let n,i;const o=()=>{n!==void 0&&(clearTimeout(n),n=void 0),i=void 0},s=()=>{n!==void 0&&i!==void 0&&(clearTimeout(n),n=void 0,t(...i),i=void 0)},a=(...l)=>{i=l,n!==void 0&&clearTimeout(n),r&&n===void 0&&t(...l),n=window.setTimeout(()=>{r||t(...l),n=void 0,i=void 0},e)};return Ta(()=>{o()}),{debounced:a,cancel:o,flush:s}}function C9(t,e=300){const[r,n]=Ae(!1);let i;const o=async d=>{if(i&&i.abort(),!d.trim()){n(!1);return}i=new AbortController,n(!0);try{await t(d)}catch(u){u instanceof Error&&u.name!=="AbortError"&&console.error("Search error:",u)}finally{i.signal.aborted||n(!1)}},{debounced:s,cancel:a}=w9(o,e,!1),l=()=>{a(),i&&i.abort(),n(!1)};return Ta(()=>{l()}),{search:s,isSearching:r,cancel:l}}var ux=le("<div>"),_9=le("<div><h3></h3><div><span></span><span></span></div><div><span></span><span></span></div><div><span></span><span>"),A9=le("<div><h3></h3><div><div><div><span></span><span></span></div><div><span></span><span></span></div></div><div><div><span></span><span></span></div><div><span></span><span>%"),k9=le("<div><h4>"),E9=le("<div><h3></h3><div><div><div><span></span><span> </span></div><div><span></span><span> </span></div></div><div><div><span></span><span> </span></div><div><span></span><span>"),T9=le("<div><h3></h3><div><span></span><span></span></div><div><span></span><span>"),hx=le("<div><h3>"),I9=le("<div><div><div><h2></h2><div>SKU: <!> • </div></div><div></div></div><div><button></button><button></button><button></button></div><div>"),N9=le("<span>✓ "),R9=le("<span>✗ "),D9=le("<div><div><span><span> • </span></span><span> </span></div><div>: <!> • <!>: "),L9=le("<div>📦 "),$9=le("<div>Ref: "),F9=le("<div><div><div><span></span><span></span><span></span></div><div><span></span></div></div><div><div> </div><div>"),M9=le("<div><h4></h4><div></div><div>"),O9=le("<div><div><h4></h4><div></div><div></div></div><div><h4></h4><div></div><div></div></div><div><h4></h4><div></div><div> <!> × </div></div><div><h4></h4><div></div><div></div></div><div><h4></h4><div></div><div>Min: <!> • Max: ");const B9=t=>{const{t:e}=pr(),[r,n]=Ae("details"),i=zt(()=>{if(!t.product)return null;const D=At.getTotalStockByProduct(t.product.id),$=At.getStockByProduct(t.product.id),w=D<=t.product.minStockLevel,_=D===0,v=D>=t.product.maxStockLevel;return{total:D,byLocation:$,status:_?"out":w?"low":v?"over":"good",statusText:_?e("products.outOfStock","Out of Stock"):w?e("products.lowStock","Low Stock"):v?e("products.overStock","Over Stock"):e("products.inStock","In Stock")}}),o=D=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(D),s=D=>new Date(D).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),a=zt(()=>!t.product||t.product.unitCost===0?0:((t.product.sellingPrice-t.product.unitCost)/t.product.unitCost*100).toFixed(2)),l=zt(()=>t.product?At.movements.filter(D=>D.productId===t.product.id).sort((D,$)=>new Date($.createdDate).getTime()-new Date(D.createdDate).getTime()):[]),d=zt(()=>{if(!t.product)return null;const D=l(),$=i(),w=new Date;w.setDate(w.getDate()-30);const _=D.filter(z=>new Date(z.createdDate)>=w),v=D.reduce((z,W)=>{const A=W.productId===t.product.id?W:null;return z+(A?A.quantity*A.unitCost:0)},0);return{recentMovements:D.length,movements30Days:_.length,totalValue:($?.total||0)*t.product.unitCost,averageMovementValue:D.length>0?v/D.length:0,lastMovementDate:D.length>0?D[0].createdDate:null}}),u={"margin-bottom":"2rem"},h={display:"flex","justify-content":"space-between","align-items":"center",padding:"0.75rem 0","border-bottom":"1px solid var(--border-color)"},f={"font-weight":"500",color:"var(--text-muted)","font-size":"0.875rem"},p={"font-weight":"400",color:"var(--text-primary)","font-size":"1rem"},m=D=>({in:"📦",out:"📤",transfer:"🔄",adjustment:"⚖️"})[D]||"📋";function x(D){return{in:{bg:"#e8f5e8",color:"#2d7d32"},out:{bg:"#ffebee",color:"#d32f2f"},transfer:{bg:"#e3f2fd",color:"#1976d2"},adjustment:{bg:"#fff3e0",color:"#f57c00"}}[D]||{bg:"#f5f5f5",color:"#666"}}const P=D=>({padding:"0.25rem 0.75rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"500","text-transform":"uppercase","letter-spacing":"0.5px",background:x(D).bg,color:x(D).color}),g=D=>{const $={good:{background:"#d4edda",color:"#155724"},low:{background:"#fff3cd",color:"#856404"},out:{background:"#f8d7da",color:"#721c24"},over:{background:"#cce5ff",color:"#004085"}};return{display:"inline-block",padding:"0.25rem 0.75rem","border-radius":"9999px","font-size":"0.875rem","font-weight":"500",...$[D]||$.good}},F={display:"grid","grid-template-columns":"1fr 1fr",gap:"1rem"},V={background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)",padding:"1rem","margin-bottom":"0.75rem"},N={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"1.5rem","padding-bottom":"1rem","border-bottom":"2px solid var(--border-color)"},R={display:"flex","border-bottom":"1px solid var(--border-color)","margin-bottom":"1.5rem"},M=D=>({padding:"0.75rem 1.5rem",background:"none",border:"none","border-bottom":D?"2px solid var(--primary-color)":"2px solid transparent",color:D?"var(--primary-color)":"var(--text-muted)","font-weight":D?"600":"400",cursor:"pointer",transition:"all 0.2s","font-size":"0.875rem"}),C={display:"flex","justify-content":"space-between","align-items":"center",padding:"0.75rem",background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","margin-bottom":"0.5rem"},k={background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)",padding:"1.5rem","margin-bottom":"1rem"};return T(Pi,{get isOpen(){return t.isOpen},get onClose(){return t.onClose},get title(){return e("products.productDetails","Product Details")},size:"large",get children(){return T(We,{get when(){return t.product},get fallback(){return(()=>{var D=ux();return D.style.setProperty("text-align","center"),D.style.setProperty("padding","2rem"),D.style.setProperty("color","var(--text-muted)"),c(D,()=>e("products.noProductSelected","No product selected")),D})()},children:D=>(()=>{var $=I9(),w=$.firstChild,_=w.firstChild,v=_.firstChild,z=v.nextSibling,W=z.firstChild,A=W.nextSibling;A.nextSibling;var I=_.nextSibling,ee=w.nextSibling,Z=ee.firstChild,X=Z.nextSibling,se=X.nextSibling,U=ee.nextSibling;return c($,()=>JSON.stringify(D),w),y(w,N),v.style.setProperty("margin","0"),v.style.setProperty("font-size","1.5rem"),v.style.setProperty("margin-bottom","0.25rem"),c(v,()=>D().name),z.style.setProperty("color","var(--text-muted)"),c(z,()=>D().sku,A),c(z,()=>D().category,null),c(I,()=>i()?.statusText),y(ee,R),Z.$$click=()=>n("details"),c(Z,()=>e("products.details","Details")),X.$$click=()=>n("movements"),c(X,()=>e("products.movements","Movements")),se.$$click=()=>n("analytics"),c(se,()=>e("products.analytics","Analytics")),c($,T(We,{get when(){return r()==="details"},get children(){return[(()=>{var E=_9(),O=E.firstChild,L=O.nextSibling,G=L.firstChild,K=G.nextSibling,q=L.nextSibling,B=q.firstChild,H=B.nextSibling,Y=q.nextSibling,te=Y.firstChild,oe=te.nextSibling;return O.style.setProperty("margin-bottom","1rem"),O.style.setProperty("font-size","1.1rem"),c(O,()=>e("products.basicInformation","Basic Information")),c(G,()=>e("products.description","Description")),c(K,()=>D().description||e("common.notAvailable","N/A")),c(B,()=>e("products.unitOfMeasure","Unit of Measure")),c(H,()=>D().unitOfMeasure),c(te,()=>e("products.status","Status")),c(oe,(()=>{var pe=Ve(()=>!!D().isActive);return()=>pe()?(()=>{var ne=N9();return ne.firstChild,ne.style.setProperty("color","#2e7d32"),c(ne,()=>e("common.active","Active"),null),ne})():(()=>{var ne=R9();return ne.firstChild,ne.style.setProperty("color","#d32f2f"),c(ne,()=>e("common.inactive","Inactive"),null),ne})()})()),be(pe=>{var ne=u,Q=h,ce=f,ue=p,de=h,ge=f,ye=p,fe=h,Se=f,qe=p;return pe.e=y(E,ne,pe.e),pe.t=y(L,Q,pe.t),pe.a=y(G,ce,pe.a),pe.o=y(K,ue,pe.o),pe.i=y(q,de,pe.i),pe.n=y(B,ge,pe.n),pe.s=y(H,ye,pe.s),pe.h=y(Y,fe,pe.h),pe.r=y(te,Se,pe.r),pe.d=y(oe,qe,pe.d),pe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),E})(),(()=>{var E=A9(),O=E.firstChild,L=O.nextSibling,G=L.firstChild,K=G.firstChild,q=K.firstChild,B=q.nextSibling,H=K.nextSibling,Y=H.firstChild,te=Y.nextSibling,oe=G.nextSibling,pe=oe.firstChild,ne=pe.firstChild,Q=ne.nextSibling,ce=pe.nextSibling,ue=ce.firstChild,de=ue.nextSibling,ge=de.firstChild;return O.style.setProperty("margin-bottom","1rem"),O.style.setProperty("font-size","1.1rem"),c(O,()=>e("products.pricingInformation","Pricing Information")),c(q,()=>e("products.unitCost","Unit Cost")),c(B,()=>o(D().unitCost)),c(Y,()=>e("products.sellingPrice","Selling Price")),c(te,()=>o(D().sellingPrice)),c(ne,()=>e("products.profit","Profit")),c(Q,()=>o(D().sellingPrice-D().unitCost)),c(ue,()=>e("products.profitMargin","Profit Margin")),c(de,a,ge),be(ye=>{var fe=u,Se=F,qe=h,Oe=f,Ie=p,Be=h,ke=f,Ge=p,et=h,ve=f,De=p,He=h,Je=f,Le=p;return ye.e=y(E,fe,ye.e),ye.t=y(L,Se,ye.t),ye.a=y(K,qe,ye.a),ye.o=y(q,Oe,ye.o),ye.i=y(B,Ie,ye.i),ye.n=y(H,Be,ye.n),ye.s=y(Y,ke,ye.s),ye.h=y(te,Ge,ye.h),ye.r=y(pe,et,ye.r),ye.d=y(ne,ve,ye.d),ye.l=y(Q,De,ye.l),ye.u=y(ce,He,ye.u),ye.c=y(ue,Je,ye.c),ye.w=y(de,Le,ye.w),ye},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0}),E})(),(()=>{var E=E9(),O=E.firstChild,L=O.nextSibling,G=L.firstChild,K=G.firstChild,q=K.firstChild,B=q.nextSibling,H=B.firstChild,Y=K.nextSibling,te=Y.firstChild,oe=te.nextSibling,pe=oe.firstChild,ne=G.nextSibling,Q=ne.firstChild,ce=Q.firstChild,ue=ce.nextSibling,de=ue.firstChild,ge=Q.nextSibling,ye=ge.firstChild,fe=ye.nextSibling;return O.style.setProperty("margin-bottom","1rem"),O.style.setProperty("font-size","1.1rem"),c(O,()=>e("products.stockInformation","Stock Information")),c(q,()=>e("products.totalStock","Total Stock")),c(B,()=>i()?.total||0,H),c(B,()=>D().unitOfMeasure,null),c(te,()=>e("products.minStockLevel","Min Stock Level")),c(oe,()=>D().minStockLevel,pe),c(oe,()=>D().unitOfMeasure,null),c(ce,()=>e("products.maxStockLevel","Max Stock Level")),c(ue,()=>D().maxStockLevel,de),c(ue,()=>D().unitOfMeasure,null),c(ye,()=>e("products.stockValue","Stock Value")),c(fe,()=>o((i()?.total||0)*D().unitCost)),c(E,T(We,{get when(){return Ve(()=>!!i()?.byLocation)()&&i().byLocation.length>0},get children(){var Se=k9(),qe=Se.firstChild;return Se.style.setProperty("margin-top","1.5rem"),qe.style.setProperty("margin-bottom","1rem"),qe.style.setProperty("font-size","1rem"),c(qe,()=>e("products.stockByLocation","Stock by Location")),c(Se,()=>i().byLocation.map(Oe=>(()=>{var Ie=D9(),Be=Ie.firstChild,ke=Be.firstChild,Ge=ke.firstChild;Ge.firstChild;var et=ke.nextSibling,ve=et.firstChild,De=Be.nextSibling,He=De.firstChild,Je=He.nextSibling,Le=Je.nextSibling,Te=Le.nextSibling;return Te.nextSibling,y(Ie,V),Be.style.setProperty("display","flex"),Be.style.setProperty("justify-content","space-between"),Be.style.setProperty("align-items","center"),ke.style.setProperty("font-weight","500"),ke.style.setProperty("color","var(--primary-color)"),c(ke,()=>Oe.locationId,Ge),Ge.style.setProperty("font-weight","500"),Ge.style.setProperty("color","var(--text-muted)"),c(Ge,()=>Oe.locationName,null),et.style.setProperty("font-weight","600"),c(et,()=>Oe.quantity,ve),c(et,()=>D().unitOfMeasure,null),De.style.setProperty("margin-top","0.5rem"),De.style.setProperty("font-size","0.875rem"),De.style.setProperty("color","var(--text-muted)"),c(De,()=>e("products.available","Available"),He),c(De,()=>Oe.availableQuantity,Je),c(De,()=>e("products.reserved","Reserved"),Te),c(De,()=>Oe.reservedQuantity,null),be(he=>(he=Oe.quantity>0?"var(--primary-color)":"var(--text-muted)")!=null?et.style.setProperty("color",he):et.style.removeProperty("color")),Ie})()),null),Se}}),null),be(Se=>{var qe=u,Oe=F,Ie=h,Be=f,ke=p,Ge=h,et=f,ve=p,De=h,He=f,Je=p,Le=h,Te=f,he=p;return Se.e=y(E,qe,Se.e),Se.t=y(L,Oe,Se.t),Se.a=y(K,Ie,Se.a),Se.o=y(q,Be,Se.o),Se.i=y(B,ke,Se.i),Se.n=y(Y,Ge,Se.n),Se.s=y(te,et,Se.s),Se.h=y(oe,ve,Se.h),Se.r=y(Q,De,Se.r),Se.d=y(ce,He,Se.d),Se.l=y(ue,Je,Se.l),Se.u=y(ge,Le,Se.u),Se.c=y(ye,Te,Se.c),Se.w=y(fe,he,Se.w),Se},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0}),E})(),(()=>{var E=T9(),O=E.firstChild,L=O.nextSibling,G=L.firstChild,K=G.nextSibling,q=L.nextSibling,B=q.firstChild,H=B.nextSibling;return O.style.setProperty("margin-bottom","1rem"),O.style.setProperty("font-size","1.1rem"),c(O,()=>e("products.timestamps","Timestamps")),c(G,()=>e("common.createdDate","Created Date")),c(K,()=>s(D().createdDate)),c(B,()=>e("common.lastModified","Last Modified")),c(H,()=>s(D().lastModified)),be(Y=>{var te=u,oe=h,pe=f,ne=p,Q=h,ce=f,ue=p;return Y.e=y(E,te,Y.e),Y.t=y(L,oe,Y.t),Y.a=y(G,pe,Y.a),Y.o=y(K,ne,Y.o),Y.i=y(q,Q,Y.i),Y.n=y(B,ce,Y.n),Y.s=y(H,ue,Y.s),Y},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),E})()]}}),U),c($,T(We,{get when(){return r()==="movements"},get children(){var E=hx(),O=E.firstChild;return O.style.setProperty("margin-bottom","1rem"),O.style.setProperty("font-size","1.1rem"),c(O,()=>e("products.recentMovements","Recent Movements")),c(E,T(We,{get when(){return l().length>0},get fallback(){return(()=>{var L=L9();return L.firstChild,L.style.setProperty("text-align","center"),L.style.setProperty("padding","2rem"),L.style.setProperty("color","var(--text-muted)"),L.style.setProperty("background","var(--surface-color)"),L.style.setProperty("border-radius","var(--border-radius-sm)"),L.style.setProperty("border","1px solid var(--border-color)"),c(L,()=>e("products.noMovements","No movements found for this product"),null),L})()},get children(){return T(_t,{get each(){return l()},children:L=>{const G=L.productId===D().id?L:null;if(!G)return null;let K=At.getLocationById(L.locationId);return(()=>{var q=F9(),B=q.firstChild,H=B.firstChild,Y=H.firstChild,te=Y.nextSibling,oe=te.nextSibling,pe=H.nextSibling,ne=pe.firstChild,Q=B.nextSibling,ce=Q.firstChild,ue=ce.firstChild,de=ce.nextSibling;return y(q,C),H.style.setProperty("font-weight","600"),H.style.setProperty("margin-bottom","0.25rem"),Y.style.setProperty("font-size","1.2rem"),c(Y,()=>m(L.movementType)),te.style.setProperty("padding","0 6px"),c(oe,()=>L.movementType),pe.style.setProperty("font-size","0.875rem"),pe.style.setProperty("color","var(--text-muted)"),c(pe,()=>` ${s(L?.createdDate)} • `,ne),ne.style.setProperty("font-size","0.875rem"),ne.style.setProperty("font-weight","600"),ne.style.setProperty("color","var(--primary-color)"),c(ne,()=>L?.locationId),c(pe,()=>` • ${K?.name}`,null),c(B,T(We,{get when(){return L.referenceNumber},get children(){var ge=$9();return ge.firstChild,ge.style.setProperty("font-size","0.75rem"),ge.style.setProperty("color","var(--text-muted)"),ge.style.setProperty("margin-top","0.25rem"),c(ge,()=>L?.referenceNumber,null),ge}}),null),Q.style.setProperty("text-align","right"),ce.style.setProperty("font-weight","600"),ce.style.setProperty("font-size","1rem"),c(ce,()=>L?.movementType==="in"?"+":"",ue),c(ce,()=>G.quantity,ue),c(ce,()=>D().unitOfMeasure,null),de.style.setProperty("font-size","0.875rem"),de.style.setProperty("color","var(--text-muted)"),c(de,()=>o(G.unitCost)),be(ge=>{var ye=P(L.movementType),fe=L?.movementType==="in"?"#2e7d32":"#d32f2f";return ge.e=y(oe,ye,ge.e),fe!==ge.t&&((ge.t=fe)!=null?ce.style.setProperty("color",fe):ce.style.removeProperty("color")),ge},{e:void 0,t:void 0}),q})()}})}}),null),be(L=>y(E,u,L)),E}}),U),c($,T(We,{get when(){return r()==="analytics"},get children(){var E=hx(),O=E.firstChild;return O.style.setProperty("margin-bottom","1rem"),O.style.setProperty("font-size","1.1rem"),c(O,()=>e("products.analytics","Analytics")),c(E,T(We,{get when(){return d()},get fallback(){return(()=>{var L=ux();return L.style.setProperty("text-align","center"),L.style.setProperty("padding","2rem"),L.style.setProperty("color","var(--text-muted)"),c(L,()=>e("products.noAnalytics","No analytics data available")),L})()},children:L=>(()=>{var G=O9(),K=G.firstChild,q=K.firstChild,B=q.nextSibling,H=B.nextSibling,Y=K.nextSibling,te=Y.firstChild,oe=te.nextSibling,pe=oe.nextSibling,ne=Y.nextSibling,Q=ne.firstChild,ce=Q.nextSibling,ue=ce.nextSibling,de=ue.firstChild,ge=de.nextSibling;ge.nextSibling;var ye=ne.nextSibling,fe=ye.firstChild,Se=fe.nextSibling,qe=Se.nextSibling,Oe=ye.nextSibling,Ie=Oe.firstChild,Be=Ie.nextSibling,ke=Be.nextSibling,Ge=ke.firstChild,et=Ge.nextSibling;return et.nextSibling,q.style.setProperty("margin","0 0 0.5rem 0"),q.style.setProperty("color","var(--primary-color)"),c(q,()=>e("products.totalMovements","Total Movements")),B.style.setProperty("font-size","1.5rem"),B.style.setProperty("font-weight","600"),c(B,()=>L().recentMovements),H.style.setProperty("font-size","0.875rem"),H.style.setProperty("color","var(--text-muted)"),H.style.setProperty("margin-top","0.25rem"),c(H,()=>e("products.allTime","All time")),te.style.setProperty("margin","0 0 0.5rem 0"),te.style.setProperty("color","var(--primary-color)"),c(te,()=>e("products.last30Days","Last 30 Days")),oe.style.setProperty("font-size","1.5rem"),oe.style.setProperty("font-weight","600"),c(oe,()=>L().movements30Days),pe.style.setProperty("font-size","0.875rem"),pe.style.setProperty("color","var(--text-muted)"),pe.style.setProperty("margin-top","0.25rem"),c(pe,()=>e("products.movements","movements")),Q.style.setProperty("margin","0 0 0.5rem 0"),Q.style.setProperty("color","var(--primary-color)"),c(Q,()=>e("products.currentValue","Current Stock Value")),ce.style.setProperty("font-size","1.5rem"),ce.style.setProperty("font-weight","600"),c(ce,()=>o(L().totalValue)),ue.style.setProperty("font-size","0.875rem"),ue.style.setProperty("color","var(--text-muted)"),ue.style.setProperty("margin-top","0.25rem"),c(ue,()=>i()?.total||0,de),c(ue,()=>D().unitOfMeasure,ge),c(ue,()=>o(D().unitCost),null),fe.style.setProperty("margin","0 0 0.5rem 0"),fe.style.setProperty("color","var(--primary-color)"),c(fe,()=>e("products.avgMovementValue","Avg Movement Value")),Se.style.setProperty("font-size","1.5rem"),Se.style.setProperty("font-weight","600"),c(Se,()=>o(L().averageMovementValue)),qe.style.setProperty("font-size","0.875rem"),qe.style.setProperty("color","var(--text-muted)"),qe.style.setProperty("margin-top","0.25rem"),c(qe,()=>e("products.perMovement","per movement")),c(G,T(We,{get when(){return L().lastMovementDate},get children(){var ve=M9(),De=ve.firstChild,He=De.nextSibling,Je=He.nextSibling;return De.style.setProperty("margin","0 0 0.5rem 0"),De.style.setProperty("color","var(--primary-color)"),c(De,()=>e("products.lastMovement","Last Movement")),He.style.setProperty("font-size","1.25rem"),He.style.setProperty("font-weight","600"),c(He,()=>s(L().lastMovementDate)),Je.style.setProperty("font-size","0.875rem"),Je.style.setProperty("color","var(--text-muted)"),Je.style.setProperty("margin-top","0.25rem"),c(Je,()=>e("products.mostRecent","Most recent activity")),be(Le=>y(ve,k,Le)),ve}}),Oe),Ie.style.setProperty("margin","0 0 0.5rem 0"),Ie.style.setProperty("color","var(--primary-color)"),c(Ie,()=>e("products.stockStatus","Stock Status")),Be.style.setProperty("font-size","1.25rem"),Be.style.setProperty("font-weight","600"),c(Be,()=>i()?.statusText),ke.style.setProperty("font-size","0.875rem"),ke.style.setProperty("color","var(--text-muted)"),ke.style.setProperty("margin-top","0.25rem"),c(ke,()=>D().minStockLevel,et),c(ke,()=>D().maxStockLevel,null),be(ve=>{var De=F,He=k,Je=k,Le=k,Te=k,he=k;return ve.e=y(G,De,ve.e),ve.t=y(K,He,ve.t),ve.a=y(Y,Je,ve.a),ve.o=y(ne,Le,ve.o),ve.i=y(ye,Te,ve.i),ve.n=y(Oe,he,ve.n),ve},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),G})()}),null),be(L=>y(E,u,L)),E}}),U),U.style.setProperty("display","flex"),U.style.setProperty("gap","1rem"),U.style.setProperty("justify-content","flex-end"),U.style.setProperty("margin-top","2rem"),c(U,T(mt,{variant:"secondary",get onClick(){return t.onClose},get children(){return e("common.close","Close")}}),null),c(U,T(We,{get when(){return t.onEdit},get children(){return T(mt,{variant:"primary",get onClick(){return t.onEdit},get children(){return e("common.edit","Edit")}})}}),null),be(E=>{var O=g(i()?.status||"good"),L=M(r()==="details"),G=M(r()==="movements"),K=M(r()==="analytics");return E.e=y(I,O,E.e),E.t=y(Z,L,E.t),E.a=y(X,G,E.a),E.o=y(se,K,E.o),E},{e:void 0,t:void 0,a:void 0,o:void 0}),$})()})}})};tr(["click"]);var j9=le("<div>🔄"),V9=le("<button type=button>×"),z9=le("<div>⚠️ "),px=le("<div>"),U9=le("<div><div><input type=text autocomplete=off>"),q9=le("<div><div><div><div></div><div><span>: </span><span>•</span><span></span><span>•</span><span></span></div></div><div><div> </div><div>"),H9=le("<span>⚠️ ");const W9=t=>{const{t:e}=pr(),[r,n]=Ae(""),[i,o]=Ae(!1),[s,a]=Ae(null),[l,d]=Ae([]),[u,h]=Ae(!1),[f,p]=Ae(-1),[m,x]=Ae(null),P=t.searchDelay||300,g=t.maxResults||900,F=async L=>{if(!L.trim()||L.trim().length<3){d([]),t.onSearchResults?.([]);return}try{o(!0),a(null);try{const G=await Ki.getProducts(L),K=Object.keys(G),q=H=>{let Y=G;return{id:H,name:Y[H].name,businessId:Y[H].businessId,sku:Y[H].code,UPC:Y[H].UPC,numCode:Y[H].codeN,category:Y[H].category,unitCost:Y[H].unitCost||0,unitOfMeasure:Y[H].unitOfMeasure,minStockLevel:Y[H].minStockLevel,maxStockLevel:Y[H].maxStockLevel,isActive:Y[H].isActive,description:Y[H].description||"",createdDate:Y[H].createdAt||new Date().toISOString(),lastModified:Y[H].updatedAt||new Date().toISOString()}},B=K.map(q);d(B),At.updProduct(B),t.onSearchResults?.(B)}catch(G){console.warn("API search failed, using local fallback:",G),a("API search failed, showing local results");const K=At.getActiveProducts().filter(q=>q.name.toLowerCase().includes(L.toLowerCase())||q.sku.toLowerCase().includes(L.toLowerCase())||q.category.toLowerCase().includes(L.toLowerCase())).slice(0,g);d(K),t.onSearchResults?.(K)}}catch(G){const K=G instanceof Error?G.message:"Search failed";a(K),d([]),t.onSearchResults?.([])}finally{o(!1)}},V=L=>{const K=L.target.value;n(K),a(null),t.showResults!==!1&&h(!0),m()&&clearTimeout(m());const q=setTimeout(()=>{F(K)},P);x(q)},N=L=>{n(L.name),h(!1),p(-1),t.onProductSelect?.(L)},R=L=>{if(!(!u()||l().length===0))switch(L.key){case"ArrowDown":L.preventDefault(),p(G=>Math.min(G+1,l().length-1));break;case"ArrowUp":L.preventDefault(),p(G=>Math.max(G-1,-1));break;case"Enter":L.preventDefault(),f()>=0&&l()[f()]&&N(l()[f()]);break;case"Escape":h(!1),p(-1);break}},M=()=>{t.showResults!==!1&&l().length>0&&h(!0)},C=()=>{setTimeout(()=>{h(!1),p(-1)},150)},k=()=>{n(""),d([]),a(null),h(!1),p(-1),t.onSearchResults?.([]),m()&&(clearTimeout(m()),x(null))},D=L=>At.stockLevels.filter(G=>G.productId===L).reduce((G,K)=>G+K.quantity,0),$=L=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(L),w={position:"relative",width:"100%",...t.style},_={position:"relative",display:"flex","align-items":"center"},v={width:"100%",padding:"0.75rem","padding-right":r()?"2.5rem":"0.75rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"1rem",background:"var(--surface-color)",cursor:t.disabled?"not-allowed":"text",opacity:t.disabled?"0.6":"1",outline:"none",transition:"border-color 0.2s ease"},z={position:"absolute",right:"0.5rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--text-muted)","font-size":"1.2rem","line-height":"1",padding:"0.25rem","border-radius":"50%",transition:"all 0.2s ease"},W={position:"absolute",right:r()?"2.5rem":"0.75rem",top:"50%",transform:"translateY(-50%)","font-size":"0.875rem",color:"var(--text-muted)"},A={position:"absolute",top:"100%",left:"0",right:"0","z-index":"1000","max-height":"300px","overflow-y":"auto",background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","box-shadow":"0 4px 12px rgba(0,0,0,0.15)","margin-top":"2px"},I=L=>({padding:"0.75rem",cursor:"pointer","border-bottom":"1px solid var(--border-color)",background:L?"var(--strip-color)":"transparent",transition:"background-color 0.2s ease"}),ee={display:"flex","justify-content":"space-between","align-items":"center"},Z={flex:"1"},X={"font-weight":"500","margin-bottom":"0.25rem",color:"var(--text-primary)"},se={"font-size":"0.875rem",color:"var(--text-muted)",display:"flex",gap:"0.5rem"},U={"text-align":"right","font-size":"0.875rem"},E={padding:"1rem","text-align":"center",color:"var(--text-muted)","font-style":"italic"},O={padding:"0.5rem 1rem",background:"#fff3cd",color:"#856404","border-bottom":"1px solid var(--border-color)","font-size":"0.875rem"};return(()=>{var L=U9(),G=L.firstChild,K=G.firstChild;return K.addEventListener("blur",C),K.addEventListener("focus",M),K.$$keydown=R,K.$$input=V,c(G,T(We,{get when(){return i()},get children(){var q=j9();return be(B=>y(q,W,B)),q}}),null),c(G,T(We,{get when(){return Ve(()=>!!r())()&&!i()},get children(){var q=V9();return q.addEventListener("mouseleave",B=>{B.currentTarget.style.background="none",B.currentTarget.style.color="var(--text-muted)"}),q.addEventListener("mouseenter",B=>{B.currentTarget.style.background="var(--border-color)",B.currentTarget.style.color="var(--text-primary)"}),q.$$click=k,be(B=>{var H=z,Y=e("common.clear","Clear search");return B.e=y(q,H,B.e),Y!==B.t&&ir(q,"title",B.t=Y),B},{e:void 0,t:void 0}),q}}),null),c(L,T(We,{get when(){return u()&&t.showResults!==!1},get children(){var q=px();return c(q,T(We,{get when(){return s()},get children(){var B=z9();return B.firstChild,y(B,O),c(B,s,null),B}}),null),c(q,T(We,{get when(){return l().length>0},get fallback(){return Ve(()=>!!(r()&&!i()))()&&(()=>{var B=px();return y(B,E),c(B,()=>e("inventory.noProductsFound","No products found matching your search.")),B})()},get children(){return T(_t,{get each(){return l()},children:(B,H)=>{const Y=D(B.id),te=Y<=B.minStockLevel;return(()=>{var oe=q9(),pe=oe.firstChild,ne=pe.firstChild,Q=ne.firstChild,ce=Q.nextSibling,ue=ce.firstChild,de=ue.firstChild,ge=ue.nextSibling,ye=ge.nextSibling,fe=ye.nextSibling,Se=fe.nextSibling,qe=ne.nextSibling,Oe=qe.firstChild,Ie=Oe.firstChild,Be=Oe.nextSibling;return oe.addEventListener("mouseenter",()=>p(H())),oe.$$click=()=>N(B),y(pe,ee),y(ne,Z),y(Q,X),c(Q,()=>B.name),y(ce,se),c(ue,()=>e("inventory.sku","SKU"),de),c(ue,()=>B.sku,null),c(ye,()=>B.category),c(Se,()=>$(B.unitCost)),y(qe,U),Oe.style.setProperty("font-weight","600"),(te?"#f44336":"var(--text-primary)")!=null?Oe.style.setProperty("color",te?"#f44336":"var(--text-primary)"):Oe.style.removeProperty("color"),c(Oe,Y,Ie),c(Oe,()=>B.unitOfMeasure,null),Be.style.setProperty("color","var(--text-muted)"),c(Be,()=>te?(()=>{var ke=H9();return ke.firstChild,ke.style.setProperty("color","#f44336"),c(ke,()=>e("inventory.lowStock","Low Stock"),null),ke})():e("inventory.inStock","In Stock")),be(ke=>y(oe,I(H()===f()),ke)),oe})()}})}}),null),be(B=>y(q,A,B)),q}}),null),be(q=>{var B=w,H=_,Y=v,te=t.placeholder||e("inventory.searchProducts","Search products by name, SKU, or category..."),oe=t.disabled;return q.e=y(L,B,q.e),q.t=y(G,H,q.t),q.a=y(K,Y,q.a),te!==q.o&&ir(K,"placeholder",q.o=te),oe!==q.i&&(K.disabled=q.i=oe),q},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),be(()=>K.value=r()),L})()};tr(["input","keydown","click"]);var G9=le("<div><div><h2></h2><div><div>"),K9=le("<div><span>"),Y9=le("<span>🔍 "),X9=le("<div><div><div><div><h3></h3><span></span></div><div></div><div>: </div></div><div><div></div><div> • <!>: </div><div>: "),Z9=le("<div><div>:</div><div>"),J9=le("<div>: "),Q9=le("<div><div><span>:</span><select><option value=10>10</option><option value=20>20</option><option value=50>50</option><option value=100>100</option></select></div><div><div><span></span><input type=number min=1><span> </span></div></div><div>");const qA=()=>{const{t}=pr(),[e,r]=Ae(""),[n,i]=Ae(""),[o,s]=Ae([]),[a,l]=Ae(!1),[d,u]=Ae(null),[h,f]=Ae(!1),[p,m]=Ae(!1),[x,P]=Ae(!1),[g,F]=Ae(null),[V,N]=Ae(!1),[R,M]=Ae([]),[C,k]=Ae(!1),[D,$]=Ae(1),[w,_]=Ae(20);Kn(async()=>{await v()});const v=async()=>{try{l(!0),u(null);try{const L=await KP.getAll();s(L.map(G=>({id:G.id||`prod-${Date.now()}-${Math.random()}`,name:G.productName||G.name||"Unknown Product",sku:G.sku||G.productCode||"",description:G.description||"",category:G.category||"General",unitOfMeasure:G.unitOfMeasure||"pcs",unitCost:parseFloat(G.unitCost||G.cost||"0"),sellingPrice:parseFloat(G.sellingPrice||G.price||"0"),minStockLevel:parseInt(G.minStockLevel||"0"),maxStockLevel:parseInt(G.maxStockLevel||"100"),isActive:G.isActive!==!1,createdDate:G.createdDate||new Date().toISOString(),lastModified:G.lastModified||new Date().toISOString(),businessId:G.businessId||"YB100423253156428"})))}catch(L){console.warn("API failed, using local store:",L),s(At.products)}}catch(L){u(L instanceof Error?L.message:"Failed to load products")}finally{l(!1)}},z=async()=>{try{l(!0),u(null);try{const L=await Ki.getProducts("prod"),G=Object.keys(L),K=B=>{let Y=L[B];return{id:Y.id,name:Y.name,businessId:Y.businessId,sku:Y.code,numCode:Y.codeN,category:Y.category,unitCost:Y.unitCost||0,unitOfMeasure:Y.unitOfMeasure,minStockLevel:Y.minStockLevel,maxStockLevel:Y.maxStockLevel,isActive:Y.isActive,description:Y.description||"",createdDate:Y.createdAt||new Date().toISOString(),lastModified:Y.updatedAt||new Date().toISOString(),sellingPrice:parseFloat(Y.sellingPrice||Y.price||"0")}},q=G.map(K);s(q)}catch(L){console.warn("API failed, using local store:",L),s(At.products)}}catch(L){u(L instanceof Error?L.message:"Failed to load products")}finally{l(!1)}},{cancel:W}=C9(async L=>{if(!L.trim()){await v();return}try{u(null);const G=await KP.getAll(L);s(G.map(K=>({id:K.id||`prod-${Date.now()}-${Math.random()}`,name:K.productName||K.name||"Unknown Product",sku:K.sku||K.productCode||"",description:K.description||"",category:K.category||"General",unitOfMeasure:K.unitOfMeasure||"pcs",unitCost:parseFloat(K.unitCost||K.cost||"0"),sellingPrice:parseFloat(K.sellingPrice||K.price||"0"),minStockLevel:parseInt(K.minStockLevel||"0"),maxStockLevel:parseInt(K.maxStockLevel||"100"),isActive:K.isActive!==!1,createdDate:K.createdDate||new Date().toISOString(),lastModified:K.lastModified||new Date().toISOString(),businessId:K.businessId||"YB100423253156428"})))}catch(G){u(G instanceof Error?G.message:"Search failed");const K=At.products.filter(q=>q.name.toLowerCase().includes(L.toLowerCase())||q.sku.toLowerCase().includes(L.toLowerCase())||q.category.toLowerCase().includes(L.toLowerCase()));s(K)}},300);Ta(()=>{W()}),zt(()=>{let L=o();return n()&&(L=L.filter(G=>G.category===n())),L}),zt(()=>[...new Set(o().map(G=>G.category))].sort()),zt(()=>{const L=o().filter(q=>q.isActive),G=o().length,K=o().filter(q=>At.getTotalStockByProduct(q.id)===0);return{total:G,active:L.length,outOfStock:K.length}});const A=L=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(L),I={padding:"1.5rem",background:"var(--surface-color)","border-radius":"var(--border-radius)",border:"1px solid var(--border-color)",cursor:"pointer",transition:"all 0.2s ease"},ee={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"1rem"},Z=L=>({padding:"0.25rem 0.75rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"500","text-transform":"uppercase","letter-spacing":"0.5px",background:L?"#ffebee":"#e8f5e8",color:L?"#d32f2f":"#2d7d32"});zt(()=>{const L=At.products||[],G=At.movements||[],K=At.stockLevels||[],q=At.getLowStockProducts(),B=L?.length||0,H=L?.filter(oe=>oe.isActive).length,Y=K.reduce((oe,pe)=>oe*1+pe.quantity*1*pe.averageCost*1,0),te=G?.filter(oe=>{const pe=new Date(oe.createdDate),ne=new Date;return pe.getMonth()===ne.getMonth()&&pe.getFullYear()===ne.getFullYear()}).length;return{totalProducts:B,activeProducts:H,lowStockProducts:q.length,totalStockValue:Y,totalMovementsThisMonth:te,totalLocations:At.locations.length,activeLocations:At.getActiveLocations().length}});const X=zt(()=>At.products.map(L=>{const G=At.getStockByProduct(L.id),K=At.getTotalStockByProduct(L.id),q=At.getLastLocationByProduct(L.id);return{...L,totalStock:K,stockByLocation:G,lastLocation:q,isLowStock:K<=L.minStockLevel}})),se=zt(()=>R().map(L=>{const G=At.getStockByProduct(L.id),K=At.getTotalStockByProduct(L.id),q=At.getLastLocationByProduct(L.id);return{...L,totalStock:K,stockByLocation:G,lastLocation:q,isLowStock:K<=L.minStockLevel}})),U=zt(()=>{const L=C()?se():X(),G=(D()-1)*w(),K=G+w();return L.slice(G,K)}),E=zt(()=>{const L=C()?se():X();return Math.ceil(L.length/w())}),O=L=>{F(L),m(!0)};return T(Bo,{get title(){return t("products.title","Products")},get children(){return[(()=>{var L=G9(),G=L.firstChild,K=G.firstChild,q=K.nextSibling,B=q.firstChild;return L.style.setProperty("display","flex"),L.style.setProperty("justify-content","space-between"),L.style.setProperty("align-items","flex-start"),L.style.setProperty("margin-bottom","1.5rem"),L.style.setProperty("flex-wrap","wrap"),L.style.setProperty("gap","1rem"),G.style.setProperty("flex","1"),G.style.setProperty("min-width","300px"),K.style.setProperty("margin","0 0 1rem 0"),K.style.setProperty("font-size","1.5rem"),c(K,()=>t("inventory.products")),q.style.setProperty("display","flex"),q.style.setProperty("gap","1rem"),q.style.setProperty("align-items","center"),q.style.setProperty("flex-wrap","wrap"),B.style.setProperty("flex","1"),B.style.setProperty("min-width","250px"),c(B,T(W9,{onSearchResults:H=>{M(H),k(H.length>0)},get placeholder(){return t("inventory.searchProductsStock","Search products and check stock levels...")},showResults:!1,maxResults:20})),c(q,T(mt,{variant:"outline",onClick:()=>{z(),k(!1)},get children(){return["🔄 ",Ve(()=>t("common.showAll","Show All"))]}}),null),c(L,T(We,{get when(){return Xt.hasPermission("read_write")},get children(){return T(mt,{variant:"primary",onClick:()=>N(!0),get children(){return["➕ ",Ve(()=>t("inventory.addProduct"))]}})}}),null),L})(),(()=>{var L=K9(),G=L.firstChild;return L.style.setProperty("margin-bottom","1rem"),L.style.setProperty("font-size","0.875rem"),L.style.setProperty("color","var(--text-muted)"),L.style.setProperty("display","flex"),L.style.setProperty("justify-content","space-between"),L.style.setProperty("align-items","center"),c(G,(()=>{var K=Ve(()=>!!C());return()=>K()?`${t("inventory.searchResults","Search Results")}: ${se().length} ${t("common.products","products")}`:`${t("inventory.totalProducts","Total Products")}: ${X().length} ${t("common.products","products")}`})()),c(L,(()=>{var K=Ve(()=>!!C());return()=>K()&&(()=>{var q=Y9();return q.firstChild,q.style.setProperty("color","var(--primary-color)"),c(q,()=>t("inventory.filtered","Filtered view"),null),q})()})(),null),L})(),T(_t,{get each(){return U()},children:L=>(()=>{var G=X9(),K=G.firstChild,q=K.firstChild,B=q.firstChild,H=B.firstChild,Y=H.nextSibling,te=B.nextSibling,oe=te.nextSibling,pe=oe.firstChild,ne=q.nextSibling,Q=ne.firstChild,ce=Q.nextSibling,ue=ce.firstChild,de=ue.nextSibling;de.nextSibling;var ge=ce.nextSibling,ye=ge.firstChild;return G.$$click=()=>O(L),G.addEventListener("mouseleave",fe=>{fe.currentTarget.style.transform="translateY(0)",fe.currentTarget.style.boxShadow="none"}),G.addEventListener("mouseenter",fe=>{fe.currentTarget.style.transform="translateY(-2px)",fe.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.1)"}),y(G,I),y(K,ee),B.style.setProperty("display","flex"),B.style.setProperty("align-items","center"),B.style.setProperty("gap","0.5rem"),B.style.setProperty("margin-bottom","0.5rem"),H.style.setProperty("margin","0"),H.style.setProperty("font-size","1.1rem"),c(H,()=>L.name),c(Y,(()=>{var fe=Ve(()=>!!L.isLowStock);return()=>fe()?t("inventory.lowStockAlert"):t("inventory.inStock")})()),te.style.setProperty("font-size","0.875rem"),te.style.setProperty("color","var(--text-muted)"),c(te,()=>L.sku,null),c(te,()=>L.UPC?" • "+L.UPC:"",null),c(te,()=>L.category?" • "+L.category:"",null),oe.style.setProperty("font-size","0.875rem"),oe.style.setProperty("color","var(--text-muted)"),c(oe,()=>t("inventory.lastSeen"),pe),c(oe,()=>L.lastLocation?.name||t("inventory.noMovements"),null),ne.style.setProperty("text-align","right"),Q.style.setProperty("font-size","1.25rem"),Q.style.setProperty("font-weight","700"),Q.style.setProperty("color","var(--primary-color)"),c(Q,()=>L.totalStock),ce.style.setProperty("font-size","0.875rem"),ce.style.setProperty("color","var(--text-muted)"),c(ce,()=>L.unitOfMeasure,ue),c(ce,()=>t("inventory.min"),de),c(ce,()=>L.minStockLevel,null),ge.style.setProperty("font-size","0.875rem"),ge.style.setProperty("color","var(--text-muted)"),c(ge,()=>t("inventory.cost"),ye),c(ge,()=>A(L.unitCost),null),c(G,(()=>{var fe=Ve(()=>L?.stockByLocation?.length>0);return()=>fe()&&(()=>{var Se=Z9(),qe=Se.firstChild,Oe=qe.firstChild,Ie=qe.nextSibling;return Se.style.setProperty("margin-top","1rem"),qe.style.setProperty("font-weight","500"),qe.style.setProperty("margin-bottom","0.5rem"),qe.style.setProperty("font-size","0.875rem"),c(qe,()=>t("inventory.stockByLocation"),Oe),Ie.style.setProperty("display","flex"),Ie.style.setProperty("flex-wrap","wrap"),Ie.style.setProperty("gap","0.5rem"),c(Ie,T(_t,{get each(){return L.stockByLocation},children:Be=>{const ke=At.getLocationById(Be.locationId);return(()=>{var Ge=J9(),et=Ge.firstChild;return Ge.style.setProperty("padding","0.25rem 0.5rem"),Ge.style.setProperty("background","var(--background-color)"),Ge.style.setProperty("border-radius","var(--border-radius-sm)"),Ge.style.setProperty("font-size","0.75rem"),Ge.style.setProperty("border","1px solid var(--border-color)"),c(Ge,()=>ke?.name,et),c(Ge,()=>Be.quantity,null),Ge})()}})),Se})()})(),null),be(fe=>y(Y,Z(L.isLowStock),fe)),G})()}),Ve(()=>Ve(()=>E()>1)()&&(()=>{var L=Q9(),G=L.firstChild,K=G.firstChild,q=K.firstChild,B=K.nextSibling,H=G.nextSibling,Y=H.firstChild,te=Y.firstChild,oe=te.nextSibling,pe=oe.nextSibling,ne=pe.firstChild,Q=H.nextSibling;return L.style.setProperty("display","flex"),L.style.setProperty("justify-content","space-between"),L.style.setProperty("align-items","center"),L.style.setProperty("margin-top","2rem"),L.style.setProperty("padding","1rem"),L.style.setProperty("background","var(--surface-color)"),L.style.setProperty("border-radius","var(--border-radius)"),L.style.setProperty("border","1px solid var(--border-color)"),G.style.setProperty("display","flex"),G.style.setProperty("align-items","center"),G.style.setProperty("gap","0.5rem"),K.style.setProperty("font-size","0.875rem"),K.style.setProperty("color","var(--text-muted)"),c(K,()=>t("common.showPerPage","Show per page"),q),B.addEventListener("change",ce=>{_(parseInt(ce.target.value)),$(1)}),B.style.setProperty("padding","0.25rem 0.5rem"),B.style.setProperty("border","1px solid var(--border-color)"),B.style.setProperty("border-radius","var(--border-radius-sm)"),B.style.setProperty("background","var(--background-color)"),B.style.setProperty("cursor","pointer"),H.style.setProperty("display","flex"),H.style.setProperty("align-items","center"),H.style.setProperty("gap","0.5rem"),c(H,T(mt,{variant:"outline",size:"sm",onClick:()=>$(1),get disabled(){return D()===1},get children(){return t("common.first","First")}}),Y),c(H,T(mt,{variant:"outline",size:"sm",onClick:()=>$(ce=>Math.max(1,ce-1)),get disabled(){return D()===1},get children(){return t("common.previous","Previous")}}),Y),Y.style.setProperty("display","flex"),Y.style.setProperty("align-items","center"),Y.style.setProperty("gap","0.25rem"),te.style.setProperty("font-size","0.875rem"),c(te,()=>t("common.page","Page")),oe.addEventListener("change",ce=>{const ue=parseInt(ce.target.value);ue>=1&&ue<=E()&&$(ue)}),oe.style.setProperty("width","60px"),oe.style.setProperty("padding","0.25rem 0.5rem"),oe.style.setProperty("border","1px solid var(--border-color)"),oe.style.setProperty("border-radius","var(--border-radius-sm)"),oe.style.setProperty("text-align","center"),oe.style.setProperty("font-size","0.875rem"),pe.style.setProperty("font-size","0.875rem"),c(pe,()=>t("common.of","of"),ne),c(pe,E,null),c(H,T(mt,{variant:"outline",size:"sm",onClick:()=>$(ce=>Math.min(E(),ce+1)),get disabled(){return D()===E()},get children(){return t("common.next","Next")}}),null),c(H,T(mt,{variant:"outline",size:"sm",onClick:()=>$(E()),get disabled(){return D()===E()},get children(){return t("common.last","Last")}}),null),Q.style.setProperty("font-size","0.875rem"),Q.style.setProperty("color","var(--text-muted)"),c(Q,()=>{const ce=C()?se():X(),ue=(D()-1)*w()+1,de=Math.min(D()*w(),ce.length);return t("common.showingXofY","Showing {{start}}-{{end}} of {{total}}",{start:ue,end:de,total:ce.length})}),be(()=>ir(oe,"max",E())),be(()=>B.value=w()),be(()=>oe.value=D()),L})()),T(r2,{get isOpen(){return h()},onClose:()=>f(!1),onProductAdded:()=>{v()}}),T(B9,{get isOpen(){return p()},onClose:()=>{m(!1),F(null)},get product(){return g()},onEdit:()=>{m(!1),P(!0)}})]}})};tr(["click"]);var eM=le("<div><div></div><div>"),tM=le("<div><div><img></div><div>X</div><div><div><h2></h2><div></div></div><div><span></span><span></span></div><div><span></span><span></span></div><div><span></span><span></span></div><div><span></span><span></span></div><div><span></span><span>"),rM=le("<div>"),nM=le("<div><div>📦</div><h3></h3><p>"),iM=le("<div><div>"),oM=le("<div>✓"),sM=le("<div><div><img loading=lazy></div><div><div></div><div> • </div><div></div><div>",!0,!1,!1);const aM=t=>{const{t:e}=pr(),[r,n]=Ae(null),[i,o]=Ae([]),[s,a]=Ae(!1),l=I=>{n(I),t.onProductSelect?.(I)},d=()=>{n(null),t.onProductSelect?.(null),o([]),a(!1)},u=I=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(I),h=()=>"YABABYSSolution",f=()=>"https://qvamarkets.s3.us-east-2.amazonaws.com/V2_images/7258/",p=I=>{if(I.productImageUrl)return f()+h()+"/"+I?.productImageUrl;const ee={Electronics:"https://via.placeholder.com/400x300/4F46E5/FFFFFF?text=Electronics",Furniture:"https://via.placeholder.com/400x300/059669/FFFFFF?text=Furniture",Food:"https://via.placeholder.com/400x300/DC2626/FFFFFF?text=Food",Clothing:"https://via.placeholder.com/400x300/7C3AED/FFFFFF?text=Clothing",Tools:"https://via.placeholder.com/400x300/EA580C/FFFFFF?text=Tools",General:"https://via.placeholder.com/400x300/6B7280/FFFFFF?text=Product"};return ee[I.category]||ee.General},m={padding:"2rem"},x={"max-width":"600px",margin:"0 auto 2rem",position:"relative"},P={display:"grid","grid-template-columns":"repeat(auto-fill, minmax(250px, 1fr))",gap:"1.5rem","margin-bottom":"2rem"},g={background:"var(--surface-color)","border-radius":"var(--border-radius)",overflow:"hidden","box-shadow":"var(--shadow-sm)",border:"1px solid var(--border-color)",cursor:"pointer",transition:"all 0.3s ease"},F={position:"relative",width:"100%",height:"200px",overflow:"hidden",background:"#f5f5f5"},V={width:"100%",height:"100%","object-fit":"cover",transition:"transform 0.3s ease"},N={padding:"1rem"},R={"font-size":"1rem","font-weight":"600","margin-bottom":"0.5rem",color:"var(--text-primary)",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"},M={"font-size":"0.875rem",color:"var(--text-muted)","margin-bottom":"0.25rem"},C={"font-size":"1.25rem","font-weight":"700",color:"var(--primary-color)","margin-top":"0.5rem"},k={display:"flex",gap:"2rem",background:"var(--surface-color)","border-radius":"var(--border-radius)",padding:"2rem","box-shadow":"var(--shadow-md)","margin-bottom":"2rem",position:"relative"},D={width:"400px",height:"300px","border-radius":"var(--border-radius)",overflow:"hidden",background:"#f5f5f5"},$={flex:"1",display:"flex","flex-direction":"column",gap:"1rem"},w={display:"flex","justify-content":"space-between","padding-bottom":"0.5rem","border-bottom":"1px solid var(--border-light)"},_={"font-weight":"500",color:"var(--text-muted)"},v={"font-weight":"600",color:"var(--text-primary)"},z=I=>({display:"inline-block",padding:"0.25rem 0.75rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"600",background:"#d4edda",color:"#155724"}),W={"text-align":"center",padding:"4rem 2rem",color:"var(--text-muted)"},A={"font-size":"3rem","margin-bottom":"1rem",opacity:"0.5"};return(()=>{var I=iM(),ee=I.firstChild;return y(I,m),c(ee,T(cg,{onChange:Z=>{console.log(Z);let X=Z;a(!0),l(X)},get placeholder(){return e("inventory.searchProductsImages","Search products to view images...")}})),c(I,T(We,{get when(){return r()&&t.showDetails!==!1},get children(){var Z=tM(),X=Z.firstChild,se=X.firstChild,U=X.nextSibling,E=U.nextSibling,O=E.firstChild,L=O.firstChild,G=L.nextSibling,K=O.nextSibling,q=K.firstChild,B=q.nextSibling,H=K.nextSibling,Y=H.firstChild,te=Y.nextSibling,oe=H.nextSibling,pe=oe.firstChild,ne=pe.nextSibling,Q=oe.nextSibling,ce=Q.firstChild,ue=ce.nextSibling,de=Q.nextSibling,ge=de.firstChild,ye=ge.nextSibling;return y(Z,k),y(X,D),se.style.setProperty("width","100%"),se.style.setProperty("height","100%"),se.style.setProperty("object-fit","contain"),se.style.setProperty("aspect-ratio","1 / 1"),U.$$click=()=>{d()},U.style.setProperty("position","absolute"),U.style.setProperty("top","0.5rem"),U.style.setProperty("right","0.5rem"),U.style.setProperty("color","#3d3d3d"),U.style.setProperty("border-radius","50%"),U.style.setProperty("width","2rem"),U.style.setProperty("height","2rem"),U.style.setProperty("display","flex"),U.style.setProperty("align-items","center"),U.style.setProperty("justify-content","center"),U.style.setProperty("font-size","1.25rem"),U.style.setProperty("box-shadow","var(--shadow-sm)"),U.style.setProperty("cursor","pointer"),y(E,$),L.style.setProperty("margin","0 0 0.5rem 0"),L.style.setProperty("font-size","1.5rem"),c(L,()=>r().name),c(G,()=>e("products.inStock","In Stock")),c(q,()=>e("products.sku","SKU")),c(B,()=>r().sku),c(Y,()=>e("inventory.category","Category")),c(te,()=>r().category),c(pe,()=>e("inventory.unitOfMeasure","Unit")),c(ne,()=>r().unitOfMeasure),c(ce,()=>e("inventory.unitCost","Cost")),c(ue,()=>u(r().unitCost)),c(ge,()=>e("inventory.UPC","UPC")),c(ye,()=>r().UPC),c(E,T(We,{get when(){return r().description},get children(){var fe=eM(),Se=fe.firstChild,qe=Se.nextSibling;return fe.style.setProperty("margin-top","1rem"),c(Se,()=>e("common.description","Description")),qe.style.setProperty("margin-top","0.5rem"),qe.style.setProperty("color","var(--text-primary)"),c(qe,()=>r().description),be(Oe=>y(Se,_,Oe)),fe}}),null),be(fe=>{var Se=p(r()),qe=r().name,Oe=z(),Ie=w,Be=_,ke=v,Ge=w,et=_,ve=v,De=w,He=_,Je=v,Le=w,Te=_,he=v,Ne=w,rt=_,re=v;return Se!==fe.e&&ir(se,"src",fe.e=Se),qe!==fe.t&&ir(se,"alt",fe.t=qe),fe.a=y(G,Oe,fe.a),fe.o=y(K,Ie,fe.o),fe.i=y(q,Be,fe.i),fe.n=y(B,ke,fe.n),fe.s=y(H,Ge,fe.s),fe.h=y(Y,et,fe.h),fe.r=y(te,ve,fe.r),fe.d=y(oe,De,fe.d),fe.l=y(pe,He,fe.l),fe.u=y(ne,Je,fe.u),fe.c=y(Q,Le,fe.c),fe.w=y(ce,Te,fe.w),fe.m=y(ue,he,fe.m),fe.f=y(de,Ne,fe.f),fe.y=y(ge,rt,fe.y),fe.g=y(ye,re,fe.g),fe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0}),Z}}),null),c(I,T(We,{get when(){return i().length>0},get children(){var Z=rM();return y(Z,P),c(Z,T(_t,{get each(){return i()},children:X=>(()=>{var se=sM(),U=se.firstChild,E=U.firstChild,O=U.nextSibling,L=O.firstChild,G=L.nextSibling,K=G.firstChild,q=G.nextSibling,B=q.nextSibling;return se.addEventListener("mouseleave",H=>{H.currentTarget.style.transform="translateY(0)",H.currentTarget.style.boxShadow="var(--shadow-sm)";const Y=H.currentTarget.querySelector("img");Y&&(Y.style.transform="scale(1)")}),se.addEventListener("mouseenter",H=>{H.currentTarget.style.transform="translateY(-4px)",H.currentTarget.style.boxShadow="var(--shadow-lg)";const Y=H.currentTarget.querySelector("img");Y&&(Y.style.transform="scale(1.05)")}),se.$$click=()=>l(X),y(se,g),c(U,T(We,{get when(){return X===r()},get children(){var H=oM();return H.style.setProperty("position","absolute"),H.style.setProperty("top","0.5rem"),H.style.setProperty("right","0.5rem"),H.style.setProperty("background","var(--primary-color)"),H.style.setProperty("color","white"),H.style.setProperty("border-radius","50%"),H.style.setProperty("width","2rem"),H.style.setProperty("height","2rem"),H.style.setProperty("display","flex"),H.style.setProperty("align-items","center"),H.style.setProperty("justify-content","center"),H.style.setProperty("font-size","1.25rem"),H}}),null),y(O,N),c(L,()=>X.name),c(G,()=>X.sku,K),c(G,()=>X.category,null),c(q,()=>X.unitOfMeasure),y(B,C),c(B,()=>u(X.sellingPrice)),be(H=>{var Y=F,te=p(X),oe=X.name,pe=V,ne=R,Q=X.name,ce=M,ue=M;return H.e=y(U,Y,H.e),te!==H.t&&ir(E,"src",H.t=te),oe!==H.a&&ir(E,"alt",H.a=oe),H.o=y(E,pe,H.o),H.i=y(L,ne,H.i),Q!==H.n&&ir(L,"title",H.n=Q),H.s=y(G,ce,H.s),H.h=y(q,ue,H.h),H},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),se})()})),Z}}),null),c(I,T(We,{get when(){return!r()},get children(){var Z=nM(),X=Z.firstChild,se=X.nextSibling,U=se.nextSibling;return y(X,A),se.style.setProperty("margin-bottom","0.5rem"),c(se,()=>e("inventory.noProductsFound","No Products Found")),c(U,()=>e("inventory.tryDifferentSearch","Try a different search term")),be(E=>y(Z,W,E)),Z}}),null),be(Z=>y(ee,x,Z)),I})()};tr(["click"]);var lM=le("<button>"),cM=le("<div><h3></h3><button>🖨️ "),dM=le("<div><div><div><strong>:</strong> </div><div><strong>:</strong> </div><div><strong>:</strong> </div><div><strong>:</strong> </div></div><div><div><strong>:</strong> </div><div><strong>:</strong> </div><div><strong>:</strong> </div><div><strong>:</strong> "),xv=le("<div><strong>:</strong> "),uM=le("<div>"),hM=le("<div><table><thead><tr><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody>"),pM=le("<div><div><h2></h2><div><select><option value=date></option><option value=quantity></option><option value=value></option></select></div></div><div>"),fM=le("<div><div><h3></h3><div></div></div><div><span></span><div>"),yM=le("<div><div><strong>:</strong> "),mM=le("<div><div><div></div><div></div></div><div><div></div><div></div></div><div><div></div><div>"),gM=le("<div><button></button><button>🖨️"),vM=le("<tr><td></td><td></td><td></td><td></td><td></td><td>");const bM=t=>{const{t:e}=pr(),[r,n]=Ae(null),[i,o]=Ae("date"),s=zt(()=>{const f=t.movements||At.movements,p=new Map;return f.forEach(m=>{const x=m.referenceNumber||m.ssg_inventory_key||m.invoiceId||"UNKNOWN";if(!p.has(x)){const F=At.getLocationById(m.locationId);p.set(x,{referenceNumber:m.referenceNumber||"",invoiceId:m.invoiceId||"",ssg_inventory_key:m.ssg_inventory_key||"",movementType:m.movementType||"unknown",locationId:m.locationId||"",locationName:F?.name||"Unknown Location",totalItems:0,totalQuantity:0,createDate:m.createDate||new Date().toISOString(),description:m.description||"",generalNotes:m.generalNotes||"",movements:[],totalValue:0})}const P=p.get(x);P.movements.push(m),P.totalItems++,P.totalQuantity+=Math.abs(m.quantity||0);const g=At.getProductById(m.productId);g&&g.unitCost&&(P.totalValue+=Math.abs(m.quantity||0)*g.unitCost)}),Array.from(p.values()).sort((m,x)=>{switch(i()){case"quantity":return x.totalQuantity-m.totalQuantity;case"value":return x.totalValue-m.totalValue;case"date":default:return new Date(x.createDate).getTime()-new Date(m.createDate).getTime()}})}),a=f=>new Date(f).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),l=f=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(f),d=f=>{switch(f.toLowerCase()){case"in":case"stock_in":return"#22c55e";case"out":case"stock_out":return"#ef4444";case"transfer":return"#3b82f6";case"adjustment":return"#f59e0b";default:return"#6b7280"}},u=f=>{switch(f.toLowerCase()){case"in":case"stock_in":return"↗️";case"out":case"stock_out":return"↙️";case"transfer":return"↔️";case"adjustment":return"⚖️";default:return"📦"}},h=f=>{const p=f||r();if(!p)return;const m=window.open("","_blank");if(!m)return;const x=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Bulk Movement Report - ${p.referenceNumber||p.invoiceId}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 20px; }
          .group-info { background: #f8f9fa; padding: 15px; margin-bottom: 20px; border-radius: 5px; }
          .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
          table { width: 100%; border-collapse: collapse; margin-top: 15px; }
          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
          th { background-color: #f2f2f2; font-weight: bold; }
          .summary { background: #e8f4fd; padding: 15px; margin-top: 20px; border-radius: 5px; }
          @media print { body { margin: 0; } }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>BULK MOVEMENT REPORT</h1>
          <h2>${p.referenceNumber||p.invoiceId}</h2>
          <p>Generated: ${a(new Date().toISOString())}</p>
        </div>
        
        <div class="group-info">
          <div class="info-grid">
            <div>
              <strong>Reference Number:</strong> ${p.referenceNumber||"N/A"}<br>
              <strong>Invoice ID:</strong> ${p.invoiceId||"N/A"}<br>
              <strong>Movement Type:</strong> ${p.movementType.toUpperCase()}<br>
              <strong>Location:</strong> ${p.locationName}
            </div>
            <div>
              <strong>Date:</strong> ${a(p.createDate)}<br>
              <strong>Total Items:</strong> ${p.totalItems}<br>
              <strong>Total Quantity:</strong> ${p.totalQuantity}<br>
              <strong>Estimated Value:</strong> ${l(p.totalValue)}
            </div>
          </div>
          ${p.description?`<p><strong>Description:</strong> ${p.description}</p>`:""}
          ${p.generalNotes?`<p><strong>Notes:</strong> ${p.generalNotes}</p>`:""}
        </div>
        
        <table>
          <thead>
            <tr>
              <th>Product Code</th>
              <th>Product Name</th>
              <th>Quantity</th>
              <th>Unit Cost</th>
              <th>Total Value</th>
              <th>Notes</th>
            </tr>
          </thead>
          <tbody>
            ${p.movements.map(P=>{const g=At.getProductById(P.productId),F=g?.unitCost||0,V=Math.abs(P.quantity||0)*F;return`
                <tr>
                  <td>${g?.code||P.productId}</td>
                  <td>${g?.name||"Unknown Product"}</td>
                  <td>${P.quantity||0}</td>
                  <td>${l(F)}</td>
                  <td>${l(V)}</td>
                  <td>${P.notes||"-"}</td>
                </tr>
              `}).join("")}
          </tbody>
        </table>
        
        <div class="summary">
          <h3>SUMMARY</h3>
          <p><strong>Total Products:</strong> ${p.totalItems}</p>
          <p><strong>Total Quantity Moved:</strong> ${p.totalQuantity}</p>
          <p><strong>Total Estimated Value:</strong> ${l(p.totalValue)}</p>
          <p><strong>Movement Impact:</strong> ${p.movementType==="in"?"Increased":p.movementType==="out"?"Decreased":"Adjusted"} inventory</p>
        </div>
      </body>
      </html>
    `;m.document.write(x),m.document.close(),m.print()};return(()=>{var f=pM(),p=f.firstChild,m=p.firstChild,x=m.nextSibling,P=x.firstChild,g=P.firstChild,F=g.nextSibling,V=F.nextSibling,N=p.nextSibling;return f.style.setProperty("padding","1rem"),p.style.setProperty("display","flex"),p.style.setProperty("justify-content","space-between"),p.style.setProperty("align-items","center"),p.style.setProperty("margin-bottom","2rem"),c(m,()=>e("inventory.bulkMovementReport","Bulk Movement Report")),x.style.setProperty("display","flex"),x.style.setProperty("gap","1rem"),P.addEventListener("change",R=>o(R.currentTarget.value)),P.style.setProperty("padding","0.5rem"),c(g,()=>e("common.sortByDate","Sort by Date")),c(F,()=>e("common.sortByQuantity","Sort by Quantity")),c(V,()=>e("common.sortByValue","Sort by Value")),c(x,T(We,{get when(){return t.onClose},get children(){var R=lM();return Qn(R,"click",t.onClose,!0),R.style.setProperty("padding","0.5rem 1rem"),R.style.setProperty("background","#6c757d"),R.style.setProperty("color","white"),R.style.setProperty("border","none"),R.style.setProperty("border-radius","var(--border-radius-sm)"),R.style.setProperty("cursor","pointer"),c(R,()=>e("common.close","Close")),R}}),null),N.style.setProperty("display","grid"),N.style.setProperty("grid-template-columns","repeat(auto-fill, minmax(400px, 1fr))"),N.style.setProperty("gap","1rem"),N.style.setProperty("margin-bottom","2rem"),c(N,T(_t,{get each(){return s()},children:R=>T(Vt,{get style(){return{cursor:"pointer",border:r()===R?"2px solid var(--primary-color)":"1px solid #e9ecef",transition:"all 0.2s"}},onClick:()=>n(R),get children(){return[(()=>{var M=fM(),C=M.firstChild,k=C.firstChild,D=k.nextSibling,$=C.nextSibling,w=$.firstChild,_=w.nextSibling;return M.style.setProperty("display","flex"),M.style.setProperty("justify-content","space-between"),M.style.setProperty("align-items","flex-start"),M.style.setProperty("margin-bottom","1rem"),k.style.setProperty("margin","0 0 0.5rem 0"),k.style.setProperty("font-size","1.1rem"),c(k,()=>R.referenceNumber||R.invoiceId||"No Reference"),D.style.setProperty("font-size","0.875rem"),D.style.setProperty("color","#6c757d"),c(D,()=>a(R.createDate)),$.style.setProperty("text-align","center"),w.style.setProperty("font-size","1.5rem"),c(w,()=>u(R.movementType)),_.style.setProperty("font-size","0.75rem"),_.style.setProperty("font-weight","bold"),c(_,()=>R.movementType.toUpperCase()),be(v=>(v=d(R.movementType))!=null?_.style.setProperty("color",v):_.style.removeProperty("color")),M})(),(()=>{var M=yM(),C=M.firstChild,k=C.firstChild,D=k.firstChild;return k.nextSibling,M.style.setProperty("margin-bottom","1rem"),C.style.setProperty("font-size","0.875rem"),C.style.setProperty("margin-bottom","0.25rem"),c(k,()=>e("inventory.location","Location"),D),c(C,()=>R.locationName,null),c(M,T(We,{get when(){return R.description},get children(){var $=xv(),w=$.firstChild,_=w.firstChild;return w.nextSibling,$.style.setProperty("font-size","0.875rem"),$.style.setProperty("margin-bottom","0.25rem"),c(w,()=>e("common.description","Description"),_),c($,()=>R.description,null),$}}),null),M})(),(()=>{var M=mM(),C=M.firstChild,k=C.firstChild,D=k.nextSibling,$=C.nextSibling,w=$.firstChild,_=w.nextSibling,v=$.nextSibling,z=v.firstChild,W=z.nextSibling;return M.style.setProperty("display","grid"),M.style.setProperty("grid-template-columns","repeat(3, 1fr)"),M.style.setProperty("gap","0.5rem"),M.style.setProperty("margin-bottom","1rem"),C.style.setProperty("text-align","center"),C.style.setProperty("padding","0.5rem"),C.style.setProperty("background","#f8f9fa"),C.style.setProperty("border-radius","var(--border-radius-sm)"),k.style.setProperty("font-weight","bold"),k.style.setProperty("color","#3b82f6"),c(k,()=>R.totalItems),D.style.setProperty("font-size","0.75rem"),D.style.setProperty("color","#6c757d"),c(D,()=>e("inventory.items","Items")),$.style.setProperty("text-align","center"),$.style.setProperty("padding","0.5rem"),$.style.setProperty("background","#f8f9fa"),$.style.setProperty("border-radius","var(--border-radius-sm)"),w.style.setProperty("font-weight","bold"),w.style.setProperty("color","#22c55e"),c(w,()=>R.totalQuantity),_.style.setProperty("font-size","0.75rem"),_.style.setProperty("color","#6c757d"),c(_,()=>e("inventory.quantity","Quantity")),v.style.setProperty("text-align","center"),v.style.setProperty("padding","0.5rem"),v.style.setProperty("background","#f8f9fa"),v.style.setProperty("border-radius","var(--border-radius-sm)"),z.style.setProperty("font-weight","bold"),z.style.setProperty("color","#f59e0b"),c(z,()=>l(R.totalValue)),W.style.setProperty("font-size","0.75rem"),W.style.setProperty("color","#6c757d"),c(W,()=>e("common.value","Value")),M})(),(()=>{var M=gM(),C=M.firstChild,k=C.nextSibling;return M.style.setProperty("display","flex"),M.style.setProperty("gap","0.5rem"),C.$$click=D=>{D.stopPropagation(),n(R)},C.style.setProperty("flex","1"),C.style.setProperty("padding","0.5rem"),C.style.setProperty("background","var(--primary-color)"),C.style.setProperty("color","white"),C.style.setProperty("border","none"),C.style.setProperty("border-radius","var(--border-radius-sm)"),C.style.setProperty("cursor","pointer"),C.style.setProperty("font-size","0.875rem"),c(C,()=>e("common.viewDetails","View Details")),k.$$click=D=>{D.stopPropagation(),h(R)},k.style.setProperty("padding","0.5rem"),k.style.setProperty("background","#22c55e"),k.style.setProperty("color","white"),k.style.setProperty("border","none"),k.style.setProperty("border-radius","var(--border-radius-sm)"),k.style.setProperty("cursor","pointer"),k.style.setProperty("font-size","0.875rem"),M})()]}})})),c(f,T(We,{get when(){return r()},get children(){return T(Vt,{get children(){return[(()=>{var R=cM(),M=R.firstChild,C=M.nextSibling;return C.firstChild,R.style.setProperty("display","flex"),R.style.setProperty("justify-content","space-between"),R.style.setProperty("align-items","center"),R.style.setProperty("margin-bottom","1rem"),c(M,()=>e("inventory.movementDetails","Movement Details")),C.$$click=()=>h(),C.style.setProperty("padding","0.5rem 1rem"),C.style.setProperty("background","#22c55e"),C.style.setProperty("color","white"),C.style.setProperty("border","none"),C.style.setProperty("border-radius","var(--border-radius-sm)"),C.style.setProperty("cursor","pointer"),c(C,()=>e("common.print","Print Report"),null),R})(),(()=>{var R=dM(),M=R.firstChild,C=M.firstChild,k=C.firstChild,D=k.firstChild;k.nextSibling;var $=C.nextSibling,w=$.firstChild,_=w.firstChild;w.nextSibling;var v=$.nextSibling,z=v.firstChild,W=z.firstChild;z.nextSibling;var A=v.nextSibling,I=A.firstChild,ee=I.firstChild;I.nextSibling;var Z=M.nextSibling,X=Z.firstChild,se=X.firstChild,U=se.firstChild;se.nextSibling;var E=X.nextSibling,O=E.firstChild,L=O.firstChild;O.nextSibling;var G=E.nextSibling,K=G.firstChild,q=K.firstChild;K.nextSibling;var B=G.nextSibling,H=B.firstChild,Y=H.firstChild;return H.nextSibling,R.style.setProperty("display","grid"),R.style.setProperty("grid-template-columns","repeat(2, 1fr)"),R.style.setProperty("gap","1rem"),R.style.setProperty("margin-bottom","2rem"),R.style.setProperty("padding","1rem"),R.style.setProperty("background","#f8f9fa"),R.style.setProperty("border-radius","var(--border-radius-sm)"),c(k,()=>e("inventory.referenceNumber","Reference"),D),c(C,()=>r()?.referenceNumber||"N/A",null),c(w,()=>e("inventory.invoiceId","Invoice ID"),_),c($,()=>r()?.invoiceId||"N/A",null),c(z,()=>e("inventory.movementType","Type"),W),c(v,()=>r()?.movementType.toUpperCase(),null),c(I,()=>e("inventory.location","Location"),ee),c(A,()=>r()?.locationName,null),c(se,()=>e("common.date","Date"),U),c(X,(()=>{var te=Ve(()=>!!r());return()=>te()?a(r().createDate):""})(),null),c(O,()=>e("inventory.totalItems","Total Items"),L),c(E,()=>r()?.totalItems,null),c(K,()=>e("inventory.totalQuantity","Total Quantity"),q),c(G,()=>r()?.totalQuantity,null),c(H,()=>e("common.estimatedValue","Estimated Value"),Y),c(B,(()=>{var te=Ve(()=>!!r());return()=>te()?l(r().totalValue):""})(),null),R})(),T(We,{get when(){return r()?.description||r()?.generalNotes},get children(){var R=uM();return R.style.setProperty("margin-bottom","2rem"),R.style.setProperty("padding","1rem"),R.style.setProperty("background","#e8f4fd"),R.style.setProperty("border-radius","var(--border-radius-sm)"),c(R,T(We,{get when(){return r()?.description},get children(){var M=xv(),C=M.firstChild,k=C.firstChild;return C.nextSibling,c(C,()=>e("common.description","Description"),k),c(M,()=>r()?.description,null),M}}),null),c(R,T(We,{get when(){return r()?.generalNotes},get children(){var M=xv(),C=M.firstChild,k=C.firstChild;return C.nextSibling,c(C,()=>e("common.notes","Notes"),k),c(M,()=>r()?.generalNotes,null),M}}),null),R}}),(()=>{var R=hM(),M=R.firstChild,C=M.firstChild,k=C.firstChild,D=k.firstChild,$=D.nextSibling,w=$.nextSibling,_=w.nextSibling,v=_.nextSibling,z=v.nextSibling,W=C.nextSibling;return R.style.setProperty("overflow-x","auto"),M.style.setProperty("width","100%"),M.style.setProperty("border-collapse","collapse"),k.style.setProperty("border-bottom","2px solid #dee2e6"),D.style.setProperty("padding","0.75rem"),D.style.setProperty("text-align","left"),c(D,()=>e("inventory.productCode","Code")),$.style.setProperty("padding","0.75rem"),$.style.setProperty("text-align","left"),c($,()=>e("inventory.productName","Product")),w.style.setProperty("padding","0.75rem"),w.style.setProperty("text-align","center"),c(w,()=>e("inventory.quantity","Quantity")),_.style.setProperty("padding","0.75rem"),_.style.setProperty("text-align","right"),c(_,()=>e("inventory.unitCost","Unit Cost")),v.style.setProperty("padding","0.75rem"),v.style.setProperty("text-align","right"),c(v,()=>e("common.totalValue","Total Value")),z.style.setProperty("padding","0.75rem"),z.style.setProperty("text-align","left"),c(z,()=>e("common.notes","Notes")),c(W,T(_t,{get each(){return r()?.movements||[]},children:A=>{const I=At.getProductById(A.productId),ee=I?.unitCost||0,Z=Math.abs(A.quantity||0)*ee;return(()=>{var X=vM(),se=X.firstChild,U=se.nextSibling,E=U.nextSibling,O=E.nextSibling,L=O.nextSibling,G=L.nextSibling;return X.style.setProperty("border-bottom","1px solid #dee2e6"),se.style.setProperty("padding","0.75rem"),se.style.setProperty("font-family","monospace"),c(se,()=>I?.code||A.productId),U.style.setProperty("padding","0.75rem"),c(U,()=>I?.name||"Unknown Product"),E.style.setProperty("padding","0.75rem"),E.style.setProperty("text-align","center"),E.style.setProperty("font-weight","bold"),c(E,()=>A.quantity||0),O.style.setProperty("padding","0.75rem"),O.style.setProperty("text-align","right"),c(O,()=>l(ee)),L.style.setProperty("padding","0.75rem"),L.style.setProperty("text-align","right"),L.style.setProperty("font-weight","bold"),c(L,()=>l(Z)),G.style.setProperty("padding","0.75rem"),G.style.setProperty("font-size","0.875rem"),G.style.setProperty("color","#6c757d"),c(G,()=>A.notes||"-"),be(K=>(K=(A.quantity||0)>=0?"#22c55e":"#ef4444")!=null?E.style.setProperty("color",K):E.style.removeProperty("color")),X})()}})),R})()]}})}}),null),be(()=>P.value=i()),f})()};tr(["click"]);var PM=le("<div><div>📊</div><div></div><div>"),fx=le("<div>"),xM=le("<div><div><div><h2> - </h2><button>×</button></div><div>"),SM=le("<div><div><div><div><h3></h3><span></span></div><div></div></div></div><div><div><div></div><div></div></div><div><div></div><div></div></div><div><div></div><div>");const wM=t=>{const{t:e}=pr(),[r,n]=Ae(""),[i,o]=Ae(!1),s=zt(()=>{const m=At.movements,x=new Map;return m.forEach(P=>{const g=P.referenceNumber||P.invoiceId||P.ssg_inventory_key||"UNKNOWN";x.has(g)||x.set(g,{referenceNumber:g,movements:[],totalItems:0,totalValue:0,createdDate:P.createdDate,movementType:P.movementType});const F=x.get(g);F.movements.push(P),F.totalItems+=P.quantity,F.totalValue+=P.totalCost,new Date(P.createdDate)<new Date(F.createdDate)&&(F.createdDate=P.createdDate)}),Array.from(x.values()).filter(P=>P.movements.length>1).sort((P,g)=>new Date(g.createdDate).getTime()-new Date(P.createdDate).getTime())}),a=zt(()=>{const m=s().find(x=>x.referenceNumber===r());return m?m.movements:[]}),l=m=>{n(m),o(!0)},d=()=>{o(!1),n("")},u=m=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(m),h=m=>new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),f=m=>({in:e("inventory.purchaseReceive"),out:e("inventory.saleIssue"),transfer:e("inventory.transfer"),adjustment:e("inventory.adjustment")})[m]||m,p=m=>({in:"#4caf50",out:"#f44336",transfer:"#2196f3",adjustment:"#ff9800"})[m]||"#666";return[T(Pi,{get isOpen(){return Ve(()=>!!t.isOpen)()&&!i()},get onClose(){return t.onClose},get title(){return e("inventory.viewHistoricalReports")},size:"large",get children(){var m=fx();return m.style.setProperty("max-height","70vh"),m.style.setProperty("overflow-y","auto"),c(m,T(We,{get when(){return s().length===0},get children(){var x=PM(),P=x.firstChild,g=P.nextSibling,F=g.nextSibling;return x.style.setProperty("text-align","center"),x.style.setProperty("padding","3rem"),x.style.setProperty("color","var(--text-muted)"),P.style.setProperty("font-size","2rem"),P.style.setProperty("margin-bottom","1rem"),g.style.setProperty("font-size","1.1rem"),g.style.setProperty("margin-bottom","0.5rem"),c(g,()=>e("inventory.noBulkReportsFound","No bulk movement reports found")),F.style.setProperty("font-size","0.9rem"),c(F,()=>e("inventory.bulkReportsAppearHere","Bulk movement reports will appear here after you create bulk movements")),x}}),null),c(m,T(We,{get when(){return s().length>0},get children(){var x=fx();return x.style.setProperty("display","grid"),x.style.setProperty("gap","1rem"),c(x,T(_t,{get each(){return s()},children:P=>(()=>{var g=SM(),F=g.firstChild,V=F.firstChild,N=V.firstChild,R=N.firstChild,M=R.nextSibling,C=N.nextSibling,k=F.nextSibling,D=k.firstChild,$=D.firstChild,w=$.nextSibling,_=D.nextSibling,v=_.firstChild,z=v.nextSibling,W=_.nextSibling,A=W.firstChild,I=A.nextSibling;return g.style.setProperty("padding","1.5rem"),g.style.setProperty("border","1px solid var(--border-color)"),g.style.setProperty("border-radius","var(--border-radius)"),g.style.setProperty("background","var(--surface-color)"),g.style.setProperty("transition","all 0.2s ease"),F.style.setProperty("display","flex"),F.style.setProperty("justify-content","space-between"),F.style.setProperty("align-items","flex-start"),F.style.setProperty("margin-bottom","1rem"),V.style.setProperty("flex","1"),N.style.setProperty("display","flex"),N.style.setProperty("align-items","center"),N.style.setProperty("gap","1rem"),N.style.setProperty("margin-bottom","0.5rem"),R.style.setProperty("margin","0"),R.style.setProperty("font-size","1.1rem"),R.style.setProperty("color","var(--text-primary)"),c(R,()=>P.referenceNumber),M.style.setProperty("padding","0.25rem 0.75rem"),M.style.setProperty("border-radius","1rem"),M.style.setProperty("font-size","0.75rem"),M.style.setProperty("font-weight","500"),c(M,()=>f(P.movementType)),C.style.setProperty("color","var(--text-muted)"),C.style.setProperty("font-size","0.875rem"),c(C,()=>h(P.createdDate)),c(F,T(mt,{variant:"outline",size:"sm",onClick:()=>l(P.referenceNumber),get children(){return e("common.view")}}),null),k.style.setProperty("display","grid"),k.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(150px, 1fr))"),k.style.setProperty("gap","1rem"),k.style.setProperty("margin-bottom","1rem"),$.style.setProperty("font-size","0.75rem"),$.style.setProperty("font-weight","500"),$.style.setProperty("text-transform","uppercase"),$.style.setProperty("color","var(--text-muted)"),$.style.setProperty("margin-bottom","0.25rem"),c($,()=>e("inventory.totalProducts")),w.style.setProperty("font-size","1.25rem"),w.style.setProperty("font-weight","600"),w.style.setProperty("color","var(--primary-color)"),c(w,()=>P.movements.length),v.style.setProperty("font-size","0.75rem"),v.style.setProperty("font-weight","500"),v.style.setProperty("text-transform","uppercase"),v.style.setProperty("color","var(--text-muted)"),v.style.setProperty("margin-bottom","0.25rem"),c(v,()=>e("inventory.totalItems")),z.style.setProperty("font-size","1.25rem"),z.style.setProperty("font-weight","600"),z.style.setProperty("color","var(--primary-color)"),c(z,()=>P.totalItems),A.style.setProperty("font-size","0.75rem"),A.style.setProperty("font-weight","500"),A.style.setProperty("text-transform","uppercase"),A.style.setProperty("color","var(--text-muted)"),A.style.setProperty("margin-bottom","0.25rem"),c(A,()=>e("inventory.estimatedValue")),I.style.setProperty("font-size","1.25rem"),I.style.setProperty("font-weight","600"),I.style.setProperty("color","var(--primary-color)"),c(I,()=>u(P.totalValue)),be(ee=>{var Z=p(P.movementType)+"20",X=p(P.movementType);return Z!==ee.e&&((ee.e=Z)!=null?M.style.setProperty("background",Z):M.style.removeProperty("background")),X!==ee.t&&((ee.t=X)!=null?M.style.setProperty("color",X):M.style.removeProperty("color")),ee},{e:void 0,t:void 0}),g})()})),x}}),null),m}}),T(We,{get when(){return i()},get children(){var m=xM(),x=m.firstChild,P=x.firstChild,g=P.firstChild,F=g.firstChild,V=g.nextSibling,N=P.nextSibling;return m.style.setProperty("position","fixed"),m.style.setProperty("top","0"),m.style.setProperty("left","0"),m.style.setProperty("right","0"),m.style.setProperty("bottom","0"),m.style.setProperty("background","rgba(0, 0, 0, 0.5)"),m.style.setProperty("z-index","1000"),m.style.setProperty("display","flex"),m.style.setProperty("align-items","center"),m.style.setProperty("justify-content","center"),m.style.setProperty("padding","2rem"),x.style.setProperty("background","white"),x.style.setProperty("border-radius","var(--border-radius)"),x.style.setProperty("width","95%"),x.style.setProperty("max-width","1200px"),x.style.setProperty("max-height","90vh"),x.style.setProperty("overflow-y","auto"),x.style.setProperty("position","relative"),P.style.setProperty("padding","1rem 2rem"),P.style.setProperty("border-bottom","1px solid #e9ecef"),P.style.setProperty("display","flex"),P.style.setProperty("justify-content","space-between"),P.style.setProperty("align-items","center"),P.style.setProperty("background","#f8f9fa"),g.style.setProperty("margin","0"),c(g,()=>e("inventory.bulkMovementReport"),F),c(g,r,null),V.$$click=d,V.style.setProperty("background","none"),V.style.setProperty("border","none"),V.style.setProperty("font-size","1.5rem"),V.style.setProperty("cursor","pointer"),V.style.setProperty("padding","0.5rem"),V.style.setProperty("line-height","1"),N.style.setProperty("padding","1rem"),c(N,T(bM,{get movements(){return a()},onClose:d})),m}})]};tr(["click"]);var CM=le("<form><div><div><label> *</label><input type=text required></div><div><label> *</label><input type=text required></div></div><div><label> *</label><select required><option value=in></option><option value=out></option><option value=transfer></option><option value=adjustment></option></select></div><div><div><label></label></div></div><div><div><h3></h3></div></div><div><label></label><textarea></textarea></div><div>"),_M=le("<div><label> *"),AM=le("<div><div></div><div></div><div></div><div></div><div>"),Sv=le("<div>"),kM=le("<div><input type=number min=0 step=1 required><input type=number min=0 step=0.01><input type=text>"),EM=le("<div><h4></h4><div><span>:</span><span></span></div><div><span>:</span><span></span></div><div><span>:</span><span></span></div><div><span>:</span><span>"),TM=le("<div>• ");const IM=t=>{const{t:e}=pr(),[r,n]=Ae(`INV-${Date.now()}`),[i,o]=Ae(""),[s,a]=Ae("in"),[l,d]=Ae(""),[u,h]=Ae(""),[f,p]=Ae(""),[m,x]=Ae([]),[P,g]=Ae([]),[F,V]=Ae(!1),[N,R]=Ae(!1),M=()=>{x(q=>[...q,{productId:"",quantity:0,unitCost:0,notes:""}])},C=q=>{x(B=>B.filter((H,Y)=>Y!==q))},k=(q,B,H)=>{x(Y=>Y.map((te,oe)=>oe===q?{...te,[B]:H}:te))},D=()=>{n(`INV-${Date.now()}`),o(""),a("in"),d(""),h(""),p(""),x([]),g([])},$=async q=>{q.preventDefault(),g([]);const B=[];if(i()||B.push(e("forms.referenceNumberRequired")),l()||B.push(e("forms.locationRequired")),s()==="transfer"&&!u()&&B.push(e("forms.fromLocationRequired")),m().length===0&&B.push(e("forms.atLeastOneProduct")),m().forEach((te,oe)=>{te.productId||B.push(e("forms.itemProductRequired","Product is required for item {{index}}",{index:oe+1})),te.quantity<=0&&B.push(e("forms.itemQuantityRequired","Quantity must be greater than 0 for item {{index}}",{index:oe+1}))}),B.length>0){g(B);return}const H={ssg_inventory_key:So(),invoiceId:r(),referenceNumber:i(),movementType:s(),type:T0(s()),locationId:l(),fromLocationId:s()==="transfer"?u():void 0,items:m(),products:m(),generalNotes:f(),description:f(),invoice:i(),store:l(),createdBy:"admin",createDate:new Date().toISOString()};console.log(H);const Y=await At.addBulkInventoryMovements(H);console.log(Y),Y.success?t.onMovementComplete?t.onMovementComplete(i()):(D(),t.onClose()):g(Y.errors)},w=()=>{D(),t.onClose()},_=zt(()=>m().reduce((q,B)=>{const H=At.getProductById(B.productId),Y=B.unitCost||H?.unitCost||0;return q+B.quantity*Y},0)),v=zt(()=>m().reduce((q,B)=>q+B.quantity,0)),z={"margin-bottom":"1.5rem"},W={display:"block","margin-bottom":"0.5rem","font-weight":"500",color:"var(--text-primary)"},A={width:"100%",padding:"0.75rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"1rem",background:"var(--surface-color)"},I={...A,cursor:"pointer"},ee={display:"grid",gap:"0.5rem","align-items":"end","margin-bottom":"0.5rem",padding:"0.75rem",background:"var(--background-color)","border-radius":"var(--border-radius-sm)",border:"1px solid var(--border-color)"},Z={display:"grid","grid-template-columns":"2fr 1fr 1fr 2fr auto",gap:"0.5rem","align-items":"end","margin-bottom":"0.5rem",padding:"0.75rem",background:"var(--background-color)","border-radius":"var(--border-radius-sm)",border:"1px solid var(--border-color)"},X={display:"grid","grid-template-columns":"2fr 1fr 1fr 2fr auto",gap:"0.5rem","font-weight":"600","font-size":"0.875rem",color:"var(--text-muted)","margin-bottom":"0.5rem","padding-left":"0.75rem"},se={padding:"1rem",background:"var(--surface-color)","border-radius":"var(--border-radius-sm)",border:"1px solid var(--border-color)","margin-bottom":"1rem"},U={display:"flex","justify-content":"space-between","margin-bottom":"0.5rem"},E={color:"#f44336","font-size":"0.875rem","margin-bottom":"1rem"},O={display:"flex",gap:"1rem","justify-content":"flex-end","margin-top":"2rem"},L=q=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(q),G=q=>({in:e("inventory.purchaseReceive"),out:e("inventory.saleIssue"),transfer:e("inventory.transfer"),adjustment:e("inventory.adjustment")})[q]||q,K=async q=>{await At.fecthInventory(q),await At.fecthProduct(q)};return Kn(()=>{K("prod")}),T(Pi,{get isOpen(){return t.isOpen},onClose:w,get title(){return e("inventory.bulkMovement")},get children(){return[(()=>{var q=CM(),B=q.firstChild,H=B.firstChild,Y=H.firstChild,te=Y.firstChild,oe=Y.nextSibling,pe=H.nextSibling,ne=pe.firstChild,Q=ne.firstChild,ce=ne.nextSibling,ue=B.nextSibling,de=ue.firstChild,ge=de.firstChild,ye=de.nextSibling,fe=ye.firstChild,Se=fe.nextSibling,qe=Se.nextSibling,Oe=qe.nextSibling,Ie=ue.nextSibling,Be=Ie.firstChild,ke=Be.firstChild,Ge=Ie.nextSibling,et=Ge.firstChild,ve=et.firstChild,De=Ge.nextSibling,He=De.firstChild,Je=He.nextSibling,Le=De.nextSibling;return q.addEventListener("submit",$),B.style.setProperty("display","grid"),B.style.setProperty("grid-template-columns","1fr 1fr"),B.style.setProperty("gap","1rem"),B.style.setProperty("margin-bottom","1.5rem"),c(Y,()=>e("common.invoiceDocumentId"),te),oe.addEventListener("change",Te=>n(Te.target.value)),c(ne,()=>e("common.referenceNumber"),Q),ce.addEventListener("change",Te=>o(Te.target.value)),c(de,()=>e("inventory.movementType"),ge),ye.addEventListener("change",Te=>a(Te.target.value)),c(fe,()=>e("inventory.purchaseReceive")),c(Se,()=>e("inventory.saleIssue")),c(qe,()=>e("inventory.transfer")),c(Oe,()=>e("inventory.adjustment")),Ie.style.setProperty("display","grid"),Ie.style.setProperty("gap","1rem"),Ie.style.setProperty("margin-bottom","1.5rem"),c(Ie,(()=>{var Te=Ve(()=>s()==="transfer");return()=>Te()&&(()=>{var he=_M(),Ne=he.firstChild,rt=Ne.firstChild;return c(Ne,()=>e("inventory.fromLocation"),rt),c(he,T(kp,{get value(){return u()},onChange:re=>h(re),get placeholder(){return e("inventory.searchSourceLocation")},onAddNew:()=>R(!0),required:!0}),null),be(re=>y(Ne,W,re)),he})()})(),Be),c(ke,(()=>{var Te=Ve(()=>s()==="transfer");return()=>Te()?e("inventory.toLocation")+" *":e("inventory.location")+" *"})()),c(Be,T(kp,{get value(){return l()},onChange:Te=>d(Te),get placeholder(){return Ve(()=>s()==="transfer")()?e("inventory.searchDestinationLocation"):e("inventory.searchLocation")},onAddNew:()=>R(!0),required:!0}),null),et.style.setProperty("display","flex"),et.style.setProperty("justify-content","space-between"),et.style.setProperty("align-items","center"),et.style.setProperty("margin-bottom","1rem"),ve.style.setProperty("margin","0"),ve.style.setProperty("font-size","1.1rem"),c(ve,()=>e("inventory.products")),c(et,T(mt,{variant:"outline",type:"button",onClick:M,get children(){return e("inventory.addProduct")}}),null),c(Ge,(()=>{var Te=Ve(()=>m().length>0);return()=>Te()&&[(()=>{var he=AM(),Ne=he.firstChild,rt=Ne.nextSibling,re=rt.nextSibling,Ue=re.nextSibling;return y(he,X),c(Ne,()=>e("inventory.product")),c(rt,()=>e("inventory.quantity")),c(re,()=>e("inventory.unitCost")),c(Ue,()=>e("common.notes")),he})(),T(_t,{get each(){return m()},children:(he,Ne)=>[(()=>{var rt=Sv();return y(rt,ee),c(rt,T(cg,{get value(){return he.productId},onChange:re=>{k(Ne(),"productId",re.id);let Ue={id:re.id,label:re.name,code:re.sku};k(Ne(),"product",Ue);const we=At.getProductById(re.id);we&&!he.unitCost&&k(Ne(),"unitCost",we.unitCost)},get placeholder(){return e("inventory.searchProduct")},onAddNew:()=>V(!0),required:!0})),rt})(),(()=>{var rt=kM(),re=rt.firstChild,Ue=re.nextSibling,we=Ue.nextSibling;return y(rt,Z),re.addEventListener("change",xe=>k(Ne(),"quantity",Number(xe.target.value))),Ue.addEventListener("change",xe=>k(Ne(),"unitCost",Number(xe.target.value))),we.addEventListener("change",xe=>k(Ne(),"notes",xe.target.value)),c(rt,T(mt,{variant:"outline",size:"sm",type:"button",onClick:()=>C(Ne()),style:{color:"#f44336","border-color":"#f44336"},get children(){return e("common.remove")}}),null),be(xe=>{var je=A,$e=A,ft=e("common.auto"),ct=A,yt=e("common.optionalNotes");return xe.e=y(re,je,xe.e),xe.t=y(Ue,$e,xe.t),ft!==xe.a&&ir(Ue,"placeholder",xe.a=ft),xe.o=y(we,ct,xe.o),yt!==xe.i&&ir(we,"placeholder",xe.i=yt),xe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),be(()=>re.value=he.quantity),be(()=>Ue.value=he.unitCost),be(()=>we.value=he.notes),rt})()]})]})(),null),c(Ge,(()=>{var Te=Ve(()=>m().length===0);return()=>Te()&&(()=>{var he=Sv();return he.style.setProperty("text-align","center"),he.style.setProperty("padding","2rem"),he.style.setProperty("background","var(--background-color)"),he.style.setProperty("border-radius","var(--border-radius-sm)"),he.style.setProperty("border","1px solid var(--border-color)"),he.style.setProperty("color","var(--text-muted)"),c(he,()=>e("inventory.noProductsAdded")),he})()})(),null),c(q,(()=>{var Te=Ve(()=>m().length>0);return()=>Te()&&(()=>{var he=EM(),Ne=he.firstChild,rt=Ne.nextSibling,re=rt.firstChild,Ue=re.firstChild,we=re.nextSibling,xe=rt.nextSibling,je=xe.firstChild,$e=je.firstChild,ft=je.nextSibling,ct=xe.nextSibling,yt=ct.firstChild,$t=yt.firstChild,bt=yt.nextSibling,Gt=ct.nextSibling,Wt=Gt.firstChild,Dt=Wt.firstChild,Kt=Wt.nextSibling;return y(he,se),Ne.style.setProperty("margin","0 0 1rem 0"),Ne.style.setProperty("font-size","1rem"),c(Ne,()=>e("common.summary")),c(re,()=>e("inventory.totalProducts"),Ue),we.style.setProperty("font-weight","600"),c(we,()=>m().length),c(je,()=>e("inventory.totalItems"),$e),ft.style.setProperty("font-weight","600"),c(ft,v),c(yt,()=>e("inventory.totalValue"),$t),bt.style.setProperty("font-weight","600"),bt.style.setProperty("color","var(--primary-color)"),c(bt,()=>L(_())),c(Wt,()=>e("inventory.movementType"),Dt),Kt.style.setProperty("font-weight","600"),c(Kt,()=>G(s())),be(gt=>{var St=U,Qe=U,vt=U,Ft=U;return gt.e=y(rt,St,gt.e),gt.t=y(xe,Qe,gt.t),gt.a=y(ct,vt,gt.a),gt.o=y(Gt,Ft,gt.o),gt},{e:void 0,t:void 0,a:void 0,o:void 0}),he})()})(),De),c(He,()=>e("common.generalNotes")),Je.addEventListener("change",Te=>p(Te.target.value)),c(q,(()=>{var Te=Ve(()=>P().length>0);return()=>Te()&&(()=>{var he=Sv();return y(he,E),c(he,T(_t,{get each(){return P()},children:Ne=>(()=>{var rt=TM();return rt.firstChild,c(rt,Ne,null),rt})()})),he})()})(),Le),y(Le,O),c(Le,T(mt,{variant:"secondary",type:"button",onClick:w,get children(){return e("common.cancel")}}),null),c(Le,T(mt,{variant:"primary",type:"submit",get children(){return e("inventory.createMovement")}}),null),be(Te=>{var he=W,Ne=A,rt=W,re=A,Ue=e("common.referenceNumberPlaceholder"),we=z,xe=W,je=I,$e=s()==="transfer"?"1fr 1fr":"1fr",ft=W,ct=z,yt=z,$t=W,bt={...A,"min-height":"80px",resize:"vertical"},Gt=e("inventory.generalNotesPlaceholder");return Te.e=y(Y,he,Te.e),Te.t=y(oe,Ne,Te.t),Te.a=y(ne,rt,Te.a),Te.o=y(ce,re,Te.o),Ue!==Te.i&&ir(ce,"placeholder",Te.i=Ue),Te.n=y(ue,we,Te.n),Te.s=y(de,xe,Te.s),Te.h=y(ye,je,Te.h),$e!==Te.r&&((Te.r=$e)!=null?Ie.style.setProperty("grid-template-columns",$e):Ie.style.removeProperty("grid-template-columns")),Te.d=y(ke,ft,Te.d),Te.l=y(Ge,ct,Te.l),Te.u=y(De,yt,Te.u),Te.c=y(He,$t,Te.c),Te.w=y(Je,bt,Te.w),Gt!==Te.m&&ir(Je,"placeholder",Te.m=Gt),Te},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0}),be(()=>oe.value=r()),be(()=>ce.value=i()),be(()=>ye.value=s()),be(()=>Je.value=f()),q})(),T(r2,{get isOpen(){return F()},onClose:()=>V(!1),onProductAdded:q=>{V(!1)}}),T(n2,{get isOpen(){return N()},onClose:()=>R(!1),onLocationAdded:q=>{s()==="transfer"&&!u()?h(q):d(q),R(!1)}})]}})};var NM=le("<div><h1></h1><div>"),bo=le("<div>"),RM=le("<div><h3></h3><div>"),DM=le("<div>: <!> "),LM=le("<div><button></button><button></button><button></button><button>"),$M=le("<div><div>"),FM=le("<div><span> (<!>)</span><span> / <!> "),MM=le("<div><div><h2></h2></div><div>"),OM=le("<div><div><div><span></span><h3></h3></div><div> • </div><div></div></div><div><div><span>:</span><span></span></div><div><span>:</span><span></span></div><div><span>:</span><span></span></div></div><div><div>:"),BM=le("<div><div><div><div></div><div></div></div><div><div> </div><div></div><div>Min: "),jM=le("<span>⚠️ LOW");const VM=()=>{const{t}=pr(),[e,r]=Ae(!1),[n,i]=Ae(!1),[o,s]=Ae(!1),[a,l]=Ae(null),[d,u]=Ae("overview"),[h,f]=Ae("new"),[p,m]=Ae([]),[x,P]=Ae(!1),[g,F]=Ae(!1),[V,N]=Ae(!1),[R,M]=Ae(!1),[C,k]=Ae(1),D=q=>{l(q),s(!0)},$=zt(()=>{const q=At.products||[],B=At.movements||[],H=At.stockLevels||[],Y=At.getLowStockProducts(),te=q?.length||0,oe=q?.filter(Q=>Q.isActive).length,pe=H.reduce((Q,ce)=>Q*1+ce.quantity*1*ce.averageCost*1,0),ne=B?.filter(Q=>{const ce=new Date(Q.createdDate),ue=new Date;return ce.getMonth()===ue.getMonth()&&ce.getFullYear()===ue.getFullYear()}).length;return{totalProducts:te,activeProducts:oe,lowStockProducts:Y.length,totalStockValue:pe,totalMovementsThisMonth:ne,totalLocations:At.locations.length,activeLocations:At.getActiveLocations().length}});zt(()=>At.products.map(q=>{const B=At.getStockByProduct(q.id),H=At.getTotalStockByProduct(q.id),Y=At.getLastLocationByProduct(q.id);return{...q,totalStock:H,stockByLocation:B,lastLocation:Y,isLowStock:H<=q.minStockLevel}})),zt(()=>{x(),k(1)});const w=(q,B)=>q<=B?t("inventory.lowStockAlert"):q<=B*2?t("inventory.normalStock"):t("inventory.inStock"),_=q=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(q),v=q=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(q),z=q=>{switch(q){case"warehouse":return t("inventory.warehouse");case"store":return t("inventory.store");case"supplier":return t("inventory.supplier");case"customer":return t("inventory.customer");default:return q}},W={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem","margin-bottom":"2rem"},A={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"1rem"},I=q=>({padding:"0.25rem 0.75rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"500",background:q>50?"#d4edda":q>20?"#fff3cd":"#f8d7da",color:q>50?"#155724":q>20?"#856404":"#721c24"}),ee={"font-size":"1.25rem","font-weight":"600",color:"var(--primary-color)","margin-bottom":"0.5rem"},Z={color:"var(--text-muted)","font-size":"0.875rem"},X={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem","margin-bottom":"2rem"},se={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"2rem"},U={display:"flex","border-bottom":"1px solid var(--border-color)","margin-bottom":"1.5rem"},E=q=>({padding:"0.75rem 1rem",background:"none",border:"none",cursor:"pointer","font-weight":"500",color:q?"var(--primary-color)":"var(--text-muted)","border-bottom":q?"2px solid var(--primary-color)":"2px solid transparent",transition:"all 0.2s ease"}),O={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem","margin-bottom":"2rem"},L={padding:"1rem",background:"var(--surface-color)","border-radius":"var(--border-radius-sm)",border:"1px solid var(--border-color)"},G=zt(()=>{const q=At.movements;return{total:q.length,stockIn:q.filter(B=>B.movementType==="in").length,stockOut:q.filter(B=>B.movementType==="out").length,transfers:q.filter(B=>B.movementType==="transfer").length,adjustments:q.filter(B=>B.movementType==="adjustment").length,totalValue:q.reduce((B,H)=>B+H.totalCost,0)}}),K=async()=>{let q=Xt.state?.profile?.businessId;setTimeout(async()=>{await At.getStockLevels("YY_")},2300),t2.calcStockLevels(),await At.fecthProduct(q),await At.fecthInventory(q)};return Kn(()=>{K()}),T(Bo,{get title(){return t("inventory.title")},get children(){return[(()=>{var q=NM(),B=q.firstChild,H=B.nextSibling;return y(q,se),B.style.setProperty("margin","0"),B.style.setProperty("font-size","1.75rem"),H.style.setProperty("display","flex"),H.style.setProperty("align-items","center"),H.style.setProperty("gap","1rem"),c(H,(()=>{var Y=Ve(()=>h()==="new");return()=>Y()&&T(mt,{variant:"outline",onClick:()=>N(!0),get children(){return["🔢 ",Ve(()=>t("inventory.physicalCount","Physical Count"))]}})})(),null),c(H,T(We,{get when(){return Xt.hasPermission("read_write")},get children(){return[T(mt,{variant:"outline",onClick:()=>M(!0),get children(){return["📊 ",Ve(()=>t("inventory.viewHistoricalReports"))]}}),Ve(()=>n()?"O":"X"),T(mt,{variant:"primary",onClick:()=>i(!0),get children(){return Ve(()=>h()==="new")()?t("inventory.addMovement"):t("common.add")}})]}}),null),q})(),T(aM,{}),T(We,{get when(){return Xt.hasPermission("inventoryDownsection")},get children(){return Ve(()=>h()==="legacy")()?[(()=>{var q=bo();return c(q,T(Vt,{get title(){return t("inventory.totalItems")},get subtitle(){return t("inventory.inStock")},get children(){var B=bo();return B.style.setProperty("font-size","1.5rem"),B.style.setProperty("font-weight","600"),B.style.setProperty("color","var(--primary-color)"),c(B,()=>At.inventory.length),B}}),null),c(q,T(Vt,{get title(){return t("inventory.lowStockAlert")},get subtitle(){return t("inventory.itemsBelowThreshold")},get children(){var B=bo();return B.style.setProperty("font-size","1.5rem"),B.style.setProperty("font-weight","600"),B.style.setProperty("color","var(--primary-color)"),c(B,()=>At.getLowStockItems().length),B}}),null),c(q,T(Vt,{get title(){return t("inventory.totalValue")},get subtitle(){return t("inventory.inventoryWorth")},get children(){var B=bo();return B.style.setProperty("font-size","1.5rem"),B.style.setProperty("font-weight","600"),B.style.setProperty("color","var(--primary-color)"),c(B,()=>_(At.getTotalValue())),B}}),null),be(B=>y(q,X,B)),q})(),(()=>{var q=bo();return y(q,W),c(q,T(_t,{get each(){return At.inventory},children:B=>{const H=w(B.quantity,B.minStock),Y=B.quantity<=B.minStock?8:B.quantity<=B.minStock*2?35:75;return T(Vt,{onClick:()=>D(B),get children(){return[(()=>{var te=RM(),oe=te.firstChild,pe=oe.nextSibling;return y(te,A),oe.style.setProperty("margin","0"),oe.style.setProperty("font-size","1.1rem"),c(oe,()=>B.name),c(pe,H),be(ne=>y(pe,I(Y),ne)),te})(),(()=>{var te=bo();return y(te,ee),c(te,()=>_(B.price)),te})(),(()=>{var te=DM(),oe=te.firstChild,pe=oe.nextSibling;return pe.nextSibling,y(te,Z),c(te,()=>t("inventory.quantity"),oe),c(te,()=>B.quantity,pe),c(te,()=>t("common.units"),null),te})()]}})}})),q})()]:[(()=>{var q=LM(),B=q.firstChild,H=B.nextSibling,Y=H.nextSibling,te=Y.nextSibling;return y(q,U),B.$$click=()=>u("overview"),c(B,()=>t("inventory.overview")),H.$$click=()=>u("products"),c(H,()=>t("inventory.products")),Y.$$click=()=>u("movements"),c(Y,()=>t("inventory.movements")),te.$$click=()=>u("locations"),c(te,()=>t("inventory.locations")),be(oe=>{var pe=E(d()==="overview"),ne=E(d()==="products"),Q=E(d()==="movements"),ce=E(d()==="locations");return oe.e=y(B,pe,oe.e),oe.t=y(H,ne,oe.t),oe.a=y(Y,Q,oe.a),oe.o=y(te,ce,oe.o),oe},{e:void 0,t:void 0,a:void 0,o:void 0}),q})(),Ve(()=>Ve(()=>d()==="overview")()&&(()=>{var q=$M(),B=q.firstChild;return c(B,T(Vt,{get title(){return t("inventory.activeProducts")},get subtitle(){return t("inventory.currentlyManaged")},get children(){var H=bo();return H.style.setProperty("font-size","1.5rem"),H.style.setProperty("font-weight","600"),H.style.setProperty("color","var(--primary-color)"),c(H,()=>$().activeProducts),H}}),null),c(B,T(Vt,{get title(){return t("inventory.lowStockAlert")},get subtitle(){return t("inventory.needAttention")},get children(){var H=bo();return H.style.setProperty("font-size","1.5rem"),H.style.setProperty("font-weight","600"),H.style.setProperty("color","#d32f2f"),c(H,()=>$().lowStockProducts),H}}),null),c(B,T(Vt,{get title(){return t("inventory.totalValue")},get subtitle(){return t("inventory.currentWorth")},get children(){var H=bo();return H.style.setProperty("font-size","1.5rem"),H.style.setProperty("font-weight","600"),H.style.setProperty("color","var(--primary-color)"),c(H,()=>v(G().totalValue)),H}}),null),c(B,T(Vt,{get title(){return t("inventory.movements")},get subtitle(){return t("inventory.thisMonth")},get children(){var H=bo();return H.style.setProperty("font-size","1.5rem"),H.style.setProperty("font-weight","600"),H.style.setProperty("color","var(--primary-color)"),c(H,()=>$().totalMovementsThisMonth),H}}),null),c(B,T(Vt,{get title(){return t("inventory.activeLocations")},get subtitle(){return t("inventory.warehousesStores")},get children(){var H=bo();return H.style.setProperty("font-size","1.5rem"),H.style.setProperty("font-weight","600"),H.style.setProperty("color","var(--primary-color)"),c(H,()=>$().activeLocations),H}}),null),c(q,(()=>{var H=Ve(()=>$().lowStockProducts>0);return()=>H()&&T(Vt,{get title(){return`⚠️ ${t("inventory.lowStockAlert")}`},get subtitle(){return`${$().lowStockProducts} ${t("inventory.productsNeedRestocking")}`},style:{"margin-bottom":"2rem","border-color":"#ffcdd2",background:"#ffebee"},get children(){var Y=bo();return Y.style.setProperty("margin-top","1rem"),c(Y,T(_t,{get each(){return At.getLowStockProducts().slice(0,9)},children:te=>(()=>{var oe=FM(),pe=oe.firstChild,ne=pe.firstChild,Q=ne.nextSibling;Q.nextSibling;var ce=pe.nextSibling,ue=ce.firstChild,de=ue.nextSibling;return de.nextSibling,oe.style.setProperty("display","flex"),oe.style.setProperty("justify-content","space-between"),oe.style.setProperty("margin-bottom","0.5rem"),oe.style.setProperty("font-size","0.875rem"),c(pe,()=>te.name,ne),c(pe,()=>te?.sku,Q),ce.style.setProperty("color","#d32f2f"),ce.style.setProperty("font-weight","600"),c(ce,()=>te.currentStock,ue),c(ce,()=>te.minStockLevel,de),c(ce,()=>t("inventory.min"),null),oe})()}),null),c(Y,(()=>{var te=Ve(()=>At.getLowStockProducts().length>5);return()=>te()&&(()=>{var oe=bo();return oe.style.setProperty("font-size","0.875rem"),oe.style.setProperty("color","var(--text-muted)"),oe.style.setProperty("font-style","italic"),c(oe,()=>t("common.andMore",{count:At.getLowStockProducts().length-9})),oe})()})(),null),Y}})})(),null),be(H=>y(B,X,H)),q})()),Ve(()=>Ve(()=>d()==="products")()&&T(qA,{})),Ve(()=>Ve(()=>d()==="movements")()&&T(c9,{})),Ve(()=>Ve(()=>d()==="locations")()&&(()=>{var q=MM(),B=q.firstChild,H=B.firstChild,Y=B.nextSibling;return B.style.setProperty("display","flex"),B.style.setProperty("justify-content","space-between"),B.style.setProperty("align-items","center"),B.style.setProperty("margin-bottom","1.5rem"),H.style.setProperty("margin","0"),H.style.setProperty("font-size","1.5rem"),c(H,()=>t("inventory.locations")),c(B,T(We,{get when(){return Xt.hasPermission("read_write")},get children(){return T(mt,{variant:"primary",onClick:()=>F(!0),get children(){return["🏭 ",Ve(()=>t("inventory.addLocation"))]}})}}),null),y(Y,O),c(Y,T(_t,{get each(){return At.getActiveLocations()},children:te=>{const oe=At.getStockByLocation(te.id),pe=oe?.length,ne=oe?.reduce((ce,ue)=>ce*1+ue.quantity*1,0),Q=oe?.reduce((ce,ue)=>(At?.getProductById(ue.productId),ce+(ue?.averageCost||0)),0);return(()=>{var ce=OM(),ue=ce.firstChild,de=ue.firstChild,ge=de.firstChild,ye=ge.nextSibling,fe=de.nextSibling,Se=fe.firstChild,qe=fe.nextSibling,Oe=ue.nextSibling,Ie=Oe.firstChild,Be=Ie.firstChild,ke=Be.firstChild,Ge=Be.nextSibling,et=Ie.nextSibling,ve=et.firstChild,De=ve.firstChild,He=ve.nextSibling,Je=et.nextSibling,Le=Je.firstChild,Te=Le.firstChild,he=Le.nextSibling,Ne=Oe.nextSibling,rt=Ne.firstChild,re=rt.firstChild;return ue.style.setProperty("margin-bottom","1rem"),ue.style.setProperty("padding-bottom","1rem"),ue.style.setProperty("border-bottom","1px solid var(--border-color)"),de.style.setProperty("display","flex"),de.style.setProperty("align-items","center"),de.style.setProperty("gap","0.5rem"),de.style.setProperty("margin-bottom","0.5rem"),ge.style.setProperty("font-size","1.2rem"),c(ge,()=>te.type==="warehouse"?"🏭":te.type==="store"?"🏪":te.type==="supplier"?"🚚":"👥"),ye.style.setProperty("margin","0"),ye.style.setProperty("font-size","1.1rem"),c(ye,()=>te.name),fe.style.setProperty("font-size","0.875rem"),fe.style.setProperty("color","var(--text-muted)"),c(fe,()=>te.code,Se),c(fe,()=>z(te.type),null),qe.style.setProperty("font-size","0.75rem"),qe.style.setProperty("color","var(--text-muted)"),qe.style.setProperty("margin-top","0.25rem"),c(qe,()=>te.address),Oe.style.setProperty("margin-bottom","1rem"),Ie.style.setProperty("display","flex"),Ie.style.setProperty("justify-content","space-between"),Ie.style.setProperty("margin-bottom","0.5rem"),Be.style.setProperty("font-size","0.875rem"),Be.style.setProperty("font-weight","500"),c(Be,()=>t("inventory.products"),ke),Ge.style.setProperty("font-weight","600"),c(Ge,pe),et.style.setProperty("display","flex"),et.style.setProperty("justify-content","space-between"),et.style.setProperty("margin-bottom","0.5rem"),ve.style.setProperty("font-size","0.875rem"),ve.style.setProperty("font-weight","500"),c(ve,()=>t("inventory.totalItems"),De),He.style.setProperty("font-weight","600"),He.style.setProperty("color","var(--primary-color)"),c(He,ne),Je.style.setProperty("display","flex"),Je.style.setProperty("justify-content","space-between"),Je.style.setProperty("margin-bottom","1rem"),Le.style.setProperty("font-size","0.875rem"),Le.style.setProperty("font-weight","500"),c(Le,()=>t("inventory.totalValue"),Te),he.style.setProperty("font-weight","600"),he.style.setProperty("color","var(--primary-color)"),c(he,()=>v(Q)),rt.style.setProperty("font-weight","600"),rt.style.setProperty("margin-bottom","0.75rem"),rt.style.setProperty("font-size","0.875rem"),rt.style.setProperty("color","var(--text-primary)"),rt.style.setProperty("border-bottom","1px solid var(--border-color)"),rt.style.setProperty("padding-bottom","0.5rem"),c(rt,()=>t("inventory.productDetails"),re),c(Ne,(()=>{var Ue=Ve(()=>oe?.length===0);return()=>Ue()?(()=>{var we=bo();return we.style.setProperty("text-align","center"),we.style.setProperty("color","var(--text-muted)"),we.style.setProperty("font-style","italic"),we.style.setProperty("padding","1rem"),c(we,()=>t("inventory.noProducts")),we})():(()=>{var we=bo();return we.style.setProperty("max-height","200px"),we.style.setProperty("overflow-y","auto"),we.style.setProperty("border","1px solid var(--border-color)"),we.style.setProperty("border-radius","var(--border-radius-sm)"),c(we,T(_t,{each:oe,children:xe=>{const je=At.getProductById(xe.productId);if(!je)return null;const $e=xe.quantity<=je.minStockLevel,ft=xe.averageCost;return xe.quantity?(()=>{var ct=BM(),yt=ct.firstChild,$t=yt.firstChild,bt=$t.firstChild,Gt=bt.nextSibling,Wt=$t.nextSibling,Dt=Wt.firstChild,Kt=Dt.firstChild,gt=Dt.nextSibling,St=gt.nextSibling;return St.firstChild,ct.style.setProperty("padding","0.75rem"),ct.style.setProperty("border-bottom","1px solid var(--border-color)"),($e?"#fff5f5":"transparent")!=null?ct.style.setProperty("background",$e?"#fff5f5":"transparent"):ct.style.removeProperty("background"),ct.style.setProperty("transition","background-color 0.2s ease"),yt.style.setProperty("display","flex"),yt.style.setProperty("justify-content","space-between"),yt.style.setProperty("align-items","flex-start"),yt.style.setProperty("margin-bottom","0.25rem"),$t.style.setProperty("flex","1"),bt.style.setProperty("font-weight","500"),bt.style.setProperty("font-size","0.875rem"),($e?"#d32f2f":"var(--text-primary)")!=null?bt.style.setProperty("color",$e?"#d32f2f":"var(--text-primary)"):bt.style.removeProperty("color"),c(bt,()=>je.name,null),c(bt,$e&&(()=>{var Qe=jM();return Qe.style.setProperty("margin-left","0.5rem"),Qe.style.setProperty("font-size","0.7rem"),Qe.style.setProperty("color","#d32f2f"),Qe})(),null),Gt.style.setProperty("font-size","0.75rem"),Gt.style.setProperty("color","var(--text-muted)"),Gt.style.setProperty("margin-top","0.1rem"),c(Gt,()=>je.sku,null),c(Gt,()=>je.UPC?" • "+je.UPC:"",null),c(Gt,()=>je.category?" • "+je.category:"",null),Wt.style.setProperty("text-align","right"),Dt.style.setProperty("font-weight","600"),Dt.style.setProperty("font-size","0.875rem"),($e?"#d32f2f":"var(--primary-color)")!=null?Dt.style.setProperty("color",$e?"#d32f2f":"var(--primary-color)"):Dt.style.removeProperty("color"),c(Dt,()=>xe.quantity,Kt),c(Dt,()=>je.unitOfMeasure,null),gt.style.setProperty("font-size","0.75rem"),gt.style.setProperty("color","var(--text-muted)"),c(gt,()=>v(ft)),St.style.setProperty("font-size","0.7rem"),St.style.setProperty("color","var(--text-muted)"),St.style.setProperty("margin-top","0.1rem"),c(St,()=>je.minStockLevel,null),ct})():null}})),we})()})(),null),be(Ue=>y(ce,{...L,"min-height":"400px"},Ue)),ce})()}})),q})())]}}),T(We,{get when(){return Xt.hasPermission("read_write")},get children(){return[T($F,{get isOpen(){return o()},onClose:()=>s(!1),get item(){return a()}}),T(n2,{get isOpen(){return g()},onClose:()=>F(!1),onLocationAdded:()=>{F(!1)}})]}}),T(IM,{get isOpen(){return n()},onClose:()=>i(!1)}),T(IF,{get isOpen(){return e()},onClose:()=>r(!1),get mode(){return h()==="new"?"movement":"legacy"}}),T(x9,{get isOpen(){return V()},onClose:()=>N(!1)}),T(wM,{get isOpen(){return R()},onClose:()=>M(!1)})]}})};tr(["click"]);tr(["click"]);const zM=[{id:"1",name:"John Doe",position:"Software Engineer",salary:85e3,email:"john.doe@company.com",phone:"+1 (555) 123-4567",department:"Engineering",startDate:"2023-01-15"},{id:"2",name:"Jane Smith",position:"Product Manager",salary:95e3,email:"jane.smith@company.com",phone:"+1 (555) 234-5678",department:"Product",startDate:"2022-08-20"},{id:"3",name:"Mike Brown",position:"Designer",salary:7e4,email:"mike.brown@company.com",phone:"+1 (555) 345-6789",department:"Design",startDate:"2023-03-10"},{id:"4",name:"Sarah Kim",position:"HR Manager",salary:78e3,email:"sarah.kim@company.com",phone:"+1 (555) 456-7890",department:"Human Resources",startDate:"2022-11-05"},{id:"5",name:"Alex Lee",position:"Data Analyst",salary:72e3,email:"alex.lee@company.com",phone:"+1 (555) 567-8901",department:"Analytics",startDate:"2023-02-28"},{id:"6",name:"Emma Wilson",position:"Marketing Manager",salary:82e3,email:"emma.wilson@company.com",phone:"+1 (555) 678-9012",department:"Marketing",startDate:"2022-09-15"}],[Ph,wv]=Ae(zM),HA={get employees(){return Ph()},addEmployee(t){const e={...t,id:Date.now().toString()};return wv([...Ph(),e]),e},updateEmployee(t,e){wv(Ph().map(r=>r.id===t?{...r,...e}:r))},deleteEmployee(t){wv(Ph().filter(e=>e.id!==t))},getEmployeeById(t){return Ph().find(e=>e.id===t)}};var UM=le("<form><div>");const qM=t=>{const{t:e}=pr(),[r,n]=Ae({name:"",position:"",salary:"",email:"",phone:"",department:"",startDate:""}),i=[{value:"Engineering",label:e("employees.departments.engineering","Engineering")},{value:"Product",label:e("employees.departments.product","Product")},{value:"Design",label:e("employees.departments.design","Design")},{value:"Marketing",label:e("employees.departments.marketing","Marketing")},{value:"Sales",label:e("employees.departments.sales","Sales")},{value:"Human Resources",label:e("employees.departments.humanResources","Human Resources")},{value:"Finance",label:e("employees.departments.finance","Finance")},{value:"Operations",label:e("employees.departments.operations","Operations")},{value:"Analytics",label:e("employees.departments.analytics","Analytics")}],o={display:"flex",gap:"1rem","justify-content":"flex-end","margin-top":"2rem"},s=l=>{l.preventDefault();const d=r();if(!d.name||!d.position||!d.salary||!d.email||!d.department||!d.startDate){alert(e("forms.requiredField"));return}const u={name:d.name,position:d.position,salary:parseFloat(d.salary),email:d.email,phone:d.phone,department:d.department,startDate:d.startDate};HA.addEmployee(u),n({name:"",position:"",salary:"",email:"",phone:"",department:"",startDate:""}),t.onClose()},a=(l,d)=>{n(u=>({...u,[l]:d}))};return T(Pi,{get isOpen(){return t.isOpen},get onClose(){return t.onClose},get title(){return e("employees.addEmployee")},get children(){var l=UM(),d=l.firstChild;return l.addEventListener("submit",s),c(l,T(Ot,{get label(){return e("employees.fullName")},get value(){return r().name},onChange:u=>a("name",u),get placeholder(){return e("employees.enterFullName","Enter employee's full name")},required:!0}),d),c(l,T(Ot,{get label(){return e("employees.position")},get value(){return r().position},onChange:u=>a("position",u),get placeholder(){return e("employees.enterPosition","Enter job position")},required:!0}),d),c(l,T(Nn,{get label(){return e("employees.department")},get value(){return r().department},onChange:u=>a("department",u),options:i,required:!0}),d),c(l,T(Ot,{get label(){return e("employees.email")},type:"email",get value(){return r().email},onChange:u=>a("email",u),get placeholder(){return e("employees.enterEmail","Enter email address")},required:!0}),d),c(l,T(Ot,{get label(){return e("employees.phone")},type:"tel",get value(){return r().phone},onChange:u=>a("phone",u),get placeholder(){return e("employees.enterPhone","Enter phone number")}}),d),c(l,T(Ot,{get label(){return e("employees.salary")},type:"number",get value(){return r().salary},onChange:u=>a("salary",u),get placeholder(){return e("employees.enterSalary","Enter annual salary")},required:!0}),d),c(l,T(Ot,{get label(){return e("employees.hireDate")},type:"date",get value(){return r().startDate},onChange:u=>a("startDate",u),required:!0}),d),y(d,o),c(d,T(mt,{variant:"secondary",type:"button",get onClick(){return t.onClose},get children(){return e("common.cancel")}}),null),c(d,T(mt,{variant:"primary",type:"submit",get children(){return e("employees.addEmployee")}}),null),l}})};var HM=le("<div><div></div><div></div><div>"),WM=le("<div><div><span></span><span></span></div><div><span></span><span></span></div><div><span></span><span></span></div><div><span></span><span></span></div><div><span></span><span></span></div><div><span></span><span>"),GM=le("<div>");const KM=t=>{const{t:e}=pr(),r={display:"flex","justify-content":"space-between","align-items":"center",padding:"0.75rem 0","border-bottom":"1px solid var(--border-color)"},n={"font-weight":"500",color:"var(--text-muted)","font-size":"0.875rem"},i={"font-weight":"600",color:"var(--text-primary)"},o={width:"80px",height:"80px","border-radius":"50%",background:"linear-gradient(135deg, var(--primary-color), var(--secondary-color))",display:"flex","align-items":"center","justify-content":"center",color:"white","font-weight":"600","font-size":"1.5rem",margin:"0 auto 1.5rem auto"},s={"text-align":"center","margin-bottom":"2rem"},a={"font-size":"1.5rem","font-weight":"600",color:"var(--text-primary)",margin:"0.5rem 0"},l={color:"var(--text-muted)","font-size":"1rem"},d={display:"flex",gap:"1rem","justify-content":"flex-end","margin-top":"2rem"};if(!t.employee)return null;const u=p=>p.split(" ").map(m=>m[0]).join("").toUpperCase(),h=p=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(p),f=p=>new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return T(Pi,{get isOpen(){return t.isOpen},get onClose(){return t.onClose},get title(){return e("employees.employeeDetails")},get children(){return[(()=>{var p=HM(),m=p.firstChild,x=m.nextSibling,P=x.nextSibling;return y(p,s),y(m,o),c(m,()=>u(t.employee.name)),y(x,a),c(x,()=>t.employee.name),y(P,l),c(P,()=>t.employee.position),p})(),(()=>{var p=WM(),m=p.firstChild,x=m.firstChild,P=x.nextSibling,g=m.nextSibling,F=g.firstChild,V=F.nextSibling,N=g.nextSibling,R=N.firstChild,M=R.nextSibling,C=N.nextSibling,k=C.firstChild,D=k.nextSibling,$=C.nextSibling,w=$.firstChild,_=w.nextSibling,v=$.nextSibling,z=v.firstChild,W=z.nextSibling;return c(x,()=>e("employees.employeeId")),c(P,()=>t.employee.id),c(F,()=>e("employees.department")),c(V,()=>t.employee.department),c(R,()=>e("employees.email")),c(M,()=>t.employee.email),c(k,()=>e("employees.phone")),c(D,()=>t.employee.phone),c(w,()=>e("employees.salary")),c(_,()=>h(t.employee.salary)),c(z,()=>e("employees.hireDate")),c(W,()=>f(t.employee.startDate)),be(A=>{var I=r,ee=n,Z=i,X=r,se=n,U=i,E=r,O=n,L=i,G=r,K=n,q=i,B=r,H=n,Y=i,te=r,oe=n,pe=i;return A.e=y(m,I,A.e),A.t=y(x,ee,A.t),A.a=y(P,Z,A.a),A.o=y(g,X,A.o),A.i=y(F,se,A.i),A.n=y(V,U,A.n),A.s=y(N,E,A.s),A.h=y(R,O,A.h),A.r=y(M,L,A.r),A.d=y(C,G,A.d),A.l=y(k,K,A.l),A.u=y(D,q,A.u),A.c=y($,B,A.c),A.w=y(w,H,A.w),A.m=y(_,Y,A.m),A.f=y(v,te,A.f),A.y=y(z,oe,A.y),A.g=y(W,pe,A.g),A},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0}),p})(),(()=>{var p=GM();return y(p,d),c(p,T(mt,{variant:"secondary",get onClick(){return t.onClose},get children(){return e("common.close")}}),null),c(p,T(mt,{variant:"primary",onClick:()=>{console.log("Edit employee:",t.employee.id)},get children(){return e("employees.editEmployee")}}),null),p})()]}})};var yx=le("<div>"),YM=le("<div><div></div><div><div></div><div></div><div>/year");const XM=()=>{const{t}=pr(),[e,r]=Ae(!1),[n,i]=Ae(!1),[o,s]=Ae(null),a=x=>{s(x),i(!0)},l={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem","margin-bottom":"2rem"},d={display:"flex","align-items":"center",gap:"1rem"},u={width:"60px",height:"60px","border-radius":"50%",background:"linear-gradient(135deg, var(--primary-color), var(--secondary-color))",display:"flex","align-items":"center","justify-content":"center",color:"white","font-weight":"600","font-size":"1.2rem"},h={flex:"1"},f={"font-weight":"600","margin-bottom":"0.25rem"},p={color:"var(--text-muted)","font-size":"0.875rem","margin-bottom":"0.5rem"},m={color:"var(--primary-color)","font-weight":"500"};return T(Bo,{get title(){return t("employees.title")},get children(){return[(()=>{var x=yx();return x.style.setProperty("margin-bottom","2rem"),c(x,T(mt,{variant:"primary",onClick:()=>r(!0),get children(){return t("employees.addEmployee")}})),x})(),(()=>{var x=yx();return y(x,l),c(x,()=>HA.employees.map(P=>{const g=V=>V.split(" ").map(N=>N[0]).join("").toUpperCase(),F=V=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(V);return T(Vt,{onClick:()=>a(P),get children(){var V=YM(),N=V.firstChild,R=N.nextSibling,M=R.firstChild,C=M.nextSibling,k=C.nextSibling,D=k.firstChild;return y(V,d),y(N,u),c(N,()=>g(P.name)),y(R,h),y(M,f),c(M,()=>P.name),y(C,p),c(C,()=>P.position),y(k,m),c(k,()=>F(P.salary),D),V}})})),x})(),T(qM,{get isOpen(){return e()},onClose:()=>r(!1)}),T(KM,{get isOpen(){return n()},onClose:()=>i(!1),get employee(){return o()}})]}})},ZM=[{id:"1",accountId:"1002",bankName:"First National Bank",accountNumber:"****1234",accountType:"checking",currency:"USD",currentBalance:32730.5,lastReconciledDate:"2024-01-01",lastReconciledBalance:3e4,isActive:!0},{id:"2",accountId:"1003",bankName:"First National Bank",accountNumber:"****5678",accountType:"savings",currency:"USD",currentBalance:12e3,lastReconciledDate:"2024-01-01",lastReconciledBalance:1e4,isActive:!0}],JM=[{id:"1",accountId:"1002",date:"2024-01-15",description:"Customer Payment - ABC Corp",reference:"CHK001234",debitAmount:5e3,creditAmount:0,balance:35730.5,category:"Customer Payment",isReconciled:!0,reconciledWith:"eb1",importedAt:"2024-01-16",source:"csv_import"},{id:"2",accountId:"1002",date:"2024-01-14",description:"Office Supplies - Staples",reference:"CHK001235",debitAmount:0,creditAmount:250,balance:30730.5,category:"Office Expenses",isReconciled:!0,reconciledWith:"eb2",importedAt:"2024-01-16",source:"csv_import"},{id:"3",accountId:"1002",date:"2024-01-13",description:"Monthly Rent Payment",reference:"CHK001236",debitAmount:0,creditAmount:2e3,balance:28730.5,category:"Rent",isReconciled:!1,importedAt:"2024-01-16",source:"csv_import"},{id:"4",accountId:"1002",date:"2024-01-12",description:"Wire Transfer In",reference:"WIRE001",debitAmount:1e4,creditAmount:0,balance:38730.5,category:"Wire Transfer",isReconciled:!1,importedAt:"2024-01-16",source:"csv_import"}],QM=[{id:"eb1",accountId:"1002",date:"2024-01-15",description:"Customer Payment Received - ABC Corp",reference:"INV-2024-001",debitAmount:5e3,creditAmount:0,category:"Accounts Receivable",isReconciled:!0,reconciledWith:"1",createdAt:"2024-01-15"},{id:"eb2",accountId:"1002",date:"2024-01-14",description:"Office Supplies Purchase",reference:"PO-2024-001",debitAmount:0,creditAmount:250,category:"Office Expenses",isReconciled:!0,reconciledWith:"2",createdAt:"2024-01-14"},{id:"eb3",accountId:"1002",date:"2024-01-11",description:"Salary Payment - John Doe",reference:"PAY-2024-001",debitAmount:0,creditAmount:3500,category:"Salary Expense",isReconciled:!1,createdAt:"2024-01-11"}],eO=[{id:"1",bankAccountId:"1",periodStart:"2024-01-01",periodEnd:"2024-01-15",startingBalance:3e4,endingBalance:35730.5,status:"in_progress",totalBankTransactions:4,totalEntryBookRecords:3,reconciledTransactions:2,unreconciledTransactions:2,discrepancyAmount:1500,createdAt:"2024-01-16",notes:"Wire transfer and rent payment need investigation"}],[zf,mx]=Ae(ZM),[Hl,Cv]=Ae(JM),[xh,gx]=Ae(QM),[Uf,vx]=Ae(eO),Ci={get bankAccounts(){return zf()},addBankAccount(t){const e={...t,id:Date.now().toString()};return mx([...zf(),e]),e},updateBankAccount(t,e){mx(zf().map(r=>r.id===t?{...r,...e}:r))},getBankAccountById(t){return zf().find(e=>e.id===t)},get bankStatements(){return Hl()},addBankStatement(t){const e={...t,id:Date.now().toString(),importedAt:new Date().toISOString()};return Cv([...Hl(),e]),e},addBankStatementsFromCSV(t){const e=t.map(r=>({...r,id:`csv_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,importedAt:new Date().toISOString(),source:"csv_import",isReconciled:!1}));return Cv([...Hl(),...e]),e},updateBankStatement(t,e){Cv(Hl().map(r=>r.id===t?{...r,...e}:r))},getBankStatementsByAccount(t){return Hl().filter(e=>e.accountId===t)},getUnreconciledBankStatements(t){return(t?this.getBankStatementsByAccount(t):Hl()).filter(r=>!r.isReconciled)},get entryBookRecords(){return xh()},addEntryBookRecord(t){const e={...t,id:Date.now().toString(),createdAt:new Date().toISOString()};return gx([...xh(),e]),e},updateEntryBookRecord(t,e){gx(xh().map(r=>r.id===t?{...r,...e}:r))},getEntryBookRecordsByAccount(t){return xh().filter(e=>e.accountId===t)},getUnreconciledEntryBookRecords(t){return(t?this.getEntryBookRecordsByAccount(t):xh()).filter(r=>!r.isReconciled)},reconcileTransaction(t,e){this.updateBankStatement(t,{isReconciled:!0,reconciledWith:e}),this.updateEntryBookRecord(e,{isReconciled:!0,reconciledWith:t})},unreconciledTransaction(t){const e=Hl().find(r=>r.id===t);e?.reconciledWith&&this.updateEntryBookRecord(e.reconciledWith,{isReconciled:!1,reconciledWith:void 0}),this.updateBankStatement(t,{isReconciled:!1,reconciledWith:void 0})},findPotentialMatches(t){const e=Hl().find(n=>n.id===t);return e?this.getUnreconciledEntryBookRecords(e.accountId).filter(n=>{const i=Math.abs(e.debitAmount-n.debitAmount)<.01||Math.abs(e.creditAmount-n.creditAmount)<.01,o=new Date(e.date),s=new Date(n.date),l=Math.abs((o.getTime()-s.getTime())/(1e3*60*60*24))<=3,d=e.reference===n.reference||e.description.toLowerCase().includes(n.description.toLowerCase())||n.description.toLowerCase().includes(e.description.toLowerCase());return i&&(l||d)}).sort((n,i)=>{const o=(n.date===e.date?2:0)+(n.reference===e.reference?1:0);return(i.date===e.date?2:0)+(i.reference===e.reference?1:0)-o}):[]},get reconciliationSessions(){return Uf()},startReconciliationSession(t,e,r){const n=this.getBankStatementsByAccount(t).filter(d=>d.date>=e&&d.date<=r),i=this.getEntryBookRecordsByAccount(t).filter(d=>d.date>=e&&d.date<=r),o=n.filter(d=>d.isReconciled).length,s=this.getBankAccountById(t)?.lastReconciledBalance||0,a=this.getBankAccountById(t)?.currentBalance||0,l={id:Date.now().toString(),bankAccountId:t,periodStart:e,periodEnd:r,startingBalance:s,endingBalance:a,status:"in_progress",totalBankTransactions:n.length,totalEntryBookRecords:i.length,reconciledTransactions:o,unreconciledTransactions:n.length-o,discrepancyAmount:0,createdAt:new Date().toISOString()};return vx([...Uf(),l]),l},updateReconciliationSession(t,e){vx(Uf().map(r=>r.id===t?{...r,...e}:r))},getReconciliationSessionsByAccount(t){return Uf().filter(e=>e.bankAccountId===t)}};var _v=le("<div>"),tO=le("<div><strong>:</strong> <!> - "),rO=le("<div><div><div>📄</div><div></div><div></div></div><input id=csvFileInput type=file accept=.csv>"),nO=le("<div><h4></h4><div><div><label> *</label><select><option value></option></select></div><div><label> *</label><select><option value></option></select></div><div><label></label><select><option value></option></select></div><div><label> *</label><select><option value></option></select></div><div><label></label><select><option value></option></select></div><div><label></label><select><option value>"),tu=le("<option>"),iO=le("<div><table><thead><tr></tr></thead><tbody>"),oO=le("<th>"),sO=le("<tr>"),aO=le("<td>");const lO=t=>{const{t:e}=pr(),[r,n]=Ae(!1),[i,o]=Ae(!1),[s,a]=Ae(null),[l,d]=Ae([]),[u,h]=Ae({date:"",description:"",reference:"",debit:"",credit:"",balance:""}),f={border:`2px dashed ${r()?"var(--primary-color)":"var(--border-color)"}`,"border-radius":"var(--border-radius)",padding:"2rem","text-align":"center","background-color":r()?"var(--background-color)":"transparent",transition:"all 0.2s ease",cursor:"pointer"},p={display:"grid","grid-template-columns":"1fr 1fr",gap:"1rem","margin-top":"1.5rem"},m={width:"100%",padding:"0.5rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-family":"inherit"},x={"max-height":"200px","overflow-y":"auto",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","margin-top":"1rem"},P={width:"100%","border-collapse":"collapse","font-size":"0.875rem"},g={padding:"0.5rem","border-bottom":"1px solid var(--border-color)","text-align":"left"},F={display:"flex",gap:"1rem","justify-content":"flex-end","margin-top":"2rem"},V=_=>{_.preventDefault(),n(!0)},N=_=>{_.preventDefault(),n(!1)},R=_=>{_.preventDefault(),n(!1);const v=_.dataTransfer?.files;v&&v.length>0&&C(v[0])},M=_=>{const v=_.target;v.files&&v.files.length>0&&C(v.files[0])},C=_=>{if(!_.name.toLowerCase().endsWith(".csv")){a({success:!1,message:e("banking.pleaseUploadCSV")});return}o(!0);const v=new FileReader;v.onload=z=>{try{const A=(z.target?.result).split(`
`).filter(X=>X.trim());if(A.length<2){a({success:!1,message:e("banking.csvRequiresHeaderAndData")}),o(!1);return}const I=A[0].split(",").map(X=>X.trim().replace(/[\"\']/g,"")),ee=A.slice(1).map(X=>{const se=X.split(",").map(E=>E.trim().replace(/[\"\']/g,"")),U={};return I.forEach((E,O)=>{U[E]=se[O]||""}),U});d(ee),a({success:!0,message:e("banking.successfullyParsed").replace("{count}",ee.length.toString()),count:ee.length});const Z={...u()};I.forEach(X=>{const se=X.toLowerCase();se.includes("date")&&(Z.date=X),(se.includes("description")||se.includes("memo"))&&(Z.description=X),(se.includes("reference")||se.includes("check")||se.includes("ref"))&&(Z.reference=X),(se.includes("debit")||se.includes("deposit"))&&(Z.debit=X),(se.includes("credit")||se.includes("withdrawal")||se.includes("amount"))&&(Z.debit?Z.credit=X:Z.debit=X),se.includes("balance")&&(Z.balance=X)}),h(Z)}catch{a({success:!1,message:e("banking.errorParsingCSV")})}o(!1)},v.readAsText(_)},k=(_,v)=>{h(z=>({...z,[_]:v}))},D=()=>l().length===0?[]:Object.keys(l()[0]),$=()=>{if(!t.bankAccount||l().length===0)return;const _=u();if(!_.date||!_.description){a({success:!1,message:e("banking.dateDescriptionRequired")});return}o(!0);try{const v=l().map(W=>{const A=X=>X&&parseFloat(X.replace(/[^0-9.-]/g,""))||0,I=X=>{const se=new Date(X);if(isNaN(se.getTime())){const U=X.split("/");if(U.length===3)return new Date(parseInt(U[2]),parseInt(U[0])-1,parseInt(U[1])).toISOString().split("T")[0]}return se.toISOString().split("T")[0]};let ee=0,Z=0;if(_.debit&&_.credit)ee=A(W[_.debit]),Z=A(W[_.credit]);else if(_.debit){const X=A(W[_.debit]);X>0?ee=X:Z=Math.abs(X)}return{accountId:t.bankAccount.accountId,date:I(W[_.date]),description:W[_.description]||e("banking.importedTransaction"),reference:W[_.reference]||"",debitAmount:ee,creditAmount:Z,balance:_.balance?A(W[_.balance]):0,isReconciled:!1}}),z=Ci.addBankStatementsFromCSV(v);a({success:!0,message:e("banking.successfullyImported").replace("{count}",z.length.toString()),count:z.length}),d([]),h({date:"",description:"",reference:"",debit:"",credit:"",balance:""})}catch{a({success:!1,message:e("banking.errorImportingTransactions")})}o(!1)},w=()=>{d([]),a(null),h({date:"",description:"",reference:"",debit:"",credit:"",balance:""})};return T(Pi,{get isOpen(){return t.isOpen},get onClose(){return t.onClose},get title(){return e("banking.importBankStatementCSV")},get children(){return[Ve(()=>Ve(()=>!!t.bankAccount)()&&(()=>{var _=tO(),v=_.firstChild,z=v.firstChild,W=v.nextSibling,A=W.nextSibling;return A.nextSibling,_.style.setProperty("margin-bottom","1.5rem"),_.style.setProperty("padding","1rem"),_.style.setProperty("background","var(--background-color)"),_.style.setProperty("border-radius","var(--border-radius-sm)"),_.style.setProperty("border","1px solid var(--border-color)"),c(v,()=>e("banking.bankAccount"),z),c(_,()=>t.bankAccount.bankName,A),c(_,()=>t.bankAccount.accountNumber,null),_})()),Ve(()=>Ve(()=>l().length===0)()?(()=>{var _=rO(),v=_.firstChild,z=v.firstChild,W=z.nextSibling,A=W.nextSibling,I=v.nextSibling;return v.$$click=()=>document.getElementById("csvFileInput")?.click(),v.addEventListener("drop",R),v.addEventListener("dragleave",N),v.addEventListener("dragover",V),z.style.setProperty("font-size","2rem"),z.style.setProperty("margin-bottom","1rem"),W.style.setProperty("font-weight","500"),W.style.setProperty("margin-bottom","0.5rem"),c(W,(()=>{var ee=Ve(()=>!!r());return()=>ee()?e("banking.dropCSVHere"):e("banking.clickToUploadCSV")})()),A.style.setProperty("font-size","0.875rem"),A.style.setProperty("color","var(--text-muted)"),c(A,()=>e("banking.supportedFormat")),I.addEventListener("change",M),I.style.setProperty("display","none"),be(ee=>y(v,f,ee)),_})():(()=>{var _=nO(),v=_.firstChild,z=v.nextSibling,W=z.firstChild,A=W.firstChild,I=A.firstChild,ee=A.nextSibling,Z=ee.firstChild,X=W.nextSibling,se=X.firstChild,U=se.firstChild,E=se.nextSibling,O=E.firstChild,L=X.nextSibling,G=L.firstChild,K=G.nextSibling,q=K.firstChild,B=L.nextSibling,H=B.firstChild,Y=H.firstChild,te=H.nextSibling,oe=te.firstChild,pe=B.nextSibling,ne=pe.firstChild,Q=ne.nextSibling,ce=Q.firstChild,ue=pe.nextSibling,de=ue.firstChild,ge=de.nextSibling,ye=ge.firstChild;return v.style.setProperty("margin","0 0 1rem 0"),c(v,()=>e("banking.mapCSVColumns")),y(z,p),A.style.setProperty("display","block"),A.style.setProperty("margin-bottom","0.5rem"),A.style.setProperty("font-weight","500"),c(A,()=>e("banking.dateColumn"),I),ee.addEventListener("change",fe=>k("date",fe.target.value)),c(Z,()=>e("banking.selectColumn")),c(ee,()=>D().map(fe=>(()=>{var Se=tu();return Se.value=fe,c(Se,fe),Se})()),null),se.style.setProperty("display","block"),se.style.setProperty("margin-bottom","0.5rem"),se.style.setProperty("font-weight","500"),c(se,()=>e("banking.descriptionColumn"),U),E.addEventListener("change",fe=>k("description",fe.target.value)),c(O,()=>e("banking.selectColumn")),c(E,()=>D().map(fe=>(()=>{var Se=tu();return Se.value=fe,c(Se,fe),Se})()),null),G.style.setProperty("display","block"),G.style.setProperty("margin-bottom","0.5rem"),G.style.setProperty("font-weight","500"),c(G,()=>e("banking.referenceColumn")),K.addEventListener("change",fe=>k("reference",fe.target.value)),c(q,()=>e("banking.selectColumn")),c(K,()=>D().map(fe=>(()=>{var Se=tu();return Se.value=fe,c(Se,fe),Se})()),null),H.style.setProperty("display","block"),H.style.setProperty("margin-bottom","0.5rem"),H.style.setProperty("font-weight","500"),c(H,()=>e("banking.amountDebitColumn"),Y),te.addEventListener("change",fe=>k("debit",fe.target.value)),c(oe,()=>e("banking.selectColumn")),c(te,()=>D().map(fe=>(()=>{var Se=tu();return Se.value=fe,c(Se,fe),Se})()),null),ne.style.setProperty("display","block"),ne.style.setProperty("margin-bottom","0.5rem"),ne.style.setProperty("font-weight","500"),c(ne,()=>e("banking.creditColumn")),Q.addEventListener("change",fe=>k("credit",fe.target.value)),c(ce,()=>e("banking.selectColumn")),c(Q,()=>D().map(fe=>(()=>{var Se=tu();return Se.value=fe,c(Se,fe),Se})()),null),de.style.setProperty("display","block"),de.style.setProperty("margin-bottom","0.5rem"),de.style.setProperty("font-weight","500"),c(de,()=>e("banking.balanceColumn")),ge.addEventListener("change",fe=>k("balance",fe.target.value)),c(ye,()=>e("banking.selectColumn")),c(ge,()=>D().map(fe=>(()=>{var Se=tu();return Se.value=fe,c(Se,fe),Se})()),null),c(_,(()=>{var fe=Ve(()=>l().length>0);return()=>fe()&&(()=>{var Se=iO(),qe=Se.firstChild,Oe=qe.firstChild,Ie=Oe.firstChild,Be=Oe.nextSibling;return y(Se,x),Ie.style.setProperty("background-color","var(--background-color)"),c(Ie,()=>D().slice(0,6).map(ke=>(()=>{var Ge=oO();return c(Ge,ke),be(et=>y(Ge,g,et)),Ge})())),c(Be,()=>l().slice(0,3).map(ke=>(()=>{var Ge=sO();return c(Ge,()=>D().slice(0,6).map(et=>(()=>{var ve=aO();return c(ve,()=>ke[et]),be(De=>y(ve,g,De)),ve})())),Ge})())),c(Se,(()=>{var ke=Ve(()=>l().length>3);return()=>ke()&&(()=>{var Ge=_v();return Ge.style.setProperty("padding","0.5rem"),Ge.style.setProperty("text-align","center"),Ge.style.setProperty("color","var(--text-muted)"),c(Ge,()=>e("banking.andMoreRows").replace("{count}",(l().length-3).toString())),Ge})()})(),null),be(ke=>y(qe,P,ke)),Se})()})(),null),be(fe=>{var Se=m,qe=m,Oe=m,Ie=m,Be=m,ke=m;return fe.e=y(ee,Se,fe.e),fe.t=y(E,qe,fe.t),fe.a=y(K,Oe,fe.a),fe.o=y(te,Ie,fe.o),fe.i=y(Q,Be,fe.i),fe.n=y(ge,ke,fe.n),fe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),be(()=>ee.value=u().date),be(()=>E.value=u().description),be(()=>K.value=u().reference),be(()=>te.value=u().debit),be(()=>Q.value=u().credit),be(()=>ge.value=u().balance),_})()),Ve(()=>Ve(()=>!!s())()&&(()=>{var _=_v();return _.style.setProperty("padding","1rem"),_.style.setProperty("border-radius","var(--border-radius-sm)"),_.style.setProperty("margin-top","1rem"),c(_,()=>s().message),be(v=>{var z=s().success?"#d4edda":"#f8d7da",W=s().success?"#155724":"#721c24",A=`1px solid ${s().success?"#c3e6cb":"#f5c6cb"}`;return z!==v.e&&((v.e=z)!=null?_.style.setProperty("background",z):_.style.removeProperty("background")),W!==v.t&&((v.t=W)!=null?_.style.setProperty("color",W):_.style.removeProperty("color")),A!==v.a&&((v.a=A)!=null?_.style.setProperty("border",A):_.style.removeProperty("border")),v},{e:void 0,t:void 0,a:void 0}),_})()),(()=>{var _=_v();return y(_,F),c(_,T(mt,{variant:"secondary",onClick:()=>{w(),t.onClose()},get children(){return e("common.cancel")}}),null),c(_,(()=>{var v=Ve(()=>l().length>0);return()=>v()&&T(mt,{variant:"outline",onClick:w,get children(){return e("common.reset")}})})(),null),c(_,(()=>{var v=Ve(()=>l().length>0);return()=>v()&&T(mt,{variant:"primary",onClick:$,get disabled(){return i()||!u().date||!u().description},get children(){return Ve(()=>!!i())()?e("banking.importing"):e("banking.importTransactions").replace("{count}",l().length.toString())}})})(),null),_})()]}})};tr(["click"]);var bx=le("<span>"),qf=le("<div>"),Px=le("<div> "),cO=le("<div><div><h3></h3><div><button></button><button></button><button></button></div></div><div></div><div><div><h4></h4><div></div></div><div><h4></h4><div>"),dO=le("<div><div><div></div><div> • </div></div><div><div>"),Av=le("<span>✓ "),uO=le("<span>(<!>)"),hO=le("<div><strong>:</strong> "),xx=le("<div><div><div></div><div> • </div></div><div>"),pO=le("<div><div>:</div><div></div><div>");const fO=t=>{const{t:e}=pr(),[r,n]=Ae([]),[i,o]=Ae([]),[s,a]=Ae(null),[l,d]=Ae([]),[u,h]=Ae("unreconciled");Ei(()=>{const A=Ci.getBankAccountById(t.bankAccountId);if(A){const I=Ci.getBankStatementsByAccount(A.accountId).filter(Z=>Z.date>=t.selectedPeriod.start&&Z.date<=t.selectedPeriod.end),ee=Ci.getEntryBookRecordsByAccount(A.accountId).filter(Z=>Z.date>=t.selectedPeriod.start&&Z.date<=t.selectedPeriod.end);n(I),o(ee)}});const f=()=>{const A=r();switch(u()){case"reconciled":return A.filter(I=>I.isReconciled);case"unreconciled":return A.filter(I=>!I.isReconciled);default:return A}},p=()=>{const A=i();switch(u()){case"reconciled":return A.filter(I=>I.isReconciled);case"unreconciled":return A.filter(I=>!I.isReconciled);default:return A}},m=A=>{if(a(A),A.isReconciled)d([]);else{const I=Ci.findPotentialMatches(A.id);d(I)}},x=A=>{const I=s();if(I){Ci.reconcileTransaction(I.id,A.id);const ee=Ci.getBankAccountById(t.bankAccountId);if(ee){const Z=Ci.getBankStatementsByAccount(ee.accountId).filter(se=>se.date>=t.selectedPeriod.start&&se.date<=t.selectedPeriod.end),X=Ci.getEntryBookRecordsByAccount(ee.accountId).filter(se=>se.date>=t.selectedPeriod.start&&se.date<=t.selectedPeriod.end);n(Z),o(X)}a(null),d([])}},P=A=>{Ci.unreconciledTransaction(A.id);const I=Ci.getBankAccountById(t.bankAccountId);if(I){const ee=Ci.getBankStatementsByAccount(I.accountId).filter(X=>X.date>=t.selectedPeriod.start&&X.date<=t.selectedPeriod.end),Z=Ci.getEntryBookRecordsByAccount(I.accountId).filter(X=>X.date>=t.selectedPeriod.start&&X.date<=t.selectedPeriod.end);n(ee),o(Z)}},g={display:"grid","grid-template-columns":"1fr 1fr",gap:"2rem","margin-top":"2rem"},F={height:"600px","overflow-y":"auto"},V={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"1rem"},N=A=>({padding:"0.5rem 1rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)",background:A?"var(--primary-color)":"var(--surface-color)",color:A?"white":"var(--text-primary)",cursor:"pointer","font-weight":"500","font-size":"0.875rem",transition:"all 0.2s ease"}),R=(A,I)=>({display:"flex","justify-content":"space-between","align-items":"center",padding:"1rem","margin-bottom":"0.5rem",background:A?"var(--primary-color)":I?"#e8f5e8":"var(--surface-color)",color:A?"white":"var(--text-primary)","border-radius":"var(--border-radius-sm)",border:`1px solid ${A?"var(--primary-color)":I?"#c3e6cb":"var(--border-color)"}`,cursor:"pointer",transition:"all 0.2s ease"}),M={flex:"1"},C={"font-weight":"500","margin-bottom":"0.25rem"},k={"font-size":"0.875rem",opacity:"0.8"},D=A=>({"font-weight":"600",color:A?"#4caf50":"#f44336"}),$={padding:"0.25rem 0.5rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"500","margin-left":"0.5rem"},w=A=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(A),_=A=>new Date(A).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),v=A=>{if(!s())return null;const I=s();return(Math.abs(I.debitAmount-A.debitAmount)<.01||Math.abs(I.creditAmount-A.creditAmount)<.01)&&I.date===A.date?(()=>{var X=bx();return c(X,()=>e("banking.exactMatch")),be(se=>y(X,{...$,background:"#d4edda",color:"#155724"},se)),X})():l().includes(A)?(()=>{var X=bx();return c(X,()=>e("banking.possibleMatch")),be(se=>y(X,{...$,background:"#fff3cd",color:"#856404"},se)),X})():null},W=(()=>{const A=r(),I=i(),ee=A.filter(X=>X.isReconciled).length,Z=I.filter(X=>X.isReconciled).length;return{totalStatements:A.length,totalRecords:I.length,reconciledStatements:ee,reconciledRecords:Z,unreconciledStatements:A.length-ee,unreconciledRecords:I.length-Z}})();return(()=>{var A=cO(),I=A.firstChild,ee=I.firstChild,Z=ee.nextSibling,X=Z.firstChild,se=X.nextSibling,U=se.nextSibling,E=I.nextSibling,O=E.nextSibling,L=O.firstChild,G=L.firstChild,K=G.nextSibling,q=L.nextSibling,B=q.firstChild,H=B.nextSibling;return y(I,V),ee.style.setProperty("margin","0"),ee.style.setProperty("font-size","1.25rem"),c(ee,()=>e("banking.reconciliationComparison")),Z.style.setProperty("display","flex"),Z.style.setProperty("gap","0.5rem"),X.$$click=()=>h("all"),c(X,()=>e("common.all")),se.$$click=()=>h("unreconciled"),c(se,()=>e("banking.unreconciled")),U.$$click=()=>h("reconciled"),c(U,()=>e("banking.reconciled")),E.style.setProperty("display","grid"),E.style.setProperty("grid-template-columns","repeat(4, 1fr)"),E.style.setProperty("gap","1rem"),E.style.setProperty("margin-bottom","2rem"),c(E,T(Vt,{get title(){return e("banking.bankStatements")},get subtitle(){return e("banking.totalTransactions")},get children(){return[(()=>{var Y=qf();return Y.style.setProperty("font-size","1.5rem"),Y.style.setProperty("font-weight","600"),Y.style.setProperty("color","var(--primary-color)"),c(Y,()=>W.totalStatements),Y})(),(()=>{var Y=Px(),te=Y.firstChild;return Y.style.setProperty("font-size","0.875rem"),Y.style.setProperty("color","var(--text-muted)"),c(Y,()=>W.reconciledStatements,te),c(Y,()=>e("banking.reconciled"),null),Y})()]}}),null),c(E,T(Vt,{get title(){return e("banking.entryBookRecords")},get subtitle(){return e("banking.totalEntries")},get children(){return[(()=>{var Y=qf();return Y.style.setProperty("font-size","1.5rem"),Y.style.setProperty("font-weight","600"),Y.style.setProperty("color","var(--primary-color)"),c(Y,()=>W.totalRecords),Y})(),(()=>{var Y=Px(),te=Y.firstChild;return Y.style.setProperty("font-size","0.875rem"),Y.style.setProperty("color","var(--text-muted)"),c(Y,()=>W.reconciledRecords,te),c(Y,()=>e("banking.reconciled"),null),Y})()]}}),null),c(E,T(Vt,{get title(){return e("banking.unreconciledBank")},get subtitle(){return e("banking.needAttention")},get children(){var Y=qf();return Y.style.setProperty("font-size","1.5rem"),Y.style.setProperty("font-weight","600"),Y.style.setProperty("color","#f44336"),c(Y,()=>W.unreconciledStatements),Y}}),null),c(E,T(Vt,{get title(){return e("banking.unreconciledBooks")},get subtitle(){return e("banking.needAttention")},get children(){var Y=qf();return Y.style.setProperty("font-size","1.5rem"),Y.style.setProperty("font-weight","600"),Y.style.setProperty("color","#f44336"),c(Y,()=>W.unreconciledRecords),Y}}),null),y(O,g),G.style.setProperty("margin","0 0 1rem 0"),c(G,()=>e("banking.bankStatements")),c(K,()=>f().map(Y=>(()=>{var te=dO(),oe=te.firstChild,pe=oe.firstChild,ne=pe.nextSibling,Q=ne.firstChild,ce=oe.nextSibling,ue=ce.firstChild;return te.$$click=()=>m(Y),c(pe,()=>Y.description),c(ne,()=>_(Y.date),Q),c(ne,()=>Y.reference,null),c(ne,(()=>{var de=Ve(()=>!!Y.isReconciled);return()=>de()&&(()=>{var ge=Av();return ge.firstChild,ge.style.setProperty("color","#4caf50"),ge.style.setProperty("margin-left","0.5rem"),c(ge,()=>e("banking.reconciled"),null),ge})()})(),null),c(ue,()=>Y.debitAmount>0?"+":"-",null),c(ue,()=>w(Y.debitAmount||Y.creditAmount),null),c(ce,(()=>{var de=Ve(()=>!!Y.isReconciled);return()=>de()&&T(mt,{variant:"outline",size:"sm",onClick:ge=>{ge.stopPropagation(),P(Y)},style:{"margin-top":"0.5rem"},get children(){return e("banking.unreconcile")}})})(),null),be(de=>{var ge=R(s()?.id===Y.id,Y.isReconciled),ye=M,fe=C,Se=k,qe=D(Y.debitAmount>0);return de.e=y(te,ge,de.e),de.t=y(oe,ye,de.t),de.a=y(pe,fe,de.a),de.o=y(ne,Se,de.o),de.i=y(ue,qe,de.i),de},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),te})())),B.style.setProperty("margin","0 0 1rem 0"),c(B,()=>e("banking.entryBookRecords"),null),c(B,(()=>{var Y=Ve(()=>!!(s()&&!s().isReconciled));return()=>Y()&&(()=>{var te=uO(),oe=te.firstChild,pe=oe.nextSibling;return pe.nextSibling,te.style.setProperty("font-weight","400"),te.style.setProperty("color","var(--text-muted)"),te.style.setProperty("margin-left","0.5rem"),c(te,()=>e("banking.clickToReconcile"),pe),te})()})(),null),c(H,(()=>{var Y=Ve(()=>!!(s()&&!s().isReconciled));return()=>Y()?[Ve(()=>Ve(()=>l().length>0)()&&(()=>{var te=hO(),oe=te.firstChild,pe=oe.firstChild;return oe.nextSibling,te.style.setProperty("margin-bottom","1rem"),te.style.setProperty("padding","0.75rem"),te.style.setProperty("background","#fff3cd"),te.style.setProperty("border-radius","var(--border-radius-sm)"),c(oe,()=>e("banking.potentialMatchesFound"),pe),c(te,()=>e("banking.clickRecordToReconcile"),null),te})()),Ve(()=>p().map(te=>(l().includes(te),(()=>{var oe=xx(),pe=oe.firstChild,ne=pe.firstChild,Q=ne.nextSibling,ce=Q.firstChild,ue=pe.nextSibling;return oe.$$click=()=>{te.isReconciled||x(te)},c(ne,()=>te.description,null),c(ne,()=>v(te),null),c(Q,()=>_(te.date),ce),c(Q,()=>te.reference,null),c(Q,(()=>{var de=Ve(()=>!!te.isReconciled);return()=>de()&&(()=>{var ge=Av();return ge.firstChild,ge.style.setProperty("color","#4caf50"),ge.style.setProperty("margin-left","0.5rem"),c(ge,()=>e("banking.reconciled"),null),ge})()})(),null),c(ue,()=>te.debitAmount>0?"+":"-",null),c(ue,()=>w(te.debitAmount||te.creditAmount),null),be(de=>{var ge={...R(!1,te.isReconciled),opacity:te.isReconciled?.6:1,cursor:te.isReconciled?"not-allowed":"pointer"},ye=M,fe=C,Se=k,qe=D(te.debitAmount>0);return de.e=y(oe,ge,de.e),de.t=y(pe,ye,de.t),de.a=y(ne,fe,de.a),de.o=y(Q,Se,de.o),de.i=y(ue,qe,de.i),de},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),oe})())))]:p().map(te=>(()=>{var oe=xx(),pe=oe.firstChild,ne=pe.firstChild,Q=ne.nextSibling,ce=Q.firstChild,ue=pe.nextSibling;return c(ne,()=>te.description),c(Q,()=>_(te.date),ce),c(Q,()=>te.reference,null),c(Q,(()=>{var de=Ve(()=>!!te.isReconciled);return()=>de()&&(()=>{var ge=Av();return ge.firstChild,ge.style.setProperty("color","#4caf50"),ge.style.setProperty("margin-left","0.5rem"),c(ge,()=>e("banking.reconciled"),null),ge})()})(),null),c(ue,()=>te.debitAmount>0?"+":"-",null),c(ue,()=>w(te.debitAmount||te.creditAmount),null),be(de=>{var ge=R(!1,te.isReconciled),ye=M,fe=C,Se=k,qe=D(te.debitAmount>0);return de.e=y(oe,ge,de.e),de.t=y(pe,ye,de.t),de.a=y(ne,fe,de.a),de.o=y(Q,Se,de.o),de.i=y(ue,qe,de.i),de},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),oe})())})()),c(A,(()=>{var Y=Ve(()=>!!(s()&&!s().isReconciled));return()=>Y()&&(()=>{var te=pO(),oe=te.firstChild,pe=oe.firstChild,ne=oe.nextSibling,Q=ne.nextSibling;return te.style.setProperty("position","fixed"),te.style.setProperty("bottom","2rem"),te.style.setProperty("right","2rem"),te.style.setProperty("background","var(--surface-color)"),te.style.setProperty("padding","1rem"),te.style.setProperty("border-radius","var(--border-radius)"),te.style.setProperty("box-shadow","var(--shadow-lg)"),te.style.setProperty("border","1px solid var(--border-color)"),te.style.setProperty("max-width","300px"),oe.style.setProperty("font-weight","500"),oe.style.setProperty("margin-bottom","0.5rem"),c(oe,()=>e("banking.selected"),pe),ne.style.setProperty("font-size","0.875rem"),ne.style.setProperty("margin-bottom","0.5rem"),c(ne,()=>s().description),Q.style.setProperty("font-weight","600"),Q.style.setProperty("color","var(--primary-color)"),c(Q,()=>w(s().debitAmount||s().creditAmount)),c(te,T(mt,{variant:"secondary",size:"sm",onClick:()=>{a(null),d([])},style:{"margin-top":"0.5rem"},get children(){return e("banking.clearSelection")}}),null),te})()})(),null),be(Y=>{var te=N(u()==="all"),oe=N(u()==="unreconciled"),pe=N(u()==="reconciled"),ne=F,Q=F;return Y.e=y(X,te,Y.e),Y.t=y(se,oe,Y.t),Y.a=y(U,pe,Y.a),Y.o=y(K,ne,Y.o),Y.i=y(H,Q,Y.i),Y},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),A})()};tr(["click"]);var yO=le("<div><div><h2></h2><p></p></div><div>"),mO=le("<div><div><label></label></div><div><label></label><input type=date></div><div><label></label><input type=date>"),gO=le("<div><button></button><button>"),vO=le("<div><br>"),Sh=le("<div>"),bO=le("<div><div></div><div> • </div><div>"),PO=le("<div>: "),xO=le("<div> <!> • <!> "),SO=le("<div>%"),wO=le("<div> of <!> transactions");const CO=()=>{const{t}=pr(),[e,r]=Ae(null),[n,i]=Ae({start:new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),[o,s]=Ae(!1),[a,l]=Ae("overview");Ei(()=>{!e()&&Ci.bankAccounts.length>0&&r(Ci.bankAccounts[0])});const d={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"2rem"},u={display:"flex",gap:"1rem","align-items":"center","margin-bottom":"2rem",padding:"1.5rem",background:"var(--surface-color)","border-radius":"var(--border-radius)",border:"1px solid var(--border-color)"},h={display:"flex","border-bottom":"1px solid var(--border-color)","margin-bottom":"2rem"},f=V=>({padding:"1rem 2rem",background:"none",border:"none",cursor:"pointer","font-weight":"500",color:V?"var(--primary-color)":"var(--text-muted)","border-bottom":V?"2px solid var(--primary-color)":"2px solid transparent",transition:"all 0.2s ease"}),p={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem","margin-bottom":"2rem"},m=V=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(V),x=V=>new Date(V).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),P=()=>Ci.bankAccounts.map(V=>({value:V.id,label:`${V.bankName} - ${V.accountNumber} (${V.accountType})`})),F=(()=>{if(!e())return null;const V=Ci.getBankStatementsByAccount(e().accountId).filter(M=>M.date>=n().start&&M.date<=n().end),N=Ci.getEntryBookRecordsByAccount(e().accountId).filter(M=>M.date>=n().start&&M.date<=n().end),R=V.filter(M=>M.isReconciled).length;return N.filter(M=>M.isReconciled).length,{totalBankTransactions:V.length,totalEntryBookRecords:N.length,reconciledTransactions:R,unreconciledTransactions:V.length-R,reconciliationRate:V.length>0?R/V.length*100:0}})();return T(Bo,{get title(){return t("banking.title")},get children(){return[(()=>{var V=yO(),N=V.firstChild,R=N.firstChild,M=R.nextSibling,C=N.nextSibling;return y(V,d),R.style.setProperty("margin","0 0 0.5rem 0"),R.style.setProperty("font-size","1.5rem"),c(R,()=>t("banking.reconciliation")),M.style.setProperty("margin","0"),M.style.setProperty("color","var(--text-muted)"),c(M,()=>t("banking.compareStatements")),C.style.setProperty("display","flex"),C.style.setProperty("gap","1rem"),c(C,T(mt,{variant:"secondary",onClick:()=>s(!0),get disabled(){return!e()},get children(){return t("banking.importCSV")}}),null),c(C,T(mt,{variant:"primary",get children(){return t("banking.startNewReconciliation")}}),null),V})(),(()=>{var V=mO(),N=V.firstChild,R=N.firstChild,M=N.nextSibling,C=M.firstChild,k=C.nextSibling,D=M.nextSibling,$=D.firstChild,w=$.nextSibling;return y(V,u),N.style.setProperty("flex","1"),R.style.setProperty("display","block"),R.style.setProperty("margin-bottom","0.5rem"),R.style.setProperty("font-weight","500"),c(R,()=>t("banking.bankAccount")),c(N,T(Nn,{label:"",get value(){return e()?.id||""},onChange:_=>{const v=Ci.getBankAccountById(_);r(v||null)},get options(){return P()}}),null),C.style.setProperty("display","block"),C.style.setProperty("margin-bottom","0.5rem"),C.style.setProperty("font-weight","500"),c(C,()=>t("entryBooks.startDate")),k.addEventListener("change",_=>i(v=>({...v,start:_.target.value}))),k.style.setProperty("padding","0.75rem"),k.style.setProperty("border","1px solid var(--border-color)"),k.style.setProperty("border-radius","var(--border-radius-sm)"),k.style.setProperty("font-family","inherit"),$.style.setProperty("display","block"),$.style.setProperty("margin-bottom","0.5rem"),$.style.setProperty("font-weight","500"),c($,()=>t("entryBooks.endDate")),w.addEventListener("change",_=>i(v=>({...v,end:_.target.value}))),w.style.setProperty("padding","0.75rem"),w.style.setProperty("border","1px solid var(--border-color)"),w.style.setProperty("border-radius","var(--border-radius-sm)"),w.style.setProperty("font-family","inherit"),be(()=>k.value=n().start),be(()=>w.value=n().end),V})(),(()=>{var V=gO(),N=V.firstChild,R=N.nextSibling;return y(V,h),N.$$click=()=>l("overview"),c(N,()=>t("common.overview")),R.$$click=()=>l("reconciliation"),c(R,()=>t("banking.reconciliation")),be(M=>{var C=f(a()==="overview"),k=f(a()==="reconciliation");return M.e=y(N,C,M.e),M.t=y(R,k,M.t),M},{e:void 0,t:void 0}),V})(),Ve(()=>Ve(()=>a()==="overview")()&&(()=>{var V=Sh();return c(V,(()=>{var N=Ve(()=>!!e());return()=>N()&&(()=>{var R=Sh();return y(R,p),c(R,T(Vt,{get title(){return t("banking.bankAccountInfo")},get subtitle(){return t("banking.currentAccountDetails")},get children(){return[(()=>{var M=bO(),C=M.firstChild,k=C.nextSibling,D=k.firstChild,$=k.nextSibling;return M.style.setProperty("margin-bottom","1rem"),C.style.setProperty("font-weight","600"),C.style.setProperty("margin-bottom","0.5rem"),c(C,()=>e().bankName),k.style.setProperty("color","var(--text-muted)"),k.style.setProperty("margin-bottom","0.5rem"),c(k,()=>e().accountNumber,D),c(k,()=>e().accountType,null),$.style.setProperty("font-size","1.25rem"),$.style.setProperty("font-weight","600"),$.style.setProperty("color","var(--primary-color)"),c($,()=>m(e().currentBalance)),M})(),Ve(()=>Ve(()=>!!e().lastReconciledDate)()&&(()=>{var M=PO(),C=M.firstChild;return M.style.setProperty("font-size","0.875rem"),M.style.setProperty("color","var(--text-muted)"),c(M,()=>t("banking.lastReconciled"),C),c(M,()=>x(e().lastReconciledDate),null),M})())]}}),null),c(R,F&&[T(Vt,{get title(){return t("banking.bankTransactions")},get subtitle(){return t("banking.selectedPeriod")},get children(){return[(()=>{var M=Sh();return M.style.setProperty("font-size","1.5rem"),M.style.setProperty("font-weight","600"),M.style.setProperty("color","var(--primary-color)"),M.style.setProperty("margin-bottom","0.5rem"),c(M,()=>F.totalBankTransactions),M})(),(()=>{var M=xO(),C=M.firstChild,k=C.nextSibling,D=k.nextSibling,$=D.nextSibling;return $.nextSibling,M.style.setProperty("font-size","0.875rem"),M.style.setProperty("color","var(--text-muted)"),c(M,()=>F.reconciledTransactions,C),c(M,()=>t("banking.reconciled"),k),c(M,()=>F.unreconciledTransactions,$),c(M,()=>t("banking.pending"),null),M})()]}}),T(Vt,{get title(){return t("entryBooks.entryBookRecords")},get subtitle(){return t("banking.selectedPeriod")},get children(){return[(()=>{var M=Sh();return M.style.setProperty("font-size","1.5rem"),M.style.setProperty("font-weight","600"),M.style.setProperty("color","var(--primary-color)"),M.style.setProperty("margin-bottom","0.5rem"),c(M,()=>F.totalEntryBookRecords),M})(),(()=>{var M=Sh();return M.style.setProperty("font-size","0.875rem"),M.style.setProperty("color","var(--text-muted)"),c(M,()=>t("banking.bookEntriesForComparison")),M})()]}}),T(Vt,{get title(){return t("banking.reconciliationRate")},get subtitle(){return t("banking.completionStatus")},get children(){return[(()=>{var M=SO(),C=M.firstChild;return M.style.setProperty("font-size","1.5rem"),M.style.setProperty("font-weight","600"),M.style.setProperty("margin-bottom","0.5rem"),c(M,()=>Math.round(F.reconciliationRate),C),be(k=>(k=F.reconciliationRate>80?"#4caf50":F.reconciliationRate>50?"#ff9800":"#f44336")!=null?M.style.setProperty("color",k):M.style.removeProperty("color")),M})(),(()=>{var M=wO(),C=M.firstChild,k=C.nextSibling;return k.nextSibling,M.style.setProperty("font-size","0.875rem"),M.style.setProperty("color","var(--text-muted)"),c(M,()=>F.reconciledTransactions,C),c(M,()=>F.totalBankTransactions,k),M})()]}})],null),R})()})(),null),c(V,T(Vt,{get title(){return t("banking.recentReconciliationSessions")},get subtitle(){return t("banking.latestActivity")},get children(){var N=vO(),R=N.firstChild;return N.style.setProperty("text-align","center"),N.style.setProperty("color","var(--text-muted)"),N.style.setProperty("padding","2rem"),c(N,()=>t("banking.noRecentSessions"),R),c(N,T(mt,{variant:"primary",style:{"margin-top":"1rem"},onClick:()=>l("reconciliation"),get children(){return t("banking.startFirstReconciliation")}}),null),N}}),null),V})()),Ve(()=>Ve(()=>!!(a()==="reconciliation"&&e()))()&&T(fO,{get bankAccountId(){return e().id},get selectedPeriod(){return n()}})),T(lO,{get isOpen(){return o()},onClose:()=>s(!1),get bankAccount(){return e()}})]}})};tr(["click"]);tr(["input","click"]);var _O=le("<h2>Upload Bank Statement CSV"),AO=le("<input type=file accept=.csv>"),kO=le("<h3>Filters"),EO=le('<div><input type=text placeholder="Search transactions..."><input type=date placeholder="Start Date"><input type=date placeholder="End Date"><button>Download Detailed Report'),TO=le("<div><button>Summary</button><button>Deposits</button><button>Payments</button><button>Timeline"),IO=le("<h3>Total Deposits"),Hf=le("<p>"),Sx=le("<p> transactions"),NO=le("<h3>Total Payments"),RO=le("<h3>Net Cash Flow"),DO=le("<h3>Check Payments"),LO=le("<p> checks"),wh=le("<div>"),$O=le("<h3>Accounts & Payment Methods Used"),FO=le("<h3>Monthly Cash Flow Trend"),MO=le("<div><table><thead><tr><th>Month</th><th>Deposits</th><th>Payments</th><th>Net</th></tr></thead><tbody>"),OO=le("<h2>Deposits by Type"),BO=le("<h2>Top Depositors"),jO=le("<div><table><thead><tr><th>Depositor</th><th>Total Amount</th><th>Count</th><th>Actions</th></tr></thead><tbody>"),VO=le("<h2>Payments by Category"),zO=le("<h2>Top Payees"),UO=le("<div><table><thead><tr><th>Payee</th><th>Category</th><th>Total Amount</th><th>Count</th></tr></thead><tbody>"),qO=le("<h2>Transaction Timeline"),HO=le("<div><h1>Detailed Bank Statement Analyzer"),WO=le("<span>"),GO=le("<tr><td></td><td></td><td></td><td>"),wx=le("<div><h4></h4><p></p><p> transactions"),KO=le("<tr><td></td><td></td><td></td><td><details><summary>View</summary><div>"),YO=le("<div> - "),XO=le("<tr><td></td><td><span></span></td><td></td><td>"),ZO=le("<div><div><div></div><div> • </div></div><div><div>");const JO=()=>{const[t,e]=Ae(""),[r,n]=Ae("summary"),[i,o]=Ae(""),[s,a]=Ae({start:"",end:""}),[l,d]=Vu({list:[]}),u={Utilities:["AT&T","METRO BY T-MOBILE","COMCAST","STREAM ENERGY","NETFLIX","SPECTRUM"],checks:["CHECK"],JPM:["JPM","POVBR"],Transportation:["DRIVE AWAY","TRANPORT","QUICKQUACK","EXXON","SHELL","CHEVRON","UBER","LYFT","U-HAUL","UHAL","LOVE'S"],Lodging:["HOLIDAY INN","MARRIOTT","HILTON","AIRBNB","HOTEL","MOTEL"],"Food & Dining":["GOLDEN CORRAL","MOCTEZUMA","CHINA STAR","RESTAURANT","CAFE","STARBUCKS","BUFFET","GRILL","MARKET","SEAFOOD"],Shopping:["BURLINGTON","WALMART","TARGET","AMAZON","ROSS","KROGER","PUBLIC","AMZN","AMZ"],Financial:["AMERICANFIRSTFIN","LOAN","CREDIT"],Insurance:["INSURANCE","GEICO","STATE FARM"],Rent:["SHAFAII INVESTME"],Medical:["PHARMACY","CVS","WALGREENS","HOSPITAL","CLINIC"],Entertainment:["CINEMA","THEATER","CONCERT"],"Other Services":["BARBER","SALON","SPA","GYM"],Return:["RETURN ITEM "]},h=N=>{const R=N.toUpperCase();for(const[M,C]of Object.entries(u))for(const k of C)if(R.includes(k.toUpperCase()))return M;return"Other"},f=N=>{const R=N.match(/Zelle payment from ([^0-9]+)/i);if(R)return R[1].trim().replace(/[A-Z0-9]{10,}$/,"").trim();if(N.includes("CHECK"))return"Check Payment";const M=N.match(/^([^0-9]+)/);return M?M[1].trim():N.substring(0,30)},p=N=>{const R=N.trim().split(`
`),M=[];console.log(R);for(let C=1;C<R.length;C++){const k=R[C].split(",");if(console.log(k),k.length>=3){const D=parseFloat(k[2]);let $={postingDate:k[0],description:k[1],amount:D};M.push($)}}return console.log({transactions:M}),d("list",M),M};zt(()=>t()?p(t()):[]);const m=zt(()=>{let N=l?.list;if((s().start||s().end)&&(N=N.filter(R=>{const M=new Date(R.postingDate),C=s().start?new Date(s().start):new Date("2024-01-01"),k=s().end?new Date(s().end):new Date("2024-12-31");return M>=C&&M<=k})),i()){const R=i().toLowerCase();N=N.filter(M=>M.description.toLowerCase().includes(R)||Math.abs(M.amount).toString().includes(R))}return N}),x=zt(()=>{const N={deposits:{total:0,count:0,byType:new Map,byPayee:new Map},payments:{total:0,count:0,byType:new Map,byPayee:new Map},checks:{total:0,count:0,transactions:[]},transfers:{total:0,count:0,transactions:[]},dailyBalances:new Map,accountsAffected:new Set};return m().forEach(R=>{const M=f(R.description);if(console.log({transaction:R}),N.dailyBalances.set(R.postingDate,R.amount),(R.description.includes("ZELLE")||R.description.includes("QUICKPAY"))&&N.accountsAffected.add("Zelle Account"),R.description.includes("ACH")&&N.accountsAffected.add("ACH Network"),R?.description.includes("DEBIT_CARD")&&N.accountsAffected.add("Debit Card"),R?.description.includes("CHECK")&&N.accountsAffected.add("Checking Account"),R?.description.includes("TRANSFER")&&N.accountsAffected.add("Savings Account"),R.amount>0){N.deposits.total+=R.amount,N.deposits.count++,N.deposits.byType.has(R.description)||N.deposits.byType.set(R.description,{total:0,count:0,transactions:[]});const C=N.deposits.byType.get(R.description);C.total+=R.amount,C.count++,C.transactions.push(R),N.deposits.byPayee.has(M)||N.deposits.byPayee.set(M,{name:M,totalAmount:0,transactionCount:0,transactions:[]});const k=N.deposits.byPayee.get(M);k.totalAmount+=R.amount,k.transactionCount++,k.transactions.push(R)}if(R.amount<0){N.payments.total+=Math.abs(R.amount),N.payments.count++,N.payments.byType.has(R.description)||N.payments.byType.set(R.description,{total:0,count:0,transactions:[]});const C=N.payments.byType.get(R.description);C.total+=Math.abs(R.amount),C.count++,C.transactions.push(R);const k=h(R.description);N.payments.byPayee.has(M)||N.payments.byPayee.set(M,{name:M,totalAmount:0,transactionCount:0,transactions:[],category:k});const D=N.payments.byPayee.get(M);D.totalAmount+=Math.abs(R.amount),D.transactionCount++,D.transactions.push(R)}(R.type==="CHECK_PAID"||R.checkNumber)&&(N.checks.total+=Math.abs(R.amount),N.checks.count++,N.checks.transactions.push(R)),(R.description.includes("TRANSFER")||R.description==="ACCT_XFER")&&(N.transfers.total+=Math.abs(R.amount),N.transfers.count++,N.transfers.transactions.push(R))}),console.log(N),N}),P=zt(()=>{const N=new Map;return m().forEach(R=>{const M=R.postingDate.substring(0,7);N.has(M)||N.set(M,{deposits:0,payments:0,net:0});const C=N.get(M);R.amount>0?C.deposits+=R.amount:C.payments+=Math.abs(R.amount),C.net=C.deposits-C.payments}),Array.from(N.entries()).sort((R,M)=>R[0].localeCompare(M[0]))}),g=N=>{const M=N.target.files?.[0];if(M){const C=new FileReader;C.onload=k=>{console.log(k.target?.result),p(k.target?.result)},C.readAsText(M)}},F=()=>{const N=x();let R=`# DETAILED BANK STATEMENT ANALYSIS
`;R+=`Generated: ${new Date().toLocaleDateString()}

`,R+=`## EXECUTIVE SUMMARY

`,R+=`- **Total Deposits:** $${N.deposits.total.toFixed(2)} (${N.deposits.count} transactions)
`,R+=`- **Total Payments:** $${N.payments.total.toFixed(2)} (${N.payments.count} transactions)
`,R+=`- **Net Cash Flow:** $${(N.deposits.total-N.payments.total).toFixed(2)}
`,R+=`- **Check Payments:** $${N.checks.total.toFixed(2)} (${N.checks.count} checks)
`,R+=`- **Transfers:** $${N.transfers.total.toFixed(2)} (${N.transfers.count} transfers)

`,R+=`## ACCOUNTS AFFECTED

`,N.accountsAffected.forEach(_=>{R+=`- ${_}
`}),R+=`
`,R+=`## DEPOSITS DETAIL

`,R+=`### By Type
`,N.deposits.byType.forEach((_,v)=>{R+=`- **${v}**: $${_.total.toFixed(2)} (${_.count} transactions)
`}),R+=`
### Top Depositors
`,Array.from(N.deposits.byPayee.entries()).sort((_,v)=>v[1].totalAmount-_[1].totalAmount).slice(0,20).forEach(([_,v])=>{R+=`- **${_}**: $${v.totalAmount.toFixed(2)} (${v.transactionCount} transactions)
`}),R+=`
## PAYMENTS DETAIL

`,R+=`### By Type
`,N.payments.byType.forEach((_,v)=>{R+=`- **${v}**: $${_.total.toFixed(2)} (${_.count} transactions)
`}),R+=`
### By Category
`;const C=new Map;N.payments.byPayee.forEach(_=>{const v=_.category||"Other";C.set(v,(C.get(v)||0)+_.totalAmount)}),Array.from(C.entries()).sort((_,v)=>v[1]-_[1]).forEach(([_,v])=>{R+=`- **${_}**: $${v.toFixed(2)}
`}),R+=`
### Top Payees
`,Array.from(N.payments.byPayee.entries()).sort((_,v)=>v[1].totalAmount-_[1].totalAmount).slice(0,20).forEach(([_,v])=>{R+=`- **${_}** (${v.category}): $${v.totalAmount.toFixed(2)} (${v.transactionCount} transactions)
`}),R+=`
## MONTHLY CASH FLOW TREND

`,P().forEach(([_,v])=>{R+=`- **${_}**: Deposits: $${v.deposits.toFixed(2)} | Payments: $${v.payments.toFixed(2)} | Net: $${v.net.toFixed(2)}
`}),N.checks.transactions.length>0&&(R+=`
## CHECK PAYMENTS DETAIL

`,N.checks.transactions.forEach(_=>{R+=`- Check #${_.checkNumber||"N/A"} - ${_.postingDate} - $${Math.abs(_.amount).toFixed(2)}
`}));const D=new Blob([R],{type:"text/markdown"}),$=URL.createObjectURL(D),w=document.createElement("a");w.href=$,w.download=`detailed_bank_analysis_${new Date().toISOString().split("T")[0]}.md`,w.click(),URL.revokeObjectURL($)},V=N=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(N);return(()=>{var N=HO(),R=N.firstChild;return N.style.setProperty("padding","2rem"),R.style.setProperty("margin-bottom","2rem"),c(N,T(Vt,{style:{"margin-bottom":"2rem"},get children(){return[_O(),(()=>{var M=AO();return M.addEventListener("change",g),M.style.setProperty("margin-top","1rem"),M})()]}}),null),c(N,T(We,{get when(){return l?.list},get children(){return[T(Vt,{style:{"margin-bottom":"2rem"},get children(){return[kO(),(()=>{var M=EO(),C=M.firstChild,k=C.nextSibling,D=k.nextSibling,$=D.nextSibling;return M.style.setProperty("display","flex"),M.style.setProperty("gap","1rem"),M.style.setProperty("margin-top","1rem"),M.style.setProperty("flex-wrap","wrap"),C.$$input=w=>o(w.currentTarget.value),C.style.setProperty("flex","1"),C.style.setProperty("min-width","200px"),C.style.setProperty("padding","0.5rem"),k.$$input=w=>a({...s(),start:w.currentTarget.value}),D.$$input=w=>a({...s(),end:w.currentTarget.value}),$.$$click=F,$.style.setProperty("padding","0.5rem 1rem"),$.style.setProperty("background","var(--primary-color)"),$.style.setProperty("color","white"),$.style.setProperty("border","none"),$.style.setProperty("border-radius","var(--border-radius-sm)"),$.style.setProperty("cursor","pointer"),be(()=>C.value=i()),be(()=>k.value=s().start),be(()=>D.value=s().end),M})()]}}),(()=>{var M=TO(),C=M.firstChild,k=C.nextSibling,D=k.nextSibling,$=D.nextSibling;return M.style.setProperty("display","flex"),M.style.setProperty("gap","1rem"),M.style.setProperty("margin-bottom","2rem"),C.$$click=()=>n("summary"),C.style.setProperty("padding","0.5rem 1rem"),C.style.setProperty("border","none"),C.style.setProperty("border-radius","var(--border-radius-sm)"),C.style.setProperty("cursor","pointer"),k.$$click=()=>n("deposits"),k.style.setProperty("padding","0.5rem 1rem"),k.style.setProperty("border","none"),k.style.setProperty("border-radius","var(--border-radius-sm)"),k.style.setProperty("cursor","pointer"),D.$$click=()=>n("payments"),D.style.setProperty("padding","0.5rem 1rem"),D.style.setProperty("border","none"),D.style.setProperty("border-radius","var(--border-radius-sm)"),D.style.setProperty("cursor","pointer"),$.$$click=()=>n("timeline"),$.style.setProperty("padding","0.5rem 1rem"),$.style.setProperty("border","none"),$.style.setProperty("border-radius","var(--border-radius-sm)"),$.style.setProperty("cursor","pointer"),be(w=>{var _=r()==="summary"?"var(--primary-color)":"#e9ecef",v=r()==="summary"?"white":"black",z=r()==="deposits"?"var(--primary-color)":"#e9ecef",W=r()==="deposits"?"white":"black",A=r()==="payments"?"var(--primary-color)":"#e9ecef",I=r()==="payments"?"white":"black",ee=r()==="timeline"?"var(--primary-color)":"#e9ecef",Z=r()==="timeline"?"white":"black";return _!==w.e&&((w.e=_)!=null?C.style.setProperty("background",_):C.style.removeProperty("background")),v!==w.t&&((w.t=v)!=null?C.style.setProperty("color",v):C.style.removeProperty("color")),z!==w.a&&((w.a=z)!=null?k.style.setProperty("background",z):k.style.removeProperty("background")),W!==w.o&&((w.o=W)!=null?k.style.setProperty("color",W):k.style.removeProperty("color")),A!==w.i&&((w.i=A)!=null?D.style.setProperty("background",A):D.style.removeProperty("background")),I!==w.n&&((w.n=I)!=null?D.style.setProperty("color",I):D.style.removeProperty("color")),ee!==w.s&&((w.s=ee)!=null?$.style.setProperty("background",ee):$.style.removeProperty("background")),Z!==w.h&&((w.h=Z)!=null?$.style.setProperty("color",Z):$.style.removeProperty("color")),w},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),M})(),T(We,{get when(){return r()==="summary"},get children(){return[(()=>{var M=wh();return M.style.setProperty("display","grid"),M.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(250px, 1fr))"),M.style.setProperty("gap","1rem"),M.style.setProperty("margin-bottom","2rem"),c(M,T(Vt,{get children(){return[IO(),(()=>{var C=Hf();return C.style.setProperty("font-size","2rem"),C.style.setProperty("font-weight","bold"),C.style.setProperty("color","#22c55e"),c(C,()=>V(x().deposits.total)),C})(),(()=>{var C=Sx(),k=C.firstChild;return C.style.setProperty("color","#6c757d"),c(C,()=>x().deposits.count,k),C})()]}}),null),c(M,T(Vt,{get children(){return[NO(),(()=>{var C=Hf();return C.style.setProperty("font-size","2rem"),C.style.setProperty("font-weight","bold"),C.style.setProperty("color","#ef4444"),c(C,()=>V(x().payments.total)),C})(),(()=>{var C=Sx(),k=C.firstChild;return C.style.setProperty("color","#6c757d"),c(C,()=>x().payments.count,k),C})()]}}),null),c(M,T(Vt,{get children(){return[RO(),(()=>{var C=Hf();return C.style.setProperty("font-size","2rem"),C.style.setProperty("font-weight","bold"),c(C,()=>V(x().deposits.total-x().payments.total)),be(k=>(k=x().deposits.total-x().payments.total>=0?"#22c55e":"#ef4444")!=null?C.style.setProperty("color",k):C.style.removeProperty("color")),C})()]}}),null),c(M,T(Vt,{get children(){return[DO(),(()=>{var C=Hf();return C.style.setProperty("font-size","2rem"),C.style.setProperty("font-weight","bold"),C.style.setProperty("color","#3b82f6"),c(C,()=>V(x().checks.total)),C})(),(()=>{var C=LO(),k=C.firstChild;return C.style.setProperty("color","#6c757d"),c(C,()=>x().checks.count,k),C})()]}}),null),M})(),T(Vt,{style:{"margin-bottom":"2rem"},get children(){return[$O(),(()=>{var M=wh();return M.style.setProperty("display","flex"),M.style.setProperty("flex-wrap","wrap"),M.style.setProperty("gap","0.5rem"),M.style.setProperty("margin-top","1rem"),c(M,T(_t,{get each(){return Array.from(x().accountsAffected)},children:C=>(()=>{var k=WO();return k.style.setProperty("padding","0.25rem 0.75rem"),k.style.setProperty("background","#e9ecef"),k.style.setProperty("border-radius","9999px"),k.style.setProperty("font-size","0.875rem"),c(k,C),k})()})),M})()]}}),T(Vt,{get children(){return[FO(),(()=>{var M=MO(),C=M.firstChild,k=C.firstChild,D=k.firstChild,$=D.firstChild,w=$.nextSibling,_=w.nextSibling,v=_.nextSibling,z=k.nextSibling;return M.style.setProperty("overflow-x","auto"),C.style.setProperty("width","100%"),C.style.setProperty("border-collapse","collapse"),C.style.setProperty("margin-top","1rem"),D.style.setProperty("border-bottom","2px solid #dee2e6"),$.style.setProperty("padding","0.75rem"),$.style.setProperty("text-align","left"),w.style.setProperty("padding","0.75rem"),w.style.setProperty("text-align","right"),_.style.setProperty("padding","0.75rem"),_.style.setProperty("text-align","right"),v.style.setProperty("padding","0.75rem"),v.style.setProperty("text-align","right"),c(z,T(_t,{get each(){return P()},children:([W,A])=>(()=>{var I=GO(),ee=I.firstChild,Z=ee.nextSibling,X=Z.nextSibling,se=X.nextSibling;return I.style.setProperty("border-bottom","1px solid #dee2e6"),ee.style.setProperty("padding","0.75rem"),c(ee,W),Z.style.setProperty("padding","0.75rem"),Z.style.setProperty("text-align","right"),Z.style.setProperty("color","#22c55e"),c(Z,()=>V(isNaN(A.deposits)?0:A.deposits)),X.style.setProperty("padding","0.75rem"),X.style.setProperty("text-align","right"),X.style.setProperty("color","#ef4444"),c(X,()=>V(isNaN(A.payments)?0:A.payments)),se.style.setProperty("padding","0.75rem"),se.style.setProperty("text-align","right"),se.style.setProperty("font-weight","bold"),c(se,()=>V(A.net)),be(U=>(U=A.net>=0?"#22c55e":"#ef4444")!=null?se.style.setProperty("color",U):se.style.removeProperty("color")),I})()})),M})()]}})]}}),T(We,{get when(){return r()==="deposits"},get children(){return[T(Vt,{style:{"margin-bottom":"2rem"},get children(){return[OO(),(()=>{var M=wh();return M.style.setProperty("display","grid"),M.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(300px, 1fr))"),M.style.setProperty("gap","1rem"),M.style.setProperty("margin-top","1rem"),c(M,T(_t,{get each(){return Array.from(x().deposits.byType.entries())},children:([C,k])=>(()=>{var D=wx(),$=D.firstChild,w=$.nextSibling,_=w.nextSibling,v=_.firstChild;return D.style.setProperty("padding","1rem"),D.style.setProperty("background","#f8f9fa"),D.style.setProperty("border-radius","var(--border-radius-sm)"),D.style.setProperty("border","1px solid #e9ecef"),c($,C),w.style.setProperty("font-size","1.5rem"),w.style.setProperty("font-weight","bold"),w.style.setProperty("color","#22c55e"),c(w,()=>V(k.total)),_.style.setProperty("color","#6c757d"),c(_,()=>k.count,v),D})()})),M})()]}}),T(Vt,{get children(){return[BO(),(()=>{var M=jO(),C=M.firstChild,k=C.firstChild,D=k.firstChild,$=D.firstChild,w=$.nextSibling,_=w.nextSibling,v=_.nextSibling,z=k.nextSibling;return M.style.setProperty("overflow-x","auto"),C.style.setProperty("width","100%"),C.style.setProperty("border-collapse","collapse"),C.style.setProperty("margin-top","1rem"),D.style.setProperty("border-bottom","2px solid #dee2e6"),$.style.setProperty("padding","0.75rem"),$.style.setProperty("text-align","left"),w.style.setProperty("padding","0.75rem"),w.style.setProperty("text-align","right"),_.style.setProperty("padding","0.75rem"),_.style.setProperty("text-align","center"),v.style.setProperty("padding","0.75rem"),v.style.setProperty("text-align","center"),c(z,T(_t,{get each(){return Array.from(x().deposits.byPayee.entries()).sort((W,A)=>A[1].totalAmount-W[1].totalAmount).slice(0,20)},children:([W,A])=>(()=>{var I=KO(),ee=I.firstChild,Z=ee.nextSibling,X=Z.nextSibling,se=X.nextSibling,U=se.firstChild,E=U.firstChild,O=E.nextSibling;return I.style.setProperty("border-bottom","1px solid #dee2e6"),ee.style.setProperty("padding","0.75rem"),c(ee,W),Z.style.setProperty("padding","0.75rem"),Z.style.setProperty("text-align","right"),Z.style.setProperty("color","#22c55e"),Z.style.setProperty("font-weight","bold"),c(Z,()=>V(A.totalAmount)),X.style.setProperty("padding","0.75rem"),X.style.setProperty("text-align","center"),c(X,()=>A.transactionCount),se.style.setProperty("padding","0.75rem"),se.style.setProperty("text-align","center"),E.style.setProperty("cursor","pointer"),O.style.setProperty("margin-top","0.5rem"),O.style.setProperty("font-size","0.875rem"),c(O,T(_t,{get each(){return A.transactions.slice(0,5)},children:L=>(()=>{var G=YO(),K=G.firstChild;return G.style.setProperty("padding","0.25rem"),c(G,()=>L.postingDate,K),c(G,()=>V(L.amount),null),G})()})),I})()})),M})()]}})]}}),T(We,{get when(){return r()==="payments"},get children(){return[T(Vt,{style:{"margin-bottom":"2rem"},get children(){return[VO(),(()=>{var M=wh();return M.style.setProperty("display","grid"),M.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(250px, 1fr))"),M.style.setProperty("gap","1rem"),M.style.setProperty("margin-top","1rem"),c(M,()=>{const C=new Map;return x().payments.byPayee.forEach(k=>{const D=k.category||"Other";C.has(D)||C.set(D,{total:0,count:0});const $=C.get(D);$.total+=k.totalAmount,$.count+=k.transactionCount}),Array.from(C.entries()).sort((k,D)=>D[1].total-k[1].total).map(([k,D])=>(()=>{var $=wx(),w=$.firstChild,_=w.nextSibling,v=_.nextSibling,z=v.firstChild;return $.style.setProperty("padding","1rem"),$.style.setProperty("background","#f8f9fa"),$.style.setProperty("border-radius","var(--border-radius-sm)"),$.style.setProperty("border","1px solid #e9ecef"),c(w,k),_.style.setProperty("font-size","1.5rem"),_.style.setProperty("font-weight","bold"),_.style.setProperty("color","#ef4444"),c(_,()=>V(D.total)),v.style.setProperty("color","#6c757d"),c(v,()=>D.count,z),$})())}),M})()]}}),T(Vt,{get children(){return[zO(),(()=>{var M=UO(),C=M.firstChild,k=C.firstChild,D=k.firstChild,$=D.firstChild,w=$.nextSibling,_=w.nextSibling,v=_.nextSibling,z=k.nextSibling;return M.style.setProperty("overflow-x","auto"),C.style.setProperty("width","100%"),C.style.setProperty("border-collapse","collapse"),C.style.setProperty("margin-top","1rem"),D.style.setProperty("border-bottom","2px solid #dee2e6"),$.style.setProperty("padding","0.75rem"),$.style.setProperty("text-align","left"),w.style.setProperty("padding","0.75rem"),w.style.setProperty("text-align","left"),_.style.setProperty("padding","0.75rem"),_.style.setProperty("text-align","right"),v.style.setProperty("padding","0.75rem"),v.style.setProperty("text-align","center"),c(z,T(_t,{get each(){return Array.from(x().payments.byPayee.entries()).sort((W,A)=>A[1].totalAmount-W[1].totalAmount).slice(0,130)},children:([W,A])=>(()=>{var I=XO(),ee=I.firstChild,Z=ee.nextSibling,X=Z.firstChild,se=Z.nextSibling,U=se.nextSibling;return I.style.setProperty("border-bottom","1px solid #dee2e6"),ee.style.setProperty("padding","0.75rem"),c(ee,W),Z.style.setProperty("padding","0.75rem"),X.style.setProperty("padding","0.25rem 0.5rem"),X.style.setProperty("background","#e9ecef"),X.style.setProperty("border-radius","4px"),X.style.setProperty("font-size","0.875rem"),c(X,()=>A.category),se.style.setProperty("padding","0.75rem"),se.style.setProperty("text-align","right"),se.style.setProperty("color","#ef4444"),se.style.setProperty("font-weight","bold"),c(se,()=>V(A.totalAmount)),U.style.setProperty("padding","0.75rem"),U.style.setProperty("text-align","center"),c(U,()=>A.transactionCount),I})()})),M})()]}})]}}),T(We,{get when(){return r()==="timeline"},get children(){return T(Vt,{get children(){return[qO(),(()=>{var M=wh();return M.style.setProperty("max-height","600px"),M.style.setProperty("overflow-y","auto"),M.style.setProperty("margin-top","1rem"),c(M,T(_t,{get each(){return m().slice(0,100)},children:C=>(()=>{var k=ZO(),D=k.firstChild,$=D.firstChild,w=$.nextSibling,_=w.firstChild,v=D.nextSibling,z=v.firstChild;return k.style.setProperty("padding","1rem"),k.style.setProperty("border-bottom","1px solid #e9ecef"),k.style.setProperty("display","flex"),k.style.setProperty("justify-content","space-between"),k.style.setProperty("align-items","center"),D.style.setProperty("flex","1"),$.style.setProperty("font-weight","bold"),c($,()=>C.description),w.style.setProperty("font-size","0.875rem"),w.style.setProperty("color","#6c757d"),c(w,()=>C.postingDate,_),c(w,()=>C.type,null),c(w,()=>C.checkNumber&&` • Check #${C.checkNumber}`,null),v.style.setProperty("text-align","right"),z.style.setProperty("font-weight","bold"),z.style.setProperty("font-size","1.1rem"),c(z,()=>V(Math.abs(C.amount)),null),c(z,()=>C.amount>=0?" ↓":" ↑",null),be(W=>(W=C.amount>=0?"#22c55e":"#ef4444")!=null?z.style.setProperty("color",W):z.style.removeProperty("color")),k})()})),M})()]}})}})]}}),null),N})()};tr(["input","click"]);var QO=le("<div><div></div><div>"),kv=le("<div>"),eB=le("<div> • <!> • <!> "),tB=le("<div><div><div></div><div></div></div><div><div></div><div>"),rB=le("<div><div>:"),nB=le("<div>⚠️ <!>: <!> <!>, <!> "),iB=le("<div><div><div></div><div></div></div><div>"),Cx=le("<div> "),oB=le("<div>✓ ");const sB=t=>{const{t:e}=pr(),r={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"1rem"},n={"font-size":"0.875rem","font-weight":"600",color:"var(--text-muted)","text-transform":"uppercase"},i={padding:"0.25rem 0.75rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"500","text-transform":"uppercase","letter-spacing":"0.5px"},o={"font-size":"1.1rem","font-weight":"600",color:"var(--text-primary)","margin-bottom":"0.5rem"},s={"font-size":"0.875rem",color:"var(--text-muted)","margin-bottom":"1rem"},a={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"1rem"},l={"font-size":"1.25rem","font-weight":"600",color:"var(--primary-color)"},d={"max-height":"100px","overflow-y":"auto","border-top":"1px solid var(--border-color)","padding-top":"1rem"},u={display:"flex","justify-content":"space-between","align-items":"center","font-size":"0.875rem","margin-bottom":"0.5rem"},h={display:"flex","justify-content":"flex-end","margin-top":"1rem","padding-top":"1rem","border-top":"1px solid var(--border-color)"},f=g=>({draft:{bg:"#fff3cd",color:"#856404"},posted:{bg:"#d4edda",color:"#155724"},void:{bg:"#f8d7da",color:"#721c24"}})[g],p=g=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(g),m=g=>new Date(g).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),x=f(t.entry.status),P=Math.abs(t.entry.totalDebit-t.entry.totalCredit)<.01;return T(Vt,{get children(){return[(()=>{var g=QO(),F=g.firstChild,V=F.nextSibling;return y(g,r),y(F,n),c(F,()=>t.entry.entryNumber),c(V,()=>e(`journal.${t.entry.status}`,t.entry.status)),be(N=>y(V,{...i,background:x.bg,color:x.color},N)),g})(),(()=>{var g=kv();return y(g,o),c(g,()=>t.entry.description),g})(),(()=>{var g=eB(),F=g.firstChild,V=F.nextSibling,N=V.nextSibling,R=N.nextSibling;return R.nextSibling,y(g,s),c(g,()=>m(t.entry.date),F),c(g,()=>t.entry.reference||e("journal.noReference","No reference"),V),c(g,()=>e("journal.createdBy","By"),R),c(g,()=>t.entry.createdBy,null),g})(),(()=>{var g=tB(),F=g.firstChild,V=F.firstChild,N=V.nextSibling,R=F.nextSibling,M=R.firstChild,C=M.nextSibling;return y(g,a),V.style.setProperty("font-size","0.875rem"),V.style.setProperty("color","var(--text-muted)"),c(V,()=>e("journal.totalAmount","Total Amount")),y(N,l),c(N,()=>p(t.entry.totalDebit)),R.style.setProperty("text-align","right"),M.style.setProperty("font-size","0.875rem"),M.style.setProperty("color","var(--text-muted)"),c(M,()=>e("journal.lines","Lines")),C.style.setProperty("font-weight","600"),c(C,()=>t.entry.lines.length),g})(),Ve(()=>!P&&(()=>{var g=nB(),F=g.firstChild,V=F.nextSibling,N=V.nextSibling,R=N.nextSibling,M=R.nextSibling,C=M.nextSibling,k=C.nextSibling,D=k.nextSibling;return D.nextSibling,g.style.setProperty("padding","0.5rem"),g.style.setProperty("border-radius","var(--border-radius-sm)"),g.style.setProperty("background","#f8d7da"),g.style.setProperty("color","#721c24"),g.style.setProperty("font-size","0.875rem"),g.style.setProperty("margin-bottom","1rem"),c(g,()=>e("journal.entryNotBalancedShort","Entry is not balanced"),V),c(g,()=>e("journal.debit"),R),c(g,()=>p(t.entry.totalDebit),C),c(g,()=>e("journal.credit"),D),c(g,()=>p(t.entry.totalCredit),null),g})()),(()=>{var g=rB(),F=g.firstChild,V=F.firstChild;return y(g,d),F.style.setProperty("font-weight","500"),F.style.setProperty("margin-bottom","0.5rem"),F.style.setProperty("font-size","0.875rem"),c(F,()=>e("journal.accountLines","Account Lines"),V),c(g,()=>t.entry.lines.slice(0,3).map(N=>(()=>{var R=iB(),M=R.firstChild,C=M.firstChild,k=C.nextSibling,D=M.nextSibling;return y(R,u),M.style.setProperty("flex","1"),C.style.setProperty("font-weight","500"),c(C,()=>N.accountName),k.style.setProperty("font-size","0.75rem"),k.style.setProperty("color","var(--text-muted)"),c(k,()=>N.description||e("journal.noDescription","No description")),D.style.setProperty("text-align","right"),c(D,(()=>{var $=Ve(()=>N.debitAmount>0);return()=>$()&&(()=>{var w=Cx(),_=w.firstChild;return w.style.setProperty("color","#4caf50"),w.style.setProperty("font-weight","500"),c(w,()=>e("journal.debitShort","Dr."),_),c(w,()=>p(N.debitAmount),null),w})()})(),null),c(D,(()=>{var $=Ve(()=>N.creditAmount>0);return()=>$()&&(()=>{var w=Cx(),_=w.firstChild;return w.style.setProperty("color","#f44336"),w.style.setProperty("font-weight","500"),c(w,()=>e("journal.creditShort","Cr."),_),c(w,()=>p(N.creditAmount),null),w})()})(),null),c(D,(()=>{var $=Ve(()=>!!N.reconciled);return()=>$()&&(()=>{var w=oB();return w.firstChild,w.style.setProperty("font-size","0.75rem"),w.style.setProperty("color","#4caf50"),c(w,()=>e("banking.reconciled","Reconciled"),null),w})()})(),null),R})()),null),c(g,(()=>{var N=Ve(()=>t.entry.lines.length>3);return()=>N()&&(()=>{var R=kv();return R.style.setProperty("text-align","center"),R.style.setProperty("color","var(--text-muted)"),R.style.setProperty("font-size","0.875rem"),c(R,()=>e("journal.andMoreLines","... and {count} more lines").replace("{count}",(t.entry.lines.length-3).toString())),R})()})(),null),g})(),(()=>{var g=kv();return y(g,h),c(g,T(mt,{variant:"primary",size:"sm",onClick:()=>t.onViewDetails?.(t.entry),get children(){return e("journal.viewDetails","View Details")}})),g})()]}})},[Ko,Wf]=Ae([]),Ev=()=>Ko()?.map(e=>{const r=Ko().find(n=>n.lines.some(i=>i.id===e.id));return r?{id:`eb_${e.id}`,accountId:e.accountId,date:r.date,description:r.description,reference:r.reference,debitAmount:e.debitAmount,creditAmount:e.creditAmount,category:e.accountName,isReconciled:e.reconciled||!1,reconciledWith:e.reconciledWith,createdAt:r.createdAt}:null}).filter(e=>e!==null),jn={get journalEntries(){return Ko()},async addJournalEntry(t){const e={...t,createdTimeStamp:new Date(t.createdAt).getTime(),id:So()};return await yv.create(e),Wf([...Ko(),e]),e},async updateJournalEntry(t,e){await yv.update(t,e),Wf(Ko().map(r=>r.id===t?{...r,...e}:r))},deleteJournalEntry(t){const e=Ko().find(r=>r.id===t);if(e&&e.status==="posted")throw new Error("Cannot delete posted journal entries. Void them instead.");Wf(Ko().filter(r=>r.id!==t))},voidJournalEntry(t){this.updateJournalEntry(t,{status:"void"})},postJournalEntry(t){const e=Ko().find(r=>r.id===t);if(!e)throw new Error("Journal entry not found");if(Math.abs(e.totalDebit-e.totalCredit)>.01)throw new Error("Journal entry is not balanced. Debits must equal credits.");this.updateJournalEntry(t,{status:"posted",postedAt:new Date().toISOString()}),Ev()},getJournalEntryById(t){return Ko().find(e=>e.id===t)},getJournalEntriesByStatus(t){return Ko().filter(e=>e.status===t)},getJournalEntriesByDateRange(t,e){return Ko().filter(r=>r.date>=t&&r.date<=e)},getJournalEntriesByAccount(t){return Ko().filter(e=>e.lines.some(r=>r.accountId===t))},getNextEntryNumber(){const t=new Date().getFullYear(),r=Ko().filter(n=>n.entryNumber.includes(t.toString())).reduce((n,i)=>{const o=parseInt(i.entryNumber.split("-").pop()||"0");return o>n?o:n},0);return`JE-${t}-${String(r+1).padStart(3,"0")}`},validateJournalEntry(t){const e=[];if(t.date||e.push("Date is required"),t.description||e.push("Description is required"),(!t.lines||t.lines.length===0)&&e.push("At least one line item is required"),t.lines){const r=t.lines.reduce((i,o)=>i+(o.debitAmount||0),0),n=t.lines.reduce((i,o)=>i+(o.creditAmount||0),0);Math.abs(r-n)>.01&&e.push(`Entry is not balanced. Debit: ${r}, Credit: ${n}`),t.lines.forEach((i,o)=>{i.accountId||e.push(`Line ${o+1}: Account is required`),i.debitAmount===0&&i.creditAmount===0&&e.push(`Line ${o+1}: Either debit or credit amount must be provided`),i.debitAmount>0&&i.creditAmount>0&&e.push(`Line ${o+1}: Cannot have both debit and credit amounts`)})}return{isValid:e.length===0,errors:e}},async refreshData(t){return this.fetchInvoices(t)},async fetchInvoices(t){try{let e="";t?.search&&(e+=" "+t.search),t?.status&&t.status!=="all"&&(e+=" "+t.status);const r=e.toString(),n=await yv.getAll(r,t);return Wf(Object.values(n)),setTimeout(()=>{Ev()},450),[]}catch(e){throw e instanceof Error&&e.message,console.error("Error fetching invoices:",e),e}finally{}},getBankRelatedEntries(){return Ev()}};var aB=le("<form><div></div><div><div><h4></h4></div><div><div><div><strong></strong></div><div><strong></strong></div><div><strong></strong></div><div><strong></strong></div><div><strong></strong></div></div></div><div><div><strong>: </strong></div><div><strong>: </strong></div><div></div></div></div><div>"),Tv=le("<div>");const WA=t=>{const{t:e}=pr(),[r,n]=Ae({entryNumber:"",date:new Date().toISOString().split("T")[0],description:"",reference:"",createdBy:e("journal.currentUser","Current User")}),[i,o]=Ae([]),[s,a]=Ae(null);Ei(()=>{if(t.isOpen){if(t.editEntry)n({entryNumber:t.editEntry.entryNumber,date:t.editEntry.date,description:t.editEntry.description,reference:t.editEntry.reference,createdBy:t.editEntry.createdBy}),o(t.editEntry.lines.map((N,R)=>({...N,tempId:`line_${t.editEntry.entryNumber}_${R}`})));else{const N=jn.getNextEntryNumber();n({entryNumber:N,date:new Date().toISOString().split("T")[0],description:"",reference:"",createdBy:e("journal.currentUser","Current User")}),o([{tempId:`line_${N}_0`,accountId:"",accountName:"",description:"",debitAmount:0,creditAmount:0},{tempId:`line_${N}_1`,accountId:"",accountName:"",description:"",debitAmount:0,creditAmount:0}])}a(null)}});const l={display:"flex",gap:"1rem","justify-content":"flex-end","margin-top":"2rem"},d={display:"grid","grid-template-columns":"2fr 2fr 1fr 1fr 1fr",gap:"1rem","align-items":"end","margin-bottom":"1rem",padding:"1rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)",background:"var(--background-color)"},u={display:"flex","justify-content":"space-between","align-items":"center",padding:"1rem",background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","margin-top":"1rem"},h=()=>zr.accounts.map(N=>({value:N.id,label:`${N.accountNumber} - ${N.name}`})),f=(N,R)=>{n(M=>({...M,[N]:R}))},p=(N,R,M)=>{o(C=>C.map(k=>{if(k.tempId===N){const D={...k,[R]:M};if(R==="accountId"&&typeof M=="string"){const $=zr.getAccountById(M);$&&(D.accountName=$.name)}return D}return k}))},m=()=>{o(N=>[...N,{tempId:`line_${r()?.entryNumber}_${N.length}`,accountId:"",accountName:"",description:"",debitAmount:0,creditAmount:0}])},x=N=>{i().length>2&&o(R=>R.filter(M=>M.tempId!==N))},P=()=>{const N=i().reduce((M,C)=>M+(C.debitAmount||0),0),R=i().reduce((M,C)=>M+(C.creditAmount||0),0);return{totalDebit:N,totalCredit:R,isBalanced:Math.abs(N-R)<.01}},g=N=>{N.preventDefault(),a(null);const R=r(),M=i(),{totalDebit:C,totalCredit:k,isBalanced:D}=P();if(!R.description){a(e("forms.descriptionRequired","Description is required"));return}if(M.length<2){a(e("journal.minTwoLinesRequired","At least 2 line items are required"));return}if(!D){a(e("journal.entryNotBalanced","Entry is not balanced. Debit: ${debit}, Credit: ${credit}").replace("${debit}",`$${C.toFixed(2)}`).replace("${credit}",`$${k.toFixed(2)}`));return}for(let _=0;_<M.length;_++){const v=M[_];if(!v.accountId){a(e("journal.lineAccountRequired","Line {lineNumber}: Account is required").replace("{lineNumber}",(_+1).toString()));return}if(v.debitAmount===0&&v.creditAmount===0){a(e("journal.lineAmountRequired","Line {lineNumber}: Either debit or credit amount must be provided").replace("{lineNumber}",(_+1).toString()));return}if((v.debitAmount||0)>0&&(v.creditAmount||0)>0){a(e("journal.lineBothAmounts","Line {lineNumber}: Cannot have both debit and credit amounts").replace("{lineNumber}",(_+1).toString()));return}}const $={entryNumber:R.entryNumber,date:R.date,description:R.description,reference:R.reference,status:"draft",createdBy:R.createdBy,createdAt:new Date().toISOString(),totalDebit:C,totalCredit:k,lines:M.map((_,v)=>{const{tempId:z,...W}=_;return{id:`jel_${R.entryNumber}_${v}`,...W}})};let w=Kw(Object.keys(t.editEntry),$,t.editEntry,{id:1,referenceHId:1,createdBy:1,createdAt:1,createdTimeStamp:1});try{t.editEntry?jn.updateJournalEntry(t.editEntry.id,w.data):jn.addJournalEntry($);let _=jn.getNextEntryNumber();n({entryNumber:_,date:new Date().toISOString().split("T")[0],description:"",reference:"",createdBy:e("journal.currentUser","Current User")}),o([{tempId:`line_${_}_0`,accountId:"",accountName:"",description:"",debitAmount:0,creditAmount:0},{tempId:`line_${_}_1`,accountId:"",accountName:"",description:"",debitAmount:0,creditAmount:0}]),t.onClose()}catch(_){a(_ instanceof Error?_.message:e("forms.errorOccurred","An error occurred"))}},F=N=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(N),V=P();return T(Pi,{get isOpen(){return t.isOpen},get onClose(){return t.onClose},get title(){return Ve(()=>!!t.editEntry)()?e("journal.editEntry"):e("journal.addEntry","Add Journal Entry")},get children(){var N=aB(),R=N.firstChild,M=R.nextSibling,C=M.firstChild,k=C.firstChild,D=C.nextSibling,$=D.firstChild,w=$.firstChild,_=w.firstChild,v=w.nextSibling,z=v.firstChild,W=v.nextSibling,A=W.firstChild,I=W.nextSibling,ee=I.firstChild,Z=I.nextSibling,X=Z.firstChild,se=D.nextSibling,U=se.firstChild,E=U.firstChild,O=E.firstChild,L=U.nextSibling,G=L.firstChild,K=G.firstChild,q=L.nextSibling,B=M.nextSibling;return N.addEventListener("submit",g),R.style.setProperty("display","grid"),R.style.setProperty("grid-template-columns","1fr 1fr"),R.style.setProperty("gap","1rem"),c(R,T(Ot,{get label(){return e("journal.entryNumber")},get value(){return r().entryNumber},onChange:H=>f("entryNumber",H),get disabled(){return!!t.editEntry},required:!0}),null),c(R,T(Ot,{get label(){return e("common.date")},type:"date",get value(){return r().date},onChange:H=>f("date",H),required:!0}),null),c(N,T(Ot,{get label(){return e("common.description")},get value(){return r().description},onChange:H=>f("description",H),get placeholder(){return e("journal.enterEntryDescription","Enter journal entry description")},required:!0}),M),c(N,T(Ot,{get label(){return e("journal.reference")},get value(){return r().reference},onChange:H=>f("reference",H),get placeholder(){return e("journal.enterReferenceNumber","Enter reference number")}}),M),M.style.setProperty("margin-top","2rem"),C.style.setProperty("display","flex"),C.style.setProperty("justify-content","space-between"),C.style.setProperty("align-items","center"),C.style.setProperty("margin-bottom","1rem"),k.style.setProperty("margin","0"),c(k,()=>e("journal.entryLines","Journal Entry Lines")),c(C,T(mt,{type:"button",variant:"secondary",size:"sm",onClick:m,get children(){return e("journal.addLine","Add Line")}}),null),D.style.setProperty("margin-bottom","1rem"),D.style.setProperty("font-size","0.875rem"),D.style.setProperty("color","var(--text-muted)"),$.style.setProperty("display","grid"),$.style.setProperty("grid-template-columns","2fr 2fr 1fr 1fr 1fr"),$.style.setProperty("gap","1rem"),c(_,()=>e("journal.account")),c(z,()=>e("common.description")),c(A,()=>e("journal.debit")),c(ee,()=>e("journal.credit")),c(X,()=>e("common.actions")),c(M,T(_t,{get each(){return i()},get fallback(){return(()=>{var H=Tv();return c(H,()=>e("journal.noLines","No lines")),H})()},children:(H,Y)=>{const te=H;return(()=>{var oe=Tv();return y(oe,d),c(oe,T(Nn,{label:"",get value(){return te.accountId||""},onChange:pe=>p(te.tempId,"accountId",pe),get options(){return h()}}),null),c(oe,T(Ot,{label:"",get value(){return te.description||""},onChange:pe=>p(te.tempId,"description",pe),get placeholder(){return e("journal.lineDescription","Line description")}}),null),c(oe,T(Ot,{label:"",type:"number",get value(){return te.debitAmount?.toString()||"0"},onChange:pe=>{p(te.tempId,"debitAmount",parseFloat(pe)||0),parseFloat(pe)>0&&p(te.tempId,"creditAmount",0)},placeholder:"0.00"}),null),c(oe,T(Ot,{label:"",type:"number",get value(){return te.creditAmount?.toString()||"0"},onChange:pe=>{p(te.tempId,"creditAmount",parseFloat(pe)||0),parseFloat(pe)>0&&p(te.tempId,"debitAmount",0)},placeholder:"0.00"}),null),c(oe,T(mt,{type:"button",variant:"outline",size:"sm",onClick:()=>x(te.tempId),get disabled(){return i().length<=2},get children(){return e("common.remove")}}),null),oe})()}}),se),y(se,u),c(E,()=>e("journal.totalDebit","Total Debit"),O),c(E,()=>F(V.totalDebit),null),c(G,()=>e("journal.totalCredit","Total Credit"),K),c(G,()=>F(V.totalCredit),null),q.style.setProperty("font-weight","600"),c(q,(()=>{var H=Ve(()=>!!V.isBalanced);return()=>H()?`✓ ${e("journal.balanced")}`:`⚠️ ${e("journal.notBalanced","Not Balanced")}`})()),c(N,(()=>{var H=Ve(()=>!!s());return()=>H()&&(()=>{var Y=Tv();return Y.style.setProperty("padding","1rem"),Y.style.setProperty("border-radius","var(--border-radius-sm)"),Y.style.setProperty("margin-top","1rem"),Y.style.setProperty("background","#f8d7da"),Y.style.setProperty("color","#721c24"),Y.style.setProperty("border","1px solid #f5c6cb"),c(Y,s),Y})()})(),B),y(B,l),c(B,T(mt,{variant:"secondary",type:"button",get onClick(){return t.onClose},get children(){return e("common.cancel")}}),null),c(B,T(mt,{variant:"primary",type:"submit",get disabled(){return!V.isBalanced},get children(){return Ve(()=>!!t.editEntry)()?e("journal.updateEntry","Update Entry"):e("journal.saveAsDraft","Save as Draft")}}),null),be(H=>(H=V.isBalanced?"#4caf50":"#f44336")!=null?q.style.setProperty("color",H):q.style.removeProperty("color")),N}})},lB={"Sale Amount":{en:"Sale Amount",es:"Monto de Venta"},"Payment Amount":{en:"Payment Amount",es:"Monto del Pago"},"Expense Amount":{en:"Expense Amount",es:"Monto del Gasto"},"Rent Amount":{en:"Rent Amount",es:"Monto del Alquiler"},"Salary Amount":{en:"Salary Amount",es:"Monto del Salario"},"Utility Amount":{en:"Utility Amount",es:"Monto de Servicios"},"Inventory Cost":{en:"Inventory Cost",es:"Costo del Inventario"},"Investment Amount":{en:"Investment Amount",es:"Monto de Inversión"},"Depreciation Amount":{en:"Depreciation Amount",es:"Monto de Depreciación"},"Interest Amount":{en:"Interest Amount",es:"Monto de Interés"},"Principal Amount":{en:"Principal Amount",es:"Monto Principal"},"Total Payment":{en:"Total Payment",es:"Pago Total"},Amount:{en:"Amount",es:"Monto"},Monto:{en:"Amount",es:"Monto"}},cB={"Cash Sale":{en:"Cash Sale",es:"Venta en Efectivo"},"Credit Sale":{en:"Credit Sale",es:"Venta a Crédito"},"Customer Payment Received":{en:"Customer Payment Received",es:"Pago Recibido del Cliente"},"Office Expenses":{en:"Office Expenses",es:"Gastos de Oficina"},"Rent Payment":{en:"Rent Payment",es:"Pago de Alquiler"},"Salary Payment":{en:"Salary Payment",es:"Pago de Salario"},"Utility Payment":{en:"Utility Payment",es:"Pago de Servicios"},"Inventory Purchase":{en:"Inventory Purchase",es:"Compra de Inventario"},"Supplier Payment":{en:"Supplier Payment",es:"Pago a Proveedor"},"Capital Investment":{en:"Capital Investment",es:"Inversión de Capital"},"Depreciation Expense":{en:"Depreciation Expense",es:"Gasto de Depreciación"},"Loan Payment":{en:"Loan Payment",es:"Pago de Préstamo"}},dB={"Record a cash sale transaction":{en:"Record a cash sale transaction",es:"Registrar una transacción de venta en efectivo"},"Record a sale on credit (accounts receivable)":{en:"Record a sale on credit (accounts receivable)",es:"Registrar una venta a crédito (cuentas por cobrar)"},"Record payment received from customer":{en:"Record payment received from customer",es:"Registrar pago recibido del cliente"},"Record office supplies and expenses":{en:"Record office supplies and expenses",es:"Registrar suministros y gastos de oficina"},"Record monthly rent payment":{en:"Record monthly rent payment",es:"Registrar pago mensual de alquiler"},"Record employee salary payment":{en:"Record employee salary payment",es:"Registrar pago de salario de empleado"},"Record utility bills payment":{en:"Record utility bills payment",es:"Registrar pago de servicios públicos"},"Record inventory purchase on credit":{en:"Record inventory purchase on credit",es:"Registrar compra de inventario a crédito"},"Record payment to supplier":{en:"Record payment to supplier",es:"Registrar pago a proveedor"},"Record owner capital investment":{en:"Record owner capital investment",es:"Registrar inversión de capital del propietario"},"Record monthly depreciation of assets":{en:"Record monthly depreciation of assets",es:"Registrar depreciación mensual de activos"},"Record loan principal and interest payment":{en:"Record loan principal and interest payment",es:"Registrar pago de capital e intereses del préstamo"}},uB={"Cash received from sale":{en:"Cash received from sale",es:"Efectivo recibido de venta"},"Sales revenue":{en:"Sales revenue",es:"Ingresos por ventas"},"Credit sale to customer":{en:"Credit sale to customer",es:"Venta a crédito al cliente"},"Payment received from customer":{en:"Payment received from customer",es:"Pago recibido del cliente"},"Payment applied to receivable":{en:"Payment applied to receivable",es:"Pago aplicado a cuenta por cobrar"},"Office supplies and expenses":{en:"Office supplies and expenses",es:"Suministros y gastos de oficina"},"Payment for office expenses":{en:"Payment for office expenses",es:"Pago por gastos de oficina"},"Monthly rent payment":{en:"Monthly rent payment",es:"Pago mensual de alquiler"},"Rent payment":{en:"Rent payment",es:"Pago de alquiler"},"Employee salary":{en:"Employee salary",es:"Salario de empleado"},"Salary payment":{en:"Salary payment",es:"Pago de salario"},"Utility bills payment":{en:"Utility bills payment",es:"Pago de servicios públicos"},"Utility payment":{en:"Utility payment",es:"Pago de servicios"},"Inventory purchase":{en:"Inventory purchase",es:"Compra de inventario"},"Amount owed to supplier":{en:"Amount owed to supplier",es:"Monto adeudado al proveedor"},"Payment to supplier":{en:"Payment to supplier",es:"Pago al proveedor"},"Capital investment received":{en:"Capital investment received",es:"Inversión de capital recibida"},"Capital investment":{en:"Capital investment",es:"Inversión de capital"},"Monthly depreciation expense":{en:"Monthly depreciation expense",es:"Gasto mensual de depreciación"},"Accumulated depreciation":{en:"Accumulated depreciation",es:"Depreciación acumulada"},"Interest expense":{en:"Interest expense",es:"Gasto por intereses"},"Principal payment":{en:"Principal payment",es:"Pago de capital"},"Total loan payment":{en:"Total loan payment",es:"Pago total del préstamo"}},hB=t=>lB[t]?.["es"]||t,pB=t=>cB[t]?.["es"]||t,fB=t=>dB[t]?.["es"]||t,yB=t=>uB[t]?.["es"]||t,mB=[{id:"cash_sale",name:"Cash Sale",description:"Record a cash sale transaction",category:"revenue",lines:[{id:"cs1",accountId:"1001",accountName:"Petty Cash",description:"Cash received from sale",type:"debit",isAmountField:!0,amountFieldName:"Sale Amount"},{id:"cs2",accountId:"10",accountName:"Sales Revenue",description:"Sales revenue",type:"credit",isAmountField:!0,amountFieldName:"Sale Amount"}]},{id:"credit_sale",name:"Credit Sale",description:"Record a sale on credit (accounts receivable)",category:"revenue",lines:[{id:"crs1",accountId:"2001",accountName:"Trade Receivables",description:"Credit sale to customer",type:"debit",isAmountField:!0,amountFieldName:"Sale Amount"},{id:"crs2",accountId:"10",accountName:"Sales Revenue",description:"Sales revenue",type:"credit",isAmountField:!0,amountFieldName:"Sale Amount"}]},{id:"customer_payment",name:"Customer Payment Received",description:"Record payment received from customer",category:"assets",lines:[{id:"cp1",accountId:"1002",accountName:"Bank - Checking Account",description:"Payment received from customer",type:"debit",isAmountField:!0,amountFieldName:"Payment Amount"},{id:"cp2",accountId:"2001",accountName:"Trade Receivables",description:"Payment applied to receivable",type:"credit",isAmountField:!0,amountFieldName:"Payment Amount"}]},{id:"office_expenses",name:"Office Expenses",description:"Record office supplies and expenses",category:"expenses",lines:[{id:"oe1",accountId:"5200",accountName:"Office Expenses",description:"Office supplies and expenses",type:"debit",isAmountField:!0,amountFieldName:"Expense Amount"},{id:"oe2",accountId:"1002",accountName:"Bank - Checking Account",description:"Payment for office expenses",type:"credit",isAmountField:!0,amountFieldName:"Expense Amount"}]},{id:"rent_payment",name:"Rent Payment",description:"Record monthly rent payment",category:"expenses",lines:[{id:"rp1",accountId:"5200",accountName:"Rent Expense",description:"Monthly rent payment",type:"debit",isAmountField:!0,amountFieldName:"Rent Amount"},{id:"rp2",accountId:"1002",accountName:"Bank - Checking Account",description:"Rent payment",type:"credit",isAmountField:!0,amountFieldName:"Rent Amount"}]},{id:"salary_payment",name:"Salary Payment",description:"Record employee salary payment",category:"expenses",lines:[{id:"sp1",accountId:"13",accountName:"Salaries Expense",description:"Employee salary",type:"debit",isAmountField:!0,amountFieldName:"Salary Amount"},{id:"sp2",accountId:"1002",accountName:"Bank - Checking Account",description:"Salary payment",type:"credit",isAmountField:!0,amountFieldName:"Salary Amount"}]},{id:"utility_payment",name:"Utility Payment",description:"Record utility bills payment",category:"expenses",lines:[{id:"up1",accountId:"14",accountName:"Operating Expenses",description:"Utility bills payment",type:"debit",isAmountField:!0,amountFieldName:"Utility Amount"},{id:"up2",accountId:"1002",accountName:"Bank - Checking Account",description:"Utility payment",type:"credit",isAmountField:!0,amountFieldName:"Utility Amount"}]},{id:"inventory_purchase",name:"Inventory Purchase",description:"Record inventory purchase on credit",category:"assets",lines:[{id:"ip1",accountId:"3",accountName:"Inventory",description:"Inventory purchase",type:"debit",isAmountField:!0,amountFieldName:"Inventory Cost"},{id:"ip2",accountId:"5",accountName:"Accounts Payable",description:"Amount owed to supplier",type:"credit",isAmountField:!0,amountFieldName:"Inventory Cost"}]},{id:"supplier_payment",name:"Supplier Payment",description:"Record payment to supplier",category:"liabilities",lines:[{id:"spp1",accountId:"5",accountName:"Accounts Payable",description:"Payment to supplier",type:"debit",isAmountField:!0,amountFieldName:"Payment Amount"},{id:"spp2",accountId:"1002",accountName:"Bank - Checking Account",description:"Payment to supplier",type:"credit",isAmountField:!0,amountFieldName:"Payment Amount"}]},{id:"capital_investment",name:"Capital Investment",description:"Record owner capital investment",category:"equity",lines:[{id:"ci1",accountId:"1002",accountName:"Bank - Checking Account",description:"Capital investment received",type:"debit",isAmountField:!0,amountFieldName:"Investment Amount"},{id:"ci2",accountId:"8",accountName:"Owner's Equity",description:"Capital investment",type:"credit",isAmountField:!0,amountFieldName:"Investment Amount"}]},{id:"depreciation",name:"Depreciation Expense",description:"Record monthly depreciation of assets",category:"expenses",lines:[{id:"dep1",accountId:"14",accountName:"Operating Expenses",description:"Monthly depreciation expense",type:"debit",isAmountField:!0,amountFieldName:"Depreciation Amount"},{id:"dep2",accountId:"15",accountName:"Accumulated Depreciation",description:"Accumulated depreciation",type:"credit",isAmountField:!0,amountFieldName:"Depreciation Amount"}]},{id:"loan_payment",name:"Loan Payment",description:"Record loan principal and interest payment",category:"liabilities",lines:[{id:"lp1",accountId:"14",accountName:"Operating Expenses",description:"Interest expense",type:"debit",isAmountField:!0,amountFieldName:"Interest Amount"},{id:"lp2",accountId:"6",accountName:"Loans Payable",description:"Principal payment",type:"debit",isAmountField:!0,amountFieldName:"Principal Amount"},{id:"lp3",accountId:"1002",accountName:"Bank - Checking Account",description:"Total loan payment",type:"credit",isAmountField:!0,amountFieldName:"Total Payment"}]}],GA="journal_custom_templates",gB=()=>{try{const t=localStorage.getItem(GA);if(t)return JSON.parse(t)}catch(t){console.warn("Failed to load custom templates:",t)}return[]},Iv=t=>{try{localStorage.setItem(GA,JSON.stringify(t))}catch(e){console.warn("Failed to save custom templates:",e)}},vB=()=>{const t=gB();return[...mB,...t]},[Nv,Rv]=Ae(vB()),so={get templates(){return Nv()},getTemplatesByCategory(t){return Nv().filter(e=>e.category===t)},getTemplateById(t){return Nv().find(e=>e.id===t)},addTemplate(t){const e={...t,id:`custom_${Date.now()}`};return Rv(r=>{const n=[...r,e],i=n.filter(o=>o.id.startsWith("custom_"));return Iv(i),n}),e},updateTemplate(t,e){Rv(r=>{const n=r.map(o=>o.id===t?{...o,...e}:o),i=n.filter(o=>o.id.startsWith("custom_"));return Iv(i),n})},deleteTemplate(t){if(t.startsWith("custom_"))Rv(e=>{const r=e.filter(i=>i.id!==t),n=r.filter(i=>i.id.startsWith("custom_"));return Iv(n),r});else throw new Error("Cannot delete default templates")},getAllCategories(){return["revenue","expenses","assets","liabilities","equity"]},getCategoryDisplayName(t){const e="es",r={revenue:{en:"Revenue & Sales",es:"Ingresos y Ventas"},expenses:{en:"Expenses & Costs",es:"Gastos y Costos"},assets:{en:"Assets & Receipts",es:"Activos y Recibos"},liabilities:{en:"Liabilities & Payments",es:"Pasivos y Pagos"},equity:{en:"Equity & Capital",es:"Patrimonio y Capital"}};return r[t][e]||r[t].en},getTranslatedFieldName:hB,getTranslatedTemplateName:pB,getTranslatedTemplateDesc:fB,getTranslatedLineDesc:yB};var _x=le("<div>"),bB=le("<div><h4></h4><div><div><strong>: </strong><span>|</span><strong>: </strong></div><div>"),PB=le("<form><div></div><div>"),xB=le("<div><div><div></div><div></div><div></div></div><div></div><div><div> ");const SB=t=>{const{t:e}=pr(),[r,n]=Ae(""),[i,o]=Vu({form:{}}),[s,a]=Ae(""),[l,d]=Ae(""),[u,h]=Ae({}),[f,p]=Ae({date:new Date().toISOString().split("T")[0],description:"",reference:"",createdBy:e("journal.currentUser","Current User")}),[m,x]=Ae(null);Ei(()=>{t.isOpen&&(n(""),o("form",null),a(null),d(""),p({date:new Date().toISOString().split("T")[0],description:"",reference:"",createdBy:e("journal.currentUser","Current User")}),x(null))}),Ei(()=>{});const P={display:"flex",gap:"1rem","justify-content":"flex-end","margin-top":"2rem"},g={background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)",padding:"1rem","margin-top":"1rem"},F={display:"flex","justify-content":"space-between","align-items":"center",padding:"0.5rem 0","border-bottom":"1px solid var(--border-color)"},V=z=>{if(n(z),z){const W=so.getTemplateById(z);o("form",Gw(W)||null),a(W?.lines),W&&!f().description&&p(A=>({...A,description:W.description})),W&&W.lines.forEach((A,I)=>{A.fixedAmount||(o("form","lines",I,"fixedAmount",0),h(ee=>({...ee,[A.id]:0})))})}},N=()=>so.getAllCategories().map(z=>({value:z,label:so.getCategoryDisplayName(z)})),R=()=>{const z=l();return z?so.getTemplatesByCategory(z).map(W=>({value:W.id,label:so.getTranslatedTemplateName(W.name)})):[]},M=(z,W)=>{p(A=>({...A,[z]:W}))},C=z=>u()?.[z]||0,k=(z,W)=>{const A=i.form;!A||!A.lines.find(ee=>ee.id===z)||(h(ee=>({...ee,[z]:W})),A.lines.findIndex(ee=>ee.id===z))},D=()=>{const z=i.form;if(!z)return{totalDebit:0,totalCredit:0,isBalanced:!1};let W=0,A=0;return z?.lines?.forEach(I=>{const ee=u()?.[I.id]||I.fixedAmount||0;I.type==="debit"?W+=ee:A+=ee}),{totalDebit:W,totalCredit:A,isBalanced:Math.abs(W-A)<.01}},$=()=>{const z=i.form;if(!z)return[];const W=new Map;return z?.lines?.forEach(A=>{A.isAmountField&&A.amountFieldName&&W.set(A.amountFieldName,A.id)}),Array.from(W.entries()).map(([A,I])=>({fieldName:A,lineId:I}))},w=z=>{z.preventDefault(),x(null);const W=i.form;if(!W){x(e("journal.templateRequired","Please select a template"));return}const A=f(),{totalDebit:I,totalCredit:ee,isBalanced:Z}=D();if(!A.description){x(e("forms.descriptionRequired","Description is required"));return}if(!Z){x(e("journal.entryNotBalanced","Entry is not balanced. Debit: ${debit}, Credit: ${credit}").replace("${debit}",`$${I.toFixed(2)}`).replace("${credit}",`$${ee.toFixed(2)}`));return}for(const se of W.lines){const U=u()?.[se.id]||0;if(se.isAmountField&&U<=0){x(e("journal.amountRequired","Amount is required for {field}").replace("{field}",se.amountFieldName||"line"));return}}const X={entryNumber:jn.getNextEntryNumber(),date:A.date,description:A.description,reference:A.reference,status:"draft",createdBy:A.createdBy,createdAt:new Date().toISOString(),totalDebit:I,totalCredit:ee,lines:W.lines.map((se,U)=>{const E=u()?.[se.id]||0;return{id:`jel_${Date.now()}_${U}`,accountId:se.accountId,accountName:se.accountName,description:se.description,debitAmount:se.type==="debit"?E:0,creditAmount:se.type==="credit"?E:0}})};try{jn.addJournalEntry(X),t.onClose()}catch(se){x(se instanceof Error?se.message:e("forms.errorOccurred","An error occurred"))}},_=z=>{const W="es-ES";return new Intl.NumberFormat(W,{style:"currency",currency:"USD"}).format(z)};$();const v=()=>i?.form?.lines||[];return T(Pi,{get isOpen(){return t.isOpen},get onClose(){return t.onClose},get title(){return e("journal.quickEntry","Quick Journal Entry")},get children(){var z=PB(),W=z.firstChild,A=W.nextSibling;return z.addEventListener("submit",w),W.style.setProperty("display","grid"),W.style.setProperty("grid-template-columns","1fr 1fr"),W.style.setProperty("gap","1rem"),W.style.setProperty("margin-bottom","1rem"),c(W,T(Nn,{get label(){return e("journal.selectCategory","Select Category")},get value(){return l()},onChange:I=>{d(I),V("")},get options(){return[{value:"",label:e("journal.chooseCategory","Choose a category...")},...N()]},required:!0}),null),c(W,T(Nn,{get label(){return e("journal.selectTemplate","Select Template")},get value(){return r()},onChange:V,get options(){return[{value:"",label:e("journal.chooseTemplate","Choose a template...")},...R()]},get disabled(){return!l()},required:!0}),null),c(z,T(We,{get when(){return i.form},get children(){return[(()=>{var I=_x();return I.style.setProperty("display","grid"),I.style.setProperty("grid-template-columns","1fr 1fr"),I.style.setProperty("gap","1rem"),c(I,T(Ot,{get label(){return e("common.date")},type:"date",get value(){return f().date},onChange:ee=>M("date",ee),required:!0}),null),c(I,T(Ot,{get label(){return e("journal.reference")},get value(){return f().reference},onChange:ee=>M("reference",ee),get placeholder(){return e("journal.enterReferenceNumber","Enter reference number")}}),null),I})(),T(Ot,{get label(){return e("common.description")},get value(){return f().description},onChange:I=>M("description",I),get placeholder(){return i?.form?.description||e("journal.enterEntryDescription","Enter journal entry description")},required:!0}),(()=>{var I=bB(),ee=I.firstChild,Z=ee.nextSibling,X=Z.firstChild,se=X.firstChild,U=se.firstChild,E=se.nextSibling,O=E.nextSibling,L=O.firstChild,G=X.nextSibling;return y(I,g),ee.style.setProperty("margin","0 0 1rem 0"),ee.style.setProperty("color","var(--text-primary)"),c(ee,()=>e("journal.entryPreview","Entry Preview")),c(I,T(_t,{get each(){return v()},children:K=>(()=>{var q=xB(),B=q.firstChild,H=B.firstChild,Y=H.nextSibling,te=Y.nextSibling,oe=B.nextSibling,pe=oe.nextSibling,ne=pe.firstChild,Q=ne.firstChild;return H.style.setProperty("font-weight","500"),c(H,()=>K.accountName),Y.style.setProperty("font-size","0.875rem"),Y.style.setProperty("color","var(--text-muted)"),c(Y,()=>so.getTranslatedLineDesc(K.description)),te.style.setProperty("font-size","0.75rem"),te.style.setProperty("margin-top","0.25rem"),te.style.setProperty("font-weight","500"),c(te,(()=>{var ce=Ve(()=>K.type==="debit");return()=>ce()?e("journal.debit"):e("journal.credit")})()),c(oe,T(Ot,{label:"",type:"number",get value(){return C(K.id).toString()},onChange:ce=>k(K.id,parseFloat(ce)||0),placeholder:"0.00",step:"0.01",min:"0",style:{"font-size":"0.875rem"}})),pe.style.setProperty("text-align","right"),ne.style.setProperty("font-weight","600"),c(ne,()=>K.type==="debit"?"DR":"CR",Q),c(ne,()=>_(C(K.id)),null),be(ce=>{var ue={...F,display:"grid","grid-template-columns":"2fr 1fr 1fr",gap:"1rem","align-items":"center"},de=K.type==="debit"?"#d32f2f":"#2e7d32",ge=K.type==="debit"?"#d32f2f":"#2e7d32";return ce.e=y(q,ue,ce.e),de!==ce.t&&((ce.t=de)!=null?te.style.setProperty("color",de):te.style.removeProperty("color")),ge!==ce.a&&((ce.a=ge)!=null?ne.style.setProperty("color",ge):ne.style.removeProperty("color")),ce},{e:void 0,t:void 0,a:void 0}),q})()}),Z),Z.style.setProperty("margin-top","1rem"),Z.style.setProperty("padding-top","1rem"),Z.style.setProperty("border-top","2px solid var(--border-color)"),Z.style.setProperty("display","flex"),Z.style.setProperty("justify-content","space-between"),Z.style.setProperty("align-items","center"),c(se,()=>e("journal.totalDebit"),U),c(se,()=>_(D().totalDebit),null),E.style.setProperty("margin","0 1rem"),E.style.setProperty("color","var(--text-muted)"),c(O,()=>e("journal.totalCredit"),L),c(O,()=>_(D().totalCredit),null),G.style.setProperty("font-weight","600"),c(G,(()=>{var K=Ve(()=>!!D().isBalanced);return()=>K()?`✓ ${e("journal.balanced","Balanced")}`:`⚠️ ${e("journal.notBalanced","Not Balanced")}`})()),be(K=>(K=D().isBalanced?"#4caf50":"#f44336")!=null?G.style.setProperty("color",K):G.style.removeProperty("color")),I})()]}}),A),c(z,(()=>{var I=Ve(()=>!!m());return()=>I()&&(()=>{var ee=_x();return ee.style.setProperty("padding","1rem"),ee.style.setProperty("border-radius","var(--border-radius-sm)"),ee.style.setProperty("margin-top","1rem"),ee.style.setProperty("background","#f8d7da"),ee.style.setProperty("color","#721c24"),ee.style.setProperty("border","1px solid #f5c6cb"),c(ee,m),ee})()})(),A),y(A,P),c(A,T(mt,{variant:"secondary",type:"button",get onClick(){return t.onClose},get children(){return e("common.cancel")}}),null),c(A,T(mt,{variant:"primary",type:"submit",get disabled(){return!i.form||!D().isBalanced},get children(){return e("journal.createQuickEntry","Create Quick Entry")}}),null),z}})};var wB=le("<div><h3></h3><div>"),CB=le("<div><div></div><div><div><h4></h4></div><div><div><div></div><div></div><div></div><div></div><div></div><div>"),_B=le("<div><p></p><p>"),Ax=le("<div><div></div><div>"),AB=le("<h4>"),kB=le("<span>"),Dv=le("<div>");const EB=t=>{const{t:e}=pr(),[r,n]=Ae(""),[i,o]=Ae(!1),[s,a]=Ae(!1),[l,d]=Ae({name:"",description:"",category:"expenses"}),[u,h]=Ae([{accountId:"",accountName:"",description:"",type:"debit",isAmountField:!0,amountFieldName:e("common.amount","Amount")},{accountId:"",accountName:"",description:"",type:"credit",isAmountField:!0,amountFieldName:e("common.amount","Amount")}]),[f,p]=Ae(null);Ei(()=>{t.isOpen&&(n(""),o(!1),a(!1),p(null),R())});const m={display:"flex",gap:"1.5rem",height:"500px"},x={width:"300px","border-right":"1px solid var(--border-color)","padding-right":"1.5rem","overflow-y":"auto"},P={flex:"1","overflow-y":"auto"},g={padding:"0.75rem","margin-bottom":"0.5rem",background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)",cursor:"pointer",transition:"all 0.2s"},F={display:"grid","grid-template-columns":"2fr 2fr 1fr 1fr 1fr 80px",gap:"0.5rem","align-items":"end","margin-bottom":"0.75rem",padding:"0.75rem",background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)"},V=()=>zr.accounts.map(I=>({value:I.id,label:`${I.accountNumber} - ${I.name}`})),N=()=>so.getAllCategories().map(I=>({value:I,label:so.getCategoryDisplayName(I)})),R=()=>{d({name:"",description:"",category:"expenses"}),h([{accountId:"",accountName:"",description:"",type:"debit",isAmountField:!0,amountFieldName:e("common.amount","Amount")},{accountId:"",accountName:"",description:"",type:"credit",isAmountField:!0,amountFieldName:e("common.amount","Amount")}])},M=I=>{const ee=so.getTemplateById(I);ee&&(d({name:ee.name,description:ee.description,category:ee.category}),h(ee.lines.map(Z=>({accountId:Z.accountId,accountName:Z.accountName,description:Z.description,type:Z.type,isAmountField:Z.isAmountField,amountFieldName:Z.amountFieldName,fixedAmount:Z.fixedAmount}))))},C=I=>{n(I),o(!1),a(!1),M(I)},k=()=>{n(""),o(!1),a(!0),R()},D=()=>{r()&&r().startsWith("custom_")&&o(!0)},$=()=>{const I=r();if(I&&I.startsWith("custom_")&&confirm(e("journal.confirmDeleteTemplate","Are you sure you want to delete this template?")))try{so.deleteTemplate(I),n(""),R()}catch(ee){p(ee instanceof Error?ee.message:e("journal.errorDeletingTemplate","Error deleting template"))}},w=(I,ee)=>{d(Z=>({...Z,[I]:ee}))},_=(I,ee,Z)=>{h(X=>X.map((se,U)=>{if(U===I){const E={...se,[ee]:Z};if(ee==="accountId"&&typeof Z=="string"){const O=zr.getAccountById(Z);O&&(E.accountName=O.name)}return E}return se}))},v=()=>{h(I=>[...I,{accountId:"",accountName:"",description:"",type:I.length%2===0?"debit":"credit",isAmountField:!0,amountFieldName:e("common.amount","Amount")}])},z=I=>{u().length>2&&h(ee=>ee.filter((Z,X)=>X!==I))},W=()=>{p(null);const I=l(),ee=u();if(!I.name.trim()){p(e("journal.templateNameRequired","Template name is required"));return}if(!I.description.trim()){p(e("journal.templateDescriptionRequired","Template description is required"));return}if(ee.length<2){p(e("journal.minTwoLinesRequired","At least 2 lines are required"));return}for(let X=0;X<ee.length;X++){const se=ee[X];if(!se.accountId){p(e("journal.lineAccountRequired","Line {lineNumber}: Account is required").replace("{lineNumber}",(X+1).toString()));return}if(!se.description){p(e("journal.lineDescriptionRequired","Line {lineNumber}: Description is required").replace("{lineNumber}",(X+1).toString()));return}if(se.isAmountField&&!se.amountFieldName){p(e("journal.amountFieldNameRequired","Line {lineNumber}: Amount field name is required").replace("{lineNumber}",(X+1).toString()));return}}const Z={name:I.name,description:I.description,category:I.category,lines:ee.map((X,se)=>({id:`line_${Date.now()}_${se}`,...X}))};try{if(i()&&r())so.updateTemplate(r(),Z);else{const X=so.addTemplate(Z);n(X.id)}o(!1),a(!1)}catch(X){p(X instanceof Error?X.message:e("journal.errorSavingTemplate","Error saving template"))}},A=()=>{const I=so.templates,ee={};return I.forEach(Z=>{ee[Z.category]||(ee[Z.category]=[]),ee[Z.category].push(Z)}),ee};return T(Pi,{get isOpen(){return t.isOpen},get onClose(){return t.onClose},get title(){return e("journal.manageTemplates","Manage Journal Templates")},size:"large",get children(){var I=Ax(),ee=I.firstChild,Z=ee.nextSibling;return y(I,m),y(ee,x),c(ee,T(mt,{variant:"primary",onClick:k,style:{width:"100%","margin-bottom":"1rem"},get children(){return["+ ",Ve(()=>e("journal.addNewTemplate","Add New Template"))]}}),null),c(ee,T(_t,{get each(){return Object.entries(A())},children:([X,se])=>[(()=>{var U=AB();return U.style.setProperty("margin","1rem 0 0.5rem 0"),U.style.setProperty("font-size","0.875rem"),U.style.setProperty("color","var(--text-muted)"),U.style.setProperty("text-transform","uppercase"),c(U,()=>so.getCategoryDisplayName(X)),U})(),T(_t,{each:se,children:U=>(()=>{var E=Ax(),O=E.firstChild,L=O.nextSibling;return E.$$click=()=>C(U.id),O.style.setProperty("font-weight","500"),c(O,()=>so.getTranslatedTemplateName(U.name)),L.style.setProperty("font-size","0.75rem"),L.style.setProperty("opacity","0.8"),L.style.setProperty("margin-top","0.25rem"),c(L,()=>so.getTranslatedTemplateDesc(U.description)),c(E,(()=>{var G=Ve(()=>!!U.id.startsWith("custom_"));return()=>G()&&(()=>{var K=kB();return K.style.setProperty("font-size","0.625rem"),K.style.setProperty("background","rgba(255,255,255,0.2)"),K.style.setProperty("padding","0.125rem 0.5rem"),K.style.setProperty("border-radius","10px"),K.style.setProperty("margin-top","0.25rem"),K.style.setProperty("display","inline-block"),c(K,()=>e("journal.custom","Custom")),K})()})(),null),be(G=>y(E,{...g,background:r()===U.id?"var(--primary-color)":"var(--surface-color)",color:r()===U.id?"white":"inherit"},G)),E})()})]}),null),y(Z,P),c(Z,T(We,{get when(){return r()||s()},get children(){return[(()=>{var X=wB(),se=X.firstChild,U=se.nextSibling;return X.style.setProperty("display","flex"),X.style.setProperty("justify-content","space-between"),X.style.setProperty("align-items","center"),X.style.setProperty("margin-bottom","1rem"),se.style.setProperty("margin","0"),c(se,(()=>{var E=Ve(()=>!!s());return()=>E()?e("journal.newTemplate","New Template"):Ve(()=>!!i())()?e("journal.editTemplate","Edit Template"):e("journal.templateDetails","Template Details")})()),U.style.setProperty("display","flex"),U.style.setProperty("gap","0.5rem"),c(U,T(We,{get when(){return Ve(()=>!!(r()&&r().startsWith("custom_")))()&&!i()},get children(){return[T(mt,{variant:"outline",size:"sm",onClick:D,get children(){return e("common.edit")}}),T(mt,{variant:"outline",size:"sm",onClick:$,style:{color:"var(--danger-color)"},get children(){return e("common.delete")}})]}}),null),c(U,T(We,{get when(){return i()||s()},get children(){return[T(mt,{variant:"secondary",size:"sm",onClick:()=>{o(!1),a(!1),r()&&M(r())},get children(){return e("common.cancel")}}),T(mt,{variant:"primary",size:"sm",onClick:W,get children(){return e("common.save")}})]}}),null),X})(),(()=>{var X=CB(),se=X.firstChild,U=se.nextSibling,E=U.firstChild,O=E.firstChild,L=E.nextSibling,G=L.firstChild,K=G.firstChild,q=K.nextSibling,B=q.nextSibling,H=B.nextSibling,Y=H.nextSibling,te=Y.nextSibling;return X.style.setProperty("background","var(--background-color)"),X.style.setProperty("padding","1rem"),X.style.setProperty("border-radius","var(--border-radius-sm)"),se.style.setProperty("display","grid"),se.style.setProperty("grid-template-columns","2fr 1fr"),se.style.setProperty("gap","1rem"),se.style.setProperty("margin-bottom","1rem"),c(se,T(Ot,{get label(){return e("journal.templateName","Template Name")},get value(){return l().name},onChange:oe=>w("name",oe),get disabled(){return Ve(()=>!i())()&&!s()},get placeholder(){return e("journal.enterTemplateName","Enter template name")}}),null),c(se,T(Nn,{get label(){return e("journal.category","Category")},get value(){return l().category},onChange:oe=>w("category",oe),get options(){return N()},get disabled(){return Ve(()=>!i())()&&!s()}}),null),c(X,T(Ot,{get label(){return e("common.description")},get value(){return l().description},onChange:oe=>w("description",oe),get disabled(){return Ve(()=>!i())()&&!s()},get placeholder(){return e("journal.enterTemplateDescription","Enter template description")}}),U),U.style.setProperty("margin-top","2rem"),E.style.setProperty("display","flex"),E.style.setProperty("justify-content","space-between"),E.style.setProperty("align-items","center"),E.style.setProperty("margin-bottom","1rem"),O.style.setProperty("margin","0"),c(O,()=>e("journal.templateLines","Template Lines")),c(E,T(We,{get when(){return i()||s()},get children(){return T(mt,{variant:"secondary",size:"sm",onClick:v,get children(){return["+ ",Ve(()=>e("journal.addLine"))]}})}}),null),L.style.setProperty("margin-bottom","0.5rem"),L.style.setProperty("font-size","0.75rem"),L.style.setProperty("color","var(--text-muted)"),G.style.setProperty("display","grid"),G.style.setProperty("grid-template-columns","2fr 2fr 1fr 1fr 1fr 80px"),G.style.setProperty("gap","0.5rem"),c(K,()=>e("journal.account")),c(q,()=>e("common.description")),c(B,()=>e("journal.type","Type")),c(H,()=>e("journal.amountType","Amount Type")),c(Y,()=>e("journal.fieldName","Field Name")),c(te,()=>e("common.actions")),c(U,T(_t,{get each(){return u()},get fallback(){return(()=>{var oe=Dv();return c(oe,()=>e("journal.noTemplateLines","No template lines")),oe})()},children:(oe,pe)=>{const ne=oe,Q=pe();return(()=>{var ce=Dv();return y(ce,F),c(ce,T(Nn,{label:"",get value(){return ne.accountId||""},onChange:ue=>_(Q,"accountId",ue),get options(){return[{value:"",label:e("journal.selectAccount","Select account...")},...V()]},get disabled(){return Ve(()=>!i())()&&!s()}}),null),c(ce,T(Ot,{label:"",get value(){return ne.description||""},onChange:ue=>_(Q,"description",ue),get placeholder(){return e("journal.lineDescription")},get disabled(){return Ve(()=>!i())()&&!s()}}),null),c(ce,T(Nn,{label:"",get value(){return ne.type},onChange:ue=>_(Q,"type",ue),get options(){return[{value:"debit",label:e("journal.debit")},{value:"credit",label:e("journal.credit")}]},get disabled(){return Ve(()=>!i())()&&!s()}}),null),c(ce,T(Nn,{label:"",get value(){return ne.isAmountField?"variable":"fixed"},onChange:ue=>{_(Q,"isAmountField",ue==="variable"),ue==="fixed"&&_(Q,"fixedAmount",0)},get options(){return[{value:"variable",label:e("journal.variable","Variable")},{value:"fixed",label:e("journal.fixed","Fixed")}]},get disabled(){return Ve(()=>!i())()&&!s()}}),null),c(ce,T(We,{get when(){return ne.isAmountField},get fallback(){return T(Ot,{label:"",type:"number",get value(){return ne.fixedAmount?.toString()||"0"},onChange:ue=>_(Q,"fixedAmount",parseFloat(ue)||0),placeholder:"0.00",get disabled(){return Ve(()=>!i())()&&!s()}})},get children(){return T(Ot,{label:"",get value(){return ne.amountFieldName||""},onChange:ue=>_(Q,"amountFieldName",ue),get placeholder(){return e("journal.fieldNamePlaceholder","e.g., Monto")},get disabled(){return Ve(()=>!i())()&&!s()}})}}),null),c(ce,T(We,{get when(){return i()||s()},get children(){return T(mt,{variant:"outline",size:"sm",onClick:()=>z(Q),get disabled(){return u().length<=2},style:{color:"var(--danger-color)"},get children(){return e("common.remove")}})}}),null),ce})()}}),null),X})(),Ve(()=>Ve(()=>!!f())()&&(()=>{var X=Dv();return X.style.setProperty("padding","1rem"),X.style.setProperty("border-radius","var(--border-radius-sm)"),X.style.setProperty("margin-top","1rem"),X.style.setProperty("background","#f8d7da"),X.style.setProperty("color","#721c24"),X.style.setProperty("border","1px solid #f5c6cb"),c(X,f),X})())]}}),null),c(Z,T(We,{get when(){return Ve(()=>!r())()&&!s()},get children(){var X=_B(),se=X.firstChild,U=se.nextSibling;return X.style.setProperty("text-align","center"),X.style.setProperty("padding","3rem"),X.style.setProperty("color","var(--text-muted)"),c(se,()=>e("journal.selectTemplateToView","Select a template from the list to view details")),c(U,()=>e("journal.orCreateNew","or create a new custom template")),X}}),null),I}})};tr(["click"]);var TB=le("<div><div>⚠️</div><div></div><div></div><div>"),IB=le("<div><div></div><div></div><div></div><div></div><div>"),NB=le("<div><button></button><button> (<!>)</button><button> (<!>/<!>)"),Lv=le("<div>"),RB=le("<div><div><span></span><span></span></div><div><span></span><span></span></div><div><span></span><span></span></div><div><span></span><span></span></div><div><span></span><span></span></div><div><span></span><span></span></div><div><span></span><span></span></div><div><div><h4></h4><div></div></div><div>"),$v=le("<div><span></span><span>"),Gf=le("<div><strong>:</strong> "),DB=le("<div><div><div></div><div></div><div></div><div></div><div></div></div><div><div><strong>:</strong> </div><div><strong>:</strong> </div><div></div></div><div><div><strong>🔗 </strong></div><div><div><div><strong>:</strong> </div><div><strong>:</strong> </div><div><strong>:</strong> </div></div><div><div><strong>:</strong> </div><div><strong>:</strong> "),LB=le("<div><div><div></div><div></div></div><div></div><div></div><div></div><div>"),$B=le("<div><span>✓ "),FB=le("<span>(<!>)"),MB=le("<div><div>:"),OB=le("<div><div>⚠️ <!>:</div><div>"),BB=le("<div><div><div><span></span><h3></h3></div><div><div><div></div><div></div></div><div><div></div><div></div></div><div><div></div><div>"),jB=le("<div><h4>✅ <!> (<!>)"),VB=le("<div><div><div></div><div></div></div><div></div><div></div><div></div><div><div>✓ "),zB=le("<div>→ "),UB=le("<div><h4>⏳ <!> (<!>)"),qB=le("<div><div><div></div><div></div></div><div></div><div></div><div></div><div><div>⏳ "),HB=le("<div><div>💡 </div><div> ");const WB=t=>{const{t:e}=pr(),[r,n]=Ae("details"),[i,o]=Ae(!1),s=zt(()=>t.entryId?jn.getJournalEntryById(t.entryId):null),a={"text-align":"center","margin-bottom":"2rem",position:"relative"},l={position:"absolute",top:"0",right:"0",display:"flex",gap:"0.5rem"},d={"font-size":"0.875rem","font-weight":"600",color:"var(--text-muted)","text-transform":"uppercase","margin-bottom":"0.5rem"},u={"font-size":"1.5rem","font-weight":"600",color:"var(--text-primary)",margin:"0.5rem 0"},h={"font-size":"2rem","font-weight":"700",color:"var(--primary-color)","margin-bottom":"0.5rem"},f={padding:"0.25rem 0.75rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"500","text-transform":"uppercase","letter-spacing":"0.5px","margin-bottom":"1rem",display:"inline-block"},p={display:"flex","justify-content":"space-between","align-items":"center",padding:"0.75rem 0","border-bottom":"1px solid var(--border-color)"},m={"font-weight":"500",color:"var(--text-muted)","font-size":"0.875rem"},x={"font-weight":"600",color:"var(--text-primary)"},P={display:"flex","border-bottom":"1px solid var(--border-color)","margin-bottom":"1.5rem"},g=v=>({padding:"0.75rem 1rem",background:"none",border:"none",cursor:"pointer","font-weight":"500",color:v?"var(--primary-color)":"var(--text-muted)","border-bottom":v?"2px solid var(--primary-color)":"2px solid transparent",transition:"all 0.2s ease"}),F={display:"grid","grid-template-columns":"2fr 2.5fr 1fr 1fr 1.5fr",gap:"1rem",padding:"1rem 0","border-bottom":"1px solid var(--border-color)","align-items":"center"},V={...F,"font-weight":"600","font-size":"0.875rem",color:"var(--text-muted)","border-bottom":"2px solid var(--border-color)"},N={display:"flex","justify-content":"space-between","align-items":"center",padding:"1rem",background:"var(--surface-color)","border-radius":"var(--border-radius-sm)","margin-top":"1rem"},R={display:"flex",gap:"1rem","justify-content":"flex-end","margin-top":"2rem"},M=v=>({draft:{bg:"#fff3cd",color:"#856404"},posted:{bg:"#d4edda",color:"#155724"},void:{bg:"#f8d7da",color:"#721c24"}})[v],C=v=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(v),k=v=>new Date(v).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),D=v=>new Date(v).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),$=()=>{s()?.status==="posted"&&!confirm(e("journal.confirmEditPosted","This entry has been posted. Editing will create a new draft copy. Continue?"))||o(!0)},w=()=>{if(s()&&confirm(e("journal.confirmPost","Are you sure you want to post this journal entry? This action cannot be undone.")))try{jn.postJournalEntry(s().id)}catch(v){alert(v instanceof Error?v.message:e("forms.errorPostingEntry","An error occurred while posting the entry"))}},_=()=>{s()&&confirm(e("journal.confirmVoid","Are you sure you want to void this journal entry?"))&&jn.voidJournalEntry(s().id)};return[T(Pi,{get isOpen(){return t.isOpen},get onClose(){return t.onClose},get title(){return e("journal.entryDetails","Journal Entry Details")},get children(){return Ve(()=>!s())()?(()=>{var v=TB(),z=v.firstChild,W=z.nextSibling,A=W.nextSibling,I=A.nextSibling;return v.style.setProperty("text-align","center"),v.style.setProperty("padding","3rem"),v.style.setProperty("color","var(--text-muted)"),z.style.setProperty("font-size","1.5rem"),z.style.setProperty("margin-bottom","1rem"),W.style.setProperty("font-size","1.1rem"),W.style.setProperty("margin-bottom","0.5rem"),c(W,()=>e("journal.entryNotFound","Entry Not Found")),A.style.setProperty("font-size","0.875rem"),c(A,()=>e("journal.entryNotFoundMessage","The journal entry you're looking for could not be found or may have been deleted.")),I.style.setProperty("margin-top","2rem"),c(I,T(mt,{variant:"primary",get onClick(){return t.onClose},get children(){return e("common.close")}})),v})():(()=>{const v=s(),z=M(v.status),W=Math.abs(v.totalDebit-v.totalCredit)<.01;return[(()=>{var A=IB(),I=A.firstChild,ee=I.nextSibling,Z=ee.nextSibling,X=Z.nextSibling,se=X.nextSibling;return y(A,a),c(I,T(mt,{variant:"outline",size:"sm",onClick:$,get title(){return e("journal.editEntryTooltip","Edit this journal entry")},get children(){return e("common.edit")}}),null),c(I,(()=>{var U=Ve(()=>v.status==="draft");return()=>U()&&T(mt,{variant:"primary",size:"sm",onClick:w,disabled:!W,get title(){return W?e("journal.postEntryTooltip","Post this journal entry"):e("journal.entryMustBeBalanced","Entry must be balanced to post")},get children(){return e("journal.post","Post")}})})(),null),c(I,(()=>{var U=Ve(()=>v.status==="posted");return()=>U()&&T(mt,{variant:"outline",size:"sm",onClick:_,style:{color:"#dc3545","border-color":"#dc3545"},get title(){return e("journal.voidEntryTooltip","Void this journal entry")},get children(){return e("entryBooks.void","Void")}})})(),null),y(ee,d),c(ee,()=>v.entryNumber),y(Z,u),c(Z,()=>v.description),y(X,h),c(X,()=>C(v.totalDebit)),c(se,()=>e(`journal.${v.status}`,v.status)),be(U=>{var E=l,O={...f,background:z.bg,color:z.color};return U.e=y(I,E,U.e),U.t=y(se,O,U.t),U},{e:void 0,t:void 0}),A})(),(()=>{var A=NB(),I=A.firstChild,ee=I.nextSibling,Z=ee.firstChild,X=Z.nextSibling;X.nextSibling;var se=ee.nextSibling,U=se.firstChild,E=U.nextSibling,O=E.nextSibling,L=O.nextSibling;return L.nextSibling,y(A,P),I.$$click=()=>n("details"),c(I,()=>e("common.details")),ee.$$click=()=>n("lines"),c(ee,()=>e("journal.journalLines","Journal Lines"),Z),c(ee,()=>v.lines.length,X),se.$$click=()=>n("reconciliation"),c(se,()=>e("banking.reconciliation","Reconciliation"),U),c(se,()=>v.lines.filter(G=>G.reconciled).length,E),c(se,()=>v.lines.length,L),be(G=>{var K=g(r()==="details"),q=g(r()==="lines"),B=g(r()==="reconciliation");return G.e=y(I,K,G.e),G.t=y(ee,q,G.t),G.a=y(se,B,G.a),G},{e:void 0,t:void 0,a:void 0}),A})(),Ve(()=>Ve(()=>r()==="details")()&&(()=>{var A=RB(),I=A.firstChild,ee=I.firstChild,Z=ee.nextSibling,X=I.nextSibling,se=X.firstChild,U=se.nextSibling,E=X.nextSibling,O=E.firstChild,L=O.nextSibling,G=E.nextSibling,K=G.firstChild,q=K.nextSibling,B=G.nextSibling,H=B.firstChild,Y=H.nextSibling,te=B.nextSibling,oe=te.firstChild,pe=oe.nextSibling,ne=te.nextSibling,Q=ne.firstChild,ce=Q.nextSibling,ue=ne.nextSibling,de=ue.firstChild,ge=de.firstChild,ye=ge.nextSibling,fe=de.nextSibling;return c(ee,()=>e("common.date")),c(Z,()=>k(v.date)),c(se,()=>e("journal.reference")),c(U,()=>v.reference||e("common.notAvailable","N/A")),c(O,()=>e("journal.totalDebit")),c(L,()=>C(v.totalDebit)),c(K,()=>e("journal.totalCredit")),c(q,()=>C(v.totalCredit)),c(H,()=>e("journal.balanceStatus","Balance Status")),c(Y,()=>W?`${e("journal.balanced")} ✓`:`${e("journal.unbalanced","Unbalanced")} (${C(Math.abs(v.totalDebit-v.totalCredit))} ${e("journal.difference","difference")})`),c(oe,()=>e("journal.createdBy")),c(pe,()=>v.createdBy),c(Q,()=>e("journal.createdAt","Created At")),c(ce,()=>D(v.createdAt)),c(A,(()=>{var Se=Ve(()=>!!v.postedAt);return()=>Se()&&(()=>{var qe=$v(),Oe=qe.firstChild,Ie=Oe.nextSibling;return c(Oe,()=>e("journal.postedAt","Posted At")),c(Ie,()=>D(v.postedAt)),be(Be=>{var ke=p,Ge=m,et=x;return Be.e=y(qe,ke,Be.e),Be.t=y(Oe,Ge,Be.t),Be.a=y(Ie,et,Be.a),Be},{e:void 0,t:void 0,a:void 0}),qe})()})(),ue),ue.style.setProperty("margin-top","2rem"),ue.style.setProperty("padding-top","1rem"),ue.style.setProperty("border-top","2px solid var(--border-color)"),de.style.setProperty("display","flex"),de.style.setProperty("justify-content","space-between"),de.style.setProperty("align-items","center"),de.style.setProperty("margin-bottom","1rem"),ge.style.setProperty("margin","0"),ge.style.setProperty("font-size","1rem"),c(ge,()=>e("journal.quickActions","Quick Actions")),ye.style.setProperty("display","flex"),ye.style.setProperty("gap","0.5rem"),c(ye,T(mt,{variant:"primary",size:"sm",onClick:$,get children(){return["✏️ ",Ve(()=>e("journal.editEntry"))]}}),null),c(ye,(()=>{var Se=Ve(()=>v.status==="draft");return()=>Se()&&T(mt,{variant:"outline",size:"sm",onClick:w,disabled:!W,style:{"border-color":W?"#4caf50":"#f44336",color:W?"#4caf50":"#f44336"},get children(){return W?`✓ ${e("journal.postEntry","Post Entry")}`:`⚠️ ${e("journal.fixBalance","Fix Balance")}`}})})(),null),c(ye,(()=>{var Se=Ve(()=>v.status==="posted");return()=>Se()&&T(mt,{variant:"outline",size:"sm",onClick:_,style:{color:"#dc3545","border-color":"#dc3545"},get children(){return["🗑️ ",Ve(()=>e("journal.voidEntry","Void Entry"))]}})})(),null),fe.style.setProperty("padding","1rem"),fe.style.setProperty("border-radius","var(--border-radius-sm)"),fe.style.setProperty("font-size","0.875rem"),c(fe,(()=>{var Se=Ve(()=>v.status==="draft");return()=>Se()&&(()=>{var qe=Gf(),Oe=qe.firstChild,Ie=Oe.firstChild;return Oe.nextSibling,c(Oe,()=>e("journal.draftEntry","Draft Entry"),Ie),c(qe,()=>e("journal.draftEntryDescription","This entry can be edited and posted."),null),c(qe,()=>!W&&` ⚠️ ${e("journal.entryMustBeBalancedBeforePosting","Entry must be balanced before posting.")}`,null),qe})()})(),null),c(fe,(()=>{var Se=Ve(()=>v.status==="posted");return()=>Se()&&(()=>{var qe=Gf(),Oe=qe.firstChild,Ie=Oe.firstChild;return Oe.nextSibling,c(Oe,()=>e("journal.postedEntry","Posted Entry"),Ie),c(qe,()=>e("journal.postedEntryDescription","This entry has been posted to the general ledger. Editing will create a new draft copy."),null),qe})()})(),null),c(fe,(()=>{var Se=Ve(()=>v.status==="void");return()=>Se()&&(()=>{var qe=Gf(),Oe=qe.firstChild,Ie=Oe.firstChild;return Oe.nextSibling,c(Oe,()=>e("journal.voidEntry"),Ie),c(qe,()=>e("journal.voidEntryDescription","This entry has been voided and cannot be modified."),null),qe})()})(),null),be(Se=>{var qe=p,Oe=m,Ie=x,Be=p,ke=m,Ge=x,et=p,ve=m,De=x,He=p,Je=m,Le=x,Te=p,he=m,Ne={...x,color:W?"#4caf50":"#f44336"},rt=p,re=m,Ue=x,we=p,xe=m,je=x,$e=v.status==="draft"?"#fff3cd":v.status==="posted"?"#d4edda":"#f8d7da";return Se.e=y(I,qe,Se.e),Se.t=y(ee,Oe,Se.t),Se.a=y(Z,Ie,Se.a),Se.o=y(X,Be,Se.o),Se.i=y(se,ke,Se.i),Se.n=y(U,Ge,Se.n),Se.s=y(E,et,Se.s),Se.h=y(O,ve,Se.h),Se.r=y(L,De,Se.r),Se.d=y(G,He,Se.d),Se.l=y(K,Je,Se.l),Se.u=y(q,Le,Se.u),Se.c=y(B,Te,Se.c),Se.w=y(H,he,Se.w),Se.m=y(Y,Ne,Se.m),Se.f=y(te,rt,Se.f),Se.y=y(oe,re,Se.y),Se.g=y(pe,Ue,Se.g),Se.p=y(ne,we,Se.p),Se.b=y(Q,xe,Se.b),Se.T=y(ce,je,Se.T),$e!==Se.A&&((Se.A=$e)!=null?fe.style.setProperty("background",$e):fe.style.removeProperty("background")),Se},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0}),A})()),Ve(()=>Ve(()=>r()==="lines")()&&(()=>{var A=DB(),I=A.firstChild,ee=I.firstChild,Z=ee.nextSibling,X=Z.nextSibling,se=X.nextSibling,U=se.nextSibling,E=I.nextSibling,O=E.firstChild,L=O.firstChild,G=L.firstChild;L.nextSibling;var K=O.nextSibling,q=K.firstChild,B=q.firstChild;q.nextSibling;var H=K.nextSibling,Y=E.nextSibling,te=Y.firstChild,oe=te.firstChild;oe.firstChild;var pe=te.nextSibling,ne=pe.firstChild,Q=ne.firstChild,ce=Q.firstChild,ue=ce.firstChild;ce.nextSibling;var de=Q.nextSibling,ge=de.firstChild,ye=ge.firstChild;ge.nextSibling;var fe=de.nextSibling,Se=fe.firstChild,qe=Se.firstChild;Se.nextSibling;var Oe=ne.nextSibling,Ie=Oe.firstChild,Be=Ie.firstChild,ke=Be.firstChild;Be.nextSibling;var Ge=Ie.nextSibling,et=Ge.firstChild,ve=et.firstChild;return et.nextSibling,c(ee,()=>e("journal.account")),c(Z,()=>e("common.description")),c(X,()=>e("journal.debit")),c(se,()=>e("journal.credit")),c(U,()=>e("banking.reconciliation")),c(A,T(_t,{get each(){return v.lines},children:De=>(()=>{var He=LB(),Je=He.firstChild,Le=Je.firstChild,Te=Le.nextSibling,he=Je.nextSibling,Ne=he.nextSibling,rt=Ne.nextSibling,re=rt.nextSibling;return Le.style.setProperty("font-weight","500"),c(Le,()=>De.accountName),Te.style.setProperty("font-size","0.75rem"),Te.style.setProperty("color","var(--text-muted)"),c(Te,()=>zr.getAccountById(De.accountId)?.accountNumber||De.accountId),he.style.setProperty("font-size","0.875rem"),c(he,()=>De.description||"-"),Ne.style.setProperty("font-weight","600"),c(Ne,(()=>{var Ue=Ve(()=>De.debitAmount>0);return()=>Ue()?C(De.debitAmount):"-"})()),rt.style.setProperty("font-weight","600"),c(rt,(()=>{var Ue=Ve(()=>De.creditAmount>0);return()=>Ue()?C(De.creditAmount):"-"})()),c(re,(()=>{var Ue=Ve(()=>!!De.reconciled);return()=>Ue()?(()=>{var we=$B(),xe=we.firstChild;return xe.firstChild,we.style.setProperty("display","flex"),we.style.setProperty("align-items","center"),we.style.setProperty("gap","0.5rem"),we.style.setProperty("color","#4caf50"),we.style.setProperty("font-size","0.875rem"),xe.style.setProperty("font-weight","600"),c(xe,()=>e("banking.reconciled"),null),c(we,(()=>{var je=Ve(()=>!!De.reconciledWith);return()=>je()&&(()=>{var $e=FB(),ft=$e.firstChild,ct=ft.nextSibling;return ct.nextSibling,$e.style.setProperty("font-size","0.75rem"),$e.style.setProperty("color","var(--text-muted)"),$e.style.setProperty("font-style","italic"),c($e,()=>De.reconciledWith,ct),$e})()})(),null),we})():(()=>{var we=Lv();return we.style.setProperty("color","var(--text-muted)"),we.style.setProperty("font-size","0.875rem"),c(we,()=>e("banking.notReconciled","Not Reconciled")),we})()})()),be(Ue=>{var we=F,xe=De.debitAmount>0?"#4caf50":"var(--text-muted)",je=De.creditAmount>0?"#f44336":"var(--text-muted)";return Ue.e=y(He,we,Ue.e),xe!==Ue.t&&((Ue.t=xe)!=null?Ne.style.setProperty("color",xe):Ne.style.removeProperty("color")),je!==Ue.a&&((Ue.a=je)!=null?rt.style.setProperty("color",je):rt.style.removeProperty("color")),Ue},{e:void 0,t:void 0,a:void 0}),He})()}),E),y(E,N),c(L,()=>e("journal.totalDebit"),G),c(O,()=>C(v.totalDebit),null),c(q,()=>e("journal.totalCredit"),B),c(K,()=>C(v.totalCredit),null),(W?"#4caf50":"#f44336")!=null?H.style.setProperty("color",W?"#4caf50":"#f44336"):H.style.removeProperty("color"),H.style.setProperty("font-weight","600"),c(H,()=>W?`✓ ${e("journal.balanced")}`:`⚠️ ${e("journal.notBalanced","Not Balanced")}`),Y.style.setProperty("margin-top","1rem"),Y.style.setProperty("padding","1rem"),Y.style.setProperty("border-radius","var(--border-radius-sm)"),Y.style.setProperty("font-size","0.875rem"),te.style.setProperty("margin-bottom","0.5rem"),c(oe,()=>e("journal.reconciliationSummary","Reconciliation Summary"),null),pe.style.setProperty("display","grid"),pe.style.setProperty("grid-template-columns","1fr 1fr"),pe.style.setProperty("gap","1rem"),Q.style.setProperty("margin-bottom","0.25rem"),c(ce,()=>e("journal.totalLines","Total Lines"),ue),c(Q,()=>v.lines.length,null),de.style.setProperty("margin-bottom","0.25rem"),de.style.setProperty("color","#4caf50"),c(ge,()=>e("journal.reconciled","Reconciled"),ye),c(de,()=>v.lines.filter(De=>De.reconciled).length,null),fe.style.setProperty("color","#f44336"),c(Se,()=>e("journal.unreconciled","Unreconciled"),qe),c(fe,()=>v.lines.filter(De=>!De.reconciled).length,null),Ie.style.setProperty("margin-bottom","0.25rem"),c(Be,()=>e("journal.bankAccounts","Bank Accounts"),ke),c(Ie,()=>v.lines.filter(De=>["1001","1002","1003"].includes(De.accountId)).length,null),Ge.style.setProperty("margin-bottom","0.25rem"),Ge.style.setProperty("color","#4caf50"),c(et,()=>e("journal.bankReconciled","Bank Reconciled"),ve),c(Ge,()=>v.lines.filter(De=>["1001","1002","1003"].includes(De.accountId)&&De.reconciled).length,null),c(Oe,(()=>{var De=Ve(()=>v.lines.filter(He=>["1001","1002","1003"].includes(He.accountId)&&!He.reconciled).length>0);return()=>De()&&(()=>{var He=Gf(),Je=He.firstChild,Le=Je.firstChild;return Je.nextSibling,He.style.setProperty("color","#f44336"),c(Je,()=>e("journal.bankPending","Bank Pending"),Le),c(He,()=>v.lines.filter(Te=>["1001","1002","1003"].includes(Te.accountId)&&!Te.reconciled).length,null),He})()})(),null),c(Y,(()=>{var De=Ve(()=>v.lines.filter(He=>He.reconciled).length>0);return()=>De()&&(()=>{var He=MB(),Je=He.firstChild,Le=Je.firstChild;return He.style.setProperty("margin-top","0.75rem"),He.style.setProperty("padding-top","0.75rem"),He.style.setProperty("border-top","1px solid var(--border-color)"),Je.style.setProperty("margin-bottom","0.5rem"),Je.style.setProperty("font-weight","500"),c(Je,()=>e("journal.reconciledLines","Reconciled Lines"),Le),c(He,()=>v.lines.filter(Te=>Te.reconciled).map(Te=>(()=>{var he=$v(),Ne=he.firstChild,rt=Ne.nextSibling;return he.style.setProperty("display","flex"),he.style.setProperty("justify-content","space-between"),he.style.setProperty("margin-bottom","0.25rem"),he.style.setProperty("font-size","0.8rem"),c(Ne,()=>Te.accountName),rt.style.setProperty("color","var(--text-muted)"),c(rt,(()=>{var re=Ve(()=>!!Te.reconciledWith);return()=>re()?`→ ${Te.reconciledWith}`:e("journal.manual","Manual")})()),he})()),null),He})()})(),null),c(Y,(()=>{var De=Ve(()=>v.lines.filter(He=>!He.reconciled&&["1001","1002","1003"].includes(He.accountId)).length>0);return()=>De()&&(()=>{var He=OB(),Je=He.firstChild,Le=Je.firstChild,Te=Le.nextSibling;Te.nextSibling;var he=Je.nextSibling;return He.style.setProperty("margin-top","0.75rem"),He.style.setProperty("padding-top","0.75rem"),He.style.setProperty("border-top","1px solid var(--border-color)"),Je.style.setProperty("margin-bottom","0.5rem"),Je.style.setProperty("font-weight","500"),Je.style.setProperty("color","#f44336"),c(Je,()=>e("journal.pendingBankReconciliation","Pending Bank Reconciliation"),Te),c(He,()=>v.lines.filter(Ne=>!Ne.reconciled&&["1001","1002","1003"].includes(Ne.accountId)).map(Ne=>(()=>{var rt=$v(),re=rt.firstChild,Ue=re.nextSibling;return rt.style.setProperty("display","flex"),rt.style.setProperty("justify-content","space-between"),rt.style.setProperty("margin-bottom","0.25rem"),rt.style.setProperty("font-size","0.8rem"),rt.style.setProperty("color","#f44336"),c(re,()=>Ne.accountName),c(Ue,()=>C(Ne.debitAmount||Ne.creditAmount)),rt})()),he),he.style.setProperty("margin-top","0.5rem"),he.style.setProperty("font-size","0.75rem"),he.style.setProperty("color","var(--text-muted)"),he.style.setProperty("font-style","italic"),c(he,()=>e("journal.visitBankConsolidations","Visit Bank Consolidations to reconcile these transactions")),He})()})(),null),be(De=>{var He=V,Je=v.lines.some(Le=>Le.reconciled)?"#e8f5e8":"#fff3cd";return De.e=y(I,He,De.e),Je!==De.t&&((De.t=Je)!=null?Y.style.setProperty("background",Je):Y.style.removeProperty("background")),De},{e:void 0,t:void 0}),A})()),Ve(()=>Ve(()=>r()==="reconciliation")()&&(()=>{var A=BB(),I=A.firstChild,ee=I.firstChild,Z=ee.firstChild,X=Z.nextSibling,se=ee.nextSibling,U=se.firstChild,E=U.firstChild,O=E.nextSibling,L=U.nextSibling,G=L.firstChild,K=G.nextSibling,q=L.nextSibling,B=q.firstChild,H=B.nextSibling;return I.style.setProperty("margin-bottom","1.5rem"),I.style.setProperty("padding","1rem"),I.style.setProperty("border-radius","var(--border-radius)"),I.style.setProperty("border","1px solid var(--border-color)"),ee.style.setProperty("display","flex"),ee.style.setProperty("align-items","center"),ee.style.setProperty("gap","0.5rem"),ee.style.setProperty("margin-bottom","1rem"),Z.style.setProperty("font-size","1.5rem"),c(Z,(()=>{var Y=Ve(()=>!!v.lines.every(te=>te.reconciled));return()=>Y()?"✅":v.lines.some(te=>te.reconciled)?"🔄":"⏳"})()),X.style.setProperty("margin","0"),X.style.setProperty("font-size","1.2rem"),c(X,(()=>{var Y=Ve(()=>!!v.lines.every(te=>te.reconciled));return()=>Y()?e("journal.fullyReconciled","Fully Reconciled"):Ve(()=>!!v.lines.some(te=>te.reconciled))()?e("journal.partiallyReconciled","Partially Reconciled"):e("journal.unreconciled","Unreconciled")})()),se.style.setProperty("display","grid"),se.style.setProperty("grid-template-columns","1fr 1fr 1fr"),se.style.setProperty("gap","1rem"),U.style.setProperty("text-align","center"),E.style.setProperty("font-size","2rem"),E.style.setProperty("font-weight","700"),E.style.setProperty("color","var(--primary-color)"),c(E,()=>v.lines.length),O.style.setProperty("font-size","0.875rem"),O.style.setProperty("color","var(--text-muted)"),c(O,()=>e("journal.totalLines","Total Lines")),L.style.setProperty("text-align","center"),G.style.setProperty("font-size","2rem"),G.style.setProperty("font-weight","700"),G.style.setProperty("color","#4caf50"),c(G,()=>v.lines.filter(Y=>Y.reconciled).length),K.style.setProperty("font-size","0.875rem"),K.style.setProperty("color","var(--text-muted)"),c(K,()=>e("journal.reconciled","Reconciled")),q.style.setProperty("text-align","center"),B.style.setProperty("font-size","2rem"),B.style.setProperty("font-weight","700"),B.style.setProperty("color","#f44336"),c(B,()=>v.lines.filter(Y=>!Y.reconciled).length),H.style.setProperty("font-size","0.875rem"),H.style.setProperty("color","var(--text-muted)"),c(H,()=>e("journal.pending","Pending")),c(A,(()=>{var Y=Ve(()=>v.lines.filter(te=>te.reconciled).length>0);return()=>Y()&&(()=>{var te=jB(),oe=te.firstChild,pe=oe.firstChild,ne=pe.nextSibling,Q=ne.nextSibling,ce=Q.nextSibling;return ce.nextSibling,te.style.setProperty("margin-bottom","1.5rem"),oe.style.setProperty("margin","0 0 1rem 0"),oe.style.setProperty("font-size","1.1rem"),oe.style.setProperty("color","#4caf50"),oe.style.setProperty("display","flex"),oe.style.setProperty("align-items","center"),oe.style.setProperty("gap","0.5rem"),c(oe,()=>e("journal.reconciledLines","Reconciled Lines"),ne),c(oe,()=>v.lines.filter(ue=>ue.reconciled).length,ce),c(te,()=>v.lines.filter(ue=>ue.reconciled).map(ue=>(()=>{var de=VB(),ge=de.firstChild,ye=ge.firstChild,fe=ye.nextSibling,Se=ge.nextSibling,qe=Se.nextSibling,Oe=qe.nextSibling,Ie=Oe.nextSibling,Be=Ie.firstChild;return Be.firstChild,de.style.setProperty("display","grid"),de.style.setProperty("grid-template-columns","2fr 2fr 1fr 1fr 1.5fr"),de.style.setProperty("gap","1rem"),de.style.setProperty("padding","0.75rem"),de.style.setProperty("margin-bottom","0.5rem"),de.style.setProperty("background","#f0f9f0"),de.style.setProperty("border-radius","var(--border-radius-sm)"),de.style.setProperty("align-items","center"),de.style.setProperty("font-size","0.875rem"),ye.style.setProperty("font-weight","500"),c(ye,()=>ue.accountName),fe.style.setProperty("font-size","0.75rem"),fe.style.setProperty("color","var(--text-muted)"),c(fe,()=>zr.getAccountById(ue.accountId)?.accountNumber),Se.style.setProperty("color","var(--text-muted)"),c(Se,()=>ue.description||e("journal.noDescription","No description")),qe.style.setProperty("font-weight","600"),c(qe,(()=>{var ke=Ve(()=>ue.debitAmount>0);return()=>ke()?C(ue.debitAmount):"-"})()),Oe.style.setProperty("font-weight","600"),c(Oe,(()=>{var ke=Ve(()=>ue.creditAmount>0);return()=>ke()?C(ue.creditAmount):"-"})()),Ie.style.setProperty("color","#4caf50"),Be.style.setProperty("font-weight","500"),c(Be,()=>e("journal.matched","Matched"),null),c(Ie,(()=>{var ke=Ve(()=>!!ue.reconciledWith);return()=>ke()&&(()=>{var Ge=zB();return Ge.firstChild,Ge.style.setProperty("font-size","0.75rem"),Ge.style.setProperty("font-style","italic"),c(Ge,()=>ue.reconciledWith,null),Ge})()})(),null),be(ke=>{var Ge=ue.debitAmount>0?"#4caf50":"var(--text-muted)",et=ue.creditAmount>0?"#f44336":"var(--text-muted)";return Ge!==ke.e&&((ke.e=Ge)!=null?qe.style.setProperty("color",Ge):qe.style.removeProperty("color")),et!==ke.t&&((ke.t=et)!=null?Oe.style.setProperty("color",et):Oe.style.removeProperty("color")),ke},{e:void 0,t:void 0}),de})()),null),te})()})(),null),c(A,(()=>{var Y=Ve(()=>v.lines.filter(te=>!te.reconciled).length>0);return()=>Y()&&(()=>{var te=UB(),oe=te.firstChild,pe=oe.firstChild,ne=pe.nextSibling,Q=ne.nextSibling,ce=Q.nextSibling;return ce.nextSibling,te.style.setProperty("margin-bottom","1.5rem"),oe.style.setProperty("margin","0 0 1rem 0"),oe.style.setProperty("font-size","1.1rem"),oe.style.setProperty("color","#f44336"),oe.style.setProperty("display","flex"),oe.style.setProperty("align-items","center"),oe.style.setProperty("gap","0.5rem"),c(oe,()=>e("journal.unreconciledLines","Unreconciled Lines"),ne),c(oe,()=>v.lines.filter(ue=>!ue.reconciled).length,ce),c(te,()=>v.lines.filter(ue=>!ue.reconciled).map(ue=>(()=>{var de=qB(),ge=de.firstChild,ye=ge.firstChild,fe=ye.nextSibling,Se=ge.nextSibling,qe=Se.nextSibling,Oe=qe.nextSibling,Ie=Oe.nextSibling,Be=Ie.firstChild;return Be.firstChild,de.style.setProperty("display","grid"),de.style.setProperty("grid-template-columns","2fr 2fr 1fr 1fr 1.5fr"),de.style.setProperty("gap","1rem"),de.style.setProperty("padding","0.75rem"),de.style.setProperty("margin-bottom","0.5rem"),de.style.setProperty("background","#fff9f0"),de.style.setProperty("border-radius","var(--border-radius-sm)"),de.style.setProperty("align-items","center"),de.style.setProperty("font-size","0.875rem"),de.style.setProperty("border","1px solid #ffe0b3"),ye.style.setProperty("font-weight","500"),c(ye,()=>ue.accountName),fe.style.setProperty("font-size","0.75rem"),fe.style.setProperty("color","var(--text-muted)"),c(fe,()=>zr.getAccountById(ue.accountId)?.accountNumber),Se.style.setProperty("color","var(--text-muted)"),c(Se,()=>ue.description||e("journal.noDescription","No description")),qe.style.setProperty("font-weight","600"),c(qe,(()=>{var ke=Ve(()=>ue.debitAmount>0);return()=>ke()?C(ue.debitAmount):"-"})()),Oe.style.setProperty("font-weight","600"),c(Oe,(()=>{var ke=Ve(()=>ue.creditAmount>0);return()=>ke()?C(ue.creditAmount):"-"})()),Ie.style.setProperty("color","#f44336"),Be.style.setProperty("font-weight","500"),c(Be,()=>e("journal.pending","Pending"),null),c(Ie,(()=>{var ke=Ve(()=>!!["1001","1002","1003"].includes(ue.accountId));return()=>ke()&&(()=>{var Ge=Lv();return Ge.style.setProperty("font-size","0.75rem"),Ge.style.setProperty("font-style","italic"),c(Ge,()=>e("journal.bankAccount","Bank account")),Ge})()})(),null),be(ke=>{var Ge=ue.debitAmount>0?"#4caf50":"var(--text-muted)",et=ue.creditAmount>0?"#f44336":"var(--text-muted)";return Ge!==ke.e&&((ke.e=Ge)!=null?qe.style.setProperty("color",Ge):qe.style.removeProperty("color")),et!==ke.t&&((ke.t=et)!=null?Oe.style.setProperty("color",et):Oe.style.removeProperty("color")),ke},{e:void 0,t:void 0}),de})()),null),c(te,(()=>{var ue=Ve(()=>v.lines.filter(de=>!de.reconciled&&["1001","1002","1003"].includes(de.accountId)).length>0);return()=>ue()&&(()=>{var de=HB(),ge=de.firstChild;ge.firstChild;var ye=ge.nextSibling,fe=ye.firstChild;return de.style.setProperty("padding","0.75rem"),de.style.setProperty("background","#ffebee"),de.style.setProperty("border-radius","var(--border-radius-sm)"),de.style.setProperty("margin-top","1rem"),de.style.setProperty("border","1px solid #ffcdd2"),ge.style.setProperty("font-weight","500"),ge.style.setProperty("margin-bottom","0.5rem"),ge.style.setProperty("color","#f44336"),c(ge,()=>e("journal.reconciliationTip","Reconciliation Tip"),null),ye.style.setProperty("font-size","0.875rem"),ye.style.setProperty("color","var(--text-muted)"),c(ye,()=>e("journal.unreconciledBankTransactions","This entry has unreconciled bank account transactions."),fe),c(ye,()=>e("journal.visitBankConsolidations","Visit Bank Consolidations to reconcile these transactions"),null),de})()})(),null),te})()})(),null),be(Y=>(Y=v.lines.every(te=>te.reconciled)?"#e8f5e8":v.lines.some(te=>te.reconciled)?"#fff3cd":"#ffebee")!=null?I.style.setProperty("background",Y):I.style.removeProperty("background")),A})()),(()=>{var A=Lv();return y(A,R),c(A,T(mt,{variant:"secondary",get onClick(){return t.onClose},get children(){return e("common.close")}}),null),c(A,T(mt,{variant:"primary",onClick:$,get children(){return e("journal.editEntry")}}),null),c(A,(()=>{var I=Ve(()=>v.status==="draft");return()=>I()&&T(mt,{variant:"outline",onClick:w,disabled:!W,style:{"border-color":"#4caf50",color:W?"#4caf50":"var(--text-muted)"},get children(){return W?e("journal.postEntry","Post Entry"):e("journal.entryNotBalanced","Entry Not Balanced")}})})(),null),c(A,(()=>{var I=Ve(()=>v.status==="posted");return()=>I()&&T(mt,{variant:"outline",onClick:_,style:{color:"#dc3545","border-color":"#dc3545"},get children(){return e("journal.voidEntry","Void Entry")}})})(),null),A})()]})()}}),Ve(()=>Ve(()=>!!s())()&&T(WA,{get isOpen(){return i()},onClose:()=>{o(!1)},get editEntry(){return s()}}))]};tr(["click"]);var GB=le("<div><div><h2></h2><p></p></div><div>"),Ha=le("<div>"),KB=le("<div> <!> • <!> "),YB=le("<div><div><label></label></div><div><label></label></div><div><label></label></div><div><label></label><input type=date></div><div><label></label><input type=date></div><div><label></label></div><div>"),XB=le("<div><span>:</span><span> "),Kf=le("<span>: "),ZB=le("<div><br>");const JB=()=>{const{t}=pr(),[e,r]=Ae(!1),[n,i]=Ae(!1),[o,s]=Ae(!1),[a,l]=Ae(null),[d,u]=Ae(!1),[h,f]=Ae(null),[p,m]=Ae("all"),[x,P]=Ae("all"),[g,F]=Ae(""),[V,N]=Ae(""),[R,M]=Ae("date"),[C,k]=Ae("desc"),D={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"2rem"},$={display:"flex",gap:"1rem","align-items":"center","margin-bottom":"2rem",padding:"1.5rem",background:"var(--surface-color)","border-radius":"var(--border-radius)",border:"1px solid var(--border-color)","flex-wrap":"wrap"},w={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem","margin-bottom":"2rem"},_={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(400px, 1fr))",gap:"1.5rem"},v=()=>[{value:"all",label:t("journal.allEntries","All Entries")},{value:"draft",label:t("journal.draft")},{value:"posted",label:t("journal.posted")},{value:"void",label:t("entryBooks.void","Void")}],z=()=>[{value:"all",label:t("accounts.allAccounts","All Accounts")},...zr.accounts.map(O=>({value:O.id,label:`${O.accountNumber} - ${O.name}`}))],W=()=>[{value:"date",label:t("common.date")},{value:"entryNumber",label:t("journal.entryNumber")},{value:"amount",label:t("common.amount")}],A=()=>{let O=jn.journalEntries;return p()!=="all"&&(O=O.filter(L=>L.status===p())),x()!=="all"&&(O=O.filter(L=>L.lines.some(G=>G.accountId===x()))),g(),V(),O=[...O].sort((L,G)=>{let K=0;switch(R()){case"date":K=new Date(L.date).getTime()-new Date(G.date).getTime();break;case"entryNumber":K=L.entryNumber.localeCompare(G.entryNumber);break;case"amount":K=L.totalDebit-G.totalDebit;break}return C()==="asc"?K:-K}),O},I=()=>{const O=jn.journalEntries,L=O.filter(Y=>Y.status==="draft"),G=O.filter(Y=>Y.status==="posted"),K=O.filter(Y=>Y.status==="void"),q=G.reduce((Y,te)=>Y+te.totalDebit,0),B=G.reduce((Y,te)=>Y+te.totalCredit,0),H=O.filter(Y=>Y.lines.some(te=>["1001","1002","1003"].includes(te.accountId)&&!te.reconciled)).length;return{totalEntries:O.length,draftEntries:L.length,postedEntries:G.length,voidEntries:K.length,totalDebit:q,totalCredit:B,unreconciledEntries:H}},ee=O=>{f(O.id),u(!0)},Z=()=>{l(null),r(!0)},X=()=>{i(!0)},se=()=>{r(!1),l(null)},U=O=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(O),E=I();return A(),Kn(()=>{jn.refreshData({search:"2025"})}),T(Bo,{get title(){return t("entryBooks.title")},get children(){return[(()=>{var O=GB(),L=O.firstChild,G=L.firstChild,K=G.nextSibling,q=L.nextSibling;return y(O,D),G.style.setProperty("margin","0 0 0.5rem 0"),G.style.setProperty("font-size","1.5rem"),c(G,()=>t("journal.title")),K.style.setProperty("margin","0"),K.style.setProperty("color","var(--text-muted)"),c(K,()=>t("entryBooks.subtitle","Manage accounting entries and general ledger records")),q.style.setProperty("display","flex"),q.style.setProperty("gap","1rem"),c(q,T(mt,{variant:"secondary",onClick:()=>window.location.href="/bank-consolidations",get children(){return t("entryBooks.viewReconciliation","View Reconciliation")}}),null),c(q,T(mt,{variant:"outline",onClick:X,style:{background:"#4caf50",color:"white","border-color":"#4caf50"},get children(){return["⚡ ",Ve(()=>t("journal.quickEntry","Quick Entry"))]}}),null),c(q,T(mt,{variant:"outline",onClick:()=>s(!0),get title(){return t("journal.manageTemplates","Manage Templates")},get children(){return["⚙️ ",Ve(()=>t("journal.templates","Templates"))]}}),null),c(q,T(mt,{variant:"primary",onClick:Z,get children(){return t("journal.addEntry","Add Journal Entry")}}),null),O})(),(()=>{var O=Ha();return y(O,w),c(O,T(Vt,{get title(){return t("entryBooks.totalEntries","Total Entries")},get subtitle(){return t("entryBooks.allJournalEntries","All journal entries")},get children(){return[(()=>{var L=Ha();return L.style.setProperty("font-size","1.5rem"),L.style.setProperty("font-weight","600"),L.style.setProperty("color","var(--primary-color)"),L.style.setProperty("margin-bottom","0.5rem"),c(L,()=>E.totalEntries),L})(),(()=>{var L=KB(),G=L.firstChild,K=G.nextSibling,q=K.nextSibling,B=q.nextSibling;return B.nextSibling,L.style.setProperty("font-size","0.875rem"),L.style.setProperty("color","var(--text-muted)"),c(L,()=>E.postedEntries,G),c(L,()=>t("journal.posted").toLowerCase(),K),c(L,()=>E.draftEntries,B),c(L,()=>t("journal.draft").toLowerCase(),null),c(L,(()=>{var H=Ve(()=>E.voidEntries>0);return()=>H()&&` • ${E.voidEntries} ${t("entryBooks.void","void").toLowerCase()}`})(),null),L})()]}}),null),c(O,T(Vt,{get title(){return t("journal.totalDebits")},get subtitle(){return t("entryBooks.postedEntriesOnly","Posted entries only")},get children(){return[(()=>{var L=Ha();return L.style.setProperty("font-size","1.5rem"),L.style.setProperty("font-weight","600"),L.style.setProperty("color","#4caf50"),L.style.setProperty("margin-bottom","0.5rem"),c(L,()=>U(E.totalDebit)),L})(),(()=>{var L=Ha();return L.style.setProperty("font-size","0.875rem"),L.style.setProperty("color","var(--text-muted)"),c(L,()=>t("entryBooks.fromPostedEntries","From {count} posted entries").replace("{count}",E.postedEntries.toString())),L})()]}}),null),c(O,T(Vt,{get title(){return t("journal.totalCredits")},get subtitle(){return t("entryBooks.postedEntriesOnly","Posted entries only")},get children(){return[(()=>{var L=Ha();return L.style.setProperty("font-size","1.5rem"),L.style.setProperty("font-weight","600"),L.style.setProperty("color","#f44336"),L.style.setProperty("margin-bottom","0.5rem"),c(L,()=>U(E.totalCredit)),L})(),(()=>{var L=Ha();return L.style.setProperty("font-size","0.875rem"),L.style.setProperty("color","var(--text-muted)"),c(L,()=>t("entryBooks.fromPostedEntries","From {count} posted entries").replace("{count}",E.postedEntries.toString())),L})()]}}),null),c(O,T(Vt,{get title(){return t("banking.unreconciled","Unreconciled")},get subtitle(){return t("banking.title")},get children(){return[(()=>{var L=Ha();return L.style.setProperty("font-size","1.5rem"),L.style.setProperty("font-weight","600"),L.style.setProperty("margin-bottom","0.5rem"),c(L,()=>E.unreconciledEntries),be(G=>(G=E.unreconciledEntries>0?"#ff9800":"#4caf50")!=null?L.style.setProperty("color",G):L.style.removeProperty("color")),L})(),(()=>{var L=Ha();return L.style.setProperty("font-size","0.875rem"),L.style.setProperty("color","var(--text-muted)"),c(L,(()=>{var G=Ve(()=>E.unreconciledEntries>0);return()=>G()?t("entryBooks.needBankReconciliation","Need bank reconciliation"):t("entryBooks.allReconciled","All reconciled")})()),L})()]}}),null),O})(),(()=>{var O=YB(),L=O.firstChild,G=L.firstChild,K=L.nextSibling,q=K.firstChild,B=K.nextSibling,H=B.firstChild,Y=B.nextSibling,te=Y.firstChild,oe=te.nextSibling,pe=Y.nextSibling,ne=pe.firstChild,Q=ne.nextSibling,ce=pe.nextSibling,ue=ce.firstChild,de=ce.nextSibling;return y(O,$),L.style.setProperty("min-width","150px"),G.style.setProperty("display","block"),G.style.setProperty("margin-bottom","0.5rem"),G.style.setProperty("font-weight","500"),G.style.setProperty("font-size","0.875rem"),c(G,()=>t("common.status")),c(L,T(Nn,{label:"",get value(){return p()},onChange:m,get options(){return v()}}),null),K.style.setProperty("min-width","200px"),q.style.setProperty("display","block"),q.style.setProperty("margin-bottom","0.5rem"),q.style.setProperty("font-weight","500"),q.style.setProperty("font-size","0.875rem"),c(q,()=>t("journal.account")),c(K,T(Nn,{label:"",get value(){return x()},onChange:P,get options(){return z()}}),null),B.style.setProperty("min-width","120px"),H.style.setProperty("display","block"),H.style.setProperty("margin-bottom","0.5rem"),H.style.setProperty("font-weight","500"),H.style.setProperty("font-size","0.875rem"),c(H,()=>t("entryBooks.sortBy","Sort By")),c(B,T(Nn,{label:"",get value(){return R()},onChange:M,get options(){return W()}}),null),Y.style.setProperty("min-width","130px"),te.style.setProperty("display","block"),te.style.setProperty("margin-bottom","0.5rem"),te.style.setProperty("font-weight","500"),te.style.setProperty("font-size","0.875rem"),c(te,()=>t("entryBooks.fromDate","From Date")),oe.addEventListener("change",ge=>F(ge.target.value)),oe.style.setProperty("padding","0.75rem"),oe.style.setProperty("border","1px solid var(--border-color)"),oe.style.setProperty("border-radius","var(--border-radius-sm)"),oe.style.setProperty("font-family","inherit"),oe.style.setProperty("width","100%"),pe.style.setProperty("min-width","130px"),ne.style.setProperty("display","block"),ne.style.setProperty("margin-bottom","0.5rem"),ne.style.setProperty("font-weight","500"),ne.style.setProperty("font-size","0.875rem"),c(ne,()=>t("entryBooks.toDate","To Date")),Q.addEventListener("change",ge=>N(ge.target.value)),Q.style.setProperty("padding","0.75rem"),Q.style.setProperty("border","1px solid var(--border-color)"),Q.style.setProperty("border-radius","var(--border-radius-sm)"),Q.style.setProperty("font-family","inherit"),Q.style.setProperty("width","100%"),ce.style.setProperty("min-width","100px"),ue.style.setProperty("display","block"),ue.style.setProperty("margin-bottom","0.5rem"),ue.style.setProperty("font-weight","500"),ue.style.setProperty("font-size","0.875rem"),c(ue,()=>t("entryBooks.order","Order")),c(ce,T(Nn,{label:"",get value(){return C()},onChange:k,get options(){return[{value:"desc",label:t("entryBooks.newest","Newest")},{value:"asc",label:t("entryBooks.oldest","Oldest")}]}}),null),de.style.setProperty("display","flex"),de.style.setProperty("align-items","end"),de.style.setProperty("gap","0.5rem"),c(de,T(mt,{variant:"outline",size:"sm",onClick:()=>{m("all"),P("all"),F(""),N(""),M("date"),k("desc")},get children(){return t("entryBooks.resetFilters","Reset Filters")}})),be(()=>oe.value=g()),be(()=>Q.value=V()),O})(),Ve(()=>Ve(()=>!!(p()!=="all"||x()!=="all"||g()||V()))()&&(()=>{var O=XB(),L=O.firstChild,G=L.firstChild,K=L.nextSibling,q=K.firstChild;return O.style.setProperty("display","flex"),O.style.setProperty("gap","0.5rem"),O.style.setProperty("align-items","center"),O.style.setProperty("margin-bottom","1rem"),O.style.setProperty("padding","0.75rem"),O.style.setProperty("background","var(--surface-color)"),O.style.setProperty("border-radius","var(--border-radius-sm)"),O.style.setProperty("border","1px solid var(--border-color)"),L.style.setProperty("font-size","0.875rem"),L.style.setProperty("font-weight","500"),c(L,()=>t("entryBooks.activeFilters","Active filters"),G),c(O,(()=>{var B=Ve(()=>p()!=="all");return()=>B()&&(()=>{var H=Kf(),Y=H.firstChild;return H.style.setProperty("padding","0.25rem 0.5rem"),H.style.setProperty("background","var(--primary-color)"),H.style.setProperty("color","white"),H.style.setProperty("border-radius","12px"),H.style.setProperty("font-size","0.75rem"),c(H,()=>t("common.status"),Y),c(H,p,null),H})()})(),K),c(O,(()=>{var B=Ve(()=>x()!=="all");return()=>B()&&(()=>{var H=Kf(),Y=H.firstChild;return H.style.setProperty("padding","0.25rem 0.5rem"),H.style.setProperty("background","var(--primary-color)"),H.style.setProperty("color","white"),H.style.setProperty("border-radius","12px"),H.style.setProperty("font-size","0.75rem"),c(H,()=>t("journal.account"),Y),c(H,()=>zr.getAccountById(x())?.name||t("common.unknown","Unknown"),null),H})()})(),K),c(O,(()=>{var B=Ve(()=>!!g());return()=>B()&&(()=>{var H=Kf(),Y=H.firstChild;return H.style.setProperty("padding","0.25rem 0.5rem"),H.style.setProperty("background","var(--primary-color)"),H.style.setProperty("color","white"),H.style.setProperty("border-radius","12px"),H.style.setProperty("font-size","0.75rem"),c(H,()=>t("entryBooks.from","From"),Y),c(H,g,null),H})()})(),K),c(O,(()=>{var B=Ve(()=>!!V());return()=>B()&&(()=>{var H=Kf(),Y=H.firstChild;return H.style.setProperty("padding","0.25rem 0.5rem"),H.style.setProperty("background","var(--primary-color)"),H.style.setProperty("color","white"),H.style.setProperty("border-radius","12px"),H.style.setProperty("font-size","0.75rem"),c(H,()=>t("entryBooks.to","To"),Y),c(H,V,null),H})()})(),K),K.style.setProperty("margin-left","auto"),K.style.setProperty("font-size","0.875rem"),K.style.setProperty("color","var(--text-muted)"),c(K,()=>jn.journalEntries.length,q),c(K,()=>t("entryBooks.entriesFound","{count} entries found").replace("{count}",jn.journalEntries.length.toString()),null),O})()),Ve(()=>Ve(()=>jn.journalEntries.length===0)()?T(Vt,{get title(){return t("entryBooks.noJournalEntries","No Journal Entries")},get subtitle(){return t("entryBooks.startByCreating","Start by creating your first entry")},get children(){var O=ZB(),L=O.firstChild;return O.style.setProperty("text-align","center"),O.style.setProperty("color","var(--text-muted)"),O.style.setProperty("padding","2rem"),c(O,()=>t("entryBooks.noEntriesMatch","No journal entries match your current filters."),L),c(O,T(mt,{variant:"primary",style:{"margin-top":"1rem"},onClick:Z,get children(){return t("entryBooks.createFirstEntry","Create First Entry")}}),null),O}}):(()=>{var O=Ha();return y(O,_),c(O,T(_t,{get each(){return jn.journalEntries},children:L=>T(sB,{entry:L,onViewDetails:ee})})),O})()),T(WA,{get isOpen(){return e()},onClose:se,get editEntry(){return a()}}),T(SB,{get isOpen(){return n()},onClose:()=>i(!1)}),T(EB,{get isOpen(){return o()},onClose:()=>s(!1)}),T(WB,{get isOpen(){return d()},onClose:()=>{u(!1),f(null)},get entryId(){return h()}})]}})};function Rn(t){"@babel/helpers - typeof";return Rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rn(t)}var co=Uint8Array,es=Uint16Array,i2=Int32Array,dg=new co([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ug=new co([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),n1=new co([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),KA=function(t,e){for(var r=new es(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var i=new i2(r[30]),n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)i[o]=o-r[n]<<5|n;return{b:r,r:i}},YA=KA(dg,2),XA=YA.b,i1=YA.r;XA[28]=258,i1[258]=28;var ZA=KA(ug,0),QB=ZA.b,kx=ZA.r,o1=new es(32768);for(var Gn=0;Gn<32768;++Gn){var Wl=(Gn&43690)>>1|(Gn&21845)<<1;Wl=(Wl&52428)>>2|(Wl&13107)<<2,Wl=(Wl&61680)>>4|(Wl&3855)<<4,o1[Gn]=((Wl&65280)>>8|(Wl&255)<<8)>>1}var Ca=function(t,e,r){for(var n=t.length,i=0,o=new es(e);i<n;++i)t[i]&&++o[t[i]-1];var s=new es(e);for(i=1;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(r){a=new es(1<<e);var l=15-e;for(i=0;i<n;++i)if(t[i])for(var d=i<<4|t[i],u=e-t[i],h=s[t[i]-1]++<<u,f=h|(1<<u)-1;h<=f;++h)a[o1[h]>>l]=d}else for(a=new es(n),i=0;i<n;++i)t[i]&&(a[i]=o1[s[t[i]-1]++]>>15-t[i]);return a},Pc=new co(288);for(var Gn=0;Gn<144;++Gn)Pc[Gn]=8;for(var Gn=144;Gn<256;++Gn)Pc[Gn]=9;for(var Gn=256;Gn<280;++Gn)Pc[Gn]=7;for(var Gn=280;Gn<288;++Gn)Pc[Gn]=8;var Ep=new co(32);for(var Gn=0;Gn<32;++Gn)Ep[Gn]=5;var ej=Ca(Pc,9,0),tj=Ca(Pc,9,1),rj=Ca(Ep,5,0),nj=Ca(Ep,5,1),Fv=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},js=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},Mv=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},o2=function(t){return(t+7)/8|0},JA=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new co(t.subarray(e,r))},ij=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ws=function(t,e,r){var n=new Error(e||ij[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,Ws),!r)throw n;return n},oj=function(t,e,r,n){var i=t.length,o=0;if(!i||e.f&&!e.l)return r||new co(0);var s=!r,a=s||e.i!=2,l=e.i;s&&(r=new co(i*3));var d=function(Y){var te=r.length;if(Y>te){var oe=new co(Math.max(te*2,Y));oe.set(r),r=oe}},u=e.f||0,h=e.p||0,f=e.b||0,p=e.l,m=e.d,x=e.m,P=e.n,g=i*8;do{if(!p){u=js(t,h,1);var F=js(t,h+1,3);if(h+=3,F)if(F==1)p=tj,m=nj,x=9,P=5;else if(F==2){var M=js(t,h,31)+257,C=js(t,h+10,15)+4,k=M+js(t,h+5,31)+1;h+=14;for(var D=new co(k),$=new co(19),w=0;w<C;++w)$[n1[w]]=js(t,h+w*3,7);h+=C*3;for(var _=Fv($),v=(1<<_)-1,z=Ca($,_,1),w=0;w<k;){var W=z[js(t,h,v)];h+=W&15;var V=W>>4;if(V<16)D[w++]=V;else{var A=0,I=0;for(V==16?(I=3+js(t,h,3),h+=2,A=D[w-1]):V==17?(I=3+js(t,h,7),h+=3):V==18&&(I=11+js(t,h,127),h+=7);I--;)D[w++]=A}}var ee=D.subarray(0,M),Z=D.subarray(M);x=Fv(ee),P=Fv(Z),p=Ca(ee,x,1),m=Ca(Z,P,1)}else Ws(1);else{var V=o2(h)+4,N=t[V-4]|t[V-3]<<8,R=V+N;if(R>i){l&&Ws(0);break}a&&d(f+N),r.set(t.subarray(V,R),f),e.b=f+=N,e.p=h=R*8,e.f=u;continue}if(h>g){l&&Ws(0);break}}a&&d(f+131072);for(var X=(1<<x)-1,se=(1<<P)-1,U=h;;U=h){var A=p[Mv(t,h)&X],E=A>>4;if(h+=A&15,h>g){l&&Ws(0);break}if(A||Ws(2),E<256)r[f++]=E;else if(E==256){U=h,p=null;break}else{var O=E-254;if(E>264){var w=E-257,L=dg[w];O=js(t,h,(1<<L)-1)+XA[w],h+=L}var G=m[Mv(t,h)&se],K=G>>4;G||Ws(3),h+=G&15;var Z=QB[K];if(K>3){var L=ug[K];Z+=Mv(t,h)&(1<<L)-1,h+=L}if(h>g){l&&Ws(0);break}a&&d(f+131072);var q=f+O;if(f<Z){var B=o-Z,H=Math.min(Z,q);for(B+f<0&&Ws(3);f<H;++f)r[f]=n[B+f]}for(;f<q;++f)r[f]=r[f-Z]}}e.l=p,e.p=U,e.b=f,e.f=u,p&&(u=1,e.m=x,e.d=m,e.n=P)}while(!u);return f!=r.length&&s?JA(r,0,f):r.subarray(0,f)},Wa=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},Ch=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},Ov=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var i=r.length,o=r.slice();if(!i)return{t:e3,l:0};if(i==1){var s=new co(r[0].s+1);return s[r[0].s]=1,{t:s,l:1}}r.sort(function(R,M){return R.f-M.f}),r.push({s:-1,f:25001});var a=r[0],l=r[1],d=0,u=1,h=2;for(r[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=i-1;)a=r[r[d].f<r[h].f?d++:h++],l=r[d!=u&&r[d].f<r[h].f?d++:h++],r[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var f=o[0].s,n=1;n<i;++n)o[n].s>f&&(f=o[n].s);var p=new es(f+1),m=s1(r[u-1],p,0);if(m>e){var n=0,x=0,P=m-e,g=1<<P;for(o.sort(function(M,C){return p[C.s]-p[M.s]||M.f-C.f});n<i;++n){var F=o[n].s;if(p[F]>e)x+=g-(1<<m-p[F]),p[F]=e;else break}for(x>>=P;x>0;){var V=o[n].s;p[V]<e?x-=1<<e-p[V]++-1:++n}for(;n>=0&&x;--n){var N=o[n].s;p[N]==e&&(--p[N],++x)}m=e}return{t:new co(p),l:m}},s1=function(t,e,r){return t.s==-1?Math.max(s1(t.l,e,r+1),s1(t.r,e,r+1)):e[t.s]=r},Ex=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new es(++e),n=0,i=t[0],o=1,s=function(l){r[n++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=t[a]}return{c:r.subarray(0,n),n:e}},_h=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},QA=function(t,e,r){var n=r.length,i=o2(e+2);t[i]=n&255,t[i+1]=n>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var o=0;o<n;++o)t[i+o+4]=r[o];return(i+4+n)*8},Tx=function(t,e,r,n,i,o,s,a,l,d,u){Wa(e,u++,r),++i[256];for(var h=Ov(i,15),f=h.t,p=h.l,m=Ov(o,15),x=m.t,P=m.l,g=Ex(f),F=g.c,V=g.n,N=Ex(x),R=N.c,M=N.n,C=new es(19),k=0;k<F.length;++k)++C[F[k]&31];for(var k=0;k<R.length;++k)++C[R[k]&31];for(var D=Ov(C,7),$=D.t,w=D.l,_=19;_>4&&!$[n1[_-1]];--_);var v=d+5<<3,z=_h(i,Pc)+_h(o,Ep)+s,W=_h(i,f)+_h(o,x)+s+14+3*_+_h(C,$)+2*C[16]+3*C[17]+7*C[18];if(l>=0&&v<=z&&v<=W)return QA(e,u,t.subarray(l,l+d));var A,I,ee,Z;if(Wa(e,u,1+(W<z)),u+=2,W<z){A=Ca(f,p,0),I=f,ee=Ca(x,P,0),Z=x;var X=Ca($,w,0);Wa(e,u,V-257),Wa(e,u+5,M-1),Wa(e,u+10,_-4),u+=14;for(var k=0;k<_;++k)Wa(e,u+3*k,$[n1[k]]);u+=3*_;for(var se=[F,R],U=0;U<2;++U)for(var E=se[U],k=0;k<E.length;++k){var O=E[k]&31;Wa(e,u,X[O]),u+=$[O],O>15&&(Wa(e,u,E[k]>>5&127),u+=E[k]>>12)}}else A=ej,I=Pc,ee=rj,Z=Ep;for(var k=0;k<a;++k){var L=n[k];if(L>255){var O=L>>18&31;Ch(e,u,A[O+257]),u+=I[O+257],O>7&&(Wa(e,u,L>>23&31),u+=dg[O]);var G=L&31;Ch(e,u,ee[G]),u+=Z[G],G>3&&(Ch(e,u,L>>5&8191),u+=ug[G])}else Ch(e,u,A[L]),u+=I[L]}return Ch(e,u,A[256]),u+I[256]},sj=new i2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),e3=new co(0),aj=function(t,e,r,n,i,o){var s=o.z||t.length,a=new co(n+s+5*(1+Math.ceil(s/7e3))+i),l=a.subarray(n,a.length-i),d=o.l,u=(o.r||0)&7;if(e){u&&(l[0]=o.r>>3);for(var h=sj[e-1],f=h>>13,p=h&8191,m=(1<<r)-1,x=o.p||new es(32768),P=o.h||new es(m+1),g=Math.ceil(r/3),F=2*g,V=function(pe){return(t[pe]^t[pe+1]<<g^t[pe+2]<<F)&m},N=new i2(25e3),R=new es(288),M=new es(32),C=0,k=0,D=o.i||0,$=0,w=o.w||0,_=0;D+2<s;++D){var v=V(D),z=D&32767,W=P[v];if(x[z]=W,P[v]=z,w<=D){var A=s-D;if((C>7e3||$>24576)&&(A>423||!d)){u=Tx(t,l,0,N,R,M,k,$,_,D-_,u),$=C=k=0,_=D;for(var I=0;I<286;++I)R[I]=0;for(var I=0;I<30;++I)M[I]=0}var ee=2,Z=0,X=p,se=z-W&32767;if(A>2&&v==V(D-se))for(var U=Math.min(f,A)-1,E=Math.min(32767,D),O=Math.min(258,A);se<=E&&--X&&z!=W;){if(t[D+ee]==t[D+ee-se]){for(var L=0;L<O&&t[D+L]==t[D+L-se];++L);if(L>ee){if(ee=L,Z=se,L>U)break;for(var G=Math.min(se,L-2),K=0,I=0;I<G;++I){var q=D-se+I&32767,B=x[q],H=q-B&32767;H>K&&(K=H,W=q)}}}z=W,W=x[z],se+=z-W&32767}if(Z){N[$++]=268435456|i1[ee]<<18|kx[Z];var Y=i1[ee]&31,te=kx[Z]&31;k+=dg[Y]+ug[te],++R[257+Y],++M[te],w=D+ee,++C}else N[$++]=t[D],++R[t[D]]}}for(D=Math.max(D,w);D<s;++D)N[$++]=t[D],++R[t[D]];u=Tx(t,l,d,N,R,M,k,$,_,D-_,u),d||(o.r=u&7|l[u/8|0]<<3,u-=7,o.h=P,o.p=x,o.i=D,o.w=w)}else{for(var D=o.w||0;D<s+d;D+=65535){var oe=D+65535;oe>=s&&(l[u/8|0]=d,oe=s),u=QA(l,u+1,t.subarray(D,oe))}o.i=s}return JA(a,0,n+o2(u)+i)},t3=function(){var t=1,e=0;return{p:function(r){for(var n=t,i=e,o=r.length|0,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)i+=n+=r[s];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}t=n,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},lj=function(t,e,r,n,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),s=new co(o.length+t.length);s.set(o),s.set(t,o.length),t=s,i.w=o.length}return aj(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,i)},r3=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},cj=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=t3();i.p(e.dictionary),r3(t,2,i.d())}},dj=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Ws(6,"invalid zlib data"),(t[1]>>5&1)==1&&Ws(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function a1(t,e){e||(e={});var r=t3();r.p(t);var n=lj(t,e,e.dictionary?6:2,4);return cj(n,e),r3(n,n.length-4,r.d()),n}function uj(t,e){return oj(t.subarray(dj(t),-4),{i:2},e,e)}var hj=typeof TextDecoder<"u"&&new TextDecoder,pj=0;try{hj.decode(e3,{stream:!0}),pj=1}catch{}var Pr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Bv(){Pr.console&&typeof Pr.console.log=="function"&&Pr.console.log.apply(Pr.console,arguments)}var On={log:Bv,warn:function(t){Pr.console&&(typeof Pr.console.warn=="function"?Pr.console.warn.apply(Pr.console,arguments):Bv.call(null,arguments))},error:function(t){Pr.console&&(typeof Pr.console.error=="function"?Pr.console.error.apply(Pr.console,arguments):Bv(t))}};function jv(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){Qc(n.response,e,r)},n.onerror=function(){On.error("could not download file")},n.send()}function Ix(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Yf(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var np,l1,Qc=Pr.saveAs||((typeof window>"u"?"undefined":Rn(window))!=="object"||window!==Pr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=Pr.URL||Pr.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?Ix(i.href)?jv(t,e,r):Yf(i,i.target="_blank"):Yf(i)):(i.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){Yf(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(Ix(t))jv(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){Yf(n)})}else navigator.msSaveOrOpenBlob(function(i,o){return o===void 0?o={autoBom:!1}:Rn(o)!=="object"&&(On.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return jv(t,e,r);var i=t.type==="application/octet-stream",o=/constructor/i.test(Pr.HTMLElement)||Pr.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o)&&(typeof FileReader>"u"?"undefined":Rn(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var u=a.result;u=s?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},a.readAsDataURL(t)}else{var l=Pr.URL||Pr.webkitURL,d=l.createObjectURL(t);n?n.location=d:location.href=d,n=null,setTimeout(function(){l.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function n3(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,o=r[n].process,s=i.exec(t);s&&(e=o(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),d=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),d.length==1&&(d="0"+d),"#"+a+l+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Vv(t,e){var r=t[0],n=t[1],i=t[2],o=t[3];r=Qi(r,n,i,o,e[0],7,-680876936),o=Qi(o,r,n,i,e[1],12,-389564586),i=Qi(i,o,r,n,e[2],17,606105819),n=Qi(n,i,o,r,e[3],22,-1044525330),r=Qi(r,n,i,o,e[4],7,-176418897),o=Qi(o,r,n,i,e[5],12,1200080426),i=Qi(i,o,r,n,e[6],17,-1473231341),n=Qi(n,i,o,r,e[7],22,-45705983),r=Qi(r,n,i,o,e[8],7,1770035416),o=Qi(o,r,n,i,e[9],12,-1958414417),i=Qi(i,o,r,n,e[10],17,-42063),n=Qi(n,i,o,r,e[11],22,-1990404162),r=Qi(r,n,i,o,e[12],7,1804603682),o=Qi(o,r,n,i,e[13],12,-40341101),i=Qi(i,o,r,n,e[14],17,-1502002290),r=eo(r,n=Qi(n,i,o,r,e[15],22,1236535329),i,o,e[1],5,-165796510),o=eo(o,r,n,i,e[6],9,-1069501632),i=eo(i,o,r,n,e[11],14,643717713),n=eo(n,i,o,r,e[0],20,-373897302),r=eo(r,n,i,o,e[5],5,-701558691),o=eo(o,r,n,i,e[10],9,38016083),i=eo(i,o,r,n,e[15],14,-660478335),n=eo(n,i,o,r,e[4],20,-405537848),r=eo(r,n,i,o,e[9],5,568446438),o=eo(o,r,n,i,e[14],9,-1019803690),i=eo(i,o,r,n,e[3],14,-187363961),n=eo(n,i,o,r,e[8],20,1163531501),r=eo(r,n,i,o,e[13],5,-1444681467),o=eo(o,r,n,i,e[2],9,-51403784),i=eo(i,o,r,n,e[7],14,1735328473),r=to(r,n=eo(n,i,o,r,e[12],20,-1926607734),i,o,e[5],4,-378558),o=to(o,r,n,i,e[8],11,-2022574463),i=to(i,o,r,n,e[11],16,1839030562),n=to(n,i,o,r,e[14],23,-35309556),r=to(r,n,i,o,e[1],4,-1530992060),o=to(o,r,n,i,e[4],11,1272893353),i=to(i,o,r,n,e[7],16,-155497632),n=to(n,i,o,r,e[10],23,-1094730640),r=to(r,n,i,o,e[13],4,681279174),o=to(o,r,n,i,e[0],11,-358537222),i=to(i,o,r,n,e[3],16,-722521979),n=to(n,i,o,r,e[6],23,76029189),r=to(r,n,i,o,e[9],4,-640364487),o=to(o,r,n,i,e[12],11,-421815835),i=to(i,o,r,n,e[15],16,530742520),r=ro(r,n=to(n,i,o,r,e[2],23,-995338651),i,o,e[0],6,-198630844),o=ro(o,r,n,i,e[7],10,1126891415),i=ro(i,o,r,n,e[14],15,-1416354905),n=ro(n,i,o,r,e[5],21,-57434055),r=ro(r,n,i,o,e[12],6,1700485571),o=ro(o,r,n,i,e[3],10,-1894986606),i=ro(i,o,r,n,e[10],15,-1051523),n=ro(n,i,o,r,e[1],21,-2054922799),r=ro(r,n,i,o,e[8],6,1873313359),o=ro(o,r,n,i,e[15],10,-30611744),i=ro(i,o,r,n,e[6],15,-1560198380),n=ro(n,i,o,r,e[13],21,1309151649),r=ro(r,n,i,o,e[4],6,-145523070),o=ro(o,r,n,i,e[11],10,-1120210379),i=ro(i,o,r,n,e[2],15,718787259),n=ro(n,i,o,r,e[9],21,-343485551),t[0]=nc(r,t[0]),t[1]=nc(n,t[1]),t[2]=nc(i,t[2]),t[3]=nc(o,t[3])}function hg(t,e,r,n,i,o){return e=nc(nc(e,t),nc(n,o)),nc(e<<i|e>>>32-i,r)}function Qi(t,e,r,n,i,o,s){return hg(e&r|~e&n,t,e,i,o,s)}function eo(t,e,r,n,i,o,s){return hg(e&n|r&~n,t,e,i,o,s)}function to(t,e,r,n,i,o,s){return hg(e^r^n,t,e,i,o,s)}function ro(t,e,r,n,i,o,s){return hg(r^(e|~n),t,e,i,o,s)}function i3(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Vv(n,fj(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Vv(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*r,Vv(n,i),n}function fj(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}np=Pr.atob.bind(Pr),l1=Pr.btoa.bind(Pr);var Nx="0123456789abcdef".split("");function yj(t){for(var e="",r=0;r<4;r++)e+=Nx[t>>8*r+4&15]+Nx[t>>8*r&15];return e}function mj(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function c1(t){return i3(t).map(mj).join("")}var gj=function(t){for(var e=0;e<t.length;e++)t[e]=yj(t[e]);return t.join("")}(i3("hello"))!="5d41402abc4b2a76b9719d911017c592";function nc(t,e){if(gj){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function d1(t,e){var r,n,i,o;if(t!==r){for(var s=(i=t,o=1+(256/t.length>>0),new Array(o+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var d=0;for(l=0;l<256;l++){var u=a[l];d=(d+u+s.charCodeAt(l))%256,a[l]=a[d],a[d]=u}r=t,n=a}else a=n;var h=e.length,f=0,p=0,m="";for(l=0;l<h;l++)p=(p+(u=a[f=(f+1)%256]))%256,a[f]=a[p],a[p]=u,s=a[(a[f]+a[p])%256],m+=String.fromCharCode(e.charCodeAt(l)^s);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Rx={print:4,modify:8,copy:16,"annot-forms":32};function yu(t,e,r,n){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(Rx.perm!==void 0)throw new Error("Invalid permission: "+a);i+=Rx[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var o=(e+this.padding).substr(0,32),s=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^i)),this.encryptionKey=c1(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=d1(this.encryptionKey,this.padding)}function mu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var i=t.charCodeAt(n);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[n]}return e}function Dx(t){if(Rn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var o=Math.random().toString(35);return e[r][o]=[n,!!i],o},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[r]){var s=e[r][o];try{s[0].apply(t,n)}catch(a){Pr.console&&On.error("jsPDF PubSub Error",a.message,a)}s[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Tp(t){if(!(this instanceof Tp))return new Tp(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function o3(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function tc(t,e,r,n,i){if(!(this instanceof tc))return new tc(t,e,r,n,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,o3.call(this,n,i)}function ld(t,e,r,n,i){if(!(this instanceof ld))return new ld(t,e,r,n,i);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,o3.call(this,n,i)}function gr(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],o=arguments[3],s=[],a=1,l=16,d="S",u=null;Rn(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,i=t.format||i,o=t.compress||t.compressPdf||o,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),d=t.defaultPathOperation||"S"),s=t.filters||(o===!0?["FlateEncode"]:s),n=n||"mm",r=(""+(r||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,f={},p={internal:{},__private__:{}};p.__private__.PubSub=Dx;var m="1.3",x=p.__private__.getPdfVersion=function(){return m};p.__private__.setPdfVersion=function(J){m=J};var P={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return P};var g=p.__private__.getPageFormat=function(J){return P[J]};i=i||"a4";var F={COMPAT:"compat",ADVANCED:"advanced"},V=F.COMPAT;function N(){this.saveGraphicsState(),Q(new bt(ve,0,0,-ve,0,Zi()*ve).toString()+" cm"),this.setFontSize(this.getFontSize()/ve),d="n",V=F.ADVANCED}function R(){this.restoreGraphicsState(),d="S",V=F.COMPAT}var M=p.__private__.combineFontStyleAndFontWeight=function(J,Ce){if(J=="bold"&&Ce=="normal"||J=="bold"&&Ce==400||J=="normal"&&Ce=="italic"||J=="bold"&&Ce=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ce&&(J=Ce==400||Ce==="normal"?J==="italic"?"italic":"normal":Ce!=700&&Ce!=="bold"||J!=="normal"?(Ce==700?"bold":Ce)+""+J:"bold"),J};p.advancedAPI=function(J){var Ce=V===F.COMPAT;return Ce&&N.call(this),typeof J!="function"||(J(this),Ce&&R.call(this)),this},p.compatAPI=function(J){var Ce=V===F.ADVANCED;return Ce&&R.call(this),typeof J!="function"||(J(this),Ce&&N.call(this)),this},p.isAdvancedAPI=function(){return V===F.ADVANCED};var C,k=function(J){if(V!==F.ADVANCED)throw new Error(J+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},D=p.roundToPrecision=p.__private__.roundToPrecision=function(J,Ce){var Ze=e||Ce;if(isNaN(J)||isNaN(Ze))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return J.toFixed(Ze).replace(/0+$/,"")};C=p.hpf=p.__private__.hpf=typeof l=="number"?function(J){if(isNaN(J))throw new Error("Invalid argument passed to jsPDF.hpf");return D(J,l)}:l==="smart"?function(J){if(isNaN(J))throw new Error("Invalid argument passed to jsPDF.hpf");return D(J,J>-1&&J<1?16:5)}:function(J){if(isNaN(J))throw new Error("Invalid argument passed to jsPDF.hpf");return D(J,16)};var $=p.f2=p.__private__.f2=function(J){if(isNaN(J))throw new Error("Invalid argument passed to jsPDF.f2");return D(J,2)},w=p.__private__.f3=function(J){if(isNaN(J))throw new Error("Invalid argument passed to jsPDF.f3");return D(J,3)},_=p.scale=p.__private__.scale=function(J){if(isNaN(J))throw new Error("Invalid argument passed to jsPDF.scale");return V===F.COMPAT?J*ve:V===F.ADVANCED?J:void 0},v=function(J){return V===F.COMPAT?Zi()-J:V===F.ADVANCED?J:void 0},z=function(J){return _(v(J))};p.__private__.setPrecision=p.setPrecision=function(J){typeof parseInt(J,10)=="number"&&(e=parseInt(J,10))};var W,A="00000000000000000000000000000000",I=p.__private__.getFileId=function(){return A},ee=p.__private__.setFileId=function(J){return A=J!==void 0&&/^[a-fA-F0-9]{32}$/.test(J)?J.toUpperCase():A.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Wn=new yu(u.userPermissions,u.userPassword,u.ownerPassword,A)),A};p.setFileId=function(J){return ee(J),this},p.getFileId=function(){return I()};var Z=p.__private__.convertDateToPDFDate=function(J){var Ce=J.getTimezoneOffset(),Ze=Ce<0?"+":"-",tt=Math.floor(Math.abs(Ce/60)),at=Math.abs(Ce%60),wt=[Ze,O(tt),"'",O(at),"'"].join("");return["D:",J.getFullYear(),O(J.getMonth()+1),O(J.getDate()),O(J.getHours()),O(J.getMinutes()),O(J.getSeconds()),wt].join("")},X=p.__private__.convertPDFDateToDate=function(J){var Ce=parseInt(J.substr(2,4),10),Ze=parseInt(J.substr(6,2),10)-1,tt=parseInt(J.substr(8,2),10),at=parseInt(J.substr(10,2),10),wt=parseInt(J.substr(12,2),10),Mt=parseInt(J.substr(14,2),10);return new Date(Ce,Ze,tt,at,wt,Mt,0)},se=p.__private__.setCreationDate=function(J){var Ce;if(J===void 0&&(J=new Date),J instanceof Date)Ce=Z(J);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(J))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ce=J}return W=Ce},U=p.__private__.getCreationDate=function(J){var Ce=W;return J==="jsDate"&&(Ce=X(W)),Ce};p.setCreationDate=function(J){return se(J),this},p.getCreationDate=function(J){return U(J)};var E,O=p.__private__.padd2=function(J){return("0"+parseInt(J)).slice(-2)},L=p.__private__.padd2Hex=function(J){return("00"+(J=J.toString())).substr(J.length)},G=0,K=[],q=[],B=0,H=[],Y=[],te=!1,oe=q,pe=function(){G=0,B=0,q=[],K=[],H=[],vt=gt(),Ft=gt()};p.__private__.setCustomOutputDestination=function(J){te=!0,oe=J};var ne=function(J){te||(oe=J)};p.__private__.resetCustomOutputDestination=function(){te=!1,oe=q};var Q=p.__private__.out=function(J){return J=J.toString(),B+=J.length+1,oe.push(J),oe},ce=p.__private__.write=function(J){return Q(arguments.length===1?J.toString():Array.prototype.join.call(arguments," "))},ue=p.__private__.getArrayBuffer=function(J){for(var Ce=J.length,Ze=new ArrayBuffer(Ce),tt=new Uint8Array(Ze);Ce--;)tt[Ce]=J.charCodeAt(Ce);return Ze},de=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return de};var ge=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(J){return ge=V===F.ADVANCED?J/ve:J,this};var ye,fe=p.__private__.getFontSize=p.getFontSize=function(){return V===F.COMPAT?ge:ge*ve},Se=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(J){return Se=J,this},p.__private__.getR2L=p.getR2L=function(){return Se};var qe,Oe=p.__private__.setZoomMode=function(J){var Ce=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(J))ye=J;else if(isNaN(J)){if(Ce.indexOf(J)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+J+'" is not recognized.');ye=J}else ye=parseInt(J,10)};p.__private__.getZoomMode=function(){return ye};var Ie,Be=p.__private__.setPageMode=function(J){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(J)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+J+'" is not recognized.');qe=J};p.__private__.getPageMode=function(){return qe};var ke=p.__private__.setLayoutMode=function(J){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(J)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+J+'" is not recognized.');Ie=J};p.__private__.getLayoutMode=function(){return Ie},p.__private__.setDisplayMode=p.setDisplayMode=function(J,Ce,Ze){return Oe(J),ke(Ce),Be(Ze),this};var Ge={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(J){if(Object.keys(Ge).indexOf(J)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ge[J]},p.__private__.getDocumentProperties=function(){return Ge},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(J){for(var Ce in Ge)Ge.hasOwnProperty(Ce)&&J[Ce]&&(Ge[Ce]=J[Ce]);return this},p.__private__.setDocumentProperty=function(J,Ce){if(Object.keys(Ge).indexOf(J)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ge[J]=Ce};var et,ve,De,He,Je,Le={},Te={},he=[],Ne={},rt={},re={},Ue={},we=null,xe=0,je=[],$e=new Dx(p),ft=t.hotfixes||[],ct={},yt={},$t=[],bt=function J(Ce,Ze,tt,at,wt,Mt){if(!(this instanceof J))return new J(Ce,Ze,tt,at,wt,Mt);isNaN(Ce)&&(Ce=1),isNaN(Ze)&&(Ze=0),isNaN(tt)&&(tt=0),isNaN(at)&&(at=1),isNaN(wt)&&(wt=0),isNaN(Mt)&&(Mt=0),this._matrix=[Ce,Ze,tt,at,wt,Mt]};Object.defineProperty(bt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(J){this._matrix[0]=J}}),Object.defineProperty(bt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(J){this._matrix[1]=J}}),Object.defineProperty(bt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(J){this._matrix[2]=J}}),Object.defineProperty(bt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(J){this._matrix[3]=J}}),Object.defineProperty(bt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(J){this._matrix[4]=J}}),Object.defineProperty(bt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(J){this._matrix[5]=J}}),Object.defineProperty(bt.prototype,"a",{get:function(){return this._matrix[0]},set:function(J){this._matrix[0]=J}}),Object.defineProperty(bt.prototype,"b",{get:function(){return this._matrix[1]},set:function(J){this._matrix[1]=J}}),Object.defineProperty(bt.prototype,"c",{get:function(){return this._matrix[2]},set:function(J){this._matrix[2]=J}}),Object.defineProperty(bt.prototype,"d",{get:function(){return this._matrix[3]},set:function(J){this._matrix[3]=J}}),Object.defineProperty(bt.prototype,"e",{get:function(){return this._matrix[4]},set:function(J){this._matrix[4]=J}}),Object.defineProperty(bt.prototype,"f",{get:function(){return this._matrix[5]},set:function(J){this._matrix[5]=J}}),Object.defineProperty(bt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(bt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(bt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(bt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),bt.prototype.join=function(J){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(J)},bt.prototype.multiply=function(J){var Ce=J.sx*this.sx+J.shy*this.shx,Ze=J.sx*this.shy+J.shy*this.sy,tt=J.shx*this.sx+J.sy*this.shx,at=J.shx*this.shy+J.sy*this.sy,wt=J.tx*this.sx+J.ty*this.shx+this.tx,Mt=J.tx*this.shy+J.ty*this.sy+this.ty;return new bt(Ce,Ze,tt,at,wt,Mt)},bt.prototype.decompose=function(){var J=this.sx,Ce=this.shy,Ze=this.shx,tt=this.sy,at=this.tx,wt=this.ty,Mt=Math.sqrt(J*J+Ce*Ce),er=(J/=Mt)*Ze+(Ce/=Mt)*tt;Ze-=J*er,tt-=Ce*er;var S=Math.sqrt(Ze*Ze+tt*tt);return er/=S,J*(tt/=S)<Ce*(Ze/=S)&&(J=-J,Ce=-Ce,er=-er,Mt=-Mt),{scale:new bt(Mt,0,0,S,0,0),translate:new bt(1,0,0,1,at,wt),rotate:new bt(J,Ce,-Ce,J,0,0),skew:new bt(1,0,er,1,0,0)}},bt.prototype.toString=function(J){return this.join(" ")},bt.prototype.inversed=function(){var J=this.sx,Ce=this.shy,Ze=this.shx,tt=this.sy,at=this.tx,wt=this.ty,Mt=1/(J*tt-Ce*Ze),er=tt*Mt,S=-Ce*Mt,ae=-Ze*Mt,Pe=J*Mt;return new bt(er,S,ae,Pe,-er*at-ae*wt,-S*at-Pe*wt)},bt.prototype.applyToPoint=function(J){var Ce=J.x*this.sx+J.y*this.shx+this.tx,Ze=J.x*this.shy+J.y*this.sy+this.ty;return new La(Ce,Ze)},bt.prototype.applyToRectangle=function(J){var Ce=this.applyToPoint(J),Ze=this.applyToPoint(new La(J.x+J.w,J.y+J.h));return new Al(Ce.x,Ce.y,Ze.x-Ce.x,Ze.y-Ce.y)},bt.prototype.clone=function(){var J=this.sx,Ce=this.shy,Ze=this.shx,tt=this.sy,at=this.tx,wt=this.ty;return new bt(J,Ce,Ze,tt,at,wt)},p.Matrix=bt;var Gt=p.matrixMult=function(J,Ce){return Ce.multiply(J)},Wt=new bt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Wt;var Dt=function(J,Ce){if(!rt[J]){var Ze=(Ce instanceof tc?"Sh":"P")+(Object.keys(Ne).length+1).toString(10);Ce.id=Ze,rt[J]=Ze,Ne[Ze]=Ce,$e.publish("addPattern",Ce)}};p.ShadingPattern=tc,p.TilingPattern=ld,p.addShadingPattern=function(J,Ce){return k("addShadingPattern()"),Dt(J,Ce),this},p.beginTilingPattern=function(J){k("beginTilingPattern()"),kl(J.boundingBox[0],J.boundingBox[1],J.boundingBox[2]-J.boundingBox[0],J.boundingBox[3]-J.boundingBox[1],J.matrix)},p.endTilingPattern=function(J,Ce){k("endTilingPattern()"),Ce.stream=Y[E].join(`
`),Dt(J,Ce),$e.publish("endTilingPattern",Ce),$t.pop().restore()};var Kt=p.__private__.newObject=function(){var J=gt();return St(J,!0),J},gt=p.__private__.newObjectDeferred=function(){return G++,K[G]=function(){return B},G},St=function(J,Ce){return Ce=typeof Ce=="boolean"&&Ce,K[J]=B,Ce&&Q(J+" 0 obj"),J},Qe=p.__private__.newAdditionalObject=function(){var J={objId:gt(),content:""};return H.push(J),J},vt=gt(),Ft=gt(),Pt=p.__private__.decodeColorString=function(J){var Ce=J.split(" ");if(Ce.length!==2||Ce[1]!=="g"&&Ce[1]!=="G")Ce.length===5&&(Ce[4]==="k"||Ce[4]==="K")&&(Ce=[(1-Ce[0])*(1-Ce[3]),(1-Ce[1])*(1-Ce[3]),(1-Ce[2])*(1-Ce[3]),"r"]);else{var Ze=parseFloat(Ce[0]);Ce=[Ze,Ze,Ze,"r"]}for(var tt="#",at=0;at<3;at++)tt+=("0"+Math.floor(255*parseFloat(Ce[at])).toString(16)).slice(-2);return tt},kt=p.__private__.encodeColorString=function(J){var Ce;typeof J=="string"&&(J={ch1:J});var Ze=J.ch1,tt=J.ch2,at=J.ch3,wt=J.ch4,Mt=J.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ze=="string"&&Ze.charAt(0)!=="#"){var er=new n3(Ze);if(er.ok)Ze=er.toHex();else if(!/^\d*\.?\d*$/.test(Ze))throw new Error('Invalid color "'+Ze+'" passed to jsPDF.encodeColorString.')}if(typeof Ze=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ze)&&(Ze="#"+Ze[1]+Ze[1]+Ze[2]+Ze[2]+Ze[3]+Ze[3]),typeof Ze=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ze)){var S=parseInt(Ze.substr(1),16);Ze=S>>16&255,tt=S>>8&255,at=255&S}if(tt===void 0||wt===void 0&&Ze===tt&&tt===at)if(typeof Ze=="string")Ce=Ze+" "+Mt[0];else switch(J.precision){case 2:Ce=$(Ze/255)+" "+Mt[0];break;case 3:default:Ce=w(Ze/255)+" "+Mt[0]}else if(wt===void 0||Rn(wt)==="object"){if(wt&&!isNaN(wt.a)&&wt.a===0)return Ce=["1.","1.","1.",Mt[1]].join(" ");if(typeof Ze=="string")Ce=[Ze,tt,at,Mt[1]].join(" ");else switch(J.precision){case 2:Ce=[$(Ze/255),$(tt/255),$(at/255),Mt[1]].join(" ");break;default:case 3:Ce=[w(Ze/255),w(tt/255),w(at/255),Mt[1]].join(" ")}}else if(typeof Ze=="string")Ce=[Ze,tt,at,wt,Mt[2]].join(" ");else switch(J.precision){case 2:Ce=[$(Ze),$(tt),$(at),$(wt),Mt[2]].join(" ");break;case 3:default:Ce=[w(Ze),w(tt),w(at),w(wt),Mt[2]].join(" ")}return Ce},Yt=p.__private__.getFilters=function(){return s},nr=p.__private__.putStream=function(J){var Ce=(J=J||{}).data||"",Ze=J.filters||Yt(),tt=J.alreadyAppliedFilters||[],at=J.addLength1||!1,wt=Ce.length,Mt=J.objectId,er=function($r){return $r};if(u!==null&&Mt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(er=Wn.encryptor(Mt,0));var S={};Ze===!0&&(Ze=["FlateEncode"]);var ae=J.additionalKeyValues||[],Pe=(S=gr.API.processDataByFilters!==void 0?gr.API.processDataByFilters(Ce,Ze):{data:Ce,reverseChain:[]}).reverseChain+(Array.isArray(tt)?tt.join(" "):tt.toString());if(S.data.length!==0&&(ae.push({key:"Length",value:S.data.length}),at===!0&&ae.push({key:"Length1",value:wt})),Pe.length!=0)if(Pe.split("/").length-1==1)ae.push({key:"Filter",value:Pe});else{ae.push({key:"Filter",value:"["+Pe+"]"});for(var Fe=0;Fe<ae.length;Fe+=1)if(ae[Fe].key==="DecodeParms"){for(var st=[],pt=0;pt<S.reverseChain.split("/").length-1;pt+=1)st.push("null");st.push(ae[Fe].value),ae[Fe].value="["+st.join(" ")+"]"}}Q("<<");for(var jt=0;jt<ae.length;jt++)Q("/"+ae[jt].key+" "+ae[jt].value);Q(">>"),S.data.length!==0&&(Q("stream"),Q(er(S.data)),Q("endstream"))},cr=p.__private__.putPage=function(J){var Ce=J.number,Ze=J.data,tt=J.objId,at=J.contentsObjId;St(tt,!0),Q("<</Type /Page"),Q("/Parent "+J.rootDictionaryObjId+" 0 R"),Q("/Resources "+J.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(C(J.mediaBox.bottomLeftX))+" "+parseFloat(C(J.mediaBox.bottomLeftY))+" "+C(J.mediaBox.topRightX)+" "+C(J.mediaBox.topRightY)+"]"),J.cropBox!==null&&Q("/CropBox ["+C(J.cropBox.bottomLeftX)+" "+C(J.cropBox.bottomLeftY)+" "+C(J.cropBox.topRightX)+" "+C(J.cropBox.topRightY)+"]"),J.bleedBox!==null&&Q("/BleedBox ["+C(J.bleedBox.bottomLeftX)+" "+C(J.bleedBox.bottomLeftY)+" "+C(J.bleedBox.topRightX)+" "+C(J.bleedBox.topRightY)+"]"),J.trimBox!==null&&Q("/TrimBox ["+C(J.trimBox.bottomLeftX)+" "+C(J.trimBox.bottomLeftY)+" "+C(J.trimBox.topRightX)+" "+C(J.trimBox.topRightY)+"]"),J.artBox!==null&&Q("/ArtBox ["+C(J.artBox.bottomLeftX)+" "+C(J.artBox.bottomLeftY)+" "+C(J.artBox.topRightX)+" "+C(J.artBox.topRightY)+"]"),typeof J.userUnit=="number"&&J.userUnit!==1&&Q("/UserUnit "+J.userUnit),$e.publish("putPage",{objId:tt,pageContext:je[Ce],pageNumber:Ce,page:Ze}),Q("/Contents "+at+" 0 R"),Q(">>"),Q("endobj");var wt=Ze.join(`
`);return V===F.ADVANCED&&(wt+=`
Q`),St(at,!0),nr({data:wt,filters:Yt(),objectId:at}),Q("endobj"),tt},on=p.__private__.putPages=function(){var J,Ce,Ze=[];for(J=1;J<=xe;J++)je[J].objId=gt(),je[J].contentsObjId=gt();for(J=1;J<=xe;J++)Ze.push(cr({number:J,data:Y[J],objId:je[J].objId,contentsObjId:je[J].contentsObjId,mediaBox:je[J].mediaBox,cropBox:je[J].cropBox,bleedBox:je[J].bleedBox,trimBox:je[J].trimBox,artBox:je[J].artBox,userUnit:je[J].userUnit,rootDictionaryObjId:vt,resourceDictionaryObjId:Ft}));St(vt,!0),Q("<</Type /Pages");var tt="/Kids [";for(Ce=0;Ce<xe;Ce++)tt+=Ze[Ce]+" 0 R ";Q(tt+"]"),Q("/Count "+xe),Q(">>"),Q("endobj"),$e.publish("postPutPages")},Dr=function(J){$e.publish("putFont",{font:J,out:Q,newObject:Kt,putStream:nr}),J.isAlreadyPutted!==!0&&(J.objectNumber=Kt(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+mu(J.postScriptName)),Q("/Subtype /Type1"),typeof J.encoding=="string"&&Q("/Encoding /"+J.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},lr=function(){for(var J in Le)Le.hasOwnProperty(J)&&(h===!1||h===!0&&f.hasOwnProperty(J))&&Dr(Le[J])},Zt=function(J){J.objectNumber=Kt();var Ce=[];Ce.push({key:"Type",value:"/XObject"}),Ce.push({key:"Subtype",value:"/Form"}),Ce.push({key:"BBox",value:"["+[C(J.x),C(J.y),C(J.x+J.width),C(J.y+J.height)].join(" ")+"]"}),Ce.push({key:"Matrix",value:"["+J.matrix.toString()+"]"});var Ze=J.pages[1].join(`
`);nr({data:Ze,additionalKeyValues:Ce,objectId:J.objectNumber}),Q("endobj")},yr=function(){for(var J in ct)ct.hasOwnProperty(J)&&Zt(ct[J])},Lr=function(J,Ce){var Ze,tt=[],at=1/(Ce-1);for(Ze=0;Ze<1;Ze+=at)tt.push(Ze);if(tt.push(1),J[0].offset!=0){var wt={offset:0,color:J[0].color};J.unshift(wt)}if(J[J.length-1].offset!=1){var Mt={offset:1,color:J[J.length-1].color};J.push(Mt)}for(var er="",S=0,ae=0;ae<tt.length;ae++){for(Ze=tt[ae];Ze>J[S+1].offset;)S++;var Pe=J[S].offset,Fe=(Ze-Pe)/(J[S+1].offset-Pe),st=J[S].color,pt=J[S+1].color;er+=L(Math.round((1-Fe)*st[0]+Fe*pt[0]).toString(16))+L(Math.round((1-Fe)*st[1]+Fe*pt[1]).toString(16))+L(Math.round((1-Fe)*st[2]+Fe*pt[2]).toString(16))}return er.trim()},Wr=function(J,Ce){Ce||(Ce=21);var Ze=Kt(),tt=Lr(J.colors,Ce),at=[];at.push({key:"FunctionType",value:"0"}),at.push({key:"Domain",value:"[0.0 1.0]"}),at.push({key:"Size",value:"["+Ce+"]"}),at.push({key:"BitsPerSample",value:"8"}),at.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),at.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),nr({data:tt,additionalKeyValues:at,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ze}),Q("endobj"),J.objectNumber=Kt(),Q("<< /ShadingType "+J.type),Q("/ColorSpace /DeviceRGB");var wt="/Coords ["+C(parseFloat(J.coords[0]))+" "+C(parseFloat(J.coords[1]))+" ";J.type===2?wt+=C(parseFloat(J.coords[2]))+" "+C(parseFloat(J.coords[3])):wt+=C(parseFloat(J.coords[2]))+" "+C(parseFloat(J.coords[3]))+" "+C(parseFloat(J.coords[4]))+" "+C(parseFloat(J.coords[5])),Q(wt+="]"),J.matrix&&Q("/Matrix ["+J.matrix.toString()+"]"),Q("/Function "+Ze+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},Ar=function(J,Ce){var Ze=gt(),tt=Kt();Ce.push({resourcesOid:Ze,objectOid:tt}),J.objectNumber=tt;var at=[];at.push({key:"Type",value:"/Pattern"}),at.push({key:"PatternType",value:"1"}),at.push({key:"PaintType",value:"1"}),at.push({key:"TilingType",value:"1"}),at.push({key:"BBox",value:"["+J.boundingBox.map(C).join(" ")+"]"}),at.push({key:"XStep",value:C(J.xStep)}),at.push({key:"YStep",value:C(J.yStep)}),at.push({key:"Resources",value:Ze+" 0 R"}),J.matrix&&at.push({key:"Matrix",value:"["+J.matrix.toString()+"]"}),nr({data:J.stream,additionalKeyValues:at,objectId:J.objectNumber}),Q("endobj")},fr=function(J){var Ce;for(Ce in Ne)Ne.hasOwnProperty(Ce)&&(Ne[Ce]instanceof tc?Wr(Ne[Ce]):Ne[Ce]instanceof ld&&Ar(Ne[Ce],J))},Yr=function(J){for(var Ce in J.objectNumber=Kt(),Q("<<"),J)switch(Ce){case"opacity":Q("/ca "+$(J[Ce]));break;case"stroke-opacity":Q("/CA "+$(J[Ce]))}Q(">>"),Q("endobj")},br=function(){var J;for(J in re)re.hasOwnProperty(J)&&Yr(re[J])},zn=function(){for(var J in Q("/XObject <<"),ct)ct.hasOwnProperty(J)&&ct[J].objectNumber>=0&&Q("/"+J+" "+ct[J].objectNumber+" 0 R");$e.publish("putXobjectDict"),Q(">>")},Bi=function(){Wn.oid=Kt(),Q("<<"),Q("/Filter /Standard"),Q("/V "+Wn.v),Q("/R "+Wn.r),Q("/U <"+Wn.toHexString(Wn.U)+">"),Q("/O <"+Wn.toHexString(Wn.O)+">"),Q("/P "+Wn.P),Q(">>"),Q("endobj")},Ni=function(){for(var J in Q("/Font <<"),Le)Le.hasOwnProperty(J)&&(h===!1||h===!0&&f.hasOwnProperty(J))&&Q("/"+J+" "+Le[J].objectNumber+" 0 R");Q(">>")},Ao=function(){if(Object.keys(Ne).length>0){for(var J in Q("/Shading <<"),Ne)Ne.hasOwnProperty(J)&&Ne[J]instanceof tc&&Ne[J].objectNumber>=0&&Q("/"+J+" "+Ne[J].objectNumber+" 0 R");$e.publish("putShadingPatternDict"),Q(">>")}},Ri=function(J){if(Object.keys(Ne).length>0){for(var Ce in Q("/Pattern <<"),Ne)Ne.hasOwnProperty(Ce)&&Ne[Ce]instanceof p.TilingPattern&&Ne[Ce].objectNumber>=0&&Ne[Ce].objectNumber<J&&Q("/"+Ce+" "+Ne[Ce].objectNumber+" 0 R");$e.publish("putTilingPatternDict"),Q(">>")}},os=function(){if(Object.keys(re).length>0){var J;for(J in Q("/ExtGState <<"),re)re.hasOwnProperty(J)&&re[J].objectNumber>=0&&Q("/"+J+" "+re[J].objectNumber+" 0 R");$e.publish("putGStateDict"),Q(">>")}},xn=function(J){St(J.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ni(),Ao(),Ri(J.objectOid),os(),zn(),Q(">>"),Q("endobj")},ko=function(){var J=[];lr(),br(),yr(),fr(J),$e.publish("putResources"),J.forEach(xn),xn({resourcesOid:Ft,objectOid:Number.MAX_SAFE_INTEGER}),$e.publish("postPutResources")},ks=function(){$e.publish("putAdditionalObjects");for(var J=0;J<H.length;J++){var Ce=H[J];St(Ce.objId,!0),Q(Ce.content),Q("endobj")}$e.publish("postPutAdditionalObjects")},Es=function(J){Te[J.fontName]=Te[J.fontName]||{},Te[J.fontName][J.fontStyle]=J.id},Nr=function(J,Ce,Ze,tt,at){var wt={id:"F"+(Object.keys(Le).length+1).toString(10),postScriptName:J,fontName:Ce,fontStyle:Ze,encoding:tt,isStandardFont:at||!1,metadata:{}};return $e.publish("addFont",{font:wt,instance:this}),Le[wt.id]=wt,Es(wt),wt.id},fn=function(J){for(var Ce=0,Ze=de.length;Ce<Ze;Ce++){var tt=Nr.call(this,J[Ce][0],J[Ce][1],J[Ce][2],de[Ce][3],!0);h===!1&&(f[tt]=!0);var at=J[Ce][0].split("-");Es({id:tt,fontName:at[0],fontStyle:at[1]||""})}$e.publish("addFonts",{fonts:Le,dictionary:Te})},Dn=function(J){return J.foo=function(){try{return J.apply(this,arguments)}catch(tt){var Ce=tt.stack||"";~Ce.indexOf(" at ")&&(Ce=Ce.split(" at ")[1]);var Ze="Error in function "+Ce.split(`
`)[0].split("<")[0]+": "+tt.message;if(!Pr.console)throw new Error(Ze);Pr.console.error(Ze,tt),Pr.alert&&alert(Ze)}},J.foo.bar=J,J.foo},ji=function(J,Ce){var Ze,tt,at,wt,Mt,er,S,ae,Pe;if(at=(Ce=Ce||{}).sourceEncoding||"Unicode",Mt=Ce.outputEncoding,(Ce.autoencode||Mt)&&Le[et].metadata&&Le[et].metadata[at]&&Le[et].metadata[at].encoding&&(wt=Le[et].metadata[at].encoding,!Mt&&Le[et].encoding&&(Mt=Le[et].encoding),!Mt&&wt.codePages&&(Mt=wt.codePages[0]),typeof Mt=="string"&&(Mt=wt[Mt]),Mt)){for(S=!1,er=[],Ze=0,tt=J.length;Ze<tt;Ze++)(ae=Mt[J.charCodeAt(Ze)])?er.push(String.fromCharCode(ae)):er.push(J[Ze]),er[Ze].charCodeAt(0)>>8&&(S=!0);J=er.join("")}for(Ze=J.length;S===void 0&&Ze!==0;)J.charCodeAt(Ze-1)>>8&&(S=!0),Ze--;if(!S)return J;for(er=Ce.noBOM?[]:[254,255],Ze=0,tt=J.length;Ze<tt;Ze++){if((Pe=(ae=J.charCodeAt(Ze))>>8)>>8)throw new Error("Character at position "+Ze+" of string '"+J+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");er.push(Pe),er.push(ae-(Pe<<8))}return String.fromCharCode.apply(void 0,er)},Sn=p.__private__.pdfEscape=p.pdfEscape=function(J,Ce){return ji(J,Ce).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},cn=p.__private__.beginPage=function(J){Y[++xe]=[],je[xe]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(J[0]),topRightY:Number(J[1])}},Vo(xe),ne(Y[E])},fo=function(J,Ce){var Ze,tt,at;switch(r=Ce||r,typeof J=="string"&&(Ze=g(J.toLowerCase()),Array.isArray(Ze)&&(tt=Ze[0],at=Ze[1])),Array.isArray(J)&&(tt=J[0]*ve,at=J[1]*ve),isNaN(tt)&&(tt=i[0],at=i[1]),(tt>14400||at>14400)&&(On.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),tt=Math.min(14400,tt),at=Math.min(14400,at)),i=[tt,at],r.substr(0,1)){case"l":at>tt&&(i=[at,tt]);break;case"p":tt>at&&(i=[at,tt])}cn(i),$c(Lc),Q(Vi),Oc!==0&&Q(Oc+" J"),_l!==0&&Q(_l+" j"),$e.publish("addPage",{pageNumber:xe})},Eo=function(J){J>0&&J<=xe&&(Y.splice(J,1),je.splice(J,1),xe--,E>xe&&(E=xe),this.setPage(E))},Vo=function(J){J>0&&J<=xe&&(E=J)},yn=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Y.length-1},Ts=function(J,Ce,Ze){var tt,at=void 0;return Ze=Ze||{},J=J!==void 0?J:Le[et].fontName,Ce=Ce!==void 0?Ce:Le[et].fontStyle,tt=J.toLowerCase(),Te[tt]!==void 0&&Te[tt][Ce]!==void 0?at=Te[tt][Ce]:Te[J]!==void 0&&Te[J][Ce]!==void 0?at=Te[J][Ce]:Ze.disableWarning===!1&&On.warn("Unable to look up font label for font '"+J+"', '"+Ce+"'. Refer to getFontList() for available fonts."),at||Ze.noFallback||(at=Te.times[Ce])==null&&(at=Te.times.normal),at},Is=p.__private__.putInfo=function(){var J=Kt(),Ce=function(tt){return tt};for(var Ze in u!==null&&(Ce=Wn.encryptor(J,0)),Q("<<"),Q("/Producer ("+Sn(Ce("jsPDF "+gr.version))+")"),Ge)Ge.hasOwnProperty(Ze)&&Ge[Ze]&&Q("/"+Ze.substr(0,1).toUpperCase()+Ze.substr(1)+" ("+Sn(Ce(Ge[Ze]))+")");Q("/CreationDate ("+Sn(Ce(W))+")"),Q(">>"),Q("endobj")},Ns=p.__private__.putCatalog=function(J){var Ce=(J=J||{}).rootDictionaryObjId||vt;switch(Kt(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+Ce+" 0 R"),ye||(ye="fullwidth"),ye){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ze=""+ye;Ze.substr(Ze.length-1)==="%"&&(ye=parseInt(ye)/100),typeof ye=="number"&&Q("/OpenAction [3 0 R /XYZ null null "+$(ye)+"]")}switch(Ie||(Ie="continuous"),Ie){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}qe&&Q("/PageMode /"+qe),$e.publish("putCatalog"),Q(">>"),Q("endobj")},Ju=p.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(G+1)),Q("/Root "+G+" 0 R"),Q("/Info "+(G-1)+" 0 R"),u!==null&&Q("/Encrypt "+Wn.oid+" 0 R"),Q("/ID [ <"+A+"> <"+A+"> ]"),Q(">>")},Dd=p.__private__.putHeader=function(){Q("%PDF-"+m),Q("%ºß¬à")},Qu=p.__private__.putXRef=function(){var J="0000000000";Q("xref"),Q("0 "+(G+1)),Q("0000000000 65535 f ");for(var Ce=1;Ce<=G;Ce++)typeof K[Ce]=="function"?Q((J+K[Ce]()).slice(-10)+" 00000 n "):K[Ce]!==void 0?Q((J+K[Ce]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},Rs=p.__private__.buildDocument=function(){pe(),ne(q),$e.publish("buildDocument"),Dd(),on(),ks(),ko(),u!==null&&Bi(),Is(),Ns();var J=B;return Qu(),Ju(),Q("startxref"),Q(""+J),Q("%%EOF"),ne(Y[E]),q.join(`
`)},ml=p.__private__.getBlob=function(J){return new Blob([ue(J)],{type:"application/pdf"})},gl=p.output=p.__private__.output=Dn(function(J,Ce){switch(typeof(Ce=Ce||{})=="string"?Ce={filename:Ce}:Ce.filename=Ce.filename||"generated.pdf",J){case void 0:return Rs();case"save":p.save(Ce.filename);break;case"arraybuffer":return ue(Rs());case"blob":return ml(Rs());case"bloburi":case"bloburl":if(Pr.URL!==void 0&&typeof Pr.URL.createObjectURL=="function")return Pr.URL&&Pr.URL.createObjectURL(ml(Rs()))||void 0;On.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ze="",tt=Rs();try{Ze=l1(tt)}catch{Ze=l1(unescape(encodeURIComponent(tt)))}return"data:application/pdf;filename="+Ce.filename+";base64,"+Ze;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Pr)==="[object Window]"){var at="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",wt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ce.pdfObjectUrl&&(at=Ce.pdfObjectUrl,wt="");var Mt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+at+'"'+wt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ce)+");<\/script></body></html>",er=Pr.open();return er!==null&&er.document.write(Mt),er}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Pr)==="[object Window]"){var S='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ce.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ce.filename+'" width="500px" height="400px" /></body></html>',ae=Pr.open();if(ae!==null){ae.document.write(S);var Pe=this;ae.document.documentElement.querySelector("#pdfViewer").onload=function(){ae.document.title=Ce.filename,ae.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Pe.output("bloburl"))}}return ae}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Pr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Fe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ce)+'"></iframe></body></html>',st=Pr.open();if(st!==null&&(st.document.write(Fe),st.document.title=Ce.filename),st||typeof safari>"u")return st;break;case"datauri":case"dataurl":return Pr.document.location.href=this.output("datauristring",Ce);default:return null}}),ta=function(J){return Array.isArray(ft)===!0&&ft.indexOf(J)>-1};switch(n){case"pt":ve=1;break;case"mm":ve=72/25.4;break;case"cm":ve=72/2.54;break;case"in":ve=72;break;case"px":ve=ta("px_scaling")==1?.75:96/72;break;case"pc":case"em":ve=12;break;case"ex":ve=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);ve=n}var Wn=null;se(),ee();var Ld=function(J){return u!==null?Wn.encryptor(J,0):function(Ce){return Ce}},Nc=p.__private__.getPageInfo=p.getPageInfo=function(J){if(isNaN(J)||J%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:je[J].objId,pageNumber:J,pageContext:je[J]}},wr=p.__private__.getPageInfoByObjId=function(J){if(isNaN(J)||J%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ce in je)if(je[Ce].objId===J)break;return Nc(Ce)},ra=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:je[E].objId,pageNumber:E,pageContext:je[E]}};p.addPage=function(){return fo.apply(this,arguments),this},p.setPage=function(){return Vo.apply(this,arguments),ne.call(this,Y[E]),this},p.insertPage=function(J){return this.addPage(),this.movePage(E,J),this},p.movePage=function(J,Ce){var Ze,tt;if(J>Ce){Ze=Y[J],tt=je[J];for(var at=J;at>Ce;at--)Y[at]=Y[at-1],je[at]=je[at-1];Y[Ce]=Ze,je[Ce]=tt,this.setPage(Ce)}else if(J<Ce){Ze=Y[J],tt=je[J];for(var wt=J;wt<Ce;wt++)Y[wt]=Y[wt+1],je[wt]=je[wt+1];Y[Ce]=Ze,je[Ce]=tt,this.setPage(Ce)}return this},p.deletePage=function(){return Eo.apply(this,arguments),this},p.__private__.text=p.text=function(J,Ce,Ze,tt,at){var wt,Mt,er,S,ae,Pe,Fe,st,pt,jt=(tt=tt||{}).scope||this;if(typeof J=="number"&&typeof Ce=="number"&&(typeof Ze=="string"||Array.isArray(Ze))){var $r=Ze;Ze=Ce,Ce=J,J=$r}if(arguments[3]instanceof bt?(k("The transform parameter of text() with a Matrix value"),pt=at):(er=arguments[4],S=arguments[5],Rn(Fe=arguments[3])==="object"&&Fe!==null||(typeof er=="string"&&(S=er,er=null),typeof Fe=="string"&&(S=Fe,Fe=null),typeof Fe=="number"&&(er=Fe,Fe=null),tt={flags:Fe,angle:er,align:S})),isNaN(Ce)||isNaN(Ze)||J==null)throw new Error("Invalid arguments passed to jsPDF.text");if(J.length===0)return jt;var Xr="",Fr=!1,Cn=typeof tt.lineHeightFactor=="number"?tt.lineHeightFactor:wn,Fn=jt.internal.scaleFactor;function Ms(Un){return Un=Un.split("	").join(Array(tt.TabLen||9).join(" ")),Sn(Un,Fe)}function zi(Un){for(var qn,li=Un.concat(),Si=[],Ba=li.length;Ba--;)typeof(qn=li.shift())=="string"?Si.push(qn):Array.isArray(Un)&&(qn.length===1||qn[1]===void 0&&qn[2]===void 0)?Si.push(qn[0]):Si.push([qn[0],qn[1],qn[2]]);return Si}function sa(Un,qn){var li;if(typeof Un=="string")li=qn(Un)[0];else if(Array.isArray(Un)){for(var Si,Ba,lh=Un.concat(),Gd=[],lf=lh.length;lf--;)typeof(Si=lh.shift())=="string"?Gd.push(qn(Si)[0]):Array.isArray(Si)&&typeof Si[0]=="string"&&(Ba=qn(Si[0],Si[1],Si[2]),Gd.push([Ba[0],Ba[1],Ba[2]]));li=Gd}return li}var aa=!1,th=!0;if(typeof J=="string")aa=!0;else if(Array.isArray(J)){var rh=J.concat();Mt=[];for(var Bd,Ui=rh.length;Ui--;)(typeof(Bd=rh.shift())!="string"||Array.isArray(Bd)&&typeof Bd[0]!="string")&&(th=!1);aa=th}if(aa===!1)throw new Error('Type of text must be string or Array. "'+J+'" is not recognized.');typeof J=="string"&&(J=J.match(/[\r?\n]/)?J.split(/\r\n|\r|\n/g):[J]);var jd=ge/jt.internal.scaleFactor,Vd=jd*(Cn-1);switch(tt.baseline){case"bottom":Ze-=Vd;break;case"top":Ze+=jd-Vd;break;case"hanging":Ze+=jd-2*Vd;break;case"middle":Ze+=jd/2-Vd}if((Pe=tt.maxWidth||0)>0&&(typeof J=="string"?J=jt.splitTextToSize(J,Pe):Object.prototype.toString.call(J)==="[object Array]"&&(J=J.reduce(function(Un,qn){return Un.concat(jt.splitTextToSize(qn,Pe))},[]))),wt={text:J,x:Ce,y:Ze,options:tt,mutex:{pdfEscape:Sn,activeFontKey:et,fonts:Le,activeFontSize:ge}},$e.publish("preProcessText",wt),J=wt.text,er=(tt=wt.options).angle,!(pt instanceof bt)&&er&&typeof er=="number"){er*=Math.PI/180,tt.rotationDirection===0&&(er=-er),V===F.ADVANCED&&(er=-er);var zd=Math.cos(er),nh=Math.sin(er);pt=new bt(zd,nh,-nh,zd,0,0)}else er&&er instanceof bt&&(pt=er);V!==F.ADVANCED||pt||(pt=Wt),(ae=tt.charSpace||Da)!==void 0&&(Xr+=C(_(ae))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(st=tt.horizontalScale)!==void 0&&(Xr+=C(100*st)+` Tz
`),tt.lang;var To=-1,Ng=tt.renderingMode!==void 0?tt.renderingMode:tt.stroke,ih=jt.internal.getCurrentPageInfo().pageContext;switch(Ng){case 0:case!1:case"fill":To=0;break;case 1:case!0:case"stroke":To=1;break;case 2:case"fillThenStroke":To=2;break;case 3:case"invisible":To=3;break;case 4:case"fillAndAddForClipping":To=4;break;case 5:case"strokeAndAddPathForClipping":To=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":To=6;break;case 7:case"addToPathForClipping":To=7}var nf=ih.usedRenderingMode!==void 0?ih.usedRenderingMode:-1;To!==-1?Xr+=To+` Tr
`:nf!==-1&&(Xr+=`0 Tr
`),To!==-1&&(ih.usedRenderingMode=To),S=tt.align||"left";var as,Ud=ge*Cn,of=jt.internal.pageSize.getWidth(),sf=Le[et];ae=tt.charSpace||Da,Pe=tt.maxWidth||0,Fe=Object.assign({autoencode:!0,noBOM:!0},tt.flags);var Il=[],Bc=function(Un){return jt.getStringUnitWidth(Un,{font:sf,charSpace:ae,fontSize:ge,doKerning:!1})*ge/Fn};if(Object.prototype.toString.call(J)==="[object Array]"){var Io;Mt=zi(J),S!=="left"&&(as=Mt.map(Bc));var yo,Nl=0;if(S==="right"){Ce-=as[0],J=[],Ui=Mt.length;for(var Fa=0;Fa<Ui;Fa++)Fa===0?(yo=qo(Ce),Io=xi(Ze)):(yo=_(Nl-as[Fa]),Io=-Ud),J.push([Mt[Fa],yo,Io]),Nl=as[Fa]}else if(S==="center"){Ce-=as[0]/2,J=[],Ui=Mt.length;for(var Ma=0;Ma<Ui;Ma++)Ma===0?(yo=qo(Ce),Io=xi(Ze)):(yo=_((Nl-as[Ma])/2),Io=-Ud),J.push([Mt[Ma],yo,Io]),Nl=as[Ma]}else if(S==="left"){J=[],Ui=Mt.length;for(var qd=0;qd<Ui;qd++)J.push(Mt[qd])}else if(S==="justify"&&sf.encoding==="Identity-H"){J=[],Ui=Mt.length,Pe=Pe!==0?Pe:of;for(var Oa=0,ai=0;ai<Ui;ai++)if(Io=ai===0?xi(Ze):-Ud,yo=ai===0?qo(Ce):Oa,ai<Ui-1){var oh=_((Pe-as[ai])/(Mt[ai].split(" ").length-1)),mo=Mt[ai].split(" ");J.push([mo[0]+" ",yo,Io]),Oa=0;for(var ls=1;ls<mo.length;ls++){var Hd=(Bc(mo[ls-1]+" "+mo[ls])-Bc(mo[ls]))*Fn+oh;ls==mo.length-1?J.push([mo[ls],Hd,0]):J.push([mo[ls]+" ",Hd,0]),Oa-=Hd}}else J.push([Mt[ai],yo,Io]);J.push(["",Oa,0])}else{if(S!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(J=[],Ui=Mt.length,Pe=Pe!==0?Pe:of,ai=0;ai<Ui;ai++)Io=ai===0?xi(Ze):-Ud,yo=ai===0?qo(Ce):0,ai<Ui-1?Il.push(C(_((Pe-as[ai])/(Mt[ai].split(" ").length-1)))):Il.push(0),J.push([Mt[ai],yo,Io])}}var af=typeof tt.R2L=="boolean"?tt.R2L:Se;af===!0&&(J=sa(J,function(Un,qn,li){return[Un.split("").reverse().join(""),qn,li]})),wt={text:J,x:Ce,y:Ze,options:tt,mutex:{pdfEscape:Sn,activeFontKey:et,fonts:Le,activeFontSize:ge}},$e.publish("postProcessText",wt),J=wt.text,Fr=wt.mutex.isHex||!1;var sh=Le[et].encoding;sh!=="WinAnsiEncoding"&&sh!=="StandardEncoding"||(J=sa(J,function(Un,qn,li){return[Ms(Un),qn,li]})),Mt=zi(J),J=[];for(var jc,Vc,Rl,zc=0,Wd=1,Uc=Array.isArray(Mt[0])?Wd:zc,Dl="",ah=function(Un,qn,li){var Si="";return li instanceof bt?(li=typeof tt.angle=="number"?Gt(li,new bt(1,0,0,1,Un,qn)):Gt(new bt(1,0,0,1,Un,qn),li),V===F.ADVANCED&&(li=Gt(new bt(1,0,0,-1,0,0),li)),Si=li.join(" ")+` Tm
`):Si=C(Un)+" "+C(qn)+` Td
`,Si},cs=0;cs<Mt.length;cs++){switch(Dl="",Uc){case Wd:Rl=(Fr?"<":"(")+Mt[cs][0]+(Fr?">":")"),jc=parseFloat(Mt[cs][1]),Vc=parseFloat(Mt[cs][2]);break;case zc:Rl=(Fr?"<":"(")+Mt[cs]+(Fr?">":")"),jc=qo(Ce),Vc=xi(Ze)}Il!==void 0&&Il[cs]!==void 0&&(Dl=Il[cs]+` Tw
`),cs===0?J.push(Dl+ah(jc,Vc,pt)+Rl):Uc===zc?J.push(Dl+Rl):Uc===Wd&&J.push(Dl+ah(jc,Vc,pt)+Rl)}J=Uc===zc?J.join(` Tj
T* `):J.join(` Tj
`),J+=` Tj
`;var ds=`BT
/`;return ds+=et+" "+ge+` Tf
`,ds+=C(ge*Cn)+` TL
`,ds+=$s+`
`,ds+=Xr,ds+=J,Q(ds+="ET"),f[et]=!0,jt};var eh=p.__private__.clip=p.clip=function(J){return Q(J==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return eh("evenodd")},p.__private__.discardPath=p.discardPath=function(){return Q("n"),this};var ss=p.__private__.isValidStyle=function(J){var Ce=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(J)!==-1&&(Ce=!0),Ce};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(J){return ss(J)&&(d=J),this};var $d=p.__private__.getStyle=p.getStyle=function(J){var Ce=d;switch(J){case"D":case"S":Ce="S";break;case"F":Ce="f";break;case"FD":case"DF":Ce="B";break;case"f":case"f*":case"B":case"B*":Ce=J}return Ce},zo=p.close=function(){return Q("h"),this};p.stroke=function(){return Q("S"),this},p.fill=function(J){return vl("f",J),this},p.fillEvenOdd=function(J){return vl("f*",J),this},p.fillStroke=function(J){return vl("B",J),this},p.fillStrokeEvenOdd=function(J){return vl("B*",J),this};var vl=function(J,Ce){Rn(Ce)==="object"?Pl(Ce,J):Q(J)},Rc=function(J){J===null||V===F.ADVANCED&&J===void 0||(J=$d(J),Q(J))};function bl(J,Ce,Ze,tt,at){var wt=new ld(Ce||this.boundingBox,Ze||this.xStep,tt||this.yStep,this.gState,at||this.matrix);wt.stream=this.stream;var Mt=J+"$$"+this.cloneIndex+++"$$";return Dt(Mt,wt),wt}var Pl=function(J,Ce){var Ze=rt[J.key],tt=Ne[Ze];if(tt instanceof tc)Q("q"),Q(Fd(Ce)),tt.gState&&p.setGState(tt.gState),Q(J.matrix.toString()+" cm"),Q("/"+Ze+" sh"),Q("Q");else if(tt instanceof ld){var at=new bt(1,0,0,-1,0,Zi());J.matrix&&(at=at.multiply(J.matrix||Wt),Ze=bl.call(tt,J.key,J.boundingBox,J.xStep,J.yStep,at).id),Q("q"),Q("/Pattern cs"),Q("/"+Ze+" scn"),tt.gState&&p.setGState(tt.gState),Q(Ce),Q("Q")}},Fd=function(J){switch(J){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ds=p.moveTo=function(J,Ce){return Q(C(_(J))+" "+C(z(Ce))+" m"),this},Uo=p.lineTo=function(J,Ce){return Q(C(_(J))+" "+C(z(Ce))+" l"),this},Ls=p.curveTo=function(J,Ce,Ze,tt,at,wt){return Q([C(_(J)),C(z(Ce)),C(_(Ze)),C(z(tt)),C(_(at)),C(z(wt)),"c"].join(" ")),this};p.__private__.line=p.line=function(J,Ce,Ze,tt,at){if(isNaN(J)||isNaN(Ce)||isNaN(Ze)||isNaN(tt)||!ss(at))throw new Error("Invalid arguments passed to jsPDF.line");return V===F.COMPAT?this.lines([[Ze-J,tt-Ce]],J,Ce,[1,1],at||"S"):this.lines([[Ze-J,tt-Ce]],J,Ce,[1,1]).stroke()},p.__private__.lines=p.lines=function(J,Ce,Ze,tt,at,wt){var Mt,er,S,ae,Pe,Fe,st,pt,jt,$r,Xr,Fr;if(typeof J=="number"&&(Fr=Ze,Ze=Ce,Ce=J,J=Fr),tt=tt||[1,1],wt=wt||!1,isNaN(Ce)||isNaN(Ze)||!Array.isArray(J)||!Array.isArray(tt)||!ss(at)||typeof wt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ds(Ce,Ze),Mt=tt[0],er=tt[1],ae=J.length,$r=Ce,Xr=Ze,S=0;S<ae;S++)(Pe=J[S]).length===2?($r=Pe[0]*Mt+$r,Xr=Pe[1]*er+Xr,Uo($r,Xr)):(Fe=Pe[0]*Mt+$r,st=Pe[1]*er+Xr,pt=Pe[2]*Mt+$r,jt=Pe[3]*er+Xr,$r=Pe[4]*Mt+$r,Xr=Pe[5]*er+Xr,Ls(Fe,st,pt,jt,$r,Xr));return wt&&zo(),Rc(at),this},p.path=function(J){for(var Ce=0;Ce<J.length;Ce++){var Ze=J[Ce],tt=Ze.c;switch(Ze.op){case"m":Ds(tt[0],tt[1]);break;case"l":Uo(tt[0],tt[1]);break;case"c":Ls.apply(this,tt);break;case"h":zo()}}return this},p.__private__.rect=p.rect=function(J,Ce,Ze,tt,at){if(isNaN(J)||isNaN(Ce)||isNaN(Ze)||isNaN(tt)||!ss(at))throw new Error("Invalid arguments passed to jsPDF.rect");return V===F.COMPAT&&(tt=-tt),Q([C(_(J)),C(z(Ce)),C(_(Ze)),C(_(tt)),"re"].join(" ")),Rc(at),this},p.__private__.triangle=p.triangle=function(J,Ce,Ze,tt,at,wt,Mt){if(isNaN(J)||isNaN(Ce)||isNaN(Ze)||isNaN(tt)||isNaN(at)||isNaN(wt)||!ss(Mt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ze-J,tt-Ce],[at-Ze,wt-tt],[J-at,Ce-wt]],J,Ce,[1,1],Mt,!0),this},p.__private__.roundedRect=p.roundedRect=function(J,Ce,Ze,tt,at,wt,Mt){if(isNaN(J)||isNaN(Ce)||isNaN(Ze)||isNaN(tt)||isNaN(at)||isNaN(wt)||!ss(Mt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var er=4/3*(Math.SQRT2-1);return at=Math.min(at,.5*Ze),wt=Math.min(wt,.5*tt),this.lines([[Ze-2*at,0],[at*er,0,at,wt-wt*er,at,wt],[0,tt-2*wt],[0,wt*er,-at*er,wt,-at,wt],[2*at-Ze,0],[-at*er,0,-at,-wt*er,-at,-wt],[0,2*wt-tt],[0,-wt*er,at*er,-wt,at,-wt]],J+at,Ce,[1,1],Mt,!0),this},p.__private__.ellipse=p.ellipse=function(J,Ce,Ze,tt,at){if(isNaN(J)||isNaN(Ce)||isNaN(Ze)||isNaN(tt)||!ss(at))throw new Error("Invalid arguments passed to jsPDF.ellipse");var wt=4/3*(Math.SQRT2-1)*Ze,Mt=4/3*(Math.SQRT2-1)*tt;return Ds(J+Ze,Ce),Ls(J+Ze,Ce-Mt,J+wt,Ce-tt,J,Ce-tt),Ls(J-wt,Ce-tt,J-Ze,Ce-Mt,J-Ze,Ce),Ls(J-Ze,Ce+Mt,J-wt,Ce+tt,J,Ce+tt),Ls(J+wt,Ce+tt,J+Ze,Ce+Mt,J+Ze,Ce),Rc(at),this},p.__private__.circle=p.circle=function(J,Ce,Ze,tt){if(isNaN(J)||isNaN(Ce)||isNaN(Ze)||!ss(tt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(J,Ce,Ze,Ze,tt)},p.setFont=function(J,Ce,Ze){return Ze&&(Ce=M(Ce,Ze)),et=Ts(J,Ce,{disableWarning:!1}),this};var Dc=p.__private__.getFont=p.getFont=function(){return Le[Ts.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var J,Ce,Ze={};for(J in Te)if(Te.hasOwnProperty(J))for(Ce in Ze[J]=[],Te[J])Te[J].hasOwnProperty(Ce)&&Ze[J].push(Ce);return Ze},p.addFont=function(J,Ce,Ze,tt,at){var wt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&wt.indexOf(arguments[3])!==-1?at=arguments[3]:arguments[3]&&wt.indexOf(arguments[3])==-1&&(Ze=M(Ze,tt)),at=at||"Identity-H",Nr.call(this,J,Ce,Ze,at)};var wn,Lc=t.lineWidth||.200025,xl=p.__private__.getLineWidth=p.getLineWidth=function(){return Lc},$c=p.__private__.setLineWidth=p.setLineWidth=function(J){return Lc=J,Q(C(_(J))+" w"),this};p.__private__.setLineDash=gr.API.setLineDash=gr.API.setLineDashPattern=function(J,Ce){if(J=J||[],Ce=Ce||0,isNaN(Ce)||!Array.isArray(J))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return J=J.map(function(Ze){return C(_(Ze))}).join(" "),Ce=C(_(Ce)),Q("["+J+"] "+Ce+" d"),this};var Fc=p.__private__.getLineHeight=p.getLineHeight=function(){return ge*wn};p.__private__.getLineHeight=p.getLineHeight=function(){return ge*wn};var Mc=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(J){return typeof(J=J||1.15)=="number"&&(wn=J),this},Ra=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return wn};Mc(t.lineHeight);var qo=p.__private__.getHorizontalCoordinate=function(J){return _(J)},xi=p.__private__.getVerticalCoordinate=function(J){return V===F.ADVANCED?J:je[E].mediaBox.topRightY-je[E].mediaBox.bottomLeftY-_(J)},Md=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(J){return C(qo(J))},na=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(J){return C(xi(J))},Vi=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Pt(Vi)},p.__private__.setStrokeColor=p.setDrawColor=function(J,Ce,Ze,tt){return Vi=kt({ch1:J,ch2:Ce,ch3:Ze,ch4:tt,pdfColorType:"draw",precision:2}),Q(Vi),this};var Sl=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Pt(Sl)},p.__private__.setFillColor=p.setFillColor=function(J,Ce,Ze,tt){return Sl=kt({ch1:J,ch2:Ce,ch3:Ze,ch4:tt,pdfColorType:"fill",precision:2}),Q(Sl),this};var $s=t.textColor||"0 g",wl=p.__private__.getTextColor=p.getTextColor=function(){return Pt($s)};p.__private__.setTextColor=p.setTextColor=function(J,Ce,Ze,tt){return $s=kt({ch1:J,ch2:Ce,ch3:Ze,ch4:tt,pdfColorType:"text",precision:3}),this};var Da=t.charSpace,Cl=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Da||0)};p.__private__.setCharSpace=p.setCharSpace=function(J){if(isNaN(J))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Da=J,this};var Oc=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(J){var Ce=p.CapJoinStyles[J];if(Ce===void 0)throw new Error("Line cap style of '"+J+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Oc=Ce,Q(Ce+" J"),this};var _l=0;p.__private__.setLineJoin=p.setLineJoin=function(J){var Ce=p.CapJoinStyles[J];if(Ce===void 0)throw new Error("Line join style of '"+J+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return _l=Ce,Q(Ce+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(J){if(J=J||0,isNaN(J))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(C(_(J))+" M"),this},p.GState=Tp,p.setGState=function(J){(J=typeof J=="string"?re[Ue[J]]:ia(null,J)).equals(we)||(Q("/"+J.id+" gs"),we=J)};var ia=function(J,Ce){if(!J||!Ue[J]){var Ze=!1;for(var tt in re)if(re.hasOwnProperty(tt)&&re[tt].equals(Ce)){Ze=!0;break}if(Ze)Ce=re[tt];else{var at="GS"+(Object.keys(re).length+1).toString(10);re[at]=Ce,Ce.id=at}return J&&(Ue[J]=Ce.id),$e.publish("addGState",Ce),Ce}};p.addGState=function(J,Ce){return ia(J,Ce),this},p.saveGraphicsState=function(){return Q("q"),he.push({key:et,size:ge,color:$s}),this},p.restoreGraphicsState=function(){Q("Q");var J=he.pop();return et=J.key,ge=J.size,$s=J.color,we=null,this},p.setCurrentTransformationMatrix=function(J){return Q(J.toString()+" cm"),this},p.comment=function(J){return Q("#"+J),this};var La=function(J,Ce){var Ze=J||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ze},set:function(wt){isNaN(wt)||(Ze=parseFloat(wt))}});var tt=Ce||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return tt},set:function(wt){isNaN(wt)||(tt=parseFloat(wt))}});var at="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return at},set:function(wt){at=wt.toString()}}),this},Al=function(J,Ce,Ze,tt){La.call(this,J,Ce),this.type="rect";var at=Ze||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return at},set:function(Mt){isNaN(Mt)||(at=parseFloat(Mt))}});var wt=tt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return wt},set:function(Mt){isNaN(Mt)||(wt=parseFloat(Mt))}}),this},$a=function(){this.page=xe,this.currentPage=E,this.pages=Y.slice(0),this.pagesContext=je.slice(0),this.x=De,this.y=He,this.matrix=Je,this.width=oa(E),this.height=Zi(E),this.outputDestination=oe,this.id="",this.objectNumber=-1};$a.prototype.restore=function(){xe=this.page,E=this.currentPage,je=this.pagesContext,Y=this.pages,De=this.x,He=this.y,Je=this.matrix,El(E,this.width),Tl(E,this.height),oe=this.outputDestination};var kl=function(J,Ce,Ze,tt,at){$t.push(new $a),xe=E=0,Y=[],De=J,He=Ce,Je=at,cn([Ze,tt])},Od=function(J){if(yt[J])$t.pop().restore();else{var Ce=new $a,Ze="Xo"+(Object.keys(ct).length+1).toString(10);Ce.id=Ze,yt[J]=Ze,ct[Ze]=Ce,$e.publish("addFormObject",Ce),$t.pop().restore()}};for(var Fs in p.beginFormObject=function(J,Ce,Ze,tt,at){return kl(J,Ce,Ze,tt,at),this},p.endFormObject=function(J){return Od(J),this},p.doFormObject=function(J,Ce){var Ze=ct[yt[J]];return Q("q"),Q(Ce.toString()+" cm"),Q("/"+Ze.id+" Do"),Q("Q"),this},p.getFormObject=function(J){var Ce=ct[yt[J]];return{x:Ce.x,y:Ce.y,width:Ce.width,height:Ce.height,matrix:Ce.matrix}},p.save=function(J,Ce){return J=J||"generated.pdf",(Ce=Ce||{}).returnPromise=Ce.returnPromise||!1,Ce.returnPromise===!1?(Qc(ml(Rs()),J),typeof Qc.unload=="function"&&Pr.setTimeout&&setTimeout(Qc.unload,911),this):new Promise(function(Ze,tt){try{var at=Qc(ml(Rs()),J);typeof Qc.unload=="function"&&Pr.setTimeout&&setTimeout(Qc.unload,911),Ze(at)}catch(wt){tt(wt.message)}})},gr.API)gr.API.hasOwnProperty(Fs)&&(Fs==="events"&&gr.API.events.length?function(J,Ce){var Ze,tt,at;for(at=Ce.length-1;at!==-1;at--)Ze=Ce[at][0],tt=Ce[at][1],J.subscribe.apply(J,[Ze].concat(typeof tt=="function"?[tt]:tt))}($e,gr.API.events):p[Fs]=gr.API[Fs]);var oa=p.getPageWidth=function(J){return(je[J=J||E].mediaBox.topRightX-je[J].mediaBox.bottomLeftX)/ve},El=p.setPageWidth=function(J,Ce){je[J].mediaBox.topRightX=Ce*ve+je[J].mediaBox.bottomLeftX},Zi=p.getPageHeight=function(J){return(je[J=J||E].mediaBox.topRightY-je[J].mediaBox.bottomLeftY)/ve},Tl=p.setPageHeight=function(J,Ce){je[J].mediaBox.topRightY=Ce*ve+je[J].mediaBox.bottomLeftY};return p.internal={pdfEscape:Sn,getStyle:$d,getFont:Dc,getFontSize:fe,getCharSpace:Cl,getTextColor:wl,getLineHeight:Fc,getLineHeightFactor:Ra,getLineWidth:xl,write:ce,getHorizontalCoordinate:qo,getVerticalCoordinate:xi,getCoordinateString:Md,getVerticalCoordinateString:na,collections:{},newObject:Kt,newAdditionalObject:Qe,newObjectDeferred:gt,newObjectDeferredBegin:St,getFilters:Yt,putStream:nr,events:$e,scaleFactor:ve,pageSize:{getWidth:function(){return oa(E)},setWidth:function(J){El(E,J)},getHeight:function(){return Zi(E)},setHeight:function(J){Tl(E,J)}},encryptionOptions:u,encryption:Wn,getEncryptor:Ld,output:gl,getNumberOfPages:yn,pages:Y,out:Q,f2:$,f3:w,getPageInfo:Nc,getPageInfoByObjId:wr,getCurrentPageInfo:ra,getPDFVersion:x,Point:La,Rectangle:Al,Matrix:bt,hasHotfix:ta},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return oa(E)},set:function(J){El(E,J)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Zi(E)},set:function(J){Tl(E,J)},enumerable:!0,configurable:!0}),fn.call(p,de),et="F1",fo(i,r),$e.publish("initialized"),p}yu.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},yu.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},yu.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},yu.prototype.processOwnerPassword=function(t,e){return d1(c1(e).substr(0,5),t)},yu.prototype.encryptor=function(t,e){var r=c1(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return d1(r,n)}},Tp.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Rn(t)!==Rn(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},gr.API={events:[]},gr.version="3.0.1";var ii=gr.API,s2=1,Ed=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ru=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Mr=function(t){return t.toFixed(2)},Gl=function(t){return t.toFixed(5)};ii.__acroform__={};var jo=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Lx=function(t){return t*s2},pa=function(t){var e=new a3,r=ar.internal.getHeight(t)||0,n=ar.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Mr(n)),Number(Mr(r))],e},vj=ii.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},bj=ii.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},Pj=ii.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},di=ii.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Pj(t,e-1)},ui=ii.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return vj(t,e-1)},hi=ii.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return bj(t,e-1)},xj=ii.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=t[0],o=t[1],s=t[2],a=t[3],l={};return l.lowerLeft_X=r(i)||0,l.lowerLeft_Y=n(o+a)||0,l.upperRight_X=r(i+s)||0,l.upperRight_Y=n(o)||0,[Number(Mr(l.lowerLeft_X)),Number(Mr(l.lowerLeft_Y)),Number(Mr(l.upperRight_X)),Number(Mr(l.upperRight_Y))]},Sj=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=u1(t,r),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Mr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=pa(t);return o.scope=t.scope,o.stream=e.join(`
`),o}},u1=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(w){return w.split(`
`)}):i.map(function(w){return[w]});var o=r,s=ar.internal.getHeight(t)||0;s=s<0?-s:s;var a=ar.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(w,_,v){if(w+1<i.length){var z=_+" "+i[w+1][0];return Xf(z,t,v).width<=a-4}return!1};o++;e:for(;o>0;){e="",o--;var d,u,h=Xf("3",t,o).height,f=t.multiline?s-o:(s-h)/2,p=f+=2,m=0,x=0,P=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+Xf(e,t,o=12).width+", FieldWidth:"+a+`
`;break}for(var g="",F=0,V=0;V<i.length;V++)if(i.hasOwnProperty(V)){var N=!1;if(i[V].length!==1&&P!==i[V].length-1){if((h+2)*(F+2)+2>s)continue e;g+=i[V][P],N=!0,x=V,V--}else{g=(g+=i[V][P]+" ").substr(g.length-1)==" "?g.substr(0,g.length-1):g;var R=parseInt(V),M=l(R,g,o),C=V>=i.length-1;if(M&&!C){g+=" ",P=0;continue}if(M||C){if(C)x=R;else if(t.multiline&&(h+2)*(F+2)+2>s)continue e}else{if(!t.multiline||(h+2)*(F+2)+2>s)continue e;x=R}}for(var k="",D=m;D<=x;D++){var $=i[D];if(t.multiline){if(D===x){k+=$[P]+" ",P=(P+1)%$.length;continue}if(D===m){k+=$[$.length-1]+" ";continue}}k+=$[0]+" "}switch(k=k.substr(k.length-1)==" "?k.substr(0,k.length-1):k,u=Xf(k,t,o).width,t.textAlign){case"right":d=a-u-2;break;case"center":d=(a-u)/2;break;case"left":default:d=2}e+=Mr(d)+" "+Mr(p)+` Td
`,e+="("+Ed(k)+`) Tj
`,e+=-Mr(d)+` 0 Td
`,p=-(o+2),u=0,m=N?x:x+1,F++,g=""}break}return n.text=e,n.fontSize=o,n},Xf=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},wj={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Cj=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},_j=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,i=t[r];e.internal.newObjectDeferredBegin(i.objId,!0),Rn(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[n]}},Aj=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Qs.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(wj)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");s2=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new l3,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];o.objId=void 0,o.hasAnnotation&&Cj(o,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,i){var o=!n;for(var s in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(s)){var a=n[s],l=[],d=a.Rect;if(a.Rect&&(a.Rect=xj(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=ar.createDefaultAppearanceStream(a),Rn(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=d,a.hasAppearanceStream&&!a.appearanceStreamContent){var u=Sj(a);l.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(a.appearanceStreamContent){var h="";for(var f in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(f)){var p=a.appearanceStreamContent[f];if(h+="/"+f+" ",h+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var s in p)if(p.hasOwnProperty(s)){var m=p[s];typeof m=="function"&&(m=m.call(i,a)),h+="/"+s+" "+m+" ",i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m)}}else typeof(m=p)=="function"&&(m=m.call(i,a)),h+="/"+s+" "+m,i.internal.acroformPlugin.xForms.indexOf(m)>=0||i.internal.acroformPlugin.xForms.push(m);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}o&&_j(i.internal.acroformPlugin.xForms,i)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},s3=ii.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(s){return s};if(Array.isArray(t)){for(var i="[",o=0;o<t.length;o++)switch(o!==0&&(i+=" "),Rn(t[o])){case"boolean":case"number":case"object":i+=t[o].toString();break;case"string":t[o].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),i+="("+Ed(n(t[o].toString()))+")"):i+=t[o].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},zv=function(t,e,r){var n=function(i){return i};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Ed(n(t))+")"},ma=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ma.prototype.toString=function(){return this.objId+" 0 R"},ma.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ma.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],i=this[n];i&&(Array.isArray(i)?t.push({key:n,value:s3(i,this.objId,this.scope)}):i instanceof ma?(i.scope=this.scope,t.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:n,value:i}))}return t};var a3=function(){ma.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};jo(a3,ma);var l3=function(){ma.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Ed(r(t))+")"}},set:function(r){t=r}})};jo(l3,ma);var Qs=function t(){ma.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute F supplied.');e=g}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!di(e,3)},set:function(g){g?this.F=ui(e,3):this.F=hi(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute Ff supplied.');r=g}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(g){n=g!==void 0?g:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(g){n[0]=g}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(g){n[1]=g}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(g){n[2]=g}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(g){n[3]=g}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(g){switch(g){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=g;break;default:throw new Error('Invalid value "'+g+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof ym)return;o="FieldObject"+t.FieldNum++}var g=function(F){return F};return this.scope&&(g=this.scope.internal.getEncryptor(this.objId)),"("+Ed(g(o))+")"},set:function(g){o=g.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(g){o=g}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(g){s=g}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(g){a=g}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(g){l=g}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/s2:d},set:function(g){d=g}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(g){u=g}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof ym||this instanceof dc))return zv(h,this.objId,this.scope)},set:function(g){g=g.toString(),h=g}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof _i?f:zv(f,this.objId,this.scope)},set:function(g){g=g.toString(),f=this instanceof _i?g:g.substr(0,1)==="("?ru(g.substr(1,g.length-2)):ru(g)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof _i?ru(f.substr(1,f.length-1)):f},set:function(g){g=g.toString(),f=this instanceof _i?"/"+g:g}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(g){this.V=g}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof _i?p:zv(p,this.objId,this.scope)},set:function(g){g=g.toString(),p=this instanceof _i?g:g.substr(0,1)==="("?ru(g.substr(1,g.length-2)):ru(g)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof _i?ru(p.substr(1,p.length-1)):p},set:function(g){g=g.toString(),p=this instanceof _i?"/"+g:g}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(g){g=!!g,x=g}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(g){m=g}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,1)},set:function(g){g?this.Ff=ui(this.Ff,1):this.Ff=hi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,2)},set:function(g){g?this.Ff=ui(this.Ff,2):this.Ff=hi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,3)},set:function(g){g?this.Ff=ui(this.Ff,3):this.Ff=hi(this.Ff,3)}});var P=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(P!==null)return P},set:function(g){if([0,1,2].indexOf(g)===-1)throw new Error('Invalid value "'+g+'" for attribute Q supplied.');P=g}}),Object.defineProperty(this,"textAlign",{get:function(){var g;switch(P){case 0:default:g="left";break;case 1:g="center";break;case 2:g="right"}return g},configurable:!0,enumerable:!0,set:function(g){switch(g){case"right":case 2:P=2;break;case"center":case 1:P=1;break;case"left":case 0:default:P=0}}})};jo(Qs,ma);var pd=function(){Qs.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return s3(e,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=function(o,s,a){a||(a=1);for(var l,d=[];l=s.exec(o);)d.push(l[a]);return d}(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,18)},set:function(r){r?this.Ff=ui(this.Ff,18):this.Ff=hi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=ui(this.Ff,19):this.Ff=hi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,20)},set:function(r){r?(this.Ff=ui(this.Ff,20),e.sort()):this.Ff=hi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,22)},set:function(r){r?this.Ff=ui(this.Ff,22):this.Ff=hi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,23)},set:function(r){r?this.Ff=ui(this.Ff,23):this.Ff=hi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,27)},set:function(r){r?this.Ff=ui(this.Ff,27):this.Ff=hi(this.Ff,27)}}),this.hasAppearanceStream=!1};jo(pd,Qs);var fd=function(){pd.call(this),this.fontName="helvetica",this.combo=!1};jo(fd,pd);var yd=function(){fd.call(this),this.combo=!0};jo(yd,fd);var ip=function(){yd.call(this),this.edit=!0};jo(ip,yd);var _i=function(){Qs.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,15)},set:function(r){r?this.Ff=ui(this.Ff,15):this.Ff=hi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,16)},set:function(r){r?this.Ff=ui(this.Ff,16):this.Ff=hi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,17)},set:function(r){r?this.Ff=ui(this.Ff,17):this.Ff=hi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,26)},set:function(r){r?this.Ff=ui(this.Ff,26):this.Ff=hi(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(o){return o};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+Ed(r(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){Rn(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};jo(_i,Qs);var op=function(){_i.call(this),this.pushButton=!0};jo(op,_i);var md=function(){_i.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};jo(md,_i);var ym=function(){var t,e;Qs.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,s=[];for(o in s.push("<<"),n)s.push("/"+o+" ("+Ed(i(n[o]))+")");return s.push(">>"),s.join(`
`)},set:function(i){Rn(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ar.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};jo(ym,Qs),md.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},md.prototype.createOption=function(t){var e=new ym;return e.Parent=this,e.optionName=t,this.Kids.push(e),kj.call(this.scope,e),e};var sp=function(){_i.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ar.CheckBox.createAppearanceStream()};jo(sp,_i);var dc=function(){Qs.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,13)},set:function(e){e?this.Ff=ui(this.Ff,13):this.Ff=hi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,21)},set:function(e){e?this.Ff=ui(this.Ff,21):this.Ff=hi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,23)},set:function(e){e?this.Ff=ui(this.Ff,23):this.Ff=hi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,24)},set:function(e){e?this.Ff=ui(this.Ff,24):this.Ff=hi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,25)},set:function(e){e?this.Ff=ui(this.Ff,25):this.Ff=hi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,26)},set:function(e){e?this.Ff=ui(this.Ff,26):this.Ff=hi(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};jo(dc,Qs);var ap=function(){dc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!di(this.Ff,14)},set:function(t){t?this.Ff=ui(this.Ff,14):this.Ff=hi(this.Ff,14)}}),this.password=!0};jo(ap,dc);var ar={CheckBox:{createAppearanceStream:function(){return{N:{On:ar.CheckBox.YesNormal},D:{On:ar.CheckBox.YesPushDown,Off:ar.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=pa(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),o=u1(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Mr(ar.internal.getWidth(t))+" "+Mr(ar.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Mr(o.fontSize)+" Tf "+i),r.push("BT"),r.push(o.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=pa(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),i=[],o=ar.internal.getHeight(t),s=ar.internal.getWidth(t),a=u1(t,t.caption);return i.push("1 g"),i.push("0 0 "+Mr(s)+" "+Mr(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Mr(s-1)+" "+Mr(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+Mr(a.fontSize)+" Tf "+n),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=pa(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Mr(ar.internal.getWidth(t))+" "+Mr(ar.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:ar.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=ar.RadioButton.Circle.YesNormal,e.D[t]=ar.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=pa(t);e.scope=t.scope;var r=[],n=ar.internal.getWidth(t)<=ar.internal.getHeight(t)?ar.internal.getWidth(t)/4:ar.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=ar.internal.Bezier_C,o=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Gl(ar.internal.getWidth(t)/2)+" "+Gl(ar.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=pa(t);e.scope=t.scope;var r=[],n=ar.internal.getWidth(t)<=ar.internal.getHeight(t)?ar.internal.getWidth(t)/4:ar.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*ar.internal.Bezier_C).toFixed(5)),s=Number((n*ar.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Gl(ar.internal.getWidth(t)/2)+" "+Gl(ar.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),r.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),r.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),r.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Gl(ar.internal.getWidth(t)/2)+" "+Gl(ar.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=pa(t);e.scope=t.scope;var r=[],n=ar.internal.getWidth(t)<=ar.internal.getHeight(t)?ar.internal.getWidth(t)/4:ar.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),o=Number((i*ar.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Gl(ar.internal.getWidth(t)/2)+" "+Gl(ar.internal.getHeight(t)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),r.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),r.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),r.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:ar.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=ar.RadioButton.Cross.YesNormal,e.D[t]=ar.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=pa(t);e.scope=t.scope;var r=[],n=ar.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Mr(ar.internal.getWidth(t)-2)+" "+Mr(ar.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Mr(n.x1.x)+" "+Mr(n.x1.y)+" m"),r.push(Mr(n.x2.x)+" "+Mr(n.x2.y)+" l"),r.push(Mr(n.x4.x)+" "+Mr(n.x4.y)+" m"),r.push(Mr(n.x3.x)+" "+Mr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=pa(t);e.scope=t.scope;var r=ar.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Mr(ar.internal.getWidth(t))+" "+Mr(ar.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Mr(ar.internal.getWidth(t)-2)+" "+Mr(ar.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Mr(r.x1.x)+" "+Mr(r.x1.y)+" m"),n.push(Mr(r.x2.x)+" "+Mr(r.x2.y)+" l"),n.push(Mr(r.x4.x)+" "+Mr(r.x4.y)+" m"),n.push(Mr(r.x3.x)+" "+Mr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=pa(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Mr(ar.internal.getWidth(t))+" "+Mr(ar.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};ar.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=ar.internal.getWidth(t),r=ar.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},ar.internal.getWidth=function(t){var e=0;return Rn(t)==="object"&&(e=Lx(t.Rect[2])),e},ar.internal.getHeight=function(t){var e=0;return Rn(t)==="object"&&(e=Lx(t.Rect[3])),e};var kj=ii.addField=function(t){if(Aj(this,t),!(t instanceof Qs))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ii.AcroFormChoiceField=pd,ii.AcroFormListBox=fd,ii.AcroFormComboBox=yd,ii.AcroFormEditBox=ip,ii.AcroFormButton=_i,ii.AcroFormPushButton=op,ii.AcroFormRadioButton=md,ii.AcroFormCheckBox=sp,ii.AcroFormTextField=dc,ii.AcroFormPasswordField=ap,ii.AcroFormAppearance=ar,ii.AcroForm={ChoiceField:pd,ListBox:fd,ComboBox:yd,EditBox:ip,Button:_i,PushButton:op,RadioButton:md,CheckBox:sp,TextField:dc,PasswordField:ap,Appearance:ar},gr.AcroForm={ChoiceField:pd,ListBox:fd,ComboBox:yd,EditBox:ip,Button:_i,PushButton:op,RadioButton:md,CheckBox:sp,TextField:dc,PasswordField:ap,Appearance:ar};var Ej=gr.AcroForm;function c3(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(w,_){var v,z,W,A,I,ee=e;if((_=_||e)==="RGBA"||w.data!==void 0&&w.data instanceof Uint8ClampedArray&&"height"in w&&"width"in w)return"RGBA";if(M(w))for(I in r)for(W=r[I],v=0;v<W.length;v+=1){for(A=!0,z=0;z<W[v].length;z+=1)if(W[v][z]!==void 0&&W[v][z]!==w[z]){A=!1;break}if(A===!0){ee=I;break}}else for(I in r)for(W=r[I],v=0;v<W.length;v+=1){for(A=!0,z=0;z<W[v].length;z+=1)if(W[v][z]!==void 0&&W[v][z]!==w.charCodeAt(z)){A=!1;break}if(A===!0){ee=I;break}}return ee===e&&_!==e&&(ee=_),ee},i=function w(_){for(var v=this.internal.write,z=this.internal.putStream,W=(0,this.internal.getFilters)();W.indexOf("FlateEncode")!==-1;)W.splice(W.indexOf("FlateEncode"),1);_.objectId=this.internal.newObject();var A=[];if(A.push({key:"Type",value:"/XObject"}),A.push({key:"Subtype",value:"/Image"}),A.push({key:"Width",value:_.width}),A.push({key:"Height",value:_.height}),_.colorSpace===P.INDEXED?A.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(_.palette.length/3-1)+" "+("sMask"in _&&_.sMask!==void 0?_.objectId+2:_.objectId+1)+" 0 R]"}):(A.push({key:"ColorSpace",value:"/"+_.colorSpace}),_.colorSpace===P.DEVICE_CMYK&&A.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),A.push({key:"BitsPerComponent",value:_.bitsPerComponent}),"decodeParameters"in _&&_.decodeParameters!==void 0&&A.push({key:"DecodeParms",value:"<<"+_.decodeParameters+">>"}),"transparency"in _&&Array.isArray(_.transparency)){for(var I="",ee=0,Z=_.transparency.length;ee<Z;ee++)I+=_.transparency[ee]+" "+_.transparency[ee]+" ";A.push({key:"Mask",value:"["+I+"]"})}_.sMask!==void 0&&A.push({key:"SMask",value:_.objectId+1+" 0 R"});var X=_.filter!==void 0?["/"+_.filter]:void 0;if(z({data:_.data,additionalKeyValues:A,alreadyAppliedFilters:X,objectId:_.objectId}),v("endobj"),"sMask"in _&&_.sMask!==void 0){var se="/Predictor "+_.predictor+" /Colors 1 /BitsPerComponent "+_.bitsPerComponent+" /Columns "+_.width,U={width:_.width,height:_.height,colorSpace:"DeviceGray",bitsPerComponent:_.bitsPerComponent,decodeParameters:se,data:_.sMask};"filter"in _&&(U.filter=_.filter),w.call(this,U)}if(_.colorSpace===P.INDEXED){var E=this.internal.newObject();z({data:k(new Uint8Array(_.palette)),objectId:E}),v("endobj")}},o=function(){var w=this.internal.collections.addImage_images;for(var _ in w)i.call(this,w[_])},s=function(){var w,_=this.internal.collections.addImage_images,v=this.internal.write;for(var z in _)v("/I"+(w=_[z]).index,w.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",s))},l=function(){var w=this.internal.collections.addImage_images;return a.call(this),w},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(w){return typeof t["process"+w.toUpperCase()]=="function"},h=function(w){return Rn(w)==="object"&&w.nodeType===1},f=function(w,_){if(w.nodeName==="IMG"&&w.hasAttribute("src")){var v=""+w.getAttribute("src");if(v.indexOf("data:image/")===0)return np(unescape(v).split("base64,").pop());var z=t.loadFile(v,!0);if(z!==void 0)return z}if(w.nodeName==="CANVAS"){if(w.width===0||w.height===0)throw new Error("Given canvas must have data. Canvas width: "+w.width+", height: "+w.height);var W;switch(_){case"PNG":W="image/png";break;case"WEBP":W="image/webp";break;case"JPEG":case"JPG":default:W="image/jpeg"}return np(w.toDataURL(W,1).split("base64,").pop())}},p=function(w){var _=this.internal.collections.addImage_images;if(_){for(var v in _)if(w===_[v].alias)return _[v]}},m=function(w,_,v){return w||_||(w=-96,_=-96),w<0&&(w=-1*v.width*72/w/this.internal.scaleFactor),_<0&&(_=-1*v.height*72/_/this.internal.scaleFactor),w===0&&(w=_*v.width/v.height),_===0&&(_=w*v.height/v.width),[w,_]},x=function(w,_,v,z,W,A){var I=m.call(this,v,z,W),ee=this.internal.getCoordinateString,Z=this.internal.getVerticalCoordinateString,X=l.call(this);if(v=I[0],z=I[1],X[W.index]=W,A){A*=Math.PI/180;var se=Math.cos(A),U=Math.sin(A),E=function(L){return L.toFixed(4)},O=[E(se),E(U),E(-1*U),E(se),0,0,"cm"]}this.internal.write("q"),A?(this.internal.write([1,"0","0",1,ee(w),Z(_+z),"cm"].join(" ")),this.internal.write(O.join(" ")),this.internal.write([ee(v),"0","0",ee(z),"0","0","cm"].join(" "))):this.internal.write([ee(v),"0","0",ee(z),ee(w),Z(_+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+W.index+" Do"),this.internal.write("Q")},P=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var g=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},F=t.__addimage__.sHashCode=function(w){var _,v,z=0;if(typeof w=="string")for(v=w.length,_=0;_<v;_++)z=(z<<5)-z+w.charCodeAt(_),z|=0;else if(M(w))for(v=w.byteLength/2,_=0;_<v;_++)z=(z<<5)-z+w[_],z|=0;return z},V=t.__addimage__.validateStringAsBase64=function(w){(w=w||"").toString().trim();var _=!0;return w.length===0&&(_=!1),w.length%4!=0&&(_=!1),/^[A-Za-z0-9+/]+$/.test(w.substr(0,w.length-2))===!1&&(_=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(w.substr(-2))===!1&&(_=!1),_},N=t.__addimage__.extractImageFromDataUrl=function(w){if(w==null||!(w=w.trim()).startsWith("data:"))return null;var _=w.indexOf(",");return _<0?null:w.substring(0,_).trim().endsWith("base64")?w.substring(_+1):null},R=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(w){return R()&&w instanceof ArrayBuffer};var M=t.__addimage__.isArrayBufferView=function(w){return R()&&typeof Uint32Array<"u"&&(w instanceof Int8Array||w instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&w instanceof Uint8ClampedArray||w instanceof Int16Array||w instanceof Uint16Array||w instanceof Int32Array||w instanceof Uint32Array||w instanceof Float32Array||w instanceof Float64Array)},C=t.__addimage__.binaryStringToUint8Array=function(w){for(var _=w.length,v=new Uint8Array(_),z=0;z<_;z++)v[z]=w.charCodeAt(z);return v},k=t.__addimage__.arrayBufferToBinaryString=function(w){for(var _="",v=M(w)?w:new Uint8Array(w),z=0;z<v.length;z+=8192)_+=String.fromCharCode.apply(null,v.subarray(z,z+8192));return _};t.addImage=function(){var w,_,v,z,W,A,I,ee,Z;if(typeof arguments[1]=="number"?(_=e,v=arguments[1],z=arguments[2],W=arguments[3],A=arguments[4],I=arguments[5],ee=arguments[6],Z=arguments[7]):(_=arguments[1],v=arguments[2],z=arguments[3],W=arguments[4],A=arguments[5],I=arguments[6],ee=arguments[7],Z=arguments[8]),Rn(w=arguments[0])==="object"&&!h(w)&&"imageData"in w){var X=w;w=X.imageData,_=X.format||_||e,v=X.x||v||0,z=X.y||z||0,W=X.w||X.width||W,A=X.h||X.height||A,I=X.alias||I,ee=X.compression||ee,Z=X.rotation||X.angle||Z}var se=this.internal.getFilters();if(ee===void 0&&se.indexOf("FlateEncode")!==-1&&(ee="SLOW"),isNaN(v)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var U=D.call(this,w,_,I,ee);return x.call(this,v,z,W,A,U,Z),this};var D=function(w,_,v,z){var W,A,I;if(typeof w=="string"&&n(w)===e){w=unescape(w);var ee=$(w,!1);(ee!==""||(ee=t.loadFile(w,!0))!==void 0)&&(w=ee)}if(h(w)&&(w=f(w,_)),_=n(w,_),!u(_))throw new Error("addImage does not support files of type '"+_+"', please ensure that a plugin for '"+_+"' support is added.");if(((I=v)==null||I.length===0)&&(v=function(Z){return typeof Z=="string"||M(Z)?F(Z):M(Z.data)?F(Z.data):null}(w)),(W=p.call(this,v))||(R()&&(w instanceof Uint8Array||_==="RGBA"||(A=w,w=C(w))),W=this["process"+_.toUpperCase()](w,d.call(this),v,function(Z){return Z&&typeof Z=="string"&&(Z=Z.toUpperCase()),Z in t.image_compression?Z:g.NONE}(z),A)),!W)throw new Error("An unknown error occurred whilst processing the image.");return W},$=t.__addimage__.convertBase64ToBinaryString=function(w,_){_=typeof _!="boolean"||_;var v,z="";if(typeof w=="string"){var W;v=(W=N(w))!==null&&W!==void 0?W:w;try{z=np(v)}catch(A){if(_)throw V(v)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+A.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return z};t.getImageProperties=function(w){var _,v,z="";if(h(w)&&(w=f(w)),typeof w=="string"&&n(w)===e&&((z=$(w,!1))===""&&(z=t.loadFile(w)||""),w=z),v=n(w),!u(v))throw new Error("addImage does not support files of type '"+v+"', please ensure that a plugin for '"+v+"' support is added.");if(!R()||w instanceof Uint8Array||(w=C(w)),!(_=this["process"+v.toUpperCase()](w)))throw new Error("An unknown error occurred whilst processing the image");return _.fileType=v,_}})(gr.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};gr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,i,o,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,u=!1,h=0;h<d.length&&!u;h++)switch((n=d[h]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var f=0;f<d.length;f++){n=d[f];var p=this.internal.pdfEscape,m=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),P=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(x.objId),F=n.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(n.bounds.x)+" "+a(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y)+"] ")+"/Contents ("+p(g(n.contents))+")",o+=" /Popup "+P.objId+" 0 R",o+=" /P "+l.objId+" 0 R",o+=" /T ("+p(g(F))+") >>",x.content=o;var V=x.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(n.bounds.x+30)+" "+a(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w+30)+" "+a(n.bounds.y)+"] ")+" /Parent "+V,n.open&&(o+=" /Open true"),o+=" >>",P.content=o,this.internal.write(x.objId,"0 R",P.objId,"0 R");break;case"freetext":i="/Rect ["+s(n.bounds.x)+" "+a(n.bounds.y)+" "+s(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y+n.bounds.h)+"] ";var N=n.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(m(n.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(n.options.name){var R=this.annotations._nameMap[n.options.name];n.options.pageNumber=R.page,n.options.top=R.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",o="",n.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(m(n.options.url))+") >>";else if(n.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,o+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var M=a(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),o+=" /XYZ "+n.options.left+" "+M+" "+n.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,i,o,s){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(r),y:d(n),w:l(r+i),h:d(n+o)},options:s,type:"link"})},t.textWithLink=function(r,n,i,o){var s,a,l=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var u=this.splitTextToSize(r,a).length;s=Math.ceil(d*u)}else a=l,s=d;return this.text(r,n,i,o),i+=.2*d,o.align==="center"&&(n-=l/2),o.align==="right"&&(n-=l),this.link(n,i-d,a,s,o),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(gr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(x){return e[x.charCodeAt(0)]!==void 0},s=t.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},a=t.__arabicParser__.isArabicEndLetter=function(x){return s(x)&&o(x)&&e[x.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(x){return s(x)&&i.indexOf(x.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return s(x)&&o(x)&&e[x.charCodeAt(0)].length>=1};var d=t.__arabicParser__.arabicLetterHasFinalForm=function(x){return s(x)&&o(x)&&e[x.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(x){return s(x)&&o(x)&&e[x.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(x){return s(x)&&o(x)&&e[x.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(x){var P=0,g=r,F="",V=0;for(P=0;P<x.length;P+=1)g[x.charCodeAt(P)]!==void 0?(V++,typeof(g=g[x.charCodeAt(P)])=="number"&&(F+=String.fromCharCode(g),g=r,V=0),P===x.length-1&&(g=r,F+=x.charAt(P-(V-1)),P-=V-1,V=0)):(g=r,F+=x.charAt(P-V),P-=V,V=0);return F};t.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&n[x.charCodeAt(0)]!==void 0};var f=t.__arabicParser__.getCorrectForm=function(x,P,g){return s(x)?o(x)===!1?-1:!d(x)||!s(P)&&!s(g)||!s(g)&&a(P)||a(x)&&!s(P)||a(x)&&l(P)||a(x)&&a(P)?0:u(x)&&s(P)&&!a(P)&&s(g)&&d(g)?3:a(x)||!s(g)?1:2:-1},p=function(x){var P=0,g=0,F=0,V="",N="",R="",M=(x=x||"").split("\\s+"),C=[];for(P=0;P<M.length;P+=1){for(C.push(""),g=0;g<M[P].length;g+=1)V=M[P][g],N=M[P][g-1],R=M[P][g+1],s(V)?(F=f(V,N,R),C[P]+=F!==-1?String.fromCharCode(e[V.charCodeAt(0)][F]):V):C[P]+=V;C[P]=h(C[P])}return C.join(" ")},m=t.__arabicParser__.processArabic=t.processArabic=function(){var x,P=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,g=[];if(Array.isArray(P)){var F=0;for(g=[],F=0;F<P.length;F+=1)Array.isArray(P[F])?g.push([p(P[F][0]),P[F][1],P[F][2]]):g.push([p(P[F])]);x=g}else x=p(P);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};t.events.push(["preProcessText",m])}(gr.API),gr.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(a){r=a}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(a){n=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(gr.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(x){l=x}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(x){m=x}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,d){n.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),h=d.font||this.getFont(),f=d.scaleFactor||this.internal.scaleFactor,p=0,m=0,x=0,P=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var g=d.maxWidth;g>0?typeof l=="string"?l=this.splitTextToSize(l,g):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(V,N){return V.concat(P.splitTextToSize(N,g))},[])):l=Array.isArray(l)?l:[l];for(var F=0;F<l.length;F++)p<(x=this.getStringUnitWidth(l[F],{font:h})*u)&&(p=x);return p!==0&&(m=l.length),{w:p/=f,h:Math.max((m*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/f,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=t.cell=function(){var l;l=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,f=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===l.lineNumber?(l.x=(d.x||0)+(d.width||0),l.y=d.y||0):d.y+d.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,p&&f&&(this.printHeaderRow(l.lineNumber,!0),l.y+=f[0].height)):l.y=d.y+d.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};t.table=function(l,d,u,h,f){if(n.call(this),!u)throw new Error("No data for PDF table.");var p,m,x,P,g=[],F=[],V=[],N={},R={},M=[],C=[],k=(f=f||{}).autoSize||!1,D=f.printHeaders!==!1,$=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,w=f.margins||Object.assign({width:this.getPageWidth()},e),_=typeof f.padding=="number"?f.padding:3,v=f.headerBackgroundColor||"#c8c8c8",z=f.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=D,this.internal.__cell__.margins=w,this.internal.__cell__.table_font_size=$,this.internal.__cell__.padding=_,this.internal.__cell__.headerBackgroundColor=v,this.internal.__cell__.headerTextColor=z,this.setFontSize($),h==null)F=g=Object.keys(u[0]),V=g.map(function(){return"left"});else if(Array.isArray(h)&&Rn(h[0])==="object")for(g=h.map(function(X){return X.name}),F=h.map(function(X){return X.prompt||X.name||""}),V=h.map(function(X){return X.align||"left"}),p=0;p<h.length;p+=1)R[h[p].name]=h[p].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(F=g=h,V=g.map(function(){return"left"}));if(k||Array.isArray(h)&&typeof h[0]=="string")for(p=0;p<g.length;p+=1){for(N[P=g[p]]=u.map(function(X){return X[P]}),this.setFont(void 0,"bold"),M.push(this.getTextDimensions(F[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=N[P],this.setFont(void 0,"normal"),x=0;x<m.length;x+=1)M.push(this.getTextDimensions(m[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);R[P]=Math.max.apply(null,M)+_+_,M=[]}if(D){var W={};for(p=0;p<g.length;p+=1)W[g[p]]={},W[g[p]].text=F[p],W[g[p]].align=V[p];var A=a.call(this,W,R);C=g.map(function(X){return new o(l,d,R[X],A,W[X].text,void 0,W[X].align)}),this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}var I=h.reduce(function(X,se){return X[se.name]=se.align,X},{});for(p=0;p<u.length;p+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:p,data:u[p]},this);var ee=a.call(this,u[p],R);for(x=0;x<g.length;x+=1){var Z=u[p][g[x]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:p,col:x,data:Z},this),s.call(this,new o(l,d,R[g[x]],ee,Z,p+2,I[g[x]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=d,this};var a=function(l,d){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(l).map(function(p){var m=l[p];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,d[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*h/f+u+u},this).reduce(function(p,m){return Math.max(p,m)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,f.push(u)),u.lineNumber=l;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,u),this.setTextColor(m)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),r=!1}}(gr.API);var d3={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},u3=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],h1=c3(u3),h3=[100,200,300,400,500,600,700,800,900],Tj=c3(h3);function p1(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(o){return d3[o=o||"normal"]?o:"normal"}(t.style),n=function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(o){return typeof h1[o=o||"normal"]=="number"?o:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,r,n].join(" ")}}}function $x(t,e,r,n){var i;for(i=r;i>=0&&i<e.length;i+=n)if(t[e[i]])return t[e[i]];for(i=r;i>=0&&i<e.length;i-=n)if(t[e[i]])return t[e[i]]}var Ij={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Fx={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Mx(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Nj(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",i=Object.assign({},Ij,r.genericFontFamilies||{}),o=null,s=null,a=0;a<e.length;++a)if(i[(o=p1(e[a])).family]&&(o.family=i[o.family]),t.hasOwnProperty(o.family)){s=t[o.family];break}if(!(s=s||t[n]))throw new Error("Could not find a font-family for the rule '"+Mx(o)+"' and default family '"+n+"'.");if(s=function(l,d){if(d[l])return d[l];var u=h1[l],h=u<=h1.normal?-1:1,f=$x(d,u3,u,h);if(!f)throw new Error("Could not find a matching font-stretch value for "+l);return f}(o.stretch,s),s=function(l,d){if(d[l])return d[l];for(var u=d3[l],h=0;h<u.length;++h)if(d[u[h]])return d[u[h]];throw new Error("Could not find a matching font-style for "+l)}(o.style,s),!(s=function(l,d){if(d[l])return d[l];if(l===400&&d[500])return d[500];if(l===500&&d[400])return d[400];var u=Tj[l],h=$x(d,h3,u,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(o.weight,s)))throw new Error("Failed to resolve a font for the rule '"+Mx(o)+"'.");return s}function Ox(t){return t.trimLeft()}function Rj(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Dj(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Zf,Bx,jx,Uv=["times"];(function(t){var e,r,n,i,o,s,a,l,d,u=function(U){return U=U||{},this.isStrokeTransparent=U.isStrokeTransparent||!1,this.strokeOpacity=U.strokeOpacity||1,this.strokeStyle=U.strokeStyle||"#000000",this.fillStyle=U.fillStyle||"#000000",this.isFillTransparent=U.isFillTransparent||!1,this.fillOpacity=U.fillOpacity||1,this.font=U.font||"10px sans-serif",this.textBaseline=U.textBaseline||"alphabetic",this.textAlign=U.textAlign||"left",this.lineWidth=U.lineWidth||1,this.lineJoin=U.lineJoin||"miter",this.lineCap=U.lineCap||"butt",this.path=U.path||[],this.transform=U.transform!==void 0?U.transform.clone():new l,this.globalCompositeOperation=U.globalCompositeOperation||"normal",this.globalAlpha=U.globalAlpha||1,this.clip_path=U.clip_path||[],this.currentPoint=U.currentPoint||new s,this.miterLimit=U.miterLimit||10,this.lastPoint=U.lastPoint||new s,this.lineDashOffset=U.lineDashOffset||0,this.lineDash=U.lineDash||[],this.margin=U.margin||[0,0,0,0],this.prevPageLastElemOffset=U.prevPageLastElemOffset||0,this.ignoreClearRect=typeof U.ignoreClearRect!="boolean"||U.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,d=new u}]);var h=function(U){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var E=U;Object.defineProperty(this,"pdf",{get:function(){return E}});var O=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return O},set:function(ne){O=!!ne}});var L=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return L},set:function(ne){L=!!ne}});var G=0;Object.defineProperty(this,"posX",{get:function(){return G},set:function(ne){isNaN(ne)||(G=ne)}});var K=0;Object.defineProperty(this,"posY",{get:function(){return K},set:function(ne){isNaN(ne)||(K=ne)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ne){var Q;typeof ne=="number"?Q=[ne,ne,ne,ne]:((Q=new Array(4))[0]=ne[0],Q[1]=ne.length>=2?ne[1]:Q[0],Q[2]=ne.length>=3?ne[2]:Q[0],Q[3]=ne.length>=4?ne[3]:Q[1]),d.margin=Q}});var q=!1;Object.defineProperty(this,"autoPaging",{get:function(){return q},set:function(ne){q=ne}});var B=0;Object.defineProperty(this,"lastBreak",{get:function(){return B},set:function(ne){B=ne}});var H=[];Object.defineProperty(this,"pageBreaks",{get:function(){return H},set:function(ne){H=ne}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ne){ne instanceof u&&(d=ne)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ne){d.path=ne}});var Y=[];Object.defineProperty(this,"ctxStack",{get:function(){return Y},set:function(ne){Y=ne}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ne){var Q;Q=f(ne),this.ctx.fillStyle=Q.style,this.ctx.isFillTransparent=Q.a===0,this.ctx.fillOpacity=Q.a,this.pdf.setFillColor(Q.r,Q.g,Q.b,{a:Q.a}),this.pdf.setTextColor(Q.r,Q.g,Q.b,{a:Q.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ne){var Q=f(ne);this.ctx.strokeStyle=Q.style,this.ctx.isStrokeTransparent=Q.a===0,this.ctx.strokeOpacity=Q.a,Q.a===0?this.pdf.setDrawColor(255,255,255):(Q.a,this.pdf.setDrawColor(Q.r,Q.g,Q.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ne){["butt","round","square"].indexOf(ne)!==-1&&(this.ctx.lineCap=ne,this.pdf.setLineCap(ne))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ne){isNaN(ne)||(this.ctx.lineWidth=ne,this.pdf.setLineWidth(ne))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ne){["bevel","round","miter"].indexOf(ne)!==-1&&(this.ctx.lineJoin=ne,this.pdf.setLineJoin(ne))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ne){isNaN(ne)||(this.ctx.miterLimit=ne,this.pdf.setMiterLimit(ne))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ne){this.ctx.textBaseline=ne}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ne){["right","end","center","left","start"].indexOf(ne)!==-1&&(this.ctx.textAlign=ne)}});var te=null;function oe(ne,Q){if(te===null){var ce=function(ue){var de=[];return Object.keys(ue).forEach(function(ge){ue[ge].forEach(function(ye){var fe=null;switch(ye){case"bold":fe={family:ge,weight:"bold"};break;case"italic":fe={family:ge,style:"italic"};break;case"bolditalic":fe={family:ge,weight:"bold",style:"italic"};break;case"":case"normal":fe={family:ge}}fe!==null&&(fe.ref={name:ge,style:ye},de.push(fe))})}),de}(ne.getFontList());te=function(ue){for(var de={},ge=0;ge<ue.length;++ge){var ye=p1(ue[ge]),fe=ye.family,Se=ye.stretch,qe=ye.style,Oe=ye.weight;de[fe]=de[fe]||{},de[fe][Se]=de[fe][Se]||{},de[fe][Se][qe]=de[fe][Se][qe]||{},de[fe][Se][qe][Oe]=ye}return de}(ce.concat(Q))}return te}var pe=null;Object.defineProperty(this,"fontFaces",{get:function(){return pe},set:function(ne){te=null,pe=ne}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ne){var Q;if(this.ctx.font=ne,(Q=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ne))!==null){var ce=Q[1];Q[2];var ue=Q[3],de=Q[4];Q[5];var ge=Q[6],ye=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(de)[2];de=Math.floor(ye==="px"?parseFloat(de)*this.pdf.internal.scaleFactor:ye==="em"?parseFloat(de)*this.pdf.getFontSize():parseFloat(de)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(de);var fe=function(Ge){var et,ve,De=[],He=Ge.trim();if(He==="")return Uv;if(He in Fx)return[Fx[He]];for(;He!=="";){switch(ve=null,et=(He=Ox(He)).charAt(0)){case'"':case"'":ve=Rj(He.substring(1),et);break;default:ve=Dj(He)}if(ve===null||(De.push(ve[0]),(He=Ox(ve[1]))!==""&&He.charAt(0)!==","))return Uv;He=He.replace(/^,/,"")}return De}(ge);if(this.fontFaces){var Se=Nj(oe(this.pdf,this.fontFaces),fe.map(function(Ge){return{family:Ge,stretch:"normal",weight:ue,style:ce}}));this.pdf.setFont(Se.ref.name,Se.ref.style)}else{var qe="";(ue==="bold"||parseInt(ue,10)>=700||ce==="bold")&&(qe="bold"),ce==="italic"&&(qe+="italic"),qe.length===0&&(qe="normal");for(var Oe="",Ie={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Be=0;Be<fe.length;Be++){if(this.pdf.internal.getFont(fe[Be],qe,{noFallback:!0,disableWarning:!0})!==void 0){Oe=fe[Be];break}if(qe==="bolditalic"&&this.pdf.internal.getFont(fe[Be],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Oe=fe[Be],qe="bold";else if(this.pdf.internal.getFont(fe[Be],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Oe=fe[Be],qe="normal";break}}if(Oe===""){for(var ke=0;ke<fe.length;ke++)if(Ie[fe[ke]]){Oe=Ie[fe[ke]];break}}Oe=Oe===""?"Times":Oe,this.pdf.setFont(Oe,qe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ne){this.ctx.globalCompositeOperation=ne}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ne){this.ctx.globalAlpha=ne}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ne){this.ctx.lineDashOffset=ne,se.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ne){this.ctx.lineDash=ne,se.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ne){this.ctx.ignoreClearRect=!!ne}})};h.prototype.setLineDash=function(U){this.lineDash=U},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){N.call(this,"fill",!1)},h.prototype.stroke=function(){N.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(U,E){if(isNaN(U)||isNaN(E))throw On.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var O=this.ctx.transform.applyToPoint(new s(U,E));this.path.push({type:"mt",x:O.x,y:O.y}),this.ctx.lastPoint=new s(U,E)},h.prototype.closePath=function(){var U=new s(0,0),E=0;for(E=this.path.length-1;E!==-1;E--)if(this.path[E].type==="begin"&&Rn(this.path[E+1])==="object"&&typeof this.path[E+1].x=="number"){U=new s(this.path[E+1].x,this.path[E+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(U.x,U.y)},h.prototype.lineTo=function(U,E){if(isNaN(U)||isNaN(E))throw On.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var O=this.ctx.transform.applyToPoint(new s(U,E));this.path.push({type:"lt",x:O.x,y:O.y}),this.ctx.lastPoint=new s(O.x,O.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},h.prototype.quadraticCurveTo=function(U,E,O,L){if(isNaN(O)||isNaN(L)||isNaN(U)||isNaN(E))throw On.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var G=this.ctx.transform.applyToPoint(new s(O,L)),K=this.ctx.transform.applyToPoint(new s(U,E));this.path.push({type:"qct",x1:K.x,y1:K.y,x:G.x,y:G.y}),this.ctx.lastPoint=new s(G.x,G.y)},h.prototype.bezierCurveTo=function(U,E,O,L,G,K){if(isNaN(G)||isNaN(K)||isNaN(U)||isNaN(E)||isNaN(O)||isNaN(L))throw On.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var q=this.ctx.transform.applyToPoint(new s(G,K)),B=this.ctx.transform.applyToPoint(new s(U,E)),H=this.ctx.transform.applyToPoint(new s(O,L));this.path.push({type:"bct",x1:B.x,y1:B.y,x2:H.x,y2:H.y,x:q.x,y:q.y}),this.ctx.lastPoint=new s(q.x,q.y)},h.prototype.arc=function(U,E,O,L,G,K){if(isNaN(U)||isNaN(E)||isNaN(O)||isNaN(L)||isNaN(G))throw On.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(K=!!K,!this.ctx.transform.isIdentity){var q=this.ctx.transform.applyToPoint(new s(U,E));U=q.x,E=q.y;var B=this.ctx.transform.applyToPoint(new s(0,O)),H=this.ctx.transform.applyToPoint(new s(0,0));O=Math.sqrt(Math.pow(B.x-H.x,2)+Math.pow(B.y-H.y,2))}Math.abs(G-L)>=2*Math.PI&&(L=0,G=2*Math.PI),this.path.push({type:"arc",x:U,y:E,radius:O,startAngle:L,endAngle:G,counterclockwise:K})},h.prototype.arcTo=function(U,E,O,L,G){throw new Error("arcTo not implemented.")},h.prototype.rect=function(U,E,O,L){if(isNaN(U)||isNaN(E)||isNaN(O)||isNaN(L))throw On.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(U,E),this.lineTo(U+O,E),this.lineTo(U+O,E+L),this.lineTo(U,E+L),this.lineTo(U,E),this.lineTo(U+O,E),this.lineTo(U,E)},h.prototype.fillRect=function(U,E,O,L){if(isNaN(U)||isNaN(E)||isNaN(O)||isNaN(L))throw On.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var G={};this.lineCap!=="butt"&&(G.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(G.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(U,E,O,L),this.fill(),G.hasOwnProperty("lineCap")&&(this.lineCap=G.lineCap),G.hasOwnProperty("lineJoin")&&(this.lineJoin=G.lineJoin)}},h.prototype.strokeRect=function(U,E,O,L){if(isNaN(U)||isNaN(E)||isNaN(O)||isNaN(L))throw On.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(U,E,O,L),this.stroke())},h.prototype.clearRect=function(U,E,O,L){if(isNaN(U)||isNaN(E)||isNaN(O)||isNaN(L))throw On.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(U,E,O,L))},h.prototype.save=function(U){U=typeof U!="boolean"||U;for(var E=this.pdf.internal.getCurrentPageInfo().pageNumber,O=0;O<this.pdf.internal.getNumberOfPages();O++)this.pdf.setPage(O+1),this.pdf.internal.out("q");if(this.pdf.setPage(E),U){this.ctx.fontSize=this.pdf.internal.getFontSize();var L=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=L}},h.prototype.restore=function(U){U=typeof U!="boolean"||U;for(var E=this.pdf.internal.getCurrentPageInfo().pageNumber,O=0;O<this.pdf.internal.getNumberOfPages();O++)this.pdf.setPage(O+1),this.pdf.internal.out("Q");this.pdf.setPage(E),U&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(U){var E,O,L,G;if(U.isCanvasGradient===!0&&(U=U.getColor()),!U)return{r:0,g:0,b:0,a:0,style:U};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(U))E=0,O=0,L=0,G=0;else{var K=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(U);if(K!==null)E=parseInt(K[1]),O=parseInt(K[2]),L=parseInt(K[3]),G=1;else if((K=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(U))!==null)E=parseInt(K[1]),O=parseInt(K[2]),L=parseInt(K[3]),G=parseFloat(K[4]);else{if(G=1,typeof U=="string"&&U.charAt(0)!=="#"){var q=new n3(U);U=q.ok?q.toHex():"#000000"}U.length===4?(E=U.substring(1,2),E+=E,O=U.substring(2,3),O+=O,L=U.substring(3,4),L+=L):(E=U.substring(1,3),O=U.substring(3,5),L=U.substring(5,7)),E=parseInt(E,16),O=parseInt(O,16),L=parseInt(L,16)}}return{r:E,g:O,b:L,a:G,style:U}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(U,E,O,L){if(isNaN(E)||isNaN(O)||typeof U!="string")throw On.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(L=isNaN(L)?void 0:L,!p.call(this)){var G=ee(this.ctx.transform.rotation),K=this.ctx.transform.scaleX;_.call(this,{text:U,x:E,y:O,scale:K,angle:G,align:this.textAlign,maxWidth:L})}},h.prototype.strokeText=function(U,E,O,L){if(isNaN(E)||isNaN(O)||typeof U!="string")throw On.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){L=isNaN(L)?void 0:L;var G=ee(this.ctx.transform.rotation),K=this.ctx.transform.scaleX;_.call(this,{text:U,x:E,y:O,scale:K,renderingMode:"stroke",angle:G,align:this.textAlign,maxWidth:L})}},h.prototype.measureText=function(U){if(typeof U!="string")throw On.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var E=this.pdf,O=this.pdf.internal.scaleFactor,L=E.internal.getFontSize(),G=E.getStringUnitWidth(U)*L/E.internal.scaleFactor,K=function(q){var B=(q=q||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return B}}),this};return new K({width:G*=Math.round(96*O/72*1e4)/1e4})},h.prototype.scale=function(U,E){if(isNaN(U)||isNaN(E))throw On.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var O=new l(U,0,0,E,0,0);this.ctx.transform=this.ctx.transform.multiply(O)},h.prototype.rotate=function(U){if(isNaN(U))throw On.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var E=new l(Math.cos(U),Math.sin(U),-Math.sin(U),Math.cos(U),0,0);this.ctx.transform=this.ctx.transform.multiply(E)},h.prototype.translate=function(U,E){if(isNaN(U)||isNaN(E))throw On.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var O=new l(1,0,0,1,U,E);this.ctx.transform=this.ctx.transform.multiply(O)},h.prototype.transform=function(U,E,O,L,G,K){if(isNaN(U)||isNaN(E)||isNaN(O)||isNaN(L)||isNaN(G)||isNaN(K))throw On.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var q=new l(U,E,O,L,G,K);this.ctx.transform=this.ctx.transform.multiply(q)},h.prototype.setTransform=function(U,E,O,L,G,K){U=isNaN(U)?1:U,E=isNaN(E)?0:E,O=isNaN(O)?0:O,L=isNaN(L)?1:L,G=isNaN(G)?0:G,K=isNaN(K)?0:K,this.ctx.transform=new l(U,E,O,L,G,K)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(U,E,O,L,G,K,q,B,H){var Y=this.pdf.getImageProperties(U),te=1,oe=1,pe=1,ne=1;L!==void 0&&B!==void 0&&(pe=B/L,ne=H/G,te=Y.width/L*B/L,oe=Y.height/G*H/G),K===void 0&&(K=E,q=O,E=0,O=0),L!==void 0&&B===void 0&&(B=L,H=G),L===void 0&&B===void 0&&(B=Y.width,H=Y.height);for(var Q,ce=this.ctx.transform.decompose(),ue=ee(ce.rotate.shx),de=new l,ge=(de=(de=(de=de.multiply(ce.translate)).multiply(ce.skew)).multiply(ce.scale)).applyToRectangle(new a(K-E*pe,q-O*ne,L*te,G*oe)),ye=P.call(this,ge),fe=[],Se=0;Se<ye.length;Se+=1)fe.indexOf(ye[Se])===-1&&fe.push(ye[Se]);if(V(fe),this.autoPaging)for(var qe=fe[0],Oe=fe[fe.length-1],Ie=qe;Ie<Oe+1;Ie++){this.pdf.setPage(Ie);var Be=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ke=Ie===1?this.posY+this.margin[0]:this.margin[0],Ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],et=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ve=Ie===1?0:Ge+(Ie-2)*et;if(this.ctx.clip_path.length!==0){var De=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(Q,this.posX+this.margin[3],-ve+ke+this.ctx.prevPageLastElemOffset),R.call(this,"fill",!0),this.path=De}var He=JSON.parse(JSON.stringify(ge));He=F([He],this.posX+this.margin[3],-ve+ke+this.ctx.prevPageLastElemOffset)[0];var Je=(Ie>qe||Ie<Oe)&&x.call(this);Je&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Be,et,null).clip().discardPath()),this.pdf.addImage(U,"JPEG",He.x,He.y,He.w,He.h,null,null,ue),Je&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(U,"JPEG",ge.x,ge.y,ge.w,ge.h,null,null,ue)};var P=function(U,E,O){var L=[];E=E||this.pdf.internal.pageSize.width,O=O||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var G=this.posY+this.ctx.prevPageLastElemOffset;switch(U.type){default:case"mt":case"lt":L.push(Math.floor((U.y+G)/O)+1);break;case"arc":L.push(Math.floor((U.y+G-U.radius)/O)+1),L.push(Math.floor((U.y+G+U.radius)/O)+1);break;case"qct":var K=Z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x,U.y);L.push(Math.floor((K.y+G)/O)+1),L.push(Math.floor((K.y+K.h+G)/O)+1);break;case"bct":var q=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x2,U.y2,U.x,U.y);L.push(Math.floor((q.y+G)/O)+1),L.push(Math.floor((q.y+q.h+G)/O)+1);break;case"rect":L.push(Math.floor((U.y+G)/O)+1),L.push(Math.floor((U.y+U.h+G)/O)+1)}for(var B=0;B<L.length;B+=1)for(;this.pdf.internal.getNumberOfPages()<L[B];)g.call(this);return L},g=function(){var U=this.fillStyle,E=this.strokeStyle,O=this.font,L=this.lineCap,G=this.lineWidth,K=this.lineJoin;this.pdf.addPage(),this.fillStyle=U,this.strokeStyle=E,this.font=O,this.lineCap=L,this.lineWidth=G,this.lineJoin=K},F=function(U,E,O){for(var L=0;L<U.length;L++)switch(U[L].type){case"bct":U[L].x2+=E,U[L].y2+=O;case"qct":U[L].x1+=E,U[L].y1+=O;case"mt":case"lt":case"arc":default:U[L].x+=E,U[L].y+=O}return U},V=function(U){return U.sort(function(E,O){return E-O})},N=function(U,E){for(var O,L,G=this.fillStyle,K=this.strokeStyle,q=this.lineCap,B=this.lineWidth,H=Math.abs(B*this.ctx.transform.scaleX),Y=this.lineJoin,te=JSON.parse(JSON.stringify(this.path)),oe=JSON.parse(JSON.stringify(this.path)),pe=[],ne=0;ne<oe.length;ne++)if(oe[ne].x!==void 0)for(var Q=P.call(this,oe[ne]),ce=0;ce<Q.length;ce+=1)pe.indexOf(Q[ce])===-1&&pe.push(Q[ce]);for(var ue=0;ue<pe.length;ue++)for(;this.pdf.internal.getNumberOfPages()<pe[ue];)g.call(this);if(V(pe),this.autoPaging)for(var de=pe[0],ge=pe[pe.length-1],ye=de;ye<ge+1;ye++){this.pdf.setPage(ye),this.fillStyle=G,this.strokeStyle=K,this.lineCap=q,this.lineWidth=H,this.lineJoin=Y;var fe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Se=ye===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Oe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ie=ye===1?0:qe+(ye-2)*Oe;if(this.ctx.clip_path.length!==0){var Be=this.path;O=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(O,this.posX+this.margin[3],-Ie+Se+this.ctx.prevPageLastElemOffset),R.call(this,U,!0),this.path=Be}if(L=JSON.parse(JSON.stringify(te)),this.path=F(L,this.posX+this.margin[3],-Ie+Se+this.ctx.prevPageLastElemOffset),E===!1||ye===0){var ke=(ye>de||ye<ge)&&x.call(this);ke&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],fe,Oe,null).clip().discardPath()),R.call(this,U,E),ke&&this.pdf.restoreGraphicsState()}this.lineWidth=B}else this.lineWidth=H,R.call(this,U,E),this.lineWidth=B;this.path=te},R=function(U,E){if((U!=="stroke"||E||!m.call(this))&&(U==="stroke"||E||!p.call(this))){for(var O,L,G=[],K=this.path,q=0;q<K.length;q++){var B=K[q];switch(B.type){case"begin":G.push({begin:!0});break;case"close":G.push({close:!0});break;case"mt":G.push({start:B,deltas:[],abs:[]});break;case"lt":var H=G.length;if(K[q-1]&&!isNaN(K[q-1].x)&&(O=[B.x-K[q-1].x,B.y-K[q-1].y],H>0)){for(;H>=0;H--)if(G[H-1].close!==!0&&G[H-1].begin!==!0){G[H-1].deltas.push(O),G[H-1].abs.push(B);break}}break;case"bct":O=[B.x1-K[q-1].x,B.y1-K[q-1].y,B.x2-K[q-1].x,B.y2-K[q-1].y,B.x-K[q-1].x,B.y-K[q-1].y],G[G.length-1].deltas.push(O);break;case"qct":var Y=K[q-1].x+2/3*(B.x1-K[q-1].x),te=K[q-1].y+2/3*(B.y1-K[q-1].y),oe=B.x+2/3*(B.x1-B.x),pe=B.y+2/3*(B.y1-B.y),ne=B.x,Q=B.y;O=[Y-K[q-1].x,te-K[q-1].y,oe-K[q-1].x,pe-K[q-1].y,ne-K[q-1].x,Q-K[q-1].y],G[G.length-1].deltas.push(O);break;case"arc":G.push({deltas:[],abs:[],arc:!0}),Array.isArray(G[G.length-1].abs)&&G[G.length-1].abs.push(B)}}L=E?null:U==="stroke"?"stroke":"fill";for(var ce=!1,ue=0;ue<G.length;ue++)if(G[ue].arc)for(var de=G[ue].abs,ge=0;ge<de.length;ge++){var ye=de[ge];ye.type==="arc"?k.call(this,ye.x,ye.y,ye.radius,ye.startAngle,ye.endAngle,ye.counterclockwise,void 0,E,!ce):v.call(this,ye.x,ye.y),ce=!0}else if(G[ue].close===!0)this.pdf.internal.out("h"),ce=!1;else if(G[ue].begin!==!0){var fe=G[ue].start.x,Se=G[ue].start.y;z.call(this,G[ue].deltas,fe,Se),ce=!0}L&&D.call(this,L),E&&$.call(this)}},M=function(U){var E=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,O=E*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return U-O;case"top":return U+E-O;case"hanging":return U+E-2*O;case"middle":return U+E/2-O;case"ideographic":return U;case"alphabetic":default:return U}},C=function(U){return U+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var U=function(){};return U.colorStops=[],U.addColorStop=function(E,O){this.colorStops.push([E,O])},U.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},U.isCanvasGradient=!0,U},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var k=function(U,E,O,L,G,K,q,B,H){for(var Y=A.call(this,O,L,G,K),te=0;te<Y.length;te++){var oe=Y[te];te===0&&(H?w.call(this,oe.x1+U,oe.y1+E):v.call(this,oe.x1+U,oe.y1+E)),W.call(this,U,E,oe.x2,oe.y2,oe.x3,oe.y3,oe.x4,oe.y4)}B?$.call(this):D.call(this,q)},D=function(U){switch(U){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},$=function(){this.pdf.clip(),this.pdf.discardPath()},w=function(U,E){this.pdf.internal.out(r(U)+" "+n(E)+" m")},_=function(U){var E;switch(U.align){case"right":case"end":E="right";break;case"center":E="center";break;case"left":case"start":default:E="left"}var O=this.pdf.getTextDimensions(U.text),L=M.call(this,U.y),G=C.call(this,L)-O.h,K=this.ctx.transform.applyToPoint(new s(U.x,L)),q=this.ctx.transform.decompose(),B=new l;B=(B=(B=B.multiply(q.translate)).multiply(q.skew)).multiply(q.scale);for(var H,Y,te,oe=this.ctx.transform.applyToRectangle(new a(U.x,L,O.w,O.h)),pe=B.applyToRectangle(new a(U.x,G,O.w,O.h)),ne=P.call(this,pe),Q=[],ce=0;ce<ne.length;ce+=1)Q.indexOf(ne[ce])===-1&&Q.push(ne[ce]);if(V(Q),this.autoPaging)for(var ue=Q[0],de=Q[Q.length-1],ge=ue;ge<de+1;ge++){this.pdf.setPage(ge);var ye=ge===1?this.posY+this.margin[0]:this.margin[0],fe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Se=this.pdf.internal.pageSize.height-this.margin[2],qe=Se-this.margin[0],Oe=this.pdf.internal.pageSize.width-this.margin[1],Ie=Oe-this.margin[3],Be=ge===1?0:fe+(ge-2)*qe;if(this.ctx.clip_path.length!==0){var ke=this.path;H=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=F(H,this.posX+this.margin[3],-1*Be+ye),R.call(this,"fill",!0),this.path=ke}var Ge=F([JSON.parse(JSON.stringify(pe))],this.posX+this.margin[3],-Be+ye+this.ctx.prevPageLastElemOffset)[0];U.scale>=.01&&(Y=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Y*U.scale),te=this.lineWidth,this.lineWidth=te*U.scale);var et=this.autoPaging!=="text";if(et||Ge.y+Ge.h<=Se){if(et||Ge.y>=ye&&Ge.x<=Oe){var ve=et?U.text:this.pdf.splitTextToSize(U.text,U.maxWidth||Oe-Ge.x)[0],De=F([JSON.parse(JSON.stringify(oe))],this.posX+this.margin[3],-Be+ye+this.ctx.prevPageLastElemOffset)[0],He=et&&(ge>ue||ge<de)&&x.call(this);He&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ie,qe,null).clip().discardPath()),this.pdf.text(ve,De.x,De.y,{angle:U.angle,align:E,renderingMode:U.renderingMode}),He&&this.pdf.restoreGraphicsState()}}else Ge.y<Se&&(this.ctx.prevPageLastElemOffset+=Se-Ge.y);U.scale>=.01&&(this.pdf.setFontSize(Y),this.lineWidth=te)}else U.scale>=.01&&(Y=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Y*U.scale),te=this.lineWidth,this.lineWidth=te*U.scale),this.pdf.text(U.text,K.x+this.posX,K.y+this.posY,{angle:U.angle,align:E,renderingMode:U.renderingMode,maxWidth:U.maxWidth}),U.scale>=.01&&(this.pdf.setFontSize(Y),this.lineWidth=te)},v=function(U,E,O,L){O=O||0,L=L||0,this.pdf.internal.out(r(U+O)+" "+n(E+L)+" l")},z=function(U,E,O){return this.pdf.lines(U,E,O,null,null)},W=function(U,E,O,L,G,K,q,B){this.pdf.internal.out([e(i(O+U)),e(o(L+E)),e(i(G+U)),e(o(K+E)),e(i(q+U)),e(o(B+E)),"c"].join(" "))},A=function(U,E,O,L){for(var G=2*Math.PI,K=Math.PI/2;E>O;)E-=G;var q=Math.abs(O-E);q<G&&L&&(q=G-q);for(var B=[],H=L?-1:1,Y=E;q>1e-5;){var te=Y+H*Math.min(q,K);B.push(I.call(this,U,Y,te)),q-=Math.abs(te-Y),Y=te}return B},I=function(U,E,O){var L=(O-E)/2,G=U*Math.cos(L),K=U*Math.sin(L),q=G,B=-K,H=q*q+B*B,Y=H+q*G+B*K,te=4/3*(Math.sqrt(2*H*Y)-Y)/(q*K-B*G),oe=q-te*B,pe=B+te*q,ne=oe,Q=-pe,ce=L+E,ue=Math.cos(ce),de=Math.sin(ce);return{x1:U*Math.cos(E),y1:U*Math.sin(E),x2:oe*ue-pe*de,y2:oe*de+pe*ue,x3:ne*ue-Q*de,y3:ne*de+Q*ue,x4:U*Math.cos(O),y4:U*Math.sin(O)}},ee=function(U){return 180*U/Math.PI},Z=function(U,E,O,L,G,K){var q=U+.5*(O-U),B=E+.5*(L-E),H=G+.5*(O-G),Y=K+.5*(L-K),te=Math.min(U,G,q,H),oe=Math.max(U,G,q,H),pe=Math.min(E,K,B,Y),ne=Math.max(E,K,B,Y);return new a(te,pe,oe-te,ne-pe)},X=function(U,E,O,L,G,K,q,B){var H,Y,te,oe,pe,ne,Q,ce,ue,de,ge,ye,fe,Se,qe=O-U,Oe=L-E,Ie=G-O,Be=K-L,ke=q-G,Ge=B-K;for(Y=0;Y<41;Y++)ue=(Q=(te=U+(H=Y/40)*qe)+H*((pe=O+H*Ie)-te))+H*(pe+H*(G+H*ke-pe)-Q),de=(ce=(oe=E+H*Oe)+H*((ne=L+H*Be)-oe))+H*(ne+H*(K+H*Ge-ne)-ce),Y==0?(ge=ue,ye=de,fe=ue,Se=de):(ge=Math.min(ge,ue),ye=Math.min(ye,de),fe=Math.max(fe,ue),Se=Math.max(Se,de));return new a(Math.round(ge),Math.round(ye),Math.round(fe-ge),Math.round(Se-ye))},se=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var U,E,O=(U=this.ctx.lineDash,E=this.ctx.lineDashOffset,JSON.stringify({lineDash:U,lineDashOffset:E}));this.prevLineDash!==O&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=O)}}})(gr.API),function(t){var e=function(o){var s,a,l,d,u,h,f,p,m,x;for(a=[],l=0,d=(o+=s="\0\0\0\0".slice(o.length%4||4)).length;d>l;l+=4)(u=(o.charCodeAt(l)<<24)+(o.charCodeAt(l+1)<<16)+(o.charCodeAt(l+2)<<8)+o.charCodeAt(l+3))!==0?(h=(u=((u=((u=((u=(u-(x=u%85))/85)-(m=u%85))/85)-(p=u%85))/85)-(f=u%85))/85)%85,a.push(h+33,f+33,p+33,m+33,x+33)):a.push(122);return function(P,g){for(var F=g;F>0;F--)P.pop()}(a,s.length),String.fromCharCode.apply(String,a)+"~>"},r=function(o){var s,a,l,d,u,h=String,f="length",p=255,m="charCodeAt",x="slice",P="replace";for(o[x](-2),o=o[x](0,-2)[P](/\s/g,"")[P]("z","!!!!!"),l=[],d=0,u=(o+=s="uuuuu"[x](o[f]%5||5))[f];u>d;d+=5)a=52200625*(o[m](d)-33)+614125*(o[m](d+1)-33)+7225*(o[m](d+2)-33)+85*(o[m](d+3)-33)+(o[m](d+4)-33),l.push(p&a>>24,p&a>>16,p&a>>8,p&a);return function(g,F){for(var V=F;V>0;V--)g.pop()}(l,s[f]),h.fromCharCode.apply(h,l)},n=function(o){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),s.test(o)===!1)return"";for(var a="",l=0;l<o.length;l+=2)a+=String.fromCharCode("0x"+(o[l]+o[l+1]));return a},i=function(o){for(var s=new Uint8Array(o.length),a=o.length;a--;)s[a]=o.charCodeAt(a);return o=(s=a1(s)).reduce(function(l,d){return l+String.fromCharCode(d)},"")};t.processDataByFilters=function(o,s){var a=0,l=o||"",d=[];for(typeof(s=s||[])=="string"&&(s=[s]),a=0;a<s.length;a+=1)switch(s[a]){case"ASCII85Decode":case"/ASCII85Decode":l=r(l),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[a]+'" is not implemented')}return{data:l,reverseChain:d.reverse().join(" ")}}}(gr.API),function(t){t.loadFile=function(e,r,n){return function(i,o,s){o=o!==!1,s=typeof s=="function"?s:function(){};var a=void 0;try{a=function(l,d,u){var h=new XMLHttpRequest,f=0,p=function(m){var x=m.length,P=[],g=String.fromCharCode;for(f=0;f<x;f+=1)P.push(g(255&m.charCodeAt(f)));return P.join("")};if(h.open("GET",l,!d),h.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(h.onload=function(){h.status===200?u(p(this.responseText)):u(void 0)}),h.send(null),d&&h.status===200)return p(h.responseText)}(i,o,s)}catch{}return a}(e,r,n)},t.loadImageFile=t.loadFile}(gr.API),function(t){function e(){return(Pr.html2canvas?Promise.resolve(Pr.html2canvas):Qo(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function r(){return(Pr.DOMPurify?Promise.resolve(Pr.DOMPurify):Qo(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var n=function(s){var a=Rn(s);return a==="undefined"?"undefined":a==="string"||s instanceof String?"string":a==="number"||s instanceof Number?"number":a==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(s,a){var l=document.createElement(s);for(var d in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[d]=a.style[d];return l},o=function s(a){var l=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),d=s.convert(Promise.resolve(),l);return d=(d=d.setProgress(1,s,1,[s])).set(a)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(s,a){return s.__proto__=a||o.prototype,s},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(s,a){return this.then(function(){switch(a=a||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s)){case"string":return this.then(r).then(function(l){return this.set({src:i("div",{innerHTML:s,dompurify:l})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},o.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(d,u){for(var h=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),f=d.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||h.appendChild(l(f,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(h.width=d.width,h.height=d.height,h.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(h.value=d.value),h.addEventListener("load",function(){h.scrollTop=d.scrollTop,h.scrollLeft=d.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(a){var l=this.opt.jsPDF,d=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=d,d)for(var f=0;f<d.length;++f){var p=d[f],m=p.src.find(function(x){return x.format==="truetype"});m&&l.addFont(m.url,p.ref.name,p.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),a(this.prop.container,h)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(s,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(s,a):this.outputPdf(s,a)},o.prototype.outputPdf=function(s,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,a)})},o.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},o.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(s){if(n(s)!=="object")return this;var a=Object.keys(s||{}).map(function(l){if(l in o.template.prop)return function(){this.prop[l]=s[l]};switch(l){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[l]=s[l]}}},this);return this.then(function(){return this.thenList(a)})},o.prototype.get=function(s,a){return this.then(function(){var l=s in o.template.prop?this.prop[s]:this.opt[s];return a?a(l):l})},o.prototype.setMargin=function(s){return this.then(function(){switch(n(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},o.prototype.setPageSize=function(s){function a(l,d){return Math.floor(l*d/72*96)}return this.then(function(){(s=s||gr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:a(s.inner.width,s.k),height:a(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},o.prototype.setProgress=function(s,a,l,d){return s!=null&&(this.progress.val=s),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(s,a,l,d){return this.setProgress(s?this.progress.val+s:null,a||null,l?this.progress.n+l:null,d?this.progress.stack.concat(d):null)},o.prototype.then=function(s,a){var l=this;return this.thenCore(s,a,function(d,u){return l.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,d),h}).then(d,u).then(function(h){return l.updateProgress(1),h})})},o.prototype.thenCore=function(s,a,l){l=l||Promise.prototype.then,s&&(s=s.bind(this)),a&&(a=a.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),u=l.call(d,s,a);return o.convert(u,this.__proto__)},o.prototype.thenExternal=function(s,a){return Promise.prototype.then.call(this,s,a)},o.prototype.thenList=function(s){var a=this;return s.forEach(function(l){a=a.thenCore(l)}),a},o.prototype.catch=function(s){s&&(s=s.bind(this));var a=Promise.prototype.catch.call(this,s);return o.convert(a,this)},o.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},o.prototype.error=function(s){return this.then(function(){throw new Error(s)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,gr.getPageSize=function(s,a,l){if(Rn(s)==="object"){var d=s;s=d.orientation,a=d.unit||a,l=d.format||l}a=a||"mm",l=l||"a4",s=(""+(s||"P")).toLowerCase();var u,h=(""+l).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+a}var p,m=0,x=0;if(f.hasOwnProperty(h))m=f[h][1]/u,x=f[h][0]/u;else try{m=l[1],x=l[0]}catch{throw new Error("Invalid format: "+l)}if(s==="p"||s==="portrait")s="p",x>m&&(p=x,x=m,m=p);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",m>x&&(p=x,x=m,m=p)}return{width:x,height:m,unit:a,k:u,orientation:s}},t.html=function(s,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(p1):null;var l=new o(a);return a.worker?l:l.from(s).doCallback()}}(gr.API),gr.API.addJS=function(t){return jx=t,this.internal.events.subscribe("postPutResources",function(){Zf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Zf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Bx=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+jx+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Zf!==void 0&&Bx!==void 0&&this.internal.out("/Names <</JavaScript "+Zf+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),o=0;o<i.length;o++){var s=i[o],a=n.exec(s);if(a!=null){var l=a[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(s)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(o=0;o<d;o++){var h=r.internal.newObject();u.push(h);var f=r.internal.getPageInfo(o+1);r.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),o=0;o<u.length;o++)r.internal.write("(page_"+(o+1)+")"+u[o]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,o){var s={title:i,options:o,children:[]};return n==null&&(n=this.root),n.children.push(s),s},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<n.children.length;o++){var s=n.children[o];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(n)),o>0&&this.line("/Prev "+this.makeRef(n.children[o-1])),o<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[o+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var a=this.count=this.count_r({count:0},s);if(a>0&&this.line("/Count "+a),s.options&&s.options.pageNumber){var l=r.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var o=0;o<i.children.length;o++)n.count++,this.count_r(n,i.children[o]);return n.count}}])}(gr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,i,o,s,a){var l,d=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=s||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(l=function(h){for(var f,p=256*h.charCodeAt(4)+h.charCodeAt(5),m=h.length,x={width:0,height:0,numcomponents:1},P=4;P<m;P+=2){if(P+=p,e.indexOf(h.charCodeAt(P+1))!==-1){f=256*h.charCodeAt(P+5)+h.charCodeAt(P+6),x={width:256*h.charCodeAt(P+7)+h.charCodeAt(P+8),height:f,numcomponents:h.charCodeAt(P+9)};break}p=256*h.charCodeAt(P+2)+h.charCodeAt(P+3)}return x}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:r,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:d,index:n,alias:i}}return u}}(gr.API);var nu,Jf,Vx,zx,Ux,Lj=function(){var t,e,r;function n(o){var s,a,l,d,u,h,f,p,m,x,P,g,F,V;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(s=this.readUInt32(),m=function(){var N,R;for(R=[],N=0;N<4;++N)R.push(String.fromCharCode(this.data[this.pos++]));return R}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),d=this.readUInt16()||100,h.delay=1e3*u/d,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(m==="fdAT"&&(this.pos+=4,s-=4),o=h?.data||this.imgData,g=0;0<=s?g<s:g>s;0<=s?++g:--g)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((x=l-this.transparency.indexed.length)>0)for(F=0;0<=x?F<x:F>x;0<=x?++F:--F)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":f=(P=this.read(s)).indexOf(0),p=String.fromCharCode.apply(String,P.slice(0,f)),this.text[p]=String.fromCharCode.apply(String,P.slice(f+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(V=this.colorType)===4||V===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(o){var s,a;for(a=[],s=0;0<=o?s<o:s>o;0<=o?++s:--s)a.push(this.data[this.pos++]);return a},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(o){var s=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*s),l=0,d=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function u(h,f,p,m){var x,P,g,F,V,N,R,M,C,k,D,$,w,_,v,z,W,A,I,ee,Z,X=Math.ceil((d.width-h)/p),se=Math.ceil((d.height-f)/m),U=d.width==X&&d.height==se;for(_=s*X,$=U?a:new Uint8Array(_*se),N=o.length,w=0,P=0;w<se&&l<N;){switch(o[l++]){case 0:for(F=W=0;W<_;F=W+=1)$[P++]=o[l++];break;case 1:for(F=A=0;A<_;F=A+=1)x=o[l++],V=F<s?0:$[P-s],$[P++]=(x+V)%256;break;case 2:for(F=I=0;I<_;F=I+=1)x=o[l++],g=(F-F%s)/s,v=w&&$[(w-1)*_+g*s+F%s],$[P++]=(v+x)%256;break;case 3:for(F=ee=0;ee<_;F=ee+=1)x=o[l++],g=(F-F%s)/s,V=F<s?0:$[P-s],v=w&&$[(w-1)*_+g*s+F%s],$[P++]=(x+Math.floor((V+v)/2))%256;break;case 4:for(F=Z=0;Z<_;F=Z+=1)x=o[l++],g=(F-F%s)/s,V=F<s?0:$[P-s],w===0?v=z=0:(v=$[(w-1)*_+g*s+F%s],z=g&&$[(w-1)*_+(g-1)*s+F%s]),R=V+v-z,M=Math.abs(R-V),k=Math.abs(R-v),D=Math.abs(R-z),C=M<=k&&M<=D?V:k<=D?v:z,$[P++]=(x+C)%256;break;default:throw new Error("Invalid filter algorithm: "+o[l-1])}if(!U){var E=((f+w*m)*d.width+h)*s,O=w*_;for(F=0;F<X;F+=1){for(var L=0;L<s;L+=1)a[E++]=$[O++];E+=(p-1)*s}}w++}}return o=uj(o),d.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),a},n.prototype.decodePalette=function(){var o,s,a,l,d,u,h,f,p;for(a=this.palette,u=this.transparency.indexed||[],d=new Uint8Array((u.length||0)+a.length),l=0,o=0,s=h=0,f=a.length;h<f;s=h+=3)d[l++]=a[s],d[l++]=a[s+1],d[l++]=a[s+2],d[l++]=(p=u[o++])!=null?p:255;return d},n.prototype.copyToImageData=function(o,s){var a,l,d,u,h,f,p,m,x,P,g;if(l=this.colors,x=null,a=this.hasAlphaChannel,this.palette.length&&(x=(g=this._decodedPalette)!=null?g:this._decodedPalette=this.decodePalette(),l=4,a=!0),m=(d=o.data||o).length,h=x||s,u=f=0,l===1)for(;u<m;)p=x?4*s[u/4]:f,P=h[p++],d[u++]=P,d[u++]=P,d[u++]=P,d[u++]=a?h[p++]:255,f=p;else for(;u<m;)p=x?4*s[u/4]:f,d[u++]=h[p++],d[u++]=h[p++],d[u++]=h[p++],d[u++]=a?h[p++]:255,f=p},n.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var i=function(){if(Object.prototype.toString.call(Pr)==="[object Window]"){try{e=Pr.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(o){var s;if(i()===!0)return r.width=o.width,r.height=o.height,r.clearRect(0,0,o.width,o.height),r.putImageData(o,0,0),(s=new Image).src=e.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(o){var s,a,l,d,u,h,f,p;if(this.animation){for(p=[],a=u=0,h=(f=this.animation.frames).length;u<h;a=++u)s=f[a],l=o.createImageData(s.width,s.height),d=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(l,d),s.imageData=l,p.push(s.image=t(l));return p}},n.prototype.renderFrame=function(o,s){var a,l,d;return a=(l=this.animation.frames)[s],d=l[s-1],s===0&&o.clearRect(0,0,this.width,this.height),d?.disposeOp===1?o.clearRect(d.xOffset,d.yOffset,d.width,d.height):d?.disposeOp===2&&o.putImageData(d.imageData,d.xOffset,d.yOffset),a.blendOp===0&&o.clearRect(a.xOffset,a.yOffset,a.width,a.height),o.drawImage(a.image,a.xOffset,a.yOffset)},n.prototype.animate=function(o){var s,a,l,d,u,h,f=this;return a=0,h=this.animation,d=h.numFrames,l=h.frames,u=h.numPlays,(s=function(){var p,m;if(p=a++%d,m=l[p],f.renderFrame(o,p),d>1&&a/d<u)return f.animation._timeout=setTimeout(s,m.delay)})()},n.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},n.prototype.render=function(o){var s,a;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,s=o.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(a=s.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),s.putImageData(a,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function $j(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,i=t[e++],o=i>>7,s=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;o&&(a=e,l=s,e+=3*s);var d=!0,u=[],h=0,f=null,p=0,m=null;for(this.width=r,this.height=n;d&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,m=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((w=t[e++])>=0))throw Error("Invalid block size");if(w===0)break;e+=w}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var x=t[e++];h=t[e++]|t[e++]<<8,f=t[e++],(1&x)==0&&(f=null),p=x>>2&7,e++;break;case 254:for(;;){if(!((w=t[e++])>=0))throw Error("Invalid block size");if(w===0)break;e+=w}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var P=t[e++]|t[e++]<<8,g=t[e++]|t[e++]<<8,F=t[e++]|t[e++]<<8,V=t[e++]|t[e++]<<8,N=t[e++],R=N>>6&1,M=1<<(7&N)+1,C=a,k=l,D=!1;N>>7&&(D=!0,C=e,k=M,e+=3*M);var $=e;for(e++;;){var w;if(!((w=t[e++])>=0))throw Error("Invalid block size");if(w===0)break;e+=w}u.push({x:P,y:g,width:F,height:V,has_local_palette:D,palette_offset:C,palette_size:k,data_offset:$,data_length:e-$,transparent_index:f,interlaced:!!R,delay:h,disposal:p});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return m},this.frameInfo=function(_){if(_<0||_>=u.length)throw new Error("Frame index out of range.");return u[_]},this.decodeAndBlitFrameBGRA=function(_,v){var z=this.frameInfo(_),W=z.width*z.height,A=new Uint8Array(W);qx(t,z.data_offset,A,W);var I=z.palette_offset,ee=z.transparent_index;ee===null&&(ee=256);var Z=z.width,X=r-Z,se=Z,U=4*(z.y*r+z.x),E=4*((z.y+z.height)*r+z.x),O=U,L=4*X;z.interlaced===!0&&(L+=4*r*7);for(var G=8,K=0,q=A.length;K<q;++K){var B=A[K];if(se===0&&(se=Z,(O+=L)>=E&&(L=4*X+4*r*(G-1),O=U+(Z+X)*(G<<1),G>>=1)),B===ee)O+=4;else{var H=t[I+3*B],Y=t[I+3*B+1],te=t[I+3*B+2];v[O++]=te,v[O++]=Y,v[O++]=H,v[O++]=255}--se}},this.decodeAndBlitFrameRGBA=function(_,v){var z=this.frameInfo(_),W=z.width*z.height,A=new Uint8Array(W);qx(t,z.data_offset,A,W);var I=z.palette_offset,ee=z.transparent_index;ee===null&&(ee=256);var Z=z.width,X=r-Z,se=Z,U=4*(z.y*r+z.x),E=4*((z.y+z.height)*r+z.x),O=U,L=4*X;z.interlaced===!0&&(L+=4*r*7);for(var G=8,K=0,q=A.length;K<q;++K){var B=A[K];if(se===0&&(se=Z,(O+=L)>=E&&(L=4*X+4*r*(G-1),O=U+(Z+X)*(G<<1),G>>=1)),B===ee)O+=4;else{var H=t[I+3*B],Y=t[I+3*B+1],te=t[I+3*B+2];v[O++]=H,v[O++]=Y,v[O++]=te,v[O++]=255}--se}}}function qx(t,e,r,n){for(var i=t[e++],o=1<<i,s=o+1,a=s+1,l=i+1,d=(1<<l)-1,u=0,h=0,f=0,p=t[e++],m=new Int32Array(4096),x=null;;){for(;u<16&&p!==0;)h|=t[e++]<<u,u+=8,p===1?p=t[e++]:--p;if(u<l)break;var P=h&d;if(h>>=l,u-=l,P!==o){if(P===s)break;for(var g=P<a?P:x,F=0,V=g;V>o;)V=m[V]>>8,++F;var N=V;if(f+F+(g!==P?1:0)>n)return void On.log("Warning, gif stream longer than expected.");r[f++]=N;var R=f+=F;for(g!==P&&(r[f++]=N),V=g;F--;)V=m[V],r[--R]=255&V,V>>=8;x!==null&&a<4096&&(m[a++]=x<<8|N,a>=d+1&&l<12&&(++l,d=d<<1|1)),x=P}else a=s+1,d=(1<<(l=i+1))-1,x=null}return f!==n&&On.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function qv(t){var e,r,n,i,o,s=Math.floor,a=new Array(64),l=new Array(64),d=new Array(64),u=new Array(64),h=new Array(65535),f=new Array(65535),p=new Array(64),m=new Array(64),x=[],P=0,g=7,F=new Array(64),V=new Array(64),N=new Array(64),R=new Array(256),M=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],D=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],w=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],_=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],v=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],W=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function A(U,E){for(var O=0,L=0,G=new Array,K=1;K<=16;K++){for(var q=1;q<=U[K];q++)G[E[L]]=[],G[E[L]][0]=O,G[E[L]][1]=K,L++,O++;O*=2}return G}function I(U){for(var E=U[0],O=U[1]-1;O>=0;)E&1<<O&&(P|=1<<g),O--,--g<0&&(P==255?(ee(255),ee(0)):ee(P),g=7,P=0)}function ee(U){x.push(U)}function Z(U){ee(U>>8&255),ee(255&U)}function X(U,E,O,L,G){for(var K,q=G[0],B=G[240],H=function(de,ge){var ye,fe,Se,qe,Oe,Ie,Be,ke,Ge,et,ve=0;for(Ge=0;Ge<8;++Ge){ye=de[ve],fe=de[ve+1],Se=de[ve+2],qe=de[ve+3],Oe=de[ve+4],Ie=de[ve+5],Be=de[ve+6];var De=ye+(ke=de[ve+7]),He=ye-ke,Je=fe+Be,Le=fe-Be,Te=Se+Ie,he=Se-Ie,Ne=qe+Oe,rt=qe-Oe,re=De+Ne,Ue=De-Ne,we=Je+Te,xe=Je-Te;de[ve]=re+we,de[ve+4]=re-we;var je=.707106781*(xe+Ue);de[ve+2]=Ue+je,de[ve+6]=Ue-je;var $e=.382683433*((re=rt+he)-(xe=Le+He)),ft=.5411961*re+$e,ct=1.306562965*xe+$e,yt=.707106781*(we=he+Le),$t=He+yt,bt=He-yt;de[ve+5]=bt+ft,de[ve+3]=bt-ft,de[ve+1]=$t+ct,de[ve+7]=$t-ct,ve+=8}for(ve=0,Ge=0;Ge<8;++Ge){ye=de[ve],fe=de[ve+8],Se=de[ve+16],qe=de[ve+24],Oe=de[ve+32],Ie=de[ve+40],Be=de[ve+48];var Gt=ye+(ke=de[ve+56]),Wt=ye-ke,Dt=fe+Be,Kt=fe-Be,gt=Se+Ie,St=Se-Ie,Qe=qe+Oe,vt=qe-Oe,Ft=Gt+Qe,Pt=Gt-Qe,kt=Dt+gt,Yt=Dt-gt;de[ve]=Ft+kt,de[ve+32]=Ft-kt;var nr=.707106781*(Yt+Pt);de[ve+16]=Pt+nr,de[ve+48]=Pt-nr;var cr=.382683433*((Ft=vt+St)-(Yt=Kt+Wt)),on=.5411961*Ft+cr,Dr=1.306562965*Yt+cr,lr=.707106781*(kt=St+Kt),Zt=Wt+lr,yr=Wt-lr;de[ve+40]=yr+on,de[ve+24]=yr-on,de[ve+8]=Zt+Dr,de[ve+56]=Zt-Dr,ve++}for(Ge=0;Ge<64;++Ge)et=de[Ge]*ge[Ge],p[Ge]=et>0?et+.5|0:et-.5|0;return p}(U,E),Y=0;Y<64;++Y)m[C[Y]]=H[Y];var te=m[0]-O;O=m[0],te==0?I(L[0]):(I(L[f[K=32767+te]]),I(h[K]));for(var oe=63;oe>0&&m[oe]==0;)oe--;if(oe==0)return I(q),O;for(var pe,ne=1;ne<=oe;){for(var Q=ne;m[ne]==0&&ne<=oe;)++ne;var ce=ne-Q;if(ce>=16){pe=ce>>4;for(var ue=1;ue<=pe;++ue)I(B);ce&=15}K=32767+m[ne],I(G[(ce<<4)+f[K]]),I(h[K]),ne++}return oe!=63&&I(q),O}function se(U){U=Math.min(Math.max(U,1),100),o!=U&&(function(E){for(var O=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],L=0;L<64;L++){var G=s((O[L]*E+50)/100);G=Math.min(Math.max(G,1),255),a[C[L]]=G}for(var K=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],q=0;q<64;q++){var B=s((K[q]*E+50)/100);B=Math.min(Math.max(B,1),255),l[C[q]]=B}for(var H=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Y=0,te=0;te<8;te++)for(var oe=0;oe<8;oe++)d[Y]=1/(a[C[Y]]*H[te]*H[oe]*8),u[Y]=1/(l[C[Y]]*H[te]*H[oe]*8),Y++}(U<50?Math.floor(5e3/U):Math.floor(200-2*U)),o=U)}this.encode=function(U,E){E&&se(E),x=new Array,P=0,g=7,Z(65496),Z(65504),Z(16),ee(74),ee(70),ee(73),ee(70),ee(0),ee(1),ee(1),ee(0),Z(1),Z(1),ee(0),ee(0),function(){Z(65499),Z(132),ee(0);for(var fe=0;fe<64;fe++)ee(a[fe]);ee(1);for(var Se=0;Se<64;Se++)ee(l[Se])}(),function(fe,Se){Z(65472),Z(17),ee(8),Z(Se),Z(fe),ee(3),ee(1),ee(17),ee(0),ee(2),ee(17),ee(1),ee(3),ee(17),ee(1)}(U.width,U.height),function(){Z(65476),Z(418),ee(0);for(var fe=0;fe<16;fe++)ee(k[fe+1]);for(var Se=0;Se<=11;Se++)ee(D[Se]);ee(16);for(var qe=0;qe<16;qe++)ee($[qe+1]);for(var Oe=0;Oe<=161;Oe++)ee(w[Oe]);ee(1);for(var Ie=0;Ie<16;Ie++)ee(_[Ie+1]);for(var Be=0;Be<=11;Be++)ee(v[Be]);ee(17);for(var ke=0;ke<16;ke++)ee(z[ke+1]);for(var Ge=0;Ge<=161;Ge++)ee(W[Ge])}(),Z(65498),Z(12),ee(3),ee(1),ee(0),ee(2),ee(17),ee(3),ee(17),ee(0),ee(63),ee(0);var O=0,L=0,G=0;P=0,g=7,this.encode.displayName="_encode_";for(var K,q,B,H,Y,te,oe,pe,ne,Q=U.data,ce=U.width,ue=U.height,de=4*ce,ge=0;ge<ue;){for(K=0;K<de;){for(Y=de*ge+K,oe=-1,pe=0,ne=0;ne<64;ne++)te=Y+(pe=ne>>3)*de+(oe=4*(7&ne)),ge+pe>=ue&&(te-=de*(ge+1+pe-ue)),K+oe>=de&&(te-=K+oe-de+4),q=Q[te++],B=Q[te++],H=Q[te++],F[ne]=(M[q]+M[B+256>>0]+M[H+512>>0]>>16)-128,V[ne]=(M[q+768>>0]+M[B+1024>>0]+M[H+1280>>0]>>16)-128,N[ne]=(M[q+1280>>0]+M[B+1536>>0]+M[H+1792>>0]>>16)-128;O=X(F,d,O,e,n),L=X(V,u,L,r,i),G=X(N,u,G,r,i),K+=32}ge+=8}if(g>=0){var ye=[];ye[1]=g+1,ye[0]=(1<<g+1)-1,I(ye)}return Z(65497),new Uint8Array(x)},t=t||50,function(){for(var U=String.fromCharCode,E=0;E<256;E++)R[E]=U(E)}(),e=A(k,D),r=A(_,v),n=A($,w),i=A(z,W),function(){for(var U=1,E=2,O=1;O<=15;O++){for(var L=U;L<E;L++)f[32767+L]=O,h[32767+L]=[],h[32767+L][1]=O,h[32767+L][0]=L;for(var G=-(E-1);G<=-U;G++)f[32767+G]=O,h[32767+G]=[],h[32767+G][1]=O,h[32767+G][0]=E-1+G;U<<=1,E<<=1}}(),function(){for(var U=0;U<256;U++)M[U]=19595*U,M[U+256>>0]=38470*U,M[U+512>>0]=7471*U+32768,M[U+768>>0]=-11059*U,M[U+1024>>0]=-21709*U,M[U+1280>>0]=32768*U+8421375,M[U+1536>>0]=-27439*U,M[U+1792>>0]=-5329*U}(),se(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Vs(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Hx(t){function e(k){if(!k)throw Error("assert :P")}function r(k,D,$){for(var w=0;4>w;w++)if(k[D+w]!=$.charCodeAt(w))return!0;return!1}function n(k,D,$,w,_){for(var v=0;v<_;v++)k[D+v]=$[w+v]}function i(k,D,$,w){for(var _=0;_<w;_++)k[D+_]=$}function o(k){return new Int32Array(k)}function s(k,D){for(var $=[],w=0;w<k;w++)$.push(new D);return $}function a(k,D){var $=[];return function w(_,v,z){for(var W=z[v],A=0;A<W&&(_.push(z.length>v+1?[]:new D),!(z.length<v+1));A++)w(_[A],v+1,z)}($,0,k),$}var l=function(){var k=this;function D(b,j){for(var ie=1<<j-1>>>0;b&ie;)ie>>>=1;return ie?(b&ie-1)+ie:b}function $(b,j,ie,me,_e){e(!(me%ie));do b[j+(me-=ie)]=_e;while(0<me)}function w(b,j,ie,me,_e){if(e(2328>=_e),512>=_e)var Ee=o(512);else if((Ee=o(_e))==null)return 0;return function(Re,Me,ze,Ye,nt,ut){var ht,lt,It=Me,xt=1<<ze,it=o(16),ot=o(16);for(e(nt!=0),e(Ye!=null),e(Re!=null),e(0<ze),lt=0;lt<nt;++lt){if(15<Ye[lt])return 0;++it[Ye[lt]]}if(it[0]==nt)return 0;for(ot[1]=0,ht=1;15>ht;++ht){if(it[ht]>1<<ht)return 0;ot[ht+1]=ot[ht]+it[ht]}for(lt=0;lt<nt;++lt)ht=Ye[lt],0<Ye[lt]&&(ut[ot[ht]++]=lt);if(ot[15]==1)return(Ye=new _).g=0,Ye.value=ut[0],$(Re,It,1,xt,Ye),xt;var Et,Lt=-1,Tt=xt-1,or=0,Qt=1,mr=1,rr=1<<ze;for(lt=0,ht=1,nt=2;ht<=ze;++ht,nt<<=1){if(Qt+=mr<<=1,0>(mr-=it[ht]))return 0;for(;0<it[ht];--it[ht])(Ye=new _).g=ht,Ye.value=ut[lt++],$(Re,It+or,nt,rr,Ye),or=D(or,ht)}for(ht=ze+1,nt=2;15>=ht;++ht,nt<<=1){if(Qt+=mr<<=1,0>(mr-=it[ht]))return 0;for(;0<it[ht];--it[ht]){if(Ye=new _,(or&Tt)!=Lt){for(It+=rr,Et=1<<(Lt=ht)-ze;15>Lt&&!(0>=(Et-=it[Lt]));)++Lt,Et<<=1;xt+=rr=1<<(Et=Lt-ze),Re[Me+(Lt=or&Tt)].g=Et+ze,Re[Me+Lt].value=It-Me-Lt}Ye.g=ht-ze,Ye.value=ut[lt++],$(Re,It+(or>>ze),nt,rr,Ye),or=D(or,ht)}}return Qt!=2*ot[15]-1?0:xt}(b,j,ie,me,_e,Ee)}function _(){this.value=this.g=0}function v(){this.value=this.g=0}function z(){this.G=s(5,_),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(Ui,v)}function W(b,j,ie,me){e(b!=null),e(j!=null),e(2147483648>me),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=j,b.pa=ie,b.Jd=j,b.Yc=ie+me,b.Zc=4<=me?ie+me-4+1:ie,K(b)}function A(b,j){for(var ie=0;0<j--;)ie|=B(b,128)<<j;return ie}function I(b,j){var ie=A(b,j);return q(b)?-ie:ie}function ee(b,j,ie,me){var _e,Ee=0;for(e(b!=null),e(j!=null),e(4294967288>me),b.Sb=me,b.Ra=0,b.u=0,b.h=0,4<me&&(me=4),_e=0;_e<me;++_e)Ee+=j[ie+_e]<<8*_e;b.Ra=Ee,b.bb=me,b.oa=j,b.pa=ie}function Z(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<zd-8>>>0,++b.bb,b.u-=8;O(b)&&(b.h=1,b.u=0)}function X(b,j){if(e(0<=j),!b.h&&j<=Vd){var ie=E(b)&jd[j];return b.u+=j,Z(b),ie}return b.h=1,b.u=0}function se(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function U(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function E(b){return b.Ra>>>(b.u&zd-1)>>>0}function O(b){return e(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>zd}function L(b,j){b.u=j,b.h=O(b)}function G(b){b.u>=nh&&(e(b.u>=nh),Z(b))}function K(b){e(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(e(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function q(b){return A(b,1)}function B(b,j){var ie=b.Ca;0>b.b&&K(b);var me=b.b,_e=ie*j>>>8,Ee=(b.I>>>me>_e)+0;for(Ee?(ie-=_e,b.I-=_e+1<<me>>>0):ie=_e+1,me=ie,_e=0;256<=me;)_e+=8,me>>=8;return me=7^_e+To[me],b.b-=me,b.Ca=(ie<<me)-1,Ee}function H(b,j,ie){b[j+0]=ie>>24&255,b[j+1]=ie>>16&255,b[j+2]=ie>>8&255,b[j+3]=ie>>0&255}function Y(b,j){return b[j+0]<<0|b[j+1]<<8}function te(b,j){return Y(b,j)|b[j+2]<<16}function oe(b,j){return Y(b,j)|Y(b,j+2)<<16}function pe(b,j){var ie=1<<j;return e(b!=null),e(0<j),b.X=o(ie),b.X==null?0:(b.Mb=32-j,b.Xa=j,1)}function ne(b,j){e(b!=null),e(j!=null),e(b.Xa==j.Xa),n(j.X,0,b.X,0,1<<j.Xa)}function Q(){this.X=[],this.Xa=this.Mb=0}function ce(b,j,ie,me){e(ie!=null),e(me!=null);var _e=ie[0],Ee=me[0];return _e==0&&(_e=(b*Ee+j/2)/j),Ee==0&&(Ee=(j*_e+b/2)/b),0>=_e||0>=Ee?0:(ie[0]=_e,me[0]=Ee,1)}function ue(b,j){return b+(1<<j)-1>>>j}function de(b,j){return((4278255360&b)+(4278255360&j)>>>0&4278255360)+((16711935&b)+(16711935&j)>>>0&16711935)>>>0}function ge(b,j){k[j]=function(ie,me,_e,Ee,Re,Me,ze){var Ye;for(Ye=0;Ye<Re;++Ye){var nt=k[b](Me[ze+Ye-1],_e,Ee+Ye);Me[ze+Ye]=de(ie[me+Ye],nt)}}}function ye(){this.ud=this.hd=this.jd=0}function fe(b,j){return((4278124286&(b^j))>>>1)+(b&j)>>>0}function Se(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function qe(b,j){return Se(b+(b-j+.5>>1))}function Oe(b,j,ie){return Math.abs(j-ie)-Math.abs(b-ie)}function Ie(b,j,ie,me,_e,Ee,Re){for(me=Ee[Re-1],ie=0;ie<_e;++ie)Ee[Re+ie]=me=de(b[j+ie],me)}function Be(b,j,ie,me,_e){var Ee;for(Ee=0;Ee<ie;++Ee){var Re=b[j+Ee],Me=Re>>8&255,ze=16711935&(ze=(ze=16711935&Re)+((Me<<16)+Me));me[_e+Ee]=(4278255360&Re)+ze>>>0}}function ke(b,j){j.jd=b>>0&255,j.hd=b>>8&255,j.ud=b>>16&255}function Ge(b,j,ie,me,_e,Ee){var Re;for(Re=0;Re<me;++Re){var Me=j[ie+Re],ze=Me>>>8,Ye=Me,nt=255&(nt=(nt=Me>>>16)+((b.jd<<24>>24)*(ze<<24>>24)>>>5));Ye=255&(Ye=(Ye=Ye+((b.hd<<24>>24)*(ze<<24>>24)>>>5))+((b.ud<<24>>24)*(nt<<24>>24)>>>5)),_e[Ee+Re]=(4278255360&Me)+(nt<<16)+Ye}}function et(b,j,ie,me,_e){k[j]=function(Ee,Re,Me,ze,Ye,nt,ut,ht,lt){for(ze=ut;ze<ht;++ze)for(ut=0;ut<lt;++ut)Ye[nt++]=_e(Me[me(Ee[Re++])])},k[b]=function(Ee,Re,Me,ze,Ye,nt,ut){var ht=8>>Ee.b,lt=Ee.Ea,It=Ee.K[0],xt=Ee.w;if(8>ht)for(Ee=(1<<Ee.b)-1,xt=(1<<ht)-1;Re<Me;++Re){var it,ot=0;for(it=0;it<lt;++it)it&Ee||(ot=me(ze[Ye++])),nt[ut++]=_e(It[ot&xt]),ot>>=ht}else k["VP8LMapColor"+ie](ze,Ye,It,xt,nt,ut,Re,Me,lt)}}function ve(b,j,ie,me,_e){for(ie=j+ie;j<ie;){var Ee=b[j++];me[_e++]=Ee>>16&255,me[_e++]=Ee>>8&255,me[_e++]=Ee>>0&255}}function De(b,j,ie,me,_e){for(ie=j+ie;j<ie;){var Ee=b[j++];me[_e++]=Ee>>16&255,me[_e++]=Ee>>8&255,me[_e++]=Ee>>0&255,me[_e++]=Ee>>24&255}}function He(b,j,ie,me,_e){for(ie=j+ie;j<ie;){var Ee=(Re=b[j++])>>16&240|Re>>12&15,Re=Re>>0&240|Re>>28&15;me[_e++]=Ee,me[_e++]=Re}}function Je(b,j,ie,me,_e){for(ie=j+ie;j<ie;){var Ee=(Re=b[j++])>>16&248|Re>>13&7,Re=Re>>5&224|Re>>3&31;me[_e++]=Ee,me[_e++]=Re}}function Le(b,j,ie,me,_e){for(ie=j+ie;j<ie;){var Ee=b[j++];me[_e++]=Ee>>0&255,me[_e++]=Ee>>8&255,me[_e++]=Ee>>16&255}}function Te(b,j,ie,me,_e,Ee){if(Ee==0)for(ie=j+ie;j<ie;)H(me,((Ee=b[j++])[0]>>24|Ee[1]>>8&65280|Ee[2]<<8&16711680|Ee[3]<<24)>>>0),_e+=32;else n(me,_e,b,j,ie)}function he(b,j){k[j][0]=k[b+"0"],k[j][1]=k[b+"1"],k[j][2]=k[b+"2"],k[j][3]=k[b+"3"],k[j][4]=k[b+"4"],k[j][5]=k[b+"5"],k[j][6]=k[b+"6"],k[j][7]=k[b+"7"],k[j][8]=k[b+"8"],k[j][9]=k[b+"9"],k[j][10]=k[b+"10"],k[j][11]=k[b+"11"],k[j][12]=k[b+"12"],k[j][13]=k[b+"13"],k[j][14]=k[b+"0"],k[j][15]=k[b+"0"]}function Ne(b){return b==Lg||b==$g||b==ff||b==Fg}function rt(){this.eb=[],this.size=this.A=this.fb=0}function re(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ue(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new rt,this.f.kb=new re,this.sd=null}function we(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function xe(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function je(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function $e(b,j){var ie=b.T,me=j.ba.f.RGBA,_e=me.eb,Ee=me.fb+b.ka*me.A,Re=hs[j.ba.S],Me=b.y,ze=b.O,Ye=b.f,nt=b.N,ut=b.ea,ht=b.W,lt=j.cc,It=j.dc,xt=j.Mc,it=j.Nc,ot=b.ka,Et=b.ka+b.T,Lt=b.U,Tt=Lt+1>>1;for(ot==0?Re(Me,ze,null,null,Ye,nt,ut,ht,Ye,nt,ut,ht,_e,Ee,null,null,Lt):(Re(j.ec,j.fc,Me,ze,lt,It,xt,it,Ye,nt,ut,ht,_e,Ee-me.A,_e,Ee,Lt),++ie);ot+2<Et;ot+=2)lt=Ye,It=nt,xt=ut,it=ht,nt+=b.Rc,ht+=b.Rc,Ee+=2*me.A,Re(Me,(ze+=2*b.fa)-b.fa,Me,ze,lt,It,xt,it,Ye,nt,ut,ht,_e,Ee-me.A,_e,Ee,Lt);return ze+=b.fa,b.j+Et<b.o?(n(j.ec,j.fc,Me,ze,Lt),n(j.cc,j.dc,Ye,nt,Tt),n(j.Mc,j.Nc,ut,ht,Tt),ie--):1&Et||Re(Me,ze,null,null,Ye,nt,ut,ht,Ye,nt,ut,ht,_e,Ee+me.A,null,null,Lt),ie}function ft(b,j,ie){var me=b.F,_e=[b.J];if(me!=null){var Ee=b.U,Re=j.ba.S,Me=Re==pf||Re==ff;j=j.ba.f.RGBA;var ze=[0],Ye=b.ka;ze[0]=b.T,b.Kb&&(Ye==0?--ze[0]:(--Ye,_e[0]-=b.width),b.j+b.ka+b.T==b.o&&(ze[0]=b.o-b.j-Ye));var nt=j.eb;Ye=j.fb+Ye*j.A,b=qn(me,_e[0],b.width,Ee,ze,nt,Ye+(Me?0:3),j.A),e(ie==ze),b&&Ne(Re)&&ds(nt,Ye,Me,Ee,ze,j.A)}return 0}function ct(b){var j=b.ma,ie=j.ba.S,me=11>ie,_e=ie==uf||ie==hf||ie==pf||ie==Dg||ie==12||Ne(ie);if(j.memory=null,j.Ib=null,j.Jb=null,j.Nd=null,!th(j.Oa,b,_e?11:12))return 0;if(_e&&Ne(ie)&&Mt(),b.da)alert("todo:use_scaling");else{if(me){if(j.Ib=je,b.Kb){if(ie=b.U+1>>1,j.memory=o(b.U+2*ie),j.memory==null)return 0;j.ec=j.memory,j.fc=0,j.cc=j.ec,j.dc=j.fc+b.U,j.Mc=j.cc,j.Nc=j.dc+ie,j.Ib=$e,Mt()}}else alert("todo:EmitYUV");_e&&(j.Jb=ft,me&&at())}if(me&&!q2){for(b=0;256>b;++b)dk[b]=89858*(b-128)+mf>>yf,pk[b]=-22014*(b-128)+mf,hk[b]=-45773*(b-128),uk[b]=113618*(b-128)+mf>>yf;for(b=dh;b<Bg;++b)j=76283*(b-16)+mf>>yf,fk[b-dh]=Cn(j,255),yk[b-dh]=Cn(j+8>>4,15);q2=1}return 1}function yt(b){var j=b.ma,ie=b.U,me=b.T;return e(!(1&b.ka)),0>=ie||0>=me?0:(ie=j.Ib(b,j),j.Jb!=null&&j.Jb(b,j,ie),j.Dc+=ie,1)}function $t(b){b.ma.memory=null}function bt(b,j,ie,me){return X(b,8)!=47?0:(j[0]=X(b,14)+1,ie[0]=X(b,14)+1,me[0]=X(b,1),X(b,3)!=0?0:!b.h)}function Gt(b,j){if(4>b)return b+1;var ie=b-2>>1;return(2+(1&b)<<ie)+X(j,ie)+1}function Wt(b,j){return 120<j?j-120:1<=(ie=((ie=X4[j-1])>>4)*b+(8-(15&ie)))?ie:1;var ie}function Dt(b,j,ie){var me=E(ie),_e=b[j+=255&me].g-8;return 0<_e&&(L(ie,ie.u+8),me=E(ie),j+=b[j].value,j+=me&(1<<_e)-1),L(ie,ie.u+b[j].g),b[j].value}function Kt(b,j,ie){return ie.g+=b.g,ie.value+=b.value<<j>>>0,e(8>=ie.g),b.g}function gt(b,j,ie){var me=b.xc;return e((j=me==0?0:b.vc[b.md*(ie>>me)+(j>>me)])<b.Wb),b.Ya[j]}function St(b,j,ie,me){var _e=b.ab,Ee=b.c*j,Re=b.C;j=Re+j;var Me=ie,ze=me;for(me=b.Ta,ie=b.Ua;0<_e--;){var Ye=b.gc[_e],nt=Re,ut=j,ht=Me,lt=ze,It=(ze=me,Me=ie,Ye.Ea);switch(e(nt<ut),e(ut<=Ye.nc),Ye.hc){case 2:nf(ht,lt,(ut-nt)*It,ze,Me);break;case 0:var xt=nt,it=ut,ot=ze,Et=Me,Lt=(rr=Ye).Ea;xt==0&&(Ng(ht,lt,null,null,1,ot,Et),Ie(ht,lt+1,0,0,Lt-1,ot,Et+1),lt+=Lt,Et+=Lt,++xt);for(var Tt=1<<rr.b,or=Tt-1,Qt=ue(Lt,rr.b),mr=rr.K,rr=rr.w+(xt>>rr.b)*Qt;xt<it;){var mn=mr,An=rr,dn=1;for(ih(ht,lt,ot,Et-Lt,1,ot,Et);dn<Lt;){var Zr=(dn&~or)+Tt;Zr>Lt&&(Zr=Lt),(0,Il[mn[An++]>>8&15])(ht,lt+ +dn,ot,Et+dn-Lt,Zr-dn,ot,Et+dn),dn=Zr}lt+=Lt,Et+=Lt,++xt&or||(rr+=Qt)}ut!=Ye.nc&&n(ze,Me-It,ze,Me+(ut-nt-1)*It,It);break;case 1:for(It=ht,it=lt,Lt=(ht=Ye.Ea)-(Et=ht&~(ot=(lt=1<<Ye.b)-1)),xt=ue(ht,Ye.b),Tt=Ye.K,Ye=Ye.w+(nt>>Ye.b)*xt;nt<ut;){for(or=Tt,Qt=Ye,mr=new ye,rr=it+Et,mn=it+ht;it<rr;)ke(or[Qt++],mr),Bc(mr,It,it,lt,ze,Me),it+=lt,Me+=lt;it<mn&&(ke(or[Qt++],mr),Bc(mr,It,it,Lt,ze,Me),it+=Lt,Me+=Lt),++nt&ot||(Ye+=xt)}break;case 3:if(ht==ze&&lt==Me&&0<Ye.b){for(it=ze,ht=It=Me+(ut-nt)*It-(Et=(ut-nt)*ue(Ye.Ea,Ye.b)),lt=ze,ot=Me,xt=[],Et=(Lt=Et)-1;0<=Et;--Et)xt[Et]=lt[ot+Et];for(Et=Lt-1;0<=Et;--Et)it[ht+Et]=xt[Et];as(Ye,nt,ut,ze,It,ze,Me)}else as(Ye,nt,ut,ht,lt,ze,Me)}Me=me,ze=ie}ze!=ie&&n(me,ie,Me,ze,Ee)}function Qe(b,j){var ie=b.V,me=b.Ba+b.c*b.C,_e=j-b.C;if(e(j<=b.l.o),e(16>=_e),0<_e){var Ee=b.l,Re=b.Ta,Me=b.Ua,ze=Ee.width;if(St(b,_e,ie,me),_e=Me=[Me],e((ie=b.C)<(me=j)),e(Ee.v<Ee.va),me>Ee.o&&(me=Ee.o),ie<Ee.j){var Ye=Ee.j-ie;ie=Ee.j,_e[0]+=Ye*ze}if(ie>=me?ie=0:(_e[0]+=4*Ee.v,Ee.ka=ie-Ee.j,Ee.U=Ee.va-Ee.v,Ee.T=me-ie,ie=1),ie){if(Me=Me[0],11>(ie=b.ca).S){var nt=ie.f.RGBA,ut=(me=ie.S,_e=Ee.U,Ee=Ee.T,Ye=nt.eb,nt.A),ht=Ee;for(nt=nt.fb+b.Ma*nt.A;0<ht--;){var lt=Re,It=Me,xt=_e,it=Ye,ot=nt;switch(me){case df:Io(lt,It,xt,it,ot);break;case uf:yo(lt,It,xt,it,ot);break;case Lg:yo(lt,It,xt,it,ot),ds(it,ot,0,xt,1,0);break;case $2:Ma(lt,It,xt,it,ot);break;case hf:Te(lt,It,xt,it,ot,1);break;case $g:Te(lt,It,xt,it,ot,1),ds(it,ot,0,xt,1,0);break;case pf:Te(lt,It,xt,it,ot,0);break;case ff:Te(lt,It,xt,it,ot,0),ds(it,ot,1,xt,1,0);break;case Dg:Nl(lt,It,xt,it,ot);break;case Fg:Nl(lt,It,xt,it,ot),Un(it,ot,xt,1,0);break;case F2:Fa(lt,It,xt,it,ot);break;default:e(0)}Me+=ze,nt+=ut}b.Ma+=Ee}else alert("todo:EmitRescaledRowsYUVA");e(b.Ma<=ie.height)}}b.C=j,e(b.C<=b.i)}function vt(b){var j;if(0<b.ua)return 0;for(j=0;j<b.Wb;++j){var ie=b.Ya[j].G,me=b.Ya[j].H;if(0<ie[1][me[1]+0].g||0<ie[2][me[2]+0].g||0<ie[3][me[3]+0].g)return 0}return 1}function Ft(b,j,ie,me,_e,Ee){if(b.Z!=0){var Re=b.qd,Me=b.rd;for(e($l[b.Z]!=null);j<ie;++j)$l[b.Z](Re,Me,me,_e,me,_e,Ee),Re=me,Me=_e,_e+=Ee;b.qd=Re,b.rd=Me}}function Pt(b,j){var ie=b.l.ma,me=ie.Z==0||ie.Z==1?b.l.j:b.C;if(me=b.C<me?me:b.C,e(j<=b.l.o),j>me){var _e=b.l.width,Ee=ie.ca,Re=ie.tb+_e*me,Me=b.V,ze=b.Ba+b.c*me,Ye=b.gc;e(b.ab==1),e(Ye[0].hc==3),of(Ye[0],me,j,Me,ze,Ee,Re),Ft(ie,me,j,Ee,Re,_e)}b.C=b.Ma=j}function kt(b,j,ie,me,_e,Ee,Re){var Me=b.$/me,ze=b.$%me,Ye=b.m,nt=b.s,ut=ie+b.$,ht=ut;_e=ie+me*_e;var lt=ie+me*Ee,It=280+nt.ua,xt=b.Pb?Me:16777216,it=0<nt.ua?nt.Wa:null,ot=nt.wc,Et=ut<lt?gt(nt,ze,Me):null;e(b.C<Ee),e(lt<=_e);var Lt=!1;e:for(;;){for(;Lt||ut<lt;){var Tt=0;if(Me>=xt){var or=ut-ie;e((xt=b).Pb),xt.wd=xt.m,xt.xd=or,0<xt.s.ua&&ne(xt.s.Wa,xt.s.vb),xt=Me+J4}if(ze&ot||(Et=gt(nt,ze,Me)),e(Et!=null),Et.Qb&&(j[ut]=Et.qb,Lt=!0),!Lt)if(G(Ye),Et.jc){Tt=Ye,or=j;var Qt=ut,mr=Et.pd[E(Tt)&Ui-1];e(Et.jc),256>mr.g?(L(Tt,Tt.u+mr.g),or[Qt]=mr.value,Tt=0):(L(Tt,Tt.u+mr.g-256),e(256<=mr.value),Tt=mr.value),Tt==0&&(Lt=!0)}else Tt=Dt(Et.G[0],Et.H[0],Ye);if(Ye.h)break;if(Lt||256>Tt){if(!Lt)if(Et.nd)j[ut]=(Et.qb|Tt<<8)>>>0;else{if(G(Ye),Lt=Dt(Et.G[1],Et.H[1],Ye),G(Ye),or=Dt(Et.G[2],Et.H[2],Ye),Qt=Dt(Et.G[3],Et.H[3],Ye),Ye.h)break;j[ut]=(Qt<<24|Lt<<16|Tt<<8|or)>>>0}if(Lt=!1,++ut,++ze>=me&&(ze=0,++Me,Re!=null&&Me<=Ee&&!(Me%16)&&Re(b,Me),it!=null))for(;ht<ut;)Tt=j[ht++],it.X[(506832829*Tt&4294967295)>>>it.Mb]=Tt}else if(280>Tt){if(Tt=Gt(Tt-256,Ye),or=Dt(Et.G[4],Et.H[4],Ye),G(Ye),or=Wt(me,or=Gt(or,Ye)),Ye.h)break;if(ut-ie<or||_e-ut<Tt)break e;for(Qt=0;Qt<Tt;++Qt)j[ut+Qt]=j[ut+Qt-or];for(ut+=Tt,ze+=Tt;ze>=me;)ze-=me,++Me,Re!=null&&Me<=Ee&&!(Me%16)&&Re(b,Me);if(e(ut<=_e),ze&ot&&(Et=gt(nt,ze,Me)),it!=null)for(;ht<ut;)Tt=j[ht++],it.X[(506832829*Tt&4294967295)>>>it.Mb]=Tt}else{if(!(Tt<It))break e;for(Lt=Tt-280,e(it!=null);ht<ut;)Tt=j[ht++],it.X[(506832829*Tt&4294967295)>>>it.Mb]=Tt;Tt=ut,e(!(Lt>>>(or=it).Xa)),j[Tt]=or.X[Lt],Lt=!0}Lt||e(Ye.h==O(Ye))}if(b.Pb&&Ye.h&&ut<_e)e(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&ne(b.s.vb,b.s.Wa);else{if(Ye.h)break e;Re?.(b,Me>Ee?Ee:Me),b.a=0,b.$=ut-ie}return 1}return b.a=3,0}function Yt(b){e(b!=null),b.vc=null,b.yc=null,b.Ya=null;var j=b.Wa;j!=null&&(j.X=null),b.vb=null,e(b!=null)}function nr(){var b=new Od;return b==null?null:(b.a=0,b.xb=B2,he("Predictor","VP8LPredictors"),he("Predictor","VP8LPredictors_C"),he("PredictorAdd","VP8LPredictorsAdd"),he("PredictorAdd","VP8LPredictorsAdd_C"),nf=Be,Bc=Ge,Io=ve,yo=De,Nl=He,Fa=Je,Ma=Le,k.VP8LMapColor32b=Ud,k.VP8LMapColor8b=sf,b)}function cr(b,j,ie,me,_e){var Ee=1,Re=[b],Me=[j],ze=me.m,Ye=me.s,nt=null,ut=0;e:for(;;){if(ie)for(;Ee&&X(ze,1);){var ht=Re,lt=Me,It=me,xt=1,it=It.m,ot=It.gc[It.ab],Et=X(it,2);if(It.Oc&1<<Et)Ee=0;else{switch(It.Oc|=1<<Et,ot.hc=Et,ot.Ea=ht[0],ot.nc=lt[0],ot.K=[null],++It.ab,e(4>=It.ab),Et){case 0:case 1:ot.b=X(it,3)+2,xt=cr(ue(ot.Ea,ot.b),ue(ot.nc,ot.b),0,It,ot.K),ot.K=ot.K[0];break;case 3:var Lt,Tt=X(it,8)+1,or=16<Tt?0:4<Tt?1:2<Tt?2:3;if(ht[0]=ue(ot.Ea,or),ot.b=or,Lt=xt=cr(Tt,1,0,It,ot.K)){var Qt,mr=Tt,rr=ot,mn=1<<(8>>rr.b),An=o(mn);if(An==null)Lt=0;else{var dn=rr.K[0],Zr=rr.w;for(An[0]=rr.K[0][0],Qt=1;Qt<1*mr;++Qt)An[Qt]=de(dn[Zr+Qt],An[Qt-1]);for(;Qt<4*mn;++Qt)An[Qt]=0;rr.K[0]=null,rr.K[0]=An,Lt=1}}xt=Lt;break;case 2:break;default:e(0)}Ee=xt}}if(Re=Re[0],Me=Me[0],Ee&&X(ze,1)&&!(Ee=1<=(ut=X(ze,4))&&11>=ut)){me.a=3;break e}var Mn;if(Mn=Ee)t:{var Ln,qr,fi,No=me,yi=Re,Ro=Me,kn=ut,Wo=ie,Go=No.m,Di=No.s,qi=[null],go=1,ps=0,la=Z4[kn];r:for(;;){if(Wo&&X(Go,1)){var Li=X(Go,3)+2,Va=ue(yi,Li),qc=ue(Ro,Li),Kd=Va*qc;if(!cr(Va,qc,0,No,qi))break r;for(qi=qi[0],Di.xc=Li,Ln=0;Ln<Kd;++Ln){var Fl=qi[Ln]>>8&65535;qi[Ln]=Fl,Fl>=go&&(go=Fl+1)}}if(Go.h)break r;for(qr=0;5>qr;++qr){var ri=M2[qr];!qr&&0<kn&&(ri+=1<<kn),ps<ri&&(ps=ri)}var jg=s(go*la,_),G2=go,K2=s(G2,z);if(K2==null)var vf=null;else e(65536>=G2),vf=K2;var uh=o(ps);if(vf==null||uh==null||jg==null){No.a=1;break r}var bf=jg;for(Ln=fi=0;Ln<go;++Ln){var Bs=vf[Ln],Yd=Bs.G,Xd=Bs.H,Y2=0,Pf=1,X2=0;for(qr=0;5>qr;++qr){ri=M2[qr],Yd[qr]=bf,Xd[qr]=fi,!qr&&0<kn&&(ri+=1<<kn);i:{var xf,Vg=ri,Sf=No,hh=uh,vk=bf,bk=fi,zg=0,Ml=Sf.m,Pk=X(Ml,1);if(i(hh,0,0,Vg),Pk){var xk=X(Ml,1)+1,Sk=X(Ml,1),Z2=X(Ml,Sk==0?1:8);hh[Z2]=1,xk==2&&(hh[Z2=X(Ml,8)]=1);var wf=1}else{var J2=o(19),Q2=X(Ml,4)+4;if(19<Q2){Sf.a=3;var Cf=0;break i}for(xf=0;xf<Q2;++xf)J2[Y4[xf]]=X(Ml,3);var Ug=void 0,ph=void 0,e5=Sf,wk=J2,_f=Vg,t5=hh,qg=0,Ol=e5.m,r5=8,n5=s(128,_);n:for(;w(n5,0,7,wk,19);){if(X(Ol,1)){var Ck=2+2*X(Ol,3);if((Ug=2+X(Ol,Ck))>_f)break n}else Ug=_f;for(ph=0;ph<_f&&Ug--;){G(Ol);var i5=n5[0+(127&E(Ol))];L(Ol,Ol.u+i5.g);var Zd=i5.value;if(16>Zd)t5[ph++]=Zd,Zd!=0&&(r5=Zd);else{var _k=Zd==16,o5=Zd-16,Ak=G4[o5],s5=X(Ol,W4[o5])+Ak;if(ph+s5>_f)break n;for(var kk=_k?r5:0;0<s5--;)t5[ph++]=kk}}qg=1;break n}qg||(e5.a=3),wf=qg}(wf=wf&&!Ml.h)&&(zg=w(vk,bk,8,hh,Vg)),wf&&zg!=0?Cf=zg:(Sf.a=3,Cf=0)}if(Cf==0)break r;if(Pf&&K4[qr]==1&&(Pf=bf[fi].g==0),Y2+=bf[fi].g,fi+=Cf,3>=qr){var fh,Hg=uh[0];for(fh=1;fh<ri;++fh)uh[fh]>Hg&&(Hg=uh[fh]);X2+=Hg}}if(Bs.nd=Pf,Bs.Qb=0,Pf&&(Bs.qb=(Yd[3][Xd[3]+0].value<<24|Yd[1][Xd[1]+0].value<<16|Yd[2][Xd[2]+0].value)>>>0,Y2==0&&256>Yd[0][Xd[0]+0].value&&(Bs.Qb=1,Bs.qb+=Yd[0][Xd[0]+0].value<<8)),Bs.jc=!Bs.Qb&&6>X2,Bs.jc){var Af,za=Bs;for(Af=0;Af<Ui;++Af){var Bl=Af,jl=za.pd[Bl],kf=za.G[0][za.H[0]+Bl];256<=kf.value?(jl.g=kf.g+256,jl.value=kf.value):(jl.g=0,jl.value=0,Bl>>=Kt(kf,8,jl),Bl>>=Kt(za.G[1][za.H[1]+Bl],16,jl),Bl>>=Kt(za.G[2][za.H[2]+Bl],0,jl),Kt(za.G[3][za.H[3]+Bl],24,jl))}}}Di.vc=qi,Di.Wb=go,Di.Ya=vf,Di.yc=jg,Mn=1;break t}Mn=0}if(!(Ee=Mn)){me.a=3;break e}if(0<ut){if(Ye.ua=1<<ut,!pe(Ye.Wa,ut)){me.a=1,Ee=0;break e}}else Ye.ua=0;var Wg=me,a5=Re,Ek=Me,Gg=Wg.s,Kg=Gg.xc;if(Wg.c=a5,Wg.i=Ek,Gg.md=ue(a5,Kg),Gg.wc=Kg==0?-1:(1<<Kg)-1,ie){me.xb=ok;break e}if((nt=o(Re*Me))==null){me.a=1,Ee=0;break e}Ee=(Ee=kt(me,nt,0,Re,Me,Me,null))&&!ze.h;break e}return Ee?(_e!=null?_e[0]=nt:(e(nt==null),e(ie)),me.$=0,ie||Yt(Ye)):Yt(Ye),Ee}function on(b,j){var ie=b.c*b.i,me=ie+j+16*j;return e(b.c<=j),b.V=o(me),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+ie+j,1)}function Dr(b,j){var ie=b.C,me=j-ie,_e=b.V,Ee=b.Ba+b.c*ie;for(e(j<=b.l.o);0<me;){var Re=16<me?16:me,Me=b.l.ma,ze=b.l.width,Ye=ze*Re,nt=Me.ca,ut=Me.tb+ze*ie,ht=b.Ta,lt=b.Ua;St(b,Re,_e,Ee),li(ht,lt,nt,ut,Ye),Ft(Me,ie,ie+Re,nt,ut,ze),me-=Re,_e+=Re*b.c,ie+=Re}e(ie==j),b.C=b.Ma=j}function lr(){this.ub=this.yd=this.td=this.Rb=0}function Zt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function yr(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Lr(){this.Yb=function(){var b=[];return function j(ie,me,_e){for(var Ee=_e[me],Re=0;Re<Ee&&(ie.push(_e.length>me+1?[]:0),!(_e.length<me+1));Re++)j(ie[Re],me+1,_e)}(b,0,[3,11]),b}()}function Wr(){this.jb=o(3),this.Wc=a([4,8],Lr),this.Xc=a([4,17],Lr)}function Ar(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function fr(){this.ld=this.La=this.dd=this.tc=0}function Yr(){this.Na=this.la=0}function br(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function zn(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Bi(){this.uc=this.M=this.Nb=0,this.wa=Array(new fr),this.Y=0,this.ya=Array(new zn),this.aa=0,this.l=new Ri}function Ni(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Ao(){this.cb=this.a=0,this.sc="",this.m=new se,this.Od=new lr,this.Kc=new Zt,this.ed=new Ar,this.Qa=new yr,this.Ic=this.$c=this.Aa=0,this.D=new Bi,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,se),this.ia=0,this.pb=s(4,br),this.Pa=new Wr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ni),this.Hd=0,this.rb=Array(new Yr),this.sb=0,this.wa=Array(new fr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new zn),this.L=this.aa=0,this.gd=a([4,2],fr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ri(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function os(){var b=new Ao;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,ch||(ch=Es)),b}function xn(b,j,ie){return b.a==0&&(b.a=j,b.sc=ie,b.cb=0),0}function ko(b,j,ie){return 3<=ie&&b[j+0]==157&&b[j+1]==1&&b[j+2]==42}function ks(b,j){if(b==null)return 0;if(b.a=0,b.sc="OK",j==null)return xn(b,2,"null VP8Io passed to VP8GetHeaders()");var ie=j.data,me=j.w,_e=j.ha;if(4>_e)return xn(b,7,"Truncated header.");var Ee=ie[me+0]|ie[me+1]<<8|ie[me+2]<<16,Re=b.Od;if(Re.Rb=!(1&Ee),Re.td=Ee>>1&7,Re.yd=Ee>>4&1,Re.ub=Ee>>5,3<Re.td)return xn(b,3,"Incorrect keyframe parameters.");if(!Re.yd)return xn(b,4,"Frame not displayable.");me+=3,_e-=3;var Me=b.Kc;if(Re.Rb){if(7>_e)return xn(b,7,"cannot parse picture header");if(!ko(ie,me,_e))return xn(b,3,"Bad code word");Me.c=16383&(ie[me+4]<<8|ie[me+3]),Me.Td=ie[me+4]>>6,Me.i=16383&(ie[me+6]<<8|ie[me+5]),Me.Ud=ie[me+6]>>6,me+=7,_e-=7,b.za=Me.c+15>>4,b.Ub=Me.i+15>>4,j.width=Me.c,j.height=Me.i,j.Da=0,j.j=0,j.v=0,j.va=j.width,j.o=j.height,j.da=0,j.ib=j.width,j.hb=j.height,j.U=j.width,j.T=j.height,i((Ee=b.Pa).jb,0,255,Ee.jb.length),e((Ee=b.Qa)!=null),Ee.Cb=0,Ee.Bb=0,Ee.Fb=1,i(Ee.Zb,0,0,Ee.Zb.length),i(Ee.Lb,0,0,Ee.Lb)}if(Re.ub>_e)return xn(b,7,"bad partition length");W(Ee=b.m,ie,me,Re.ub),me+=Re.ub,_e-=Re.ub,Re.Rb&&(Me.Ld=q(Ee),Me.Kd=q(Ee)),Me=b.Qa;var ze,Ye=b.Pa;if(e(Ee!=null),e(Me!=null),Me.Cb=q(Ee),Me.Cb){if(Me.Bb=q(Ee),q(Ee)){for(Me.Fb=q(Ee),ze=0;4>ze;++ze)Me.Zb[ze]=q(Ee)?I(Ee,7):0;for(ze=0;4>ze;++ze)Me.Lb[ze]=q(Ee)?I(Ee,6):0}if(Me.Bb)for(ze=0;3>ze;++ze)Ye.jb[ze]=q(Ee)?A(Ee,8):255}else Me.Bb=0;if(Ee.Ka)return xn(b,3,"cannot parse segment header");if((Me=b.ed).zd=q(Ee),Me.Tb=A(Ee,6),Me.wb=A(Ee,3),Me.Pc=q(Ee),Me.Pc&&q(Ee)){for(Ye=0;4>Ye;++Ye)q(Ee)&&(Me.vd[Ye]=I(Ee,6));for(Ye=0;4>Ye;++Ye)q(Ee)&&(Me.od[Ye]=I(Ee,6))}if(b.L=Me.Tb==0?0:Me.zd?1:2,Ee.Ka)return xn(b,3,"cannot parse filter header");var nt=_e;if(_e=ze=me,me=ze+nt,Me=nt,b.Xb=(1<<A(b.m,2))-1,nt<3*(Ye=b.Xb))ie=7;else{for(ze+=3*Ye,Me-=3*Ye,nt=0;nt<Ye;++nt){var ut=ie[_e+0]|ie[_e+1]<<8|ie[_e+2]<<16;ut>Me&&(ut=Me),W(b.Jc[+nt],ie,ze,ut),ze+=ut,Me-=ut,_e+=3}W(b.Jc[+Ye],ie,ze,Me),ie=ze<me?0:5}if(ie!=0)return xn(b,ie,"cannot parse partitions");for(ie=A(ze=b.m,7),_e=q(ze)?I(ze,4):0,me=q(ze)?I(ze,4):0,Me=q(ze)?I(ze,4):0,Ye=q(ze)?I(ze,4):0,ze=q(ze)?I(ze,4):0,nt=b.Qa,ut=0;4>ut;++ut){if(nt.Cb){var ht=nt.Zb[ut];nt.Fb||(ht+=ie)}else{if(0<ut){b.pb[ut]=b.pb[0];continue}ht=ie}var lt=b.pb[ut];lt.Sc[0]=Mg[Cn(ht+_e,127)],lt.Sc[1]=Og[Cn(ht+0,127)],lt.Eb[0]=2*Mg[Cn(ht+me,127)],lt.Eb[1]=101581*Og[Cn(ht+Me,127)]>>16,8>lt.Eb[1]&&(lt.Eb[1]=8),lt.Qc[0]=Mg[Cn(ht+Ye,117)],lt.Qc[1]=Og[Cn(ht+ze,127)],lt.lc=ht+ze}if(!Re.Rb)return xn(b,4,"Not a key frame.");for(q(Ee),Re=b.Pa,ie=0;4>ie;++ie){for(_e=0;8>_e;++_e)for(me=0;3>me;++me)for(Me=0;11>Me;++Me)Ye=B(Ee,nk[ie][_e][me][Me])?A(Ee,8):tk[ie][_e][me][Me],Re.Wc[ie][_e].Yb[me][Me]=Ye;for(_e=0;17>_e;++_e)Re.Xc[ie][_e]=Re.Wc[ie][ik[_e]]}return b.kc=q(Ee),b.kc&&(b.Bd=A(Ee,8)),b.cb=1}function Es(b,j,ie,me,_e,Ee,Re){var Me=j[_e].Yb[ie];for(ie=0;16>_e;++_e){if(!B(b,Me[ie+0]))return _e;for(;!B(b,Me[ie+1]);)if(Me=j[++_e].Yb[0],ie=0,_e==16)return 16;var ze=j[_e+1].Yb;if(B(b,Me[ie+2])){var Ye=b,nt=0;if(B(Ye,(ht=Me)[(ut=ie)+3]))if(B(Ye,ht[ut+6])){for(Me=0,ut=2*(nt=B(Ye,ht[ut+8]))+(ht=B(Ye,ht[ut+9+nt])),nt=0,ht=Q4[ut];ht[Me];++Me)nt+=nt+B(Ye,ht[Me]);nt+=3+(8<<ut)}else B(Ye,ht[ut+7])?(nt=7+2*B(Ye,165),nt+=B(Ye,145)):nt=5+B(Ye,159);else nt=B(Ye,ht[ut+4])?3+B(Ye,ht[ut+5]):2;Me=ze[2]}else nt=1,Me=ze[1];ze=Re+ek[_e],0>(Ye=b).b&&K(Ye);var ut,ht=Ye.b,lt=(ut=Ye.Ca>>1)-(Ye.I>>ht)>>31;--Ye.b,Ye.Ca+=lt,Ye.Ca|=1,Ye.I-=(ut+1&lt)<<ht,Ee[ze]=((nt^lt)-lt)*me[(0<_e)+0]}return 16}function Nr(b){var j=b.rb[b.sb-1];j.la=0,j.Na=0,i(b.zc,0,0,b.zc.length),b.ja=0}function fn(b,j){if(b==null)return 0;if(j==null)return xn(b,2,"NULL VP8Io parameter in VP8Decode().");if(!b.cb&&!ks(b,j))return 0;if(e(b.cb),j.ac==null||j.ac(j)){j.ob&&(b.L=0);var ie=gf[b.L];if(b.L==2?(b.yb=0,b.zb=0):(b.yb=j.v-ie>>4,b.zb=j.j-ie>>4,0>b.yb&&(b.yb=0),0>b.zb&&(b.zb=0)),b.Va=j.o+15+ie>>4,b.Hb=j.va+15+ie>>4,b.Hb>b.za&&(b.Hb=b.za),b.Va>b.Ub&&(b.Va=b.Ub),0<b.L){var me=b.ed;for(ie=0;4>ie;++ie){var _e;if(b.Qa.Cb){var Ee=b.Qa.Lb[ie];b.Qa.Fb||(Ee+=me.Tb)}else Ee=me.Tb;for(_e=0;1>=_e;++_e){var Re=b.gd[ie][_e],Me=Ee;if(me.Pc&&(Me+=me.vd[0],_e&&(Me+=me.od[0])),0<(Me=0>Me?0:63<Me?63:Me)){var ze=Me;0<me.wb&&(ze=4<me.wb?ze>>2:ze>>1)>9-me.wb&&(ze=9-me.wb),1>ze&&(ze=1),Re.dd=ze,Re.tc=2*Me+ze,Re.ld=40<=Me?2:15<=Me?1:0}else Re.tc=0;Re.La=_e}}}ie=0}else xn(b,6,"Frame setup failed"),ie=b.a;if(ie=ie==0){if(ie){b.$c=0,0<b.Aa||(b.Ic=gk);e:{ie=b.Ic,me=4*(ze=b.za);var Ye=32*ze,nt=ze+1,ut=0<b.L?ze*(0<b.Aa?2:1):0,ht=(b.Aa==2?2:1)*ze;if((Re=me+832+(_e=3*(16*ie+gf[b.L])/2*Ye)+(Ee=b.Fa!=null&&0<b.Fa.length?b.Kc.c*b.Kc.i:0))!=Re)ie=0;else{if(Re>b.Vb){if(b.Vb=0,b.Ec=o(Re),b.Fc=0,b.Ec==null){ie=xn(b,1,"no memory during frame initialization.");break e}b.Vb=Re}Re=b.Ec,Me=b.Fc,b.Ac=Re,b.Bc=Me,Me+=me,b.Gd=s(Ye,Ni),b.Hd=0,b.rb=s(nt+1,Yr),b.sb=1,b.wa=ut?s(ut,fr):null,b.Y=0,b.D.Nb=0,b.D.wa=b.wa,b.D.Y=b.Y,0<b.Aa&&(b.D.Y+=ze),e(!0),b.oc=Re,b.pc=Me,Me+=832,b.ya=s(ht,zn),b.aa=0,b.D.ya=b.ya,b.D.aa=b.aa,b.Aa==2&&(b.D.aa+=ze),b.R=16*ze,b.B=8*ze,ze=(Ye=gf[b.L])*b.R,Ye=Ye/2*b.B,b.sa=Re,b.ta=Me+ze,b.qa=b.sa,b.ra=b.ta+16*ie*b.R+Ye,b.Ha=b.qa,b.Ia=b.ra+8*ie*b.B+Ye,b.$c=0,Me+=_e,b.mb=Ee?Re:null,b.nb=Ee?Me:null,e(Me+Ee<=b.Fc+b.Vb),Nr(b),i(b.Ac,b.Bc,0,me),ie=1}}if(ie){if(j.ka=0,j.y=b.sa,j.O=b.ta,j.f=b.qa,j.N=b.ra,j.ea=b.Ha,j.Vd=b.Ia,j.fa=b.R,j.Rc=b.B,j.F=null,j.J=0,!lf){for(ie=-255;255>=ie;++ie)Si[255+ie]=0>ie?-ie:ie;for(ie=-1020;1020>=ie;++ie)Ba[1020+ie]=-128>ie?-128:127<ie?127:ie;for(ie=-112;112>=ie;++ie)lh[112+ie]=-16>ie?-16:15<ie?15:ie;for(ie=-255;510>=ie;++ie)Gd[255+ie]=0>ie?0:255<ie?255:ie;lf=1}qd=Is,Oa=Eo,oh=Vo,mo=yn,ls=Ts,ai=fo,Hd=Sl,af=$s,sh=Cl,jc=Oc,Vc=wl,Rl=Da,zc=_l,Wd=ia,Uc=Ra,Dl=qo,ah=xi,cs=Md,Os[0]=ss,Os[1]=Ju,Os[2]=ra,Os[3]=eh,Os[4]=$d,Os[5]=vl,Os[6]=zo,Os[7]=Rc,Os[8]=Pl,Os[9]=bl,Ll[0]=ta,Ll[1]=Qu,Ll[2]=Rs,Ll[3]=ml,Ll[4]=Wn,Ll[5]=Ld,Ll[6]=Nc,ja[0]=Ls,ja[1]=Dd,ja[2]=Fd,ja[3]=Ds,ja[4]=wn,ja[5]=Dc,ja[6]=Lc,ie=1}else ie=0}ie&&(ie=function(lt,It){for(lt.M=0;lt.M<lt.Va;++lt.M){var xt,it=lt.Jc[lt.M&lt.Xb],ot=lt.m,Et=lt;for(xt=0;xt<Et.za;++xt){var Lt=ot,Tt=Et,or=Tt.Ac,Qt=Tt.Bc+4*xt,mr=Tt.zc,rr=Tt.ya[Tt.aa+xt];if(Tt.Qa.Bb?rr.$b=B(Lt,Tt.Pa.jb[0])?2+B(Lt,Tt.Pa.jb[2]):B(Lt,Tt.Pa.jb[1]):rr.$b=0,Tt.kc&&(rr.Ad=B(Lt,Tt.Bd)),rr.Za=!B(Lt,145)+0,rr.Za){var mn=rr.Ob,An=0;for(Tt=0;4>Tt;++Tt){var dn,Zr=mr[0+Tt];for(dn=0;4>dn;++dn){Zr=rk[or[Qt+dn]][Zr];for(var Mn=O2[B(Lt,Zr[0])];0<Mn;)Mn=O2[2*Mn+B(Lt,Zr[Mn])];Zr=-Mn,or[Qt+dn]=Zr}n(mn,An,or,Qt,4),An+=4,mr[0+Tt]=Zr}}else Zr=B(Lt,156)?B(Lt,128)?1:3:B(Lt,163)?2:0,rr.Ob[0]=Zr,i(or,Qt,Zr,4),i(mr,0,Zr,4);rr.Dd=B(Lt,142)?B(Lt,114)?B(Lt,183)?1:3:2:0}if(Et.m.Ka)return xn(lt,7,"Premature end-of-partition0 encountered.");for(;lt.ja<lt.za;++lt.ja){if(Et=it,Lt=(ot=lt).rb[ot.sb-1],or=ot.rb[ot.sb+ot.ja],xt=ot.ya[ot.aa+ot.ja],Qt=ot.kc?xt.Ad:0)Lt.la=or.la=0,xt.Za||(Lt.Na=or.Na=0),xt.Hc=0,xt.Gc=0,xt.ia=0;else{var Ln,qr;if(Lt=or,or=Et,Qt=ot.Pa.Xc,mr=ot.ya[ot.aa+ot.ja],rr=ot.pb[mr.$b],Tt=mr.ad,mn=0,An=ot.rb[ot.sb-1],Zr=dn=0,i(Tt,mn,0,384),mr.Za)var fi=0,No=Qt[3];else{Mn=o(16);var yi=Lt.Na+An.Na;if(yi=ch(or,Qt[1],yi,rr.Eb,0,Mn,0),Lt.Na=An.Na=(0<yi)+0,1<yi)qd(Mn,0,Tt,mn);else{var Ro=Mn[0]+3>>3;for(Mn=0;256>Mn;Mn+=16)Tt[mn+Mn]=Ro}fi=1,No=Qt[0]}var kn=15&Lt.la,Wo=15&An.la;for(Mn=0;4>Mn;++Mn){var Go=1&Wo;for(Ro=qr=0;4>Ro;++Ro)kn=kn>>1|(Go=(yi=ch(or,No,yi=Go+(1&kn),rr.Sc,fi,Tt,mn))>fi)<<7,qr=qr<<2|(3<yi?3:1<yi?2:Tt[mn+0]!=0),mn+=16;kn>>=4,Wo=Wo>>1|Go<<7,dn=(dn<<8|qr)>>>0}for(No=kn,fi=Wo>>4,Ln=0;4>Ln;Ln+=2){for(qr=0,kn=Lt.la>>4+Ln,Wo=An.la>>4+Ln,Mn=0;2>Mn;++Mn){for(Go=1&Wo,Ro=0;2>Ro;++Ro)yi=Go+(1&kn),kn=kn>>1|(Go=0<(yi=ch(or,Qt[2],yi,rr.Qc,0,Tt,mn)))<<3,qr=qr<<2|(3<yi?3:1<yi?2:Tt[mn+0]!=0),mn+=16;kn>>=2,Wo=Wo>>1|Go<<5}Zr|=qr<<4*Ln,No|=kn<<4<<Ln,fi|=(240&Wo)<<Ln}Lt.la=No,An.la=fi,mr.Hc=dn,mr.Gc=Zr,mr.ia=43690&Zr?0:rr.ia,Qt=!(dn|Zr)}if(0<ot.L&&(ot.wa[ot.Y+ot.ja]=ot.gd[xt.$b][xt.Za],ot.wa[ot.Y+ot.ja].La|=!Qt),Et.Ka)return xn(lt,7,"Premature end-of-file encountered.")}if(Nr(lt),ot=It,Et=1,xt=(it=lt).D,Lt=0<it.L&&it.M>=it.zb&&it.M<=it.Va,it.Aa==0)e:{if(xt.M=it.M,xt.uc=Lt,sa(it,xt),Et=1,xt=(qr=it.D).Nb,Lt=(Zr=gf[it.L])*it.R,or=Zr/2*it.B,Mn=16*xt*it.R,Ro=8*xt*it.B,Qt=it.sa,mr=it.ta-Lt+Mn,rr=it.qa,Tt=it.ra-or+Ro,mn=it.Ha,An=it.Ia-or+Ro,Wo=(kn=qr.M)==0,dn=kn>=it.Va-1,it.Aa==2&&sa(it,qr),qr.uc)for(Go=(yi=it).D.M,e(yi.D.uc),qr=yi.yb;qr<yi.Hb;++qr){fi=qr,No=Go;var Di=(qi=(ri=yi).D).Nb;Ln=ri.R;var qi=qi.wa[qi.Y+fi],go=ri.sa,ps=ri.ta+16*Di*Ln+16*fi,la=qi.dd,Li=qi.tc;if(Li!=0)if(e(3<=Li),ri.L==1)0<fi&&Dl(go,ps,Ln,Li+4),qi.La&&cs(go,ps,Ln,Li),0<No&&Uc(go,ps,Ln,Li+4),qi.La&&ah(go,ps,Ln,Li);else{var Va=ri.B,qc=ri.qa,Kd=ri.ra+8*Di*Va+8*fi,Fl=ri.Ha,ri=ri.Ia+8*Di*Va+8*fi;Di=qi.ld,0<fi&&(af(go,ps,Ln,Li+4,la,Di),jc(qc,Kd,Fl,ri,Va,Li+4,la,Di)),qi.La&&(Rl(go,ps,Ln,Li,la,Di),Wd(qc,Kd,Fl,ri,Va,Li,la,Di)),0<No&&(Hd(go,ps,Ln,Li+4,la,Di),sh(qc,Kd,Fl,ri,Va,Li+4,la,Di)),qi.La&&(Vc(go,ps,Ln,Li,la,Di),zc(qc,Kd,Fl,ri,Va,Li,la,Di))}}if(it.ia&&alert("todo:DitherRow"),ot.put!=null){if(qr=16*kn,kn=16*(kn+1),Wo?(ot.y=it.sa,ot.O=it.ta+Mn,ot.f=it.qa,ot.N=it.ra+Ro,ot.ea=it.Ha,ot.W=it.Ia+Ro):(qr-=Zr,ot.y=Qt,ot.O=mr,ot.f=rr,ot.N=Tt,ot.ea=mn,ot.W=An),dn||(kn-=Zr),kn>ot.o&&(kn=ot.o),ot.F=null,ot.J=null,it.Fa!=null&&0<it.Fa.length&&qr<kn&&(ot.J=Tl(it,ot,qr,kn-qr),ot.F=it.mb,ot.F==null&&ot.F.length==0)){Et=xn(it,3,"Could not decode alpha data.");break e}qr<ot.j&&(Zr=ot.j-qr,qr=ot.j,e(!(1&Zr)),ot.O+=it.R*Zr,ot.N+=it.B*(Zr>>1),ot.W+=it.B*(Zr>>1),ot.F!=null&&(ot.J+=ot.width*Zr)),qr<kn&&(ot.O+=ot.v,ot.N+=ot.v>>1,ot.W+=ot.v>>1,ot.F!=null&&(ot.J+=ot.v),ot.ka=qr-ot.j,ot.U=ot.va-ot.v,ot.T=kn-qr,Et=ot.put(ot))}xt+1!=it.Ic||dn||(n(it.sa,it.ta-Lt,Qt,mr+16*it.R,Lt),n(it.qa,it.ra-or,rr,Tt+8*it.B,or),n(it.Ha,it.Ia-or,mn,An+8*it.B,or))}if(!Et)return xn(lt,6,"Output aborted.")}return 1}(b,j)),j.bc!=null&&j.bc(j),ie&=1}return ie?(b.cb=0,ie):0}function Dn(b,j,ie,me,_e){_e=b[j+ie+32*me]+(_e>>3),b[j+ie+32*me]=-256&_e?0>_e?0:255:_e}function ji(b,j,ie,me,_e,Ee){Dn(b,j,0,ie,me+_e),Dn(b,j,1,ie,me+Ee),Dn(b,j,2,ie,me-Ee),Dn(b,j,3,ie,me-_e)}function Sn(b){return(20091*b>>16)+b}function cn(b,j,ie,me){var _e,Ee=0,Re=o(16);for(_e=0;4>_e;++_e){var Me=b[j+0]+b[j+8],ze=b[j+0]-b[j+8],Ye=(35468*b[j+4]>>16)-Sn(b[j+12]),nt=Sn(b[j+4])+(35468*b[j+12]>>16);Re[Ee+0]=Me+nt,Re[Ee+1]=ze+Ye,Re[Ee+2]=ze-Ye,Re[Ee+3]=Me-nt,Ee+=4,j++}for(_e=Ee=0;4>_e;++_e)Me=(b=Re[Ee+0]+4)+Re[Ee+8],ze=b-Re[Ee+8],Ye=(35468*Re[Ee+4]>>16)-Sn(Re[Ee+12]),Dn(ie,me,0,0,Me+(nt=Sn(Re[Ee+4])+(35468*Re[Ee+12]>>16))),Dn(ie,me,1,0,ze+Ye),Dn(ie,me,2,0,ze-Ye),Dn(ie,me,3,0,Me-nt),Ee++,me+=32}function fo(b,j,ie,me){var _e=b[j+0]+4,Ee=35468*b[j+4]>>16,Re=Sn(b[j+4]),Me=35468*b[j+1]>>16;ji(ie,me,0,_e+Re,b=Sn(b[j+1]),Me),ji(ie,me,1,_e+Ee,b,Me),ji(ie,me,2,_e-Ee,b,Me),ji(ie,me,3,_e-Re,b,Me)}function Eo(b,j,ie,me,_e){cn(b,j,ie,me),_e&&cn(b,j+16,ie,me+4)}function Vo(b,j,ie,me){Oa(b,j+0,ie,me,1),Oa(b,j+32,ie,me+128,1)}function yn(b,j,ie,me){var _e;for(b=b[j+0]+4,_e=0;4>_e;++_e)for(j=0;4>j;++j)Dn(ie,me,j,_e,b)}function Ts(b,j,ie,me){b[j+0]&&mo(b,j+0,ie,me),b[j+16]&&mo(b,j+16,ie,me+4),b[j+32]&&mo(b,j+32,ie,me+128),b[j+48]&&mo(b,j+48,ie,me+128+4)}function Is(b,j,ie,me){var _e,Ee=o(16);for(_e=0;4>_e;++_e){var Re=b[j+0+_e]+b[j+12+_e],Me=b[j+4+_e]+b[j+8+_e],ze=b[j+4+_e]-b[j+8+_e],Ye=b[j+0+_e]-b[j+12+_e];Ee[0+_e]=Re+Me,Ee[8+_e]=Re-Me,Ee[4+_e]=Ye+ze,Ee[12+_e]=Ye-ze}for(_e=0;4>_e;++_e)Re=(b=Ee[0+4*_e]+3)+Ee[3+4*_e],Me=Ee[1+4*_e]+Ee[2+4*_e],ze=Ee[1+4*_e]-Ee[2+4*_e],Ye=b-Ee[3+4*_e],ie[me+0]=Re+Me>>3,ie[me+16]=Ye+ze>>3,ie[me+32]=Re-Me>>3,ie[me+48]=Ye-ze>>3,me+=64}function Ns(b,j,ie){var me,_e=j-32,Ee=Ho,Re=255-b[_e-1];for(me=0;me<ie;++me){var Me,ze=Ee,Ye=Re+b[j-1];for(Me=0;Me<ie;++Me)b[j+Me]=ze[Ye+b[_e+Me]];j+=32}}function Ju(b,j){Ns(b,j,4)}function Dd(b,j){Ns(b,j,8)}function Qu(b,j){Ns(b,j,16)}function Rs(b,j){var ie;for(ie=0;16>ie;++ie)n(b,j+32*ie,b,j-32,16)}function ml(b,j){var ie;for(ie=16;0<ie;--ie)i(b,j,b[j-1],16),j+=32}function gl(b,j,ie){var me;for(me=0;16>me;++me)i(j,ie+32*me,b,16)}function ta(b,j){var ie,me=16;for(ie=0;16>ie;++ie)me+=b[j-1+32*ie]+b[j+ie-32];gl(me>>5,b,j)}function Wn(b,j){var ie,me=8;for(ie=0;16>ie;++ie)me+=b[j-1+32*ie];gl(me>>4,b,j)}function Ld(b,j){var ie,me=8;for(ie=0;16>ie;++ie)me+=b[j+ie-32];gl(me>>4,b,j)}function Nc(b,j){gl(128,b,j)}function wr(b,j,ie){return b+2*j+ie+2>>2}function ra(b,j){var ie,me=j-32;for(me=new Uint8Array([wr(b[me-1],b[me+0],b[me+1]),wr(b[me+0],b[me+1],b[me+2]),wr(b[me+1],b[me+2],b[me+3]),wr(b[me+2],b[me+3],b[me+4])]),ie=0;4>ie;++ie)n(b,j+32*ie,me,0,me.length)}function eh(b,j){var ie=b[j-1],me=b[j-1+32],_e=b[j-1+64],Ee=b[j-1+96];H(b,j+0,16843009*wr(b[j-1-32],ie,me)),H(b,j+32,16843009*wr(ie,me,_e)),H(b,j+64,16843009*wr(me,_e,Ee)),H(b,j+96,16843009*wr(_e,Ee,Ee))}function ss(b,j){var ie,me=4;for(ie=0;4>ie;++ie)me+=b[j+ie-32]+b[j-1+32*ie];for(me>>=3,ie=0;4>ie;++ie)i(b,j+32*ie,me,4)}function $d(b,j){var ie=b[j-1+0],me=b[j-1+32],_e=b[j-1+64],Ee=b[j-1-32],Re=b[j+0-32],Me=b[j+1-32],ze=b[j+2-32],Ye=b[j+3-32];b[j+0+96]=wr(me,_e,b[j-1+96]),b[j+1+96]=b[j+0+64]=wr(ie,me,_e),b[j+2+96]=b[j+1+64]=b[j+0+32]=wr(Ee,ie,me),b[j+3+96]=b[j+2+64]=b[j+1+32]=b[j+0+0]=wr(Re,Ee,ie),b[j+3+64]=b[j+2+32]=b[j+1+0]=wr(Me,Re,Ee),b[j+3+32]=b[j+2+0]=wr(ze,Me,Re),b[j+3+0]=wr(Ye,ze,Me)}function zo(b,j){var ie=b[j+1-32],me=b[j+2-32],_e=b[j+3-32],Ee=b[j+4-32],Re=b[j+5-32],Me=b[j+6-32],ze=b[j+7-32];b[j+0+0]=wr(b[j+0-32],ie,me),b[j+1+0]=b[j+0+32]=wr(ie,me,_e),b[j+2+0]=b[j+1+32]=b[j+0+64]=wr(me,_e,Ee),b[j+3+0]=b[j+2+32]=b[j+1+64]=b[j+0+96]=wr(_e,Ee,Re),b[j+3+32]=b[j+2+64]=b[j+1+96]=wr(Ee,Re,Me),b[j+3+64]=b[j+2+96]=wr(Re,Me,ze),b[j+3+96]=wr(Me,ze,ze)}function vl(b,j){var ie=b[j-1+0],me=b[j-1+32],_e=b[j-1+64],Ee=b[j-1-32],Re=b[j+0-32],Me=b[j+1-32],ze=b[j+2-32],Ye=b[j+3-32];b[j+0+0]=b[j+1+64]=Ee+Re+1>>1,b[j+1+0]=b[j+2+64]=Re+Me+1>>1,b[j+2+0]=b[j+3+64]=Me+ze+1>>1,b[j+3+0]=ze+Ye+1>>1,b[j+0+96]=wr(_e,me,ie),b[j+0+64]=wr(me,ie,Ee),b[j+0+32]=b[j+1+96]=wr(ie,Ee,Re),b[j+1+32]=b[j+2+96]=wr(Ee,Re,Me),b[j+2+32]=b[j+3+96]=wr(Re,Me,ze),b[j+3+32]=wr(Me,ze,Ye)}function Rc(b,j){var ie=b[j+0-32],me=b[j+1-32],_e=b[j+2-32],Ee=b[j+3-32],Re=b[j+4-32],Me=b[j+5-32],ze=b[j+6-32],Ye=b[j+7-32];b[j+0+0]=ie+me+1>>1,b[j+1+0]=b[j+0+64]=me+_e+1>>1,b[j+2+0]=b[j+1+64]=_e+Ee+1>>1,b[j+3+0]=b[j+2+64]=Ee+Re+1>>1,b[j+0+32]=wr(ie,me,_e),b[j+1+32]=b[j+0+96]=wr(me,_e,Ee),b[j+2+32]=b[j+1+96]=wr(_e,Ee,Re),b[j+3+32]=b[j+2+96]=wr(Ee,Re,Me),b[j+3+64]=wr(Re,Me,ze),b[j+3+96]=wr(Me,ze,Ye)}function bl(b,j){var ie=b[j-1+0],me=b[j-1+32],_e=b[j-1+64],Ee=b[j-1+96];b[j+0+0]=ie+me+1>>1,b[j+2+0]=b[j+0+32]=me+_e+1>>1,b[j+2+32]=b[j+0+64]=_e+Ee+1>>1,b[j+1+0]=wr(ie,me,_e),b[j+3+0]=b[j+1+32]=wr(me,_e,Ee),b[j+3+32]=b[j+1+64]=wr(_e,Ee,Ee),b[j+3+64]=b[j+2+64]=b[j+0+96]=b[j+1+96]=b[j+2+96]=b[j+3+96]=Ee}function Pl(b,j){var ie=b[j-1+0],me=b[j-1+32],_e=b[j-1+64],Ee=b[j-1+96],Re=b[j-1-32],Me=b[j+0-32],ze=b[j+1-32],Ye=b[j+2-32];b[j+0+0]=b[j+2+32]=ie+Re+1>>1,b[j+0+32]=b[j+2+64]=me+ie+1>>1,b[j+0+64]=b[j+2+96]=_e+me+1>>1,b[j+0+96]=Ee+_e+1>>1,b[j+3+0]=wr(Me,ze,Ye),b[j+2+0]=wr(Re,Me,ze),b[j+1+0]=b[j+3+32]=wr(ie,Re,Me),b[j+1+32]=b[j+3+64]=wr(me,ie,Re),b[j+1+64]=b[j+3+96]=wr(_e,me,ie),b[j+1+96]=wr(Ee,_e,me)}function Fd(b,j){var ie;for(ie=0;8>ie;++ie)n(b,j+32*ie,b,j-32,8)}function Ds(b,j){var ie;for(ie=0;8>ie;++ie)i(b,j,b[j-1],8),j+=32}function Uo(b,j,ie){var me;for(me=0;8>me;++me)i(j,ie+32*me,b,8)}function Ls(b,j){var ie,me=8;for(ie=0;8>ie;++ie)me+=b[j+ie-32]+b[j-1+32*ie];Uo(me>>4,b,j)}function Dc(b,j){var ie,me=4;for(ie=0;8>ie;++ie)me+=b[j+ie-32];Uo(me>>3,b,j)}function wn(b,j){var ie,me=4;for(ie=0;8>ie;++ie)me+=b[j-1+32*ie];Uo(me>>3,b,j)}function Lc(b,j){Uo(128,b,j)}function xl(b,j,ie){var me=b[j-ie],_e=b[j+0],Ee=3*(_e-me)+Rg[1020+b[j-2*ie]-b[j+ie]],Re=cf[112+(Ee+4>>3)];b[j-ie]=Ho[255+me+cf[112+(Ee+3>>3)]],b[j+0]=Ho[255+_e-Re]}function $c(b,j,ie,me){var _e=b[j+0],Ee=b[j+ie];return us[255+b[j-2*ie]-b[j-ie]]>me||us[255+Ee-_e]>me}function Fc(b,j,ie,me){return 4*us[255+b[j-ie]-b[j+0]]+us[255+b[j-2*ie]-b[j+ie]]<=me}function Mc(b,j,ie,me,_e){var Ee=b[j-3*ie],Re=b[j-2*ie],Me=b[j-ie],ze=b[j+0],Ye=b[j+ie],nt=b[j+2*ie],ut=b[j+3*ie];return 4*us[255+Me-ze]+us[255+Re-Ye]>me?0:us[255+b[j-4*ie]-Ee]<=_e&&us[255+Ee-Re]<=_e&&us[255+Re-Me]<=_e&&us[255+ut-nt]<=_e&&us[255+nt-Ye]<=_e&&us[255+Ye-ze]<=_e}function Ra(b,j,ie,me){var _e=2*me+1;for(me=0;16>me;++me)Fc(b,j+me,ie,_e)&&xl(b,j+me,ie)}function qo(b,j,ie,me){var _e=2*me+1;for(me=0;16>me;++me)Fc(b,j+me*ie,1,_e)&&xl(b,j+me*ie,1)}function xi(b,j,ie,me){var _e;for(_e=3;0<_e;--_e)Ra(b,j+=4*ie,ie,me)}function Md(b,j,ie,me){var _e;for(_e=3;0<_e;--_e)qo(b,j+=4,ie,me)}function na(b,j,ie,me,_e,Ee,Re,Me){for(Ee=2*Ee+1;0<_e--;){if(Mc(b,j,ie,Ee,Re))if($c(b,j,ie,Me))xl(b,j,ie);else{var ze=b,Ye=j,nt=ie,ut=ze[Ye-2*nt],ht=ze[Ye-nt],lt=ze[Ye+0],It=ze[Ye+nt],xt=ze[Ye+2*nt],it=27*(Et=Rg[1020+3*(lt-ht)+Rg[1020+ut-It]])+63>>7,ot=18*Et+63>>7,Et=9*Et+63>>7;ze[Ye-3*nt]=Ho[255+ze[Ye-3*nt]+Et],ze[Ye-2*nt]=Ho[255+ut+ot],ze[Ye-nt]=Ho[255+ht+it],ze[Ye+0]=Ho[255+lt-it],ze[Ye+nt]=Ho[255+It-ot],ze[Ye+2*nt]=Ho[255+xt-Et]}j+=me}}function Vi(b,j,ie,me,_e,Ee,Re,Me){for(Ee=2*Ee+1;0<_e--;){if(Mc(b,j,ie,Ee,Re))if($c(b,j,ie,Me))xl(b,j,ie);else{var ze=b,Ye=j,nt=ie,ut=ze[Ye-nt],ht=ze[Ye+0],lt=ze[Ye+nt],It=cf[112+((xt=3*(ht-ut))+4>>3)],xt=cf[112+(xt+3>>3)],it=It+1>>1;ze[Ye-2*nt]=Ho[255+ze[Ye-2*nt]+it],ze[Ye-nt]=Ho[255+ut+xt],ze[Ye+0]=Ho[255+ht-It],ze[Ye+nt]=Ho[255+lt-it]}j+=me}}function Sl(b,j,ie,me,_e,Ee){na(b,j,ie,1,16,me,_e,Ee)}function $s(b,j,ie,me,_e,Ee){na(b,j,1,ie,16,me,_e,Ee)}function wl(b,j,ie,me,_e,Ee){var Re;for(Re=3;0<Re;--Re)Vi(b,j+=4*ie,ie,1,16,me,_e,Ee)}function Da(b,j,ie,me,_e,Ee){var Re;for(Re=3;0<Re;--Re)Vi(b,j+=4,1,ie,16,me,_e,Ee)}function Cl(b,j,ie,me,_e,Ee,Re,Me){na(b,j,_e,1,8,Ee,Re,Me),na(ie,me,_e,1,8,Ee,Re,Me)}function Oc(b,j,ie,me,_e,Ee,Re,Me){na(b,j,1,_e,8,Ee,Re,Me),na(ie,me,1,_e,8,Ee,Re,Me)}function _l(b,j,ie,me,_e,Ee,Re,Me){Vi(b,j+4*_e,_e,1,8,Ee,Re,Me),Vi(ie,me+4*_e,_e,1,8,Ee,Re,Me)}function ia(b,j,ie,me,_e,Ee,Re,Me){Vi(b,j+4,1,_e,8,Ee,Re,Me),Vi(ie,me+4,1,_e,8,Ee,Re,Me)}function La(){this.ba=new Ue,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new xe,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Al(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function $a(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function kl(){this.ua=0,this.Wa=new Q,this.vb=new Q,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new z,this.yc=new _}function Od(){this.xb=this.a=0,this.l=new Ri,this.ca=new Ue,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new U,this.Pb=0,this.wd=new U,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new kl,this.ab=0,this.gc=s(4,$a),this.Oc=0}function Fs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ri,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function oa(b,j,ie,me,_e,Ee,Re){for(b=b==null?0:b[j+0],j=0;j<Re;++j)_e[Ee+j]=b+ie[me+j]&255,b=_e[Ee+j]}function El(b,j,ie,me,_e,Ee,Re){var Me;if(b==null)oa(null,null,ie,me,_e,Ee,Re);else for(Me=0;Me<Re;++Me)_e[Ee+Me]=b[j+Me]+ie[me+Me]&255}function Zi(b,j,ie,me,_e,Ee,Re){if(b==null)oa(null,null,ie,me,_e,Ee,Re);else{var Me,ze=b[j+0],Ye=ze,nt=ze;for(Me=0;Me<Re;++Me)Ye=nt+(ze=b[j+Me])-Ye,nt=ie[me+Me]+(-256&Ye?0>Ye?0:255:Ye)&255,Ye=ze,_e[Ee+Me]=nt}}function Tl(b,j,ie,me){var _e=j.width,Ee=j.o;if(e(b!=null&&j!=null),0>ie||0>=me||ie+me>Ee)return null;if(!b.Cc){if(b.ga==null){var Re;if(b.ga=new Fs,(Re=b.ga==null)||(Re=j.width*j.o,e(b.Gb.length==0),b.Gb=o(Re),b.Uc=0,b.Gb==null?Re=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,Re=1),Re=!Re),!Re){Re=b.ga;var Me=b.Fa,ze=b.P,Ye=b.qc,nt=b.mb,ut=b.nb,ht=ze+1,lt=Ye-1,It=Re.l;if(e(Me!=null&&nt!=null&&j!=null),$l[0]=null,$l[1]=oa,$l[2]=El,$l[3]=Zi,Re.ca=nt,Re.tb=ut,Re.c=j.width,Re.i=j.height,e(0<Re.c&&0<Re.i),1>=Ye)j=0;else if(Re.$a=Me[ze+0]>>0&3,Re.Z=Me[ze+0]>>2&3,Re.Lc=Me[ze+0]>>4&3,ze=Me[ze+0]>>6&3,0>Re.$a||1<Re.$a||4<=Re.Z||1<Re.Lc||ze)j=0;else if(It.put=yt,It.ac=ct,It.bc=$t,It.ma=Re,It.width=j.width,It.height=j.height,It.Da=j.Da,It.v=j.v,It.va=j.va,It.j=j.j,It.o=j.o,Re.$a)e:{e(Re.$a==1),j=nr();t:for(;;){if(j==null){j=0;break e}if(e(Re!=null),Re.mc=j,j.c=Re.c,j.i=Re.i,j.l=Re.l,j.l.ma=Re,j.l.width=Re.c,j.l.height=Re.i,j.a=0,ee(j.m,Me,ht,lt),!cr(Re.c,Re.i,1,j,null)||(j.ab==1&&j.gc[0].hc==3&&vt(j.s)?(Re.ic=1,Me=j.c*j.i,j.Ta=null,j.Ua=0,j.V=o(Me),j.Ba=0,j.V==null?(j.a=1,j=0):j=1):(Re.ic=0,j=on(j,Re.c)),!j))break t;j=1;break e}Re.mc=null,j=0}else j=lt>=Re.c*Re.i;Re=!j}if(Re)return null;b.ga.Lc!=1?b.Ga=0:me=Ee-ie}e(b.ga!=null),e(ie+me<=Ee);e:{if(j=(Me=b.ga).c,Ee=Me.l.o,Me.$a==0){if(ht=b.rc,lt=b.Vc,It=b.Fa,ze=b.P+1+ie*j,Ye=b.mb,nt=b.nb+ie*j,e(ze<=b.P+b.qc),Me.Z!=0)for(e($l[Me.Z]!=null),Re=0;Re<me;++Re)$l[Me.Z](ht,lt,It,ze,Ye,nt,j),ht=Ye,lt=nt,nt+=j,ze+=j;else for(Re=0;Re<me;++Re)n(Ye,nt,It,ze,j),ht=Ye,lt=nt,nt+=j,ze+=j;b.rc=ht,b.Vc=lt}else{if(e(Me.mc!=null),j=ie+me,e((Re=Me.mc)!=null),e(j<=Re.i),Re.C>=j)j=1;else if(Me.ic||at(),Me.ic){Me=Re.V,ht=Re.Ba,lt=Re.c;var xt=Re.i,it=(It=1,ze=Re.$/lt,Ye=Re.$%lt,nt=Re.m,ut=Re.s,Re.$),ot=lt*xt,Et=lt*j,Lt=ut.wc,Tt=it<Et?gt(ut,Ye,ze):null;e(it<=ot),e(j<=xt),e(vt(ut));t:for(;;){for(;!nt.h&&it<Et;){if(Ye&Lt||(Tt=gt(ut,Ye,ze)),e(Tt!=null),G(nt),256>(xt=Dt(Tt.G[0],Tt.H[0],nt)))Me[ht+it]=xt,++it,++Ye>=lt&&(Ye=0,++ze<=j&&!(ze%16)&&Pt(Re,ze));else{if(!(280>xt)){It=0;break t}xt=Gt(xt-256,nt);var or,Qt=Dt(Tt.G[4],Tt.H[4],nt);if(G(nt),!(it>=(Qt=Wt(lt,Qt=Gt(Qt,nt)))&&ot-it>=xt)){It=0;break t}for(or=0;or<xt;++or)Me[ht+it+or]=Me[ht+it+or-Qt];for(it+=xt,Ye+=xt;Ye>=lt;)Ye-=lt,++ze<=j&&!(ze%16)&&Pt(Re,ze);it<Et&&Ye&Lt&&(Tt=gt(ut,Ye,ze))}e(nt.h==O(nt))}Pt(Re,ze>j?j:ze);break t}!It||nt.h&&it<ot?(It=0,Re.a=nt.h?5:3):Re.$=it,j=It}else j=kt(Re,Re.V,Re.Ba,Re.c,Re.i,j,Dr);if(!j){me=0;break e}}ie+me>=Ee&&(b.Cc=1),me=1}if(!me)return null;if(b.Cc&&((me=b.ga)!=null&&(me.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+ie*_e}function J(b,j,ie,me,_e,Ee){for(;0<_e--;){var Re,Me=b,ze=j+(ie?1:0),Ye=b,nt=j+(ie?0:3);for(Re=0;Re<me;++Re){var ut=Ye[nt+4*Re];ut!=255&&(ut*=32897,Me[ze+4*Re+0]=Me[ze+4*Re+0]*ut>>23,Me[ze+4*Re+1]=Me[ze+4*Re+1]*ut>>23,Me[ze+4*Re+2]=Me[ze+4*Re+2]*ut>>23)}j+=Ee}}function Ce(b,j,ie,me,_e){for(;0<me--;){var Ee;for(Ee=0;Ee<ie;++Ee){var Re=b[j+2*Ee+0],Me=15&(Ye=b[j+2*Ee+1]),ze=4369*Me,Ye=(240&Ye|Ye>>4)*ze>>16;b[j+2*Ee+0]=(240&Re|Re>>4)*ze>>16&240|(15&Re|Re<<4)*ze>>16>>4&15,b[j+2*Ee+1]=240&Ye|Me}j+=_e}}function Ze(b,j,ie,me,_e,Ee,Re,Me){var ze,Ye,nt=255;for(Ye=0;Ye<_e;++Ye){for(ze=0;ze<me;++ze){var ut=b[j+ze];Ee[Re+4*ze]=ut,nt&=ut}j+=ie,Re+=Me}return nt!=255}function tt(b,j,ie,me,_e){var Ee;for(Ee=0;Ee<_e;++Ee)ie[me+Ee]=b[j+Ee]>>8}function at(){ds=J,Un=Ce,qn=Ze,li=tt}function wt(b,j,ie){k[b]=function(me,_e,Ee,Re,Me,ze,Ye,nt,ut,ht,lt,It,xt,it,ot,Et,Lt){var Tt,or=Lt-1>>1,Qt=Me[ze+0]|Ye[nt+0]<<16,mr=ut[ht+0]|lt[It+0]<<16;e(me!=null);var rr=3*Qt+mr+131074>>2;for(j(me[_e+0],255&rr,rr>>16,xt,it),Ee!=null&&(rr=3*mr+Qt+131074>>2,j(Ee[Re+0],255&rr,rr>>16,ot,Et)),Tt=1;Tt<=or;++Tt){var mn=Me[ze+Tt]|Ye[nt+Tt]<<16,An=ut[ht+Tt]|lt[It+Tt]<<16,dn=Qt+mn+mr+An+524296,Zr=dn+2*(mn+mr)>>3;rr=Zr+Qt>>1,Qt=(dn=dn+2*(Qt+An)>>3)+mn>>1,j(me[_e+2*Tt-1],255&rr,rr>>16,xt,it+(2*Tt-1)*ie),j(me[_e+2*Tt-0],255&Qt,Qt>>16,xt,it+(2*Tt-0)*ie),Ee!=null&&(rr=dn+mr>>1,Qt=Zr+An>>1,j(Ee[Re+2*Tt-1],255&rr,rr>>16,ot,Et+(2*Tt-1)*ie),j(Ee[Re+2*Tt+0],255&Qt,Qt>>16,ot,Et+(2*Tt+0)*ie)),Qt=mn,mr=An}1&Lt||(rr=3*Qt+mr+131074>>2,j(me[_e+Lt-1],255&rr,rr>>16,xt,it+(Lt-1)*ie),Ee!=null&&(rr=3*mr+Qt+131074>>2,j(Ee[Re+Lt-1],255&rr,rr>>16,ot,Et+(Lt-1)*ie)))}}function Mt(){hs[df]=sk,hs[uf]=j2,hs[$2]=ak,hs[hf]=V2,hs[pf]=z2,hs[Dg]=U2,hs[F2]=lk,hs[Lg]=j2,hs[$g]=V2,hs[ff]=z2,hs[Fg]=U2}function er(b){return b&-16384?0>b?0:255:b>>ck}function S(b,j){return er((19077*b>>8)+(26149*j>>8)-14234)}function ae(b,j,ie){return er((19077*b>>8)-(6419*j>>8)-(13320*ie>>8)+8708)}function Pe(b,j){return er((19077*b>>8)+(33050*j>>8)-17685)}function Fe(b,j,ie,me,_e){me[_e+0]=S(b,ie),me[_e+1]=ae(b,j,ie),me[_e+2]=Pe(b,j)}function st(b,j,ie,me,_e){me[_e+0]=Pe(b,j),me[_e+1]=ae(b,j,ie),me[_e+2]=S(b,ie)}function pt(b,j,ie,me,_e){var Ee=ae(b,j,ie);j=Ee<<3&224|Pe(b,j)>>3,me[_e+0]=248&S(b,ie)|Ee>>5,me[_e+1]=j}function jt(b,j,ie,me,_e){var Ee=240&Pe(b,j)|15;me[_e+0]=240&S(b,ie)|ae(b,j,ie)>>4,me[_e+1]=Ee}function $r(b,j,ie,me,_e){me[_e+0]=255,Fe(b,j,ie,me,_e+1)}function Xr(b,j,ie,me,_e){st(b,j,ie,me,_e),me[_e+3]=255}function Fr(b,j,ie,me,_e){Fe(b,j,ie,me,_e),me[_e+3]=255}function Cn(b,j){return 0>b?0:b>j?j:b}function Fn(b,j,ie){k[b]=function(me,_e,Ee,Re,Me,ze,Ye,nt,ut){for(var ht=nt+(-2&ut)*ie;nt!=ht;)j(me[_e+0],Ee[Re+0],Me[ze+0],Ye,nt),j(me[_e+1],Ee[Re+0],Me[ze+0],Ye,nt+ie),_e+=2,++Re,++ze,nt+=2*ie;1&ut&&j(me[_e+0],Ee[Re+0],Me[ze+0],Ye,nt)}}function Ms(b,j,ie){return ie==0?b==0?j==0?6:5:j==0?4:0:ie}function zi(b,j,ie,me,_e){switch(b>>>30){case 3:Oa(j,ie,me,_e,0);break;case 2:ai(j,ie,me,_e);break;case 1:mo(j,ie,me,_e)}}function sa(b,j){var ie,me,_e=j.M,Ee=j.Nb,Re=b.oc,Me=b.pc+40,ze=b.oc,Ye=b.pc+584,nt=b.oc,ut=b.pc+600;for(ie=0;16>ie;++ie)Re[Me+32*ie-1]=129;for(ie=0;8>ie;++ie)ze[Ye+32*ie-1]=129,nt[ut+32*ie-1]=129;for(0<_e?Re[Me-1-32]=ze[Ye-1-32]=nt[ut-1-32]=129:(i(Re,Me-32-1,127,21),i(ze,Ye-32-1,127,9),i(nt,ut-32-1,127,9)),me=0;me<b.za;++me){var ht=j.ya[j.aa+me];if(0<me){for(ie=-1;16>ie;++ie)n(Re,Me+32*ie-4,Re,Me+32*ie+12,4);for(ie=-1;8>ie;++ie)n(ze,Ye+32*ie-4,ze,Ye+32*ie+4,4),n(nt,ut+32*ie-4,nt,ut+32*ie+4,4)}var lt=b.Gd,It=b.Hd+me,xt=ht.ad,it=ht.Hc;if(0<_e&&(n(Re,Me-32,lt[It].y,0,16),n(ze,Ye-32,lt[It].f,0,8),n(nt,ut-32,lt[It].ea,0,8)),ht.Za){var ot=Re,Et=Me-32+16;for(0<_e&&(me>=b.za-1?i(ot,Et,lt[It].y[15],4):n(ot,Et,lt[It+1].y,0,4)),ie=0;4>ie;ie++)ot[Et+128+ie]=ot[Et+256+ie]=ot[Et+384+ie]=ot[Et+0+ie];for(ie=0;16>ie;++ie,it<<=2)ot=Re,Et=Me+H2[ie],Os[ht.Ob[ie]](ot,Et),zi(it,xt,16*+ie,ot,Et)}else if(ot=Ms(me,_e,ht.Ob[0]),Ll[ot](Re,Me),it!=0)for(ie=0;16>ie;++ie,it<<=2)zi(it,xt,16*+ie,Re,Me+H2[ie]);for(ie=ht.Gc,ot=Ms(me,_e,ht.Dd),ja[ot](ze,Ye),ja[ot](nt,ut),it=xt,ot=ze,Et=Ye,255&(ht=ie>>0)&&(170&ht?oh(it,256,ot,Et):ls(it,256,ot,Et)),ht=nt,it=ut,255&(ie>>=8)&&(170&ie?oh(xt,320,ht,it):ls(xt,320,ht,it)),_e<b.Ub-1&&(n(lt[It].y,0,Re,Me+480,16),n(lt[It].f,0,ze,Ye+224,8),n(lt[It].ea,0,nt,ut+224,8)),ie=8*Ee*b.B,lt=b.sa,It=b.ta+16*me+16*Ee*b.R,xt=b.qa,ht=b.ra+8*me+ie,it=b.Ha,ot=b.Ia+8*me+ie,ie=0;16>ie;++ie)n(lt,It+ie*b.R,Re,Me+32*ie,16);for(ie=0;8>ie;++ie)n(xt,ht+ie*b.B,ze,Ye+32*ie,8),n(it,ot+ie*b.B,nt,ut+32*ie,8)}}function aa(b,j,ie,me,_e,Ee,Re,Me,ze){var Ye=[0],nt=[0],ut=0,ht=ze!=null?ze.kd:0,lt=ze??new Al;if(b==null||12>ie)return 7;lt.data=b,lt.w=j,lt.ha=ie,j=[j],ie=[ie],lt.gb=[lt.gb];e:{var It=j,xt=ie,it=lt.gb;if(e(b!=null),e(xt!=null),e(it!=null),it[0]=0,12<=xt[0]&&!r(b,It[0],"RIFF")){if(r(b,It[0]+8,"WEBP")){it=3;break e}var ot=oe(b,It[0]+4);if(12>ot||4294967286<ot){it=3;break e}if(ht&&ot>xt[0]-8){it=7;break e}it[0]=ot,It[0]+=12,xt[0]-=12}it=0}if(it!=0)return it;for(ot=0<lt.gb[0],ie=ie[0];;){e:{var Et=b;xt=j,it=ie;var Lt=Ye,Tt=nt,or=It=[0];if((rr=ut=[ut])[0]=0,8>it[0])it=7;else{if(!r(Et,xt[0],"VP8X")){if(oe(Et,xt[0]+4)!=10){it=3;break e}if(18>it[0]){it=7;break e}var Qt=oe(Et,xt[0]+8),mr=1+te(Et,xt[0]+12);if(2147483648<=mr*(Et=1+te(Et,xt[0]+15))){it=3;break e}or!=null&&(or[0]=Qt),Lt!=null&&(Lt[0]=mr),Tt!=null&&(Tt[0]=Et),xt[0]+=18,it[0]-=18,rr[0]=1}it=0}}if(ut=ut[0],It=It[0],it!=0)return it;if(xt=!!(2&It),!ot&&ut)return 3;if(Ee!=null&&(Ee[0]=!!(16&It)),Re!=null&&(Re[0]=xt),Me!=null&&(Me[0]=0),Re=Ye[0],It=nt[0],ut&&xt&&ze==null){it=0;break}if(4>ie){it=7;break}if(ot&&ut||!ot&&!ut&&!r(b,j[0],"ALPH")){ie=[ie],lt.na=[lt.na],lt.P=[lt.P],lt.Sa=[lt.Sa];e:{Qt=b,it=j,ot=ie;var rr=lt.gb;Lt=lt.na,Tt=lt.P,or=lt.Sa,mr=22,e(Qt!=null),e(ot!=null),Et=it[0];var mn=ot[0];for(e(Lt!=null),e(or!=null),Lt[0]=null,Tt[0]=null,or[0]=0;;){if(it[0]=Et,ot[0]=mn,8>mn){it=7;break e}var An=oe(Qt,Et+4);if(4294967286<An){it=3;break e}var dn=8+An+1&-2;if(mr+=dn,0<rr&&mr>rr){it=3;break e}if(!r(Qt,Et,"VP8 ")||!r(Qt,Et,"VP8L")){it=0;break e}if(mn[0]<dn){it=7;break e}r(Qt,Et,"ALPH")||(Lt[0]=Qt,Tt[0]=Et+8,or[0]=An),Et+=dn,mn-=dn}}if(ie=ie[0],lt.na=lt.na[0],lt.P=lt.P[0],lt.Sa=lt.Sa[0],it!=0)break}ie=[ie],lt.Ja=[lt.Ja],lt.xa=[lt.xa];e:if(rr=b,it=j,ot=ie,Lt=lt.gb[0],Tt=lt.Ja,or=lt.xa,Qt=it[0],Et=!r(rr,Qt,"VP8 "),mr=!r(rr,Qt,"VP8L"),e(rr!=null),e(ot!=null),e(Tt!=null),e(or!=null),8>ot[0])it=7;else{if(Et||mr){if(rr=oe(rr,Qt+4),12<=Lt&&rr>Lt-12){it=3;break e}if(ht&&rr>ot[0]-8){it=7;break e}Tt[0]=rr,it[0]+=8,ot[0]-=8,or[0]=mr}else or[0]=5<=ot[0]&&rr[Qt+0]==47&&!(rr[Qt+4]>>5),Tt[0]=ot[0];it=0}if(ie=ie[0],lt.Ja=lt.Ja[0],lt.xa=lt.xa[0],j=j[0],it!=0)break;if(4294967286<lt.Ja)return 3;if(Me==null||xt||(Me[0]=lt.xa?2:1),Re=[Re],It=[It],lt.xa){if(5>ie){it=7;break}Me=Re,ht=It,xt=Ee,b==null||5>ie?b=0:5<=ie&&b[j+0]==47&&!(b[j+4]>>5)?(ot=[0],rr=[0],Lt=[0],ee(Tt=new U,b,j,ie),bt(Tt,ot,rr,Lt)?(Me!=null&&(Me[0]=ot[0]),ht!=null&&(ht[0]=rr[0]),xt!=null&&(xt[0]=Lt[0]),b=1):b=0):b=0}else{if(10>ie){it=7;break}Me=It,b==null||10>ie||!ko(b,j+3,ie-3)?b=0:(ht=b[j+0]|b[j+1]<<8|b[j+2]<<16,xt=16383&(b[j+7]<<8|b[j+6]),b=16383&(b[j+9]<<8|b[j+8]),1&ht||3<(ht>>1&7)||!(ht>>4&1)||ht>>5>=lt.Ja||!xt||!b?b=0:(Re&&(Re[0]=xt),Me&&(Me[0]=b),b=1))}if(!b||(Re=Re[0],It=It[0],ut&&(Ye[0]!=Re||nt[0]!=It)))return 3;ze!=null&&(ze[0]=lt,ze.offset=j-ze.w,e(4294967286>j-ze.w),e(ze.offset==ze.ha-ie));break}return it==0||it==7&&ut&&ze==null?(Ee!=null&&(Ee[0]|=lt.na!=null&&0<lt.na.length),me!=null&&(me[0]=Re),_e!=null&&(_e[0]=It),0):it}function th(b,j,ie){var me=j.width,_e=j.height,Ee=0,Re=0,Me=me,ze=_e;if(j.Da=b!=null&&0<b.Da,j.Da&&(Me=b.cd,ze=b.bd,Ee=b.v,Re=b.j,11>ie||(Ee&=-2,Re&=-2),0>Ee||0>Re||0>=Me||0>=ze||Ee+Me>me||Re+ze>_e))return 0;if(j.v=Ee,j.j=Re,j.va=Ee+Me,j.o=Re+ze,j.U=Me,j.T=ze,j.da=b!=null&&0<b.da,j.da){if(!ce(Me,ze,ie=[b.ib],Ee=[b.hb]))return 0;j.ib=ie[0],j.hb=Ee[0]}return j.ob=b!=null&&b.ob,j.Kb=b==null||!b.Sd,j.da&&(j.ob=j.ib<3*me/4&&j.hb<3*_e/4,j.Kb=0),1}function rh(b){if(b==null)return 2;if(11>b.S){var j=b.f.RGBA;j.fb+=(b.height-1)*j.A,j.A=-j.A}else j=b.f.kb,b=b.height,j.O+=(b-1)*j.fa,j.fa=-j.fa,j.N+=(b-1>>1)*j.Ab,j.Ab=-j.Ab,j.W+=(b-1>>1)*j.Db,j.Db=-j.Db,j.F!=null&&(j.J+=(b-1)*j.lb,j.lb=-j.lb);return 0}function Bd(b,j,ie,me){if(me==null||0>=b||0>=j)return 2;if(ie!=null){if(ie.Da){var _e=ie.cd,Ee=ie.bd,Re=-2&ie.v,Me=-2&ie.j;if(0>Re||0>Me||0>=_e||0>=Ee||Re+_e>b||Me+Ee>j)return 2;b=_e,j=Ee}if(ie.da){if(!ce(b,j,_e=[ie.ib],Ee=[ie.hb]))return 2;b=_e[0],j=Ee[0]}}me.width=b,me.height=j;e:{var ze=me.width,Ye=me.height;if(b=me.S,0>=ze||0>=Ye||!(b>=df&&13>b))b=2;else{if(0>=me.Rd&&me.sd==null){Re=Ee=_e=j=0;var nt=(Me=ze*W2[b])*Ye;if(11>b||(Ee=(Ye+1)/2*(j=(ze+1)/2),b==12&&(Re=(_e=ze)*Ye)),(Ye=o(nt+2*Ee+Re))==null){b=1;break e}me.sd=Ye,11>b?((ze=me.f.RGBA).eb=Ye,ze.fb=0,ze.A=Me,ze.size=nt):((ze=me.f.kb).y=Ye,ze.O=0,ze.fa=Me,ze.Fd=nt,ze.f=Ye,ze.N=0+nt,ze.Ab=j,ze.Cd=Ee,ze.ea=Ye,ze.W=0+nt+Ee,ze.Db=j,ze.Ed=Ee,b==12&&(ze.F=Ye,ze.J=0+nt+2*Ee),ze.Tc=Re,ze.lb=_e)}if(j=1,_e=me.S,Ee=me.width,Re=me.height,_e>=df&&13>_e)if(11>_e)b=me.f.RGBA,j&=(Me=Math.abs(b.A))*(Re-1)+Ee<=b.size,j&=Me>=Ee*W2[_e],j&=b.eb!=null;else{b=me.f.kb,Me=(Ee+1)/2,nt=(Re+1)/2,ze=Math.abs(b.fa),Ye=Math.abs(b.Ab);var ut=Math.abs(b.Db),ht=Math.abs(b.lb),lt=ht*(Re-1)+Ee;j&=ze*(Re-1)+Ee<=b.Fd,j&=Ye*(nt-1)+Me<=b.Cd,j=(j&=ut*(nt-1)+Me<=b.Ed)&ze>=Ee&Ye>=Me&ut>=Me,j&=b.y!=null,j&=b.f!=null,j&=b.ea!=null,_e==12&&(j&=ht>=Ee,j&=lt<=b.Tc,j&=b.F!=null)}else j=0;b=j?0:2}}return b!=0||ie!=null&&ie.fd&&(b=rh(me)),b}var Ui=64,jd=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Vd=24,zd=32,nh=8,To=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ge("Predictor0","PredictorAdd0"),k.Predictor0=function(){return 4278190080},k.Predictor1=function(b){return b},k.Predictor2=function(b,j,ie){return j[ie+0]},k.Predictor3=function(b,j,ie){return j[ie+1]},k.Predictor4=function(b,j,ie){return j[ie-1]},k.Predictor5=function(b,j,ie){return fe(fe(b,j[ie+1]),j[ie+0])},k.Predictor6=function(b,j,ie){return fe(b,j[ie-1])},k.Predictor7=function(b,j,ie){return fe(b,j[ie+0])},k.Predictor8=function(b,j,ie){return fe(j[ie-1],j[ie+0])},k.Predictor9=function(b,j,ie){return fe(j[ie+0],j[ie+1])},k.Predictor10=function(b,j,ie){return fe(fe(b,j[ie-1]),fe(j[ie+0],j[ie+1]))},k.Predictor11=function(b,j,ie){var me=j[ie+0];return 0>=Oe(me>>24&255,b>>24&255,(j=j[ie-1])>>24&255)+Oe(me>>16&255,b>>16&255,j>>16&255)+Oe(me>>8&255,b>>8&255,j>>8&255)+Oe(255&me,255&b,255&j)?me:b},k.Predictor12=function(b,j,ie){var me=j[ie+0];return(Se((b>>24&255)+(me>>24&255)-((j=j[ie-1])>>24&255))<<24|Se((b>>16&255)+(me>>16&255)-(j>>16&255))<<16|Se((b>>8&255)+(me>>8&255)-(j>>8&255))<<8|Se((255&b)+(255&me)-(255&j)))>>>0},k.Predictor13=function(b,j,ie){var me=j[ie-1];return(qe((b=fe(b,j[ie+0]))>>24&255,me>>24&255)<<24|qe(b>>16&255,me>>16&255)<<16|qe(b>>8&255,me>>8&255)<<8|qe(b>>0&255,me>>0&255))>>>0};var Ng=k.PredictorAdd0;k.PredictorAdd1=Ie,ge("Predictor2","PredictorAdd2"),ge("Predictor3","PredictorAdd3"),ge("Predictor4","PredictorAdd4"),ge("Predictor5","PredictorAdd5"),ge("Predictor6","PredictorAdd6"),ge("Predictor7","PredictorAdd7"),ge("Predictor8","PredictorAdd8"),ge("Predictor9","PredictorAdd9"),ge("Predictor10","PredictorAdd10"),ge("Predictor11","PredictorAdd11"),ge("Predictor12","PredictorAdd12"),ge("Predictor13","PredictorAdd13");var ih=k.PredictorAdd2;et("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),et("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var nf,as=k.ColorIndexInverseTransform,Ud=k.MapARGB,of=k.VP8LColorIndexInverseTransformAlpha,sf=k.MapAlpha,Il=k.VP8LPredictorsAdd=[];Il.length=16,(k.VP8LPredictors=[]).length=16,(k.VP8LPredictorsAdd_C=[]).length=16,(k.VP8LPredictors_C=[]).length=16;var Bc,Io,yo,Nl,Fa,Ma,qd,Oa,ai,oh,mo,ls,Hd,af,sh,jc,Vc,Rl,zc,Wd,Uc,Dl,ah,cs,ds,Un,qn,li,Si=o(511),Ba=o(2041),lh=o(225),Gd=o(767),lf=0,Rg=Ba,cf=lh,Ho=Gd,us=Si,df=0,uf=1,$2=2,hf=3,pf=4,Dg=5,F2=6,Lg=7,$g=8,ff=9,Fg=10,W4=[2,3,7],G4=[3,3,11],M2=[280,256,256,256,40],K4=[0,1,1,1,0],Y4=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],X4=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Z4=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],J4=8,Mg=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Og=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ch=null,Q4=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ek=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],O2=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],tk=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],rk=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],nk=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ik=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ll=[],Os=[],ja=[],ok=1,B2=2,$l=[],hs=[];wt("UpsampleRgbLinePair",Fe,3),wt("UpsampleBgrLinePair",st,3),wt("UpsampleRgbaLinePair",Fr,4),wt("UpsampleBgraLinePair",Xr,4),wt("UpsampleArgbLinePair",$r,4),wt("UpsampleRgba4444LinePair",jt,2),wt("UpsampleRgb565LinePair",pt,2);var sk=k.UpsampleRgbLinePair,ak=k.UpsampleBgrLinePair,j2=k.UpsampleRgbaLinePair,V2=k.UpsampleBgraLinePair,z2=k.UpsampleArgbLinePair,U2=k.UpsampleRgba4444LinePair,lk=k.UpsampleRgb565LinePair,yf=16,mf=1<<yf-1,dh=-227,Bg=482,ck=6,q2=0,dk=o(256),uk=o(256),hk=o(256),pk=o(256),fk=o(Bg-dh),yk=o(Bg-dh);Fn("YuvToRgbRow",Fe,3),Fn("YuvToBgrRow",st,3),Fn("YuvToRgbaRow",Fr,4),Fn("YuvToBgraRow",Xr,4),Fn("YuvToArgbRow",$r,4),Fn("YuvToRgba4444Row",jt,2),Fn("YuvToRgb565Row",pt,2);var H2=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],gf=[0,2,8],mk=[8,7,6,4,4,2,2,2,1,1,1,1],gk=1;this.WebPDecodeRGBA=function(b,j,ie,me,_e){var Ee=uf,Re=new La,Me=new Ue;Re.ba=Me,Me.S=Ee,Me.width=[Me.width],Me.height=[Me.height];var ze=Me.width,Ye=Me.height,nt=new we;if(nt==null||b==null)var ut=2;else e(nt!=null),ut=aa(b,j,ie,nt.width,nt.height,nt.Pd,nt.Qd,nt.format,null);if(ut!=0?ze=0:(ze!=null&&(ze[0]=nt.width[0]),Ye!=null&&(Ye[0]=nt.height[0]),ze=1),ze){Me.width=Me.width[0],Me.height=Me.height[0],me!=null&&(me[0]=Me.width),_e!=null&&(_e[0]=Me.height);e:{if(me=new Ri,(_e=new Al).data=b,_e.w=j,_e.ha=ie,_e.kd=1,j=[0],e(_e!=null),((b=aa(_e.data,_e.w,_e.ha,null,null,null,j,null,_e))==0||b==7)&&j[0]&&(b=4),(j=b)==0){if(e(Re!=null),me.data=_e.data,me.w=_e.w+_e.offset,me.ha=_e.ha-_e.offset,me.put=yt,me.ac=ct,me.bc=$t,me.ma=Re,_e.xa){if((b=nr())==null){Re=1;break e}if(function(ht,lt){var It=[0],xt=[0],it=[0];t:for(;;){if(ht==null)return 0;if(lt==null)return ht.a=2,0;if(ht.l=lt,ht.a=0,ee(ht.m,lt.data,lt.w,lt.ha),!bt(ht.m,It,xt,it)){ht.a=3;break t}if(ht.xb=B2,lt.width=It[0],lt.height=xt[0],!cr(It[0],xt[0],1,ht,null))break t;return 1}return e(ht.a!=0),0}(b,me)){if(me=(j=Bd(me.width,me.height,Re.Oa,Re.ba))==0){t:{me=b;r:for(;;){if(me==null){me=0;break t}if(e(me.s.yc!=null),e(me.s.Ya!=null),e(0<me.s.Wb),e((ie=me.l)!=null),e((_e=ie.ma)!=null),me.xb!=0){if(me.ca=_e.ba,me.tb=_e.tb,e(me.ca!=null),!th(_e.Oa,ie,hf)){me.a=2;break r}if(!on(me,ie.width)||ie.da)break r;if((ie.da||Ne(me.ca.S))&&at(),11>me.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),me.ca.f.kb.F!=null&&at()),me.Pb&&0<me.s.ua&&me.s.vb.X==null&&!pe(me.s.vb,me.s.Wa.Xa)){me.a=1;break r}me.xb=0}if(!kt(me,me.V,me.Ba,me.c,me.i,ie.o,Qe))break r;_e.Dc=me.Ma,me=1;break t}e(me.a!=0),me=0}me=!me}me&&(j=b.a)}else j=b.a}else{if((b=new os)==null){Re=1;break e}if(b.Fa=_e.na,b.P=_e.P,b.qc=_e.Sa,ks(b,me)){if((j=Bd(me.width,me.height,Re.Oa,Re.ba))==0){if(b.Aa=0,ie=Re.Oa,e((_e=b)!=null),ie!=null){if(0<(ze=0>(ze=ie.Md)?0:100<ze?255:255*ze/100)){for(Ye=nt=0;4>Ye;++Ye)12>(ut=_e.pb[Ye]).lc&&(ut.ia=ze*mk[0>ut.lc?0:ut.lc]>>3),nt|=ut.ia;nt&&(alert("todo:VP8InitRandom"),_e.ia=1)}_e.Ga=ie.Id,100<_e.Ga?_e.Ga=100:0>_e.Ga&&(_e.Ga=0)}fn(b,me)||(j=b.a)}}else j=b.a}j==0&&Re.Oa!=null&&Re.Oa.fd&&(j=rh(Re.ba))}Re=j}Ee=Re!=0?null:11>Ee?Me.f.RGBA.eb:Me.f.kb.y}else Ee=null;return Ee};var W2=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(k,D){for(var $="",w=0;w<4;w++)$+=String.fromCharCode(k[D++]);return $}function u(k,D){return(k[D+0]<<0|k[D+1]<<8|k[D+2]<<16)>>>0}function h(k,D){return(k[D+0]<<0|k[D+1]<<8|k[D+2]<<16|k[D+3]<<24)>>>0}new l;var f=[0],p=[0],m=[],x=new l,P=t,g=function(k,D){var $={},w=0,_=!1,v=0,z=0;if($.frames=[],!function(E,O,L,G){for(var K=0;K<G;K++)if(E[O+K]!=L.charCodeAt(K))return!0;return!1}(k,D,"RIFF",4)){for(h(k,D+=4),D+=8;D<k.length;){var W=d(k,D),A=h(k,D+=4);D+=4;var I=A+(1&A);switch(W){case"VP8 ":case"VP8L":$.frames[w]===void 0&&($.frames[w]={}),(X=$.frames[w]).src_off=_?z:D-8,X.src_size=v+A+8,w++,_&&(_=!1,v=0,z=0);break;case"VP8X":(X=$.header={}).feature_flags=k[D];var ee=D+4;X.canvas_width=1+u(k,ee),ee+=3,X.canvas_height=1+u(k,ee),ee+=3;break;case"ALPH":_=!0,v=I+8,z=D-8;break;case"ANIM":(X=$.header).bgcolor=h(k,D),ee=D+4,X.loop_count=(se=k)[(U=ee)+0]<<0|se[U+1]<<8,ee+=2;break;case"ANMF":var Z,X;(X=$.frames[w]={}).offset_x=2*u(k,D),D+=3,X.offset_y=2*u(k,D),D+=3,X.width=1+u(k,D),D+=3,X.height=1+u(k,D),D+=3,X.duration=u(k,D),D+=3,Z=k[D++],X.dispose=1&Z,X.blend=Z>>1&1}W!="ANMF"&&(D+=I)}var se,U;return $}}(P,0);g.response=P,g.rgbaoutput=!0,g.dataurl=!1;var F=g.header?g.header:null,V=g.frames?g.frames:null;if(F){F.loop_counter=F.loop_count,f=[F.canvas_height],p=[F.canvas_width];for(var N=0;N<V.length&&V[N].blend!=0;N++);}var R=V[0],M=x.WebPDecodeRGBA(P,R.src_off,R.src_size,p,f);R.rgba=M,R.imgwidth=p[0],R.imgheight=f[0];for(var C=0;C<p[0]*f[0]*4;C++)m[C]=M[C];return this.width=p,this.height=f,this.data=m,this}(function(t){var e=function(){return typeof a1=="function"},r=function(f,p,m,x){var P=4,g=s;switch(x){case t.image_compression.FAST:P=1,g=o;break;case t.image_compression.MEDIUM:P=6,g=a;break;case t.image_compression.SLOW:P=9,g=l}f=n(f,p,m,g);var F=a1(f,{level:P});return t.__addimage__.arrayBufferToBinaryString(F)},n=function(f,p,m,x){for(var P,g,F,V=f.length/p,N=new Uint8Array(f.length+V),R=u(),M=0;M<V;M+=1){if(F=M*p,P=f.subarray(F,F+p),x)N.set(x(P,m,g),F+M);else{for(var C,k=R.length,D=[];C<k;C+=1)D[C]=R[C](P,m,g);var $=h(D.concat());N.set(D[$],F+M)}g=P}return N},i=function(f){var p=Array.apply([],f);return p.unshift(0),p},o=function(f,p){var m,x=[],P=f.length;x[0]=1;for(var g=0;g<P;g+=1)m=f[g-p]||0,x[g+1]=f[g]-m+256&255;return x},s=function(f,p,m){var x,P=[],g=f.length;P[0]=2;for(var F=0;F<g;F+=1)x=m&&m[F]||0,P[F+1]=f[F]-x+256&255;return P},a=function(f,p,m){var x,P,g=[],F=f.length;g[0]=3;for(var V=0;V<F;V+=1)x=f[V-p]||0,P=m&&m[V]||0,g[V+1]=f[V]+256-(x+P>>>1)&255;return g},l=function(f,p,m){var x,P,g,F,V=[],N=f.length;V[0]=4;for(var R=0;R<N;R+=1)x=f[R-p]||0,P=m&&m[R]||0,g=m&&m[R-p]||0,F=d(x,P,g),V[R+1]=f[R]-F+256&255;return V},d=function(f,p,m){if(f===p&&p===m)return f;var x=Math.abs(p-m),P=Math.abs(f-m),g=Math.abs(f+p-m-m);return x<=P&&x<=g?f:P<=g?p:m},u=function(){return[i,o,s,a,l]},h=function(f){var p=f.map(function(m){return m.reduce(function(x,P){return x+Math.abs(P)},0)});return p.indexOf(Math.min.apply(null,p))};t.processPNG=function(f,p,m,x){var P,g,F,V,N,R,M,C,k,D,$,w,_,v,z,W=this.decode.FLATE_DECODE,A="";if(this.__addimage__.isArrayBuffer(f)&&(f=new Uint8Array(f)),this.__addimage__.isArrayBufferView(f)){if(f=(F=new Lj(f)).imgData,g=F.bits,P=F.colorSpace,N=F.colors,[4,6].indexOf(F.colorType)!==-1){if(F.bits===8){k=(C=F.pixelBitlength==32?new Uint32Array(F.decodePixels().buffer):F.pixelBitlength==16?new Uint16Array(F.decodePixels().buffer):new Uint8Array(F.decodePixels().buffer)).length,$=new Uint8Array(k*F.colors),D=new Uint8Array(k);var I,ee=F.pixelBitlength-F.bits;for(v=0,z=0;v<k;v++){for(_=C[v],I=0;I<ee;)$[z++]=_>>>I&255,I+=F.bits;D[v]=_>>>I&255}}if(F.bits===16){k=(C=new Uint32Array(F.decodePixels().buffer)).length,$=new Uint8Array(k*(32/F.pixelBitlength)*F.colors),D=new Uint8Array(k*(32/F.pixelBitlength)),w=F.colors>1,v=0,z=0;for(var Z=0;v<k;)_=C[v++],$[z++]=_>>>0&255,w&&($[z++]=_>>>16&255,_=C[v++],$[z++]=_>>>0&255),D[Z++]=_>>>16&255;g=8}x!==t.image_compression.NONE&&e()?(f=r($,F.width*F.colors,F.colors,x),M=r(D,F.width,1,x)):(f=$,M=D,W=void 0)}if(F.colorType===3&&(P=this.color_spaces.INDEXED,R=F.palette,F.transparency.indexed)){var X=F.transparency.indexed,se=0;for(v=0,k=X.length;v<k;++v)se+=X[v];if((se/=255)===k-1&&X.indexOf(0)!==-1)V=[X.indexOf(0)];else if(se!==k){for(C=F.decodePixels(),D=new Uint8Array(C.length),v=0,k=C.length;v<k;v++)D[v]=X[C[v]];M=r(D,F.width,1)}}var U=function(E){var O;switch(E){case t.image_compression.FAST:O=11;break;case t.image_compression.MEDIUM:O=13;break;case t.image_compression.SLOW:O=14;break;default:O=12}return O}(x);return W===this.decode.FLATE_DECODE&&(A="/Predictor "+U+" "),A+="/Colors "+N+" /BitsPerComponent "+g+" /Columns "+F.width,(this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),(M&&this.__addimage__.isArrayBuffer(M)||this.__addimage__.isArrayBufferView(M))&&(M=this.__addimage__.arrayBufferToBinaryString(M)),{alias:m,data:f,index:p,filter:W,decodeParameters:A,transparency:V,palette:R,sMask:M,predictor:U,width:F.width,height:F.height,bitsPerComponent:g,colorSpace:P}}}})(gr.API),function(t){t.processGIF89A=function(e,r,n,i){var o=new $j(e),s=o.width,a=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var d={data:l,width:s,height:a},u=new qv(100).encode(d,100);return t.processJPEG.call(this,u,r,n,i)},t.processGIF87A=t.processGIF89A}(gr.API),Vs.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:r,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Vs.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){On.log("bit decode error:"+r)}},Vs.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[o>>7-a&1];this.data[s+4*a]=l.blue,this.data[s+4*a+1]=l.green,this.data[s+4*a+2]=l.red,this.data[s+4*a+3]=255}r!==0&&(this.pos+=4-r)}},Vs.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<t;i++){var o=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+2*i*4,a=o>>4,l=15&o,d=this.palette[a];if(this.data[s]=d.blue,this.data[s+1]=d.green,this.data[s+2]=d.red,this.data[s+3]=255,2*i+1>=this.width)break;d=this.palette[l],this.data[s+4]=d.blue,this.data[s+4+1]=d.green,this.data[s+4+2]=d.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},Vs.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+4*n;if(i<this.palette.length){var s=this.palette[i];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}t!==0&&(this.pos+=4-t)}},Vs.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,a=(o>>5&e)/e*255|0,l=(o>>10&e)/e*255|0,d=o>>15?255:0,u=n*this.width*4+4*i;this.data[u]=l,this.data[u+1]=a,this.data[u+2]=s,this.data[u+3]=d}this.pos+=t}},Vs.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,l=(s>>5&r)/r*255|0,d=(s>>11)/e*255|0,u=i*this.width*4+4*o;this.data[u]=d,this.data[u+1]=l,this.data[u+2]=a,this.data[u+3]=255}this.pos+=t}},Vs.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*r;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=n,this.data[s+3]=255}this.pos+=this.width%4}},Vs.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*r;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=n,this.data[a+3]=s}},Vs.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,i){var o=new Vs(e,!1),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},d=new qv(100).encode(l,100);return t.processJPEG.call(this,d,r,n,i)}}(gr.API),Hx.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,i){var o=new Hx(e),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},d=new qv(100).encode(l,100);return t.processJPEG.call(this,d,r,n,i)}}(gr.API),gr.API.processRGBA=function(t,e,r){for(var n=t.data,i=n.length,o=new Uint8Array(i/4*3),s=new Uint8Array(i/4),a=0,l=0,d=0;d<i;d+=4){var u=n[d],h=n[d+1],f=n[d+2],p=n[d+3];o[a++]=u,o[a++]=h,o[a++]=f,s[l++]=p}var m=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:m,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},gr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},nu=gr.API,Jf=nu.getCharWidthsArray=function(t,e){var r,n,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,d=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=e.doKerning!==!1,f=0,p=t.length,m=0,x=a[0]||l,P=[];for(r=0;r<p;r++)n=t.charCodeAt(r),typeof i.metadata.widthOfString=="function"?P.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+s*(1e3/o)||0)/1e3):(f=h&&Rn(d[n])==="object"&&!isNaN(parseInt(d[n][m],10))?d[n][m]/u:0,P.push((a[n]||x)/l+f)),m=n;return P},Vx=nu.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return nu.processArabic&&(t=nu.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,i)/r:Jf.apply(this,arguments).reduce(function(o,s){return o+s},0)},zx=function(t,e,r,n){for(var i=[],o=0,s=t.length,a=0;o!==s&&a+e[o]<r;)a+=e[o],o++;i.push(t.slice(0,o));var l=o;for(a=0;o!==s;)a+e[o]>n&&(i.push(t.slice(l,o)),a=0,l=o),a+=e[o],o++;return l!==o&&i.push(t.slice(l,o)),i},Ux=function(t,e,r){r||(r={});var n,i,o,s,a,l,d,u=[],h=[u],f=r.textIndent||0,p=0,m=0,x=t.split(" "),P=Jf.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?x[0].length+2:r.lineIndent||0){var g=Array(l).join(" "),F=[];x.map(function(N){(N=N.split(/\s*\n/)).length>1?F=F.concat(N.map(function(R,M){return(M&&R.length?`
`:"")+R})):F.push(N[0])}),x=F,l=Vx.apply(this,[g,r])}for(o=0,s=x.length;o<s;o++){var V=0;if(n=x[o],l&&n[0]==`
`&&(n=n.substr(1),V=1),f+p+(m=(i=Jf.apply(this,[n,r])).reduce(function(N,R){return N+R},0))>e||V){if(m>e){for(a=zx.apply(this,[n,i,e-(f+p),e]),u.push(a.shift()),u=[a.pop()];a.length;)h.push([a.shift()]);m=i.slice(n.length-(u[0]?u[0].length:0)).reduce(function(N,R){return N+R},0)}else u=[n];h.push(u),f=m+l,p=P}else u.push(n),f+=p+m,p=P}return d=l?function(N,R){return(R?g:"")+N.join(" ")}:function(N){return N.join(" ")},h.map(d)},nu.splitTextToSize=function(t,e,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),o=function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;o.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=r.lineIndent;var a,l,d=[];for(a=0,l=n.length;a<l;a++)d=d.concat(Ux.apply(this,[n[a],s,o]));return d},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},i=0;i<e.length;i++)r[e[i]]="0123456789abcdef"[i],n["0123456789abcdef"[i]]=e[i];var o=function(h){return"0x"+parseInt(h,10).toString(16)},s=t.__fontmetrics__.compress=function(h){var f,p,m,x,P=["{"];for(var g in h){if(f=h[g],isNaN(parseInt(g,10))?p="'"+g+"'":(g=parseInt(g,10),p=(p=o(g).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof f=="number")f<0?(m=o(f).slice(3),x="-"):(m=o(f).slice(2),x=""),m=x+m.slice(0,-1)+n[m.slice(-1)];else{if(Rn(f)!=="object")throw new Error("Don't know what to do with value type "+Rn(f)+".");m=s(f)}P.push(p+m)}return P.push("}"),P.join("")},a=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,p,m,x,P={},g=1,F=P,V=[],N="",R="",M=h.length-1,C=1;C<M;C+=1)(x=h[C])=="'"?f?(m=f.join(""),f=void 0):f=[]:f?f.push(x):x=="{"?(V.push([F,m]),F={},m=void 0):x=="}"?((p=V.pop())[0][p[1]]=F,m=void 0,F=p[0]):x=="-"?g=-1:m===void 0?r.hasOwnProperty(x)?(N+=r[x],m=parseInt(N,16)*g,g=1,N=""):N+=x:r.hasOwnProperty(x)?(R+=r[x],F[m]=parseInt(R,16)*g,g=1,m=void 0,R=""):R+=x;return P},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var f=h.font,p=u.Unicode[f.postScriptName];p&&(f.metadata.Unicode={},f.metadata.Unicode.widths=p.widths,f.metadata.Unicode.kerning=p.kerning);var m=d.Unicode[f.postScriptName];m&&(f.metadata.Unicode.encoding=m,f.encoding=m.codePages[0])}])}(gr.API),function(t){var e=function(r){for(var n=r.length,i=new Uint8Array(n),o=0;o<n;o++)i[o]=r.charCodeAt(o);return i};t.API.events.push(["addFont",function(r){var n=void 0,i=r.font,o=r.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(np(a)),s.metadata=t.API.TTFFont.open(a),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,n)}}])}(gr),function(t){function e(){return(Pr.canvg?Promise.resolve(Pr.canvg):Qo(()=>import("./index.es-fpV0M4aE.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}gr.API.addSvgAsImage=function(r,n,i,o,s,a,l,d){if(isNaN(n)||isNaN(i))throw On.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(s))throw On.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=o,u.height=s;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then(function(m){return m.fromString(h,r,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(f)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),n,i,o,s,l,d)})}}(),gr.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,r);return this},gr.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,i,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),l=[],d=0,u=0,h=0;function f(m,x){var P,g=!1;for(P=0;P<m.length;P+=1)m[P]===x&&(g=!0);return g}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var p=a.length;for(h=0;h<p;h+=1)r[a[h]].value=r[a[h]].defaultValue,r[a[h]].explicitSet=!1}if(Rn(t)==="object"){for(i in t)if(o=t[i],f(a,i)&&o!==void 0){if(r[i].type==="boolean"&&typeof o=="boolean")r[i].value=o;else if(r[i].type==="name"&&f(r[i].valueSet,o))r[i].value=o;else if(r[i].type==="integer"&&Number.isInteger(o))r[i].value=o;else if(r[i].type==="array"){for(d=0;d<o.length;d+=1)if(n=!0,o[d].length===1&&typeof o[d][0]=="number")l.push(String(o[d]-1));else if(o[d].length>1){for(u=0;u<o[d].length;u+=1)typeof o[d][u]!="number"&&(n=!1);n===!0&&l.push([o[d][0]-1,o[d][1]-1].join(" "))}r[i].value="["+l.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,x=[];for(m in r)r[m].explicitSet===!0&&(r[m].type==="name"?x.push("/"+m+" /"+r[m].value):x.push("/"+m+" "+r[m].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(n)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),d=o.length+s.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+o+s+a+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(gr.API),function(t){var e=t.API,r=e.pdfEscape16=function(o,s){for(var a,l=s.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],h=0,f=o.length;h<f;++h){if(a=s.metadata.characterToGlyph(o.charCodeAt(h)),s.metadata.glyIdsUsed.push(a),s.metadata.toUnicode[a]=o.charCodeAt(h),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(s.metadata.widthOfGlyph(a),10)])),a=="0")return u.join("");a=a.toString(16),u.push(d[4-a.length],a)}return u.join("")},n=function(o){var s,a,l,d,u,h,f;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,f=(a=Object.keys(o).sort(function(p,m){return p-m})).length;h<f;h++)s=a[h],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),o[s]!==void 0&&o[s]!==null&&typeof o[s].toString=="function"&&(d=("0000"+o[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+d+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(s){var a=s.font,l=s.out,d=s.newObject,u=s.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var h=a.metadata.Unicode.widths,f=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),p="",m=0;m<f.length;m++)p+=String.fromCharCode(f[m]);var x=d();u({data:p,addLength1:!0,objectId:x}),l("endobj");var P=d();u({data:n(a.metadata.toUnicode),addLength1:!0,objectId:P}),l("endobj");var g=d();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+mu(a.fontName)),l("/FontFile2 "+x+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var F=d();l("<<"),l("/Type /Font"),l("/BaseFont /"+mu(a.fontName)),l("/FontDescriptor "+g+" 0 R"),l("/W "+t.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=d(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+P+" 0 R"),l("/BaseFont /"+mu(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+F+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(s){var a=s.font,l=s.out,d=s.newObject,u=s.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var h=a.metadata.rawData,f="",p=0;p<h.length;p++)f+=String.fromCharCode(h[p]);var m=d();u({data:f,addLength1:!0,objectId:m}),l("endobj");var x=d();u({data:n(a.metadata.toUnicode),addLength1:!0,objectId:x}),l("endobj");var P=d();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+m+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+mu(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=d();for(var g=0;g<a.metadata.hmtx.widths.length;g++)a.metadata.hmtx.widths[g]=parseInt(a.metadata.hmtx.widths[g]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+mu(a.fontName)+"/FontDescriptor "+P+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var s,a=o.text||"",l=o.x,d=o.y,u=o.options||{},h=o.mutex||{},f=h.pdfEscape,p=h.activeFontKey,m=h.fonts,x=p,P="",g=0,F="",V=m[x].encoding;if(m[x].encoding!=="Identity-H")return{text:a,x:l,y:d,options:u,mutex:h};for(F=a,x=p,Array.isArray(a)&&(F=a[0]),g=0;g<F.length;g+=1)m[x].metadata.hasOwnProperty("cmap")&&(s=m[x].metadata.cmap.unicode.codeMap[F[g].charCodeAt(0)]),s||F[g].charCodeAt(0)<256&&m[x].metadata.hasOwnProperty("Unicode")?P+=F[g]:P+="";var N="";return parseInt(x.slice(1))<14||V==="WinAnsiEncoding"?N=f(P,x).split("").map(function(R){return R.charCodeAt(0).toString(16)}).join(""):V==="Identity-H"&&(N=r(P,m[x])),h.isHex=!0,{text:N,x:l,y:d,options:u,mutex:h}};e.events.push(["postProcessText",function(o){var s=o.text||"",a=[],l={text:s,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(s)){var d=0;for(d=0;d<s.length;d+=1)Array.isArray(s[d])&&s[d].length===3?a.push([i(Object.assign({},l,{text:s[d][0]})).text,s[d][1],s[d][2]]):a.push(i(Object.assign({},l,{text:s[d]})).text);o.text=a}else o.text=i(Object.assign({},l,{text:s})).text}])}(gr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(gr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var i,o,s,a,l,d,u,h=e,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},P=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],g=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),F=!1,V=0;this.__bidiEngine__={};var N=function(w){var _=w.charCodeAt(),v=_>>8,z=x[v];return z!==void 0?h[256*z+(255&_)]:v===252||v===253?"AL":g.test(v)?"L":v===8?"R":"N"},R=function(w){for(var _,v=0;v<w.length;v++){if((_=N(w.charAt(v)))==="L")return!1;if(_==="R")return!0}return!1},M=function(w,_,v,z){var W,A,I,ee,Z=_[z];switch(Z){case"L":case"R":F=!1;break;case"N":case"AN":break;case"EN":F&&(Z="AN");break;case"AL":F=!0,Z="R";break;case"WS":Z="N";break;case"CS":z<1||z+1>=_.length||(W=v[z-1])!=="EN"&&W!=="AN"||(A=_[z+1])!=="EN"&&A!=="AN"?Z="N":F&&(A="AN"),Z=A===W?A:"N";break;case"ES":Z=(W=z>0?v[z-1]:"B")==="EN"&&z+1<_.length&&_[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&v[z-1]==="EN"){Z="EN";break}if(F){Z="N";break}for(I=z+1,ee=_.length;I<ee&&_[I]==="ET";)I++;Z=I<ee&&_[I]==="EN"?"EN":"N";break;case"NSM":if(s&&!a){for(ee=_.length,I=z+1;I<ee&&_[I]==="NSM";)I++;if(I<ee){var X=w[z],se=X>=1425&&X<=2303||X===64286;if(W=_[I],se&&(W==="R"||W==="AL")){Z="R";break}}}Z=z<1||(W=_[z-1])==="B"?"N":v[z-1];break;case"B":F=!1,i=!0,Z=V;break;case"S":o=!0,Z="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":F=!1;break;case"BN":Z="N"}return Z},C=function(w,_,v){var z=w.split("");return v&&k(z,v,{hiLevel:V}),z.reverse(),_&&_.reverse(),z.join("")},k=function(w,_,v){var z,W,A,I,ee,Z=-1,X=w.length,se=0,U=[],E=V?p:f,O=[];for(F=!1,i=!1,o=!1,W=0;W<X;W++)O[W]=N(w[W]);for(A=0;A<X;A++){if(ee=se,U[A]=M(w,O,U,A),z=240&(se=E[ee][m[U[A]]]),se&=15,_[A]=I=E[se][5],z>0)if(z===16){for(W=Z;W<A;W++)_[W]=1;Z=-1}else Z=-1;if(E[se][6])Z===-1&&(Z=A);else if(Z>-1){for(W=Z;W<A;W++)_[W]=I;Z=-1}O[A]==="B"&&(_[A]=0),v.hiLevel|=I}o&&function(L,G,K){for(var q=0;q<K;q++)if(L[q]==="S"){G[q]=V;for(var B=q-1;B>=0&&L[B]==="WS";B--)G[B]=V}}(O,_,X)},D=function(w,_,v,z,W){if(!(W.hiLevel<w)){if(w===1&&V===1&&!i)return _.reverse(),void(v&&v.reverse());for(var A,I,ee,Z,X=_.length,se=0;se<X;){if(z[se]>=w){for(ee=se+1;ee<X&&z[ee]>=w;)ee++;for(Z=se,I=ee-1;Z<I;Z++,I--)A=_[Z],_[Z]=_[I],_[I]=A,v&&(A=v[Z],v[Z]=v[I],v[I]=A);se=ee}se++}}},$=function(w,_,v){var z=w.split(""),W={hiLevel:V};return v||(v=[]),k(z,v,W),function(A,I,ee){if(ee.hiLevel!==0&&u)for(var Z,X=0;X<A.length;X++)I[X]===1&&(Z=P.indexOf(A[X]))>=0&&(A[X]=P[Z+1])}(z,v,W),D(2,z,_,v,W),D(1,z,_,v,W),z.join("")};return this.__bidiEngine__.doBidiReorder=function(w,_,v){if(function(W,A){if(A)for(var I=0;I<W.length;I++)A[I]=I;a===void 0&&(a=R(W)),d===void 0&&(d=R(W))}(w,_),s||!l||d)if(s&&l&&a^d)V=a?1:0,w=C(w,_,v);else if(!s&&l&&d)V=a?1:0,w=$(w,_,v),w=C(w,_);else if(!s||a||l||d){if(s&&!l&&a^d)w=C(w,_),a?(V=0,w=$(w,_,v)):(V=1,w=$(w,_,v),w=C(w,_));else if(s&&a&&!l&&d)V=1,w=$(w,_,v),w=C(w,_);else if(!s&&!l&&a^d){var z=u;a?(V=1,w=$(w,_,v),V=0,u=!1,w=$(w,_,v),u=z):(V=0,w=$(w,_,v),w=C(w,_),V=1,u=!1,w=$(w,_,v),u=z,w=C(w,_))}}else V=0,w=$(w,_,v);else V=a?1:0,w=$(w,_,v);return w},this.__bidiEngine__.setOptions=function(w){w&&(s=w.isInputVisual,l=w.isOutputVisual,a=w.isInputRtl,d=w.isOutputRtl,u=w.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var o=n.options||{};n.mutex,o.lang;var s=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,r.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(s=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?s.push([r.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):s.push([r.doBidiReorder(i[a])]);n.text=s}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])}(gr),gr.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new xc(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Xj(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Fj(this.contents),this.head=new Oj(this),this.name=new Uj(this),this.cmap=new p3(this),this.toUnicode={},this.hhea=new Bj(this),this.maxp=new qj(this),this.hmtx=new Hj(this),this.post=new Vj(this),this.os2=new jj(this),this.loca=new Yj(this),this.glyf=new Wj(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var s,a,l,d;for(d=[],s=0,a=(l=this.bbox).length;s<a;s++)e=l[s],d.push(Math.round(e*this.scaleFactor));return d}.call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),(32768&(r=i>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var i,o,s,a;for(s=0,o=0,a=(e=""+e).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=e.charCodeAt(o),s+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return s*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var ea,xc=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,i;for(i=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(e.charCodeAt(r)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,i,o,s,a,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^o)+65536*(255^s)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*i+16777216*o+65536*s+256*a+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,i,o;for(o=[],n=0,i=e.length;n<i;n++)r=e[n],o.push(this.writeByte(r));return o},t}(),Fj=function(){var t;function e(r){var n,i,o;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,i,o,s,a,l,d,u,h,f,p,m,x;for(x in p=Object.keys(r).length,l=Math.log(2),h=16*Math.floor(Math.log(p)/l),s=Math.floor(h/l),u=16*p-h,(i=new xc).writeInt(this.scalarType),i.writeShort(p),i.writeShort(h),i.writeShort(s),i.writeShort(u),o=16*p,d=i.pos+o,a=null,m=[],r)for(f=r[x],i.writeString(x),i.writeInt(t(f)),i.writeInt(d),i.writeInt(f.length),m=m.concat(f),x==="head"&&(a=d),d+=f.length;d%4;)m.push(0),d++;return i.write(m),n=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(n),i.data},t=function(r){var n,i,o,s;for(r=f3.call(r);r.length%4;)r.push(0);for(o=new xc(r),i=0,n=0,s=r.length;n<s;n=n+=4)i+=o.readUInt32();return 4294967295&i},e}(),Mj={}.hasOwnProperty,Na=function(t,e){for(var r in e)Mj.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};ea=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var Oj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Na(e,ea),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new xc).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),Wx=function(){function t(e,r){var n,i,o,s,a,l,d,u,h,f,p,m,x,P,g,F,V;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),f=p/2,e.pos+=6,o=function(){var N,R;for(R=[],l=N=0;0<=f?N<f:N>f;l=0<=f?++N:--N)R.push(e.readUInt16());return R}(),e.pos+=2,x=function(){var N,R;for(R=[],l=N=0;0<=f?N<f:N>f;l=0<=f?++N:--N)R.push(e.readUInt16());return R}(),d=function(){var N,R;for(R=[],l=N=0;0<=f?N<f:N>f;l=0<=f?++N:--N)R.push(e.readUInt16());return R}(),u=function(){var N,R;for(R=[],l=N=0;0<=f?N<f:N>f;l=0<=f?++N:--N)R.push(e.readUInt16());return R}(),i=(this.length-e.pos+this.offset)/2,a=function(){var N,R;for(R=[],l=N=0;0<=i?N<i:N>i;l=0<=i?++N:--N)R.push(e.readUInt16());return R}(),l=g=0,V=o.length;g<V;l=++g)for(P=o[l],n=F=m=x[l];m<=P?F<=P:F>=P;n=m<=P?++F:--F)u[l]===0?s=n+d[l]:(s=a[u[l]/2+(n-m)-(f-l)]||0)!==0&&(s+=d[l]),this.codeMap[n]=65535&s}e.pos=h}return t.encode=function(e,r){var n,i,o,s,a,l,d,u,h,f,p,m,x,P,g,F,V,N,R,M,C,k,D,$,w,_,v,z,W,A,I,ee,Z,X,se,U,E,O,L,G,K,q,B,H,Y,te;switch(z=new xc,s=Object.keys(e).sort(function(oe,pe){return oe-pe}),r){case"macroman":for(x=0,P=function(){var oe=[];for(m=0;m<256;++m)oe.push(0);return oe}(),F={0:0},o={},W=0,Z=s.length;W<Z;W++)F[B=e[i=s[W]]]==null&&(F[B]=++x),o[i]={old:e[i],new:F[e[i]]},P[i]=F[e[i]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(P),{charMap:o,subtable:z.data,maxGlyphID:x+1};case"unicode":for(_=[],h=[],V=0,F={},n={},g=d=null,A=0,X=s.length;A<X;A++)F[R=e[i=s[A]]]==null&&(F[R]=++V),n[i]={old:R,new:F[R]},a=F[R]-i,g!=null&&a===d||(g&&h.push(g),_.push(i),d=a),g=i;for(g&&h.push(g),h.push(65535),_.push(65535),$=2*(D=_.length),k=2*Math.pow(Math.log(D)/Math.LN2,2),f=Math.log(k/2)/Math.LN2,C=2*D-k,l=[],M=[],p=[],m=I=0,se=_.length;I<se;m=++I){if(w=_[m],u=h[m],w===65535){l.push(0),M.push(0);break}if(w-(v=n[w].new)>=32768)for(l.push(0),M.push(2*(p.length+D-m)),i=ee=w;w<=u?ee<=u:ee>=u;i=w<=u?++ee:--ee)p.push(n[i].new);else l.push(v-w),M.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*D+2*p.length),z.writeUInt16(0),z.writeUInt16($),z.writeUInt16(k),z.writeUInt16(f),z.writeUInt16(C),K=0,U=h.length;K<U;K++)i=h[K],z.writeUInt16(i);for(z.writeUInt16(0),q=0,E=_.length;q<E;q++)i=_[q],z.writeUInt16(i);for(H=0,O=l.length;H<O;H++)a=l[H],z.writeUInt16(a);for(Y=0,L=M.length;Y<L;Y++)N=M[Y],z.writeUInt16(N);for(te=0,G=p.length;te<G;te++)x=p[te],z.writeUInt16(x);return{charMap:n,subtable:z.data,maxGlyphID:V+1}}},t}(),p3=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Na(e,ea),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,i,o;for(r.pos=this.offset,this.version=r.readUInt16(),o=r.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)n=new Wx(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var i,o;return n==null&&(n="macroman"),i=Wx.encode(r,n),(o=new xc).writeUInt16(0),o.writeUInt16(1),i.table=o.data.concat(i.subtable),i},e}(),Bj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Na(e,ea),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),jj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Na(e,ea),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,i;for(i=[],n=0;n<10;++n)i.push(r.readByte());return i}(),this.charRange=function(){var n,i;for(i=[],n=0;n<4;++n)i.push(r.readInt());return i}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,i;for(i=[],n=0;n<2;n=++n)i.push(r.readInt());return i}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),Vj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Na(e,ea),e.prototype.tag="post",e.prototype.parse=function(r){var n,i,o;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var s;for(i=r.readUInt16(),this.glyphNameIndex=[],s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],o=[];r.pos<this.offset+this.length;)n=r.readByte(),o.push(this.names.push(r.readString(n)));return o;case 151552:return i=r.readUInt16(),this.offsets=r.read(i);case 196608:break;case 262144:return this.map=function(){var a,l,d;for(d=[],s=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;s=0<=l?++a:--a)d.push(r.readUInt32());return d}.call(this)}},e}(),zj=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Uj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Na(e,ea),e.prototype.tag="name",e.prototype.parse=function(r){var n,i,o,s,a,l,d,u,h,f,p;for(r.pos=this.offset,r.readShort(),n=r.readShort(),l=r.readShort(),i=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)i.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+l+r.readShort()});for(d={},s=h=0,f=i.length;h<f;s=++h)o=i[s],r.pos=o.offset,u=r.readString(o.length),a=new zj(u,o),d[p=o.nameID]==null&&(d[p]=[]),d[o.nameID].push(a);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e}(),qj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Na(e,ea),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),Hj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Na(e,ea),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,i,o,s,a,l,d;for(r.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,h;for(h=[],n=u=0;0<=o?u<o:u>o;n=0<=o?++u:--u)h.push(r.readInt16());return h}(),this.widths=function(){var u,h,f,p;for(p=[],u=0,h=(f=this.metrics).length;u<h;u++)s=f[u],p.push(s.advance);return p}.call(this),i=this.widths[this.widths.length-1],d=[],n=a=0;0<=o?a<o:a>o;n=0<=o?++a:--a)d.push(this.widths.push(i));return d},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),f3=[].slice,Wj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Na(e,ea),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,i,o,s,a,l,d,u,h,f;return r in this.cache?this.cache[r]:(s=this.file.loca,n=this.file.contents,i=s.indexOf(r),(o=s.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+i,a=(l=new xc(n.read(o))).readShort(),u=l.readShort(),f=l.readShort(),d=l.readShort(),h=l.readShort(),this.cache[r]=a===-1?new Kj(l,u,f,d,h):new Gj(l,a,u,f,d,h),this.cache[r]))},e.prototype.encode=function(r,n,i){var o,s,a,l,d;for(a=[],s=[],l=0,d=n.length;l<d;l++)o=r[n[l]],s.push(a.length),o&&(a=a.concat(o.encode(i)));return s.push(a.length),{table:a,offsets:s}},e}(),Gj=function(){function t(e,r,n,i,o,s){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Kj=function(){function t(e,r,n,i,o){var s,a;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;a=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&a;)s.pos+=1&a?4:2,128&a?s.pos+=8:64&a?s.pos+=4:8&a&&(s.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new xc(f3.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),Yj=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Na(e,ea),e.prototype.tag="loca",e.prototype.parse=function(r){var n,i;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?function(){var o,s;for(s=[],i=0,o=this.length;i<o;i+=2)s.push(2*r.readUInt16());return s}.call(this):function(){var o,s;for(s=[],i=0,o=this.length;i<o;i+=4)s.push(r.readUInt32());return s}.call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var i=new Uint32Array(this.offsets.length),o=0,s=0,a=0;a<i.length;++a)if(i[a]=o,s<n.length&&n[s]==a){++s,i[a]=o;var l=this.offsets[a],d=this.offsets[a+1]-l;d>0&&(o+=d)}for(var u=new Array(4*i.length),h=0;h<i.length;++h)u[4*h+3]=255&i[h],u[4*h+2]=(65280&i[h])>>8,u[4*h+1]=(16711680&i[h])>>16,u[4*h]=(4278190080&i[h])>>24;return u},e}(),Xj=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,i,o;for(r in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)n=o[r],e[r]=i[n];return e},t.prototype.glyphsFor=function(e){var r,n,i,o,s,a,l;for(i={},s=0,a=e.length;s<a;s++)i[o=e[s]]=this.font.glyf.glyphFor(o);for(o in r=[],i)(n=i[o])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(o in l=this.glyphsFor(r))n=l[o],i[o]=n;return i},t.prototype.encode=function(e,r){var n,i,o,s,a,l,d,u,h,f,p,m,x,P,g;for(i in n=p3.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),p={0:0},g=n.charMap)p[(l=g[i]).old]=l.new;for(m in f=n.maxGlyphID,s)m in p||(p[m]=f++);return u=function(F){var V,N;for(V in N={},F)N[F[V]]=V;return N}(p),h=Object.keys(u).sort(function(F,V){return F-V}),x=function(){var F,V,N;for(N=[],F=0,V=h.length;F<V;F++)a=h[F],N.push(u[a]);return N}(),o=this.font.glyf.encode(s,x,p),d=this.font.loca.encode(o.offsets,x),P={cmap:this.font.cmap.raw(),glyf:o.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(P["OS/2"]=this.font.os2.raw()),this.font.directory.encode(P)},t}();gr.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,i,o,s;if(Array.isArray(r))return"["+function(){var a,l,d;for(d=[],a=0,l=r.length;a<l;a++)n=r[a],d.push(e.convert(n));return d}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in o=["<<"],r)s=r[i],o.push("/"+i+" "+e.convert(s));return o.push(">>"),o.join(`
`)}return""+r},e}();const y3=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Ej,AcroFormAppearance:ar,AcroFormButton:_i,AcroFormCheckBox:sp,AcroFormChoiceField:pd,AcroFormComboBox:yd,AcroFormEditBox:ip,AcroFormListBox:fd,AcroFormPasswordField:ap,AcroFormPushButton:op,AcroFormRadioButton:md,AcroFormTextField:dc,GState:Tp,ShadingPattern:tc,TilingPattern:ld,default:gr,jsPDF:gr},Symbol.toStringTag,{value:"Module"}));function m3(t,e,r,n,i){n=n||{};var o=1.15,s=i.internal.scaleFactor,a=i.internal.getFontSize()/s,l=i.getLineHeightFactor?i.getLineHeightFactor():o,d=a*l,u=/\r\n|\r|\n/g,h="",f=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(h=typeof t=="string"?t.split(u):t,f=h.length||1),r+=a*(2-o),n.valign==="middle"?r-=f/2*d:n.valign==="bottom"&&(r-=f*d),n.halign==="center"||n.halign==="right"){var p=a;if(n.halign==="center"&&(p*=.5),h&&f>=1){for(var m=0;m<h.length;m++)i.text(h[m],e-i.getStringUnitWidth(h[m])*p,r),r+=d;return i}e-=i.getStringUnitWidth(t)*p}return n.halign==="justify"?i.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):i.text(t,e,r),i}var Gx={},ku=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:Gx=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,i,o;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var s=this.jsPDFDocument.internal.getFont(),a=s.fontStyle,l=s.fontName;if(e.font&&(l=e.font),e.fontStyle){a=e.fontStyle;var d=this.getFontList()[l];d&&d.indexOf(a)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(d[0]),a=d[0])}if(this.jsPDFDocument.setFont(l,a),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var u=t.unifyColor(e.fillColor);u&&(n=this.jsPDFDocument).setFillColor.apply(n,u),u=t.unifyColor(e.textColor),u&&(i=this.jsPDFDocument).setTextColor.apply(i,u),u=t.unifyColor(e.lineColor),u&&(o=this.jsPDFDocument).setDrawColor.apply(o,u),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,i,o){return this.jsPDFDocument.rect(e,r,n,i,o)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return Gx||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),f1=function(t,e){return f1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},f1(t,e)};function g3(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var v3=function(t){g3(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e}(Array);function Zj(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Jj(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function mm(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],i=n.map(function(o){return r.getTextWidth(o)}).reduce(function(o,s){return Math.max(o,s)},0);return i}function b3(t,e,r,n){var i=e.settings.tableLineWidth,o=e.settings.tableLineColor;t.applyStyles({lineWidth:i,lineColor:o});var s=P3(i,!1);s&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,s)}function P3(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function pg(t,e){var r,n,i,o;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(i=t.right)!==null&&i!==void 0?i:e,bottom:(o=t.bottom)!==null&&o!==void 0?o:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function x3(t,e){var r=pg(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function Qj(t,e,r,n,i){var o={},s=1.3333333333333333,a=Hv(e,function(V){return i.getComputedStyle(V).backgroundColor});a!=null&&(o.fillColor=a);var l=Hv(e,function(V){return i.getComputedStyle(V).color});l!=null&&(o.textColor=l);var d=tV(n,r);d&&(o.cellPadding=d);var u="borderTopColor",h=s*r,f=n.borderTopWidth;if(n.borderBottomWidth===f&&n.borderRightWidth===f&&n.borderLeftWidth===f){var p=(parseFloat(f)||0)/h;p&&(o.lineWidth=p)}else o.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/h,right:(parseFloat(n.borderRightWidth)||0)/h,bottom:(parseFloat(n.borderBottomWidth)||0)/h,left:(parseFloat(n.borderLeftWidth)||0)/h},o.lineWidth.top||(o.lineWidth.right?u="borderRightColor":o.lineWidth.bottom?u="borderBottomColor":o.lineWidth.left&&(u="borderLeftColor"));var m=Hv(e,function(V){return i.getComputedStyle(V)[u]});m!=null&&(o.lineColor=m);var x=["left","right","center","justify"];x.indexOf(n.textAlign)!==-1&&(o.halign=n.textAlign),x=["middle","bottom","top"],x.indexOf(n.verticalAlign)!==-1&&(o.valign=n.verticalAlign);var P=parseInt(n.fontSize||"");isNaN(P)||(o.fontSize=P/s);var g=eV(n);g&&(o.fontStyle=g);var F=(n.fontFamily||"").toLowerCase();return t.indexOf(F)!==-1&&(o.font=F),o}function eV(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function Hv(t,e){var r=S3(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var i=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],o=parseInt(n[4]);return o===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function S3(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:S3(t.parentElement,e):r}function tV(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),i=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,o=r.map(function(a){return parseInt(a||"0")/n}),s=pg(o,0);return i>s.top&&(s.top=i),i>s.bottom&&(s.bottom=i),s}function w3(t,e,r,n,i){var o,s;n===void 0&&(n=!1),i===void 0&&(i=!1);var a;typeof e=="string"?a=r.document.querySelector(e):a=e;var l=Object.keys(t.getFontList()),d=t.scaleFactor(),u=[],h=[],f=[];if(!a)return console.error("Html table could not be found with input: ",e),{head:u,body:h,foot:f};for(var p=0;p<a.rows.length;p++){var m=a.rows[p],x=(s=(o=m?.parentElement)===null||o===void 0?void 0:o.tagName)===null||s===void 0?void 0:s.toLowerCase(),P=rV(l,d,r,m,n,i);P&&(x==="thead"?u.push(P):x==="tfoot"?f.push(P):h.push(P))}return{head:u,body:h,foot:f}}function rV(t,e,r,n,i,o){for(var s=new v3(n),a=0;a<n.cells.length;a++){var l=n.cells[a],d=r.getComputedStyle(l);if(i||d.display!=="none"){var u=void 0;o&&(u=Qj(t,l,e,d,r)),s.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:u,_element:l,content:nV(l)})}}var h=r.getComputedStyle(n);if(s.length>0&&(i||h.display!=="none"))return s}function nV(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function iV(t,e,r){for(var n=0,i=[t,e,r];n<i.length;n++){var o=i[n];o&&typeof o!="object"&&console.error("The options parameter should be of type object, is: "+typeof o),o.startY&&typeof o.startY!="number"&&(console.error("Invalid value for startY option",o.startY),delete o.startY)}}function Ja(t,e,r,n,i){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(t),s=1;s<arguments.length;s++){var a=arguments[s];if(a!=null)for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(o[l]=a[l])}return o}function C3(t,e){var r=new ku(t),n=r.getDocumentOptions(),i=r.getGlobalOptions();iV(i,n,e);var o=Ja({},i,n,e),s;typeof window<"u"&&(s=window);var a=oV(i,n,e),l=sV(i,n,e),d=aV(r,o),u=cV(r,o,s);return{id:e.tableId,content:u,hooks:l,styles:a,settings:d}}function oV(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var d=t[l],u=e[l],h=r[l];n.columnStyles=Ja({},d,u,h)}else{var f=[t,e,r],p=f.map(function(m){return m[l]||{}});n[l]=Ja({},p[0],p[1],p[2])}},o=0,s=Object.keys(n);o<s.length;o++){var a=s[o];i(a)}return n}function sV(t,e,r){for(var n=[t,e,r],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},o=0,s=n;o<s.length;o++){var a=s[o];a.didParseCell&&i.didParseCell.push(a.didParseCell),a.willDrawCell&&i.willDrawCell.push(a.willDrawCell),a.didDrawCell&&i.didDrawCell.push(a.didDrawCell),a.willDrawPage&&i.willDrawPage.push(a.willDrawPage),a.didDrawPage&&i.didDrawPage.push(a.didDrawPage)}return i}function aV(t,e){var r,n,i,o,s,a,l,d,u,h,f,p,m=pg(e.margin,40/t.scaleFactor()),x=(r=lV(t,e.startY))!==null&&r!==void 0?r:m.top,P;e.showFoot===!0?P="everyPage":e.showFoot===!1?P="never":P=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var g;e.showHead===!0?g="everyPage":e.showHead===!1?g="never":g=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var F=(o=e.useCss)!==null&&o!==void 0?o:!1,V=e.theme||(F?"plain":"striped"),N=!!e.horizontalPageBreak,R=(s=e.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(a=e.includeHiddenHtml)!==null&&a!==void 0?a:!1,useCss:F,theme:V,startY:x,margin:m,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(d=e.rowPageBreak)!==null&&d!==void 0?d:"auto",tableWidth:(u=e.tableWidth)!==null&&u!==void 0?u:"auto",showHead:g,showFoot:P,tableLineWidth:(h=e.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(f=e.tableLineColor)!==null&&f!==void 0?f:200,horizontalPageBreak:N,horizontalPageBreakRepeat:R,horizontalPageBreakBehaviour:(p=e.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function lV(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),i=t.pageNumber(),o=!1;if(r&&r.startPageNumber){var s=r.startPageNumber+r.pageNumber-1;o=s===i}return typeof e=="number"?e:(e==null||e===!1)&&o&&r?.finalY!=null?r.finalY+20/n:null}function cV(t,e,r){var n=e.head||[],i=e.body||[],o=e.foot||[];if(e.html){var s=e.includeHiddenHtml;if(r){var a=w3(t,e.html,r,s,e.useCss)||{};n=a.head||n,i=a.body||n,o=a.foot||n}else console.error("Cannot parse html in non browser environment")}var l=e.columns||dV(n,i,o);return{columns:l,head:n,body:i,foot:o}}function dV(t,e,r){var n=t[0]||e[0]||r[0]||[],i=[];return Object.keys(n).filter(function(o){return o!=="_element"}).forEach(function(o){var s=1,a;Array.isArray(n)?a=n[parseInt(o)]:a=n[o],typeof a=="object"&&!Array.isArray(a)&&(s=a?.colSpan||1);for(var l=0;l<s;l++){var d=void 0;Array.isArray(n)?d=i.length:d=o+(l>0?"_".concat(l):"");var u={dataKey:d};i.push(u)}}),i}var y1=function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t}(),uV=function(t){g3(e,t);function e(r,n,i,o,s,a){var l=t.call(this,r,n,a)||this;return l.cell=i,l.row=o,l.column=s,l.section=o.section,l}return e}(y1),hV=function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,i,o,s){for(var a=0,l=r;a<l.length;a++){var d=l[a],u=new uV(e,this,n,i,o,s),h=d(u)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],h)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,i=this.hooks.didDrawPage;n<i.length;n++){var o=i[n];o(new y1(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,i=this.hooks.willDrawPage;n<i.length;n++){var o=i[n];o(new y1(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(i,o){return i+o.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t}(),_3=function(){function t(e,r,n,i,o){o===void 0&&(o=!1),this.height=0,this.raw=e,e instanceof v3&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=i,this.spansMultiplePages=o}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,i){var o;return Math.max(n,((o=r.cells[i.index])===null||o===void 0?void 0:o.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var i=r.cells[n.index];return i?i.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(i,o){var s=n.cells[o.index];if(!s)return 0;var a=r.getLineHeight(s.styles.fontSize),l=s.padding("vertical"),d=l+a;return d>i?d:i},0)},t}(),A3=function(){function t(e,r,n){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var o=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,o=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var s=o!=null?""+o:"",a=/\r\n|\r|\n/g;this.text=s.split(a)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");n=this.x+i/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*r,o=n*i+this.padding("vertical");return Math.max(o,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=pg(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t}(),pV=function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,i=e.allRows();n<i.length;n++){var o=i[n],s=o.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(r=Math.max(r,s.styles.cellWidth))}return r},t}();function fV(t,e){yV(t,e);var r=[],n=0;e.columns.forEach(function(o){var s=o.getMaxCustomCellWidth(e);s?o.width=s:(o.width=o.wrappedWidth,r.push(o)),n+=o.width});var i=e.getWidth(t.pageSize().width)-n;i&&(i=m1(r,i,function(o){return Math.max(o.minReadableWidth,o.minWidth)})),i&&(i=m1(r,i,function(o){return o.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),gV(e),vV(e,t),mV(e)}function yV(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,i=x3(t,e);e.allRows().forEach(function(o){for(var s=0,a=e.columns;s<a.length;s++){var l=a[s],d=o.cells[l.index];if(d){var u=e.hooks.didParseCell;e.callCellHooks(t,u,d,o,l,null);var h=d.padding("horizontal");d.contentWidth=mm(d.text,d.styles,t)+h;var f=mm(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,t);if(d.minReadableWidth=f+d.padding("horizontal"),typeof d.styles.cellWidth=="number")d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if(d.styles.cellWidth==="wrap"||n===!0)d.contentWidth>i?(d.minWidth=i,d.wrappedWidth=i):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var p=10/r;d.minWidth=d.styles.minCellWidth||p,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}}),e.allRows().forEach(function(o){for(var s=0,a=e.columns;s<a.length;s++){var l=a[s],d=o.cells[l.index];if(d&&d.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,d.wrappedWidth),l.minWidth=Math.max(l.minWidth,d.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,d.minReadableWidth);else{var u=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},h=u.cellWidth||u.minCellWidth;h&&typeof h=="number"&&(l.minWidth=h,l.wrappedWidth=h)}d&&(d.colSpan>1&&!l.minWidth&&(l.minWidth=d.minWidth),d.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=d.minWidth))}})}function m1(t,e,r){for(var n=e,i=t.reduce(function(p,m){return p+m.wrappedWidth},0),o=0;o<t.length;o++){var s=t[o],a=s.wrappedWidth/i,l=n*a,d=s.width+l,u=r(s),h=d<u?u:d;e-=h-s.width,s.width=h}if(e=Math.round(e*1e10)/1e10,e){var f=t.filter(function(p){return e<0?p.width>r(p):!0});f.length&&(e=m1(f,e,r))}return e}function mV(t){for(var e={},r=1,n=t.allRows(),i=0;i<n.length;i++)for(var o=n[i],s=0,a=t.columns;s<a.length;s++){var l=a[s],d=e[l.index];if(r>1)r--,delete o.cells[l.index];else if(d)d.cell.height+=o.height,r=d.cell.colSpan,delete o.cells[l.index],d.left--,d.left<=1&&delete e[l.index];else{var u=o.cells[l.index];if(!u)continue;if(u.height=o.height,u.rowSpan>1){var h=n.length-i,f=u.rowSpan>h?h:u.rowSpan;e[l.index]={cell:u,left:f,row:o}}}}}function gV(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],i=null,o=0,s=0,a=0;a<t.columns.length;a++){var l=t.columns[a];if(s-=1,s>1&&t.columns[a+1])o+=l.width,delete n.cells[l.index];else if(i){var d=i;delete n.cells[l.index],i=null,d.width=l.width+o}else{var d=n.cells[l.index];if(!d)continue;if(s=d.colSpan,o=0,d.colSpan>1){i=d,o+=l.width;continue}d.width=l.width+o}}}function vV(t,e){for(var r={count:0,height:0},n=0,i=t.allRows();n<i.length;n++){for(var o=i[n],s=0,a=t.columns;s<a.length;s++){var l=a[s],d=o.cells[l.index];if(d){e.applyStyles(d.styles,!0);var u=d.width-d.padding("horizontal");if(d.styles.overflow==="linebreak")d.text=e.splitTextToSize(d.text,u+1/e.scaleFactor(),{fontSize:d.styles.fontSize});else if(d.styles.overflow==="ellipsize")d.text=Kx(d.text,u,d.styles,e,"...");else if(d.styles.overflow==="hidden")d.text=Kx(d.text,u,d.styles,e,"");else if(typeof d.styles.overflow=="function"){var h=d.styles.overflow(d.text,u);typeof h=="string"?d.text=[h]:d.text=h}d.contentHeight=d.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var f=d.contentHeight/d.rowSpan;d.rowSpan>1&&r.count*r.height<f*d.rowSpan?r={height:f,count:d.rowSpan}:r&&r.count>0&&r.height>f&&(f=r.height),f>o.height&&(o.height=f)}}r.count--}}function Kx(t,e,r,n,i){return t.map(function(o){return bV(o,e,r,n,i)})}function bV(t,e,r,n,i){var o=1e4*n.scaleFactor();if(e=Math.ceil(e*o)/o,e>=mm(t,r,n))return t;for(;e<mm(t+i,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}function k3(t,e){var r=new ku(t),n=PV(e,r.scaleFactor()),i=new hV(e,n);return fV(r,i),r.applyStyles(r.userStyles),i}function PV(t,e){var r=t.content,n=SV(r.columns);if(r.head.length===0){var i=Yx(n,"head");i&&r.head.push(i)}if(r.foot.length===0){var i=Yx(n,"foot");i&&r.foot.push(i)}var o=t.settings.theme,s=t.styles;return{columns:n,head:Wv("head",r.head,n,s,o,e),body:Wv("body",r.body,n,s,o,e),foot:Wv("foot",r.foot,n,s,o,e)}}function Wv(t,e,r,n,i,o){var s={},a=e.map(function(l,d){for(var u=0,h={},f=0,p=0,m=0,x=r;m<x.length;m++){var P=x[m];if(s[P.index]==null||s[P.index].left===0)if(p===0){var g=void 0;Array.isArray(l)?g=l[P.index-f-u]:g=l[P.dataKey];var F={};typeof g=="object"&&!Array.isArray(g)&&(F=g?.styles||{});var V=wV(t,P,d,i,n,o,F),N=new A3(g,V,t);h[P.dataKey]=N,h[P.index]=N,p=N.colSpan-1,s[P.index]={left:N.rowSpan-1,times:p}}else p--,f++;else s[P.index].left--,p=s[P.index].times,u++}return new _3(l,d,t,h)});return a}function Yx(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var i=xV(e,n.raw);i!=null&&(r[n.dataKey]=i)}}),Object.keys(r).length>0?r:null}function xV(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function SV(t){return t.map(function(e,r){var n,i;return typeof e=="object"?i=(n=e.dataKey)!==null&&n!==void 0?n:r:i=r,new pV(i,e,r)})}function wV(t,e,r,n,i,o,s){var a=Jj(n),l;t==="head"?l=i.headStyles:t==="body"?l=i.bodyStyles:t==="foot"&&(l=i.footStyles);var d=Ja({},a.table,a[t],i.styles,l),u=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},h=t==="body"?u:{},f=t==="body"&&r%2===0?Ja({},a.alternateRow,i.alternateRowStyles):{},p=Zj(o),m=Ja({},p,d,f,h);return Ja(m,s)}function CV(t,e,r){var n;r===void 0&&(r={});var i=x3(t,e),o=new Map,s=[],a=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(f){var p=e.columns.find(function(m){return m.dataKey===f||m.index===f});p&&!o.has(p.index)&&(o.set(p.index,!0),s.push(p.index),a.push(e.columns[p.index]),i-=p.wrappedWidth)});for(var d=!0,u=(n=r?.start)!==null&&n!==void 0?n:0;u<e.columns.length;){if(o.has(u)){u++;continue}var h=e.columns[u].wrappedWidth;if(d||i>=h)d=!1,s.push(u),a.push(e.columns[u]),i-=h;else break;u++}return{colIndexes:s,columns:a,lastIndex:u-1}}function _V(t,e){for(var r=[],n=0;n<e.columns.length;n++){var i=CV(t,e,{start:n});i.columns.length&&(r.push(i),n=i.lastIndex)}return r}function E3(t,e){var r=e.settings,n=r.startY,i=r.margin,o={x:i.left,y:n},s=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),a=n+i.bottom+s;if(r.pageBreak==="avoid"){var l=e.body,d=l.reduce(function(f,p){return f+p.height},0);a+=d}var u=new ku(t);(r.pageBreak==="always"||r.startY!=null&&a>u.pageSize().height)&&(I3(u),o.y=i.top),e.callWillDrawPageHooks(u,o);var h=Ja({},o);e.startPageNumber=u.pageNumber(),r.horizontalPageBreak?AV(u,e,h,o):(u.applyStyles(u.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(f){return dl(u,e,f,o,e.columns)}),u.applyStyles(u.userStyles),e.body.forEach(function(f,p){var m=p===e.body.length-1;gm(u,e,f,m,h,o,e.columns)}),u.applyStyles(u.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(f){return dl(u,e,f,o,e.columns)})),b3(u,e,h,o),e.callEndPageHooks(u,o),e.finalY=o.y,t.lastAutoTable=e,u.applyStyles(u.userStyles)}function AV(t,e,r,n){var i=_V(t,e),o=e.settings;if(o.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(d,u){t.applyStyles(t.userStyles),u>0?lp(t,e,r,n,d.columns,!0):Xx(t,e,n,d.columns),kV(t,e,r,n,d.columns),Gv(t,e,n,d.columns)});else for(var s=-1,a=i[0],l=function(){var d=s;if(a){t.applyStyles(t.userStyles);var u=a.columns;s>=0?lp(t,e,r,n,u,!0):Xx(t,e,n,u),d=Zx(t,e,s+1,n,u),Gv(t,e,n,u)}var h=d-s;i.slice(1).forEach(function(f){t.applyStyles(t.userStyles),lp(t,e,r,n,f.columns,!0),Zx(t,e,s+1,n,f.columns,h),Gv(t,e,n,f.columns)}),s=d};s<e.body.length-1;)l()}function Xx(t,e,r,n){var i=e.settings;t.applyStyles(t.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(o){return dl(t,e,o,r,n)})}function kV(t,e,r,n,i){t.applyStyles(t.userStyles),e.body.forEach(function(o,s){var a=s===e.body.length-1;gm(t,e,o,a,r,n,i)})}function Zx(t,e,r,n,i,o){t.applyStyles(t.userStyles),o=o??e.body.length;var s=Math.min(r+o,e.body.length),a=-1;return e.body.slice(r,s).forEach(function(l,d){var u=r+d===e.body.length-1,h=T3(t,e,u,n);l.canEntireRowFit(h,i)&&(dl(t,e,l,n,i),a=r+d)}),a}function Gv(t,e,r,n){var i=e.settings;t.applyStyles(t.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(o){return dl(t,e,o,r,n)})}function EV(t,e,r){var n=r.getLineHeight(t.styles.fontSize),i=t.padding("vertical"),o=Math.floor((e-i)/n);return Math.max(0,o)}function TV(t,e,r,n){var i={};t.spansMultiplePages=!0,t.height=0;for(var o=0,s=0,a=r.columns;s<a.length;s++){var l=a[s],d=t.cells[l.index];if(d){Array.isArray(d.text)||(d.text=[d.text]);var u=new A3(d.raw,d.styles,d.section);u=Ja(u,d),u.text=[];var h=EV(d,e,n);d.text.length>h&&(u.text=d.text.splice(h,d.text.length));var f=n.scaleFactor(),p=n.getLineHeightFactor();d.contentHeight=d.getContentHeight(f,p),d.contentHeight>=e&&(d.contentHeight=e,u.styles.minCellHeight-=e),d.contentHeight>t.height&&(t.height=d.contentHeight),u.contentHeight=u.getContentHeight(f,p),u.contentHeight>o&&(o=u.contentHeight),i[l.index]=u}}var m=new _3(t.raw,-1,t.section,i,!0);m.height=o;for(var x=0,P=r.columns;x<P.length;x++){var l=P[x],u=m.cells[l.index];u&&(u.height=m.height);var d=t.cells[l.index];d&&(d.height=t.height)}return m}function IV(t,e,r,n){var i=t.pageSize().height,o=n.settings.margin,s=o.top+o.bottom,a=i-s;e.section==="body"&&(a-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=e.getMinimumRowHeight(n.columns,t),d=l<r;if(l>a)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!d)return!1;var u=e.hasRowSpan(n.columns),h=e.getMaxCellHeight(n.columns)>a;return h?(u&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(u||n.settings.rowPageBreak==="avoid")}function gm(t,e,r,n,i,o,s){var a=T3(t,e,n,o);if(r.canEntireRowFit(a,s))dl(t,e,r,o,s);else if(IV(t,r,a,e)){var l=TV(r,a,e,t);dl(t,e,r,o,s),lp(t,e,i,o,s),gm(t,e,l,n,i,o,s)}else lp(t,e,i,o,s),gm(t,e,r,n,i,o,s)}function dl(t,e,r,n,i){n.x=e.settings.margin.left;for(var o=0,s=i;o<s.length;o++){var a=s[o],l=r.cells[a.index];if(!l){n.x+=a.width;continue}t.applyStyles(l.styles),l.x=n.x,l.y=n.y;var d=e.callCellHooks(t,e.hooks.willDrawCell,l,r,a,n);if(d===!1){n.x+=a.width;continue}NV(t,l,n);var u=l.getTextPos();m3(l.text,u.x,u.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,r,a,n),n.x+=a.width}n.y+=r.height}function NV(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var i=P3(n.lineWidth,n.fillColor);i&&t.rect(e.x,r.y,e.width,e.height,i)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),RV(t,e,r,n.lineWidth))}function RV(t,e,r,n){var i,o,s,a;n.top&&(i=r.x,o=r.y,s=r.x+e.width,a=r.y,n.right&&(s+=.5*n.right),n.left&&(i-=.5*n.left),l(n.top,i,o,s,a)),n.bottom&&(i=r.x,o=r.y+e.height,s=r.x+e.width,a=r.y+e.height,n.right&&(s+=.5*n.right),n.left&&(i-=.5*n.left),l(n.bottom,i,o,s,a)),n.left&&(i=r.x,o=r.y,s=r.x,a=r.y+e.height,n.top&&(o-=.5*n.top),n.bottom&&(a+=.5*n.bottom),l(n.left,i,o,s,a)),n.right&&(i=r.x+e.width,o=r.y,s=r.x+e.width,a=r.y+e.height,n.top&&(o-=.5*n.top),n.bottom&&(a+=.5*n.bottom),l(n.right,i,o,s,a));function l(d,u,h,f,p){t.getDocument().setLineWidth(d),t.getDocument().line(u,h,f,p,"S")}}function T3(t,e,r,n){var i=e.settings.margin.bottom,o=e.settings.showFoot;return(o==="everyPage"||o==="lastPage"&&r)&&(i+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-i}function lp(t,e,r,n,i,o){i===void 0&&(i=[]),o===void 0&&(o=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!o&&e.foot.forEach(function(a){return dl(t,e,a,n,i)}),e.callEndPageHooks(t,n);var s=e.settings.margin;b3(t,e,r,n),I3(t),e.pageNumber++,n.x=s.left,n.y=s.top,r.y=s.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(a){return dl(t,e,a,n,i)}),t.applyStyles(t.userStyles))}function I3(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function DV(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],i=C3(this,n),o=k3(this,i);return E3(this,o),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,i){m3(e,r,n,i,this)},t.API.autoTableSetDefaults=function(e){return ku.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){ku.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new ku(this),o=w3(i,e,window,r,!1),s=o.head,a=o.body,l=((n=s[0])===null||n===void 0?void 0:n.map(function(d){return d.content}))||[];return{columns:l,rows:a,data:a}}}var Kv;function aJ(t,e){var r=C3(t,e),n=k3(t,r);E3(t,n)}try{if(typeof window<"u"&&window){var Jx=window,Qx=Jx.jsPDF||((Kv=Jx.jspdf)===null||Kv===void 0?void 0:Kv.jsPDF);Qx&&DV(Qx)}}catch(t){console.error("Could not apply autoTable plugin",t)}var LV=le("<div><div><label></label><select><option value=all></option></select></div><div><label></label><select><option value=all></option></select></div><div><label></label><select><option value></option></select></div><div><label></label><select><option value></option></select></div><div><label></label></div><div><label>"),$V=le("<div><div><div></div></div><div><div> <!> <!> <!> </div><div>"),FV=le("<div><div>"),Qf=le("<option>"),MV=le("<div><div><div><div></div><div></div></div><div><div><div></div><div></div></div><div><div></div><div></div></div></div><div><div></div><div></div></div></div><div><div><span>: </span><span></span></div><div><span>: </span><span></span></div><div><span>: </span><span></span></div><div><span>: </span><span> kg</span></div><div><span>: </span><span></span></div><div><span>: </span><span>");const OV=t=>{const{t:e}=pr(),[r,n]=Ae(""),[i,o]=Ae("all"),[s,a]=Ae({start:"",end:""}),[l,d]=Ae(""),[u,h]=Ae(""),[f,p]=Ae(!1),[m,x]=Ae("all"),P=zt(()=>{let w=t.hbls;var _="";if(r()&&(_+=r().toLowerCase()),r()){const v=r().toLowerCase();w=w.filter(z=>z.hbl.toLowerCase().includes(v)||z.idairguide.toLowerCase().includes(v)||z.nameshipper.toLowerCase().includes(v)||z.consigneeName.toLowerCase().includes(v)||z.namegood.toLowerCase().includes(v)||z.bagnumber.toLowerCase().includes(v)||z.cidentity.toLowerCase().includes(v))}return i()!=="all"&&(w=w.filter(v=>v.idguidestate===i())),m()!=="all"&&(w=w.filter(v=>v.idclasification===m())),(s().start||s().end)&&(w=w.filter(v=>{const z=new Date(v.datereserve),W=s().start?new Date(s().start):new Date("1900-01-01"),A=s().end?new Date(s().end):new Date("2100-12-31");return z>=W&&z<=A})),l()&&(w=w?.filter(v=>v.nameshipper.toLowerCase().includes(l().toLowerCase()))),u()&&(w=w?.filter(v=>v.consigneeName.toLowerCase().includes(u().toLowerCase()))),w=w?.sort((v,z)=>new Date(z.datereserve).getTime()-new Date(v.datereserve).getTime()),t.onFilterChange?.(w),w}),g=zt(()=>{const w=new Set(t.hbls.map(_=>_.nameshipper));return Array.from(w).sort()}),F=zt(()=>{const w=new Set(t.hbls.map(_=>_.consigneeName));return Array.from(w).sort()}),V=zt(()=>{const w=new Set(t.hbls.map(_=>_.idguidestate));return Array.from(w).sort()}),N=zt(()=>{const w=new Set(t.hbls.map(_=>_.idclasification));return Array.from(w).sort()}),R=()=>{n(""),o("all"),a({start:"",end:""}),d(""),h(""),x("all")},M=()=>{const w=["HBL Number","Air Guide","Status","Classification","Shipper","Consignee","Identity","Phone","City","Commodity","Weight (kg)","Quantity","Bag Number","Reserve Date"],_=P().map(I=>[I.hbl,I.idairguide,I.idguidestate,I.idclasification,I.nameshipper,I.consigneeName,I.cidentity,I.phoneshipper,I.address.city,I.namegood,I.weight,I.quantity,I.bagnumber,new Date(I.datereserve).toLocaleDateString()]),v=[w.join(","),..._.map(I=>I.map(ee=>`"${ee}"`).join(","))].join(`
`),z=new Blob([v],{type:"text/csv"}),W=URL.createObjectURL(z),A=document.createElement("a");A.href=W,A.download=`HBL_List_${new Date().toISOString().split("T")[0]}.csv`,A.click(),URL.revokeObjectURL(W)},C=()=>{const w=["HBL Number","Air Guide","Air Number","Status","Classification","Shipper","Consignee","Identity","Shipper Phone","Consignee Phone","Street","City","State","Commodity","Weight (kg)","Quantity","Bag Number","Agency","Guide","Reserve Date"];P().map(I=>[I.hbl,I.idairguide,I.idairnumber,I.idguidestate,I.idclasification,I.nameshipper,I.consigneeName,I.cidentity,I.phoneshipper,I.ctelephone,I.street,I.address.city,I.address.estate,I.namegood,I.weight,I.quantity,I.bagnumber,I.agency,I.guia,new Date(I.datereserve).toLocaleDateString()]);const _=P().map(I=>[I.hbl,I.idclasification,I.idairguide,I.idairnumber,I.idguidestate,I.nameshipper,I.consigneeName,I.cidentity,I.phoneshipper,I.ctelephone,I.street,I.address.city,I.address.estate,I.namegood,I.weight,I.quantity,I.bagnumber,I.agency,I.guia,new Date(I.datereserve).toLocaleDateString()]),v=[w.join("	"),..._.map(I=>I.join("	"))].join(`
`),z=new Blob([v],{type:"application/vnd.ms-excel"}),W=URL.createObjectURL(z),A=document.createElement("a");A.href=W,A.download=`HBL_List_${new Date().toISOString().split("T")[0]}.xls`,A.click(),URL.revokeObjectURL(W)},k=()=>{const w=new gr;w.setFontSize(16),w.text("House Bill of Lading List",14,15),w.setFontSize(10),w.text(`Generated: ${new Date().toLocaleString()}`,14,25),w.setFontSize(10);let _=35;r()&&(w.text(`Search: ${r()}`,14,_),_+=5),i()!=="all"&&(w.text(`Status: ${i()}`,14,_),_+=5);const v=["HBL#","Status","Shipper","Consignee","City","Weight","Commodity"],z=P().map(W=>[W.hbl,W.idguidestate,W.nameshipper.substring(0,20)+(W.nameshipper.length>20?"...":""),W.consigneeName.substring(0,20)+(W.consigneeName.length>20?"...":""),W.address.city,W.weight+" kg",W.namegood.substring(0,15)+(W.namegood.length>15?"...":"")]);w.autoTable({head:[v],body:z,startY:_+5,styles:{fontSize:8},headStyles:{fillColor:[0,123,255]}}),w.save(`HBL_List_${new Date().toISOString().split("T")[0]}.pdf`)},D=w=>w?new Date(w).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",$=w=>({"EN BODEGA":"#17a2b8",ENVIADO:"#007bff",ENTREGADO:"#28a745",CANCELADO:"#dc3545",PENDIENTE:"#ffc107"})[w]||"#6c757d";return(()=>{var w=FV(),_=w.firstChild;return c(w,T(Vt,{get children(){var v=$V(),z=v.firstChild,W=z.firstChild,A=z.nextSibling,I=A.firstChild,ee=I.firstChild,Z=ee.nextSibling,X=Z.nextSibling,se=X.nextSibling,U=se.nextSibling,E=U.nextSibling;E.nextSibling;var O=I.nextSibling;return v.style.setProperty("padding","1rem"),z.style.setProperty("display","grid"),z.style.setProperty("grid-template-columns","1fr auto"),z.style.setProperty("gap","1rem"),z.style.setProperty("margin-bottom","1rem"),c(z,T(Ot,{type:"text",get placeholder(){return e("hbl.searchPlaceholder","Search by HBL#, air guide, shipper, consignee, commodity, bag#, identity...")},get value(){return r()},onInput:L=>n(L.currentTarget.value)}),W),W.style.setProperty("display","flex"),W.style.setProperty("gap","0.5rem"),c(W,T(mt,{variant:"outline",size:"sm",onClick:()=>p(!f()),get children(){return Ve(()=>!!f())()?e("common.hideFilters","Hide Filters"):e("common.showFilters","Show Filters")}}),null),c(W,T(mt,{variant:"outline",size:"sm",onClick:R,get children(){return e("common.clearFilters","Clear Filters")}}),null),c(v,T(We,{get when(){return f()},get children(){var L=LV(),G=L.firstChild,K=G.firstChild,q=K.nextSibling,B=q.firstChild,H=G.nextSibling,Y=H.firstChild,te=Y.nextSibling,oe=te.firstChild,pe=H.nextSibling,ne=pe.firstChild,Q=ne.nextSibling,ce=Q.firstChild,ue=pe.nextSibling,de=ue.firstChild,ge=de.nextSibling,ye=ge.firstChild,fe=ue.nextSibling,Se=fe.firstChild,qe=fe.nextSibling,Oe=qe.firstChild;return L.style.setProperty("display","grid"),L.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(200px, 1fr))"),L.style.setProperty("gap","1rem"),L.style.setProperty("margin-bottom","1rem"),L.style.setProperty("padding","1rem"),L.style.setProperty("background","var(--background-color)"),L.style.setProperty("border-radius","var(--border-radius-sm)"),K.style.setProperty("display","block"),K.style.setProperty("margin-bottom","0.25rem"),K.style.setProperty("font-size","0.875rem"),K.style.setProperty("color","var(--text-muted)"),c(K,()=>e("common.status","Status")),q.addEventListener("change",Ie=>o(Ie.currentTarget.value)),q.style.setProperty("width","100%"),q.style.setProperty("padding","0.5rem"),q.style.setProperty("border","1px solid var(--border-color)"),q.style.setProperty("border-radius","var(--border-radius-sm)"),q.style.setProperty("background","var(--surface-color)"),c(B,()=>e("common.all","All")),c(q,T(_t,{get each(){return V()},children:Ie=>(()=>{var Be=Qf();return Be.value=Ie,c(Be,Ie),Be})()}),null),Y.style.setProperty("display","block"),Y.style.setProperty("margin-bottom","0.25rem"),Y.style.setProperty("font-size","0.875rem"),Y.style.setProperty("color","var(--text-muted)"),c(Y,()=>e("hbl.classification","Classification")),te.addEventListener("change",Ie=>x(Ie.currentTarget.value)),te.style.setProperty("width","100%"),te.style.setProperty("padding","0.5rem"),te.style.setProperty("border","1px solid var(--border-color)"),te.style.setProperty("border-radius","var(--border-radius-sm)"),te.style.setProperty("background","var(--surface-color)"),c(oe,()=>e("common.all","All")),c(te,T(_t,{get each(){return N()},children:Ie=>(()=>{var Be=Qf();return Be.value=Ie,c(Be,Ie),Be})()}),null),ne.style.setProperty("display","block"),ne.style.setProperty("margin-bottom","0.25rem"),ne.style.setProperty("font-size","0.875rem"),ne.style.setProperty("color","var(--text-muted)"),c(ne,()=>e("hbl.shipper","Shipper")),Q.addEventListener("change",Ie=>d(Ie.currentTarget.value)),Q.style.setProperty("width","100%"),Q.style.setProperty("padding","0.5rem"),Q.style.setProperty("border","1px solid var(--border-color)"),Q.style.setProperty("border-radius","var(--border-radius-sm)"),Q.style.setProperty("background","var(--surface-color)"),c(ce,()=>e("common.all","All")),c(Q,T(_t,{get each(){return g()},children:Ie=>(()=>{var Be=Qf();return Be.value=Ie,c(Be,Ie),Be})()}),null),de.style.setProperty("display","block"),de.style.setProperty("margin-bottom","0.25rem"),de.style.setProperty("font-size","0.875rem"),de.style.setProperty("color","var(--text-muted)"),c(de,()=>e("hbl.consignee","Consignee")),ge.addEventListener("change",Ie=>h(Ie.currentTarget.value)),ge.style.setProperty("width","100%"),ge.style.setProperty("padding","0.5rem"),ge.style.setProperty("border","1px solid var(--border-color)"),ge.style.setProperty("border-radius","var(--border-radius-sm)"),ge.style.setProperty("background","var(--surface-color)"),c(ye,()=>e("common.all","All")),c(ge,T(_t,{get each(){return F()},children:Ie=>(()=>{var Be=Qf();return Be.value=Ie,c(Be,Ie),Be})()}),null),Se.style.setProperty("display","block"),Se.style.setProperty("margin-bottom","0.25rem"),Se.style.setProperty("font-size","0.875rem"),Se.style.setProperty("color","var(--text-muted)"),c(Se,()=>e("common.dateFrom","Date From")),c(fe,T(Ot,{type:"date",get value(){return s().start},onInput:Ie=>a({...s(),start:Ie.currentTarget.value})}),null),Oe.style.setProperty("display","block"),Oe.style.setProperty("margin-bottom","0.25rem"),Oe.style.setProperty("font-size","0.875rem"),Oe.style.setProperty("color","var(--text-muted)"),c(Oe,()=>e("common.dateTo","Date To")),c(qe,T(Ot,{type:"date",get value(){return s().end},onInput:Ie=>a({...s(),end:Ie.currentTarget.value})}),null),be(()=>q.value=i()),be(()=>te.value=m()),be(()=>Q.value=l()),be(()=>ge.value=u()),L}}),A),A.style.setProperty("display","flex"),A.style.setProperty("justify-content","space-between"),A.style.setProperty("align-items","center"),A.style.setProperty("margin-bottom","1rem"),I.style.setProperty("font-size","0.875rem"),I.style.setProperty("color","var(--text-muted)"),c(I,()=>e("common.showing","Showing"),ee),c(I,()=>P().length,Z),c(I,()=>e("common.of","of"),se),c(I,()=>t.hbls.length,E),c(I,()=>e("hbl.records","records"),null),O.style.setProperty("display","flex"),O.style.setProperty("gap","0.5rem"),c(O,T(mt,{variant:"outline",size:"sm",onClick:k,get children(){return e("common.print","Print")}}),null),c(O,T(mt,{variant:"outline",size:"sm",onClick:M,get children(){return e("common.exportCSV","Export CSV")}}),null),c(O,T(mt,{variant:"outline",size:"sm",onClick:C,get children(){return e("common.exportExcel","Export Excel")}}),null),v}}),_),_.style.setProperty("margin-top","1rem"),c(_,T(_t,{get each(){return P()},children:v=>T(Vt,{style:{"margin-bottom":"0.5rem"},get children(){var z=MV(),W=z.firstChild,A=W.firstChild,I=A.firstChild,ee=I.nextSibling,Z=A.nextSibling,X=Z.firstChild,se=X.firstChild,U=se.nextSibling,E=X.nextSibling,O=E.firstChild,L=O.nextSibling,G=Z.nextSibling,K=G.firstChild,q=K.nextSibling,B=W.nextSibling,H=B.firstChild,Y=H.firstChild,te=Y.firstChild,oe=Y.nextSibling,pe=H.nextSibling,ne=pe.firstChild,Q=ne.firstChild,ce=ne.nextSibling,ue=pe.nextSibling,de=ue.firstChild,ge=de.firstChild,ye=de.nextSibling,fe=ue.nextSibling,Se=fe.firstChild,qe=Se.firstChild,Oe=Se.nextSibling,Ie=Oe.firstChild,Be=fe.nextSibling,ke=Be.firstChild,Ge=ke.firstChild,et=ke.nextSibling,ve=Be.nextSibling,De=ve.firstChild,He=De.firstChild,Je=De.nextSibling;return z.addEventListener("mouseleave",Le=>{Le.currentTarget.style.backgroundColor="transparent"}),z.addEventListener("mouseenter",Le=>{Le.currentTarget.style.backgroundColor="var(--strip-color)"}),z.$$click=()=>t.onHBLSelect?.(v),z.style.setProperty("padding","1rem"),z.style.setProperty("cursor","pointer"),z.style.setProperty("transition","background-color 0.2s"),W.style.setProperty("display","grid"),W.style.setProperty("grid-template-columns","150px 1fr auto"),W.style.setProperty("gap","1rem"),W.style.setProperty("align-items","center"),I.style.setProperty("font-weight","600"),I.style.setProperty("color","var(--primary-color)"),c(I,()=>v.hbl),ee.style.setProperty("font-size","0.75rem"),ee.style.setProperty("color","var(--text-muted)"),c(ee,()=>v.idairguide),Z.style.setProperty("display","grid"),Z.style.setProperty("grid-template-columns","1fr 1fr"),Z.style.setProperty("gap","1rem"),se.style.setProperty("font-size","0.75rem"),se.style.setProperty("color","var(--text-muted)"),c(se,()=>e("hbl.shipper","Shipper")),U.style.setProperty("font-weight","500"),c(U,()=>v.nameshipper),O.style.setProperty("font-size","0.75rem"),O.style.setProperty("color","var(--text-muted)"),c(O,()=>e("hbl.consignee","Consignee")),L.style.setProperty("font-weight","500"),c(L,()=>v.consigneeName),G.style.setProperty("text-align","right"),K.style.setProperty("display","inline-block"),K.style.setProperty("padding","0.25rem 0.75rem"),K.style.setProperty("border-radius","var(--border-radius-sm)"),K.style.setProperty("font-size","0.75rem"),K.style.setProperty("font-weight","500"),K.style.setProperty("color","white"),c(K,()=>v.idguidestate),q.style.setProperty("font-size","0.75rem"),q.style.setProperty("color","var(--text-muted)"),q.style.setProperty("margin-top","0.25rem"),c(q,()=>D(v.datereserve)),B.style.setProperty("margin-top","0.75rem"),B.style.setProperty("display","grid"),B.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(150px, 1fr))"),B.style.setProperty("gap","0.5rem"),B.style.setProperty("font-size","0.875rem"),Y.style.setProperty("color","var(--text-muted)"),c(Y,()=>e("hbl.city","City"),te),oe.style.setProperty("font-weight","500"),c(oe,()=>v.address.city),ne.style.setProperty("color","var(--text-muted)"),c(ne,()=>e("hbl.classification","Class"),Q),ce.style.setProperty("font-weight","500"),c(ce,()=>v.idclasification),de.style.setProperty("color","var(--text-muted)"),c(de,()=>e("hbl.commodity","Commodity"),ge),ye.style.setProperty("font-weight","500"),c(ye,()=>v.namegood),Se.style.setProperty("color","var(--text-muted)"),c(Se,()=>e("hbl.weight","Weight"),qe),Oe.style.setProperty("font-weight","500"),c(Oe,()=>v.weight,Ie),ke.style.setProperty("color","var(--text-muted)"),c(ke,()=>e("hbl.bagNumber","Bag#"),Ge),et.style.setProperty("font-weight","500"),c(et,()=>v.bagnumber),De.style.setProperty("color","var(--text-muted)"),c(De,()=>e("hbl.guideNo","Guide No."),He),Je.style.setProperty("font-weight","500"),c(Je,()=>v.guia),be(Le=>(Le=$(v.idguidestate))!=null?K.style.setProperty("background-color",Le):K.style.removeProperty("background-color")),z}})})),w})()};tr(["click"]);const N3=t=>{const e=/230\d{6}/g,r=t.match(e)||[];return[...new Set(r)]},BV=t=>/^230\d{6}$/.test(t),jV=[{id:"YABA_09",label:"Recogida en Tienda",icon:"market",index:0},{id:"YABA_11",label:"En transito hacia YABA WH",icon:"truck-fast-outline",index:1},{id:"YABA_13",label:"YABA ALMACEN",icon:"store",index:2},{id:"YABA_14",label:"En transito hacia FL",icon:"truck-fast-outline",index:3},{id:"YABA_22",label:"Entrega a la aerolinea",icon:"airplane-takeoff",index:4},{id:"AERO_28",label:"LLegando a AeroVaradero",icon:"airplane-landing",index:5},{id:"AERO_33",label:"Recogida en AeroVaradero",icon:"dolly",index:6},{id:"YABA_46",label:"Transporte HAV",icon:"car-hatchback",tag:"HAV",index:7},{id:"YABA_40",label:"Transporte CAV",icon:"car-hatchback",tag:"CAV",index:7},{id:"YABA_41",label:"Transporte CMG",icon:"car-hatchback",tag:"CMG",index:7},{id:"YABA_42",label:"Transporte HLG",icon:"car-hatchback",tag:"HLG",index:7},{id:"YABA_50",label:"Almacen HAV",icon:"store",tag:"HAV",index:8},{id:"YABA_52",label:"Almacen CAV",icon:"store",tag:"CAV",index:8},{id:"YABA_54",label:"Almacen CMG",icon:"store",tag:"CMG",index:8},{id:"YABA_56",label:"Almacen HLG",icon:"store",tag:"HLG",index:8},{id:"YABA_70",label:"Escaneando por Locaciones",icon:"sort-numeric-ascending",index:9},{id:"YABA_78",label:"En reparto",icon:"moped",index:10},{id:"SSG_147",label:"SSG-47",icon:"sort-numeric-ascending",index:11},{id:"SSG_148",label:"SSG-48",icon:"sort-numeric-ascending",index:12},{id:"SSG_149",label:"SSG-49",icon:"sort-numeric-ascending",index:13},{id:"YABA_99",label:"Entregado",icon:"success",index:99}],VV=async(t,e,r)=>{try{if(!BV(t))return{hbl:t,success:!1,error:"Invalid HBL format. Expected 230XXXXXX"};const n={idguidestate:e,...r&&{notes:r}},i=await Ki.updateHBLStatus(t,n);return{hbl:t,success:!0,newStatus:e,previousStatus:i.previousStatus}}catch(n){return{hbl:t,success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}},zV=async t=>{const e=[];let r=0,n=0;for(const i of t.hbls){const o=await VV(i,t.statusId,t.notes);e.push(o),o.success?r++:n++}return{success:n===0,results:e,totalProcessed:t.hbls.length,totalSuccess:r,totalFailed:n}},UV=async(t,e,r)=>{const n=N3(t);return n.length===0?{success:!1,results:[],totalProcessed:0,totalSuccess:0,totalFailed:0}:zV({hbls:n,statusId:e,notes:r})};var qV=le("<div><h3> <!> HBL(s):</h3><div><div>"),HV=le("<span><span>"),WV=le("<div><h2></h2><div><div><label></label><textarea></textarea><div></div></div><div><label></label><select><option value>-- <!> --</option></select></div><div><label></label><textarea></textarea></div><div><div>"),GV=le(`<style>
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `),KV=le("<span>"),YV=le("<option> "),XV=le("<div><h4></h4><div>"),ZV=le("<div><h3></h3><div><div><div></div><div></div></div><div><div></div><div></div></div><div><div></div><div>"),JV=le("<div>: ");const QV=t=>{const{t:e}=pr(),[r,n]=Ae(""),[i,o]=Ae(""),[s,a]=Ae(""),[l,d]=Ae([]),[u,h]=Ae(!1),[f,p]=Ae(null),m=()=>{const R=N3(r());d(R)},x=async()=>{if(!i()||l().length===0){alert(e("hbl.bulkUpdate.selectStatusAndParse","Please select a status and parse HBLs first"));return}h(!0),p(null);try{const R=await UV(r(),i(),s()||void 0);p(R),t.onSuccess&&R.totalSuccess>0&&t.onSuccess(R)}catch(R){console.error("Error updating HBL statuses:",R),alert(e("hbl.bulkUpdate.error","Error updating HBL statuses. Please try again."))}finally{h(!1)}},P=()=>{n(""),o(""),a(""),d([]),p(null)},g={width:"100%",padding:"0.75rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"1rem","font-family":"inherit",background:"var(--surface-color)",color:"var(--text-primary)",transition:"border-color 0.2s ease",resize:"vertical","min-height":"120px"},F={width:"100%",padding:"0.75rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"1rem","font-family":"inherit",background:"var(--surface-color)",color:"var(--text-primary)",transition:"border-color 0.2s ease"},V={display:"block","font-weight":"500","margin-bottom":"0.5rem",color:"var(--text-primary)"},N={"margin-bottom":"1rem"};return T(Vt,{get children(){return[(()=>{var R=WV(),M=R.firstChild,C=M.nextSibling,k=C.firstChild,D=k.firstChild,$=D.nextSibling,w=$.nextSibling,_=k.nextSibling,v=_.firstChild,z=v.nextSibling,W=z.firstChild,A=W.firstChild,I=A.nextSibling;I.nextSibling;var ee=_.nextSibling,Z=ee.firstChild,X=Z.nextSibling,se=ee.nextSibling,U=se.firstChild;return R.style.setProperty("padding","1.5rem"),M.style.setProperty("font-size","1.5rem"),M.style.setProperty("font-weight","600"),M.style.setProperty("margin-bottom","1.5rem"),M.style.setProperty("color","var(--text-primary)"),c(M,()=>e("hbl.bulkUpdate.title","Bulk HBL Status Update")),c(D,()=>e("hbl.bulkUpdate.inputLabel","Enter text containing HBL numbers (format: 230XXXXXX)")),$.addEventListener("blur",E=>E.currentTarget.style.borderColor="var(--border-color)"),$.addEventListener("focus",E=>E.currentTarget.style.borderColor="var(--primary-color)"),$.$$input=E=>n(E.currentTarget.value),w.style.setProperty("margin-top","0.75rem"),c(w,T(mt,{onClick:m,variant:"secondary",size:"sm",get children(){return e("hbl.bulkUpdate.parseButton","Parse HBLs")}})),c(C,T(We,{get when(){return l().length>0},get children(){var E=qV(),O=E.firstChild,L=O.firstChild,G=L.nextSibling;G.nextSibling;var K=O.nextSibling,q=K.firstChild;return O.style.setProperty("font-size","1.125rem"),O.style.setProperty("font-weight","500"),O.style.setProperty("margin-bottom","0.75rem"),O.style.setProperty("color","var(--text-primary)"),c(O,()=>e("hbl.bulkUpdate.found","Found"),L),c(O,()=>l().length,G),K.style.setProperty("background","var(--gray-50)"),K.style.setProperty("padding","0.75rem"),K.style.setProperty("border-radius","var(--border-radius-sm)"),K.style.setProperty("max-height","8rem"),K.style.setProperty("overflow-y","auto"),q.style.setProperty("display","flex"),q.style.setProperty("flex-wrap","wrap"),q.style.setProperty("gap","0.5rem"),c(q,T(_t,{get each(){return l()},children:B=>(()=>{var H=KV();return H.style.setProperty("padding","0.25rem 0.75rem"),H.style.setProperty("background","var(--primary-light)"),H.style.setProperty("color","white"),H.style.setProperty("border-radius","var(--border-radius-sm)"),H.style.setProperty("font-size","0.875rem"),H.style.setProperty("font-weight","500"),c(H,B),H})()})),be(B=>y(E,N,B)),E}}),_),c(v,()=>e("hbl.bulkUpdate.selectStatus","Select New Status")),z.addEventListener("blur",E=>E.currentTarget.style.borderColor="var(--border-color)"),z.addEventListener("focus",E=>E.currentTarget.style.borderColor="var(--primary-color)"),z.addEventListener("change",E=>o(E.currentTarget.value)),y(z,F),c(W,()=>e("hbl.bulkUpdate.selectOption","Select Status"),I),c(z,T(_t,{each:jV,children:E=>(()=>{var O=YV(),L=O.firstChild;return c(O,()=>E.label,L),c(O,()=>E.tag?`(${E.tag})`:"",null),be(()=>O.value=E.id),O})()}),null),c(Z,()=>e("hbl.bulkUpdate.notes","Notes (Optional)")),X.addEventListener("blur",E=>E.currentTarget.style.borderColor="var(--border-color)"),X.addEventListener("focus",E=>E.currentTarget.style.borderColor="var(--primary-color)"),X.$$input=E=>a(E.currentTarget.value),se.style.setProperty("display","flex"),se.style.setProperty("justify-content","space-between"),se.style.setProperty("align-items","center"),se.style.setProperty("margin-top","1.5rem"),c(se,T(mt,{onClick:x,get disabled(){return u()||l().length===0||!i()},variant:"primary",get children(){return T(We,{get when(){return u()},get fallback(){return e("hbl.bulkUpdate.updateButton","Update Statuses")},get children(){var E=HV(),O=E.firstChild;return E.style.setProperty("display","flex"),E.style.setProperty("align-items","center"),O.style.setProperty("display","inline-block"),O.style.setProperty("width","16px"),O.style.setProperty("height","16px"),O.style.setProperty("border","2px solid #fff"),O.style.setProperty("border-top-color","transparent"),O.style.setProperty("border-radius","50%"),O.style.setProperty("animation","spin 0.8s linear infinite"),O.style.setProperty("margin-right","0.5rem"),c(E,()=>e("hbl.bulkUpdate.updating","Updating..."),null),E}})}}),U),U.style.setProperty("display","flex"),U.style.setProperty("gap","0.75rem"),c(U,T(mt,{onClick:P,variant:"secondary",size:"sm",get children(){return e("hbl.bulkUpdate.reset","Reset")}}),null),c(U,T(We,{get when(){return t.onClose},get children(){return T(mt,{get onClick(){return t.onClose},variant:"outline",size:"sm",get children(){return e("hbl.bulkUpdate.close","Close")}})}}),null),c(C,T(We,{get when(){return f()},children:E=>(()=>{var O=ZV(),L=O.firstChild,G=L.nextSibling,K=G.firstChild,q=K.firstChild,B=q.nextSibling,H=K.nextSibling,Y=H.firstChild,te=Y.nextSibling,oe=H.nextSibling,pe=oe.firstChild,ne=pe.nextSibling;return O.style.setProperty("margin-top","1.5rem"),O.style.setProperty("padding","1rem"),O.style.setProperty("background","var(--gray-50)"),O.style.setProperty("border-radius","var(--border-radius)"),L.style.setProperty("font-size","1.125rem"),L.style.setProperty("font-weight","500"),L.style.setProperty("margin-bottom","1rem"),L.style.setProperty("color","var(--text-primary)"),c(L,()=>e("hbl.bulkUpdate.results","Update Results")),G.style.setProperty("display","grid"),G.style.setProperty("grid-template-columns","repeat(3, 1fr)"),G.style.setProperty("gap","1rem"),G.style.setProperty("margin-bottom","1rem"),K.style.setProperty("text-align","center"),q.style.setProperty("font-size","1.875rem"),q.style.setProperty("font-weight","700"),q.style.setProperty("color","var(--primary-color)"),c(q,()=>E().totalProcessed),B.style.setProperty("font-size","0.875rem"),B.style.setProperty("color","var(--text-muted)"),c(B,()=>e("hbl.bulkUpdate.totalProcessed","Total Processed")),H.style.setProperty("text-align","center"),Y.style.setProperty("font-size","1.875rem"),Y.style.setProperty("font-weight","700"),Y.style.setProperty("color","var(--success-color)"),c(Y,()=>E().totalSuccess),te.style.setProperty("font-size","0.875rem"),te.style.setProperty("color","var(--text-muted)"),c(te,()=>e("hbl.bulkUpdate.successful","Successful")),oe.style.setProperty("text-align","center"),pe.style.setProperty("font-size","1.875rem"),pe.style.setProperty("font-weight","700"),pe.style.setProperty("color","var(--danger-color)"),c(pe,()=>E().totalFailed),ne.style.setProperty("font-size","0.875rem"),ne.style.setProperty("color","var(--text-muted)"),c(ne,()=>e("hbl.bulkUpdate.failed","Failed")),c(O,T(We,{get when(){return E().totalFailed>0},get children(){var Q=XV(),ce=Q.firstChild,ue=ce.nextSibling;return Q.style.setProperty("margin-top","1rem"),Q.style.setProperty("padding","0.75rem"),Q.style.setProperty("background","var(--danger-light)"),Q.style.setProperty("border-radius","var(--border-radius-sm)"),ce.style.setProperty("font-weight","500"),ce.style.setProperty("margin-bottom","0.5rem"),ce.style.setProperty("color","var(--danger-dark)"),c(ce,()=>e("hbl.bulkUpdate.failedUpdates","Failed Updates:")),ue.style.setProperty("max-height","8rem"),ue.style.setProperty("overflow-y","auto"),c(ue,T(_t,{get each(){return E().results.filter(de=>!de.success)},children:de=>(()=>{var ge=JV(),ye=ge.firstChild;return ge.style.setProperty("font-size","0.875rem"),ge.style.setProperty("color","var(--danger-color)"),ge.style.setProperty("margin-bottom","0.25rem"),c(ge,()=>de.hbl,ye),c(ge,()=>de.error,null),ge})()})),Q}}),null),O})()}),null),be(E=>{var O=N,L=V,G=g,K=e("hbl.bulkUpdate.placeholder","Paste text here. HBL numbers matching 230XXXXXX will be extracted automatically."),q=N,B=V,H=N,Y=V,te={...g,"min-height":"80px"},oe=e("hbl.bulkUpdate.notesPlaceholder","Add any notes about this status update...");return E.e=y(k,O,E.e),E.t=y(D,L,E.t),E.a=y($,G,E.a),K!==E.o&&ir($,"placeholder",E.o=K),E.i=y(_,q,E.i),E.n=y(v,B,E.n),E.s=y(ee,H,E.s),E.h=y(Z,Y,E.h),E.r=y(X,te,E.r),oe!==E.d&&ir(X,"placeholder",E.d=oe),E},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),be(()=>$.value=r()),be(()=>z.value=i()),be(()=>X.value=s()),R})(),GV()]}})};tr(["input"]);var ez=le("<div><div><label></label><select><option value=all>"),tz=le("<div><div><h2>HBL: </h2><button>×</button></div><div><div><strong>:</strong> </div><div><strong>:</strong> </div><div><strong>:</strong><span></span></div><div><strong>:</strong> </div><div><strong>:</strong> </div><div><strong>:</strong> </div><div><strong>:</strong> </div><div><strong>:</strong> </div><div><strong>:</strong> </div><div><strong>:</strong> </div><div><strong>:</strong> <!>, </div><div><strong>:</strong> </div><div><strong>:</strong> <!> kg</div><div><strong>:</strong> </div><div><strong>:</strong> </div><div><strong>:</strong> </div><div><strong>:</strong> </div><div><strong>:</strong> "),rz=le("<div>"),nz=le("<div><div><h1></h1><button>"),iz=le("<option> ");const oz=()=>{const{t}=pr(),[e,r]=Ae([]),[n,i]=Ae(null),[o,s]=Ae([]),[a,l]=Ae("all"),[d,u]=Ae(""),h=P=>{i(P)},f=P=>{s(P)},p=P=>{l(P),m()},m=async()=>{if(!d().trim())return null;let P=await Ki.getHBLS(d().trim(),{guia:a()});P?.error?r([]):r(Object.values(P))};Kn(()=>{});const x=zt(()=>{const P=new Set([2516,2517,2518,2519,2520,2521].map(g=>g));return Array.from(P).sort((g,F)=>g-F)});return(()=>{var P=nz(),g=P.firstChild,F=g.firstChild,V=F.nextSibling;return P.style.setProperty("padding","1rem"),g.style.setProperty("margin-bottom","2rem"),g.style.setProperty("display","flex"),g.style.setProperty("justify-content","space-between"),g.style.setProperty("align-items","center"),F.style.setProperty("font-size","1.5rem"),F.style.setProperty("font-weight","600"),F.style.setProperty("color","var(--text-primary)"),c(F,()=>t("hbl.title","House Bill of Lading Management")),V.style.setProperty("padding","0.75rem 1.5rem"),V.style.setProperty("background","var(--primary-color)"),V.style.setProperty("color","white"),V.style.setProperty("border","none"),V.style.setProperty("border-radius","var(--border-radius-sm)"),V.style.setProperty("cursor","pointer"),V.style.setProperty("font-weight","500"),c(V,()=>t("hbl.addNew","Add New HBL")),c(P,T(QV,{}),null),c(P,T(Vt,{get children(){var N=ez(),R=N.firstChild,M=R.firstChild,C=M.nextSibling,k=C.firstChild;return N.style.setProperty("padding","1rem"),R.style.setProperty("width","13rem"),M.style.setProperty("display","block"),M.style.setProperty("margin-bottom","0.25rem"),M.style.setProperty("font-size","0.875rem"),M.style.setProperty("color","var(--text-muted)"),c(M,()=>t("hbl.guideNumber","Guide Number")),C.addEventListener("change",D=>p(D.currentTarget.value)),C.style.setProperty("width","100%"),C.style.setProperty("padding","0.5rem"),C.style.setProperty("border","1px solid var(--border-color)"),C.style.setProperty("border-radius","var(--border-radius-sm)"),C.style.setProperty("background","var(--surface-color)"),c(k,()=>t("common.all","All")),c(C,T(_t,{get each(){return x()},children:D=>(()=>{var $=iz(),w=$.firstChild;return $.value=D,c($,()=>t("hbl.guideNo","Guide No."),w),c($,D,null),$})()}),null),c(N,T(Ot,{type:"text",get placeholder(){return t("hbl.searchPlaceholder","Search by HBL#, air guide, shipper, consignee, commodity, bag#, identity...")},get value(){return d()},onChange:D=>u(D)}),null),be(()=>C.value=a()),N}}),null),c(P,T(OV,{get hbls(){return e()},onFilterChange:f,onHBLSelect:h}),null),c(P,T(We,{get when(){return n()},get children(){var N=rz();return N.style.setProperty("position","fixed"),N.style.setProperty("top","0"),N.style.setProperty("left","0"),N.style.setProperty("right","0"),N.style.setProperty("bottom","0"),N.style.setProperty("background","rgba(0, 0, 0, 0.5)"),N.style.setProperty("display","flex"),N.style.setProperty("align-items","center"),N.style.setProperty("justify-content","center"),N.style.setProperty("z-index","1000"),c(N,T(Vt,{style:{width:"90%","max-width":"600px","max-height":"90vh","overflow-y":"auto"},get children(){var R=tz(),M=R.firstChild,C=M.firstChild;C.firstChild;var k=C.nextSibling,D=M.nextSibling,$=D.firstChild,w=$.firstChild,_=w.firstChild;w.nextSibling;var v=$.nextSibling,z=v.firstChild,W=z.firstChild;z.nextSibling;var A=v.nextSibling,I=A.firstChild,ee=I.firstChild,Z=I.nextSibling,X=A.nextSibling,se=X.firstChild,U=se.firstChild;se.nextSibling;var E=X.nextSibling,O=E.firstChild,L=O.firstChild;O.nextSibling;var G=E.nextSibling,K=G.firstChild,q=K.firstChild;K.nextSibling;var B=G.nextSibling,H=B.firstChild,Y=H.firstChild;H.nextSibling;var te=B.nextSibling,oe=te.firstChild,pe=oe.firstChild;oe.nextSibling;var ne=te.nextSibling,Q=ne.firstChild,ce=Q.firstChild;Q.nextSibling;var ue=ne.nextSibling,de=ue.firstChild,ge=de.firstChild;de.nextSibling;var ye=ue.nextSibling,fe=ye.firstChild,Se=fe.firstChild,qe=fe.nextSibling,Oe=qe.nextSibling;Oe.nextSibling;var Ie=ye.nextSibling,Be=Ie.firstChild,ke=Be.firstChild;Be.nextSibling;var Ge=Ie.nextSibling,et=Ge.firstChild,ve=et.firstChild,De=et.nextSibling,He=De.nextSibling;He.nextSibling;var Je=Ge.nextSibling,Le=Je.firstChild,Te=Le.firstChild;Le.nextSibling;var he=Je.nextSibling,Ne=he.firstChild,rt=Ne.firstChild;Ne.nextSibling;var re=he.nextSibling,Ue=re.firstChild,we=Ue.firstChild;Ue.nextSibling;var xe=re.nextSibling,je=xe.firstChild,$e=je.firstChild;je.nextSibling;var ft=xe.nextSibling,ct=ft.firstChild,yt=ct.firstChild;return ct.nextSibling,R.style.setProperty("padding","2rem"),M.style.setProperty("display","flex"),M.style.setProperty("justify-content","space-between"),M.style.setProperty("align-items","center"),M.style.setProperty("margin-bottom","1.5rem"),C.style.setProperty("font-size","1.25rem"),C.style.setProperty("font-weight","600"),c(C,()=>n().hbl,null),k.$$click=()=>i(null),k.style.setProperty("background","none"),k.style.setProperty("border","none"),k.style.setProperty("font-size","1.5rem"),k.style.setProperty("cursor","pointer"),k.style.setProperty("color","var(--text-muted)"),D.style.setProperty("display","grid"),D.style.setProperty("gap","1rem"),c(w,()=>t("hbl.airGuide","Air Guide"),_),c($,()=>n().idairguide,null),c(z,()=>t("hbl.airNumber","Air Number"),W),c(v,()=>n().idairnumber,null),c(I,()=>t("hbl.status","Status"),ee),Z.style.setProperty("margin-left","0.5rem"),Z.style.setProperty("padding","0.25rem 0.75rem"),Z.style.setProperty("border-radius","var(--border-radius-sm)"),Z.style.setProperty("font-size","0.875rem"),Z.style.setProperty("color","white"),c(Z,()=>n().idguidestate),c(se,()=>t("hbl.classification","Classification"),U),c(X,()=>n().idclasification,null),c(O,()=>t("hbl.shipper","Shipper"),L),c(E,()=>n().nameshipper,null),c(K,()=>t("hbl.shipperPhone","Shipper Phone"),q),c(G,()=>n().phoneshipper,null),c(H,()=>t("hbl.consignee","Consignee"),Y),c(B,()=>n().consigneeName,null),c(oe,()=>t("hbl.consigneePhone","Consignee Phone"),pe),c(te,()=>n().ctelephone,null),c(Q,()=>t("hbl.identity","Identity"),ce),c(ne,()=>n().cidentity,null),c(de,()=>t("hbl.address","Address"),ge),c(ue,()=>n().street,null),c(fe,()=>t("hbl.city","City"),Se),c(ye,()=>n().address.city,Oe),c(ye,()=>n().address.estate,null),c(Be,()=>t("hbl.commodity","Commodity"),ke),c(Ie,()=>n().namegood,null),c(et,()=>t("hbl.weight","Weight"),ve),c(Ge,()=>n().weight,He),c(Le,()=>t("hbl.quantity","Quantity"),Te),c(Je,()=>n().quantity,null),c(Ne,()=>t("hbl.bagNumber","Bag Number"),rt),c(he,()=>n().bagnumber,null),c(Ue,()=>t("hbl.agency","Agency"),we),c(re,()=>n().agency,null),c(je,()=>t("hbl.guide","Guide"),$e),c(xe,()=>n().guia,null),c(ct,()=>t("hbl.reserveDate","Reserve Date"),yt),c(ft,()=>new Date(n().datereserve).toLocaleDateString(),null),be($t=>($t=n().idguidestate==="ENTREGADO"?"#28a745":n().idguidestate==="ENVIADO"?"#17a2b8":n().idguidestate==="EN BODEGA"?"#007bff":"#6c757d")!=null?Z.style.setProperty("background-color",$t):Z.style.removeProperty("background-color")),R}})),N}}),null),P})()};tr(["click"]);var sz=le("<span>Administrador del Sistema"),az=le("<div><p>No tienes permisos asignados. Contacta al administrador."),lz=le("<div><div><div></div><div><div></div><div>"),cz=le("<div><h4></h4><div>"),dz=le("<div><div></div><div><div></div><div>");const uz=()=>{const t=[{key:"AccountAccess",label:"Contabilidad",description:"Acceso a cuentas, balance general y automatización",icon:"accounts",category:"finance"},{key:"JournalAccess",label:"Libros Contables",description:"Gestión de asientos y registros contables",icon:"books",category:"finance"},{key:"BankingAccess",label:"Consolidaciones Bancarias",description:"Conciliación y análisis bancario",icon:"bank",category:"finance"},{key:"InventoryAccess",label:"Inventario",description:"Control de inventario y productos",icon:"inventory",category:"operations"},{key:"invoiceAccess",label:"Facturación",description:"Creación y gestión de facturas",icon:"invoice",category:"operations"},{key:"HBLAccess",label:"HBL/Logística",description:"Gestión de documentos de carga",icon:"shipping",category:"operations"},{key:"PassportAccess",label:"Pasaportes",description:"Aplicaciones de pasaporte y firma de PDFs",icon:"passport",category:"operations"},{key:"EmployeeAccess",label:"Empleados",description:"Gestión de recursos humanos",icon:"employees",category:"management"},{key:"isAdmin",label:"Administrador",description:"Control total del sistema",icon:"admin",category:"admin"}],e=s=>s==="isAdmin"?Xt.state?.profile?.isAdmin||!1:Xt.hasPermission(s),r=s=>{switch(s){case"finance":return"Finanzas";case"operations":return"Operaciones";case"management":return"Gestión";case"admin":return"Administración";default:return s}},n=s=>{switch(s){case"finance":return"var(--primary-color)";case"operations":return"var(--secondary-color)";case"management":return"var(--accent-color)";case"admin":return"var(--error-color)";default:return"var(--text-muted)"}},i=()=>{const s={};return t.forEach(a=>{e(a.key)&&(s[a.category]||(s[a.category]=[]),s[a.category].push(a))}),s},o=()=>t.filter(s=>e(s.key)).length;return T(Vt,{title:"Resumen de Accesos",get subtitle(){return`${o()} módulos disponibles para tu perfil`},get children(){var s=lz(),a=s.firstChild,l=a.firstChild,d=l.nextSibling,u=d.firstChild,h=u.nextSibling;return s.style.setProperty("display","flex"),s.style.setProperty("flex-direction","column"),s.style.setProperty("gap","1.5rem"),a.style.setProperty("display","flex"),a.style.setProperty("align-items","center"),a.style.setProperty("gap","1rem"),a.style.setProperty("padding","1rem"),a.style.setProperty("background","var(--background-color)"),a.style.setProperty("border-radius","var(--border-radius-sm)"),a.style.setProperty("border","1px solid var(--border-color)"),l.style.setProperty("width","48px"),l.style.setProperty("height","48px"),l.style.setProperty("border-radius","50%"),l.style.setProperty("background","var(--primary-color)"),l.style.setProperty("display","flex"),l.style.setProperty("align-items","center"),l.style.setProperty("justify-content","center"),l.style.setProperty("color","white"),l.style.setProperty("font-size","1.5rem"),l.style.setProperty("font-weight","600"),c(l,()=>Xt.state?.user?.displayName?.[0]?.toUpperCase()||"U"),u.style.setProperty("font-weight","600"),u.style.setProperty("color","var(--text-primary)"),c(u,()=>Xt.state?.user?.displayName||Xt.state?.user?.email),h.style.setProperty("font-size","0.875rem"),h.style.setProperty("color","var(--text-muted)"),c(h,T(We,{get when(){return Xt.state?.profile?.isAdmin},fallback:"Usuario Regular",get children(){var f=sz();return f.style.setProperty("color","var(--error-color)"),f.style.setProperty("font-weight","500"),f}})),c(s,T(_t,{get each(){return Object.entries(i())},children:([f,p])=>(()=>{var m=cz(),x=m.firstChild,P=x.nextSibling;return x.style.setProperty("font-size","0.875rem"),x.style.setProperty("text-transform","uppercase"),x.style.setProperty("letter-spacing","0.5px"),x.style.setProperty("margin-bottom","0.75rem"),x.style.setProperty("font-weight","600"),c(x,()=>r(f)),P.style.setProperty("display","grid"),P.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(250px, 1fr))"),P.style.setProperty("gap","0.75rem"),c(P,T(_t,{each:p,children:g=>(()=>{var F=dz(),V=F.firstChild,N=V.nextSibling,R=N.firstChild,M=R.nextSibling;return F.style.setProperty("display","flex"),F.style.setProperty("align-items","flex-start"),F.style.setProperty("gap","0.75rem"),F.style.setProperty("padding","0.75rem"),F.style.setProperty("background","var(--background-color)"),F.style.setProperty("border-radius","var(--border-radius-sm)"),F.style.setProperty("border","1px solid var(--border-color)"),F.style.setProperty("transition","all 0.2s ease"),V.style.setProperty("min-width","32px"),V.style.setProperty("min-height","32px"),V.style.setProperty("border-radius","8px"),V.style.setProperty("display","flex"),V.style.setProperty("align-items","center"),V.style.setProperty("justify-content","center"),c(V,T(Gr,{get name(){return g.icon},size:"1rem"})),N.style.setProperty("flex","1"),R.style.setProperty("font-weight","500"),R.style.setProperty("margin-bottom","0.25rem"),R.style.setProperty("color","var(--text-primary)"),c(R,()=>g.label),M.style.setProperty("font-size","0.8rem"),M.style.setProperty("color","var(--text-muted)"),M.style.setProperty("line-height","1.4"),c(M,()=>g.description),be(C=>{var k=`${n(f)}20`,D=n(f);return k!==C.e&&((C.e=k)!=null?V.style.setProperty("background",k):V.style.removeProperty("background")),D!==C.t&&((C.t=D)!=null?V.style.setProperty("color",D):V.style.removeProperty("color")),C},{e:void 0,t:void 0}),F})()})),be(g=>(g=n(f))!=null?x.style.setProperty("color",g):x.style.removeProperty("color")),m})()}),null),c(s,T(We,{get when(){return o()===0},get children(){var f=az(),p=f.firstChild;return f.style.setProperty("text-align","center"),f.style.setProperty("padding","2rem"),f.style.setProperty("color","var(--text-muted)"),c(f,T(Gr,{name:"lock",size:"2rem",style:{"margin-bottom":"1rem",opacity:"0.5"}}),p),f}}),null),s}})};var Gc=le("<div>"),hz=le("<div>$124,350"),pz=le("<div>+12% from last month"),fz=le("<div>247"),yz=le("<div>18"),mz=le("<div>$89,250"),gz=le("<div><div><div></div><div></div></div><div><div></div><div></div></div><div><div></div><div>");const vz=()=>{const{t}=pr(),e={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem","margin-bottom":"2rem"},r={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(300px, 1fr))",gap:"1.5rem"},n={"font-size":"2rem","font-weight":"700",color:"var(--primary-color)",margin:"0.5rem 0"},i={"font-size":"0.875rem",color:"var(--text-muted)","text-transform":"uppercase","letter-spacing":"0.5px"};return T(Bo,{get title(){return t("dashboard.title")},get children(){return[(()=>{var o=Gc();return o.style.setProperty("margin-bottom","2rem"),c(o,T(uz,{})),o})(),T(We,{get when(){return Xt.state?.profile?.isAdmin},get children(){return[(()=>{var o=Gc();return y(o,e),c(o,T(Vt,{get title(){return t("dashboard.totalRevenue")},get subtitle(){return t("dashboard.overview")},get children(){return[(()=>{var s=hz();return be(a=>y(s,n,a)),s})(),(()=>{var s=pz();return be(a=>y(s,i,a)),s})()]}}),null),c(o,T(Vt,{get title(){return t("dashboard.employeeCount")},get subtitle(){return t("dashboard.current")},get children(){return[(()=>{var s=fz();return be(a=>y(s,n,a)),s})(),(()=>{var s=Gc();return c(s,()=>t("dashboard.newHires")),be(a=>y(s,i,a)),s})()]}}),null),c(o,T(Vt,{get title(){return t("dashboard.pendingInvoices")},get subtitle(){return t("dashboard.outstanding")},get children(){return[(()=>{var s=yz();return be(a=>y(s,n,a)),s})(),(()=>{var s=Gc();return c(s,()=>t("dashboard.totalOutstanding")),be(a=>y(s,i,a)),s})()]}}),null),c(o,T(Vt,{get title(){return t("dashboard.cashBalance")},get subtitle(){return t("accounts.title")},get children(){return[(()=>{var s=mz();return be(a=>y(s,n,a)),s})(),(()=>{var s=Gc();return c(s,()=>t("dashboard.lastUpdatedToday")),be(a=>y(s,i,a)),s})()]}}),null),o})(),(()=>{var o=Gc();return y(o,r),c(o,T(Vt,{get title(){return t("dashboard.quickActions")},get subtitle(){return t("dashboard.commonTasks")},get children(){var s=Gc();return s.style.setProperty("display","flex"),s.style.setProperty("flex-direction","column"),s.style.setProperty("gap","1rem"),c(s,T(mt,{variant:"primary",get children(){return t("invoices.createNew")}}),null),c(s,T(mt,{variant:"secondary",get children(){return t("employees.addEmployee")}}),null),c(s,T(mt,{variant:"outline",get children(){return t("dashboard.generateReport")}}),null),s}}),null),c(o,T(Vt,{get title(){return t("dashboard.recentActivity")},get subtitle(){return t("dashboard.latestUpdates")},get children(){var s=gz(),a=s.firstChild,l=a.firstChild,d=l.nextSibling,u=a.nextSibling,h=u.firstChild,f=h.nextSibling,p=u.nextSibling,m=p.firstChild,x=m.nextSibling;return s.style.setProperty("display","flex"),s.style.setProperty("flex-direction","column"),s.style.setProperty("gap","0.75rem"),a.style.setProperty("border-bottom","1px solid var(--border-color)"),a.style.setProperty("padding-bottom","0.5rem"),l.style.setProperty("font-weight","500"),c(l,()=>t("dashboard.invoicePaid")),d.style.setProperty("font-size","0.875rem"),d.style.setProperty("color","var(--text-muted)"),c(d,()=>t("dashboard.hoursAgo")),u.style.setProperty("border-bottom","1px solid var(--border-color)"),u.style.setProperty("padding-bottom","0.5rem"),h.style.setProperty("font-weight","500"),c(h,()=>t("dashboard.newEmployeeOnboarded")),f.style.setProperty("font-size","0.875rem"),f.style.setProperty("color","var(--text-muted)"),c(f,()=>t("dashboard.dayAgo")),m.style.setProperty("font-weight","500"),c(m,()=>t("dashboard.monthlyReportGenerated")),x.style.setProperty("font-size","0.875rem"),x.style.setProperty("color","var(--text-muted)"),c(x,()=>t("dashboard.daysAgo")),s}}),null),o})(),T(We,{get when(){return Xt.hasPermission("invoiceAccess")},get children(){return T(JO,{})}})]}})]}})},bz=()=>{const t=Date.now().toString(36),e=Math.random().toString(36).substring(2,8);return`SIG-${t}-${e}`.toUpperCase()},Pz=async(t,e=7)=>{try{const r=Xt.state.user;if(!r)throw new Error("Usuario no autenticado");const n=bz(),i=In.now(),o=In.fromDate(new Date(Date.now()+e*24*60*60*1e3)),s={id:n,...t,requestedBy:r.uid,requestedByName:r.displayName||r.email||"Unknown",createdAt:i,expiresAt:o,status:"pending"};return await Wb(cl(ws,"signatureRequests",n),s),s}catch(r){throw console.error("Error creating signature request:",r),new Error("Error al crear la solicitud de firma")}},a2=async t=>{try{console.log("getSignatureRequest - Fetching request ID:",t);const e=cl(ws,"signatureRequests",t),r=await qb(e);if(console.log("getSignatureRequest - Document exists:",r.exists()),!r.exists())return console.log("getSignatureRequest - Document not found"),null;const n=r.data();return console.log("getSignatureRequest - Document data:",n),n.expiresAt.toDate()<new Date&&n.status==="pending"&&(console.log("getSignatureRequest - Request expired, updating status"),await Yp(e,{status:"expired"}),n.status="expired"),console.log("getSignatureRequest - Returning data:",n),n}catch(e){return console.error("Error getting signature request:",e),null}},xz=async t=>{try{const e=await a2(t.requestId);if(!e)throw new Error("Solicitud de firma no encontrada");if(e.status!=="pending")throw new Error(`La solicitud está ${e.status}. No se puede firmar.`);let r;try{const s=BA(jA,`signatures/${e.clientId}/${t.requestId}.png`);await ZD(s,t.signatureDataUrl,"data_url"),r=await QD(s),console.log("Signature uploaded to Firebase Storage successfully")}catch(s){console.warn("Firebase Storage upload failed, using base64 fallback:",s),r=t.signatureDataUrl}const n=s=>Object.fromEntries(Object.entries(s).filter(([a,l])=>l!==void 0)),i=n({status:"signed",signedAt:In.fromDate(t.signedAt),signatureUrl:r,deviceInfo:t.deviceInfo});await Yp(cl(ws,"signatureRequests",t.requestId),i);const o=n({clientId:e.clientId,clientName:e.clientName,requestId:t.requestId,signatureUrl:r,signedAt:In.fromDate(t.signedAt),documentType:e.documentType,documentReference:e.documentReference,metadata:e.metadata,storageMethod:r.startsWith("data:")?"base64":"storage"});return await Wb(cl(ws,"clientSignatures",`${e.clientId}_${t.requestId}`),o),r}catch(e){throw console.error("Error saving signature:",e),e}},Sz=async t=>{try{const e=Xt.state.user;if(!e)throw new Error("Usuario no autenticado");let r=Bb(Nb(ws,"signatureRequests"),gu("requestedBy","==",e.uid)),i=(await Hb(r)).docs.map(o=>o.data());return i.sort((o,s)=>s.createdAt.toMillis()-o.createdAt.toMillis()),t?.status,t?.clientId,t?.limit,i}catch(e){return console.error("Error getting signature requests:",e),[]}},wz=async t=>{try{const e=Xt.state.user;if(!e)throw new Error("Usuario no autenticado");const r=await a2(t);if(!r)throw new Error("Solicitud no encontrada");if(r.requestedBy!==e.uid)throw new Error("No autorizado para cancelar esta solicitud");if(r.status!=="pending")throw new Error("Solo se pueden cancelar solicitudes pendientes");await Yp(cl(ws,"signatureRequests",t),{status:"cancelled"})}catch(e){throw console.error("Error cancelling signature request:",e),e}},ey=t=>`${window.location.origin}/#/sign/${t}`,Cz=async t=>{if(!t.signatureUrl)return null;if(t.signatureUrl.startsWith("data:"))return{url:t.signatureUrl,storageMethod:"base64"};try{const e=BA(jA,`signatures/${t.clientId}/${t.id}.png`),r=await JD(e);return{url:t.signatureUrl,storageRef:e.fullPath,metadata:{size:r.size,timeCreated:r.timeCreated,updated:r.updated,contentType:r.contentType||"image/png",name:r.name},storageMethod:"storage"}}catch(e){return console.warn("Could not get storage metadata:",e),{url:t.signatureUrl,storageMethod:"storage"}}},_z=t=>{if(t===0)return"0 Bytes";const e=1024,r=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,n)).toFixed(2))+" "+r[n]};var Az=le("<div><div><div>⏳</div><p>Cargando solicitud de firma...</p><p>Conectando a Firestore (máximo 5 segundos)"),kz=le("<div><div><div><div>❌</div><h2>Error</h2><p>"),Ez=le("<div><div><div><div>✅</div><h2>¡Firma Guardada en Firestore!</h2><p>Su firma ha sido guardada exitosamente en la base de datos.</p><p>Puede cerrar esta ventana."),Tz=le("<p><strong>Teléfono:</strong> "),Iz=le("<p><strong>Tipo de Documento:</strong> "),Nz=le("<p><strong>Notas:</strong> "),Rz=le("<div>"),Dz=le("<div><div><div><h1>Solicitud de Firma (Firestore)</h1><p></p></div><div><div><h3>Información del Cliente</h3><div><p><strong>Nombre:</strong> </p><p><strong>Email:</strong> </p></div></div><div><h3>Firme en el Área Indicada</h3><canvas></canvas><p>Use su dedo o mouse para dibujar su firma</p></div><div><button>Limpiar</button><button></button></div><p>Al firmar, usted acepta que esta firma electrónica tiene la misma validez legal que una firma manuscrita.");const Lz=()=>{const t=jw(),[e,r]=Ae(null),[n,i]=Ae(!0),[o,s]=Ae(""),[a,l]=Ae(null),[d,u]=Ae(!1),[h,f]=Ae(!1),[p,m]=Ae(!1),[x,P]=Ae(!1);Kn(()=>{const A=t.id;if(!A){s("ID de solicitud inválido"),i(!1);return}const I=setTimeout(()=>{console.log("Firestore request timed out - using fallback"),s("La solicitud tardó demasiado tiempo. Usando datos de prueba."),s(""),i(!1)},5e3);(async()=>{try{console.log("Attempting Firestore fetch...");const Z=await a2(A);clearTimeout(I),Z?Z.status==="expired"?s("Esta solicitud de firma ha expirado"):Z.status==="signed"?s("Esta solicitud ya ha sido firmada"):Z.status==="cancelled"?s("Esta solicitud ha sido cancelada"):(console.log("Firestore data loaded successfully"),r(Z),setTimeout(g,100)):s("Solicitud de firma no encontrada")}catch(Z){clearTimeout(I),console.error("Firestore error:",Z),s("Error al cargar desde Firestore: "+(Z instanceof Error?Z.message:"Unknown error"))}finally{console.log("setLoading(false);",e()),i(!1)}})()});const g=()=>{const A=a();if(!A)return;const I=A.getContext("2d");if(!I)return;const ee=A.getBoundingClientRect();A.width=ee.width,A.height=ee.height,I.strokeStyle="#000",I.lineWidth=2,I.lineCap="round",I.lineJoin="round",I.fillStyle="white",I.fillRect(0,0,A.width,A.height)},F=A=>{u(!0);const I=a();if(!I)return;const ee=I.getBoundingClientRect(),Z=I.getContext("2d");if(!Z)return;let X,se;A instanceof MouseEvent?(X=A.clientX-ee.left,se=A.clientY-ee.top):(X=A.touches[0].clientX-ee.left,se=A.touches[0].clientY-ee.top),Z.beginPath(),Z.moveTo(X,se)},V=A=>{if(!d())return;const I=a();if(!I)return;const ee=I.getBoundingClientRect(),Z=I.getContext("2d");if(!Z)return;let X,se;A instanceof MouseEvent?(X=A.clientX-ee.left,se=A.clientY-ee.top):(A.preventDefault(),X=A.touches[0].clientX-ee.left,se=A.touches[0].clientY-ee.top),Z.lineTo(X,se),Z.stroke(),f(!0)},N=()=>{u(!1)},R=()=>{const A=a();if(!A)return;const I=A.getContext("2d");I&&(I.fillStyle="white",I.fillRect(0,0,A.width,A.height),f(!1))},M=async()=>{const A=a(),I=e();if(!(!A||!I||!h())){m(!0),s("");try{const ee=A.toDataURL("image/png");console.log("Attempting to save signature to Firestore...");const Z=xz({requestId:e()?.id,signatureDataUrl:ee,signedAt:new Date,deviceInfo:{userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language}}),X=new Promise((se,U)=>{setTimeout(()=>U(new Error("Save operation timed out")),1e4)});await Promise.race([Z,X]),console.log("Signature saved to Firestore successfully"),P(!0)}catch(ee){console.error("Error saving signature:",ee),ee.message.includes("timed out")?s("La operación de guardado tardó demasiado tiempo. Intente nuevamente."):s(ee.message||"Error al guardar la firma")}finally{m(!1)}}},C={"min-height":"100vh",background:"var(--background-secondary, #f5f5f5)",padding:"1rem",display:"flex","align-items":"center","justify-content":"center"},k={"max-width":"500px",width:"100%",background:"white","border-radius":"8px","box-shadow":"0 4px 6px rgba(0, 0, 0, 0.1)",overflow:"hidden"},D={background:"#6c5ce7",color:"white",padding:"2rem","text-align":"center"},$={padding:"2rem"},w={width:"100%",height:"300px",border:"2px dashed #ddd","border-radius":"4px",cursor:"crosshair","touch-action":"none",background:"white"},_={width:"100%",padding:"1rem","border-radius":"4px",border:"none","font-weight":"600",cursor:"pointer",transition:"all 0.2s ease"},v=()=>(()=>{var A=Az(),I=A.firstChild,ee=I.firstChild,Z=ee.nextSibling,X=Z.nextSibling;return I.style.setProperty("text-align","center"),ee.style.setProperty("font-size","2rem"),ee.style.setProperty("margin-bottom","1rem"),X.style.setProperty("font-size","0.875rem"),X.style.setProperty("color","#666"),be(se=>y(A,C,se)),A})();o()&&e();const z=()=>(()=>{var A=kz(),I=A.firstChild,ee=I.firstChild,Z=ee.firstChild,X=Z.nextSibling,se=X.nextSibling;return ee.style.setProperty("padding","3rem"),ee.style.setProperty("text-align","center"),Z.style.setProperty("font-size","3rem"),Z.style.setProperty("margin-bottom","1rem"),X.style.setProperty("margin-bottom","1rem"),X.style.setProperty("color","#e74c3c"),se.style.setProperty("color","#666"),c(se,o),be(U=>{var E=C,O=k;return U.e=y(A,E,U.e),U.t=y(I,O,U.t),U},{e:void 0,t:void 0}),A})();let W=()=>(()=>{var A=Ez(),I=A.firstChild,ee=I.firstChild,Z=ee.firstChild,X=Z.nextSibling,se=X.nextSibling,U=se.nextSibling;return ee.style.setProperty("padding","3rem"),ee.style.setProperty("text-align","center"),Z.style.setProperty("font-size","4rem"),Z.style.setProperty("margin-bottom","1rem"),X.style.setProperty("margin-bottom","1rem"),X.style.setProperty("color","#27ae60"),se.style.setProperty("color","#666"),se.style.setProperty("margin-bottom","2rem"),U.style.setProperty("font-size","0.875rem"),U.style.setProperty("color","#666"),be(E=>{var O=C,L=k;return E.e=y(A,O,E.e),E.t=y(I,L,E.t),E},{e:void 0,t:void 0}),A})();return[T(We,{get when(){return x()},get children(){return T(W,{})}}),T(We,{get when(){return Ve(()=>!!o())()&&!e()},get children(){return T(z,{})}}),T(We,{get when(){return n()},get children(){return T(v,{})}}),T(We,{get when(){return Ve(()=>!!e())()&&!x()},get children(){var A=Dz(),I=A.firstChild,ee=I.firstChild,Z=ee.firstChild,X=Z.nextSibling,se=ee.nextSibling,U=se.firstChild,E=U.firstChild,O=E.nextSibling,L=O.firstChild,G=L.firstChild;G.nextSibling;var K=L.nextSibling,q=K.firstChild;q.nextSibling;var B=U.nextSibling,H=B.firstChild,Y=H.nextSibling,te=Y.nextSibling,oe=B.nextSibling,pe=oe.firstChild,ne=pe.nextSibling,Q=oe.nextSibling;return y(ee,D),Z.style.setProperty("font-size","1.5rem"),Z.style.setProperty("margin-bottom","0.5rem"),X.style.setProperty("opacity","0.9"),X.style.setProperty("font-size","0.875rem"),c(X,()=>e()?.requestedByName),y(se,$),U.style.setProperty("margin-bottom","2rem"),E.style.setProperty("margin-bottom","1rem"),O.style.setProperty("background","#f8f9fa"),O.style.setProperty("padding","1rem"),O.style.setProperty("border-radius","4px"),O.style.setProperty("font-size","0.875rem"),c(L,()=>e()?.clientName,null),c(K,()=>e()?.clientEmail,null),c(O,T(We,{get when(){return e()?.clientPhone},get children(){var ce=Tz(),ue=ce.firstChild;return ue.nextSibling,c(ce,()=>e()?.clientPhone,null),ce}}),null),c(O,T(We,{get when(){return e()?.documentType},get children(){var ce=Iz(),ue=ce.firstChild;return ue.nextSibling,c(ce,()=>e()?.documentType,null),ce}}),null),c(O,T(We,{get when(){return e()?.notes},get children(){var ce=Nz(),ue=ce.firstChild;return ue.nextSibling,ce.style.setProperty("margin-top","0.5rem"),c(ce,()=>e()?.notes,null),ce}}),null),c(se,T(We,{get when(){return o()},get children(){var ce=Rz();return ce.style.setProperty("padding","1rem"),ce.style.setProperty("background","#fee"),ce.style.setProperty("color","#c33"),ce.style.setProperty("border-radius","4px"),ce.style.setProperty("margin-bottom","1rem"),c(ce,o),ce}}),B),B.style.setProperty("margin-bottom","1.5rem"),H.style.setProperty("margin-bottom","1rem"),Y.$$touchend=N,Y.$$touchmove=V,Y.$$touchstart=F,Y.addEventListener("mouseleave",N),Y.$$mouseup=N,Y.$$mousemove=V,Y.$$mousedown=F,V1(l,Y),y(Y,w),te.style.setProperty("margin-top","0.5rem"),te.style.setProperty("font-size","0.8rem"),te.style.setProperty("color","#666"),te.style.setProperty("text-align","center"),oe.style.setProperty("display","flex"),oe.style.setProperty("gap","1rem"),oe.style.setProperty("margin-bottom","1rem"),pe.$$click=R,ne.$$click=M,c(ne,T(We,{get when(){return p()},fallback:"Guardar",children:"Guardando..."})),Q.style.setProperty("font-size","0.75rem"),Q.style.setProperty("color","#666"),Q.style.setProperty("text-align","center"),Q.style.setProperty("line-height","1.4"),be(ce=>{var ue=C,de=k,ge={..._,background:"#f8f9fa",color:"#333"},ye=!h()||p(),fe={..._,background:"#6c5ce7",color:"white"},Se=!h()||p();return ce.e=y(A,ue,ce.e),ce.t=y(I,de,ce.t),ce.a=y(pe,ge,ce.a),ye!==ce.o&&(pe.disabled=ce.o=ye),ce.i=y(ne,fe,ce.i),Se!==ce.n&&(ne.disabled=ce.n=Se),ce},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),A}})]};tr(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","click"]);var ty=le("<div>"),$z=le('<div><div><div><label>Días hasta expiración</label><select><option value=1>1 día</option><option value=3>3 días</option><option value=7>7 días</option><option value=14>14 días</option><option value=30>30 días</option></select></div><div><label>Notas</label><textarea placeholder="Notas adicionales para el cliente..."rows=3></textarea></div></div><div>'),Fz=le("<div><div><div>📋</div><p>Comparta este enlace con <strong></strong></p></div><div></div><div></div><p>El enlace expirará el "),Mz=le("<div><span>📁 </span><span>🗃️ </span><span>📅 "),Oz=le('<div><div><h3></h3><p>Firmado el: </p></div><div><img alt="Firma del cliente"></div><div>'),Bz=le("<span>"),jz=le("<div><div><div><p>Envíe solicitudes de firma a sus clientes por email o SMS"),Vz=le("<div><div>⏳</div><p>Cargando solicitudes..."),zz=le("<div><p>No hay solicitudes de firma. Cree una nueva para empezar."),Uz=le("<span> • "),qz=le("<div><strong>Documento:</strong> "),Hz=le("<div><strong>Firmado el:</strong> "),Wz=le("<div><strong>Notas:</strong> "),Gz=le("<div><div><div><h4></h4><p></p></div></div><div><div><strong>ID:</strong> </div><div><strong>Creado:</strong> </div><div><strong>Expira:</strong> </div></div><div>");const Kz=()=>{const t=PL(),e=Fm(),[r,n]=Ae([]),[i,o]=Ae(!1),[s,a]=Ae(null),[l,d]=Ae(!1),[u,h]=Ae(""),[f,p]=Ae(""),[m,x]=Ae(""),[P,g]=Ae(""),[F,V]=Ae(""),[N,R]=Ae(""),[M,C]=Ae(""),[k,D]=Ae(""),[$,w]=Ae("7");Kn(()=>{_()});const _=async()=>{o(!0);try{const U=await Sz();console.log(U),n(U)}catch{h("Error al cargar las solicitudes")}finally{o(!1)}},v=async()=>{if(console.log("handleCreateRequest called"),console.log("Form values:",{clientId:m(),clientName:P(),clientEmail:F(),clientPhone:N(),documentType:M(),notes:k(),expirationDays:$()}),!m()||!P()||!F()){h("Por favor complete todos los campos requeridos");return}d(!0),h(""),p("");try{console.log("Creating signature request...");const U=await Pz({clientId:m(),clientName:P(),clientEmail:F(),clientPhone:N(),documentType:M(),notes:k()},parseInt($()));console.log("Request created successfully:",U),p("Solicitud creada exitosamente"),t.hideModal(),W(),await _(),I(U)}catch(U){console.error("Error creating request:",U),h(U.message||"Error al crear la solicitud")}finally{d(!1)}},z=async U=>{if(confirm("¿Está seguro de cancelar esta solicitud?"))try{await wz(U),await _(),p("Solicitud cancelada")}catch(E){h(E.message||"Error al cancelar la solicitud")}},W=()=>{x(""),g(""),V(""),R(""),C(""),D(""),w("7")},A=()=>{t.showModal({title:"Nueva Solicitud de Firma",children:(()=>{var U=$z(),E=U.firstChild,O=E.firstChild,L=O.firstChild,G=L.nextSibling,K=O.nextSibling,q=K.firstChild,B=q.nextSibling,H=E.nextSibling;return U.style.setProperty("padding","1.5rem"),c(U,T(We,{get when(){return u()},get children(){var Y=ty();return Y.style.setProperty("padding","1rem"),Y.style.setProperty("margin-bottom","1rem"),Y.style.setProperty("background","var(--error-light)"),Y.style.setProperty("color","var(--error-dark)"),Y.style.setProperty("border-radius","var(--border-radius-sm)"),c(Y,u),Y}}),E),E.style.setProperty("display","grid"),E.style.setProperty("gap","1rem"),c(E,T(Ot,{label:"ID del Cliente *",get value(){return m()},onChange:x,placeholder:"CLI-001",required:!0}),O),c(E,T(Ot,{label:"Nombre del Cliente *",get value(){return P()},onChange:g,placeholder:"Juan Pérez",required:!0}),O),c(E,T(Ot,{label:"Email del Cliente *",get value(){return F()},onChange:V,type:"email",placeholder:"cliente@ejemplo.com",required:!0}),O),c(E,T(Ot,{label:"Teléfono del Cliente",get value(){return N()},onChange:R,placeholder:"+1 234 567 8900"}),O),c(E,T(Ot,{label:"Tipo de Documento",get value(){return M()},onChange:C,placeholder:"Ej: Contrato, Factura, Pasaporte"}),O),L.style.setProperty("display","block"),L.style.setProperty("margin-bottom","0.5rem"),L.style.setProperty("font-weight","500"),L.style.setProperty("color","var(--text-primary)"),G.addEventListener("change",Y=>w(Y.target.value)),G.style.setProperty("width","100%"),G.style.setProperty("padding","0.75rem"),G.style.setProperty("border","1px solid var(--border-color)"),G.style.setProperty("border-radius","var(--border-radius-sm)"),G.style.setProperty("background","white"),q.style.setProperty("display","block"),q.style.setProperty("margin-bottom","0.5rem"),q.style.setProperty("font-weight","500"),q.style.setProperty("color","var(--text-primary)"),B.$$input=Y=>D(Y.target.value),B.style.setProperty("width","100%"),B.style.setProperty("padding","0.75rem"),B.style.setProperty("border","1px solid var(--border-color)"),B.style.setProperty("border-radius","var(--border-radius-sm)"),B.style.setProperty("resize","vertical"),B.style.setProperty("font-family","inherit"),H.style.setProperty("display","flex"),H.style.setProperty("gap","1rem"),H.style.setProperty("margin-top","2rem"),H.style.setProperty("justify-content","flex-end"),c(H,T(mt,{variant:"outline",onClick:()=>{t.hideModal(),W(),h("")},children:"Cancelar"}),null),c(H,T(mt,{variant:"primary",onClick:v,get disabled(){return l()},get children(){return T(We,{get when(){return l()},fallback:"Crear Solicitud",children:"Creando..."})}}),null),be(()=>G.value=$()),be(()=>B.value=k()),U})(),onClose:()=>{W(),h("")}})},I=U=>{t.showModal({title:"Enlace de Firma Generado",children:(()=>{var E=Fz(),O=E.firstChild,L=O.firstChild,G=L.nextSibling,K=G.firstChild,q=K.nextSibling,B=O.nextSibling,H=B.nextSibling,Y=H.nextSibling;return Y.firstChild,E.style.setProperty("padding","1.5rem"),O.style.setProperty("text-align","center"),O.style.setProperty("margin-bottom","2rem"),L.style.setProperty("font-size","4rem"),L.style.setProperty("margin-bottom","1rem"),G.style.setProperty("color","var(--text-muted)"),c(q,()=>U.clientName),B.style.setProperty("padding","1rem"),B.style.setProperty("background","var(--background-secondary)"),B.style.setProperty("border-radius","var(--border-radius-sm)"),B.style.setProperty("word-break","break-all"),B.style.setProperty("font-family","monospace"),B.style.setProperty("font-size","0.875rem"),B.style.setProperty("text-align","center"),B.style.setProperty("margin-bottom","1rem"),c(B,()=>ey(U.id)),H.style.setProperty("display","grid"),H.style.setProperty("gap","0.75rem"),c(H,T(mt,{variant:"primary",onClick:()=>{ee(U.id)},style:{width:"100%"},get children(){return[T(Gr,{name:"copy",size:"1rem",style:{"margin-right":"0.5rem"}}),"Copiar Enlace"]}}),null),c(H,T(mt,{variant:"secondary",onClick:()=>{const oe=`Por favor firme el documento usando este enlace: ${ey(U.id)}`;window.open(`mailto:${U.clientEmail}?subject=Solicitud de Firma&body=${encodeURIComponent(oe)}`)},style:{width:"100%"},get children(){return[T(Gr,{name:"email",size:"1rem",style:{"margin-right":"0.5rem"}}),"Enviar por Email"]}}),null),c(H,T(We,{get when(){return U.clientPhone},get children(){return T(mt,{variant:"secondary",onClick:()=>{const oe=`Por favor firme el documento: ${ey(U.id)}`;window.open(`sms:${U.clientPhone}?body=${encodeURIComponent(oe)}`)},style:{width:"100%"},get children(){return[T(Gr,{name:"phone",size:"1rem",style:{"margin-right":"0.5rem"}}),"Enviar por SMS"]}})}}),null),Y.style.setProperty("margin-top","1rem"),Y.style.setProperty("font-size","0.8rem"),Y.style.setProperty("color","var(--text-muted)"),Y.style.setProperty("text-align","center"),c(Y,()=>U.expiresAt.toDate().toLocaleDateString(),null),E})()})},ee=U=>{const E=ey(U);navigator.clipboard.writeText(E),p("Enlace copiado al portapapeles"),setTimeout(()=>p(""),3e3)},Z=U=>{const E={imageData:U.signatureUrl,clientName:U.clientName,requestId:U.id,signedAt:U.signedAt?.toDate().toISOString()};sessionStorage.setItem("pendingSignature",JSON.stringify(E)),t.hideModal(),e("/pdf-signature")},X=async U=>{const E=await Cz(U);t.showModal({title:"Firma del Cliente",children:(()=>{var O=Oz(),L=O.firstChild,G=L.firstChild,K=G.nextSibling;K.firstChild;var q=L.nextSibling,B=q.firstChild,H=q.nextSibling;return O.style.setProperty("padding","1.5rem"),O.style.setProperty("text-align","center"),L.style.setProperty("margin-bottom","1.5rem"),G.style.setProperty("margin-bottom","0.5rem"),c(G,()=>U.clientName),K.style.setProperty("color","var(--text-muted)"),K.style.setProperty("font-size","0.875rem"),c(K,()=>U.signedAt?.toDate().toLocaleString(),null),c(L,T(We,{get when(){return E?.metadata},get children(){var Y=Mz(),te=Y.firstChild;te.firstChild;var oe=te.nextSibling;oe.firstChild;var pe=oe.nextSibling;return pe.firstChild,Y.style.setProperty("margin-top","0.5rem"),Y.style.setProperty("padding","0.5rem"),Y.style.setProperty("background","var(--background-secondary)"),Y.style.setProperty("border-radius","var(--border-radius-sm)"),Y.style.setProperty("font-size","0.75rem"),Y.style.setProperty("color","var(--text-muted)"),te.style.setProperty("margin-right","1rem"),c(te,()=>_z(E.metadata.size),null),oe.style.setProperty("margin-right","1rem"),c(oe,()=>E.storageMethod==="storage"?"Storage":"Base64",null),c(pe,()=>new Date(E.metadata.timeCreated).toLocaleDateString(),null),Y}}),null),q.style.setProperty("border","2px solid var(--border-color)"),q.style.setProperty("border-radius","var(--border-radius)"),q.style.setProperty("padding","1rem"),q.style.setProperty("background","white"),q.style.setProperty("max-width","100%"),q.style.setProperty("overflow","hidden"),B.style.setProperty("max-width","100%"),B.style.setProperty("max-height","400px"),B.style.setProperty("height","auto"),B.style.setProperty("display","block"),B.style.setProperty("margin","0 auto"),H.style.setProperty("margin-top","1.5rem"),H.style.setProperty("display","flex"),H.style.setProperty("gap","1rem"),H.style.setProperty("justify-content","center"),H.style.setProperty("flex-wrap","wrap"),c(H,T(mt,{variant:"primary",onClick:()=>Z(U),get children(){return[T(Gr,{name:"document",size:"1rem",style:{"margin-right":"0.5rem"}}),"Usar en PDF"]}}),null),c(H,T(mt,{variant:"secondary",onClick:()=>{const Y=document.createElement("a");Y.download=`firma-${U.clientName}-${U.id}.png`,Y.href=U.signatureUrl,Y.click()},get children(){return[T(Gr,{name:"download",size:"1rem",style:{"margin-right":"0.5rem"}}),"Descargar"]}}),null),c(H,T(mt,{variant:"outline",onClick:()=>t.hideModal(),children:"Cerrar"}),null),be(()=>ir(B,"src",U.signatureUrl)),O})()})},se=U=>{const E={pending:{color:"var(--warning-color)",bg:"var(--warning-light)",text:"Pendiente"},signed:{color:"var(--success-color)",bg:"var(--success-light)",text:"Firmado"},expired:{color:"var(--error-color)",bg:"var(--error-light)",text:"Expirado"},cancelled:{color:"var(--text-muted)",bg:"var(--background-secondary)",text:"Cancelado"}},O=E[U]||E.pending;return(()=>{var L=Bz();return L.style.setProperty("padding","0.25rem 0.75rem"),L.style.setProperty("border-radius","var(--border-radius-sm)"),L.style.setProperty("font-size","0.8rem"),L.style.setProperty("font-weight","500"),c(L,()=>O.text),be(G=>{var K=O.bg,q=O.color;return K!==G.e&&((G.e=K)!=null?L.style.setProperty("background",K):L.style.removeProperty("background")),q!==G.t&&((G.t=q)!=null?L.style.setProperty("color",q):L.style.removeProperty("color")),G},{e:void 0,t:void 0}),L})()};return T(Vt,{title:"Gestión de Solicitudes de Firma",get children(){var U=jz(),E=U.firstChild,O=E.firstChild,L=O.firstChild;return U.style.setProperty("padding","1.5rem"),E.style.setProperty("display","flex"),E.style.setProperty("justify-content","space-between"),E.style.setProperty("align-items","center"),E.style.setProperty("margin-bottom","2rem"),E.style.setProperty("flex-wrap","wrap"),E.style.setProperty("gap","1rem"),L.style.setProperty("color","var(--text-muted)"),L.style.setProperty("font-size","0.875rem"),c(E,T(mt,{variant:"primary",onClick:A,get children(){return[T(Gr,{name:"add",size:"1rem",style:{"margin-right":"0.5rem"}}),"Nueva Solicitud"]}}),null),c(U,T(We,{get when(){return u()},get children(){var G=ty();return G.style.setProperty("padding","1rem"),G.style.setProperty("margin-bottom","1rem"),G.style.setProperty("background","var(--error-light)"),G.style.setProperty("color","var(--error-dark)"),G.style.setProperty("border-radius","var(--border-radius-sm)"),c(G,u),G}}),null),c(U,T(We,{get when(){return f()},get children(){var G=ty();return G.style.setProperty("padding","1rem"),G.style.setProperty("margin-bottom","1rem"),G.style.setProperty("background","var(--success-light)"),G.style.setProperty("color","var(--success-dark)"),G.style.setProperty("border-radius","var(--border-radius-sm)"),c(G,f),G}}),null),c(U,T(We,{get when(){return!i()},get fallback(){return(()=>{var G=Vz(),K=G.firstChild;return G.style.setProperty("text-align","center"),G.style.setProperty("padding","2rem"),K.style.setProperty("font-size","1.5rem"),K.style.setProperty("margin-bottom","0.5rem"),G})()},get children(){return T(We,{get when(){return r().length>0},get fallback(){return(()=>{var G=zz(),K=G.firstChild;return G.style.setProperty("text-align","center"),G.style.setProperty("padding","3rem"),G.style.setProperty("background","var(--background-secondary)"),G.style.setProperty("border-radius","var(--border-radius)"),c(G,T(Gr,{name:"document",size:"3rem",style:{opacity:"0.3","margin-bottom":"1rem"}}),K),K.style.setProperty("color","var(--text-muted)"),G})()},get children(){var G=ty();return G.style.setProperty("display","grid"),G.style.setProperty("gap","1rem"),c(G,T(_t,{get each(){return r()},children:K=>(()=>{var q=Gz(),B=q.firstChild,H=B.firstChild,Y=H.firstChild,te=Y.nextSibling,oe=B.nextSibling,pe=oe.firstChild,ne=pe.firstChild;ne.nextSibling;var Q=pe.nextSibling,ce=Q.firstChild;ce.nextSibling;var ue=Q.nextSibling,de=ue.firstChild;de.nextSibling;var ge=oe.nextSibling;return q.style.setProperty("padding","1.5rem"),q.style.setProperty("border","1px solid var(--border-color)"),q.style.setProperty("border-radius","var(--border-radius)"),q.style.setProperty("background","var(--surface-color)"),q.style.setProperty("transition","all 0.2s ease"),B.style.setProperty("display","flex"),B.style.setProperty("justify-content","space-between"),B.style.setProperty("align-items","flex-start"),B.style.setProperty("margin-bottom","1rem"),Y.style.setProperty("margin-bottom","0.5rem"),c(Y,()=>K.clientName),te.style.setProperty("font-size","0.875rem"),te.style.setProperty("color","var(--text-muted)"),c(te,()=>K.clientEmail,null),c(te,T(We,{get when(){return K.clientPhone},get children(){var ye=Uz();return ye.firstChild,c(ye,()=>K.clientPhone,null),ye}}),null),c(B,()=>se(K.status),null),oe.style.setProperty("display","grid"),oe.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(200px, 1fr))"),oe.style.setProperty("gap","0.75rem"),oe.style.setProperty("font-size","0.8rem"),oe.style.setProperty("color","var(--text-muted)"),c(pe,()=>K.id,null),c(Q,()=>K.createdAt.toDate().toLocaleDateString(),null),c(ue,()=>K.expiresAt.toDate().toLocaleDateString(),null),c(oe,T(We,{get when(){return K.documentType},get children(){var ye=qz(),fe=ye.firstChild;return fe.nextSibling,c(ye,()=>K.documentType,null),ye}}),null),c(q,T(We,{get when(){return K.signedAt},get children(){var ye=Hz(),fe=ye.firstChild;return fe.nextSibling,ye.style.setProperty("margin-top","0.75rem"),ye.style.setProperty("padding","0.75rem"),ye.style.setProperty("background","var(--success-light)"),ye.style.setProperty("border-radius","var(--border-radius-sm)"),ye.style.setProperty("font-size","0.875rem"),c(ye,()=>K.signedAt.toDate().toLocaleString(),null),ye}}),ge),c(q,T(We,{get when(){return K.notes},get children(){var ye=Wz(),fe=ye.firstChild;return fe.nextSibling,ye.style.setProperty("margin-top","0.75rem"),ye.style.setProperty("padding","0.75rem"),ye.style.setProperty("background","var(--background-secondary)"),ye.style.setProperty("border-radius","var(--border-radius-sm)"),ye.style.setProperty("font-size","0.875rem"),c(ye,()=>K.notes,null),ye}}),ge),ge.style.setProperty("display","flex"),ge.style.setProperty("gap","0.5rem"),ge.style.setProperty("margin-top","1rem"),ge.style.setProperty("flex-wrap","wrap"),c(ge,T(We,{get when(){return K.status==="pending"},get children(){return[T(mt,{variant:"secondary",size:"sm",onClick:()=>{I(K)},get children(){return[T(Gr,{name:"copy",size:"0.875rem",style:{"margin-right":"0.25rem"}}),"Copiar Enlace"]}}),T(mt,{variant:"outline",size:"sm",onClick:()=>z(K.id),children:"Cancelar"})]}}),null),c(ge,T(We,{get when(){return K.status==="signed"&&K.signatureUrl},get children(){return T(mt,{variant:"primary",size:"sm",onClick:()=>X(K),get children(){return[T(Gr,{name:"signature",size:"0.875rem",style:{"margin-right":"0.25rem"}}),"Ver Firma"]}})}}),null),q})()})),G}})}}),null),U}})};tr(["input"]);var Yz=le("<div><div><h1>✍️ Firmas Digitales</h1><p>Solicite firmas digitales de sus clientes de forma remota. Envíe enlaces por email o SMS para que firmen desde cualquier dispositivo.</p></div><div><div><div>📱</div><h3>Firma Móvil</h3><p>Los clientes pueden firmar desde cualquier dispositivo móvil usando su dedo en la pantalla táctil.</p></div><div><div>🔗</div><h3>Enlaces Seguros</h3><p>Genere enlaces únicos con fecha de expiración para asegurar la validez de las solicitudes.</p></div><div><div>☁️</div><h3>Almacenamiento Seguro</h3><p>Las firmas se guardan de forma segura en Firebase con acceso controlado y trazabilidad completa.</p></div></div><div><h3>¿Cómo Funciona?</h3><div><div><div>1</div><h4>Crear Solicitud</h4><p>Complete los datos del cliente y cree una nueva solicitud de firma</p></div><div><div>2</div><h4>Enviar Enlace</h4><p>Envíe el enlace único al cliente por email, SMS o cualquier medio</p></div><div><div>3</div><h4>Cliente Firma</h4><p>El cliente abre el enlace y firma usando su dedo o mouse</p></div><div><div>✓</div><h4>Firma Guardada</h4><p>La firma se guarda automáticamente y usted recibe notificación");const Xz=()=>T(Bo,{title:"Gestión de Firmas Digitales",get children(){var t=Yz(),e=t.firstChild,r=e.firstChild,n=r.nextSibling,i=e.nextSibling,o=i.firstChild,s=o.firstChild,a=s.nextSibling,l=a.nextSibling,d=o.nextSibling,u=d.firstChild,h=u.nextSibling,f=h.nextSibling,p=d.nextSibling,m=p.firstChild,x=m.nextSibling,P=x.nextSibling,g=i.nextSibling,F=g.firstChild,V=F.nextSibling,N=V.firstChild,R=N.firstChild,M=R.nextSibling,C=M.nextSibling,k=N.nextSibling,D=k.firstChild,$=D.nextSibling,w=$.nextSibling,_=k.nextSibling,v=_.firstChild,z=v.nextSibling,W=z.nextSibling,A=_.nextSibling,I=A.firstChild,ee=I.nextSibling,Z=ee.nextSibling;return t.style.setProperty("max-width","1200px"),t.style.setProperty("margin","0 auto"),t.style.setProperty("padding","2rem 1rem"),e.style.setProperty("text-align","center"),e.style.setProperty("margin-bottom","3rem"),r.style.setProperty("font-size","2.5rem"),r.style.setProperty("font-weight","700"),r.style.setProperty("margin-bottom","1rem"),r.style.setProperty("color","var(--text-primary)"),r.style.setProperty("background","linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%)"),r.style.setProperty("-webkit-background-clip","text"),r.style.setProperty("-webkit-text-fill-color","transparent"),r.style.setProperty("background-clip","text"),n.style.setProperty("font-size","1.125rem"),n.style.setProperty("color","var(--text-muted)"),n.style.setProperty("max-width","600px"),n.style.setProperty("margin","0 auto"),n.style.setProperty("line-height","1.6"),c(t,T(Kz,{}),i),i.style.setProperty("margin-top","4rem"),i.style.setProperty("display","grid"),i.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(300px, 1fr))"),i.style.setProperty("gap","2rem"),o.style.setProperty("padding","2rem"),o.style.setProperty("background","white"),o.style.setProperty("border-radius","var(--border-radius)"),o.style.setProperty("box-shadow","var(--shadow-sm)"),o.style.setProperty("text-align","center"),s.style.setProperty("font-size","2.5rem"),s.style.setProperty("margin-bottom","1rem"),a.style.setProperty("font-size","1.25rem"),a.style.setProperty("font-weight","600"),a.style.setProperty("margin-bottom","0.5rem"),a.style.setProperty("color","var(--text-primary)"),l.style.setProperty("color","var(--text-muted)"),l.style.setProperty("line-height","1.5"),l.style.setProperty("margin","0"),d.style.setProperty("padding","2rem"),d.style.setProperty("background","white"),d.style.setProperty("border-radius","var(--border-radius)"),d.style.setProperty("box-shadow","var(--shadow-sm)"),d.style.setProperty("text-align","center"),u.style.setProperty("font-size","2.5rem"),u.style.setProperty("margin-bottom","1rem"),h.style.setProperty("font-size","1.25rem"),h.style.setProperty("font-weight","600"),h.style.setProperty("margin-bottom","0.5rem"),h.style.setProperty("color","var(--text-primary)"),f.style.setProperty("color","var(--text-muted)"),f.style.setProperty("line-height","1.5"),f.style.setProperty("margin","0"),p.style.setProperty("padding","2rem"),p.style.setProperty("background","white"),p.style.setProperty("border-radius","var(--border-radius)"),p.style.setProperty("box-shadow","var(--shadow-sm)"),p.style.setProperty("text-align","center"),m.style.setProperty("font-size","2.5rem"),m.style.setProperty("margin-bottom","1rem"),x.style.setProperty("font-size","1.25rem"),x.style.setProperty("font-weight","600"),x.style.setProperty("margin-bottom","0.5rem"),x.style.setProperty("color","var(--text-primary)"),P.style.setProperty("color","var(--text-muted)"),P.style.setProperty("line-height","1.5"),P.style.setProperty("margin","0"),g.style.setProperty("margin-top","4rem"),g.style.setProperty("padding","3rem 2rem"),g.style.setProperty("background","linear-gradient(135deg, var(--primary-color)10, var(--secondary-color)10)"),g.style.setProperty("border-radius","var(--border-radius)"),g.style.setProperty("text-align","center"),F.style.setProperty("font-size","2rem"),F.style.setProperty("font-weight","600"),F.style.setProperty("margin-bottom","2rem"),F.style.setProperty("color","var(--text-primary)"),V.style.setProperty("display","grid"),V.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(200px, 1fr))"),V.style.setProperty("gap","2rem"),V.style.setProperty("margin-top","2rem"),R.style.setProperty("width","60px"),R.style.setProperty("height","60px"),R.style.setProperty("border-radius","50%"),R.style.setProperty("background","var(--primary-color)"),R.style.setProperty("color","white"),R.style.setProperty("display","flex"),R.style.setProperty("align-items","center"),R.style.setProperty("justify-content","center"),R.style.setProperty("font-size","1.5rem"),R.style.setProperty("font-weight","600"),R.style.setProperty("margin","0 auto 1rem"),M.style.setProperty("margin-bottom","0.5rem"),C.style.setProperty("color","var(--text-muted)"),C.style.setProperty("font-size","0.875rem"),D.style.setProperty("width","60px"),D.style.setProperty("height","60px"),D.style.setProperty("border-radius","50%"),D.style.setProperty("background","var(--secondary-color)"),D.style.setProperty("color","white"),D.style.setProperty("display","flex"),D.style.setProperty("align-items","center"),D.style.setProperty("justify-content","center"),D.style.setProperty("font-size","1.5rem"),D.style.setProperty("font-weight","600"),D.style.setProperty("margin","0 auto 1rem"),$.style.setProperty("margin-bottom","0.5rem"),w.style.setProperty("color","var(--text-muted)"),w.style.setProperty("font-size","0.875rem"),v.style.setProperty("width","60px"),v.style.setProperty("height","60px"),v.style.setProperty("border-radius","50%"),v.style.setProperty("background","var(--accent-color)"),v.style.setProperty("color","white"),v.style.setProperty("display","flex"),v.style.setProperty("align-items","center"),v.style.setProperty("justify-content","center"),v.style.setProperty("font-size","1.5rem"),v.style.setProperty("font-weight","600"),v.style.setProperty("margin","0 auto 1rem"),z.style.setProperty("margin-bottom","0.5rem"),W.style.setProperty("color","var(--text-muted)"),W.style.setProperty("font-size","0.875rem"),I.style.setProperty("width","60px"),I.style.setProperty("height","60px"),I.style.setProperty("border-radius","50%"),I.style.setProperty("background","var(--success-color)"),I.style.setProperty("color","white"),I.style.setProperty("display","flex"),I.style.setProperty("align-items","center"),I.style.setProperty("justify-content","center"),I.style.setProperty("font-size","1.5rem"),I.style.setProperty("font-weight","600"),I.style.setProperty("margin","0 auto 1rem"),ee.style.setProperty("margin-bottom","0.5rem"),Z.style.setProperty("color","var(--text-muted)"),Z.style.setProperty("font-size","0.875rem"),t}});var eS=le("<div>"),Zz=le("<div><div><div><strong>Display Name:</strong> </div><div><strong>UID:</strong> </div></div><div><strong>Created:</strong> "),Jz=le("<div><h3>Store Access</h3><div></div><div>No store access granted"),Qz=le("<div><select><option value=all>"),eU=le("<div><h3>Permissions</h3><div>"),tU=le('<div><div><input type=text placeholder="Search users..."></div><div>'),rU=le("<div>⚠️ You need administrator privileges to access this page."),nU=le("<div>Loading users..."),iU=le("<div><div></div><div></div><div> stores"),oU=le("<div>Select a user to view and edit their profile"),sU=le("<div><input type=checkbox><label>"),aU=le("<option>"),lU=le("<div><input type=checkbox><div><div></div><div>");const cU=()=>{const{t}=pr(),[e,r]=Ae([]),[n,i]=Ae(null),[o,s]=Ae(!1),[a,l]=Ae(!1),[d,u]=Ae(""),[h,f]=Ae(null),p=[{id:"YY_8802",name:"Store 8802"},{id:"YY_8803",name:"Store 8803"},{id:"YY_8804",name:"Store 8804"},{id:"YY_8805",name:"Store 8805"},{id:"YY_8816",name:"Store 8816"},{id:"YY_8818",name:"Store 8818"},{id:"YY_8847",name:"Store 8847"},{id:"YY_3251",name:"Store 3251"},{id:"YY_32",name:"Store 32"},{id:"YY_76",name:"Store 76"},{id:"YY_2376",name:"Store 2376"},{id:"YY_79",name:"Store 79"},{id:"YY_8635",name:"Store 8635"},{id:"YY_8665",name:"Store 8665"},{id:"YY_8901",name:"Store 8901"},{id:"YY_3303",name:"Store Miami"},{id:"SS_42",name:"SS"}],m=[{key:"AccountAccess",label:"Account Access",description:"Access to accounting features"},{key:"BankingAccess",label:"Banking Access",description:"Access to banking operations"},{key:"InventoryAccess",label:"Inventory Access",description:"Access to inventory management"},{key:"JournalAccess",label:"Journal Access",description:"Access to journal entries"},{key:"invoiceAccess",label:"Invoice Access",description:"Access to Invoices"},{key:"HBLAccess",label:"HBL Access",description:"Access to HBL management"},{key:"PassportAccess",label:"Passport Access",description:"Access to passport applications"},{key:"inventoryDownsection",label:"Inventory Downsection",description:"Access to inventory downsection"},{key:"onlyRead",label:"Read Only",description:"Limited to read-only access"},{key:"read_write",label:"Read/Write",description:"Full read and write permissions"},{key:"isAdmin",label:"Administrator",description:"Full system administration rights"}];let x={stores:{YY_8802:!1,YY_8803:!1,YY_8804:!1,YY_8805:!1,YY_8816:!1,YY_8818:!1,YY_8847:!1,YY_3251:!1,YY_32:!1,YY_76:!1,YY_79:!1,YY_2376:!1,YY_8635:!1,YY_8665:!1,YY_8901:!1,YY_3303:!1,SS_42:!1},businessId:"YB100423253156428",AccountAccess:!1,BankingAccess:!1,InventoryAccess:!1,JournalAccess:!1,invoiceAccess:!1,HBLAccess:!1,PassportAccess:!1,inventoryDownsection:!1,onlyRead:!1,read_write:!1},P=[{label:"Stephanie S",id:"SS695841584167881"},{label:"YABA",id:"YB100423253156428"},{label:"GUANCHO",id:"JJCM23753J15918M"},{label:"LUISCUETO",id:"LMR470531564CT28"}];Kn(async()=>{await g()});const g=async()=>{try{s(!0);const A=Nb(ws,"users"),I=Bb(A,vA("createdAt","desc")),ee=await Hb(I),Z=[];ee.forEach(X=>{let se=X.data();Object.keys(x).map(U=>{let E=x?.[U];se.hasOwnProperty(U)||(se[U]=E)}),Z.push({uid:X.id,...se})}),r(Z)}catch(A){console.error("Error loading users:",A),f({type:"error",text:"Failed to load users"})}finally{s(!1)}},F=zt(()=>{const A=d().toLowerCase();return A?e().filter(I=>I.email?.toLowerCase().includes(A)||I.displayName?.toLowerCase().includes(A)||I.uid?.toLowerCase().includes(A)):e()}),V=A=>{n()&&i(I=>({...I,stores:{...I.stores,[A]:!I.stores[A]}}))},N=A=>{n()&&i(I=>({...I,businessId:A}))},R=A=>{n()&&i(I=>({...I,[A]:!I[A]}))};zt(()=>n()?n().stores&&Object.values(n().stores).some(A=>A):!1);const M=async()=>{if(n())try{l(!0),f(null);const A=cl(ws,"users",n().uid);let I={stores:n().stores,AccountAccess:n().AccountAccess,BankingAccess:n().BankingAccess,InventoryAccess:n().InventoryAccess,invoiceAccess:n().invoiceAccess,JournalAccess:n().JournalAccess,PassportAccess:n().PassportAccess,inventoryDownsection:n().inventoryDownsection,onlyRead:n().onlyRead,read_write:n().read_write,businessId:n().businessId,isAdmin:n().isAdmin||!1};await Yp(A,I),r(ee=>ee.map(Z=>Z.uid===n().uid?n():Z)),f({type:"success",text:"User profile updated successfully"})}catch(A){console.error("Error saving user profile:",A),f({type:"error",text:"Failed to save user profile"})}finally{l(!1)}},C={display:"grid","grid-template-columns":"350px 1fr",gap:"2rem",height:"calc(100vh - 200px)"},k={"max-height":"100%","overflow-y":"auto",border:"1px solid var(--border-color)","border-radius":"var(--border-radius)",background:"var(--surface-color)"},D=A=>({padding:"1rem","border-bottom":"1px solid var(--border-color)",cursor:"pointer",background:A?"var(--primary-color-light)":"transparent",transition:"background 0.2s"}),$={padding:"0.75rem",border:"none","border-bottom":"1px solid var(--border-color)",background:"var(--surface-color)",width:"100%","font-size":"1rem"},w={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(300px, 1fr))",gap:"1rem"},_={display:"grid","grid-template-columns":"repeat(auto-fill, minmax(200px, 1fr))",gap:"0.75rem"},v={display:"flex","align-items":"center",gap:"0.5rem",padding:"0.5rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)",cursor:"pointer",transition:"all 0.2s"},z=A=>({padding:"1rem","margin-bottom":"1rem","border-radius":"var(--border-radius)",background:A==="success"?"#d4edda":"#f8d7da",color:A==="success"?"#155724":"#721c24",border:`1px solid ${A==="success"?"#c3e6cb":"#f5c6cb"}`}),W=zt(()=>Xt.state.profile?.isAdmin===!0);return T(Bo,{title:"User Profile Administration",get children(){return T(We,{get when(){return W()},get fallback(){return T(Vt,{get children(){var A=rU();return A.style.setProperty("text-align","center"),A.style.setProperty("padding","2rem"),A.style.setProperty("color","var(--text-muted)"),A}})},get children(){var A=tU(),I=A.firstChild,ee=I.firstChild,Z=I.nextSibling;return y(A,C),y(I,k),ee.$$input=X=>u(X.currentTarget.value),y(ee,$),c(I,T(We,{get when(){return!o()},get fallback(){return(()=>{var X=nU();return X.style.setProperty("padding","2rem"),X.style.setProperty("text-align","center"),X})()},get children(){return T(_t,{get each(){return F()},children:X=>(()=>{var se=iU(),U=se.firstChild,E=U.nextSibling,O=E.nextSibling,L=O.firstChild;return se.$$click=()=>i(X),U.style.setProperty("font-weight","600"),c(U,()=>X.displayName||"No Name"),E.style.setProperty("font-size","0.875rem"),E.style.setProperty("color","var(--text-muted)"),c(E,()=>X.email),O.style.setProperty("font-size","0.75rem"),O.style.setProperty("color","var(--text-muted)"),O.style.setProperty("margin-top","0.25rem"),c(O,()=>X.isAdmin&&"👑 Admin • ",L),c(O,()=>Object.values(X.stores||{}).filter(Boolean).length,L),be(G=>y(se,D(n()?.uid===X.uid),G)),se})()})}}),null),c(Z,T(We,{get when(){return n()},get fallback(){return T(Vt,{get children(){var X=oU();return X.style.setProperty("text-align","center"),X.style.setProperty("padding","2rem"),X.style.setProperty("color","var(--text-muted)"),X}})},get children(){return[T(We,{get when(){return h()},get children(){var X=eS();return c(X,()=>h().text),be(se=>y(X,z(h().type),se)),X}}),T(Vt,{title:"User Information",get subtitle(){return n().email},get children(){return[(()=>{var X=Zz(),se=X.firstChild,U=se.firstChild,E=U.firstChild;E.nextSibling;var O=U.nextSibling,L=O.firstChild;L.nextSibling;var G=se.nextSibling,K=G.firstChild;return K.nextSibling,X.style.setProperty("margin-bottom","2rem"),se.style.setProperty("display","flex"),se.style.setProperty("justify-content","space-between"),se.style.setProperty("margin-bottom","1rem"),c(U,()=>n().displayName||"Not set",null),c(O,()=>n().uid,null),c(G,()=>new Date(n().createdAt?.toDate?.()||n().createdAt).toLocaleDateString(),null),X})(),(()=>{var X=Jz(),se=X.firstChild,U=se.nextSibling,E=U.nextSibling;return X.style.setProperty("margin-bottom","2rem"),se.style.setProperty("margin-bottom","1rem"),y(U,_),c(U,T(_t,{each:p,children:O=>{let L=At.getLocationById(O?.id);return(()=>{var G=sU(),K=G.firstChild,q=K.nextSibling;return G.$$click=()=>V(O?.id),K.style.setProperty("cursor","pointer"),q.style.setProperty("cursor","pointer"),q.style.setProperty("user-select","none"),c(q,()=>L?.name),be(B=>y(G,{...v,background:n().stores?.[O?.id]?"var(--primary-color-light)":"transparent"},B)),be(()=>K.checked=n().stores?.[O?.id]||!1),G})()}})),E.style.setProperty("margin-top","0.5rem"),E.style.setProperty("font-size","0.875rem"),E.style.setProperty("color","var(--text-muted)"),X})(),(()=>{var X=Qz(),se=X.firstChild,U=se.firstChild;return X.style.setProperty("margin-bottom","2rem"),se.addEventListener("change",E=>N(E.currentTarget.value)),se.style.setProperty("width","100%"),se.style.setProperty("padding","0.5rem"),se.style.setProperty("border","1px solid var(--border-color)"),se.style.setProperty("border-radius","var(--border-radius-sm)"),se.style.setProperty("background","var(--surface-color)"),c(U,()=>t("common.all","All")),c(se,T(_t,{each:P,children:E=>(()=>{var O=aU();return c(O,()=>E?.label),be(()=>O.value=E.id),O})()}),null),be(()=>se.value=n()?.businessId),X})(),(()=>{var X=eU(),se=X.firstChild,U=se.nextSibling;return X.style.setProperty("margin-bottom","2rem"),se.style.setProperty("margin-bottom","1rem"),y(U,w),c(U,T(_t,{each:m,children:E=>(()=>{var O=lU(),L=O.firstChild,G=L.nextSibling,K=G.firstChild,q=K.nextSibling;return O.$$click=()=>R(E.key),L.style.setProperty("cursor","pointer"),G.style.setProperty("flex","1"),G.style.setProperty("cursor","pointer"),G.style.setProperty("user-select","none"),K.style.setProperty("font-weight","500"),c(K,()=>E.label),q.style.setProperty("font-size","0.75rem"),q.style.setProperty("color","var(--text-muted)"),c(q,()=>E.description),be(B=>y(O,{...v,background:n()[E.key]?"var(--primary-color-light)":"transparent"},B)),be(()=>L.checked=!!n()[E.key]),O})()})),X})(),(()=>{var X=eS();return X.style.setProperty("display","flex"),X.style.setProperty("gap","1rem"),X.style.setProperty("justify-content","flex-end"),c(X,T(mt,{variant:"secondary",onClick:()=>i(null),children:"Cancel"}),null),c(X,T(mt,{variant:"primary",onClick:M,get disabled(){return a()},get children(){return a()?"Saving...":"Save Changes"}}),null),X})()]}})]}})),be(()=>ee.value=d()),A}})}})};tr(["input","click"]);const dU={common:{save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",add:"Add",close:"Close",search:"Search",filter:"Filter",reset:"Reset",back:"Back",next:"Next",previous:"Previous",yes:"Yes",no:"No",loading:"Loading...",error:"Error",success:"Success",warning:"Warning",info:"Information",confirm:"Confirm",actions:"Actions",status:"Status",active:"Active",inactive:"Inactive",date:"Date",time:"Time",description:"Description",notes:"Notes",amount:"Amount",total:"Total",subtotal:"Subtotal",currency:"USD",language:"Language",english:"English",spanish:"Spanish",noDataFound:"No data found",required:"Required",optional:"Optional",all:"All",none:"None",select:"Select",clear:"Clear",view:"View",unknown:"Unknown",details:"Details",notAvailable:"N/A",download:"Download",upload:"Upload",print:"Print",export:"Export",import:"Import",exportCSV:"Export CSV",exportExcel:"Export Excel",showing:"Showing",of:"of",dateFrom:"Date From",dateTo:"Date To",showFilters:"Show Filters",hideFilters:"Hide Filters",clearFilters:"Clear Filters",searching:"Searching...",refresh:"Refresh",showAll:"Show All",products:"products",filtered:"Filtered",suggested:"Suggested",enhanced:"Enhanced",legacy:"Legacy",email:"Email",phone:"Phone",address:"Address",name:"Name",code:"Code",category:"Category",type:"Type",quantity:"Quantity",price:"Price",cost:"Cost",value:"Value",balance:"Balance",created:"Created",modified:"Modified",summary:"Summary",history:"History",new:"New",addNew:"Add New",remove:"Remove",startDate:"Start Date",endDate:"End Date",from:"From",invoice:"Invoice",invoices:"invoices",reference:"Reference",createdBy:"Created By",units:"units",invoiceDocumentId:"Invoice/Document ID",referenceNumber:"Reference Number",referenceNumberPlaceholder:"Enter reference number...",generalNotes:"General Notes",auto:"Auto",optionalNotes:"Optional notes...",showPerPage:"Show per page",first:"First",last:"Last",store:"Store",orderId:"Order ID",tax:"Tax",paymentMethods:"Payment Methods",cash:"Cash",creditCard:"Credit Card",shipping:"Shipping",air:"Air",sea:"Sea",thankYouBusiness:"Thank you for your business!",thankForChoosingUs:"Thank you for choosing us!",taxExemptNote:"Tax exempted on cash payment.",youSaved:"You saved",generatedOn:"Generated on",printSavePDF:"Print / Save as PDF",pageOfPages:"Page {{current}} of {{total}}",showingXofY:"Showing {{start}}-{{end}} of {{total}}",page:"Page",pending:"Pending",completed:"Completed",customer:"Customer",location:"Location",reservations:"Reservations",backToDashboard:"Back to Dashboard",lbs:"pounds"},navigation:{dashboard:"Dashboard",accounts:"Chart of Accounts",balanceSheet:"Balance Sheet",inventory:"Inventory",inventoryManagement:"Inventory Management",employees:"Employees",employeeManagement:"Employee Management",entryBooks:"Entry Books",journalEntries:"Journal Entries",consolidate:"Bank Consolidation",reports:"Reports",settings:"Settings",logout:"Logout",home:"Home",hbl:"House Bill of Lading"},dashboard:{title:"Dashboard",welcome:"Welcome to HRM Finance",overview:"Overview",recentActivity:"Recent Activity",quickActions:"Quick Actions",totalAssets:"Total Assets",totalLiabilities:"Total Liabilities",totalEquity:"Total Equity",totalRevenue:"Total Revenue",totalExpenses:"Total Expenses",netIncome:"Net Income",cashBalance:"Cash Balance",accountsReceivable:"Accounts Receivable",accountsPayable:"Accounts Payable",inventoryValue:"Inventory Value",lowStockItems:"Low Stock Items",pendingInvoices:"Pending Invoices",employeeCount:"Employee Count",monthlyPayroll:"Monthly Payroll"},accounts:{title:"Chart of Accounts",accountNumber:"Account Number",accountName:"Account Name",accountType:"Account Type",category:"Category",balance:"Balance",parentAccount:"Parent Account",subAccounts:"Sub-accounts",addAccount:"Add Account",editAccount:"Edit Account",deleteAccount:"Delete Account",accountDetails:"Account Details",transactions:"Transactions",accountHistory:"Account History",types:{asset:"Asset",liability:"Liability",equity:"Equity",revenue:"Revenue",expense:"Expense"},categories:{currentAssets:"Current Assets",fixedAssets:"Fixed Assets",currentLiabilities:"Current Liabilities",longTermLiabilities:"Long-term Liabilities",ownersEquity:"Owner's Equity",operatingRevenue:"Operating Revenue",operatingExpenses:"Operating Expenses"},allAccounts:"All Accounts"},banking:{title:"Banking",unreconciled:"Unreconciled",reconciled:"Reconciled",reconciliation:"Reconciliation",notReconciled:"Not Reconciled"},balanceSheet:{title:"Balance Sheet",asOf:"As of",assets:"Assets",liabilities:"Liabilities",equity:"Equity",totalAssets:"Total Assets",totalLiabilities:"Total Liabilities",totalEquity:"Total Equity",currentAssets:"Current Assets",nonCurrentAssets:"Non-current Assets",currentLiabilities:"Current Liabilities",nonCurrentLiabilities:"Non-current Liabilities",retainedEarnings:"Retained Earnings",commonStock:"Common Stock",generateReport:"Generate Report",exportPDF:"Export PDF",exportExcel:"Export Excel"},inventory:{title:"Inventory Management",products:"Products",locations:"Locations",movements:"Movements",overview:"Overview",addProduct:"Add Product",addLocation:"Add Location",addMovement:"Add Movement",bulkMovement:"Bulk Movement",productName:"Product Name",productCode:"Product Code",sku:"SKU",category:"Category",quantity:"Quantity",unitOfMeasure:"Unit of Measure",unitCost:"Unit Cost",totalValue:"Total Value",minStockLevel:"Min Stock Level",maxStockLevel:"Max Stock Level",reorderPoint:"Reorder Point",locationName:"Location Name",locationType:"Location Type",locationCode:"Location Code",address:"Address",movementType:"Movement Type",fromLocation:"From Location",toLocation:"To Location",referenceNumber:"Reference Number",invoiceNumber:"Invoice Number",stockIn:"Stock In",stockOut:"Stock Out",transfer:"Transfer",adjustment:"Adjustment",inStock:"In Stock",lowStock:"Low Stock",outOfStock:"Out of Stock",stockLevels:"Stock Levels",stockByLocation:"Stock by Location",recentMovements:"Recent Movements",searchProducts:"Search products...",searchLocations:"Search locations...",noMovements:"No movements found",productDetails:"Product Details",locationDetails:"Location Details",movementDetails:"Movement Details",totalProducts:"Total Products",activeProducts:"Active Products",totalLocations:"Total Locations",activeLocations:"Active Locations",lowStockAlert:"Low Stock Alert",productsNeedRestocking:"products need restocking",lastSeen:"Last seen",noProducts:"No products at this location",warehouseType:"Warehouse",storeType:"Store",supplierType:"Supplier",customerType:"Customer"},employees:{title:"Employee Management",employeeList:"Employee List",addEmployee:"Add Employee",editEmployee:"Edit Employee",employeeDetails:"Employee Details",personalInfo:"Personal Information",employmentInfo:"Employment Information",payrollInfo:"Payroll Information",firstName:"First Name",lastName:"Last Name",fullName:"Full Name",email:"Email",phone:"Phone",address:"Address",dateOfBirth:"Date of Birth",employeeId:"Employee ID",department:"Department",position:"Position",hireDate:"Hire Date",employmentStatus:"Employment Status",salary:"Salary",payFrequency:"Pay Frequency",taxId:"Tax ID",bankAccount:"Bank Account",emergencyContact:"Emergency Contact",activeEmployees:"Active Employees",inactiveEmployees:"Inactive Employees",totalPayroll:"Total Payroll",searchEmployees:"Search employees..."},journal:{title:"Journal Entries",entryNumber:"Entry Number",entryDate:"Entry Date",debit:"Debit",credit:"Credit",account:"Account",memo:"Memo",reference:"Reference",createEntry:"Create Entry",editEntry:"Edit Entry",deleteEntry:"Delete Entry",addEntry:"Add Journal Entry",updateEntry:"Update Entry",saveAsDraft:"Save as Draft",post:"Post",postEntry:"Post Entry",voidEntry:"Void Entry",posted:"Posted",draft:"Draft",reversed:"Reversed",balanced:"Balanced",notBalanced:"Not Balanced",outOfBalance:"Out of Balance",unbalanced:"Unbalanced",recurringEntry:"Recurring Entry",attachments:"Attachments",draftEntry:"Draft Entry",postedEntry:"Posted Entry",totalDebits:"Total Debits",totalCredits:"Total Credits",totalDebit:"Total Debit",totalCredit:"Total Credit",totalAmount:"Total Amount",debitShort:"Dr.",creditShort:"Cr.",allEntries:"All Entries",noReference:"No reference",createdBy:"By",lines:"Lines",entryLines:"Journal Entry Lines",journalLines:"Journal Lines",addLine:"Add Line",lineDescription:"Line description",accountLines:"Account Lines",noDescription:"No description",andMoreLines:"... and {count} more lines",viewDetails:"View Details",entryDetails:"Journal Entry Details",entryNotFound:"Entry Not Found",entryNotFoundMessage:"The journal entry you're looking for could not be found or may have been deleted.",balanceStatus:"Balance Status",difference:"difference",createdAt:"Created At",postedAt:"Posted At",quickActions:"Quick Actions",fixBalance:"Fix Balance",editEntryTooltip:"Edit this journal entry",postEntryTooltip:"Post this journal entry",voidEntryTooltip:"Void this journal entry",draftEntryDescription:"This entry can be edited and posted.",postedEntryDescription:"This entry has been posted to the general ledger. Editing will create a new draft copy.",voidEntryDescription:"This entry has been voided and cannot be modified.",entryMustBeBalanced:"Entry must be balanced to post",entryMustBeBalancedBeforePosting:"Entry must be balanced before posting.",entryNotBalancedShort:"Entry is not balanced",confirmEditPosted:"This entry has been posted. Editing will create a new draft copy. Continue?",confirmPost:"Are you sure you want to post this journal entry? This action cannot be undone.",confirmVoid:"Are you sure you want to void this journal entry?",minTwoLinesRequired:"At least 2 line items are required",entryNotBalanced:"Entry is not balanced. Debit: ${debit}, Credit: ${credit}",lineAccountRequired:"Line {lineNumber}: Account is required",lineAmountRequired:"Line {lineNumber}: Either debit or credit amount must be provided",lineBothAmounts:"Line {lineNumber}: Cannot have both debit and credit amounts",enterEntryDescription:"Enter journal entry description",enterReferenceNumber:"Enter reference number",quickEntry:"Quick Journal Entry",selectCategory:"Select Category",selectTemplate:"Select Template",chooseCategory:"Choose a category...",chooseTemplate:"Choose a template...",enterAmounts:"Enter Amounts",entryPreview:"Entry Preview",createQuickEntry:"Create Quick Entry",templateRequired:"Please select a template",amountRequired:"Amount is required for {field}",templates:"Templates",manageTemplates:"Manage Templates",addNewTemplate:"Add New Template",templateDetails:"Template Details",newTemplate:"New Template",editTemplate:"Edit Template",templateName:"Template Name",enterTemplateName:"Enter template name",enterTemplateDescription:"Enter template description",category:"Category",templateLines:"Template Lines",type:"Type",amountType:"Amount Type",fieldName:"Field Name",selectAccount:"Select account...",variable:"Variable",fixed:"Fixed",fieldNamePlaceholder:"e.g., Amount",custom:"Custom",templateNameRequired:"Template name is required",templateDescriptionRequired:"Template description is required",lineDescriptionRequired:"Line {lineNumber}: Description is required",amountFieldNameRequired:"Line {lineNumber}: Amount field name is required",confirmDeleteTemplate:"Are you sure you want to delete this template?",selectTemplateToView:"Select a template from the list to view details",orCreateNew:"or create a new custom template",reconciliationSummary:"Reconciliation Summary",totalLines:"Total Lines",bankAccounts:"Bank Accounts",bankReconciled:"Bank Reconciled",bankPending:"Bank Pending",reconciledLines:"Reconciled Lines",unreconciledLines:"Unreconciled Lines",fullyReconciled:"Fully Reconciled",partiallyReconciled:"Partially Reconciled",unreconciled:"Unreconciled",reconciled:"Reconciled",pending:"Pending",matched:"Matched",manual:"Manual",pendingBankReconciliation:"Pending Bank Reconciliation",visitBankConsolidations:"Visit Bank Consolidations to reconcile these transactions",reconciliationTip:"Reconciliation Tip",unreconciledBankTransactions:"This entry has unreconciled bank account transactions.",bankAccount:"bank account",currentUser:"Current User",errorDeletingTemplate:"Error deleting template",errorSavingTemplate:"Error saving template",noLines:"No lines",noTemplateLines:"No template lines"},invoiceReport:{title:"Invoice Resume Report",filters:"Filters",storeLocation:"Store Location",allStores:"All Stores",fromDate:"From Date",toDate:"To Date",paymentMethod:"Payment Method",allMethods:"All Methods",cash:"Cash",zelle:"Zelle",other:"Other",shippingType:"Shipping Type",allTypes:"All Types",maritime:"🚢 Maritime",air:"✈️ Air",generateReport:"Generate Report",loading:"Loading...",print:"🖨️ Print",exportPdf:"📄 Export PDF",generating:"📄 Generating...",close:"Close",invoiceSummary:"Invoice Summary",totalInvoices:"Total Invoices",dateRange:"Date Range",store:"Store",shippingTypeLabel:"Shipping Type",notSet:"Not Set",paymentMethods:"Payment Methods",total:"Total",additionalCharges:"Additional Charges",transport:"Transport",aranceles:"Aranceles",tax:"Tax",productsSummary:"Products Summary",productType:"Product Type",quantity:"Quantity",totalValue:"Total Value",avgPrice:"Avg Price",reservasSummary:"Reservas Summary (Grouped by Price)",reservaType:"Reserva Type",totalQtyLbs:"Total Qty (lbs)",priceGroups:"Price Groups (Price → Qty)",otherServicesTitle:"Other Services & Charges",serviceType:"Service Type",totalOtherServices:"Total Other Services",totalSummary:"Total Summary",productsTotal:"Products Total",reservasTotal:"Reservas Total",transportServices:"Transport & Services",grandTotal:"GRAND TOTAL",invoiceReferences:"Invoice References",type:"Type",pricePerPound:"Price per pound",totalInvoicesCount:"Total invoices",invoiceNumbers:"Invoice Numbers",copyInvoiceNumbers:"📋 Copy Invoice Numbers",reportPeriod:"Report Period",allTimeReport:"All Time Report",generatedOn:"Generated on",generatingReport:"Generating report...",pdfGenerationFailed:"PDF generation failed. Using print instead.",invoiceNumbersCopied:"Invoice numbers copied to clipboard!",allTypesOption:"All Types",seaOption:"🚢 Maritime",airOption:"✈️ Air",allMethodsOption:"All Methods",cashOption:"Cash",zelleOption:"Zelle",otherOption:"Other",pdf:{title:"Invoice Resume Report",subtitle:"Comprehensive Financial Summary",paymentMethodsSummary:"Payment Methods Summary",productsSummary:"Products Summary",reservasSummary:"Reservas Summary (Grouped by Price)",otherServicesTitle:"Other Services & Charges",totalSummary:"Total Summary",paymentMethod:"Payment Method",amount:"Amount",product:"Product",quantity:"Quantity",total:"Total",type:"Type",totalQty:"Total Qty",priceGroups:"Price Groups",serviceType:"Service Type",productsTotal:"Products Total",reservasTotal:"Reservas Total",transportServices:"Transport & Services",grandTotal:"GRAND TOTAL",generatedOn:"Generated on:",all:"All",reportDate:"Report Date:",dateRange:"Date Range:",totalInvoices:"Total Invoices:",allTypes:"All Types",lbs:"lbs",page:"Page",of:"of"}},entryBooks:{title:"Entry Books",andMoreLines:"... and {count} more lines",viewDetails:"View Details",entryDetails:"Journal Entry Details",entryNotFound:"Entry Not Found",entryNotFoundMessage:"The journal entry you're looking for could not be found or may have been deleted.",details:"Details",journalLines:"Journal Lines",balanceStatus:"Balance Status",unbalanced:"Unbalanced",difference:"difference",createdAt:"Created At",postedAt:"Posted At",quickActions:"Quick Actions",postEntry:"Post Entry",fixBalance:"Fix Balance",draftEntry:"Draft Entry",draftEntryDescription:"This entry can be edited and posted.",entryMustBeBalancedBeforePosting:"Entry must be balanced before posting.",postedEntry:"Posted Entry",postedEntryDescription:"This entry has been posted to the general ledger. Editing will create a new draft copy.",voidEntryDescription:"This entry has been voided and cannot be modified.",editEntryTooltip:"Edit this journal entry",entryMustBeBalanced:"Entry must be balanced to post",postEntryTooltip:"Post this journal entry",voidEntryTooltip:"Void this journal entry",post:"Post",confirmEditPosted:"This entry has been posted. Editing will create a new draft copy. Continue?",confirmPost:"Are you sure you want to post this journal entry? This action cannot be undone.",confirmVoid:"Are you sure you want to void this journal entry?",voidEntry:"Void Entry",entryNotBalanced:"Entry Not Balanced",reconciliationSummary:"Reconciliation Summary",totalLines:"Total Lines",bankAccounts:"Bank Accounts",bankReconciled:"Bank Reconciled",bankPending:"Bank Pending",reconciledLines:"Reconciled Lines",manual:"Manual",pendingBankReconciliation:"Pending Bank Reconciliation",visitBankConsolidations:"Visit Bank Consolidations to reconcile these transactions",reconciliationTip:"Reconciliation Tip",unreconciledBankTransactions:"This entry has unreconciled bank account transactions.",unreconciledLines:"Unreconciled Lines",fullyReconciled:"Fully Reconciled",partiallyReconciled:"Partially Reconciled",unreconciled:"Unreconciled",reconciled:"Reconciled",pending:"Pending",matched:"Matched",noDescription:"No description",bankAccount:"bank account",currentUser:"Current User",errorDeletingTemplate:"Error deleting template",errorSavingTemplate:"Error saving template",noLines:"No lines",noTemplateLines:"No template lines"},consolidation:{title:"Bank Consolidation",bankAccount:"Bank Account",statementDate:"Statement Date",beginningBalance:"Beginning Balance",endingBalance:"Ending Balance",deposits:"Deposits",withdrawals:"Withdrawals",bankCharges:"Bank Charges",interest:"Interest",reconcile:"Reconcile",matched:"Matched",unmatched:"Unmatched",importStatement:"Import Statement",manualEntry:"Manual Entry",autoMatch:"Auto Match",clearAll:"Clear All",reconciliationStatus:"Reconciliation Status",difference:"Difference",bookBalance:"Book Balance",statementBalance:"Statement Balance",outstandingChecks:"Outstanding Checks",depositsInTransit:"Deposits in Transit"},forms:{requiredField:"This field is required",invalidEmail:"Invalid email address",invalidNumber:"Invalid number",invalidDate:"Invalid date",minLength:"Minimum length is",maxLength:"Maximum length is",minValue:"Minimum value is",maxValue:"Maximum value is",passwordMismatch:"Passwords do not match",selectOption:"Please select an option",enterValue:"Please enter a value",confirmDelete:"Are you sure you want to delete this item?",unsavedChanges:"You have unsaved changes. Do you want to continue?",saveSuccess:"Saved successfully",saveError:"Error saving data",deleteSuccess:"Deleted successfully",deleteError:"Error deleting item",descriptionRequired:"Description is required",errorOccurred:"An error occurred",errorPostingEntry:"An error occurred while posting the entry"},reports:{title:"Reports",incomeStatement:"Income Statement",balanceSheet:"Balance Sheet",cashFlow:"Cash Flow Statement",trialBalance:"Trial Balance",generalLedger:"General Ledger",accountsReceivable:"Accounts Receivable",accountsPayable:"Accounts Payable",inventoryReport:"Inventory Report",payrollReport:"Payroll Report",taxReport:"Tax Report",customReport:"Custom Report",dateRange:"Date Range",fromDate:"From Date",toDate:"To Date",generateReport:"Generate Report",exportOptions:"Export Options",pdf:"PDF",excel:"Excel",csv:"CSV"},settings:{title:"Settings",general:"General",company:"Company",users:"Users",security:"Security",backup:"Backup",companyName:"Company Name",companyAddress:"Company Address",taxId:"Tax ID",fiscalYear:"Fiscal Year",currency:"Currency",dateFormat:"Date Format",timeZone:"Time Zone",language:"Language",theme:"Theme",lightTheme:"Light",darkTheme:"Dark",autoBackup:"Auto Backup",backupFrequency:"Backup Frequency",lastBackup:"Last Backup",restoreBackup:"Restore Backup",exportData:"Export Data",importData:"Import Data",changePassword:"Change Password",twoFactorAuth:"Two-factor Authentication",sessionTimeout:"Session Timeout",auditLog:"Audit Log"},unauthorized:{title:"Access Restricted",accessDenied:"Access Denied",noPermission:"You don't have permission to access",thisFeature:"this feature",whySeeing:"Why am I seeing this?",explanation:"Your account doesn't have the necessary permissions to view this content.",requiredPermission:"Required permission:",goToDashboard:"Go to Dashboard",goBack:"Go Back",featuresCanAccess:"Features you can access:",dashboardAccess:"Dashboard and overview statistics",profileAccess:"Your profile and settings",roleBasedAccess:"Features enabled for your role",needAccess:"Need access? Contact your administrator or manager to request the appropriate permissions.",permissions:{accountAccess:"Account Management Access",inventoryAccess:"Inventory Access",employeeAccess:"HR Access",bankingAccess:"Banking Access",journalAccess:"Journal Entry Access",adminAccess:"Administrative Access",financialReporting:"Financial Reporting Access",invoiceManagement:"Invoice Management Access",productManagement:"Product Management Access",HBLAccess:"HBL Management Access"}},hbl:{title:"House Bill of Lading Management",records:"records",searchPlaceholder:"Search by HBL#, air guide, shipper, consignee, commodity, bag#, identity...",addNew:"Add New HBL",hblNumber:"HBL Number",airGuide:"Air Guide",airNumber:"Air Number",shipper:"Shipper",consignee:"Consignee",shipperPhone:"Shipper Phone",consigneePhone:"Consignee Phone",identity:"Identity",classification:"Classification",address:"Address",city:"City",state:"State",street:"Street",commodity:"Commodity",weight:"Weight",quantity:"Quantity",bagNumber:"Bag Number",agency:"Agency",guide:"Guide",guideNumber:"Guide Number",guideNo:"Guide No.",reserveDate:"Reserve Date",status:{"EN BODEGA":"In Warehouse",ENVIADO:"Shipped",ENTREGADO:"Delivered",CANCELADO:"Cancelled",PENDIENTE:"Pending"}},eventAutomation:{title:"Event-Based Automation",subtitle:"Automatically create journal entries when business events occur",tabs:{rules:"Automation Rules",events:"Event History",audit:"Audit Log"},rules:{title:"Active Automation Rules",createNew:"Create New Rule",noRules:"No automation rules configured yet.",createFirst:"Create Your First Rule",conditions:"Conditions",alwaysTriggers:"Always triggers",journalEntry:"Journal Entry",lines:"lines",enable:"Enable",disable:"Disable",priority:"Priority"},events:{title:"Recent Events",noEvents:"No events recorded yet. Events will appear here as they occur.",source:"Source",eventId:"Event ID",viewData:"View Event Data"},audit:{title:"Automation Audit Log",noActivity:"No automation activity recorded yet.",eventId:"Event ID",rulesTriggered:"Rules Triggered",entriesCreated:"Entries Created",journalEntries:"journal entries",success:"Success",failed:"Failed",error:"Error"},builder:{title:"Automation Rule",editTitle:"Edit Automation Rule",createTitle:"Create New Automation Rule",basicInfo:"Basic Information",ruleName:"Rule Name",ruleNamePlaceholder:"e.g., Cash Sale Automation",priority:"Priority (1-1000)",description:"Description",descriptionPlaceholder:"Describe what this rule does",eventType:"Event Type",active:"Active",eventDescription:"Event Description",conditions:{title:"Conditions",add:"Add Condition",noConditions:"No conditions - rule will trigger for all",field:"Field",operator:"Operator",value:"Value",selectField:"Select a field...",enterValue:"Enter value...",remove:"Remove"},journalTemplate:{title:"Journal Entry Template",description:"Entry Description Template",descriptionPlaceholder:"e.g., Cash Sale - Invoice {data.invoice}",reference:"Reference Template",referencePlaceholder:"e.g., INV-{data.invoice}",tip:"Tip: Use {data.field} to insert event data. Available fields:",lines:"Journal Entry Lines",addLine:"Add Line",noLines:"No journal entry lines defined. Add at least one debit and one credit line.",account:"Account",type:"Type",debit:"Debit",credit:"Credit",descriptionTemplate:"Description Template",descriptionTemplatePlaceholder:"e.g., Cash payment from {data.customerName}",amountExpression:"Amount Expression",amountExpressionPlaceholder:"e.g., data.totalAmount"},save:"Create Rule",update:"Update Rule",cancel:"Cancel"},eventTypes:{invoice_completed:"Invoice Completed",invoice_created:"Invoice Created",invoice_updated:"Invoice Updated",invoice_cancelled:"Invoice Cancelled",payment_received:"Payment Received",payment_refunded:"Payment Refunded",inventory_received:"Inventory Received",inventory_sold:"Inventory Sold",inventory_adjusted:"Inventory Adjusted",expense_created:"Expense Created",expense_approved:"Expense Approved",expense_paid:"Expense Paid",service_rendered:"Service Rendered",freight_processed:"Freight Processed",customs_cleared:"Customs Cleared"},operators:{equals:"Equals",notEquals:"Not Equals",greaterThan:"Greater Than",lessThan:"Less Than",greaterThanOrEqual:"Greater Than or Equal",lessThanOrEqual:"Less Than or Equal",contains:"Contains",notContains:"Not Contains",exists:"Exists",notExists:"Not Exists"},categories:{financial:"Financial",inventory:"Inventory",operational:"Operational"}},invoices:{title:"Invoice Dashboard",invoice:"Invoice",invoices:"Invoices",invoiceNumber:"Invoice Number",invoiceDetails:"Invoice Details",customerInformation:"Customer Information",customerName:"Customer Name",legalName:"Legal Name",contactInformation:"Contact Information",idPassport:"ID/Passport",phoneNumber:"Phone Number",altPhone:"Alt Phone",address:"Address",between:"Between",and:"and",products:"Products",reservations:"Reservations",services:"Services",unitPrice:"Unit Price",total:"Total",subtotal:"Subtotal",totalRevenue:"Total Revenue",totalProducts:"Total Products",totalReservations:"Total Reservations",aranceles:"Aranceles (Customs)",uniqueCustomers:"Unique Customers",averageInvoice:"Average Invoice",completed:"Completed",pending:"Pending",storesActive:"Stores Active",topProducts:"Top Products",mostSoldProducts:"Most sold products by quantity",reservationsByType:"Reservations by Type",distributionOfCategories:"Distribution of reservation categories",recentInvoices:"Recent Invoices",showingInvoices:"Showing {{count}} invoices",date:"Date",customer:"Customer",store:"Store",actions:"Actions",view:"View",status:"Status",printInvoice:"Print Invoice",exportPdf:"Export PDF",backToDashboard:"Back to Dashboard",fromInvoices:"From {{count}} invoices",value:"value",activeCustomers:"Active customers",perInvoiceValue:"Per invoice value",locations:"Locations",mostRecentActivity:"Most recent activity",storeLocation:"Store Location",allStores:"All Stores",fromDate:"From Date",toDate:"To Date",clearFilters:"Clear Filters",search:"Search",searchPlaceholder:"Search by invoice #, customer, store...",customsFees:"Total customs fees",salesType:"SALES",packagesOrder:"Packages Order",businessId:"Business ID",orderKey:"Order Key",reservationType:"Reservation Type",arancel:"Arancel",key:"Key",noInvoicesFound:"No invoices found",loadingInvoices:"Loading invoices...",errorLoadingInvoices:"Error loading invoices",refreshData:"Refresh Data",currentStockValue:"Current Stock Value",filterByStore:"Filter by store",filterByDate:"Filter by date range",totalCustomsFees:"Total customs fees",averageValue:"Average value",senderInformation:"Sender Information",receiptInformation:"Receipt Information",productsSubtotal:"Products Subtotal",reservationsSubtotal:"Reservations Subtotal",servicesSubtotal:"Services Subtotal",transportTotal:"Transport Subtotal",code:"Code",description:"Description",qty:"Qty",type:"Type",id:"ID",dob:"Date of Birth",passport:"Passport",createNew:"Create New Invoice",totalOutstanding:"Total Outstanding",unpaidInvoices:"Unpaid invoices",thisMonth:"This Month",revenueCollected:"Revenue collected",overdue:"Overdue",pastDueInvoices:"Past due invoices",latestBillingActivity:"Latest billing activity",paid:"Paid",shippingMethod:"Shipping",weight:"Weight",items:"Items",bulkInformation:"Bulk Information"}},uU={common:{save:"Guardar",cancel:"Cancelar",delete:"Eliminar",edit:"Editar",add:"Agregar",close:"Cerrar",search:"Buscar",filter:"Filtrar",reset:"Restablecer",back:"Atrás",next:"Siguiente",previous:"Anterior",yes:"Sí",no:"No",from:"Desde",to:"Hasta",loading:"Cargando...",error:"Error",success:"Éxito",warning:"Advertencia",info:"Información",confirm:"Confirmar",actions:"Acciones",status:"Estado",active:"Activo",inactive:"Inactivo",date:"Fecha",time:"Hora",description:"Descripción",notes:"Notas",amount:"Monto",total:"Total",subtotal:"Subtotal",currency:"USD",language:"Idioma",english:"Inglés",spanish:"Español",noDataFound:"No se encontraron datos",required:"Requerido",optional:"Opcional",all:"Todos",none:"Ninguno",select:"Seleccionar",clear:"Limpiar",view:"Ver",unknown:"Desconocido",details:"Detalles",notAvailable:"N/A",download:"Descargar",upload:"Cargar",print:"Imprimir",export:"Exportar",import:"Importar",exportCSV:"Exportar CSV",exportExcel:"Exportar Excel",showing:"Mostrando",of:"de",dateFrom:"Fecha Desde",dateTo:"Fecha Hasta",showFilters:"Mostrar Filtros",hideFilters:"Ocultar Filtros",clearFilters:"Limpiar Filtros",suggested:"Sugerido",enhanced:"Mejorado",legacy:"Clásico",email:"Correo Electrónico",phone:"Teléfono",address:"Dirección",name:"Nombre",code:"Código",category:"Categoría",type:"Tipo",quantity:"Cantidad",price:"Precio",cost:"Costo",value:"Valor",balance:"Saldo",created:"Creado",modified:"Modificado",summary:"Resumen",history:"Historial",new:"Nuevo",addNew:"Agregar Nuevo",remove:"Remover",startDate:"Fecha de Inicio",endDate:"Fecha de Fin",invoice:"Factura",invoices:"facturas",reference:"Referencia",createdBy:"Creado Por",units:"unidades",invoiceDocumentId:"ID de Factura/Documento",referenceNumber:"Número de Referencia",referenceNumberPlaceholder:"Ingrese número de referencia...",generalNotes:"Notas Generales",auto:"Auto",optionalNotes:"Notas opcionales...",showPerPage:"Mostrar por página",first:"Primera",last:"Última",store:"Tienda",orderId:"ID de Orden",tax:"Impuesto",paymentMethods:"Métodos de Pago",cash:"Efectivo",creditCard:"Tarjeta de Crédito",shipping:"Envío",air:"Aéreo",sea:"Marítimo",thankYouBusiness:"¡Gracias por su negocio!",thankForChoosingUs:"¡Gracias por elejirnos!",taxExemptNote:"Impuesto exento en pago en efectivo.",youSaved:"Usted ahorró",generatedOn:"Generado el",printSavePDF:"Imprimir / Guardar como PDF",pageOfPages:"Página {{current}} de {{total}}",showingXofY:"Mostrando {{start}}-{{end}} de {{total}}",page:"Página",lbs:"libras"},navigation:{dashboard:"Panel de Control",accounts:"Plan de Cuentas",balanceSheet:"Balance General",inventory:"Inventario",inventoryManagement:"Gestión de Inventario",employees:"Empleados",employeeManagement:"Gestión de Empleados",entryBooks:"Libros de Entrada",journalEntries:"Asientos Contables",consolidate:"Consolidación Bancaria",reports:"Reportes",settings:"Configuración",logout:"Cerrar Sesión",home:"Inicio",hbl:"Conocimiento de Embarque"},dashboard:{title:"Panel de Control",welcome:"Bienvenido a HRM Finance",overview:"Resumen",recentActivity:"Actividad Reciente",quickActions:"Acciones Rápidas",totalAssets:"Activos Totales",totalLiabilities:"Pasivos Totales",totalEquity:"Patrimonio Total",totalRevenue:"Ingresos Totales",totalExpenses:"Gastos Totales",netIncome:"Ingreso Neto",cashBalance:"Saldo en Efectivo",accountsReceivable:"Cuentas por Cobrar",accountsPayable:"Cuentas por Pagar",inventoryValue:"Valor del Inventario",lowStockItems:"Artículos con Bajo Stock",pendingInvoices:"Facturas Pendientes",employeeCount:"Número de Empleados",monthlyPayroll:"Nómina Mensual"},accounts:{title:"Plan de Cuentas",accountNumber:"Número de Cuenta",accountName:"Nombre de Cuenta",accountType:"Tipo de Cuenta",category:"Categoría",balance:"Saldo",parentAccount:"Cuenta Padre",subAccounts:"Subcuentas",addAccount:"Agregar Cuenta",editAccount:"Editar Cuenta",deleteAccount:"Eliminar Cuenta",accountDetails:"Detalles de Cuenta",transactions:"Transacciones",accountHistory:"Historial de Cuenta",types:{asset:"Activo",liability:"Pasivo",equity:"Patrimonio",revenue:"Ingreso",expense:"Gasto"},categories:{currentAssets:"Activos Corrientes",fixedAssets:"Activos Fijos",currentLiabilities:"Pasivos Corrientes",longTermLiabilities:"Pasivos a Largo Plazo",ownersEquity:"Patrimonio del Propietario",operatingRevenue:"Ingresos Operativos",operatingExpenses:"Gastos Operativos"},allAccounts:"Todas las Cuentas"},banking:{title:"Bancario",unreconciled:"Sin Conciliar",reconciled:"Conciliado",reconciliation:"Conciliación",notReconciled:"No Conciliado"},balanceSheet:{title:"Balance General",asOf:"Al",assets:"Activos",liabilities:"Pasivos",equity:"Patrimonio",totalAssets:"Total de Activos",totalLiabilities:"Total de Pasivos",totalEquity:"Total de Patrimonio",currentAssets:"Activos Corrientes",nonCurrentAssets:"Activos No Corrientes",currentLiabilities:"Pasivos Corrientes",nonCurrentLiabilities:"Pasivos No Corrientes",retainedEarnings:"Utilidades Retenidas",commonStock:"Capital Social",generateReport:"Generar Reporte",exportPDF:"Exportar PDF",exportExcel:"Exportar Excel"},inventory:{title:"Gestión de Inventario",products:"Productos",locations:"Ubicaciones",movements:"Movimientos",overview:"Resumen",addProduct:"Agregar Producto",addLocation:"Agregar Ubicación",addMovement:"Agregar Movimiento",bulkMovement:"Movimiento Masivo",productName:"Nombre del Producto",productCode:"Código del Producto",sku:"SKU",category:"Categoría",quantity:"Cantidad",unitOfMeasure:"Unidad de Medida",unitCost:"Costo Unitario",totalValue:"Valor Total",minStockLevel:"Nivel Mínimo de Stock",maxStockLevel:"Nivel Máximo de Stock",reorderPoint:"Punto de Reorden",locationName:"Nombre de Ubicación",locationType:"Tipo de Ubicación",locationCode:"Código de Ubicación",address:"Dirección",movementType:"Tipo de Movimiento",fromLocation:"Desde Ubicación",toLocation:"Hacia Ubicación",referenceNumber:"Número de Referencia",invoiceNumber:"Número de Factura",stockIn:"Entrada de Stock",stockOut:"Salida de Stock",transfer:"Transferencia",adjustment:"Ajuste",inStock:"En Stock",lowStock:"Stock Bajo",outOfStock:"Sin Stock",stockLevels:"Niveles de Stock",stockByLocation:"Stock por Ubicación",recentMovements:"Movimientos Recientes",searchProducts:"Buscar productos...",searchLocations:"Buscar ubicaciones...",noMovements:"No se encontraron movimientos",productDetails:"Detalles del Producto",locationDetails:"Detalles de Ubicación",movementDetails:"Detalles del Movimiento",totalProducts:"Total de Productos",activeProducts:"Productos Activos",totalLocations:"Total de Ubicaciones",activeLocations:"Ubicaciones Activas",lowStockAlert:"Alerta de Stock Bajo",productsNeedRestocking:"productos necesitan reabastecimiento",lastSeen:"Visto por última vez",noProducts:"No hay productos en esta ubicación",warehouseType:"Almacén",storeType:"Tienda",supplierType:"Proveedor",customerType:"Cliente"},employees:{title:"Gestión de Empleados",employeeList:"Lista de Empleados",addEmployee:"Agregar Empleado",editEmployee:"Editar Empleado",employeeDetails:"Detalles del Empleado",personalInfo:"Información Personal",employmentInfo:"Información Laboral",payrollInfo:"Información de Nómina",firstName:"Nombre",lastName:"Apellido",fullName:"Nombre Completo",email:"Correo Electrónico",phone:"Teléfono",address:"Dirección",dateOfBirth:"Fecha de Nacimiento",employeeId:"ID de Empleado",department:"Departamento",position:"Puesto",hireDate:"Fecha de Contratación",employmentStatus:"Estado Laboral",salary:"Salario",payFrequency:"Frecuencia de Pago",taxId:"ID Fiscal",bankAccount:"Cuenta Bancaria",emergencyContact:"Contacto de Emergencia",activeEmployees:"Empleados Activos",inactiveEmployees:"Empleados Inactivos",totalPayroll:"Nómina Total",searchEmployees:"Buscar empleados..."},journal:{title:"Asientos Contables",entryNumber:"Número de Asiento",entryDate:"Fecha del Asiento",debit:"Débito",credit:"Crédito",account:"Cuenta",memo:"Nota",reference:"Referencia",createEntry:"Crear Asiento",editEntry:"Editar Asiento",deleteEntry:"Eliminar Asiento",addEntry:"Agregar Asiento Contable",updateEntry:"Actualizar Asiento",saveAsDraft:"Guardar como Borrador",post:"Registrar",postEntry:"Registrar Asiento",voidEntry:"Anular Asiento",posted:"Registrado",draft:"Borrador",reversed:"Revertido",balanced:"Balanceado",notBalanced:"No Balanceado",outOfBalance:"Desbalanceado",unbalanced:"Desbalanceado",recurringEntry:"Asiento Recurrente",attachments:"Archivos Adjuntos",draftEntry:"Asiento Borrador",postedEntry:"Asiento Registrado",totalDebits:"Débitos Totales",totalCredits:"Créditos Totales",totalDebit:"Débito Total",totalCredit:"Crédito Total",totalAmount:"Monto Total",debitShort:"Db.",creditShort:"Cr.",allEntries:"Todos los Asientos",noReference:"Sin referencia",createdBy:"Por",lines:"Líneas",entryLines:"Líneas del Asiento Contable",journalLines:"Líneas del Diario",addLine:"Agregar Línea",lineDescription:"Descripción de línea",accountLines:"Líneas de Cuentas",noDescription:"Sin descripción",andMoreLines:"... y {count} líneas más",viewDetails:"Ver Detalles",entryDetails:"Detalles del Asiento Contable",entryNotFound:"Asiento No Encontrado",entryNotFoundMessage:"El asiento contable que busca no se pudo encontrar o puede haber sido eliminado.",balanceStatus:"Estado del Balance",difference:"diferencia",createdAt:"Creado el",postedAt:"Registrado el",quickActions:"Acciones Rápidas",fixBalance:"Corregir Balance",editEntryTooltip:"Editar este asiento contable",postEntryTooltip:"Registrar este asiento contable",voidEntryTooltip:"Anular este asiento contable",draftEntryDescription:"Este asiento puede ser editado y registrado.",postedEntryDescription:"Este asiento ha sido registrado en el libro mayor. Editar creará una nueva copia borrador.",voidEntryDescription:"Este asiento ha sido anulado y no puede ser modificado.",entryMustBeBalanced:"El asiento debe estar balanceado para registrarse",entryMustBeBalancedBeforePosting:"El asiento debe estar balanceado antes de registrarse.",entryNotBalancedShort:"El asiento no está balanceado",confirmEditPosted:"Este asiento ha sido registrado. Editar creará una nueva copia borrador. ¿Continuar?",confirmPost:"¿Está seguro que desea registrar este asiento contable? Esta acción no se puede deshacer.",confirmVoid:"¿Está seguro que desea anular este asiento contable?",minTwoLinesRequired:"Se requieren al menos 2 líneas",entryNotBalanced:"Asiento no balanceado. Débito: ${debit}, Crédito: ${credit}",lineAccountRequired:"Línea {lineNumber}: La cuenta es requerida",lineAmountRequired:"Línea {lineNumber}: Se debe proporcionar monto en débito o crédito",lineBothAmounts:"Línea {lineNumber}: No puede tener montos en débito y crédito",enterEntryDescription:"Ingrese la descripción del asiento contable",enterReferenceNumber:"Ingrese el número de referencia",quickEntry:"Entrada Rápida de Diario",selectCategory:"Seleccionar Categoría",selectTemplate:"Seleccionar Plantilla",chooseCategory:"Elija una categoría...",chooseTemplate:"Elija una plantilla...",enterAmounts:"Ingresar Montos",entryPreview:"Vista Previa del Asiento",createQuickEntry:"Crear Entrada Rápida",templateRequired:"Por favor seleccione una plantilla",amountRequired:"Se requiere monto para {field}",templates:"Plantillas",manageTemplates:"Administrar Plantillas",addNewTemplate:"Agregar Nueva Plantilla",templateDetails:"Detalles de Plantilla",newTemplate:"Nueva Plantilla",editTemplate:"Editar Plantilla",templateName:"Nombre de Plantilla",enterTemplateName:"Ingrese nombre de plantilla",enterTemplateDescription:"Ingrese descripción de plantilla",category:"Categoría",templateLines:"Líneas de Plantilla",type:"Tipo",amountType:"Tipo de Monto",fieldName:"Nombre del Campo",selectAccount:"Seleccionar cuenta...",variable:"Variable",fixed:"Fijo",fieldNamePlaceholder:"ej., Monto",custom:"Personalizado",templateNameRequired:"El nombre de plantilla es requerido",templateDescriptionRequired:"La descripción de plantilla es requerida",lineDescriptionRequired:"Línea {lineNumber}: Se requiere descripción",amountFieldNameRequired:"Línea {lineNumber}: Se requiere nombre del campo de monto",confirmDeleteTemplate:"¿Está seguro que desea eliminar esta plantilla?",selectTemplateToView:"Seleccione una plantilla de la lista para ver detalles",orCreateNew:"o cree una nueva plantilla personalizada",reconciliationSummary:"Resumen de Conciliación",totalLines:"Líneas Totales",bankAccounts:"Cuentas Bancarias",bankReconciled:"Conciliadas Bancarias",bankPending:"Bancarias Pendientes",reconciledLines:"Líneas Conciliadas",unreconciledLines:"Líneas Sin Conciliar",fullyReconciled:"Completamente Conciliado",partiallyReconciled:"Parcialmente Conciliado",unreconciled:"Sin Conciliar",reconciled:"Conciliadas",pending:"Pendientes",matched:"Coincididas",manual:"Manual",pendingBankReconciliation:"Conciliación Bancaria Pendiente",visitBankConsolidations:"Visite Consolidaciones Bancarias para conciliar estas transacciones",reconciliationTip:"Consejo de Conciliación",unreconciledBankTransactions:"Este asiento tiene transacciones de cuentas bancarias sin conciliar.",bankAccount:"cuenta bancaria",currentUser:"Usuario Actual",errorDeletingTemplate:"Error al eliminar plantilla",errorSavingTemplate:"Error al guardar plantilla",noLines:"Sin líneas",noTemplateLines:"Sin líneas de plantilla"},invoiceReport:{title:"Reporte Resumen de Facturas",filters:"Filtros",storeLocation:"Ubicación de Tienda",allStores:"Todas las Tiendas",fromDate:"Fecha Desde",toDate:"Fecha Hasta",paymentMethod:"Método de Pago",allMethods:"Todos los Métodos",cash:"Efectivo",zelle:"Zelle",other:"Otro",shippingType:"Tipo de Envío",allTypes:"Todos los Tipos",maritime:"🚢 Marítimo",air:"✈️ Aéreo",generateReport:"Generar Reporte",loading:"Cargando...",print:"🖨️ Imprimir",exportPdf:"📄 Exportar PDF",generating:"📄 Generando...",close:"Cerrar",invoiceSummary:"Resumen de Facturas",totalInvoices:"Total de Facturas",dateRange:"Rango de Fechas",store:"Tienda",shippingTypeLabel:"Tipo de Envío",notSet:"No Establecido",paymentMethods:"Métodos de Pago",total:"Total",additionalCharges:"Cargos Adicionales",transport:"Transporte",aranceles:"Aranceles",tax:"Impuesto",productsSummary:"Resumen de Productos",productType:"Tipo de Producto",quantity:"Cantidad",totalValue:"Valor Total",avgPrice:"Precio Promedio",reservasSummary:"Resumen de Reservas (Agrupado por Precio)",reservaType:"Tipo de Reserva",totalQtyLbs:"Cantidad Total (lbs)",priceGroups:"Grupos de Precio (Precio → Cantidad)",otherServicesTitle:"Otros Servicios y Cargos",serviceType:"Tipo de Servicio",totalOtherServices:"Total Otros Servicios",totalSummary:"Resumen Total",productsTotal:"Total Productos",reservasTotal:"Total Reservas",transportServices:"Transporte y Servicios",grandTotal:"TOTAL GENERAL",invoiceReferences:"Referencias de Facturas",type:"Tipo",pricePerPound:"Precio por libra",totalInvoicesCount:"Total facturas",invoiceNumbers:"Números de Facturas",copyInvoiceNumbers:"📋 Copiar Números de Facturas",reportPeriod:"Período del Reporte",allTimeReport:"Reporte de Todo el Tiempo",generatedOn:"Generado el",generatingReport:"Generando reporte...",pdfGenerationFailed:"Falló la generación del PDF. Usando impresión en su lugar.",invoiceNumbersCopied:"¡Números de facturas copiados al portapapeles!",allTypesOption:"Todos los Tipos",seaOption:"🚢 Marítimo",airOption:"✈️ Aéreo",allMethodsOption:"Todos los Métodos",cashOption:"Efectivo",zelleOption:"Zelle",otherOption:"Otro",pdf:{title:"Reporte Resumen de Facturas",subtitle:"Resumen Financiero Completo",paymentMethodsSummary:"Resumen de Métodos de Pago",productsSummary:"Resumen de Productos",reservasSummary:"Resumen de Reservas (Agrupado por Precio)",otherServicesTitle:"Otros Servicios y Cargos",totalSummary:"Resumen Total",paymentMethod:"Método de Pago",amount:"Monto",product:"Producto",quantity:"Cantidad",total:"Total",type:"Tipo",totalQty:"Cantidad Total",priceGroups:"Grupos de Precio",serviceType:"Tipo de Servicio",productsTotal:"Total Productos",reservasTotal:"Total Reservas",transportServices:"Transporte y Servicios",grandTotal:"TOTAL GENERAL",generatedOn:"Generado el:",all:"Todo",reportDate:"Fecha del Reporte:",dateRange:"Rango de Fechas:",totalInvoices:"Total de Facturas:",allTypes:"Todos los Tipos",lbs:"lbs",page:"Página",of:"de"}},entryBooks:{title:"Libros de Entrada",subtitle:"Administrar asientos contables y registros del libro mayor",bookName:"Nombre del Libro",bookType:"Tipo de Libro",createBook:"Crear Libro",editBook:"Editar Libro",salesBook:"Libro de Ventas",purchaseBook:"Libro de Compras",cashBook:"Libro de Caja",generalBook:"Libro General",entries:"Entradas",addEntry:"Agregar Entrada",period:"Período",startDate:"Fecha de Inicio",endDate:"Fecha de Fin",bookBalance:"Saldo del Libro",reconciledBalance:"Saldo Conciliado",difference:"Diferencia",reconcile:"Conciliar",isReconciled:"Está Conciliado",totalEntries:"Total de Asientos",allJournalEntries:"Todos los asientos contables",postedEntriesOnly:"Solo asientos registrados",fromPostedEntries:"De {count} asientos registrados",needBankReconciliation:"Necesita conciliación bancaria",allReconciled:"Todo conciliado",sortBy:"Ordenar Por",fromDate:"Fecha Desde",toDate:"Fecha Hasta",order:"Orden",newest:"Más Reciente",oldest:"Más Antiguo",resetFilters:"Restablecer Filtros",activeFilters:"Filtros activos",from:"Desde",to:"Hasta",entriesFound:"{count} asientos encontrados",noJournalEntries:"Sin Asientos Contables",startByCreating:"Comience creando su primer asiento",noEntriesMatch:"No hay asientos que coincidan con sus filtros actuales.",createFirstEntry:"Crear Primer Asiento",confirmVoid:"¿Está seguro que desea anular este asiento contable?",void:"Anulado",viewReconciliation:"Ver Conciliación"},consolidation:{title:"Consolidación Bancaria",bankAccount:"Cuenta Bancaria",statementDate:"Fecha del Estado",beginningBalance:"Saldo Inicial",endingBalance:"Saldo Final",deposits:"Depósitos",withdrawals:"Retiros",bankCharges:"Cargos Bancarios",interest:"Intereses",reconcile:"Conciliar",matched:"Conciliado",unmatched:"No Conciliado",importStatement:"Importar Estado",manualEntry:"Entrada Manual",autoMatch:"Coincidencia Automática",clearAll:"Limpiar Todo",reconciliationStatus:"Estado de Conciliación",difference:"Diferencia",bookBalance:"Saldo en Libros",statementBalance:"Saldo del Estado",outstandingChecks:"Cheques Pendientes",depositsInTransit:"Depósitos en Tránsito"},forms:{requiredField:"Este campo es requerido",invalidEmail:"Dirección de correo inválida",invalidNumber:"Número inválido",invalidDate:"Fecha inválida",minLength:"La longitud mínima es",maxLength:"La longitud máxima es",minValue:"El valor mínimo es",maxValue:"El valor máximo es",passwordMismatch:"Las contraseñas no coinciden",selectOption:"Por favor seleccione una opción",enterValue:"Por favor ingrese un valor",confirmDelete:"¿Está seguro de que desea eliminar este elemento?",unsavedChanges:"Tiene cambios sin guardar. ¿Desea continuar?",saveSuccess:"Guardado exitosamente",saveError:"Error al guardar datos",deleteSuccess:"Eliminado exitosamente",deleteError:"Error al eliminar elemento",descriptionRequired:"La descripción es requerida",errorOccurred:"Ocurrió un error",errorPostingEntry:"Ocurrió un error al registrar el asiento"},reports:{title:"Reportes",incomeStatement:"Estado de Resultados",balanceSheet:"Balance General",cashFlow:"Estado de Flujo de Efectivo",trialBalance:"Balance de Comprobación",generalLedger:"Libro Mayor",accountsReceivable:"Cuentas por Cobrar",accountsPayable:"Cuentas por Pagar",inventoryReport:"Reporte de Inventario",payrollReport:"Reporte de Nómina",taxReport:"Reporte de Impuestos",customReport:"Reporte Personalizado",dateRange:"Rango de Fechas",fromDate:"Desde",toDate:"Hasta",generateReport:"Generar Reporte",exportOptions:"Opciones de Exportación",pdf:"PDF",excel:"Excel",csv:"CSV"},settings:{title:"Configuración",general:"General",company:"Empresa",users:"Usuarios",security:"Seguridad",backup:"Respaldo",companyName:"Nombre de la Empresa",companyAddress:"Dirección de la Empresa",taxId:"ID Fiscal",fiscalYear:"Año Fiscal",currency:"Moneda",dateFormat:"Formato de Fecha",timeZone:"Zona Horaria",language:"Idioma",theme:"Tema",lightTheme:"Claro",darkTheme:"Oscuro",autoBackup:"Respaldo Automático",backupFrequency:"Frecuencia de Respaldo",lastBackup:"Último Respaldo",restoreBackup:"Restaurar Respaldo",exportData:"Exportar Datos",importData:"Importar Datos",changePassword:"Cambiar Contraseña",twoFactorAuth:"Autenticación de Dos Factores",sessionTimeout:"Tiempo de Espera de Sesión",auditLog:"Registro de Auditoría"},unauthorized:{title:"Acceso Restringido",accessDenied:"Acceso Denegado",noPermission:"No tienes permisos para acceder a",thisFeature:"esta funcionalidad",whySeeing:"¿Por qué veo esto?",explanation:"Tu cuenta no tiene los permisos necesarios para ver este contenido.",requiredPermission:"Permiso requerido:",goToDashboard:"Ir al Panel de Control",goBack:"Regresar",featuresCanAccess:"Funcionalidades a las que puedes acceder:",dashboardAccess:"Panel de control y estadísticas generales",profileAccess:"Tu perfil y configuraciones",roleBasedAccess:"Funcionalidades habilitadas para tu rol",needAccess:"¿Necesitas acceso? Contacta a tu administrador o gerente para solicitar los permisos apropiados.",permissions:{accountAccess:"Acceso a Gestión de Cuentas",inventoryAccess:"Acceso a Inventario",employeeAccess:"Acceso a Recursos Humanos",bankingAccess:"Acceso Bancario",journalAccess:"Acceso a Asientos Contables",adminAccess:"Acceso Administrativo",financialReporting:"Acceso a Reportes Financieros",invoiceManagement:"Acceso a Gestión de Facturas",productManagement:"Acceso a Gestión de Productos",HBLAccess:"Acceso a Gestión de HBL"}},hbl:{title:"Gestión de Conocimiento de Embarque",records:"registros",searchPlaceholder:"Buscar por HBL#, guía aérea, remitente, consignatario, mercancía, bolsa#, identidad...",addNew:"Agregar Nuevo HBL",hblNumber:"Número HBL",airGuide:"Guía Aérea",airNumber:"Número Aéreo",shipper:"Remitente",consignee:"Consignatario",shipperPhone:"Teléfono del Remitente",consigneePhone:"Teléfono del Consignatario",identity:"Identidad",classification:"Clasificación",address:"Dirección",city:"Ciudad",state:"Provincia",street:"Calle",commodity:"Mercancía",weight:"Peso",quantity:"Cantidad",bagNumber:"Número de Bolsa",agency:"Agencia",guide:"Guía",guideNumber:"Número de Guía",guideNo:"Guía No.",reserveDate:"Fecha de Reserva",status:{"EN BODEGA":"En Bodega",ENVIADO:"Enviado",ENTREGADO:"Entregado",CANCELADO:"Cancelado",PENDIENTE:"Pendiente"}},eventAutomation:{title:"Automatización Basada en Eventos",subtitle:"Crea automáticamente asientos contables cuando ocurren eventos del negocio",tabs:{rules:"Reglas de Automatización",events:"Historial de Eventos",audit:"Registro de Auditoría"},rules:{title:"Reglas de Automatización Activas",createNew:"Crear Nueva Regla",noRules:"No hay reglas de automatización configuradas aún.",createFirst:"Crear Tu Primera Regla",conditions:"Condiciones",alwaysTriggers:"Siempre se activa",journalEntry:"Asiento Contable",lines:"líneas",enable:"Habilitar",disable:"Deshabilitar",priority:"Prioridad"},events:{title:"Eventos Recientes",noEvents:"No hay eventos registrados aún. Los eventos aparecerán aquí cuando ocurran.",source:"Origen",eventId:"ID de Evento",viewData:"Ver Datos del Evento"},audit:{title:"Registro de Auditoría de Automatización",noActivity:"No hay actividad de automatización registrada aún.",eventId:"ID de Evento",rulesTriggered:"Reglas Activadas",entriesCreated:"Asientos Creados",journalEntries:"asientos contables",success:"Exitoso",failed:"Fallido",error:"Error"},builder:{title:"Regla de Automatización",editTitle:"Editar Regla de Automatización",createTitle:"Crear Nueva Regla de Automatización",basicInfo:"Información Básica",ruleName:"Nombre de la Regla",ruleNamePlaceholder:"ej., Automatización de Venta en Efectivo",priority:"Prioridad (1-1000)",description:"Descripción",descriptionPlaceholder:"Describe qué hace esta regla",eventType:"Tipo de Evento",active:"Activa",eventDescription:"Descripción del Evento",conditions:{title:"Condiciones",add:"Agregar Condición",noConditions:"Sin condiciones - la regla se activará para todos",field:"Campo",operator:"Operador",value:"Valor",selectField:"Seleccionar un campo...",enterValue:"Ingresar valor...",remove:"Eliminar"},journalTemplate:{title:"Plantilla de Asiento Contable",description:"Plantilla de Descripción del Asiento",descriptionPlaceholder:"ej., Venta en Efectivo - Factura {data.invoice}",reference:"Plantilla de Referencia",referencePlaceholder:"ej., INV-{data.invoice}",tip:"Consejo: Usa {data.field} para insertar datos del evento. Campos disponibles:",lines:"Líneas del Asiento Contable",addLine:"Agregar Línea",noLines:"No hay líneas de asiento definidas. Agrega al menos una línea de débito y una de crédito.",account:"Cuenta",type:"Tipo",debit:"Débito",credit:"Crédito",descriptionTemplate:"Plantilla de Descripción",descriptionTemplatePlaceholder:"ej., Pago en efectivo de {data.customerName}",amountExpression:"Expresión de Monto",amountExpressionPlaceholder:"ej., data.totalAmount"},save:"Crear Regla",update:"Actualizar Regla",cancel:"Cancelar"},eventTypes:{invoice_completed:"Factura Completada",invoice_created:"Factura Creada",invoice_updated:"Factura Actualizada",invoice_cancelled:"Factura Cancelada",payment_received:"Pago Recibido",payment_refunded:"Pago Reembolsado",inventory_received:"Inventario Recibido",inventory_sold:"Inventario Vendido",inventory_adjusted:"Inventario Ajustado",expense_created:"Gasto Creado",expense_approved:"Gasto Aprobado",expense_paid:"Gasto Pagado",service_rendered:"Servicio Prestado",freight_processed:"Flete Procesado",customs_cleared:"Aduanas Despachadas"},operators:{equals:"Igual a",notEquals:"No Igual a",greaterThan:"Mayor Que",lessThan:"Menor Que",greaterThanOrEqual:"Mayor o Igual Que",lessThanOrEqual:"Menor o Igual Que",contains:"Contiene",notContains:"No Contiene",exists:"Existe",notExists:"No Existe"},categories:{financial:"Financiero",inventory:"Inventario",operational:"Operacional"}},invoices:{title:"Panel de Facturas",invoice:"Factura",invoices:"Facturas",invoiceNumber:"Número de Factura",invoiceDetails:"Detalles de Factura",customerInformation:"Información del Cliente",customerName:"Nombre del Cliente",legalName:"Nombre Legal",contactInformation:"Información de Contacto",idPassport:"ID/Pasaporte",phoneNumber:"Número de Teléfono",altPhone:"Teléfono Alt.",address:"Dirección",between:"Entre",and:"y",products:"Productos",reservations:"Reservaciones",services:"Servicios",unitPrice:"Precio Unitario",total:"Total",subtotal:"Subtotal",category:"Categoria",totalRevenue:"Ingresos Totales",totalProducts:"Total de Productos",totalReservations:"Total de Reservaciones",aranceles:"Aranceles (Aduanas)",uniqueCustomers:"Clientes Únicos",averageInvoice:"Factura Promedio",completed:"Completada",pending:"Pendiente",storesActive:"Tiendas Activas",topProducts:"Productos Principales",mostSoldProducts:"Productos más vendidos por cantidad",reservationsByType:"Reservaciones por Tipo",distributionOfCategories:"Distribución de categorías de reservaciones",recentInvoices:"Facturas Recientes",showingInvoices:"Mostrando {{count}} facturas",date:"Fecha",customer:"Cliente",store:"Tienda",actions:"Acciones",view:"Ver",status:"Estado",printInvoice:"Imprimir Factura",exportPdf:"Exportar PDF",backToDashboard:"Volver al Panel",fromInvoices:"De {{count}} facturas",value:"valor",activeCustomers:"Clientes activos",perInvoiceValue:"Valor por factura",locations:"Ubicaciones",mostRecentActivity:"Actividad más reciente",storeLocation:"Ubicación de Tienda",allStores:"Todas las Tiendas",fromDate:"Fecha Desde",toDate:"Fecha Hasta",clearFilters:"Limpiar Filtros",search:"Buscar",searchPlaceholder:"Buscar por # factura, cliente, tienda...",customsFees:"Aranceles totales",salesType:"VENTAS",packagesOrder:"Orden de Paquetes",businessId:"ID de Negocio",orderKey:"Clave de Orden",reservationType:"Tipo de Reservación",arancel:"Arancel",key:"Clave",noInvoicesFound:"No se encontraron facturas",loadingInvoices:"Cargando facturas...",errorLoadingInvoices:"Error al cargar facturas",refreshData:"Actualizar Datos",currentStockValue:"Valor de Stock Actual",filterByStore:"Filtrar por tienda",filterByDate:"Filtrar por rango de fechas",totalCustomsFees:"Aranceles totales",averageValue:"Valor promedio",senderInformation:"Información del Remitente",receiptInformation:"Información del Destinatario",productsSubtotal:"Subtotal de Productos",reservationsSubtotal:"Subtotal de Reservaciones",servicesSubtotal:"Subtotal de Servicios",transportTotal:"Subtotal de Transporte",code:"Código",description:"Descripción",qty:"Cant.",type:"Tipo",id:"ID",dob:"Fecha de Nacimiento",passport:"Pasaporte",shippingMethod:"Envio",weight:"Peso",items:"Articulos",bulkInformation:"Informacion de Bultos"}},hU=()=>{if(typeof window<"u"){const t=localStorage.getItem("hrmfinance-language");if(t&&["es","en"].includes(t))return t}return"en"},[tS,pU]=Ae(hU()),[rS,fU]=Ae({en:{},es:{}}),Vh={get language(){return tS()},get translations(){return rS()},setLanguage(t){pU(t),typeof window<"u"&&localStorage.setItem("hrmfinance-language",t)},setTranslations(t){fU(t)},translate(t,e){const r=tS(),n=rS()[r];if(!n)return e||t;const i=t.split(".");let o=n;for(const s of i)if(o&&typeof o=="object"&&s in o)o=o[s];else return e||t;return typeof o=="string"?o:e||t},t(t,e){return this.translate(t,e)}},Gu=()=>({t:Vh.translate.bind(Vh),language:Vh.language,setLanguage:Vh.setLanguage});Vh.setTranslations({en:dU,es:uU});const yU=async()=>{try{console.log("Testing PDF generation...");const e=(await Qo(()=>Promise.resolve().then(()=>y3),void 0)).default;console.log("jsPDF imported successfully");const r=new e;console.log("PDF document created"),r.setFontSize(20),r.text("Test PDF",20,20),r.setFontSize(12),r.text("This is a test PDF to verify the library works.",20,40),console.log("Text added to PDF"),r.save("test.pdf"),console.log("PDF saved successfully"),alert("Test PDF generated successfully!")}catch(t){console.error("Test PDF generation failed:",t),alert(`Test PDF failed: ${t.message}`)}},Yo=t=>parseFloat(t?.toString()||"0")||0,da=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t),mU=(t,e,r,n)=>{const i=e.filter(f=>f.bulkId===t?.id),o=r.filter(f=>f.bulkId===t?.id),s=n.filter(f=>f.bulkId===t?.id),a=i.reduce((f,p)=>f+Math.abs(p.qty)*Yo(p.salePrice),0),l=o.reduce((f,p)=>f+((Yo(p.qty)||0)*(Yo(p.price)||0)+(p.arancel?Yo(p.arancel):0)),0),d=s.reduce((f,p)=>f+(Yo(p.qty)||0)*(p.arancel||p.price?Yo(p.arancel||p.price):0),0),u=a+l+d,h=u+(t?.transportCost||20);return{bulkProducts:i,bulkReservas:o,bulkServices:s,productsTotal:a,reservasTotal:l,servicesTotal:d,itemsTotal:u,grandTotal:h}},gU=(t,e,r,n,i,o=!1)=>{const s=mU(t,e,r,n),{bulkProducts:a,bulkReservas:l,bulkServices:d}=s,u=`
    background: #f5f5f5;
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 20px;
  `,h=`
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 20px;
  `,f=`
    margin: 0;
    font-size: 18px;
    font-weight: bold;
    color: #333;
  `,p=`
    font-size: 14px;
    color: #666;
    margin-top: 4px;
  `,m=`
    font-size: 24px;
    font-weight: bold;
    color: #6366f1;
    text-align: right;
  `,x=`
    font-size: 12px;
    color: #666;
    text-align: right;
    margin-top: 4px;
  `,P=`
    font-size: 16px;
    font-weight: 600;
    color: #666;
    margin: 20px 0 10px 0;
  `,g=`
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 15px;
    background: white;
    border-radius: 6px;
    overflow: hidden;
   
  `,F=`
    background: #f8f9fa;
    padding: 12px;
    text-align: left;
    font-weight: 600;
    font-size: 12px;
    color: #666;
    text-transform: uppercase;
    
  `,V=`
    padding: 12px;
   
    font-size: 14px;
    color: #333;
  `;return`
    <div style="${u}">
      <!-- Bulk Header - Clean design matching the image -->
      <div style="${h}">
        <div>
          <div style="${f}">📦 ${t?.name}</div>
          <div style="${p}">
            Tipo: <strong>${t?.type}</strong> | Envío: ${t?.shippingMethod==="aereo"?"✈️":"🚢"}${t?.shippingMethod==="aereo"?"Aéreo":"Marítimo"}
          </div>
        </div>
        <div>
          <div style="${m}">${da(s.grandTotal)}</div>
          <div style="${x}">
            Artículos: ${da(s.itemsTotal)} + Transporte: ${da(t?.transportCost||20)}
          </div>
        </div>
      </div>
      
      <!-- Products Section -->
      ${a.length>0?`
        <div style="${P}">Productos (${a.length})</div>
        <table style="${g}">
          <thead>
            <tr>
              <th style="${F}">CÓDIGO</th>
              <th style="${F}">DESCRIPCIÓN</th>
              <th style="${F}; text-align: center;">CANT.</th>
              <th style="${F}; text-align: right;">PRECIO UNITARIO</th>
              <th style="${F}; text-align: right;">TOTAL</th>
            </tr>
          </thead>
          <tbody>
            ${a.map(N=>`
              <tr>
                <td style="${V}">${N.product.code}</td>
                <td style="${V}">${N.product.label}</td>
                <td style="${V}; text-align: center;">${Math.abs(N.qty)}</td>
                <td style="${V}; text-align: right;">${da(N.salePrice)}</td>
                <td style="${V}; text-align: right;">
                  ${da(Math.abs(N.qty)*Yo(N.salePrice))}
                </td>
              </tr>
            `).join("")}
          </tbody>
        </table>
      `:""}
      
      <!-- Reservations Section -->
      ${l.length>0?`
        <div style="${P}">Reservaciones (${l.length})</div>
        <table style="${g}">
          <thead>
            <tr>
              <th style="${F}">TIPO</th>
              <th style="${F}; text-align: center;">CANT.</th>
              <th style="${F}; text-align: right;">PRECIO UNITARIO</th>
              <th style="${F}; text-align: right;">ARANCEL</th>
              <th style="${F}; text-align: right;">TOTAL</th>
            </tr>
          </thead>
          <tbody>
            ${l.map(N=>`
              <tr>
                <td style="${V}">${N.type}</td>
                <td style="${V}; text-align: center;">${N.qty}</td>
                <td style="${V}; text-align: right;">${da(N.price)}</td>
                <td style="${V}; text-align: right;">${N.arancel?da(N.arancel):"-"}</td>
                <td style="${V}; text-align: right;">
                  ${da((Yo(N.qty)||0)*(Yo(N.price)||0)+(N.arancel?Yo(N.arancel):0))}
                </td>
              </tr>
            `).join("")}
          </tbody>
        </table>
      `:""}
      
      <!-- Services Section -->
      ${d.length>0?`
        <div style="${P}">Servicios (${d.length})</div>
        <table style="${g}">
          <thead>
            <tr>
              <th style="${F}">TIPO</th>
              <th style="${F}; text-align: center;">CANT.</th>
              <th style="${F}; text-align: right;">ARANCEL</th>
              <th style="${F}; text-align: right;">TOTAL</th>
            </tr>
          </thead>
          <tbody>
            ${d.map(N=>`
              <tr>
                <td style="${V}">${N.type}</td>
                <td style="${V}; text-align: center;">${Yo(N.qty).toFixed(2)}</td>
                <td style="${V}; text-align: right;">${N.arancel||N.price?da(N.arancel||N.price):"-"}</td>
                <td style="${V}; text-align: right;">
                  ${da((Yo(N.qty)||0)*(N.arancel||N.price?Yo(N.arancel||N.price):0))}
                </td>
              </tr>
            `).join("")}
          </tbody>
        </table>
      `:""}
    </div>
  `},Yv=(t,e)=>{try{console.log("Generating printable PDF...");const r=window.open("","_blank","width=800,height=600");if(!r){alert("Please allow popups to generate PDF");return}const n=t.shipper_consignee||{};let i=At.getLocationById(t?.store);const o=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Invoice ${t.invoice||"N/A"}</title>
        <style>
          body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
          }
          .header {
            display: flex;
            justify-content: space-between;
            border-bottom: 2px solid #333;
            padding-bottom: 10px;
            margin-bottom: 20px;
          }
          .company {
            font-size: 24px;
            font-weight: bold;
            color: #2563eb;
          }
          .invoice-info {
            text-align: right;
          }
          .section {
            margin: 20px 0;
          }
          .section-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
          }
          .customer-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
             font-size: 13px;
          }
          .flex{
            display: flex;
          }
          table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
          }
          th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
          }
          th {
            background-color: #f2f2f2;
            font-weight: bold;
            font-size: 13px;
          }
          td{
           font-size: 12px;
          }
          .total-row {
            font-weight: bold;
            font-size: 16px;
            background-color: #e8f4fd;
          }
          .certification-section {
            page-break-inside: avoid;
            break-inside: avoid;
            orphans: 3;
            widows: 3;
          }
          .page-break-before {
            page-break-before: always;
            break-before: page;
          }
          @media print {
            body { margin: 0; }
            .no-print { display: none; }
            .certification-section {
              page-break-inside: avoid !important;
              break-inside: avoid !important;
              orphans: 3;
              widows: 3;
            }
            .page-break-before {
              page-break-before: always !important;
              break-before: page !important;
            }
            /* Force page break if certification section would be split */
            @page {
              margin: 0.5in;
              orphans: 3;
              widows: 3;
            }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div>
            <div class="company">HRM FINANCE</div>
            <div>${e("common.store")}: ${i?.name||t?.store||"N/A"}</div>
            <div>${e("common.orderId")}: ${t.ssg_sorder_key||"N/A"}</div>
            ${t.shippingMethod?`<div>${e("common.shipping")}: ${t.shippingMethod==="aereo"?e("common.air"):e("common.sea")}</div>`:""}
          </div>
          <div class="invoice-info">
            <div style="font-size: 18px; font-weight: bold;">${e("common.invoice").toUpperCase()}</div>
            <div style="font-size: 16px; margin: 5px 0;">${t.invoice||"N/A"}</div>
            <div>${t.createDate?new Date(t.createDate).toLocaleDateString():"N/A"}</div>
            <div style="margin-top: 10px;">
              <span style="padding: 4px 8px; background: ${t.isCompleted?"#d4edda":"#fff3cd"}; border-radius: 10px; font-size: 12px;">
                ${t.isCompleted?e("invoices.completed").toUpperCase():e("invoices.pending").toUpperCase()}
              </span>
            </div>
          </div>
        </div>

        <div class="section">
          <div class="customer-info">
            <div><strong>${e("invoices.senderInformation")}:</strong> ${n.name||"N/A"}</div>
            ${n.phoneNumberS?`<div><strong>${e("invoices.phoneNumber")}:</strong> ${n.phoneNumberS}</div>`:""}
          
          </div>
          <div class="customer-info">
            <div><strong>${e("invoices.receiptInformation")}:</strong> ${[n.firstName,n.middleName,n.lastName,n.lastName2].filter(Boolean).join(" ")||"N/A"}</div>
            <div><strong>${e("invoices.phoneNumber")}:</strong> ${n.phoneNumber||"N/A"}</div>
            <div><strong>${e("invoices.id")}:</strong> ${n.cid||"N/A"}</div>
            ${n.address?`<div><strong>${e("invoices.address")}:</strong> ${n.address}</div>`:""}
          </div>
        </div>

        ${t.bulks&&t.bulks.length>0?`
        <div class="section">
          <div class="section-title">Información de Bultos</div>
          ${t.bulks.map(s=>gU(s,t.products||[],t.reservas||[],t.services||[],e,!1)).join("")}
        </div>
        `:""}

         ${t.bulks?"":` ${vU(t,e)}`}

        <div class="section flex">
          ${t?.paymentMethods?`
        <div class="section" style="margin-right: auto; width: 48%">
          <div class="section-title">${e("common.paymentMethods")}</div>
          <div class="customer-info">
            ${t.paymentMethods.cash>0?`<div><strong>💵 ${e("common.cash")}:</strong> $${t.paymentMethods?.cash?.toFixed(2)}</div>`:""}
            ${t.paymentMethods.zelle>0?`<div><strong>📱 Zelle:</strong> $${t.paymentMethods?.zelle?.toFixed(2)}</div>`:""}
            ${t.paymentMethods.creditCard>0?`<div><strong>💳 ${e("common.creditCard")}:</strong> $${t.paymentMethods?.creditCard?.toFixed(2)}</div>`:""}
            ${t.paymentMethods?.exemptTaxOnCash&&t?.paymentMethods.cash>0&&t?.taxSavings>0?`
              <div style="margin-top: 10px; padding: 8px; background-color: #e7f5ff; border-radius: 4px; font-size: 12px; font-style: italic;">
                * ${e("common.taxExemptNote")} ${e("common.youSaved")} $${t?.taxSavings.toFixed(2)}!
              </div>
            `:""}
          </div>
        </div>
        `:""}
        <div class="section ">
          <table style="margin-left: auto; width: width: 48%">
            ${t.productSubtotal?`
            <tr>
              <td><strong>${e("invoices.productsSubtotal")}:</strong></td>
              <td style="text-align: right;"><strong>$${t.productSubtotal.toFixed(2)}</strong></td>
            </tr>
            `:""}
            ${t.reservaSubtotal?`
            <tr>
              <td><strong>${e("invoices.reservationsSubtotal")}:</strong></td>
              <td style="text-align: right;"><strong>$${t.reservaSubtotal.toFixed(2)}</strong></td>
            </tr>
            `:""}
            ${t.serviceSubtotal?`
            <tr>
              <td><strong>${e("invoices.servicesSubtotal")}:</strong></td>
              <td style="text-align: right;"><strong>$${t.serviceSubtotal.toFixed(2)}</strong></td>
            </tr>
            `:""}
            ${t.transportTotal?`
            <tr>
              <td><strong>${e("invoices.transportTotal")}:</strong></td>
              <td style="text-align: right;"><strong>$${t.transportTotal.toFixed(2)}</strong></td>
            </tr>
            `:""}
            ${t.taxAmount&&t.taxAmount>0?`
            <tr>
              <td><strong>${e("common.subtotal")}:</strong></td>
              <td style="text-align: right;"><strong>$${(t.subtotalBeforeTax||0).toFixed(2)}</strong></td>
            </tr>
            <tr>
              <td><strong>${e("common.tax")} (${t.paymentMethods?.taxPercent||7}%):</strong></td>
              <td style="text-align: right;"><strong>$${t.taxAmount.toFixed(2)}</strong></td>
            </tr>
            `:""}
            <tr class="total-row">
              <td><strong>${e("invoices.total").toUpperCase()}:</strong></td>
              <td style="text-align: right;"><strong>$${(t.total||0).toFixed(2)}</strong></td>
            </tr>
          </table>
        </div>
        </div>
        
       

        <!-- Certification Section -->
        <div class="certification-section" style="margin-top: 40px; padding: 20px; border: 2px solid #333; background: #f9f9f9;">
          <div style="text-align: center; font-weight: bold; font-size: 14px; margin-bottom: 15px; text-transform: uppercase;">
            CERTIFICACIÓN DEL EMBARCADOR
          </div>
          <div style="font-size: 11px; line-height: 1.4; text-align: justify; margin-bottom: 20px;">
            <p><strong>Certifico que no envío sustancias ni productos prohibidos por las leyes y las aduanas de USA y Cuba, como por ejemplo:</strong> drogas, armas, explosivos, cigarrillos electrónicos, drones profesionales, joyas, prendas, dinero en efectivo, semillas, narcóticos, fármacos controlados, productos agrícolas de tipo herbicidas o antifúngicidas, ningún tipo de producto perecedero que necesite refrigeración.</p>
            
            <p><strong>Entiendo que al llenar este formulario, al enviar alguna de las sustancias o productos antes descritos mi carga puede ser decamisada completa o parcialmente por las aduanas de Cuba o USA sin derecho a reclamo ni compensación,</strong> de parte mía como embarcador, ni de la persona a quien envío (consignatario).</p>
            
           </div>
          
          <!-- Signature Section -->
          <div style="display: flex; justify-content: space-between; margin-top: 30px;">
            <div style="width: 45%; text-align: center;">
              <div style="border-bottom: 2px solid #333; margin-bottom: 10px; height: 40px;"></div>
              <div style="font-size: 10px; font-weight: bold;">FIRMA DEL EMBARCADOR / SHIPPER SIGNATURE</div>
              <div style="font-size: 10px; margin-top: 5px;">${n.name||"N/A"}</div>
            </div>
            <div style="width: 45%; text-align: center;">
              <div style="border-bottom: 2px solid #333; margin-bottom: 10px; height: 40px;"></div>
              <div style="font-size: 10px; font-weight: bold;">FECHA / DATE</div>
              <div style="font-size: 10px; margin-top: 5px;">${new Date().toLocaleDateString()}</div>
            </div>
          </div>
        </div>

        <div style="margin-top: 40px; text-align: center; color: #666; font-size: 12px;">
          <p>${e("common.thankForChoosingUs")}</p>
          <p>${e("common.generatedOn")} ${new Date().toLocaleDateString()}</p>
        </div>

        <script>
          // Check if certification section needs page break
          function checkCertificationPageBreak() {
            const certSection = document.querySelector('.certification-section');
            if (!certSection) return;
            
            // Reset any previous page break class to get accurate measurements
            certSection.classList.remove('page-break-before');
            
            // Force a layout recalculation
            certSection.offsetHeight;
            
            const rect = certSection.getBoundingClientRect();
            const certHeight = rect.height;
            const certTop = rect.top;
            
            // Estimate print page height (assuming standard letter size at 96 DPI)
            // Standard letter: 11 inches - 1 inch margins = 10 inches usable
            // At 96 DPI: 10 * 96 = 960px usable height per page
            const printPageHeight = 960;
            const pageMargin = 48; // 0.5 inch margins
            
            // Calculate current position on the page
            const currentPagePosition = certTop % printPageHeight;
            const remainingPageSpace = printPageHeight - currentPagePosition - pageMargin;
            
            // Add some buffer space (50px) to ensure comfortable fit
            const requiredSpace = certHeight + 50;
            
            false && console.log('Certification section analysis:', {
              certHeight,
              certTop,
              currentPagePosition,
              remainingPageSpace,
              requiredSpace,
              needsPageBreak: requiredSpace > remainingPageSpace
            });
            
            // Only add page break if certification truly won't fit
            if (requiredSpace > remainingPageSpace && remainingPageSpace < printPageHeight * 0.4) {
              // console.log('Adding page break for certification section');
              certSection.classList.add('page-break-before');
            }
          }
          
          // Run check when page loads and before printing
          document.addEventListener('DOMContentLoaded', function() {
            // Delay to ensure all content is rendered
            setTimeout(checkCertificationPageBreak, 100);
          });
          window.addEventListener('beforeprint', checkCertificationPageBreak);
        <\/script>

        <div class="no-print" style="margin-top: 30px; text-align: center;">
          <button onclick="window.print()" style="padding: 10px 20px; font-size: 16px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">
            ${e("common.printSavePDF")}
          </button>
          <button onclick="window.close()" style="padding: 10px 20px; font-size: 16px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">
            ${e("common.close")}
          </button>
        </div>
      </body>
      </html>
    `;r.document.write(o),r.document.close(),r.focus(),console.log("Printable PDF window opened")}catch(r){console.error("Error generating printable PDF:",r),alert("Error generating printable PDF: "+r.message)}},vU=(t,e)=>`
  ${t.products&&t.products.length>0?`
        <div class="section">
          <div class="section-title">${e("invoices.products")}</div>
          <table>
            <thead>
              <tr>
                <th>${e("invoices.code")}</th>
                <th>${e("invoices.description")}</th>
                <th>${e("invoices.qty")}</th>
                <th>${e("invoices.unitPrice")}</th>
                <th>${e("invoices.total")}</th>
              </tr>
            </thead>
            <tbody>
              ${t.products.map(r=>`
                <tr>
                  <td>${r.product?.code||"N/A"}</td>
                  <td>${r.product?.label||"N/A"}</td>
                  <td>${Math.abs(r.qty||0).toFixed(2)}</td>
                  <td>$${parseFloat(r.salePrice||0).toFixed(2)}</td>
                  <td>$${(r.total||Math.abs(r.qty||0)*parseFloat(r.salePrice||0)).toFixed(2)}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
        </div>
        `:""}
       

        ${t.reservas&&t.reservas.length>0?`
        <div class="section">
          <div class="section-title">${e("invoices.reservations")}</div>
          <table>
            <thead>
              <tr>
                <th>${e("invoices.type")}</th>
                <th>${e("invoices.qty")}</th>
                <th>${e("invoices.unitPrice")}</th>
                <th>${e("invoices.arancel")}</th>
                <th>${e("invoices.total")}</th>
              </tr>
            </thead>
            <tbody>
              ${t.reservas.map(r=>{const n=parseFloat(r.qty||0),i=parseFloat(r.price||0),o=parseFloat(r.arancel||0),s=r.total||n*i+o;return`
                  <tr>
                    <td>${r.type||"N/A"}</td>
                    <td>${n.toFixed(2)}</td>
                    <td>$${i.toFixed(2)}</td>
                    <td>${o>0?"$"+o.toFixed(2):"-"}</td>
                    <td>$${s.toFixed(2)}</td>
                  </tr>
                `}).join("")}
            </tbody>
          </table>
        </div>
        `:""}

        ${t.services&&t.services.length>0?`
        <div class="section">
          <div class="section-title">${e("invoices.services")}</div>
          <table>
            <thead>
              <tr>
                <th>${e("invoices.type")}</th>
                <th>${e("invoices.qty")}</th>
                <th>${e("invoices.arancel")}</th>
                <th>${e("invoices.total")}</th>
              </tr>
            </thead>
            <tbody>
              ${t.services.map(r=>{const n=parseFloat(r.qty||0),i=parseFloat(r.arancel||r.price||0),o=r.total||n*i;return`
                  <tr>
                    <td>${r.type||"N/A"}</td>
                    <td>${n.toFixed(2)}</td>
                    <td>${i>0?"$"+i.toFixed(2):"-"}</td>
                    <td>$${o.toFixed(2)}</td>
                  </tr>
                `}).join("")}
            </tbody>
          </table>
        </div>
        `:""}
  `,bU=async(t,e)=>{try{console.log("Starting professional PDF generation...");const n=(await Qo(()=>Promise.resolve().then(()=>y3),void 0)).default,i=new n,o=210,s=297,a=15,l=o-a*2,d={r:180,g:180,b:180},u={r:80,g:80,b:80},h={r:130,g:130,b:130},f={r:248,g:248,b:248},p={r:252,g:252,b:252},m={r:120,g:120,b:120},x={r:150,g:150,b:150};let P=a;const g=te=>{i.setTextColor(te.r,te.g,te.b)},F=te=>{i.setFillColor(te.r,te.g,te.b)},V=(te,oe,pe,ne,Q,ce=!1)=>{i.roundedRect(te,oe,pe,ne,Q,Q,ce?"F":"S")};F(p),i.rect(0,0,o,50,"F"),i.setDrawColor(d.r,d.g,d.b),i.setLineWidth(.5),i.line(0,50,o,50),g(u),i.setFontSize(32),i.setFont("helvetica","bold"),i.text("HRM",a,25),g(h),i.setFontSize(32),i.setFont("helvetica","normal");const N=i.getTextWidth("HRM ");i.text("FINANCE",a+N,25),g(h),i.setFontSize(9),i.setFont("helvetica","normal"),i.text("Professional Business Solutions",a,35);const R=70,M=o-a-R;i.setDrawColor(d.r,d.g,d.b),i.setLineWidth(.5),V(M,12,R,26,2,!1),g(u),i.setFontSize(14),i.setFont("helvetica","bold");const C=e("common.invoice").toUpperCase(),k=i.getTextWidth(C);i.text(C,M+(R-k)/2,22),i.setFontSize(11),i.setFont("helvetica","normal");const D=t.invoice||"N/A",$=i.getTextWidth(D);i.text(D,M+(R-$)/2,32),P=60,F(p),i.rect(0,50,o,20,"F");const w=t.isCompleted,_=w?e("invoices.completed").toUpperCase():e("invoices.pending").toUpperCase();g(w?u:h),i.setFontSize(8),i.setFont("helvetica","bold"),i.text(`STATUS: ${_}`,a,58),g(h),i.setFontSize(9),i.setFont("helvetica","normal");const z=t.createDate?new Date(t.createDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A";i.text(z,o-a-i.getTextWidth(z),58),P=58,i.text(`${e("common.store")}: ${t.store||"N/A"}`,a+60,P),P+=5,i.text(`${e("common.orderId")}: ${t.ssg_sorder_key||"N/A"}`,a+60,P),t.shippingMethod&&i.text(`${e("common.shipping")}: ${t.shippingMethod==="aereo"?e("common.air"):e("common.sea")}`,o-a-50,P),P=80,g(u),i.setFontSize(14),i.setFont("helvetica","bold"),i.text(e("invoices.customerInformation"),a,P),P+=10;const W=45,A=10,I=(l-A)/2;F(p),V(a,P,I,W,3,!0),i.setDrawColor(d.r,d.g,d.b),i.setLineWidth(.3),V(a,P,I,W,3);const ee=t.shipper_consignee||{};let Z=P+8;g(h),i.setFontSize(9),i.text(e("invoices.senderInformation"),a+5,Z),Z+=7,g(u),i.setFontSize(11),i.setFont("helvetica","bold"),i.text(ee.name||"N/A",a+5,Z),ee.phoneNumberS&&(Z+=6,i.setFont("helvetica","normal"),i.setFontSize(9),g(h),i.text(`${e("invoices.altPhone")}: ${ee.phoneNumberS}`,a+5,Z)),F(p),V(a+I+A,P,I,W,3,!0),i.setDrawColor(d.r,d.g,d.b),i.setLineWidth(.3),V(a+I+A,P,I,W,3),Z=P+8,g(h),i.setFontSize(9),i.text(e("invoices.receiptInformation"),a+I+A+5,Z),Z+=7;const X=[ee.firstName,ee.middleName,ee.lastName,ee.lastName2].filter(Boolean).join(" ")||"N/A";if(g(u),i.setFontSize(11),i.setFont("helvetica","bold"),i.text(X,a+I+A+5,Z),Z+=6,i.setFont("helvetica","normal"),i.setFontSize(9),g(h),i.text(`${e("invoices.phoneNumber")}: ${ee.phoneNumber||"N/A"}`,a+I+A+5,Z),Z+=5,i.text(`${e("invoices.id")}: ${ee.cid||"N/A"}`,a+I+A+5,Z),ee.address)Z+=5,ee.address.split(",").map(oe=>oe.trim()).forEach((oe,pe)=>{pe<2&&oe&&(i.text(oe,a+I+A+5,Z),Z+=5)});else{let te=`${ee.ybstreet||""} #${ee.ybstreetNo||""} ${e("invoices.between")} ${ee.ybbetwen1||""} ${e("invoices.and")} ${ee.ybbetwen2||""}`,oe=`${ee.ybreparto||""}, ${ee.ybcity||""}, ${ee.ybestate||""}`;Z+=5,i.text(te,a+I+A+5,Z),Z+=5,i.text(oe,a+I+A+5,Z)}if(P+=W+15,t?.products&&t?.products?.length>0){g(u),i.setFontSize(14),i.setFont("helvetica","bold"),i.text(e("invoices.products"),a,P),P+=10,F(f),i.rect(a,P-6,l,10,"F"),i.setDrawColor(d.r,d.g,d.b),i.setLineWidth(.3),i.line(a,P+4,o-a,P+4),i.setFontSize(9),i.setFont("helvetica","bold"),g(u);const te={code:a+5,description:a+35,qty:a+115,price:a+135,total:a+160};i.text(e("invoices.code"),te.code,P),i.text(e("invoices.description"),te.description,P),i.text(e("invoices.qty"),te.qty,P),i.text(e("invoices.unitPrice"),te.price,P),i.text(e("invoices.total"),te.total,P),P+=10,i.setFont("helvetica","normal"),i.setFontSize(9),t.products.forEach((oe,pe)=>{P>250&&(i.addPage(),P=a),pe%2===0&&(F(p),i.rect(a,P-4,l,8,"F")),g(u),i.text(oe.product?.code||"N/A",te.code,P);let ne=oe.product?.label||"N/A";i.getTextWidth(ne)>70&&(ne=ne.substring(0,40)+"..."),i.text(ne,te.description,P);const Q=Math.abs(oe.qty||0),ce=parseFloat(oe.salePrice||0),ue=oe.total||Q*ce;i.text(Q.toString(),te.qty,P),i.text(`$${ce.toFixed(2)}`,te.price,P),i.setFont("helvetica","bold"),i.text(`$${ue.toFixed(2)}`,te.total,P),i.setFont("helvetica","normal"),P+=8}),i.setDrawColor(d.r,d.g,d.b),i.setLineWidth(.3),i.line(a,P,o-a,P),P+=15}if(t.reservas&&t.reservas.length>0){P>200&&(i.addPage(),P=a),g(u),i.setFontSize(14),i.setFont("helvetica","bold"),i.text(e("invoices.reservations"),a,P),P+=10,F(f),i.rect(a,P-6,l,10,"F"),i.setDrawColor(d.r,d.g,d.b),i.setLineWidth(.3),i.line(a,P+4,o-a,P+4),i.setFontSize(9),i.setFont("helvetica","bold"),g(u);const te={type:a+5,qty:a+65,price:a+95,arancel:a+125,total:a+160};i.text(e("invoices.type"),te.type,P),i.text(e("invoices.qty"),te.qty,P),i.text(e("invoices.unitPrice"),te.price,P),i.text(e("invoices.arancel"),te.arancel,P),i.text(e("invoices.total"),te.total,P),P+=10,i.setFont("helvetica","normal"),i.setFontSize(9),t.reservas.forEach((oe,pe)=>{P>250&&(i.addPage(),P=a),pe%2===0&&(F(p),i.rect(a,P-4,l,8,"F")),g(u),i.text(oe.type||"N/A",te.type,P);const ne=parseFloat(oe.qty||0),Q=parseFloat(oe.price||0),ce=parseFloat(oe.arancel||0),ue=oe.total||ne*Q+ce;i.text(ne.toString(),te.qty,P),i.text(`$${Q.toFixed(2)}`,te.price,P),i.text(`$${ce.toFixed(2)}`,te.arancel,P),i.setFont("helvetica","bold"),i.text(`$${ue.toFixed(2)}`,te.total,P),i.setFont("helvetica","normal"),P+=8}),i.setDrawColor(d.r,d.g,d.b),i.setLineWidth(.3),i.line(a,P,o-a,P),P+=15}P>210&&(i.addPage(),P=a);const se=o-a-80,U=80;let E=60;t.taxAmount&&t.taxAmount>0&&(E+=16),F(p),V(se-10,P,U+10,E,3,!0),i.setDrawColor(d.r,d.g,d.b),i.setLineWidth(.3),V(se-10,P,U+10,E,3);let O=P+10;if(i.setFontSize(10),g(h),t.productSubtotal!==void 0&&t.productSubtotal>0&&(i.text(e("invoices.productsSubtotal"),se,O),i.text(`$${t.productSubtotal.toFixed(2)}`,se+U-15,O,{align:"right"}),O+=8),t.reservaSubtotal!==void 0&&t.reservaSubtotal>0&&(i.text(e("invoices.reservationsSubtotal"),se,O),i.text(`$${t.reservaSubtotal.toFixed(2)}`,se+U-15,O,{align:"right"}),O+=8),t.taxAmount&&t.taxAmount>0){i.text(e("common.subtotal"),se,O),i.text(`$${(t.subtotalBeforeTax||0).toFixed(2)}`,se+U-15,O,{align:"right"}),O+=8;const te=t.paymentMethods?.taxPercent||7;i.text(`${e("common.tax")} (${te}%)`,se,O),i.text(`$${t.taxAmount.toFixed(2)}`,se+U-15,O,{align:"right"}),O+=8}if(i.setDrawColor(d.r,d.g,d.b),i.setLineWidth(.3),i.line(se,O+2,se+U-10,O+2),O+=10,i.setFontSize(14),i.setFont("helvetica","bold"),g(u),i.text(e("invoices.total"),se,O),i.text(`$${(t.total||0).toFixed(2)}`,se+U-15,O,{align:"right"}),t.paymentMethods){P+=E+20,g(u),i.setFontSize(12),i.setFont("helvetica","bold"),i.text(e("common.paymentMethods"),a,P),P+=10,i.setFontSize(10),i.setFont("helvetica","normal"),g(h);const te=t.paymentMethods;let oe=P;te.cash&&te.cash>0&&(i.text(`${e("common.cash")}:`,a+5,oe),i.text(`$${te.cash.toFixed(2)}`,a+50,oe),oe+=6),te.zelle&&te.zelle>0&&(i.text("Zelle:",a+5,oe),i.text(`$${te.zelle.toFixed(2)}`,a+50,oe),oe+=6),te.creditCard&&te.creditCard>0&&(i.text(`${e("common.creditCard")}:`,a+5,oe),i.text(`$${te.creditCard.toFixed(2)}`,a+50,oe),oe+=6),te.exemptTaxOnCash&&te.cash>0&&t.taxSavings>0&&(oe+=4,i.setFontSize(9),i.setFont("helvetica","italic"),i.text(`* Tax exempted on cash payment. You saved $${t.taxSavings.toFixed(2)}!`,a+5,oe)),P=oe+10}P=s-30,F(p),i.rect(0,P-10,o,40,"F"),i.setFontSize(12),i.setFont("helvetica","italic"),g(h);const L=e("common.thankYouBusiness"),G=i.getTextWidth(L);i.text(L,(o-G)/2,P),P+=8,i.setFontSize(9),i.setFont("helvetica","normal");const K="www.hrmfinance.com | info@hrmfinance.com | +1 (555) 123-4567",q=i.getTextWidth(K);i.text(K,(o-q)/2,P),P+=8,i.setFontSize(8);const B=`Generated on ${new Date().toLocaleString("en-US")}`,H=i.getTextWidth(B);i.text(B,(o-H)/2,P);const Y=`invoice-${t.invoice||"unknown"}.pdf`;i.save(Y),console.log("Professional PDF saved successfully:",Y)}catch(r){throw console.error("Error in generateProfessionalInvoicePDF:",r),r}},ni=t=>parseFloat(t?.toString()||"0")||0,PU=t=>{if(t?.includes("/")){const[e,r,n]=t.split("/");return`${n}-${e.padStart(2,"0")}-${r.padStart(2,"0")}`}if(t?.includes("-")){const[e,r,n]=t.split("-");return`${n}-${e.padStart(2,"0")}-${r.padStart(2,"0")}`}return t},xU=t=>{const e=[];return t?.ybstreet&&(e.push(t?.ybstreet),t?.ybstreetNo&&e.push(`# ${t?.ybstreetNo}`)),t?.ybbetwen1&&t?.ybbetwen2&&e.push(`/ ${t?.ybbetwen1} y ${t.ybbetwen2}`),t?.ybreparto&&e.push(`, Rpto ${t?.ybreparto}`),t?.ybcity&&e.push(`, ${t?.ybcity}`),t?.ybestate&&e.push(`, ${t?.ybestate}`),e.join(" ")},SU=t=>{const e=ni(t.qty),r=ni(t.price),n=ni(t.arancel);return t.onlyTariff,{lbs:e*r,arancel:n,total:e*r+n}},wU=t=>{const e=Math.abs(t.qty),r=ni(t.salePrice);return e*r},CU=(t,e)=>{const r=t.split("-");if(r.length>=3){const n=r[0];return{YY_8803:"BISSONNET"}[n]||e}return e},vm=t=>{const e=t?.products?.reduce((R,M)=>R+wU(M),0),r=t?.reservas?.reduce((R,M)=>R+SU(M).total,0),n=t?.services?.reduce((R,M)=>{const C=ni(M.qty),k=ni(M.arancel);return R+C*k},0)||0;var i=0;t.bulks&&t.bulks.length>0&&t.bulks.forEach(R=>{i+=R?.transportCost||20});const o=t.transportTotal||i,s=parseFloat(ni(r).toFixed(2)),a=parseFloat(ni(n).toFixed(2));var l=ni(e)+ni(r)+ni(n)+ni(o),d=t?.TaxPercent||0,u=l*d/100,h=0,f=l+u,p=0;t?.paymentMethods&&t.subtotalBeforeTax&&(d=t?.paymentMethods?.taxPercent||0,u=t.taxAmount||0,f=t.total||0,l=t.subtotalBeforeTax||0,h=t?.taxSavings||0);const x=(t?.products||[])?.map((R,M)=>({id:Date.now().toString()+M,product:{id:R.product.id,code:R.product.code,label:R.product.label,price:0},qty:Math.abs(R.qty),salePrice:ni(R.salePrice),total:Math.abs(R.qty)*ni(R.salePrice),bulkId:R.bulkId})),P=t?.reservas?.map((R,M)=>({id:Date.now().toString()+M+1e3,type:R.type,qty:ni(R.qty),price:ni(R.price),arancel:ni(R.arancel),total:ni(R.qty)*ni(R.price)+ni(R.arancel),bulkId:R.bulkId})),g=t?.services?.map((R,M)=>{const C=ni(R.qty),k=ni(R.arancel);return{id:Date.now().toString()+M+2e3,type:R.type,qty:C,arancel:k,total:C*k,bulkId:R.bulkId}})||[],F={name:t.shipper_consignee?.name,firstName:t.shipper_consignee?.firstName,middleName:t.shipper_consignee?.middleName||"",lastName:t.shipper_consignee?.lastName,lastName2:t.shipper_consignee?.lastName2||"",phoneNumber:t.shipper_consignee?.phoneNumber,cid:t.shipper_consignee?.cid,passport:t.shipper_consignee?.passport||"",address:xU(t.shipper_consignee),phoneNumberS:t.shipper_consignee?.phoneNumberS,dob:PU(t.shipper_consignee?.dob)},V=CU(t.invoice,t.store),N=t.shippingMethod?.toLowerCase()==="aereo"?"aereo":"maritimo";return{invoice:t.invoice,description:t.description||"",store:V,shipper_consignee:F,products:x,reservas:P,services:g,bulks:t?.bulks,packagesOrder:t.packagesOrder,shippingMethod:N,paymentMethods:t?.paymentMethods,type:t.type,ssg_inventory_key:t.ssg_inventory_key,ssg_sorder_key:t.ssg_sorder_key,createDate:t.createDate,businessId:t.businessId,isCompleted:t.isCompleted,productSubtotal:e,reservaSubtotal:s,serviceSubtotal:a,subtotalBeforeTax:l,taxAmount:u,taxSavings:h,transportTotal:o,total:f,taxCalculationMethod:"subtotal",cashPaymentRatio:p}};var _U=le("<div>: <strong></strong> | <!>: <strong>"),AU=le("<div>: <!> + <!>: "),nS=le("<thead><tr><th></th><th></th><th></th><th></th><th>"),Xv=le("<div><h5> (<!>)</h5><table><tbody>"),kU=le("<thead><tr><th></th><th></th><th></th><th>"),EU=le("<div>"),TU=le("<div><div><div><h4>📦 </h4></div><div><div>"),IU=le("<strong>/<!> lbs"),iS=le("<tr><td></td><td></td><td></td><td></td><td>"),NU=le("<tr><td></td><td></td><td></td><td>");const RU=t=>{const e=()=>t.products.filter(m=>m.bulkId===t.bulk?.id),r=()=>t.reservas.filter(m=>m.bulkId===t.bulk?.id),n=()=>t.services.filter(m=>m.bulkId===t.bulk?.id),i=()=>{const m=e().reduce((V,N)=>V+Math.abs(N.qty)*t.parseFloat2(N.salePrice),0),x=r().reduce((V,N)=>V+((t.parseFloat2(N.qty)||0)*(t.parseFloat2(N.price)||0)+(N.arancel?t.parseFloat2(N.arancel):0)),0),P=n().reduce((V,N)=>V+(t.parseFloat2(N.qty)||0)*(N.arancel||N.price?t.parseFloat2(N.arancel||N.price):0),0),g=m+x+P,F=g+(t.bulk?.transportCost||20);return{productsTotal:m,reservasTotal:x,servicesTotal:P,itemsTotal:g,grandTotal:F}},o=()=>({border:"1px solid var(--border-color)","border-radius":t.compact?"var(--border-radius-sm)":"var(--border-radius)",padding:t.compact?"0.75rem":"1rem","margin-bottom":t.compact?"0.75rem":"1rem",background:"var(--strip-color)"}),s=()=>({display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":t.compact?"0.5rem":"1rem","padding-bottom":t.compact?"0.25rem":"0.5rem","border-bottom":"1px solid var(--border-color)"}),a=()=>({margin:0,"font-size":t.compact?"1rem":"1.1rem","font-weight":"bold",color:"var(--text-primary)"}),l=()=>({"font-size":t.compact?"0.75rem":"0.875rem",color:"var(--text-muted)","margin-top":"0.25rem"}),d=()=>({"text-align":"right","font-weight":"bold","font-size":t.compact?"1rem":"1.1rem",color:"var(--primary-color)"}),u=()=>({"font-size":t.compact?"0.65rem":"0.75rem",color:"var(--text-muted)","margin-top":"0.125rem"}),h=()=>({margin:"0 0 0.5rem 0","font-size":t.compact?"0.85rem":"0.95rem",color:"var(--text-secondary)","font-weight":"500"}),f=()=>({...t.tableStyle,"font-size":t.compact?"0.8rem":"0.875rem","margin-bottom":t.compact?"0.5rem":"0.75rem"}),p=()=>({...t.tdStyle,padding:t.compact?"0.375rem":"0.5rem"});return(()=>{var m=TU(),x=m.firstChild,P=x.firstChild,g=P.firstChild;g.firstChild;var F=P.nextSibling,V=F.firstChild;return c(g,()=>t.bulk?.name,null),c(P,T(We,{get when(){return t.showDetails},get children(){var N=_U(),R=N.firstChild,M=R.nextSibling,C=M.nextSibling,k=C.nextSibling,D=k.nextSibling,$=D.nextSibling;return c(N,()=>t.t("invoices.type"),R),c(M,()=>t.bulk?.type),c(N,()=>t.t("invoices.shippingMethod"),k),c($,()=>t.bulk?.shippingMethod==="aereo"?"🛩️ Aéreo":"🚢 Marítimo"),c(N,(()=>{var w=Ve(()=>!!(t.bulk?.currentWeight&&t.bulk?.maxWeight));return()=>w()&&[" | ",Ve(()=>t.t("invoices.weight")),": ",(()=>{var _=IU(),v=_.firstChild,z=v.nextSibling;return z.nextSibling,c(_,()=>t.bulk?.currentWeight,v),c(_,()=>t.bulk?.maxWeight,z),_})()]})(),null),be(w=>y(N,l(),w)),N}}),null),F.style.setProperty("text-align","right"),c(V,()=>t.formatCurrency(i().grandTotal)),c(F,T(We,{get when(){return t.showDetails},get children(){var N=AU(),R=N.firstChild,M=R.nextSibling,C=M.nextSibling,k=C.nextSibling;return k.nextSibling,c(N,()=>t.t("invoices.items"),R),c(N,()=>t.formatCurrency(i().itemsTotal),M),c(N,()=>t.t("invoiceReport.transport"),k),c(N,()=>t.formatCurrency(t.bulk?.transportCost||20),null),be(D=>y(N,u(),D)),N}}),null),c(m,T(We,{get when(){return e().length>0},get children(){var N=Xv(),R=N.firstChild,M=R.firstChild,C=M.nextSibling;C.nextSibling;var k=R.nextSibling,D=k.firstChild;return c(R,()=>t.t("invoices.products"),M),c(R,()=>e().length,C),c(k,T(We,{get when(){return!t.compact},get children(){var $=nS(),w=$.firstChild,_=w.firstChild,v=_.nextSibling,z=v.nextSibling,W=z.nextSibling,A=W.nextSibling;return c(_,()=>t.t("invoices.code")),c(v,()=>t.t("invoices.description")),c(z,()=>t.t("invoices.qty")),c(W,()=>t.t("invoices.unitPrice")),c(A,()=>t.t("invoices.total")),be(I=>{var ee=t.thStyle,Z=t.thStyle,X={...t.thStyle,"text-align":"center"},se={...t.thStyle,"text-align":"right"},U={...t.thStyle,"text-align":"right"};return I.e=y(_,ee,I.e),I.t=y(v,Z,I.t),I.a=y(z,X,I.a),I.o=y(W,se,I.o),I.i=y(A,U,I.i),I},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),$}}),D),c(D,T(_t,{get each(){return e()},children:$=>(()=>{var w=iS(),_=w.firstChild,v=_.nextSibling,z=v.nextSibling,W=z.nextSibling,A=W.nextSibling;return c(_,()=>$.product.code),c(v,()=>$.product.label),c(z,()=>Math.abs($.qty)),c(W,()=>t.formatCurrency($.salePrice)),c(A,()=>t.formatCurrency(Math.abs($.qty)*t.parseFloat2($.salePrice))),be(I=>{var ee=p(),Z=p(),X={...p(),"text-align":"center"},se={...p(),"text-align":"right"},U={...p(),"text-align":"right"};return I.e=y(_,ee,I.e),I.t=y(v,Z,I.t),I.a=y(z,X,I.a),I.o=y(W,se,I.o),I.i=y(A,U,I.i),I},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),w})()})),be($=>{var w=t.compact?"0.5rem":"0.75rem",_=h(),v=f();return w!==$.e&&(($.e=w)!=null?N.style.setProperty("margin-bottom",w):N.style.removeProperty("margin-bottom")),$.t=y(R,_,$.t),$.a=y(k,v,$.a),$},{e:void 0,t:void 0,a:void 0}),N}}),null),c(m,T(We,{get when(){return r().length>0},get children(){var N=Xv(),R=N.firstChild,M=R.firstChild,C=M.nextSibling;C.nextSibling;var k=R.nextSibling,D=k.firstChild;return c(R,()=>t.t("invoices.reservations"),M),c(R,()=>r().length,C),c(k,T(We,{get when(){return!t.compact},get children(){var $=nS(),w=$.firstChild,_=w.firstChild,v=_.nextSibling,z=v.nextSibling,W=z.nextSibling,A=W.nextSibling;return c(_,()=>t.t("invoices.type")),c(v,()=>t.t("invoices.qty")),c(z,()=>t.t("invoices.unitPrice")),c(W,()=>t.t("invoices.arancel")),c(A,()=>t.t("invoices.total")),be(I=>{var ee=t.thStyle,Z={...t.thStyle,"text-align":"center"},X={...t.thStyle,"text-align":"right"},se={...t.thStyle,"text-align":"right"},U={...t.thStyle,"text-align":"right"};return I.e=y(_,ee,I.e),I.t=y(v,Z,I.t),I.a=y(z,X,I.a),I.o=y(W,se,I.o),I.i=y(A,U,I.i),I},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),$}}),D),c(D,T(_t,{get each(){return r()},children:$=>(()=>{var w=iS(),_=w.firstChild,v=_.nextSibling,z=v.nextSibling,W=z.nextSibling,A=W.nextSibling;return c(_,()=>$.type),c(v,()=>$.qty),c(z,()=>t.formatCurrency($.price)),c(W,()=>$.arancel||"-"),c(A,()=>t.formatCurrency((t.parseFloat2($.qty)||0)*(t.parseFloat2($.price)||0)+($.arancel?t.parseFloat2($.arancel):0))),be(I=>{var ee=p(),Z={...p(),"text-align":"center"},X={...p(),"text-align":"right"},se={...p(),"text-align":"right"},U={...p(),"text-align":"right"};return I.e=y(_,ee,I.e),I.t=y(v,Z,I.t),I.a=y(z,X,I.a),I.o=y(W,se,I.o),I.i=y(A,U,I.i),I},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),w})()})),be($=>{var w=t.compact?"0.5rem":"0.75rem",_=h(),v=f();return w!==$.e&&(($.e=w)!=null?N.style.setProperty("margin-bottom",w):N.style.removeProperty("margin-bottom")),$.t=y(R,_,$.t),$.a=y(k,v,$.a),$},{e:void 0,t:void 0,a:void 0}),N}}),null),c(m,T(We,{get when(){return n().length>0},get children(){var N=Xv(),R=N.firstChild,M=R.firstChild,C=M.nextSibling;C.nextSibling;var k=R.nextSibling,D=k.firstChild;return c(R,()=>t.t("invoices.services"),M),c(R,()=>n().length,C),c(k,T(We,{get when(){return!t.compact},get children(){var $=kU(),w=$.firstChild,_=w.firstChild,v=_.nextSibling,z=v.nextSibling,W=z.nextSibling;return c(_,()=>t.t("invoices.type")),c(v,()=>t.t("invoices.qty")),c(z,()=>t.t("invoices.arancel")),c(W,()=>t.t("invoices.total")),be(A=>{var I=t.thStyle,ee={...t.thStyle,"text-align":"center"},Z={...t.thStyle,"text-align":"right"},X={...t.thStyle,"text-align":"right"};return A.e=y(_,I,A.e),A.t=y(v,ee,A.t),A.a=y(z,Z,A.a),A.o=y(W,X,A.o),A},{e:void 0,t:void 0,a:void 0,o:void 0}),$}}),D),c(D,T(_t,{get each(){return n()},children:$=>(()=>{var w=NU(),_=w.firstChild,v=_.nextSibling,z=v.nextSibling,W=z.nextSibling;return c(_,()=>$.type),c(v,()=>t.parseFloat2($.qty).toFixed(2)),c(z,(()=>{var A=Ve(()=>!!($.arancel||$.price));return()=>A()?t.formatCurrency($.arancel||$.price):"-"})()),c(W,()=>t.formatCurrency((t.parseFloat2($.qty)||0)*($.arancel||$.price?t.parseFloat2($.arancel||$.price):0))),be(A=>{var I=p(),ee={...p(),"text-align":"center"},Z={...p(),"text-align":"right"},X={...p(),"text-align":"right"};return A.e=y(_,I,A.e),A.t=y(v,ee,A.t),A.a=y(z,Z,A.a),A.o=y(W,X,A.o),A},{e:void 0,t:void 0,a:void 0,o:void 0}),w})()})),be($=>{var w=h(),_=f();return $.e=y(R,w,$.e),$.t=y(k,_,$.t),$},{e:void 0,t:void 0}),N}}),null),c(m,T(We,{get when(){return Ve(()=>e().length===0&&r().length===0)()&&n().length===0},get children(){var N=EU();return N.style.setProperty("text-align","center"),N.style.setProperty("color","var(--text-muted)"),N.style.setProperty("font-style","italic"),c(N,()=>t.t("invoices.emptyBulk")),be(R=>{var M=t.compact?"1rem":"1.5rem",C=t.compact?"0.8rem":"0.875rem";return M!==R.e&&((R.e=M)!=null?N.style.setProperty("padding",M):N.style.removeProperty("padding")),C!==R.t&&((R.t=C)!=null?N.style.setProperty("font-size",C):N.style.removeProperty("font-size")),R},{e:void 0,t:void 0}),N}}),null),be(N=>{var R=o(),M=s(),C=a(),k=d();return N.e=y(m,R,N.e),N.t=y(x,M,N.t),N.a=y(g,C,N.a),N.o=y(V,k,N.o),N},{e:void 0,t:void 0,a:void 0,o:void 0}),m})()},oS={cashSales:{debit:"1001",credit:"4001"},creditSales:{debit:"1101",credit:"4001"},inventoryPurchase:{debit:"1201",credit:"1001"},costOfGoodsSold:{debit:"5001",credit:"1201"},serviceRevenue:{debit:"1001",credit:"4101"},salesTax:{debit:"1001",credit:"2301"},customsFees:{debit:"1401",credit:"1001"},transportRevenue:{debit:"1001",credit:"4201"}},sS=[{id:"cash-sale-completed",name:"Cash Sale Completed",description:"Creates journal entry when cash sale invoice is completed",triggerEvent:"invoice_completed",isActive:!0,priority:100,conditions:[{field:"paymentMethods.cash",operator:"greaterThan",value:0}],actions:[{type:"create_journal_entry",accountMappings:[{debitAccountId:"1001",creditAccountId:"4001",amountExpression:"paymentMethods.cash",description:"Cash sale - Invoice #{invoice}"}]}]},{id:"credit-sale-completed",name:"Credit Sale Completed",description:"Creates journal entry when credit sale invoice is completed",triggerEvent:"invoice_completed",isActive:!0,priority:90,conditions:[{field:"paymentMethods.zelle",operator:"greaterThan",value:0}],actions:[{type:"create_journal_entry",accountMappings:[{debitAccountId:"1101",creditAccountId:"4001",amountExpression:"paymentMethods.zelle",description:"Credit sale (Zelle) - Invoice #{invoice}"}]}]},{id:"service-revenue-transport",name:"Transport Service Revenue",description:"Records transport service revenue when services are billed",triggerEvent:"service_rendered",isActive:!0,priority:80,conditions:[{field:"services.type",operator:"contains",value:"Transportación"}],actions:[{type:"create_journal_entry",accountMappings:[{debitAccountId:"1001",creditAccountId:"4201",amountExpression:"services.total",description:"Transport service - Invoice #{invoice}"}]}]},{id:"customs-fees",name:"Customs Fees Collection",description:"Records customs fees collected from customers",triggerEvent:"invoice_completed",isActive:!0,priority:70,conditions:[{field:"arancelesTotal",operator:"greaterThan",value:0}],actions:[{type:"create_journal_entry",accountMappings:[{debitAccountId:"1001",creditAccountId:"1401",amountExpression:"arancelesTotal",description:"Customs fees collection - Invoice #{invoice}"}]}]},{id:"sales-tax-collection",name:"Sales Tax Collection",description:"Records sales tax collected on taxable transactions",triggerEvent:"tax_calculated",isActive:!0,priority:60,conditions:[{field:"taxAmount",operator:"greaterThan",value:0}],actions:[{type:"create_journal_entry",accountMappings:[{debitAccountId:"1001",creditAccountId:"2301",amountExpression:"taxAmount",description:"Sales tax collected - Invoice #{invoice}"}]}]}];class DU{config;setConfig;constructor(){const[e,r]=Ae({isEnabled:!0,defaultMappings:oS,customRules:sS,accountMappings:[],auditSettings:{logAllTransactions:!0,requireApproval:!1,approvalThreshold:1e3}});this.config=e,this.setConfig=r}get isEnabled(){return this.config().isEnabled}get defaultMappings(){return this.config().defaultMappings}get automationRules(){return this.config().customRules.filter(e=>e.isActive)}get accountMappings(){return this.config().accountMappings.filter(e=>e.isActive)}updateConfig(e){this.setConfig(r=>({...r,...e}))}toggleAutomation(e){this.updateConfig({isEnabled:e})}addAccountMapping(e){const r={...e,id:`mapping_${Date.now()}`,createdAt:new Date,updatedAt:new Date};return this.setConfig(n=>({...n,accountMappings:[...n.accountMappings,r]})),r.id}updateAccountMapping(e,r){this.setConfig(n=>({...n,accountMappings:n.accountMappings.map(i=>i.id===e?{...i,...r,updatedAt:new Date}:i)}))}removeAccountMapping(e){this.setConfig(r=>({...r,accountMappings:r.accountMappings.filter(n=>n.id!==e)}))}addAutomationRule(e){const r={...e,id:`rule_${Date.now()}`};return this.setConfig(n=>({...n,customRules:[...n.customRules,r]})),r.id}updateAutomationRule(e,r){this.setConfig(n=>({...n,customRules:n.customRules.map(i=>i.id===e?{...i,...r}:i)}))}toggleAutomationRule(e,r){this.updateAutomationRule(e,{isActive:r})}removeAutomationRule(e){this.setConfig(r=>({...r,customRules:r.customRules.filter(n=>n.id!==e)}))}getAccountMapping(e){return this.accountMappings.find(r=>r.transactionType===e)||null}getApplicableRules(e,r){return this.automationRules.filter(n=>n.triggerEvent===e).filter(n=>this.evaluateConditions(n.conditions,r)).sort((n,i)=>i.priority-n.priority)}evaluateConditions(e,r){return e.length===0?!0:e.every(n=>{const i=this.getNestedValue(r,n.field);switch(n.operator){case"equals":return i===n.value;case"contains":return String(i).toLowerCase().includes(String(n.value).toLowerCase());case"greaterThan":return Number(i)>Number(n.value);case"lessThan":return Number(i)<Number(n.value);case"in":return Array.isArray(n.value)?n.value.includes(i):!1;default:return!1}})}getNestedValue(e,r){return r.split(".").reduce((n,i)=>n?.[i],e)}resetToDefaults(){this.setConfig({isEnabled:!0,defaultMappings:oS,customRules:sS,accountMappings:[],auditSettings:{logAllTransactions:!0,requireApproval:!1,approvalThreshold:1e3}})}exportConfiguration(){return this.config()}importConfiguration(e){this.setConfig(e)}}const Zn=new DU;class LU{auditLog=[];async processEvent(e,r){if(!Zn.isEnabled)return;const n=new Date;let i=[],o=[],s=!0,a;try{const l=Zn.getApplicableRules(e,r);for(const d of l)try{const u=await this.executeRule(d,r);i.push(d.name),o.push(...u)}catch(u){console.error(`Error executing rule ${d.name}:`,u),a=u.message,s=!1}}catch(l){console.error("Error processing automation event:",l),a=l.message,s=!1}this.auditLog.push({timestamp:n,event:e,context:r,rulesApplied:i,entriesCreated:o,success:s,error:a}),this.auditLog.length>1e3&&(this.auditLog=this.auditLog.slice(-1e3))}async executeRule(e,r){const n=[];for(const i of e.actions)if(i.type==="create_journal_entry"){const o=await this.createJournalEntry(i,r,e.name);o&&n.push(o)}return n}async createJournalEntry(e,r,n){try{const i=e.accountMappings.map(h=>{const f=this.evaluateAmountExpression(h.amountExpression,r),p=this.expandDescription(h.description,r);return[{accountId:h.debitAccountId,accountName:this.getAccountName(h.debitAccountId),debitAmount:f,creditAmount:0,description:p},{accountId:h.creditAccountId,accountName:this.getAccountName(h.creditAccountId),debitAmount:0,creditAmount:f,description:p}]}).flat(),o=i.reduce((h,f)=>h+f.debitAmount,0),s=i.reduce((h,f)=>h+f.creditAmount,0),a={entryNumber:this.getNextEntryNumber(),date:new Date().toISOString().split("T")[0],description:`Auto: ${n} - ${this.getContextDescription(r)}`,reference:this.getReference(r),status:"draft",createdBy:"automation",createdAt:new Date().toISOString(),totalDebit:o,totalCredit:s,lines:i.map(h=>({...h,id:`line_${Date.now()}_${Math.random()}`}))},l=await jn.addJournalEntry(a),d=Zn.exportConfiguration(),u=i.reduce((h,f)=>h+f.debitAmount,0);return(!d.auditSettings.requireApproval||u<=d.auditSettings.approvalThreshold)&&jn.postJournalEntry(l),l}catch(i){throw console.error("Error creating journal entry:",i),i}}evaluateAmountExpression(e,r){try{if(!isNaN(Number(e)))return Number(e);const n=this.getNestedValue(r,e);return Number(n)||0}catch(n){return console.error(`Error evaluating amount expression: ${e}`,n),0}}expandDescription(e,r){return e.replace(/\{([^}]+)\}/g,(n,i)=>{const o=this.getNestedValue(r,i);return String(o||n)})}getNestedValue(e,r){return r.split(".").reduce((n,i)=>n?.[i],e)}getAccountName(e){return{1001:"Cash - Operating",1101:"Accounts Receivable",1201:"Inventory - Products",1401:"Customs Fees Receivable",2301:"Sales Tax Payable",4001:"Sales Revenue - Products",4101:"Service Revenue",4201:"Transport Service Revenue",5001:"Cost of Goods Sold"}[e]||`Account ${e}`}getReference(e){return e.invoice?.invoice?`INV-${e.invoice.invoice}`:e.payment?.id?`PAY-${e.payment.id}`:e.inventoryMovement?.id?`INV-MOV-${e.inventoryMovement.id}`:`AUTO-${Date.now()}`}getNextEntryNumber(){return jn.getNextEntryNumber()}getContextDescription(e){return e.invoice?`Invoice ${e.invoice.invoice} - ${e.invoice.shipper_consignee?.name}`:e.payment?`Payment ${e.payment.id}`:e.inventoryMovement?`Inventory Movement ${e.inventoryMovement.type}`:"Automated Transaction"}getAuditLog(e=100){return this.auditLog.slice(-e).reverse()}clearAuditLog(){this.auditLog=[]}}const g1=new LU,aS=t=>g1.processEvent("invoice_completed",{invoice:t}),[iu,un]=Vu({invoices:[],selectedInvoice:null,loading:!1,error:null,lastUpdated:null}),[$U,fs]=Ae({fetchAll:!1,fetchById:!1,create:!1,update:!1,delete:!1,generatePDF:!1}),$o={get state(){return iu},get loadingStates(){return $U()},async fetchInvoices(t){try{fs(s=>({...s,fetchAll:!0})),un("loading",!0),un("error",null);let e="SALES";if(t?.search&&(e+=" "+t.search),t?.store&&t.store!=="all")e+=" "+t.store;else if(!Xt.state?.profile?.isAdmin)return e+=" "+So(32),un("invoices",[]),un("lastUpdated",new Date),[];t?.status&&t.status!=="all"&&(e+=" "+t.status);const r=e.toString(),n=await Ki.getInvoice(r);let i=[];if(t?.dateFrom&&t?.dateTo){const s=a=>{let l=new Date(n[a].createDate).getTime(),d=new Date(t?.dateFrom).getTime(),u=new Date(t?.dateTo).getTime();l>=d&&l<=u&&i.push(n[a])};Object.keys(n).map(s)}else i=od(n);const o=Array.isArray(i)?i:i||[];return un("invoices",o),un("lastUpdated",new Date),o}catch(e){const r=e instanceof Error?e.message:"Failed to fetch invoices";throw un("error",r),console.error("Error fetching invoices:",e),e}finally{un("loading",!1),fs(e=>({...e,fetchAll:!1}))}},fecthInventory:async t=>{},async fetchInvoiceById(t){try{fs(n=>({...n,fetchById:!0})),un("error",null);const e=await Ki.getInvoice(t),r=od(e);return un("selectedInvoice",r[0]),r}catch(e){const r=e instanceof Error?e.message:"Failed to fetch invoice";throw un("error",r),console.error("Error fetching invoice:",e),e}finally{fs(e=>({...e,fetchById:!1}))}},async createInvoice(t){try{fs(r=>({...r,create:!0})),un("error",null);const e={type:t.type||"SALES",invoice:t.invoice,description:t.description||"",store:t.store||"",ssg_inventory_key:t.ssg_inventory_key||`INV-${Date.now()}`,ssg_sorder_key:t.ssg_sorder_key||`SO-${Date.now()}`,createDate:t.createDate||Date.now(),shipper_consignee:t.shipper_consignee,packagesOrder:t.packagesOrder||!1,businessId:t.businessId||"YB100423253156428",userId:t.userId||"current-user",reservas:t.reservas||[],products:t.products||[],isCompleted:t.isCompleted||!0};if(e.products&&e.products.length>0&&(e.productSubtotal=e.products.reduce((r,n)=>r+n.qty*n.salePrice,0)),e.reservas&&e.reservas.length>0&&(e.reservaSubtotal=e.reservas.reduce((r,n)=>r+n.total,0)),e.total=(e.productSubtotal||0)+(e.reservaSubtotal||0),un("invoices",r=>[e,...r]),un("lastUpdated",new Date),e.isCompleted)try{await aS(e),console.log("Automated journal entries processed for invoice:",e.invoice)}catch(r){console.error("Error processing automated journal entries:",r)}return e}catch(e){const r=e instanceof Error?e.message:"Failed to create invoice";throw un("error",r),console.error("Error creating invoice:",e),e}finally{fs(e=>({...e,create:!1}))}},async generateInvoicePDF(t,e="compact",r="es"){try{fs(a=>({...a,generatePDF:!0})),un("error",null);const n=iu.invoices.find(a=>a.invoice===t);if(!n)throw new Error("Invoice not found");let i;switch(e){case"compact":const{generateCompactModernInvoicePDF:a}=await Qo(async()=>{const{generateCompactModernInvoicePDF:u}=await import("./compactModernInvoicePdfGenerator-CId3xFPn.js");return{generateCompactModernInvoicePDF:u}},[]);i=a;break;case"modern":const{generateModernMovementInvoicePDF:l}=await Qo(async()=>{const{generateModernMovementInvoicePDF:u}=await import("./modernMovementInvoicePdfGenerator-B6KrqHQ4.js");return{generateModernMovementInvoicePDF:u}},[]);i=l;break;case"classic":default:const{generateWorkingInvoicePDF:d}=await Qo(async()=>{const{generateWorkingInvoicePDF:u}=await import("./workingPdfGenerator-DUN5cOp1.js");return{generateWorkingInvoicePDF:u}},[]);i=d;break}const o={...n,movementType:"sales",items:n.products||[],invoiceId:n.invoice,id:n.invoice};return await i(o,null,r)}catch(n){const i=n instanceof Error?n.message:"Failed to generate PDF";throw un("error",i),console.error("Error generating invoice PDF:",n),n}finally{fs(n=>({...n,generatePDF:!1}))}},async updateInvoice(t,e){try{fs(i=>({...i,update:!0})),un("error",null);const r=iu.invoices.find(i=>i.ssg_sorder_key===t),n={};if(un("invoices",i=>i.map(o=>o.invoice===t?n:o)),iu.selectedInvoice?.invoice===t&&un("selectedInvoice",n),un("lastUpdated",new Date),e.isCompleted&&!r?.isCompleted)try{await aS(n),console.log("Automated journal entries processed for updated invoice:",n.invoice)}catch(i){console.error("Error processing automated journal entries:",i)}return n}catch(r){const n=r instanceof Error?r.message:"Failed to update invoice";throw un("error",n),console.error("Error updating invoice:",r),r}finally{fs(r=>({...r,update:!1}))}},async deleteInvoice(t){try{fs(i=>({...i,delete:!0})),un("error",null),un("invoices",i=>i.filter(o=>o.invoice!==t)),iu.selectedInvoice?.invoice===t&&un("selectedInvoice",null),un("lastUpdated",new Date);const n=await Tn({query:"deleteYabaSalesOrders",params:{businessId:"YB100423253156428",id:t}});return!0}catch(e){const r=e instanceof Error?e.message:"Failed to delete invoice";throw un("error",r),console.error("Error deleting invoice:",e),e}finally{fs(e=>({...e,delete:!1}))}},async fetchInvoiceStats(t){try{un("error",null);const e=new URLSearchParams;t?.store&&t.store!=="all"&&e.append("store",t.store),t?.dateFrom&&e.append("dateFrom",t.dateFrom),t?.dateTo&&e.append("dateTo",t.dateTo);const r=e.toString();return[]}catch(e){const r=e instanceof Error?e.message:"Failed to fetch invoice statistics";throw un("error",r),console.error("Error fetching invoice stats:",e),e}},async fetchStores(){try{return un("error",null),[]}catch(t){const e=t instanceof Error?t.message:"Failed to fetch stores";throw un("error",e),console.error("Error fetching stores:",t),t}},setSelectedInvoice(t){un("selectedInvoice",t)},clearError(){un("error",null)},getFilteredInvoices(t){let e=iu.invoices;if(t.store&&t.store!=="all"&&(e=e.filter(r=>r.store===t.store)),t.dateFrom){const r=new Date(t.dateFrom).getTime();e=e.filter(n=>n.createDate>=r)}if(t.dateTo){const r=new Date(t.dateTo).setHours(23,59,59,999);e=e.filter(n=>n.createDate<=r)}if(t.status&&t.status!=="all"){const r=t.status==="completed";e=e.filter(n=>n.isCompleted===r)}return e},calculateSummary(t){let e=t.length,r=t.filter(f=>f.isCompleted).length,n=0,i=0,o=0,s=0,a=0,l=0,d=new Set,u=new Set;t?.forEach(f=>{d.add(f?.shipper_consignee?.cid),u.add(f.store),f?.products?.length>0&&f?.products?.forEach(p=>{const m=Math.abs(p?.qty);n+=m,o+=m*(parseFloat(p?.salePrice)||1)}),f?.reservas?.length>0&&f?.reservas?.forEach(p=>{let m=parseInt(p?.qty);isNaN(m)&&(m=0),{TRANSPORTACION:1,"OTROS SERVICIO":1,OTROS:1,"SERVICIO DE RAPEADO":1,CAJAS:1}[p.type]||p?.onlyTariff?(m=parseFloat(p.arancel)||parseFloat(p.qty)*parseFloat(p.price),l+=m):(p?.arancel&&(a+=parseFloat(p?.arancel)),i+=m,s+=m*parseFloat(p?.price))})});const h=o+s+l;return{totalInvoices:e,completedInvoices:r,pendingInvoices:e-r,totalProducts:n,totalReservas:i,totalProductAmount:o,totalReservaAmount:s,totalAranceles:a,grandTotal:h,totalOther:l,uniqueCustomers:d.size,uniqueStores:u.size,avgInvoiceValue:e>0?h/e:0}},async refreshData(t){return this.fetchInvoices(t)}};var Zv=le("<br>"),ry=le("<div>"),FU=le("<div><h3>"),lS=le("<div><h3></h3><table><thead><tr><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody>"),MU=le("<div><h3></h3><table><thead><tr><th></th><th></th><th></th><th></th></tr></thead><tbody>"),Ah=le("<div><span>:</span><span>"),OU=le("<div><span> ($<!>%):</span><span>"),BU=le("<button>remove"),jU=le("<div class=invoice-display><div><div><div>:<span></span></div><div>: <span></span></div></div><div><div></div><h2></h2><div></div><div></div></div></div><div><h3></h3><div><div><div></div><div></div></div></div><div></div><h3></h3><div><div><div></div><div> <!> <!> </div><div></div><div></div></div><div><div></div><div></div><div></div><div></div><div> #<br> <!> <!> <br>, <br>, </div></div></div></div><div><div><div></div><div><span>:</span><span></span></div></div></div><div></div><div><button>🖨️ </button><button>🧪 Test PDF</button><button>📥 </button></div><style>"),cS=le("<tr><td></td><td></td><td></td><td></td><td>"),VU=le("<tr><td></td><td></td><td></td><td>");const ua=t=>parseFloat(t?.toString()||"0")||0,zU=t=>{const{t:e}=Gu(),[r,n]=Ae(""),[i,o]=Ae(!1),s=W=>new Date(W).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),a=W=>{const A=typeof W=="string"?parseFloat(W):W;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(A)},l=zt(()=>{let W=0,A=0,I=0,ee=0,Z=0;t.invoice?.products?.forEach(E=>{const O=Math.abs(E?.qty),L=parseFloat(E?.salePrice?.toString())||1;W+=O*L}),t.invoice?.reservas?.forEach(E=>{let O=parseFloat(E?.qty?.toString());isNaN(O)&&(O=0),{TRANSPORTACION:1,"OTROS SERVICIO":1,OTROS:1,"SERVICIO DE RAPEADO":1,CAJAS:1}[E.type]||E?.onlyTariff?(O=parseFloat(E.arancel?.toString())||parseFloat(E.qty?.toString())*parseFloat(E.price?.toString()),ee+=O):(E?.arancel&&(Z+=parseFloat(E?.arancel?.toString())),A+=O*parseFloat(E?.price?.toString()))}),t.invoice?.services?.forEach(E=>{I+=ua(E.qty)*ua(E.price||E.arancel)});var X=W+A+I+Z+ee,se=0,U=X+se;return t.invoice?.paymentMethods&&(se=t.invoice?.taxAmount,U=t.invoice?.total,X=t.invoice?.subtotalBeforeTax),{productSubtotal:W,reservaSubtotal:A,serviceSubtotal:I,tariffSubtotal:Z,subtotal:X,tax:se,total:U}}),d={"max-width":"800px",margin:"0 auto",padding:"2rem",background:"white","box-shadow":"0 0 20px rgba(0,0,0,0.1)","border-radius":"var(--border-radius)"},u={display:"flex","justify-content":"space-between","align-items":"flex-start","margin-bottom":"2rem","padding-bottom":"2rem","border-bottom":"2px solid #e0e0e0"},h={"text-align":"right",flex:"1"},f={display:"inline-block",padding:"0.25rem 0.75rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"600","text-transform":"uppercase",background:t.invoice.isCompleted?"#d4edda":"#fff3cd",color:t.invoice.isCompleted?"#155724":"#856404","margin-bottom":"0.5rem"},p={"margin-bottom":"2rem"},m={"font-size":"1.1rem","font-weight":"600","margin-bottom":"1rem",color:"#333"},x={display:"grid","grid-template-columns":"1fr 1fr",gap:"1.5rem"},P={background:"#f8f9fa",padding:"1rem","border-radius":"var(--border-radius-sm)",border:"1px solid #e9ecef"},g={"font-size":"0.875rem",color:"#666","margin-bottom":"0.25rem"},F={"font-size":"1rem",color:"#333","font-weight":"500"},V={width:"100%","border-collapse":"collapse","margin-top":"1rem"},N={"text-align":"left",padding:"0.75rem","border-bottom":"2px solid #dee2e6","font-weight":"600",color:"#495057","font-size":"0.875rem","text-transform":"uppercase"},R={padding:"0.75rem","border-bottom":"1px solid #dee2e6",color:"#212529"},M={"font-weight":"600","font-size":"1.1rem"},C={display:"flex",gap:"1rem","justify-content":"center","margin-top":"2rem","padding-top":"2rem","border-top":"2px solid #e0e0e0"},k={padding:"0.75rem 1.5rem","border-radius":"var(--border-radius-sm)",border:"none","font-weight":"500",cursor:"pointer",transition:"all 0.2s",display:"flex","align-items":"center",gap:"0.5rem"},D={...k,background:"var(--primary-color)",color:"white"},$={...k,background:"white",color:"var(--primary-color)",border:"2px solid var(--primary-color)"},w=zt(()=>At.getLocationById(t.invoice.store)),_=async()=>{console.log("Starting PDF export...");try{if(!t.invoice){console.error("No invoice data available"),alert("No invoice data available");return}let W=vm(t.invoice);console.log("Using minimal ink PDF generator...");try{await bU(W,e),console.log("Minimal ink PDF generation completed successfully")}catch(A){console.error("PDF generation failed:",A),console.log("Trying printable PDF fallback..."),Yv(W,e),console.log("Printable PDF fallback completed")}}catch(W){console.error("Error in handleExportPDF:",W),console.error("Error stack:",W.stack),alert(`Error generating PDF: ${W.message}`)}},v=async()=>{console.log("Starting PDF export...");try{if(!t.invoice){console.error("No invoice data available"),alert("No invoice data available");return}const W={...t.invoice,storeName:w()?.name||t.invoice.store,storeType:w()?.type,productSubtotal:l().productSubtotal,reservaSubtotal:l().reservaSubtotal,total:l().total};let A=vm(t.invoice);console.log("Using minimal ink PDF generator...");try{Yv(A,e),console.log("Minimal ink PDF generation completed successfully")}catch(I){console.error("PDF generation failed:",I),console.log("Trying printable PDF fallback..."),Yv(A,e),console.log("Printable PDF fallback completed")}}catch(W){console.error("Error in handleExportPDF:",W),console.error("Error stack:",W.stack),alert(`Error generating PDF: ${W.message}`)}},z=W=>{$o.deleteInvoice(t.invoice.ssg_sorder_key),t.goBack()};return(()=>{var W=jU(),A=W.firstChild,I=A.firstChild,ee=I.firstChild,Z=ee.firstChild,X=Z.nextSibling,se=ee.nextSibling,U=se.firstChild,E=U.nextSibling,O=I.nextSibling,L=O.firstChild,G=L.nextSibling,K=G.nextSibling,q=K.nextSibling,B=A.nextSibling,H=B.firstChild,Y=H.nextSibling,te=Y.firstChild,oe=te.firstChild,pe=oe.nextSibling,ne=Y.nextSibling,Q=ne.nextSibling,ce=Q.nextSibling,ue=ce.firstChild,de=ue.firstChild,ge=de.nextSibling,ye=ge.firstChild,fe=ye.nextSibling,Se=fe.nextSibling,qe=Se.nextSibling;qe.nextSibling;var Oe=ge.nextSibling,Ie=Oe.nextSibling,Be=ue.nextSibling,ke=Be.firstChild,Ge=ke.nextSibling,et=Ge.nextSibling,ve=et.nextSibling,De=ve.nextSibling,He=De.firstChild,Je=He.nextSibling,Le=Je.nextSibling,Te=Le.nextSibling,he=Te.nextSibling,Ne=he.nextSibling,rt=Ne.nextSibling,re=rt.nextSibling,Ue=re.nextSibling,we=Ue.nextSibling,xe=we.nextSibling,je=B.nextSibling,$e=je.firstChild,ft=$e.firstChild,ct=ft.nextSibling,yt=ct.firstChild,$t=yt.firstChild,bt=yt.nextSibling,Gt=je.nextSibling,Wt=Gt.nextSibling,Dt=Wt.firstChild;Dt.firstChild;var Kt=Dt.nextSibling,gt=Kt.nextSibling;gt.firstChild;var St=Wt.nextSibling;return y(W,d),y(A,u),ee.style.setProperty("color","#666"),ee.style.setProperty("margin-top","0.25rem"),c(ee,()=>e(`inventory.${w()?.type}Type`),Z),X.style.setProperty("font-size","1.1rem"),X.style.setProperty("font-weight","600"),X.style.setProperty("color","#444"),c(X,()=>w()?.name),se.style.setProperty("font-size",".91rem"),se.style.setProperty("font-weight","400"),se.style.setProperty("color","#666"),c(se,()=>e("invoices.id"),U),E.style.setProperty("font-size","1.1rem"),E.style.setProperty("font-weight","600"),E.style.setProperty("color","#444"),c(E,()=>t.invoice.ssg_sorder_key),y(O,h),c(L,(()=>{var Qe=Ve(()=>!!t.invoice.isCompleted);return()=>Qe()?e("invoices.completed").toUpperCase():e("invoices.pending").toUpperCase()})()),G.style.setProperty("margin","0 0 0.5rem 0"),G.style.setProperty("font-size","1.5rem"),c(G,()=>e("invoices.invoice").toUpperCase()),K.style.setProperty("font-size","1.1rem"),K.style.setProperty("font-weight","600"),K.style.setProperty("color","#333"),c(K,()=>t.invoice.invoice),q.style.setProperty("color","#666"),q.style.setProperty("margin-top","0.5rem"),c(q,()=>s(t.invoice.createDate)),c(H,()=>e("invoices.senderInformation")),c(oe,()=>e("invoices.customerName")),c(pe,()=>t.invoice.shipper_consignee.name),c(te,T(We,{get when(){return t.invoice.shipper_consignee.phoneNumberS},get children(){return[Zv(),Ve(()=>e("invoices.phoneNumber")),": ",Ve(()=>t.invoice.shipper_consignee.phoneNumberS)]}}),null),c(te,T(We,{get when(){return t.invoice.shipper_consignee.dob},get children(){return[Zv(),Ve(()=>e("invoices.dob")),": ",Ve(()=>t.invoice.shipper_consignee.dob)]}}),null),c(te,T(We,{get when(){return t.invoice.shipper_consignee.phoneNumberS},get children(){return[Zv(),Ve(()=>e("invoices.id")),": ",Ve(()=>t.invoice.shipper_consignee.idS)]}}),null),ne.style.setProperty("margin","20px"),c(Q,()=>e("invoices.receiptInformation")),c(de,()=>e("invoices.customerName")),c(ge,()=>t.invoice.shipper_consignee.firstName,ye),c(ge,()=>t.invoice.shipper_consignee.middleName,fe),c(ge,()=>t.invoice.shipper_consignee.lastName,qe),c(ge,()=>t.invoice.shipper_consignee.lastName2,null),c(Oe,()=>e("invoices.id")),c(Ie,()=>t.invoice.shipper_consignee.cid),c(ue,T(We,{get when(){return t.invoice.shipper_consignee.passport},get children(){return[(()=>{var Qe=ry();return c(Qe,()=>e("invoices.passport")),be(vt=>y(Qe,{...g,"margin-top":"0.75rem"},vt)),Qe})(),(()=>{var Qe=ry();return c(Qe,()=>t.invoice.shipper_consignee.passport),be(vt=>y(Qe,F,vt)),Qe})()]}}),null),c(ke,()=>e("invoices.contactInformation")),c(Ge,()=>e("invoices.phoneNumber")),c(et,()=>t.invoice.shipper_consignee.phoneNumber),c(Be,T(We,{get when(){return t.invoice.shipper_consignee.altPhoneNumber},get children(){return[(()=>{var Qe=ry();return c(Qe,()=>e("invoices.altPhone")),be(vt=>y(Qe,{...g,"margin-top":"0.75rem"},vt)),Qe})(),(()=>{var Qe=ry();return c(Qe,()=>t.invoice.shipper_consignee.altPhoneNumber),be(vt=>y(Qe,F,vt)),Qe})()]}}),ve),c(ve,()=>e("invoices.address")),c(De,()=>t.invoice.shipper_consignee.ybstreet,He),c(De,()=>t.invoice.shipper_consignee.ybstreetNo,Je),c(De,()=>e("invoices.between"),Le),c(De,()=>t.invoice.shipper_consignee.ybbetwen1,Te),c(De,()=>e("invoices.and"),Ne),c(De,()=>t.invoice.shipper_consignee.ybbetwen2,re),c(De,()=>t.invoice.shipper_consignee.ybreparto,Ue),c(De,()=>t.invoice.shipper_consignee.ybcity,we),c(De,()=>t.invoice.shipper_consignee.ybestate,xe),c(De,()=>t.invoice.shipper_consignee.nacionality,null),c(W,T(We,{get when(){return t.invoice?.bulks?.length>0},get children(){var Qe=FU(),vt=Qe.firstChild;return c(vt,()=>e("invoices.bulkInformation")),c(Qe,T(_t,{get each(){return t.invoice.bulks},children:Ft=>T(RU,{bulk:Ft,get products(){return t.invoice.products||[]},get reservas(){return t.invoice.reservas||[]},get services(){return t.invoice.services||[]},showDetails:!0,compact:!1,formatCurrency:a,parseFloat2:ua,t:e,tableStyle:V,tdStyle:R,thStyle:N})}),null),be(Ft=>{var Pt=p,kt=m;return Ft.e=y(Qe,Pt,Ft.e),Ft.t=y(vt,kt,Ft.t),Ft},{e:void 0,t:void 0}),Qe}}),je),c(W,T(We,{get when(){return!t.invoice?.bulks},get children(){return[T(We,{get when(){return t.invoice?.products?.length>0},get children(){var Qe=lS(),vt=Qe.firstChild,Ft=vt.nextSibling,Pt=Ft.firstChild,kt=Pt.firstChild,Yt=kt.firstChild,nr=Yt.nextSibling,cr=nr.nextSibling,on=cr.nextSibling,Dr=on.nextSibling,lr=Pt.nextSibling;return c(vt,()=>e("invoices.products")),c(Yt,()=>e("invoices.code")),c(nr,()=>e("invoices.description")),c(cr,()=>e("invoices.qty")),c(on,()=>e("invoices.unitPrice")),c(Dr,()=>e("invoices.total")),c(lr,T(_t,{get each(){return t.invoice?.products},children:Zt=>(()=>{var yr=cS(),Lr=yr.firstChild,Wr=Lr.nextSibling,Ar=Wr.nextSibling,fr=Ar.nextSibling,Yr=fr.nextSibling;return c(Lr,()=>Zt.product.code),c(Wr,()=>Zt.product.label),c(Ar,()=>Math.abs(Zt.qty)),c(fr,()=>a(Zt.salePrice)),c(Yr,()=>a(Math.abs(Zt.qty)*ua(Zt.salePrice))),be(br=>{var zn=R,Bi=R,Ni={...R,"text-align":"center"},Ao={...R,"text-align":"right"},Ri={...R,"text-align":"right"};return br.e=y(Lr,zn,br.e),br.t=y(Wr,Bi,br.t),br.a=y(Ar,Ni,br.a),br.o=y(fr,Ao,br.o),br.i=y(Yr,Ri,br.i),br},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),yr})()})),be(Zt=>{var yr=p,Lr=m,Wr=V,Ar=N,fr=N,Yr={...N,"text-align":"center"},br={...N,"text-align":"right"},zn={...N,"text-align":"right"};return Zt.e=y(Qe,yr,Zt.e),Zt.t=y(vt,Lr,Zt.t),Zt.a=y(Ft,Wr,Zt.a),Zt.o=y(Yt,Ar,Zt.o),Zt.i=y(nr,fr,Zt.i),Zt.n=y(cr,Yr,Zt.n),Zt.s=y(on,br,Zt.s),Zt.h=y(Dr,zn,Zt.h),Zt},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),Qe}}),T(We,{get when(){return t.invoice?.reservas?.length>0},get children(){var Qe=lS(),vt=Qe.firstChild,Ft=vt.nextSibling,Pt=Ft.firstChild,kt=Pt.firstChild,Yt=kt.firstChild,nr=Yt.nextSibling,cr=nr.nextSibling,on=cr.nextSibling,Dr=on.nextSibling,lr=Pt.nextSibling;return c(vt,()=>e("invoices.reservations")),c(Yt,()=>e("invoices.type")),c(nr,()=>e("invoices.qty")),c(cr,()=>e("invoices.unitPrice")),c(on,()=>e("invoices.arancel")),c(Dr,()=>e("invoices.total")),c(lr,T(_t,{get each(){return t.invoice?.reservas},children:Zt=>(()=>{var yr=cS(),Lr=yr.firstChild,Wr=Lr.nextSibling,Ar=Wr.nextSibling,fr=Ar.nextSibling,Yr=fr.nextSibling;return c(Lr,()=>Zt.type),c(Wr,()=>Zt.qty),c(Ar,()=>a(Zt.price)),c(fr,()=>Zt.arancel||"-"),c(Yr,()=>a((ua(Zt.qty)||0)*(ua(Zt.price)||0)+(Zt.arancel?ua(Zt.arancel):0))),be(br=>{var zn=R,Bi={...R,"text-align":"center"},Ni={...R,"text-align":"right"},Ao={...R,"text-align":"right"},Ri={...R,"text-align":"right"};return br.e=y(Lr,zn,br.e),br.t=y(Wr,Bi,br.t),br.a=y(Ar,Ni,br.a),br.o=y(fr,Ao,br.o),br.i=y(Yr,Ri,br.i),br},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),yr})()})),be(Zt=>{var yr=p,Lr=m,Wr=V,Ar=N,fr={...N,"text-align":"center"},Yr={...N,"text-align":"right"},br={...N,"text-align":"right"},zn={...N,"text-align":"right"};return Zt.e=y(Qe,yr,Zt.e),Zt.t=y(vt,Lr,Zt.t),Zt.a=y(Ft,Wr,Zt.a),Zt.o=y(Yt,Ar,Zt.o),Zt.i=y(nr,fr,Zt.i),Zt.n=y(cr,Yr,Zt.n),Zt.s=y(on,br,Zt.s),Zt.h=y(Dr,zn,Zt.h),Zt},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),Qe}}),T(We,{get when(){return t.invoice?.services?.length>0},get children(){var Qe=MU(),vt=Qe.firstChild,Ft=vt.nextSibling,Pt=Ft.firstChild,kt=Pt.firstChild,Yt=kt.firstChild,nr=Yt.nextSibling,cr=nr.nextSibling,on=cr.nextSibling,Dr=Pt.nextSibling;return c(vt,()=>e("invoices.services")),c(Yt,()=>e("invoices.type")),c(nr,()=>e("invoices.qty")),c(cr,()=>e("invoices.arancel")),c(on,()=>e("invoices.total")),c(Dr,T(_t,{get each(){return t.invoice?.services},children:lr=>(()=>{var Zt=VU(),yr=Zt.firstChild,Lr=yr.nextSibling,Wr=Lr.nextSibling,Ar=Wr.nextSibling;return c(yr,()=>lr.type),c(Lr,()=>ua(lr.qty).toFixed(2)),c(Wr,(()=>{var fr=Ve(()=>!!(lr.arancel||lr?.price));return()=>fr()?a(lr.arancel||lr?.price):"-"})()),c(Ar,()=>a((ua(lr.qty)||0)*(lr.arancel||lr?.price?ua(lr.arancel||lr?.price):0))),be(fr=>{var Yr=R,br={...R,"text-align":"center"},zn={...R,"text-align":"right"},Bi={...R,"text-align":"right"};return fr.e=y(yr,Yr,fr.e),fr.t=y(Lr,br,fr.t),fr.a=y(Wr,zn,fr.a),fr.o=y(Ar,Bi,fr.o),fr},{e:void 0,t:void 0,a:void 0,o:void 0}),Zt})()})),be(lr=>{var Zt=p,yr=m,Lr=V,Wr=N,Ar={...N,"text-align":"center"},fr={...N,"text-align":"right"},Yr={...N,"text-align":"right"};return lr.e=y(Qe,Zt,lr.e),lr.t=y(vt,yr,lr.t),lr.a=y(Ft,Lr,lr.a),lr.o=y(Yt,Wr,lr.o),lr.i=y(nr,Ar,lr.i),lr.n=y(cr,fr,lr.n),lr.s=y(on,Yr,lr.s),lr},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),Qe}})]}}),je),$e.style.setProperty("display","inline-block"),$e.style.setProperty("min-width","350px"),c($e,T(We,{get when(){return t.invoice?.products?.length>0},get children(){var Qe=Ah(),vt=Qe.firstChild,Ft=vt.firstChild,Pt=vt.nextSibling;return Qe.style.setProperty("display","flex"),Qe.style.setProperty("justify-content","space-between"),Qe.style.setProperty("margin-bottom","0.5rem"),c(vt,()=>e("invoices.productsSubtotal"),Ft),c(Pt,()=>a(t?.parseData?.productSubtotal)),Qe}}),ft),c($e,T(We,{get when(){return t.invoice?.reservas?.length>0},get children(){var Qe=Ah(),vt=Qe.firstChild,Ft=vt.firstChild,Pt=vt.nextSibling;return Qe.style.setProperty("display","flex"),Qe.style.setProperty("justify-content","space-between"),Qe.style.setProperty("margin-bottom","0.5rem"),c(vt,()=>e("invoices.reservationsSubtotal"),Ft),c(Pt,()=>a(t?.parseData?.reservaSubtotal)),Qe}}),ft),c($e,T(We,{get when(){return t.invoice?.services?.length>0},get children(){var Qe=Ah(),vt=Qe.firstChild,Ft=vt.firstChild,Pt=vt.nextSibling;return Qe.style.setProperty("display","flex"),Qe.style.setProperty("justify-content","space-between"),Qe.style.setProperty("margin-bottom","0.5rem"),c(vt,()=>e("invoices.servicesSubtotal"),Ft),c(Pt,()=>a(t?.parseData?.serviceSubtotal)),Qe}}),ft),c($e,T(We,{get when(){return t.parseData?.transportTotal},get children(){var Qe=Ah(),vt=Qe.firstChild,Ft=vt.firstChild,Pt=vt.nextSibling;return Qe.style.setProperty("display","flex"),Qe.style.setProperty("justify-content","space-between"),Qe.style.setProperty("margin-bottom","0.5rem"),c(vt,()=>e("invoices.transportTotal"),Ft),c(Pt,()=>a(t.parseData.transportTotal)),Qe}}),ft),c($e,T(We,{get when(){return t?.parseData?.subtotalBeforeTax},get children(){var Qe=Ah(),vt=Qe.firstChild,Ft=vt.firstChild,Pt=vt.nextSibling;return Qe.style.setProperty("display","flex"),Qe.style.setProperty("justify-content","space-between"),Qe.style.setProperty("margin-bottom","0.5rem"),c(vt,()=>e("common.subtotal"),Ft),c(Pt,()=>a(t?.parseData?.subtotalBeforeTax)),Qe}}),ct),c($e,T(We,{get when(){return t?.parseData?.taxAmount},get children(){var Qe=OU(),vt=Qe.firstChild,Ft=vt.firstChild,Pt=Ft.nextSibling;Pt.nextSibling;var kt=vt.nextSibling;return Qe.style.setProperty("display","flex"),Qe.style.setProperty("justify-content","space-between"),Qe.style.setProperty("margin-bottom","0.5rem"),c(vt,()=>e("invoiceReport.tax"),Ft),c(vt,()=>t?.parseData.paymentMethods?.taxPercent||7,Pt),c(kt,()=>a(t?.parseData?.taxAmount)),Qe}}),ct),c(yt,()=>e("invoices.total"),$t),bt.style.setProperty("color","var(--primary-color)"),c(bt,()=>a(l().total)),Dt.addEventListener("mouseleave",Qe=>Qe.currentTarget.style.opacity="1"),Dt.addEventListener("mouseenter",Qe=>Qe.currentTarget.style.opacity="0.9"),Dt.$$click=v,c(Dt,()=>e("invoices.printInvoice"),null),Qn(Kt,"click",yU,!0),gt.addEventListener("mouseleave",Qe=>{Qe.currentTarget.style.background="white",Qe.currentTarget.style.color="var(--primary-color)"}),gt.addEventListener("mouseenter",Qe=>{Qe.currentTarget.style.background="var(--primary-color)",Qe.currentTarget.style.color="white"}),gt.$$click=_,c(gt,()=>e("invoices.exportPdf"),null),c(Wt,T(We,{get when(){return Xt.state?.profile?.isAdmin},get children(){var Qe=BU();return Qe.$$click=z,Qe.addEventListener("mouseleave",vt=>vt.currentTarget.style.opacity="1"),Qe.addEventListener("mouseenter",vt=>vt.currentTarget.style.opacity="0.9"),be(vt=>y(Qe,D,vt)),Qe}}),null),c(St,`
        @media print {
          .invoice-display {
            box-shadow: none !important;
            padding: 0 !important;
          }
          
          ${C} {
            display: none !important;
          }
        }
      `),be(Qe=>{var vt=f,Ft=p,Pt=m,kt=x,Yt=P,nr=g,cr=F,on=m,Dr=x,lr=P,Zt=g,yr=F,Lr={...g,"margin-top":"0.75rem"},Wr=F,Ar=P,fr=g,Yr={...g,"margin-top":"0.75rem"},br=F,zn={...g,"margin-top":"0.75rem"},Bi=F,Ni={...p,"text-align":"right"},Ao={...M,display:"flex","justify-content":"space-between","padding-top":"0.75rem","border-top":"2px solid #dee2e6"},Ri={...M,display:"flex","justify-content":"space-between","padding-top":"0.75rem","border-top":"2px solid #dee2e6"},os={...p,"text-align":"center",color:"#666","font-size":"0.875rem"},xn=C,ko=D,ks={...D,background:"#28a745"},Es=$;return Qe.e=y(L,vt,Qe.e),Qe.t=y(B,Ft,Qe.t),Qe.a=y(H,Pt,Qe.a),Qe.o=y(Y,kt,Qe.o),Qe.i=y(te,Yt,Qe.i),Qe.n=y(oe,nr,Qe.n),Qe.s=y(pe,cr,Qe.s),Qe.h=y(Q,on,Qe.h),Qe.r=y(ce,Dr,Qe.r),Qe.d=y(ue,lr,Qe.d),Qe.l=y(de,Zt,Qe.l),Qe.u=y(ge,yr,Qe.u),Qe.c=y(Oe,Lr,Qe.c),Qe.w=y(Ie,Wr,Qe.w),Qe.m=y(Be,Ar,Qe.m),Qe.f=y(ke,fr,Qe.f),Qe.y=y(Ge,Yr,Qe.y),Qe.g=y(et,br,Qe.g),Qe.p=y(ve,zn,Qe.p),Qe.b=y(De,Bi,Qe.b),Qe.T=y(je,Ni,Qe.T),Qe.A=y(ft,Ao,Qe.A),Qe.O=y(ct,Ri,Qe.O),Qe.I=y(Gt,os,Qe.I),Qe.S=y(Wt,xn,Qe.S),Qe.W=y(Dt,ko,Qe.W),Qe.C=y(Kt,ks,Qe.C),Qe.B=y(gt,Es,Qe.B),Qe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0,S:void 0,W:void 0,C:void 0,B:void 0}),W})()};tr(["click"]);const zh={invoice:"",description:"",store:"",guide:"",shipper_consignee:{firstName:"",middleName:"",lastName:"",lastName2:"",phoneNumber:"",cid:"",dob:"",passport:"",address:"",altPhoneNumber:"",passportS:"",name:"",addressS:"",phoneNumberS:"",idS:""},products:[],reservas:[],services:[],bulks:[],packagesOrder:!1,shippingMethod:"",paymentMethods:{taxOnTotal:!1,taxPercent:0,exemptTaxOnCash:!1,cash:0,zelle:0,creditCard:0}},l2="invoice_styled_form_draft",UU=()=>{try{const t=localStorage.getItem(l2);if(t){const e=JSON.parse(t);return{...zh,...e,shipper_consignee:{...zh.shipper_consignee,...e.shipper_consignee||{}},paymentMethods:{...zh.paymentMethods,...e.paymentMethods||{}},products:e.products||[],reservas:e.reservas||[],services:e.services||[],bulks:e.bulks||[]}}}catch(t){console.warn("Failed to load styled invoice form from storage:",t)}return console.log("No saved data found, using default form data"),{...zh}},c2=t=>{try{localStorage.setItem(l2,JSON.stringify(t))}catch(e){console.warn("Failed to save styled invoice form to storage:",e)}},dS=()=>{try{localStorage.removeItem(l2)}catch(t){console.warn("Failed to clear styled invoice form from storage:",t)}},[Yl,no]=Ae(UU()),[R3,Fi]=Ae(!1),[qU,Ny]=Ae(null);let Jv=null;const Po=()=>{Jv&&clearTimeout(Jv),Jv=setTimeout(()=>{const t=Yl();c2(t),Ny(new Date),console.log("Styled invoice form auto-saved at",new Date().toLocaleTimeString())},1e3)},Kr={formData:Yl,get isDirty(){return R3()},get lastSaved(){return qU()},updateForm:t=>{no(e=>{const r={...e,...t};return Fi(!0),Po(),r})},updateShipperConsignee:t=>{no(e=>{const r={...e,shipper_consignee:{...e.shipper_consignee,...t}};return Fi(!0),Po(),r})},updatePaymentMethods:t=>{no(e=>{const r={...e,paymentMethods:{...e.paymentMethods,...t}};return Fi(!0),Po(),r})},addProduct:t=>{no(e=>{const r={...e,products:[...e.products,t]};return Fi(!0),Po(),r})},updateProduct:(t,e)=>{no(r=>{const n=[...r.products];n[t]={...n[t],...e};const i={...r,products:n};return Fi(!0),Po(),i})},removeProduct:t=>{no(e=>{const r=e.products.filter((i,o)=>o!==t),n={...e,products:r};return Fi(!0),Po(),n})},addReserva:t=>{no(e=>{const r={...e,reservas:[...e.reservas,t]};return Fi(!0),Po(),r})},updateReserva:(t,e)=>{no(r=>{const n=[...r.reservas];n[t]={...n[t],...e};const i={...r,reservas:n};return Fi(!0),Po(),i})},removeReserva:t=>{no(e=>{const r=e.reservas.filter((i,o)=>o!==t),n={...e,reservas:r};return Fi(!0),Po(),n})},addService:t=>{no(e=>{const r={...e,services:[...e.services,t]};return Fi(!0),Po(),r})},updateService:(t,e)=>{no(r=>{const n=[...r.services];n[t]={...n[t],...e};const i={...r,services:n};return Fi(!0),Po(),i})},removeService:t=>{no(e=>{const r=e.services.filter((i,o)=>o!==t),n={...e,services:r};return Fi(!0),Po(),n})},addBulk:t=>{no(e=>{const r={...e,bulks:[...e.bulks,t]};return Fi(!0),Po(),r})},updateBulk:(t,e)=>{no(r=>{const n=[...r.bulks];n[t]={...n[t],...e};const i={...r,bulks:n};return Fi(!0),Po(),i})},removeBulk:t=>{no(e=>{const r=e.bulks.filter((i,o)=>o!==t),n={...e,bulks:r};return Fi(!0),Po(),n})},clearForm:()=>{no({...zh}),Fi(!1),dS(),Ny(null)},markCompleted:()=>{dS(),Fi(!1),Ny(null)},forceSave:()=>{c2(Yl()),Ny(new Date),Fi(!1)},hasData:()=>{const t=Yl();return t.invoice!==""||t.description!==""||t.store!==""||t.shipper_consignee.name!==""||t.shipper_consignee.firstName!==""||t.shipper_consignee.cid!==""||t.products.length>0||t.reservas.length>0||t.services.length>0||t.bulks.length>0||t.paymentMethods.cash>0||t.paymentMethods.zelle>0||t.paymentMethods.creditCard>0},invoiceTotals:()=>{const t=Yl(),e=t.products.reduce((p,m)=>p+m.qty*m.salePrice,0),r=t.reservas.reduce((p,m)=>p+(m.qty*m.price+m.arancel),0),n=t.services.reduce((p,m)=>p+m.qty*m.arancel,0),i=t.bulks.reduce((p,m)=>p+(m?.transportCost||20),0),o=Math.round(e)+Math.round(r)+Math.round(n)+Math.round(i),s=t.paymentMethods.cash+t.paymentMethods.zelle+t.paymentMethods.creditCard;let a=s;t.paymentMethods.exemptTaxOnCash&&(a=o-t.paymentMethods.cash);const l=t.paymentMethods.taxOnTotal?o*t.paymentMethods.taxPercent/100:a*t.paymentMethods.taxPercent/100,d=o+l,u=d-s,h=o*t.paymentMethods.taxPercent/100-l;return{itemsTotal:o,transportTotal:i,grandTotal:o,productsTotal:e,reservasTotal:r,servicesTotal:n,balance:u,totalWithTax:d,taxAmount:l,saveOnExemptTaxOnCash:h}},isValid:()=>{const t=Yl(),e=Kr.invoiceTotals();return e.balance<.6&&e.grandTotal&&t.invoice.trim()!==""&&t.store.trim()!==""&&t.shippingMethod.trim()!==""&&t.shipper_consignee.phoneNumber.trim()!==""&&t.shipper_consignee.phoneNumberS.trim()!==""&&t.shipper_consignee.firstName.trim()!==""&&t.shipper_consignee.name.trim()!==""&&t.shipper_consignee.lastName.trim()!==""&&t.shipper_consignee.cid.trim()!==""&&(t.products.length>0||t.reservas.length>0||t.services.length>0||t.bulks.length>0)},getFormData:()=>Yl()};typeof window<"u"&&window.addEventListener("beforeunload",t=>{if(R3()&&(c2(Yl()),Kr.hasData()))return t.preventDefault(),t.returnValue="You have unsaved changes in your invoice. Are you sure you want to leave?",t.returnValue});const HU=20,WU=["📺 TV","📺 Television","📺 Televisor","📺 Smart TV","🖥️ Monitor","🖥️ Pantalla","📺 Plasma","📺 LED TV","📺 OLED TV","💻 Computadora","💻 Laptop","💻 PC","💻 Desktop","💻 Macbook","💻 Notebook","🖥️ iMac","💻 Chromebook","⚡ Generador","⚡ Generator","🔧 Generador Electrico","🔌 Planta Electrica","⚡ Inversor","🔌 UPS","🔋 Bateria","🔋 Battery","🔋 Bateria de Litio","🔋 Lithium Battery","🔋 Power Bank","🔋 Banco de Energia","🔋 Bateria Externa","🔋 Cargador Solar","🔋 Solar Charger","🚗 Bateria de Carro","🎤 Amplificador","🎵 Bocinas Grandes","🎵 Sound System","📷 Camara Profesional","🎥 Video Camera","📹 Videocamara","🖨️ Impresora Grande","🖨️ Printer","📠 Fax Machine","❄️ Mini Nevera","🌀 Ventilador de Torre","☕ Cafetera Electrica","🍞 Tostadora","🥤 Licuadora","🍯 Procesador de Alimentos"],xo={MISCELANEAS:{over50items:2.99,under50items:3.99},DURADEROS:{price:4.5,arancel:{ranges:[{min:0,max:5,cost:5},{min:5,max:20,cost:10},{min:20,max:50,cost:20},{min:50,max:100,cost:35},{min:100,max:1/0,cost:50}]}},LITHIUM_BATTERIES:{price:8.99},EXCLUSIVE:{price:6.99},DOCUMENTS:{price:1.99}},Ip=t=>{const e=t.toUpperCase();return e.includes("BATERIA")||e.includes("BATTERY")||e.includes("POWER BANK")||e.includes("LITIO")||e.includes("LITHIUM")?"LITHIUM_BATTERIES":WU.some(r=>{const n=r.replace(/^[\u{1F000}-\u{1F9FF}\u{2600}-\u{27BF}]\s*/u,"").toUpperCase();return e.includes(n)||t.toLowerCase().includes(n.toLowerCase())})?"EXCLUSIVE":e.includes("TV")||e.includes("DURADEROS")||e.includes("TELEFONO")||e.includes("PHONE")||e.includes("ELECTRODOMESTICO")||e.includes("ELECTRONIC")||e.includes("CAMARA")||e.includes("CAMERA")||e.includes("AUDIO")||e.includes("HERRAMIENTA")||e.includes("TOOL")||e.includes("EQUIPO")?"DURADEROS":e.includes("DOCUMENTO")||e.includes("DOCUMENT")||e.includes("PAPEL")||e.includes("CERTIFICADO")?"DOCUMENTS":"MISCELANEAS"},v1=(t,e,r,n)=>{const i=Ip(t);if(!e)switch(i){case"MISCELANEAS":return xo.MISCELANEAS.under50items;case"DURADEROS":return xo.DURADEROS.price;case"LITHIUM_BATTERIES":return xo.LITHIUM_BATTERIES.price;case"EXCLUSIVE":return xo.EXCLUSIVE.price;case"DOCUMENTS":return xo.DOCUMENTS.price;default:return xo.MISCELANEAS.under50items}const o=r.filter(s=>s.bulkId===e&&s.category==="MISCELANEAS").reduce((s,a)=>s+(a.qty||0),0);switch(i){case"MISCELANEAS":return o>=46?xo.MISCELANEAS.over50items:xo.MISCELANEAS.under50items;case"DURADEROS":return xo.DURADEROS.price;case"LITHIUM_BATTERIES":return xo.LITHIUM_BATTERIES.price;case"EXCLUSIVE":return xo.EXCLUSIVE.price;case"DOCUMENTS":return xo.DOCUMENTS.price;default:return xo.MISCELANEAS.under50items}},b1=(t,e)=>{if(t==="DURADEROS"&&xo.DURADEROS.arancel){const r=xo.DURADEROS.arancel.ranges;for(const n of r)if(e>=n.min&&e<n.max)return n.cost}return 0},GU=(t,e,r,n,i)=>t!=="EXCLUSIVE"?{isValid:!0}:[...r.filter(s=>s.bulkId===e),...n.filter(s=>s.bulkId===e),...i.filter(s=>s.bulkId===e)]?.length>0?{isValid:!1,error:`⚠️ ${t} requiere un bulto exclusivo. Este item debe ir solo en su propio bulto.`}:{isValid:!0},Qv=(t,e,r,n)=>{const i=[...e.filter(s=>s.bulkId===t),...r.filter(s=>s.bulkId===t),...n.filter(s=>s.bulkId===t)];if(i?.some(s=>{const a=s.type||s.product?.label||"";return Ip(a)==="EXCLUSIVE"})){const s=i?.find(l=>{const d=l.type||l.product?.label||"";return Ip(d)==="EXCLUSIVE"});return{isValid:!1,error:`⚠️ Este bulto contiene ${s?.type||s?.product?.label||"equipo exclusivo"} que requiere ir solo. No se pueden agregar más items.`}}return{isValid:!0}};var uS=le("<div>"),KU=le("<div><input type=text autocomplete=off>"),YU=le("<div>No se encontraron tipos de reserva");const hS=["👕 Ropa y Zapatos","👕 Ropa","👞 Zapatos","👒 Sombreros y Gorras","🧥 Abrigos y Chaquetas","👖 Pantalones y Jeans","👗 Vestidos","🩱 Ropa de Baño","🧦 Calcetines y Medias","🩲 Ropa Interior","👶 Ropa de Bebe","📺 TV","📱 Telefono Movil","💻 Computadora/Laptop","⌨️ Teclados","🖱️ Mouse","🎧 Audifonos","🔌 Cables y Accesorios","🔋 Baterias","📷 Camaras","🎥 Videocamaras","📻 Radios","💾 USB y Memorias","🖨️ Impresoras","📽️ Proyectores","🕹️ Controles de Videojuegos","🎮 Consolas de Videojuegos","📡 Antenas","💡 Bombillas LED","🔦 Linternas","🏠 Utiles del Hogar","🛏️ Articulos para el Hogar","🪑 Muebles","🛋️ Sofas y Sillones","🚪 Puertas y Ventanas","🔑 Cerraduras y Llaves","🧽 Articulos de Limpieza","🧼 Productos de Limpieza","🧴 Detergentes","🕯️ Velas","🖼️ Cuadros y Decoraciones","🪴 Plantas y Macetas","🔨 Herramientas de Casa","⚡ Articulos Electricos","🌀 Ventiladores","❄️ Aires Acondicionados","🔥 Calentadores","💊 Medicamentos","🧴 Productos de Belleza","💄 Maquillaje","🧴 Shampoo y Acondicionador","🧼 Jabones","🪥 Cepillos de Dientes","🧻 Papel Higienico","🧴 Aseo Personal","💉 Equipos Medicos","🏥 Suministros Medicos","🩹 Vendas y Curitas","🌡️ Termometros","👓 Lentes Recetados","🕶️ Lentes de Sol","⚽ Equipos Deportivos","🏀 Balones","🎾 Raquetas","🏋️ Pesas","🎣 Equipos de Pesca","🎸 Instrumentos Musicales","🎲 Juegos y Juguetes","🧸 Peluches","🎯 Juegos de Mesa","🪀 Juguetes Clasicos","🍽️ Articulos de Cocina","🔪 Cuchillos","🥄 Cubiertos","🍳 Sartenes y Ollas","☕ Cafeteras","🧊 Neveras Pequeñas","🌶️ Condimentos","🍫 Dulces y Chocolates","🧂 Especias","🥫 Alimentos Enlatados","📚 Libros","📰 Revistas","📄 Documentos","📜 Certificados","💿 CDs y DVDs","📸 Fotos","🗞️ Periodicos","🔧 Herramientas","🔩 Tornillos y Clavos","🪚 Sierras","🔨 Martillos","⚒️ Herramientas de Construccion","🧰 Cajas de Herramientas","🪜 Escaleras","🔗 Cadenas y Candados","🚗 Repuestos de Carros","⚙️ Partes de Motor","🛞 Gomas y Rines","🔋 Baterias de Carro","🛢️ Aceites","🚨 Alarmas de Carro","🎵 Radios de Carro"],XU=t=>{const[e,r]=Ae(!1),[n,i]=Ae(""),[o,s]=Ae(-1),a=()=>{const[V,N]=Ae(""),R=n().toLowerCase();if(!R)return hS.slice(0,20);const M=hS.filter(C=>C.toLowerCase().includes(R));return M.length===0&&R.length>0?[`✏️ Agregar "${n()}"`]:M.slice(0,15)},l=()=>{r(!0),i(""),s(-1)},d=V=>{const R=V.target.value;i(R),r(R.length>=0),s(-1)},u=V=>{let N;V.startsWith("✏️ Agregar")?N=n():N=V.replace(/^[\u{1F000}-\u{1F9FF}\u{2600}-\u{27BF}]\s*/u,""),t.onChange(N),r(!1),i(""),s(-1)},h=V=>{const N=a();switch(V.key){case"ArrowDown":V.preventDefault(),s(R=>Math.min(R+1,N.length-1));break;case"ArrowUp":V.preventDefault(),s(R=>Math.max(R-1,-1));break;case"Enter":V.preventDefault(),o()>=0&&N[o()]&&u(N[o()]);break;case"Escape":r(!1),i(""),s(-1);break}},f=V=>{setTimeout(()=>{r(!1),i(""),s(-1)},150)},p=()=>e()&&n()?n():t.value||"",m={position:"relative",width:"100%",...t.style},x={width:"100%",padding:"0.5rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"0.875rem","margin-bottom":"0.5rem",background:"var(--surface-color)"},P={position:"absolute",top:"100%",left:"0",right:"0","z-index":"1000","max-height":"200px","overflow-y":"auto",background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","box-shadow":"0 4px 12px rgba(0,0,0,0.15)","margin-top":"2px"},g=V=>({padding:"0.5rem",cursor:"pointer","border-bottom":"1px solid var(--border-color)",background:V?"var(--primary-color)":"transparent",color:V?"white":"var(--text-primary)",transition:"all 0.2s ease","font-size":"0.875rem"}),F={padding:"1rem","text-align":"center",color:"var(--text-muted)","font-style":"italic","font-size":"0.875rem"};return(()=>{var V=KU(),N=V.firstChild;return N.addEventListener("blur",f),N.$$keydown=h,N.$$click=l,N.$$input=d,y(N,x),c(V,T(We,{get when(){return e()},get children(){var R=uS();return c(R,T(We,{get when(){return a().length>0},get fallback(){return(()=>{var M=YU();return y(M,F),M})()},get children(){return T(_t,{get each(){return a()},children:(M,C)=>(()=>{var k=uS();return k.addEventListener("mouseenter",()=>s(C())),k.$$click=()=>u(M),c(k,M),be(D=>y(k,g(C()===o()),D)),k})()})}})),be(M=>y(R,P,M)),R}}),null),be(R=>{var M=m,C=t.placeholder||"Buscar tipo de reserva...";return R.e=y(V,M,R.e),C!==R.t&&ir(N,"placeholder",R.t=C),R},{e:void 0,t:void 0}),be(()=>N.value=p()),V})()};tr(["input","click","keydown"]);var ZU=le("<h4>Reservas (<!>)"),JU=le("<span>"),QU=le("<button type=button><span>"),eq=le('<div><div><div><span>Reserva: </span></div><button type=button title="Eliminar reserva">🗑️</button></div><div><div><label>Tipo de Reserva</label></div><div><label>Categoría</label><select><option value=MISCELANEAS>Miscelaneas</option><option value=DURADEROS>Duraderos</option><option value=LITHIUM_BATTERIES>Baterías Litio</option><option value=EXCLUSIVE>Exclusivos</option><option value=DOCUMENTS>Documentos</option></select></div></div><div><div><label>Cantidad</label></div><div><label>Precio ($) </label></div><div><label>Arancel ($) ');const tq=t=>{const e=(l,d)=>{t.onUpdateReserva(l,d),t.onBulkChange()},r=(l,d)=>{confirm(`¿Eliminar reserva "${d.type||"sin tipo"}"?

Esta acción no se puede deshacer.`)&&(t.onRemoveReserva(l),t.onBulkChange())},n={border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)",padding:"1rem","margin-bottom":"0.5rem",background:"white"},i={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.5rem"},o={background:"#fff",color:"red",border:"none","border-sradius":"50%",width:"1.8em",height:"1.8em",display:"flex","align-items":"center","justify-content":"center",cursor:"pointer","font-size":"0.75rem"},s={width:"100%",padding:"0.5rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"0.875rem","margin-bottom":"0.5rem"},a={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.5rem"};return[T(We,{get when(){return t.reservas.length>0},get children(){var l=ZU(),d=l.firstChild,u=d.nextSibling;return u.nextSibling,l.style.setProperty("font-size","1rem"),l.style.setProperty("font-weight","bold"),l.style.setProperty("color","var(--primary-color)"),l.style.setProperty("margin","1.9rem 0 0.75rem 0 "),l.style.setProperty("border-bottom","1px solid var(--border-color)"),l.style.setProperty("padding-bottom","0.5rem"),c(l,T(Gr,{name:"inventory",size:"1em",style:{"margin-right":"0.5rem"}}),d),c(l,()=>t.reservas.length,u),l}}),T(_t,{get each(){return t.reservas},children:(l,d)=>(()=>{var u=eq(),h=u.firstChild,f=h.firstChild,p=f.firstChild,m=p.firstChild,x=f.nextSibling,P=h.nextSibling,g=P.firstChild,F=g.firstChild,V=g.nextSibling,N=V.firstChild,R=N.nextSibling,M=P.nextSibling,C=M.firstChild,k=C.firstChild,D=C.nextSibling,$=D.firstChild,w=D.nextSibling,_=w.firstChild;return y(u,n),y(h,i),f.style.setProperty("display","flex"),f.style.setProperty("align-items","center"),f.style.setProperty("gap","0.5rem"),f.style.setProperty("flex","1"),p.style.setProperty("font-weight","bold"),p.style.setProperty("color","var(--primary-color)"),c(p,T(Gr,{name:"inventory",size:"1em",style:{"margin-right":"0.3rem"}}),m),c(p,()=>l.type||"Sin tipo",null),c(f,T(We,{get when(){return l.category},get children(){var v=JU();return v.style.setProperty("font-size","0.75rem"),v.style.setProperty("color","var(--text-muted)"),v.style.setProperty("background","var(--strip-color)"),v.style.setProperty("padding","2px 6px"),v.style.setProperty("border-radius","3px"),c(v,()=>l.category),v}}),null),c(f,T(We,{get when(){return t.autoCalculation},get children(){var v=QU(),z=v.firstChild;return v.$$click=()=>e(d(),{autoCalculate:l.autoCalculate===!1}),v.style.setProperty("border","none"),v.style.setProperty("border-radius","var(--border-radius-sm)"),v.style.setProperty("padding","2px 8px"),v.style.setProperty("font-size","0.7rem"),v.style.setProperty("cursor","pointer"),v.style.setProperty("display","flex"),v.style.setProperty("align-items","center"),v.style.setProperty("gap","0.25rem"),c(z,()=>l.autoCalculate!==!1?"🤖 Auto":"✋ Manual"),be(()=>ir(v,"title",l.autoCalculate!==!1?"Auto-cálculo activo para esta reserva. Click para desactivar":"Auto-cálculo inactivo para esta reserva. Click para activar")),v}}),null),x.$$click=()=>r(d(),l),y(x,o),F.style.setProperty("font-size","0.875rem"),F.style.setProperty("font-weight","500"),c(g,T(XU,{get value(){return l.type},onChange:v=>e(d(),{type:v}),onWeightChange:v=>e(d(),{qty:v}),placeholder:"Buscar tipo de reserva...",get showWeight(){return l.category==="MISCELANEAS"},get weight(){return l.qty},style:{"margin-bottom":"0"}}),null),N.style.setProperty("font-size","0.875rem"),N.style.setProperty("font-weight","500"),R.addEventListener("change",v=>{e(d(),{category:v.target.value})}),k.style.setProperty("font-size","0.875rem"),k.style.setProperty("font-weight","500"),c(C,T(Ot,{type:"number",style:s,get value(){return l.qty.toString()},min:"1",onChange:v=>e(d(),{qty:Number(v)||1})}),null),$.style.setProperty("font-size","0.875rem"),$.style.setProperty("font-weight","500"),c(D,T(Ot,{type:"number",get style(){return{...s,background:t.autoCalculation&&l.autoCalculate!==!1?"var(--strip-color)":"var(--surface-color)",cursor:t.autoCalculation&&l.autoCalculate!==!1?"not-allowed":"text"}},get value(){return l.price.toString()},step:"0.01",get readOnly(){return t.autoCalculation&&l.autoCalculate!==!1},onChange:v=>{if(!t.autoCalculation||l.autoCalculate===!1){const z=Number(v)||0;e(d(),{price:z})}},get title(){return t.autoCalculation&&l.autoCalculate!==!1?"Precio calculado automáticamente":"Ingrese precio manualmente"}}),null),_.style.setProperty("font-size","0.875rem"),_.style.setProperty("font-weight","500"),c(w,T(Ot,{type:"number",get style(){return{...s,background:t.autoCalculation&&l.autoCalculate!==!1?"var(--strip-color)":"var(--surface-color)",cursor:t.autoCalculation&&l.autoCalculate!==!1?"not-allowed":"text"}},get value(){return l.arancel.toString()},step:"0.01",get readOnly(){return t.autoCalculation&&l.autoCalculate!==!1},onChange:v=>{if(!t.autoCalculation||l.autoCalculate===!1){const z=Number(v)||0;e(d(),{arancel:z})}},get title(){return t.autoCalculation&&l.autoCalculate!==!1?"Arancel calculado automáticamente":"Ingrese arancel manualmente"}}),null),be(v=>{var z=a,W=s,A=a;return v.e=y(P,z,v.e),v.t=y(R,W,v.t),v.a=y(M,A,v.a),v},{e:void 0,t:void 0,a:void 0}),be(()=>R.value=l.category),u})()})]};tr(["click"]);var rq=le("<div>🔄 "),nq=le("<div>⚠️ <div>"),iq=le("<div><span>🔄</span><span>"),ny=le("<div>"),oq=le("<div><div><div><input type=text autocomplete=off>"),sq=le("<button type=button>+"),aq=le("<div><div></div><div>"),lq=le("<div><div><div><div></div><div><span>: </span><span>•</span><span></span><span>•</span><span></span></div></div><div><div> </div><div></div><div>: "),cq=le("<span>"),dq=le("<span>⚠️ ");const uq=t=>{const{t:e}=pr(),[r,n]=Ae(!1),[i,o]=Ae(""),[s,a]=Ae(-1),[l,d]=Ae(!1),[u,h]=Ae(null),[f,p]=Ae([]),[m,x]=Ae(null),P=t.searchDelay||300,g=t.maxResults||40,F=zt(()=>{if(!t.value)return null;const B=f().find(H=>H.id===t.value);return B||At.getProductById(t.value)}),V=async B=>{if(!B.trim()){p([]);return}d(!0),h(null);const H=At.getActiveProducts().filter(Y=>Y.name.toLowerCase().includes(B.toLowerCase())||Y.sku.toLowerCase().includes(B.toLowerCase())||Y?.UPC?.toLowerCase().includes(B?.toLowerCase())||Y.category.toLowerCase().includes(B.toLowerCase())).slice(0,g);p(H),d(!1)},N=zt(()=>i().toLowerCase()?f():At.getActiveProducts().slice(0,10)),R=()=>{n(!0),o(""),a(-1),h(null),i()||p(At.getActiveProducts().slice(0,10))},M=B=>{const Y=B.target.value;o(Y),n(!0),a(-1),h(null),m()&&clearTimeout(m());const te=setTimeout(()=>{V(Y)},P);x(te)},C=B=>{t.onChange(B.id),n(!1),o(""),a(-1),h(null),m()&&(clearTimeout(m()),x(null))},k=B=>{const H=N();switch(B.key){case"ArrowDown":B.preventDefault(),a(Y=>Math.min(Y+1,H.length-1));break;case"ArrowUp":B.preventDefault(),a(Y=>Math.max(Y-1,-1));break;case"Enter":B.preventDefault(),s()>=0&&H[s()]&&C(H[s()]);break;case"Escape":n(!1),o(""),a(-1),h(null),m()&&(clearTimeout(m()),x(null));break}},D=B=>{setTimeout(()=>{n(!1),o(""),a(-1),m()&&(clearTimeout(m()),x(null))},150)},$=B=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(B),w=B=>At.stockLevels.filter(H=>H.productId===B).reduce((H,Y)=>H+Y.quantity,0);Kn(()=>()=>{m()&&clearTimeout(m())});const _={position:"relative",width:"100%",...t.style},v={width:"100%",padding:"0.75rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"1rem",background:"var(--surface-color)",cursor:t.disabled?"not-allowed":"text",opacity:t.disabled?"0.6":"1"},z={position:"absolute",top:"100%",left:"0",right:"0","z-index":"1000","max-height":"400px","overflow-y":"auto",background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","box-shadow":"0 4px 12px rgba(0,0,0,0.15)","margin-top":"2px"},W=B=>({padding:"0.75rem",cursor:"pointer","border-bottom":"1px solid var(--border-color)",background:B?"var(--strip-color)":"transparent",color:B?"var(--primary-color)":"var(--text-primary)",transition:"all 0.2s ease"}),A={display:"flex","justify-content":"space-between","align-items":"center"},I={flex:"1"},ee={"font-weight":"500","margin-bottom":"0.25rem"},Z={"font-size":"0.875rem",color:"var(--text-muted)",display:"flex",gap:"0.5rem","flex-wrap":"wrap"},X={"text-align":"right","font-size":"0.875rem"},se={padding:"1rem","text-align":"center",color:"var(--text-muted)","font-style":"italic"},U={padding:"1rem","text-align":"center",color:"var(--text-muted)",display:"flex","align-items":"center","justify-content":"center",gap:"0.5rem"},E={padding:"1rem","text-align":"center",color:"#d32f2f",background:"#ffebee","border-radius":"var(--border-radius-sm)",margin:"0.5rem","font-size":"0.875rem"},O=()=>r()&&i()?i():F()?`${F().name} (${F().sku})`:"",L={display:"flex","align-items":"stretch",width:"100%"},G={padding:"0.75rem",border:"1px solid var(--border-color)","border-left":"none","border-radius":"0 var(--border-radius-sm) var(--border-radius-sm) 0",background:"var(--surface-color)",cursor:"pointer",color:"var(--primary-color)","font-weight":"600","font-size":"1rem",transition:"all 0.2s ease","min-width":"40px",display:"flex","align-items":"center","justify-content":"center"},K={...v,"border-radius":t.onAddNew?"var(--border-radius-sm) 0 0 var(--border-radius-sm)":"var(--border-radius-sm)","border-right":t.onAddNew?"none":"1px solid var(--border-color)"},q={position:"absolute",right:t.onAddNew?"50px":"0.75rem",top:"50%",transform:"translateY(-50%)","font-size":"0.875rem",color:"var(--text-muted)","pointer-events":"none"};return(()=>{var B=oq(),H=B.firstChild,Y=H.firstChild,te=Y.firstChild;return y(H,L),Y.style.setProperty("position","relative"),Y.style.setProperty("flex","1"),te.addEventListener("blur",D),te.$$keydown=k,te.$$click=R,te.$$input=M,c(Y,T(We,{get when(){return l()},get children(){var oe=rq();return oe.firstChild,c(oe,()=>e("common.searching","Searching..."),null),be(pe=>y(oe,q,pe)),oe}}),null),c(H,(()=>{var oe=Ve(()=>!!t.onAddNew);return()=>oe()&&(()=>{var pe=sq();return pe.addEventListener("mouseleave",ne=>{ne.currentTarget.style.background="var(--surface-color)",ne.currentTarget.style.color="var(--primary-color)"}),pe.addEventListener("mouseenter",ne=>{ne.currentTarget.style.background="var(--primary-color)",ne.currentTarget.style.color="white"}),Qn(pe,"click",t.onAddNew,!0),y(pe,G),be(()=>ir(pe,"title",e("inventory.addProduct","Add new product"))),pe})()})(),null),c(B,T(We,{get when(){return r()},get children(){var oe=ny();return c(oe,T(We,{get when(){return u()},get children(){var pe=nq(),ne=pe.firstChild,Q=ne.nextSibling;return y(pe,E),c(pe,u,Q),Q.style.setProperty("margin-top","0.5rem"),Q.style.setProperty("font-size","0.75rem"),c(Q,()=>e("inventory.searchFallback","Showing local results")),pe}}),null),c(oe,T(We,{get when(){return l()},get children(){var pe=iq(),ne=pe.firstChild,Q=ne.nextSibling;return y(pe,U),c(Q,()=>e("common.searching","Searching products...")),pe}}),null),c(oe,T(We,{get when(){return Ve(()=>!l())()&&N().length>0},get fallback(){return Ve(()=>!l())()&&(()=>{var pe=ny();return y(pe,se),c(pe,(()=>{var ne=Ve(()=>!!i());return()=>ne()?(()=>{var Q=aq(),ce=Q.firstChild,ue=ce.nextSibling;return c(ce,()=>e("inventory.noProductsFound","No products found matching your search.")),ue.style.setProperty("margin-top","0.5rem"),ue.style.setProperty("font-size","0.75rem"),c(ue,()=>e("inventory.tryDifferentTerm","Try a different search term or check spelling.")),Q})():e("inventory.noProductsAvailable","No products available.")})()),pe})()},get children(){return[T(_t,{get each(){return N()},children:(pe,ne)=>{const Q=w(pe.id),ce=Q<=pe.minStockLevel;return(()=>{var ue=lq(),de=ue.firstChild,ge=de.firstChild,ye=ge.firstChild,fe=ye.nextSibling,Se=fe.firstChild,qe=Se.firstChild,Oe=Se.nextSibling,Ie=Oe.nextSibling,Be=Ie.nextSibling,ke=Be.nextSibling,Ge=ge.nextSibling,et=Ge.firstChild,ve=et.firstChild,De=et.nextSibling,He=De.nextSibling,Je=He.firstChild;return ue.addEventListener("mouseenter",()=>a(ne())),ue.$$click=()=>C(pe),y(de,A),y(ge,I),y(ye,ee),c(ye,()=>pe.name,null),c(ye,(()=>{var Le=Ve(()=>!!i());return()=>Le()&&(()=>{var Te=cq();return Te.style.setProperty("margin-left","0.5rem"),Te.style.setProperty("font-size","0.75rem"),Te.style.setProperty("color","var(--primary-color)"),Te.style.setProperty("font-weight","normal"),c(Te,()=>f().includes(pe)?"🌐 API":"💾 Local"),Te})()})(),null),y(fe,Z),c(Se,()=>e("inventory.sku","SKU"),qe),c(Se,()=>pe.sku,null),c(Ie,()=>pe.category),c(ke,()=>$(pe.unitCost)),c(ge,(()=>{var Le=Ve(()=>!!pe.description);return()=>Le()&&(()=>{var Te=ny();return Te.style.setProperty("font-size","0.75rem"),Te.style.setProperty("color","var(--text-muted)"),Te.style.setProperty("margin-top","0.25rem"),Te.style.setProperty("font-style","italic"),c(Te,(()=>{var he=Ve(()=>pe.description.length>60);return()=>he()?`${pe.description.substring(0,60)}...`:pe.description})()),Te})()})(),null),y(Ge,X),et.style.setProperty("font-weight","600"),(ce?"#f44336":"var(--text-primary)")!=null?et.style.setProperty("color",ce?"#f44336":"var(--text-primary)"):et.style.removeProperty("color"),c(et,Q,ve),c(et,()=>pe.unitOfMeasure,null),De.style.setProperty("color","var(--text-muted)"),c(De,()=>ce?(()=>{var Le=dq();return Le.firstChild,Le.style.setProperty("color","#f44336"),c(Le,()=>e("inventory.lowStock","Low Stock"),null),Le})():e("inventory.inStock","In Stock")),He.style.setProperty("font-size","0.75rem"),He.style.setProperty("color","var(--text-muted)"),He.style.setProperty("margin-top","0.25rem"),c(He,()=>e("inventory.min","Min"),Je),c(He,()=>pe.minStockLevel,null),be(Le=>y(ue,W(ne()===s()),Le)),ue})()}}),Ve(()=>Ve(()=>N().length===g)()&&(()=>{var pe=ny();return pe.style.setProperty("padding","0.5rem"),pe.style.setProperty("text-align","center"),pe.style.setProperty("font-size","0.75rem"),pe.style.setProperty("color","var(--text-muted)"),pe.style.setProperty("border-top","1px solid var(--border-color)"),pe.style.setProperty("font-style","italic"),c(pe,()=>e("inventory.showingTopResults","Showing top {{count}} results",{count:g})),pe})())]}}),null),be(pe=>y(oe,z,pe)),oe}}),null),be(oe=>{var pe=_,ne=K,Q=t.placeholder||e("inventory.searchProducts","Search products by name, SKU, or category..."),ce=t.disabled,ue=t.required;return oe.e=y(B,pe,oe.e),oe.t=y(te,ne,oe.t),Q!==oe.a&&ir(te,"placeholder",oe.a=Q),ce!==oe.o&&(te.disabled=oe.o=ce),ue!==oe.i&&(te.required=oe.i=ue),oe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),be(()=>te.value=O()),B})()};tr(["input","click","keydown"]);var hq=le("<h4>📦 Productos (<!>)"),pq=le('<div><div><span>📦 Producto: </span><button type=button title="Eliminar producto">🗑️</button></div><div><div><label>Cantidad</label><div></div></div><div><label>Cantidad</label></div><div><label>Precio Venta ($)');const fq=t=>{const e=(l,d)=>{let u={...d};const h=t.products[l];if(h&&(d.qty!==void 0||d.salePrice!==void 0)){const f=d.qty??h.qty,p=d.salePrice??h.salePrice;u={...u,total:f*p}}t.onUpdateProduct(l,u),t.onBulkChange()},r=(l,d)=>{confirm(`¿Eliminar producto "${d.product.label||"sin nombre"}"?

Esta acción no se puede deshacer.`)&&(t.onRemoveProduct(l),t.onBulkChange())},n=(l,d)=>{const u=At.getProductById(l);if(!u)return;const h=t.products[d]||{},f={product:{id:u.id,code:u?.sku||"",label:u.name||"",price:u.unitCost||0}},p={...h,...f};console.log(p),e(d,p)},i={border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)",padding:"1rem","margin-bottom":"0.5rem",background:"white"},o={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.5rem"},s={color:"white",border:"none","border-radius":"50%",width:"28px",height:"28px",display:"flex","align-items":"center","justify-content":"center",cursor:"pointer","font-size":"0.75rem"},a={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.5rem"};return[T(We,{get when(){return t.products.length>0},get children(){var l=hq(),d=l.firstChild,u=d.nextSibling;return u.nextSibling,l.style.setProperty("font-size","1rem"),l.style.setProperty("font-weight","bold"),l.style.setProperty("color","var(--success-color)"),l.style.setProperty("margin","1.9rem 0 0.75rem 0 "),l.style.setProperty("border-bottom","1px solid var(--border-color)"),l.style.setProperty("padding-bottom","0.5rem"),c(l,()=>t.products.length,u),l}}),T(_t,{get each(){return t.products},children:(l,d)=>(()=>{var u=pq(),h=u.firstChild,f=h.firstChild;f.firstChild;var p=f.nextSibling,m=h.nextSibling,x=m.firstChild,P=x.firstChild,g=P.nextSibling,F=x.nextSibling,V=F.firstChild,N=F.nextSibling,R=N.firstChild;return y(u,i),y(h,o),f.style.setProperty("font-weight","bold"),f.style.setProperty("color","var(--success-color)"),c(f,()=>l.product.label||"Sin nombre",null),p.$$click=()=>r(d(),l),y(p,s),y(m,a),P.style.setProperty("font-size","0.875rem"),P.style.setProperty("font-weight","500"),g.style.setProperty("margin",".6rem 0"),c(g,T(uq,{value:"",onChange:M=>n(M,d()),placeholder:"Buscar productos por nombre, SKU o categoria para agregar a la factura...",searchDelay:300,maxResults:15})),F.style.setProperty("text-align","center"),V.style.setProperty("font-size","0.875rem"),V.style.setProperty("font-weight","500"),V.style.setProperty("text-align","right"),c(F,T(Ot,{type:"number",style:{"max-width":"120px"},get value(){return l.qty.toString()},min:"1",onChange:M=>e(d(),{qty:Number(M)||1})}),null),N.style.setProperty("text-align","center"),R.style.setProperty("font-size","0.875rem"),R.style.setProperty("font-weight","500"),c(N,T(Ot,{type:"number",style:{"max-width":"120px"},get value(){return l.salePrice.toString()},step:"0.01",onChange:M=>e(d(),{salePrice:Number(M)||0})}),null),u})()})]};tr(["click"]);var pS=le("<div>"),yq=le("<div><input type=text autocomplete=off>"),mq=le("<div>No se encontraron tipos de servicio");const fS=["🚛 Transporte","📦 Empaque","🔧 Rapeado","🏷️ Etiquetado","📋 Documentación","🛠️ Instalación","🔍 Inspección","📸 Fotografía","🧹 Limpieza","⚖️ Pesaje","📏 Medición","🎁 Gift Wrap","🔒 Seguro","📞 Notificación","🚚 Entrega a Domicilio"],gq=t=>{const[e,r]=Ae(!1),[n,i]=Ae(""),[o,s]=Ae(-1),a=()=>{const[V,N]=Ae(""),R=n().toLowerCase();if(!R)return fS.slice(0,20);const M=fS.filter(C=>C.toLowerCase().includes(R));return M.length===0&&R.length>0?[`✏️ Agregar "${n()}"`]:M.slice(0,15)},l=()=>{r(!0),i(""),s(-1)},d=V=>{const R=V.target.value;i(R),r(R.length>=0),s(-1)},u=V=>{let N;V.startsWith("✏️ Agregar")?N=n():N=V.replace(/^[\u{1F000}-\u{1F9FF}\u{2600}-\u{27BF}]\s*/u,""),t.onChange(N),r(!1),i(""),s(-1)},h=V=>{const N=a();switch(V.key){case"ArrowDown":V.preventDefault(),s(R=>Math.min(R+1,N.length-1));break;case"ArrowUp":V.preventDefault(),s(R=>Math.max(R-1,-1));break;case"Enter":V.preventDefault(),o()>=0&&N[o()]&&u(N[o()]);break;case"Escape":r(!1),i(""),s(-1);break}},f=V=>{setTimeout(()=>{r(!1),i(""),s(-1)},150)},p=()=>e()&&n()?n():t.value||"",m={position:"relative",width:"100%",...t.style},x={width:"100%",padding:"0.5rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"0.875rem","margin-bottom":"0.5rem",background:"var(--surface-color)"},P={position:"absolute",top:"100%",left:"0",right:"0","z-index":"1000","max-height":"200px","overflow-y":"auto",background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","box-shadow":"0 4px 12px rgba(0,0,0,0.15)","margin-top":"2px"},g=V=>({padding:"0.5rem",cursor:"pointer","border-bottom":"1px solid var(--border-color)",background:V?"var(--primary-color)":"transparent",color:V?"white":"var(--text-primary)",transition:"all 0.2s ease","font-size":"0.875rem"}),F={padding:"1rem","text-align":"center",color:"var(--text-muted)","font-style":"italic","font-size":"0.875rem"};return(()=>{var V=yq(),N=V.firstChild;return N.addEventListener("blur",f),N.$$keydown=h,N.$$click=l,N.$$input=d,y(N,x),c(V,T(We,{get when(){return e()},get children(){var R=pS();return c(R,T(We,{get when(){return a().length>0},get fallback(){return(()=>{var M=mq();return y(M,F),M})()},get children(){return T(_t,{get each(){return a()},children:(M,C)=>(()=>{var k=pS();return k.addEventListener("mouseenter",()=>s(C())),k.$$click=()=>u(M),c(k,M),be(D=>y(k,g(C()===o()),D)),k})()})}})),be(M=>y(R,P,M)),R}}),null),be(R=>{var M=m,C=t.placeholder||"Buscar tipo de servicio...";return R.e=y(V,M,R.e),C!==R.t&&ir(N,"placeholder",R.t=C),R},{e:void 0,t:void 0}),be(()=>N.value=p()),V})()};tr(["input","click","keydown"]);var vq=le("<h4>🔧 Servicios (<!>)"),bq=le('<div><div><span>🔧 Servicio: </span><button type=button title="Eliminar servicio">🗑️</button></div><div><div><label>Tipo de Servicio</label></div><div><label>Cantidad</label></div><div><label>Precio ($)');const Pq=t=>{const e=(l,d)=>{let u={...d};const h=t.services[l];if(h&&(d.qty!==void 0||d.price!==void 0)){const f=d.qty??h.qty,p=d.price??h.price;u={...u,total:p*f}}t.onUpdateService(l,u),t.onBulkChange()},r=(l,d)=>{confirm(`¿Eliminar servicio "${d.type||"sin tipo"}"?

Esta acción no se puede deshacer.`)&&(t.onRemoveService(l),t.onBulkChange())},n={border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)",padding:"1rem","margin-bottom":"0.5rem",background:"white"},i={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.5rem"},o={color:"white",border:"none","border-radius":"50%",width:"28px",height:"28px",display:"flex","align-items":"center","justify-content":"center",cursor:"pointer","font-size":"0.75rem"},s={width:"100%",padding:"0.5rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"0.875rem","margin-bottom":"0.5rem"},a={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.5rem"};return[T(We,{get when(){return t.services.length>0},get children(){var l=vq(),d=l.firstChild,u=d.nextSibling;return u.nextSibling,l.style.setProperty("font-size","1rem"),l.style.setProperty("font-weight","bold"),l.style.setProperty("color","var(--warning-color)"),l.style.setProperty("margin","1.9rem 0 0.75rem 0 "),l.style.setProperty("border-bottom","1px solid var(--border-color)"),l.style.setProperty("padding-bottom","0.5rem"),c(l,()=>t.services.length,u),l}}),T(_t,{get each(){return t.services},children:(l,d)=>(()=>{var u=bq(),h=u.firstChild,f=h.firstChild;f.firstChild;var p=f.nextSibling,m=h.nextSibling,x=m.firstChild,P=x.firstChild,g=x.nextSibling,F=g.firstChild,V=g.nextSibling,N=V.firstChild;return y(u,n),y(h,i),f.style.setProperty("font-weight","bold"),f.style.setProperty("color","var(--warning-color)"),c(f,()=>l.type||"Sin tipo",null),p.$$click=()=>r(d(),l),y(p,o),y(m,a),P.style.setProperty("font-size","0.875rem"),P.style.setProperty("font-weight","500"),c(x,T(gq,{get value(){return l.type},onChange:R=>e(d(),{type:R}),placeholder:"Buscar tipo de servicio, Ej: Empaque, Etiquetado, Transporte...",style:{"margin-bottom":"0"}}),null),F.style.setProperty("font-size","0.875rem"),F.style.setProperty("font-weight","500"),c(g,T(Ot,{type:"number",style:s,get value(){return l.qty.toString()},min:"1",onChange:R=>e(d(),{qty:Number(R)||1})}),null),N.style.setProperty("font-size","0.875rem"),N.style.setProperty("font-weight","500"),c(V,T(Ot,{type:"number",style:s,get value(){return l.arancel.toString()},step:"0.01",onChange:R=>e(d(),{arancel:Number(R)||0})}),null),u})()})]};tr(["click"]);var xq=le("<div><h4>Información de Precios </h4><div>• <strong>Misceláneas:</strong> $3.99 (&lt;50 lbs) / $2.99 (≥50 lbs) - <em>Calculado por peso</em><br>• <strong>Duraderos:</strong> $4.50 + arancel dinámico por cantidad<br>• <strong>Aranceles Duraderos:</strong> 0-5 qty: $5, 5-20 qty: $10, 20-50 qty: $20, 50-100 qty: $35, 100+ qty: $50<br>• <strong>Baterías Litio:</strong> $8.99 (bulto exclusivo)<br>• <strong>Equipos Exclusivos:</strong> $6.99 (bulto exclusivo - TV, computadoras, generadores)<br>• <strong>Documentos:</strong> $1.99<br>• <strong>Transporte:</strong> $20 mínimo por bulto<br>"),Sq=le("<div><div>📦</div><h3>No hay bultos creados</h3><p>Cree un bulto para comenzar a organizar sus reservas, productos y servicios.</p><button type=button><span>➕</span><span>Crear Primer Bulto"),wq=le("<div><div><h3>Gestión de Bultos</h3><div><button type=button></button><button type=button><span>Crear Bulto"),Cq=le("<br>"),_q=le("<strong>Auto-cálculo desactivado:"),Aq=le("<div>Este bulto está vacío. Use los botones de arriba para agregar items."),kq=le("<div><div><div><label>Nombre del Bulto</label></div><div><label>Costo Transporte ($)</label></div></div><div><button type=button>Reserva</button><button type=button>Producto</button><button type=button>Servicio</button><button type=button>Eliminar Bulto"),Eq=le("<div><div><div><span></span><span>(<!> items, <!> lbs)</span></div><div><div>$</div><div>Items: $<!> + Transport: $");const Tq=t=>{const[e,r]=Ae(new Set),[n,i]=Ae(!1),[o,s]=Ae(!0),a=z=>{r(W=>{const A=new Set(W);return A.has(z)?A.delete(z):A.add(z),A})},l=z=>{const W=t.bulks?.findIndex(A=>A?.id===z);W!==-1&&t.onUpdateBulk(W,{token:So()})},d=()=>{const z={id:So(),name:`Bulto ${t.bulks?.length+1}`,type:"PERSONAL",maxWeight:50,currentWeight:0,transportCost:HU,shippingMethod:t.shippingMethod||"AEREO",status:"DRAFT",token:So()};t.onAddBulk(z)},u=z=>{const W=Qv(z,t.products,t.reservas,t.services);if(!W.isValid){alert(W.error);return}const A={id:So(),type:"",qty:1,weight:0,category:"MISCELANEAS",price:0,arancel:0,total:0,bulkId:z,autoCalculate:!1};t.onAddReserva(A),l(z)},h=z=>{const W=Qv(z,t.products,t.reservas,t.services);if(!W.isValid){alert(W.error);return}const A={id:So(),product:{id:"",code:"",label:"",price:0},qty:1,salePrice:0,total:0,bulkId:z};t.onAddProduct(A),l(z)},f=z=>{const W=Qv(z,t.products,t.reservas,t.services);if(!W.isValid){alert(W.error);return}const A={id:So(),type:"",qty:1,price:0,arancel:0,total:0,bulkId:z};t.onAddService(A),l(z)},p=(z,W)=>{var A=t.reservas;const I=t.reservas[z];if(!I)return;console.log("handleUpdateReserva called with:",{index:z,updates:W,reserva:I,autoCalculation:o()});let ee={...W};if(o()&&W.autoCalculate!==!1&&I.autoCalculate!==!1&&(W.type||W.category||W.qty!==void 0)){const X=W.type||I.type,se=W.qty??I.qty,U=W.bulkId||I.bulkId||"",E=W.category||I.category;if(X||I.type){const O=X||I.type;if(U&&W.type){const q=GU(O,U,t.products,t.reservas,t.services);if(!q.isValid){alert(q.error);return}}A[z]={...I,type:X,qty:se,bulkId:U,category:E};const L=E||Ip(O),G=v1(L,U,A),K=b1(L,se);ee={...ee,category:L,price:G,arancel:K,total:(G+K)*se},console.log("Auto-calculation results:",{typeToUse:O,category:L,newQty:se,dynamicPrice:G,dynamicArancel:K,total:(G+K)*se})}if(W.qty!==void 0||W.category!==void 0){console.log("Recalculating all reservas due to quantity/weight change...");const O=t.reservas.map((L,G)=>G===z?{...L,qty:ee.qty||L.qty}:L);t.reservas.forEach((L,G)=>{const K=L.autoCalculate!==!1;if(L.type&&L.category&&K){const q=G===z?{...L,...ee}:L,B=v1(q.category,q.bulkId||"",O,q.qty),H=b1(q.category,G===z&&ee.qty||q.qty),Y={category:q.category,price:B,arancel:H,total:(B+H)*q.qty};G===z?t.onUpdateReserva(G,{...ee,...Y}):t.onUpdateReserva(G,Y)}else G===z&&t.onUpdateReserva(G,ee)})}else t.onUpdateReserva(z,ee)}else{if(W.price!==void 0||W.arancel!==void 0||W.qty!==void 0){const X=W.price??I.price,se=W.arancel??I.arancel,U=W.qty??I.qty;ee={...ee,total:(X+se)*U}}t.onUpdateReserva(z,ee)}},m=z=>({reservas:t.reservas.filter(W=>W.bulkId===z),products:t.products.filter(W=>W.bulkId===z),services:t.services.filter(W=>W.bulkId===z)}),x=z=>{const W=m(z),A=t.bulks.find(X=>X?.id===z),I=[...W.reservas.map(X=>X.qty*X.price+X.arancel),...W.products.map(X=>X.qty*X.salePrice),...W.services.map(X=>X.qty*X.arancel)].reduce((X,se)=>X+se,0),ee=A?.transportCost||0,Z=[...W.reservas.map(X=>X.qty),...W.products.map(X=>X.qty),...W.services.map(X=>X.qty)].reduce((X,se)=>X+se,0);return{itemsTotal:I,transportCost:ee,grandTotal:I+ee,totalItems:W.reservas.length+W.products.length+W.services.length,totalQty:Z}},P={"margin-bottom":"2rem"},g={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"1rem","padding-bottom":"0.5rem","border-bottom":"2px solid var(--primary-color)"},F={"font-size":"1.25rem","font-weight":"bold",color:"var(--text-primary)",margin:"0"},V={background:"var(--primary-color)",color:"white",border:"none","border-radius":"var(--border-radius-sm)",padding:"0.5rem 1rem",cursor:"pointer","font-size":"0.875rem","font-weight":"500",transition:"all 0.2s ease",display:"flex","align-items":"center",gap:"0.5rem"},N={background:n()?"var(--success-color)":"var(--border-color)",color:n()?"white":"var(--text-muted)",border:"none","border-radius":"var(--border-radius-sm)",padding:"0.5rem 1rem",cursor:"pointer","font-size":"0.875rem","margin-right":"0.5rem"},R={border:"1px solid var(--border-color)","border-radius":"var(--border-radius)","margin-bottom":"1rem",background:"var(--surface-color)"},M=z=>{x(z?.id);const W=e().has(z?.id);return{display:"flex","justify-content":"space-between","align-items":"center",padding:"1rem","background-color":W?"var(--strip-color)":"var(--surface-color)","border-bottom":W?"none":"1px solid var(--border-color)",cursor:"pointer"}},C={padding:"1rem"},k={display:"flex",gap:"0.5rem","margin-bottom":"1rem","flex-wrap":"wrap"},D={background:"var(--strip-color)",color:"var(--primary-color)",border:"1px solid var(--primary-color)","border-radius":"var(--border-radius-sm)",padding:"0.5rem 1rem",cursor:"pointer","font-size":"0.875rem",transition:"all 0.2s ease"},$={color:"var(--error-color)",background:"white",border:"none","border-radius":"var(--border-radius-sm)",padding:"0.25rem 0.5rem",cursor:"pointer","font-size":"0.75rem"},w={width:"100%",padding:"0.5rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"0.875rem"},_={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.5rem"},v={"align-items":"center",display:" flex"};return(()=>{var z=wq(),W=z.firstChild,A=W.firstChild,I=A.firstChild,ee=A.nextSibling,Z=ee.firstChild,X=Z.nextSibling,se=X.firstChild;return y(z,P),y(W,g),y(A,F),c(A,T(Gr,{name:"operations",size:"1.2em",style:{"margin-right":"0.5rem"}}),I),ee.style.setProperty("display","flex"),Z.$$click=()=>i(!n()),c(Z,T(Gr,{get name(){return n()?"close":"finance"},size:"1em",style:{"margin-right":"0.5rem"}}),null),c(Z,()=>n()?"Ocultar Precios":"Mostrar Precios",null),X.$$click=d,c(X,T(Gr,{name:"add",size:"1em",style:{"margin-right":"0.5rem"}}),se),c(z,T(We,{get when(){return n()},get children(){var U=xq(),E=U.firstChild,O=E.firstChild,L=E.nextSibling,G=L.firstChild,K=G.nextSibling,q=K.nextSibling,B=q.nextSibling,H=B.nextSibling,Y=H.nextSibling,te=Y.nextSibling,oe=te.nextSibling,pe=oe.nextSibling,ne=pe.nextSibling,Q=ne.nextSibling,ce=Q.nextSibling,ue=ce.nextSibling,de=ue.nextSibling,ge=de.nextSibling,ye=ge.nextSibling,fe=ye.nextSibling,Se=fe.nextSibling,qe=Se.nextSibling,Oe=qe.nextSibling,Ie=Oe.nextSibling,Be=Ie.nextSibling,ke=Be.nextSibling,Ge=ke.nextSibling,et=Ge.nextSibling,ve=et.nextSibling,De=ve.nextSibling,He=De.nextSibling;return He.nextSibling,U.style.setProperty("background","var(--info-color)"),U.style.setProperty("padding","1rem"),U.style.setProperty("border-radius","var(--border-radius)"),U.style.setProperty("margin-bottom","1rem"),E.style.setProperty("margin","0 0 0.5rem 0"),E.style.setProperty("font-size","1rem"),c(E,T(Gr,{name:"finance",size:"1em",style:{"margin-right":"0.5rem"}}),O),c(E,(()=>{var Je=Ve(()=>!!o());return()=>Je()?[T(Gr,{name:"robot",size:"0.9em",style:{"margin-left":"0.5rem","margin-right":"0.3rem"}}),"Auto-Cálculo ACTIVO"]:[T(Gr,{name:"hand",size:"0.9em",style:{"margin-left":"0.5rem","margin-right":"0.3rem"}}),"Auto-Cálculo DESACTIVADO"]})(),null),L.style.setProperty("font-size","0.875rem"),L.style.setProperty("line-height","1.4"),c(L,(()=>{var Je=Ve(()=>!o());return()=>Je()&&[Cq(),(()=>{var Le=_q(),Te=Le.firstChild;return c(Le,T(Gr,{name:"warning",size:"0.9em",style:{"margin-right":"0.3rem"}}),Te),Le})()," Los precios y aranceles deben ingresarse manualmente"]})(),null),U}}),null),c(z,T(_t,{get each(){return t.bulks},children:(U,E)=>{const O=x(U?.id),L=e().has(U?.id),G=m(U?.id);return(()=>{var K=Eq(),q=K.firstChild,B=q.firstChild,H=B.firstChild,Y=H.nextSibling,te=Y.firstChild,oe=te.nextSibling,pe=oe.nextSibling,ne=pe.nextSibling;ne.nextSibling;var Q=B.nextSibling,ce=Q.firstChild;ce.firstChild;var ue=ce.nextSibling,de=ue.firstChild,ge=de.nextSibling;return ge.nextSibling,y(K,R),q.$$click=()=>a(U?.id),H.style.setProperty("font-weight","bold"),H.style.setProperty("font-size","1.1rem"),c(H,T(Gr,{name:L?"folder-closed":"folder-open",size:"1em",style:{"margin-right":"0.5rem"}}),null),c(H,()=>U?.name,null),Y.style.setProperty("margin-left","0.5rem"),Y.style.setProperty("color","var(--text-muted)"),Y.style.setProperty("font-size","0.875rem"),c(Y,()=>O.totalItems,oe),c(Y,()=>O.totalQty,ne),Q.style.setProperty("text-align","right"),ce.style.setProperty("font-weight","bold"),ce.style.setProperty("color","var(--primary-color)"),c(ce,()=>O.grandTotal.toFixed(2),null),ue.style.setProperty("font-size","0.75rem"),ue.style.setProperty("color","var(--text-muted)"),c(ue,()=>O.itemsTotal.toFixed(2),ge),c(ue,()=>O.transportCost.toFixed(2),null),c(K,T(We,{when:!L,get children(){var ye=kq(),fe=ye.firstChild,Se=fe.firstChild,qe=Se.firstChild,Oe=Se.nextSibling,Ie=Oe.firstChild,Be=fe.nextSibling,ke=Be.firstChild,Ge=ke.firstChild,et=ke.nextSibling,ve=et.firstChild,De=et.nextSibling,He=De.firstChild,Je=De.nextSibling,Le=Je.firstChild;return y(ye,C),y(fe,_),c(Se,T(Ot,{type:"text",style:w,get value(){return U?.name},onChange:Te=>t.onUpdateBulk(E(),{name:Te})}),null),Ie.style.setProperty("font-size","0.875rem"),Ie.style.setProperty("font-weight","500"),c(Oe,T(Ot,{type:"number",style:w,get value(){return(U?.transportCost||0).toString()},min:0,onChange:Te=>t.onUpdateBulk(E(),{transportCost:Math.max(Number(Te),0)})}),null),y(Be,k),ke.$$click=()=>u(U?.id),c(ke,T(Gr,{name:"add",size:"1em",style:{"margin-right":"0.3rem"}}),Ge),et.$$click=()=>h(U?.id),c(et,T(Gr,{name:"add",size:"1em",style:{"margin-right":"0.3rem"}}),ve),De.$$click=()=>f(U?.id),c(De,T(Gr,{name:"add",size:"1em",style:{"margin-right":"0.3rem"}}),He),Je.$$click=()=>t.onRemoveBulk(E()),c(Je,T(Gr,{name:"delete",size:"1em",color:"red",style:{"margin-right":"0.3rem"}}),Le),c(ye,T(tq,{get reservas(){return G.reservas},get showPricing(){return n()},get autoCalculation(){return o()},onUpdateReserva:(Te,he)=>{const Ne=G.reservas[Te],rt=t.reservas.findIndex(re=>re.id===Ne.id);p(rt,he)},onRemoveReserva:Te=>{const he=G.reservas[Te],Ne=t.reservas.findIndex(rt=>rt.id===he.id);t.onRemoveReserva(Ne)},onBulkChange:()=>l(U?.id)}),null),c(ye,T(fq,{get products(){return G.products},get showPricing(){return n()},onUpdateProduct:(Te,he)=>{const Ne=G.products[Te],rt=t.products.findIndex(re=>re.id===Ne.id);t.onUpdateProduct(rt,he)},onRemoveProduct:Te=>{const he=G.products[Te],Ne=t.products.findIndex(rt=>rt.id===he.id);t.onRemoveProduct(Ne)},onBulkChange:()=>l(U?.id)}),null),c(ye,T(Pq,{get services(){return G.services},get showPricing(){return n()},onUpdateService:(Te,he)=>{const Ne=G.services[Te],rt=t.services.findIndex(re=>re.id===Ne.id);t.onUpdateService(rt,he)},onRemoveService:Te=>{const he=G.services[Te],Ne=t.services.findIndex(rt=>rt.id===he.id);t.onRemoveService(Ne)},onBulkChange:()=>l(U?.id)}),null),c(ye,T(We,{get when(){return O.totalItems===0},get children(){var Te=Aq();return Te.style.setProperty("text-align","center"),Te.style.setProperty("color","var(--text-muted)"),Te.style.setProperty("font-style","italic"),Te.style.setProperty("padding","2rem"),Te}}),null),be(Te=>{var he={"font-size":"0.875rem","font-weight":"500",...v},Ne=D,rt=D,re=D,Ue={...$,"margin-left":"auto",color:"red"};return Te.e=y(qe,he,Te.e),Te.t=y(ke,Ne,Te.t),Te.a=y(et,rt,Te.a),Te.o=y(De,re,Te.o),Te.i=y(Je,Ue,Te.i),Te},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),ye}}),null),be(ye=>y(q,M(U),ye)),K})()}}),null),c(z,T(We,{get when(){return t.bulks.length===0},get children(){var U=Sq(),E=U.firstChild,O=E.nextSibling,L=O.nextSibling,G=L.nextSibling;return U.style.setProperty("text-align","center"),U.style.setProperty("padding","3rem"),U.style.setProperty("color","var(--text-muted)"),U.style.setProperty("border","2px dashed var(--border-color)"),U.style.setProperty("border-radius","var(--border-radius)"),E.style.setProperty("font-size","2rem"),E.style.setProperty("margin-bottom","1rem"),O.style.setProperty("margin-bottom","0.5rem"),L.style.setProperty("margin-bottom","1rem"),G.$$click=d,be(K=>y(G,V,K)),U}}),null),be(U=>{var E=N,O=V;return U.e=y(Z,E,U.e),U.t=y(X,O,U.t),U},{e:void 0,t:void 0}),z})()};tr(["click"]);var Iq=le("<label>"),e0=le("<div>"),Nq=le("<button type=button>✕ Limpiar"),Rq=le("<div><span>📱</span><span>Modo Escáner Activado: Escanee código de barras del ID cubano"),Dq=le("<div><span>🔄</span><span>"),Lq=le("<div><div><input type=text autocomplete=off><button type=button>"),$q=le("<span>📞 "),Fq=le("<span>🆔 "),Mq=le("<span>📧 "),Oq=le("<div><div><div><div>👤 </div><div>");const Bq=t=>{const{t:e}=pr(),[r,n]=Ae(!1),[i,o]=Ae(""),[s,a]=Ae(-1),[l,d]=Ae(!1),[u,h]=Ae([]),[f,p]=Ae(null),[m,x]=Ae(!1),[P,g]=Ae(""),F=async G=>{if(!G.trim()||G.trim().length<6){h([]);return}try{d(!0);const K=await Ki.getConsigee(G);console.log(K);const q=Object.values(K).map(B=>({id:B.consigneeId,firstName:B.firstName,middleName:B.middleName,fullName:B.firstName+(B.middleName?" "+B.middleName:"")+" "+B.lastName+" "+B.lastName2,lastName:B.lastName+" "+B.lastName2,cid:B.cid,phoneNumber:B.phoneNumber,ybbetwen1:B.ybbetwen1,ybcity:B.ybcity,ybestate:B.ybestate,ybreparto:B.ybreparto,ybstreet:B.ybstreet,ybstreetNo:B.ybstreetNo,address:`Calle ${B.ybstreet}${B.ybstreetNo?" # "+B.ybstreetNo:""}${B.ybbetwen1?" / "+B.ybbetwen1:""}${B.ybbetwen2?" y "+B.ybbetwen2:""}${B.ybreparto?", Rpto "+B.ybreparto:""}, ${B.ybcity?B.ybcity:""}, ${B.ybestate?B.ybestate:""}`}));h(q)}catch(K){console.warn("API search failed, falling back to local search:",K)}finally{d(!1)}},V=G=>{const q=G.target.value;if(g(q),q.length>=11){f()&&clearTimeout(f());const B=setTimeout(()=>{F(q),n(!0),a(-1)},300);p(B)}else q.length===0&&(h([]),n(!1))},N=()=>{x(!m()),g(""),o(""),n(!1),h([]),f()&&(clearTimeout(f()),p(null))},R=()=>{g(""),n(!1),h([]),f()&&(clearTimeout(f()),p(null))},M=()=>{n(!0),o(""),a(-1),i()||F("")},C=G=>{const q=G.target.value;o(q),n(!0),a(-1),f()&&clearTimeout(f());const B=setTimeout(()=>{F(q)},600);p(B)},k=G=>{t.onChange(G),n(!1),o(""),a(-1),f()&&(clearTimeout(f()),p(null))},D=G=>{const K=u();switch(G.key){case"ArrowDown":G.preventDefault(),a(q=>Math.min(q+1,K.length-1));break;case"ArrowUp":G.preventDefault(),a(q=>Math.max(q-1,-1));break;case"Enter":G.preventDefault(),s()>=0&&K[s()]&&k(K[s()]);break;case"Escape":n(!1),o(""),a(-1),f()&&(clearTimeout(f()),p(null));break}},$=G=>{setTimeout(()=>{n(!1),o(""),a(-1),f()&&(clearTimeout(f()),p(null))},150)},w=()=>m()?P()||"":r()&&i()?i()||"":t.value&&t.value.cid||"";Kn(()=>(F(""),()=>{f()&&clearTimeout(f())}));const _={position:"relative",width:"100%",...t.style},v={display:"block","font-size":"0.875rem","font-weight":"500",color:"var(--text-secondary)","margin-bottom":"0.25rem"},z={"font-size":"0.75rem",color:"var(--text-muted)","margin-bottom":"0.5rem","font-style":"italic"},W={width:"100%",padding:"0.75rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"1rem",background:"var(--surface-color)",cursor:t.disabled?"not-allowed":"text",opacity:t.disabled?"0.6":"1"},A={position:"absolute",top:"100%",left:"0",right:"0","z-index":"1000","max-height":"300px","overflow-y":"auto",background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","box-shadow":"0 4px 12px rgba(0,0,0,0.15)","margin-top":"2px"},I=G=>({padding:"0.75rem",cursor:"pointer","border-bottom":"1px solid var(--border-color)",background:G?"var(--strip-color)":"transparent",color:G?"var(--primary-color)":"var(--text-primary)",transition:"all 0.2s ease"}),ee={display:"flex","justify-content":"space-between","align-items":"flex-start"},Z={flex:"1"},X={"font-weight":"500","margin-bottom":"0.25rem"},se={"font-size":"0.875rem",color:"var(--text-muted)",display:"flex","flex-direction":"column",gap:"0.125rem"},U={padding:"1rem","text-align":"center",color:"var(--text-muted)","font-style":"italic"},E={position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:m()?"var(--primary-color)":"var(--border-color)",color:m()?"white":"var(--text-muted)",border:"none","border-radius":"4px",padding:"6px 8px",cursor:"pointer","font-size":"12px","z-index":"10",transition:"all 0.2s ease"},O={position:"relative",width:"100%"},L={padding:"1rem","text-align":"center",color:"var(--text-muted)",display:"flex","align-items":"center","justify-content":"center",gap:"0.5rem"};return(()=>{var G=Lq(),K=G.firstChild,q=K.firstChild,B=q.nextSibling;return c(G,T(We,{get when(){return t.label},get children(){var H=Iq();return y(H,v),c(H,()=>t.label),H}}),K),c(G,T(We,{get when(){return t.description},get children(){var H=e0();return y(H,z),c(H,()=>t.description),H}}),K),c(G,T(We,{get when(){return m()},get children(){var H=Rq(),Y=H.firstChild;return Y.nextSibling,H.style.setProperty("margin-bottom","0.5rem"),H.style.setProperty("padding","0.5rem"),H.style.setProperty("background-color","var(--primary-color)"),H.style.setProperty("color","white"),H.style.setProperty("border-radius","4px"),H.style.setProperty("font-size","0.875rem"),H.style.setProperty("display","flex"),H.style.setProperty("align-items","center"),H.style.setProperty("gap","0.5rem"),c(H,T(We,{get when(){return P().length>0},get children(){var te=Nq();return te.$$click=R,te.style.setProperty("background","rgba(255,255,255,0.2)"),te.style.setProperty("border","none"),te.style.setProperty("color","white"),te.style.setProperty("border-radius","2px"),te.style.setProperty("padding","2px 6px"),te.style.setProperty("cursor","pointer"),te.style.setProperty("font-size","0.75rem"),te}}),null),H}}),K),Qn(q,"blur",m()?void 0:$),Qn(q,"keydown",m()?void 0:D,!0),Qn(q,"click",m()?void 0:M,!0),Qn(q,"input",m()?V:C,!0),B.$$click=N,c(B,()=>m()?"📱 Scanner":"🔍 Manual"),c(G,T(We,{get when(){return r()},get children(){var H=e0();return c(H,T(We,{get when(){return l()},get children(){var Y=Dq(),te=Y.firstChild,oe=te.nextSibling;return y(Y,L),c(oe,()=>e("common.searching","Buscando clientes...")),Y}}),null),c(H,T(We,{get when(){return Ve(()=>!l())()&&u().length>0},get fallback(){return Ve(()=>!l())()&&(()=>{var Y=e0();return y(Y,U),c(Y,(()=>{var te=Ve(()=>!!i());return()=>te()?e("customer.noCustomersFound","No se encontraron clientes. Puede crear un nuevo cliente llenando el formulario."):e("customer.noCustomersAvailable","No se encontraron clientes previos. Se creará un nuevo cliente.")})()),Y})()},get children(){return T(_t,{get each(){return u()},children:(Y,te)=>(()=>{var oe=Oq(),pe=oe.firstChild,ne=pe.firstChild,Q=ne.firstChild;Q.firstChild;var ce=Q.nextSibling;return oe.addEventListener("mouseenter",()=>a(te())),oe.$$click=()=>k(Y),y(pe,ee),y(ne,Z),y(Q,X),c(Q,()=>Y.fullName,null),y(ce,se),c(ce,T(We,{get when(){return Y.phoneNumber},get children(){var ue=$q();return ue.firstChild,c(ue,()=>Y.phoneNumber,null),ue}}),null),c(ce,T(We,{get when(){return Y.cid},get children(){var ue=Fq();return ue.firstChild,c(ue,()=>Y.cid,null),ue}}),null),c(ce,T(We,{get when(){return Y.email},get children(){var ue=Mq();return ue.firstChild,c(ue,()=>Y.email,null),ue}}),null),be(ue=>y(oe,I(te()===s()),ue)),oe})()})}}),null),be(Y=>y(H,A,Y)),H}}),null),be(H=>{var Y=_,te=O,oe={...W,"padding-right":"80px","border-color":m()?"var(--primary-color)":"var(--border-color)","box-shadow":m()?"0 0 0 3px rgba(108, 92, 231, 0.1)":"none"},pe=m()?"Escanee código de barras del ID o escriba cédula (11 dígitos)...":t.placeholder||e("customer.searchPlaceholder","Buscar clientes por nombre, teléfono, ID..."),ne=t.disabled,Q=t.required,ce=E,ue=m()?"Cambiar a búsqueda manual":"Activar modo escáner";return H.e=y(G,Y,H.e),H.t=y(K,te,H.t),H.a=y(q,oe,H.a),pe!==H.o&&ir(q,"placeholder",H.o=pe),ne!==H.i&&(q.disabled=H.i=ne),Q!==H.n&&(q.required=H.n=Q),H.s=y(B,ce,H.s),ue!==H.h&&ir(B,"title",H.h=ue),H},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),be(()=>q.value=w()),G})()};tr(["click","input","keydown"]);var jq=le("<label>"),t0=le("<div>"),Vq=le("<button type=button>✕ Limpiar"),zq=le("<div><span>📱</span><span>Modo Escáner Activado: Escanee código de barras del ID del remitente"),Uq=le("<div><span>🔄</span><span>"),qq=le("<div><div><input type=text autocomplete=off><button type=button>"),Hq=le("<span>📞 "),Wq=le("<div><div><div><div>👤 </div><div>");const Gq=t=>{const{t:e}=pr(),[r,n]=Ae(!1),[i,o]=Ae(""),[s,a]=Ae(-1),[l,d]=Ae(!1),[u,h]=Ae([]),[f,p]=Ae(null),[m,x]=Ae(!1),[P,g]=Ae(""),F=600,V=async q=>{if(!q.trim()||q.trim().length<6){h([]);return}try{d(!0);const B=await Ki.getShipper(q),H=Object.values(B).map(Y=>({id:Y.shipperId,name:Y.name,dob:Y.dob,phoneNumberS:Y.phoneNumber,idS:Y.cid,street:Y.street}));h(H)}catch(B){console.warn("API search failed, falling back to local search:",B)}finally{d(!1)}},N=q=>{const H=q.target.value;if(g(H),H.length>=11){f()&&clearTimeout(f());const Y=setTimeout(()=>{V(H),n(!0),a(-1)},300);p(Y)}else H.length===0&&(h([]),n(!1))},R=()=>{x(!m()),g(""),o(""),n(!1),h([]),f()&&(clearTimeout(f()),p(null))},M=()=>{g(""),n(!1),h([]),f()&&(clearTimeout(f()),p(null))},C=q=>{const H=q.target.value;o(H),n(!0),a(-1),f()&&clearTimeout(f());const Y=setTimeout(()=>{V(H)},F);p(Y)},k=()=>{n(!0),o(""),a(-1),i()||V("")},D=q=>{t.onChange(q),n(!1),o(""),a(-1),f()&&(clearTimeout(f()),p(null))},$=q=>{const B=u();switch(q.key){case"ArrowDown":q.preventDefault(),a(H=>Math.min(H+1,B.length-1));break;case"ArrowUp":q.preventDefault(),a(H=>Math.max(H-1,-1));break;case"Enter":q.preventDefault(),s()>=0&&B[s()]&&D(B[s()]),m()&&v();break;case"Escape":n(!1),o(""),a(-1),f()&&(clearTimeout(f()),p(null));break}},w=q=>{setTimeout(()=>{n(!1),o(""),a(-1),f()&&(clearTimeout(f()),p(null))},150)},_=()=>m()?P()||"":r()&&i()?i():t.value?t.value.name:"";Kn(()=>(V(""),()=>{f()&&clearTimeout(f())}));const v=()=>{let q=i();console.log(q);let B=Yq(q);if(B?.firstName){let H=B.dob.slice(4,8),Y=B.dob.slice(0,2),te=B.dob.slice(2,4),oe=`${H}-${Y}-${te}`;const pe={id:B?.dlNumber?.trim(),name:`${B.firstName} ${B.lastName} `,dob:oe,phoneNumberS:"",idS:B.dlNumber?.trim(),addressS:`${B.address}, ${B.city}, ${B.state} ${B.zipCode}`};console.log(pe),D(pe)}},z={position:"relative",width:"100%",...t.style},W={display:"block","font-size":"0.875rem","font-weight":"500",color:"var(--text-secondary)","margin-bottom":"0.25rem"},A={"font-size":"0.75rem",color:"var(--text-muted)","margin-bottom":"0.5rem","font-style":"italic"},I={width:"100%",padding:"0.75rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"1rem",background:"var(--surface-color)",cursor:t.disabled?"not-allowed":"text",opacity:t.disabled?"0.6":"1"},ee={position:"absolute",top:"100%",left:"0",right:"0","z-index":"1000","max-height":"300px","overflow-y":"auto",background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","box-shadow":"0 4px 12px rgba(0,0,0,0.15)","margin-top":"2px"},Z=q=>({padding:"0.75rem",cursor:"pointer","border-bottom":"1px solid var(--border-color)",background:q?"var(--strip-color)":"transparent",color:q?"var(--primary-color)":"var(--text-primary)",transition:"all 0.2s ease"}),X={display:"flex","justify-content":"space-between","align-items":"flex-start"},se={flex:"1"},U={"font-weight":"500","margin-bottom":"0.25rem"},E={"font-size":"0.875rem",color:"var(--text-muted)",display:"flex","flex-direction":"column",gap:"0.125rem"},O={padding:"1rem","text-align":"center",color:"var(--text-muted)","font-style":"italic"},L={padding:"1rem","text-align":"center",color:"var(--text-muted)",display:"flex","align-items":"center","justify-content":"center",gap:"0.5rem"},G={position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:m()?"var(--primary-color)":"var(--border-color)",color:m()?"white":"var(--text-muted)",border:"none","border-radius":"4px",padding:"6px 8px",cursor:"pointer","font-size":"12px","z-index":"10",transition:"all 0.2s ease"},K={position:"relative",width:"100%"};return(()=>{var q=qq(),B=q.firstChild,H=B.firstChild,Y=H.nextSibling;return c(q,T(We,{get when(){return t.label},get children(){var te=jq();return y(te,W),c(te,()=>t.label),te}}),B),c(q,T(We,{get when(){return t.description},get children(){var te=t0();return y(te,A),c(te,()=>t.description),te}}),B),c(q,T(We,{get when(){return m()},get children(){var te=zq(),oe=te.firstChild;return oe.nextSibling,te.style.setProperty("margin-bottom","0.5rem"),te.style.setProperty("padding","0.5rem"),te.style.setProperty("background-color","var(--primary-color)"),te.style.setProperty("color","white"),te.style.setProperty("border-radius","4px"),te.style.setProperty("font-size","0.875rem"),te.style.setProperty("display","flex"),te.style.setProperty("align-items","center"),te.style.setProperty("gap","0.5rem"),c(te,T(We,{get when(){return P().length>0},get children(){var pe=Vq();return pe.$$click=M,pe.style.setProperty("background","rgba(255,255,255,0.2)"),pe.style.setProperty("border","none"),pe.style.setProperty("color","white"),pe.style.setProperty("border-radius","2px"),pe.style.setProperty("padding","2px 6px"),pe.style.setProperty("cursor","pointer"),pe.style.setProperty("font-size","0.75rem"),pe}}),null),te}}),B),Qn(H,"blur",m()?handleLopValue:w),Qn(H,"keydown",m()?void 0:$,!0),Qn(H,"click",m()?void 0:k,!0),Qn(H,"input",m()?N:C,!0),Y.$$click=R,c(Y,()=>m()?"📱 Scanner":"🔍 Manual"),c(q,T(We,{get when(){return r()},get children(){var te=t0();return c(te,T(We,{get when(){return l()},get children(){var oe=Uq(),pe=oe.firstChild,ne=pe.nextSibling;return y(oe,L),c(ne,()=>e("common.searching","Buscando clientes...")),oe}}),null),c(te,T(We,{get when(){return Ve(()=>!l())()&&u().length>0},get fallback(){return Ve(()=>!l())()&&(()=>{var oe=t0();return y(oe,O),c(oe,(()=>{var pe=Ve(()=>!!i());return()=>pe()?e("customer.noShippersFound","No se encontraron clientes. Puede crear un nuevo cliente llenando el formulario."):e("customer.noShippersAvailable","No se encontraron clientes previos. Se creará un nuevo cliente.")})()),oe})()},get children(){return T(_t,{get each(){return u()},children:(oe,pe)=>(()=>{var ne=Wq(),Q=ne.firstChild,ce=Q.firstChild,ue=ce.firstChild;ue.firstChild;var de=ue.nextSibling;return ne.addEventListener("mouseenter",()=>a(pe())),ne.$$click=()=>D(oe),y(Q,X),y(ce,se),y(ue,U),c(ue,()=>oe.name,null),y(de,E),c(de,T(We,{get when(){return oe.phoneNumberS},get children(){var ge=Hq();return ge.firstChild,c(ge,()=>oe.phoneNumberS,null),ge}})),be(ge=>y(ne,Z(pe()===s()),ge)),ne})()})}}),null),be(oe=>y(te,ee,oe)),te}}),null),be(te=>{var oe=z,pe=K,ne={...I,"padding-right":"80px","border-color":m()?"var(--primary-color)":"var(--border-color)","box-shadow":m()?"0 0 0 3px rgba(108, 92, 231, 0.1)":"none"},Q=m()?"Escanee código de barras del ID del remitente o escriba cédula (11 dígitos)...":t.placeholder||e("customer.searchPlaceholder","Buscar clientes por nombre, teléfono, ID..."),ce=t.disabled,ue=t.required,de=G,ge=m()?"Cambiar a búsqueda manual":"Activar modo escáner";return te.e=y(q,oe,te.e),te.t=y(B,pe,te.t),te.a=y(H,ne,te.a),Q!==te.o&&ir(H,"placeholder",te.o=Q),ce!==te.i&&(H.disabled=te.i=ce),ue!==te.n&&(H.required=te.n=ue),te.s=y(Y,de,te.s),ge!==te.h&&ir(Y,"title",te.h=ge),te},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),be(()=>H.value=_()),q})()},yS={DBA:"expirationDate",DCS:"lastName",DAC:"firstName",DAD:"middleName",DBD:"issueDate",DBB:"dob",DBC:"gender",DAY:"eyesColor",DAU:"height",DAG:"address",DAI:"city",DAJ:"state",DAK:"zipCode",DAQ:"dlNumber",DCF:"documentDiscriminator",DCG:"issueCountry",DAZ:"hairColor",DCI:"placeOfBirth"},Kq={DDE:"Indicator that the last name is truncated",DDF:"Indicator that the first name is truncated",DCD:"Additional privileges granted to the cardholder (e.g., transportation of hazardous material",DDG:"Indicator that the middle name(s) are truncated",DDA:"Compliance Type",DDB:"Card Revision Date",DCA:"Jurisdiction-specific vehicle class",DBA:"Expiry Date",DCS:"lastName",DAC:"firstName",DBD:"issueDate",DBB:"birthDate",DBC:"gender",DAY:"eyeColor",DAU:"height",DAG:"street",DAI:"city",DAJ:"state",DAK:"zipCode",DAQ:"licenseNumber",DCF:"Document Discriminator",DCG:"issueCountry",DAH:"Street 2",DAZ:"hairColor",DCI:"placeOfBirth",DCJ:"Audit information",DCK:"Inventory Control Number",DBN:"Alias / AKA Family Name",DBG:"Alias / AKA Given Name",DBS:"Alias / AKA Suffix Name",DCU:"Name Suffix",DCE:"Physical Description Weight Range",DCL:"Race / Ethnicity",DCM:"Standard vehicle classification",DCN:"Standard endorsement code",DCO:"Standard restriction code",DCP:"Jurisdiction-specific vehicle classification description",DCQ:"Jurisdiction-specific endorsement code description",DCR:"Jurisdiction-specific restriction code description",DDC:"HazMat Endorsement Expiration Date",DDD:"Limited Duration Document Indicator",DAW:"Weight(pounds)",DAX:"Weight(kilograms)",DDH:"Under 18 Until",DDI:"Under 19 Until",DDJ:"Under 21 Until",DDK:"Organ Donor Indicator",DDL:"Veteran Indicator",DAD:"middleName"},Yq=t=>{let e=Object.keys(Kq),r={};return e.forEach((i,o)=>{if(t.indexOf(i)>=0){let s=t.split(i);s.length===2&&(t=s.join("*!*!*"+i))}}),t.split("*!*!*").forEach((i,o)=>{let s,a;o===1?(s="DAQ",a=i.substring(i.indexOf(s)+3)):(s=i.substring(0,3),a=i.substring(3).trim()),Object.keys(yS).includes(s)&&(r[yS[s]]=a)}),r};tr(["click","input","keydown"]);var Xq=le('<div><h3><span>👤</span><span>Información del Cliente</span></h3><div></div><div><div><label>Nombre</label><input type=text placeholder="Nombre completo del cliente"></div><div><label>Fecha de Nacimiento</label><input type=date></div><div><label>ID</label><input type=text placeholder="Número de cédula o ID"></div></div><div><div><label>Dirección</label><input type=text placeholder="Dirección completa"></div></div><div><div><label>Teléfono</label><input type=text placeholder="Número de teléfono">'),Zq=le('<div><h3><span>🚚</span><span>Información del Remitente/Destinatario</span></h3><div></div><div><div><label>Primer Nombre *</label><input type=text placeholder="Primer nombre"required></div><div><label>Segundo Nombre</label><input type=text placeholder="Segundo nombre (opcional)"></div><div><label>Primer Apellido *</label><input type=text placeholder="Primer apellido"required></div></div><div><div><label>Cédula/ID *</label><input type=text placeholder="Número de cédula o ID"required></div><div><label>Pasaporte</label><input type=text placeholder="Número de pasaporte (opcional)"></div></div><div><div><label>Teléfono Principal *</label><input type=tel placeholder="Teléfono principal"required></div><div><label>Teléfono Secundario</label><input type=tel placeholder="Teléfono secundario (opcional)"></div></div><div><div><label>Dirección</label><input type=text placeholder="Dirección completa">');const Jq=t=>{const e={background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius)",padding:"1.5rem","margin-bottom":"1.5rem"},r={"font-size":"1.25rem","font-weight":"bold",color:"var(--text-primary)","margin-bottom":"1rem","padding-bottom":"0.5rem","border-bottom":"2px solid var(--primary-color)",display:"flex","align-items":"center",gap:"0.5rem"},n={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem"},i={display:"grid","grid-template-columns":"1fr",gap:"1rem","margin-bottom":"1rem"},o={display:"grid","grid-template-columns":"1fr 1fr",gap:"1rem",margin:"1rem 0 "},s={width:"100%",padding:"0.75rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"1rem",background:"var(--surface-color)"},a={display:"block","font-size":"0.875rem","font-weight":"500",color:"var(--text-secondary)","margin-bottom":"0.25rem"};return[(()=>{var l=Xq(),d=l.firstChild,u=d.nextSibling,h=u.nextSibling,f=h.firstChild,p=f.firstChild,m=p.nextSibling,x=f.nextSibling,P=x.firstChild,g=P.nextSibling,F=x.nextSibling,V=F.firstChild,N=V.nextSibling,R=h.nextSibling,M=R.firstChild,C=M.firstChild,k=C.nextSibling,D=R.nextSibling,$=D.firstChild,w=$.firstChild,_=w.nextSibling;return c(u,T(Gq,{get value(){return{name:t.shipperConsignee.name,phoneNumberS:t.shipperConsignee.phoneNumberS,idS:t.shipperConsignee.idS,dob:t.shipperConsignee.dob,addressS:t.shipperConsignee.addressS}},onChange:v=>{v&&(console.log({shipper:v}),t.onShipperConsigneeChange({name:v.name||"",phoneNumberS:v.phoneNumberS||"",idS:v.idS||"",dob:v.dob||"",addressS:v.addressS||""}))},placeholder:"Buscar remitente por nombre, cédula, teléfono...",label:"Remitente/Destinatario",description:"Busque y seleccione un remitente existente o ingrese los datos manualmente"})),m.$$input=v=>t.onShipperConsigneeChange({name:v.target.value}),g.$$input=v=>t.onShipperConsigneeChange({dob:v.target.value}),N.$$input=v=>t.onShipperConsigneeChange({idS:v.target.value}),k.$$input=v=>t.onShipperConsigneeChange({addressS:v.target.value}),_.$$input=v=>t.onShipperConsigneeChange({phoneNumberS:v.target.value}),be(v=>{var z=e,W=r,A=i,I=n,ee=a,Z=s,X=a,se=s,U=a,E=s,O={...n,margin:"1rem 0"},L=a,G=s,K={...n,margin:"1rem 0"},q=a,B=s;return v.e=y(l,z,v.e),v.t=y(d,W,v.t),v.a=y(u,A,v.a),v.o=y(h,I,v.o),v.i=y(p,ee,v.i),v.n=y(m,Z,v.n),v.s=y(P,X,v.s),v.h=y(g,se,v.h),v.r=y(V,U,v.r),v.d=y(N,E,v.d),v.l=y(R,O,v.l),v.u=y(C,L,v.u),v.c=y(k,G,v.c),v.w=y(D,K,v.w),v.m=y(w,q,v.m),v.f=y(_,B,v.f),v},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0}),be(()=>m.value=t.shipperConsignee.name),be(()=>g.value=t.shipperConsignee.dob),be(()=>N.value=t.shipperConsignee.idS),be(()=>k.value=t.shipperConsignee.addressS),be(()=>_.value=t.shipperConsignee.phoneNumberS),l})(),(()=>{var l=Zq(),d=l.firstChild,u=d.nextSibling,h=u.nextSibling,f=h.firstChild,p=f.firstChild,m=p.nextSibling,x=f.nextSibling,P=x.firstChild,g=P.nextSibling,F=x.nextSibling,V=F.firstChild,N=V.nextSibling,R=h.nextSibling,M=R.firstChild,C=M.firstChild,k=C.nextSibling,D=M.nextSibling,$=D.firstChild,w=$.nextSibling,_=R.nextSibling,v=_.firstChild,z=v.firstChild,W=z.nextSibling,A=v.nextSibling,I=A.firstChild,ee=I.nextSibling,Z=_.nextSibling,X=Z.firstChild,se=X.firstChild,U=se.nextSibling;return c(u,T(Bq,{get value(){return t.customer},get onChange(){return t.onShipperConsigneeChange},placeholder:"Buscar cliente por nombre, teléfono, ID...",label:"Cliente",description:"Busque y seleccione un cliente existente o ingrese los datos manualmente"})),m.$$input=E=>{const O=E.target.value;t.onShipperConsigneeChange({firstName:O})},g.$$input=E=>{const O=E.target.value;t.onShipperConsigneeChange({middleName:O})},N.$$input=E=>{const O=E.target.value;t.onShipperConsigneeChange({lastName:O})},k.$$input=E=>{const O=E.target.value;t.onShipperConsigneeChange({cid:O})},w.$$input=E=>{const O=E.target.value;t.onShipperConsigneeChange({passport:O})},W.$$input=E=>{const O=E.target.value;t.onShipperConsigneeChange({phoneNumber:O})},ee.$$input=E=>{const O=E.target.value;t.onShipperConsigneeChange({altPhoneNumber:O})},U.$$input=E=>{const O=E.target.value;t.onShipperConsigneeChange({address:O})},be(E=>{var O=e,L=r,G=i,K=n,q=a,B=s,H=a,Y=s,te=a,oe=s,pe=o,ne=a,Q=s,ce=a,ue=s,de=o,ge=a,ye=s,fe=a,Se=s,qe=i,Oe=a,Ie=s;return E.e=y(l,O,E.e),E.t=y(d,L,E.t),E.a=y(u,G,E.a),E.o=y(h,K,E.o),E.i=y(p,q,E.i),E.n=y(m,B,E.n),E.s=y(P,H,E.s),E.h=y(g,Y,E.h),E.r=y(V,te,E.r),E.d=y(N,oe,E.d),E.l=y(R,pe,E.l),E.u=y(C,ne,E.u),E.c=y(k,Q,E.c),E.w=y($,ce,E.w),E.m=y(w,ue,E.m),E.f=y(_,de,E.f),E.y=y(z,ge,E.y),E.g=y(W,ye,E.g),E.p=y(I,fe,E.p),E.b=y(ee,Se,E.b),E.T=y(Z,qe,E.T),E.A=y(se,Oe,E.A),E.O=y(U,Ie,E.O),E},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0}),be(()=>m.value=t.shipperConsignee?.firstName||""),be(()=>g.value=t.shipperConsignee?.middleName||""),be(()=>N.value=t.shipperConsignee?.lastName||""),be(()=>k.value=t.shipperConsignee?.cid||""),be(()=>w.value=t.shipperConsignee?.passport||""),be(()=>W.value=t.shipperConsignee?.phoneNumber||""),be(()=>ee.value=t.shipperConsignee?.altPhoneNumber||""),be(()=>U.value=t.shipperConsignee?.address||""),l})()]};tr(["input"]);var Qq=le('<div><h3><span>📋</span><span>Información Básica de la Factura</span></h3><div><div><label>Número de Factura<span>*</span></label><input type=text placeholder="Ej: INV-2024-001"required><div>Número único de identificación para esta factura</div></div><div><label>Tienda/Sucursal</label><div>Ubicación donde se procesa la factura</div></div><div><label>Número de Guía</label><select required><option value>Seleccionar Número de Guía...</option><option value=2520>2520</option><option value=2521>2521</option><option value=2522>2522</option><option value=2523>2523</option><option value=2524>2524</option><option value=2525>2525</option></select><div>Número de seguimiento o guía de envío</div></div><div><label>Método de Envío<span>*</span></label><select required><option value>Seleccionar método...</option><option value=aereo>🛩️ Aéreo (AEREO)</option><option value=maritimo>🚢 Marítimo (SEA)</option></select><div>Método de transporte para el envío</div></div></div><div><div><label>Descripción</label><textarea placeholder="Descripción detallada de la factura, notas especiales, instrucciones de manejo, etc."></textarea><div>Información adicional sobre la factura o instrucciones especiales</div></div></div><div><div><input type=checkbox id=packages-order-checkbox><label for=packages-order-checkbox>📦 Orden de Paquetes</label></div><div>Marque si esta factura incluye una orden específica de paquetes</div></div><div><div><strong>Información importante:</strong><br>• El número de factura debe ser único<br>• El método de envío afecta los precios de transporte<br>• La descripción se incluirá en la factura impresa<br>• Los campos marcados con <span>*</span> son obligatorios');const eH=t=>{const e={background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius)",padding:"1.5rem","margin-bottom":"1.5rem"},r={"font-size":"1.25rem","font-weight":"bold",color:"var(--text-primary)","margin-bottom":"1rem","padding-bottom":"0.5rem","border-bottom":"2px solid var(--primary-color)",display:"flex","align-items":"center",gap:"0.5rem"},n={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem"},i={display:"grid","grid-template-columns":"1fr",gap:"1rem"},o={display:"grid","grid-template-columns":"1fr 1fr",gap:"1rem"},s={width:"100%",padding:"0.75rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"1rem",background:"var(--surface-color)"},a={display:"block","font-size":"0.875rem","font-weight":"500",color:"var(--text-secondary)","margin-bottom":"0.25rem"},l={display:"flex","align-items":"center",gap:"0.5rem",padding:"0.75rem 0"},d={width:"1rem",height:"1rem"},u={...s,cursor:"pointer"},h={color:"var(--error-color)","margin-left":"0.25rem"},f={"font-size":"0.75rem",color:"var(--text-muted)","margin-top":"0.25rem","font-style":"italic"};return(()=>{var p=Qq(),m=p.firstChild,x=m.nextSibling,P=x.firstChild,g=P.firstChild,F=g.firstChild,V=F.nextSibling,N=g.nextSibling,R=N.nextSibling,M=P.nextSibling,C=M.firstChild,k=C.nextSibling,D=M.nextSibling,$=D.firstChild,w=$.nextSibling,_=w.nextSibling,v=D.nextSibling,z=v.firstChild,W=z.firstChild,A=W.nextSibling,I=z.nextSibling,ee=I.nextSibling,Z=x.nextSibling,X=Z.firstChild,se=X.firstChild,U=se.nextSibling,E=U.nextSibling,O=Z.nextSibling,L=O.firstChild,G=L.firstChild,K=G.nextSibling,q=L.nextSibling,B=O.nextSibling,H=B.firstChild,Y=H.firstChild,te=Y.nextSibling,oe=te.nextSibling,pe=oe.nextSibling,ne=pe.nextSibling,Q=ne.nextSibling,ce=Q.nextSibling,ue=ce.nextSibling,de=ue.nextSibling,ge=de.nextSibling;return y(p,e),y(m,r),y(x,n),N.$$input=ye=>t.onInvoiceChange(ye.target.value),c(M,T(kp,{get value(){return t.store},get onChange(){return t.onStoreChange},placeholder:"Seleccionar tienda...",style:{width:"100%"}}),k),w.addEventListener("change",ye=>t.onGuideChange(ye.target.value)),I.addEventListener("change",ye=>t.onShippingMethodChange(ye.target.value)),y(Z,i),U.$$input=ye=>t.onDescriptionChange(ye.target.value),y(O,o),y(L,l),G.addEventListener("change",ye=>t.onPackagesOrderChange(ye.target.checked)),y(G,d),K.style.setProperty("font-size","0.875rem"),K.style.setProperty("font-weight","500"),K.style.setProperty("color","var(--text-secondary)"),K.style.setProperty("cursor","pointer"),B.style.setProperty("margin-top","1rem"),B.style.setProperty("padding","1rem"),B.style.setProperty("background","var(--strip-color)"),B.style.setProperty("border-radius","var(--border-radius-sm)"),B.style.setProperty("border","1px solid var(--border-color)"),H.style.setProperty("font-size","0.875rem"),H.style.setProperty("color","var(--text-muted)"),H.style.setProperty("line-height","1.4"),ge.style.setProperty("color","var(--error-color)"),be(ye=>{var fe=a,Se=h,qe=s,Oe=f,Ie=a,Be=f,ke=a,Ge=u,et=f,ve=a,De=h,He=u,Je=f,Le=a,Te={...s,"min-height":"100px",resize:"vertical"},he=f,Ne={...f,"margin-top":"0",padding:"0.75rem 0","align-self":"center"};return ye.e=y(g,fe,ye.e),ye.t=y(V,Se,ye.t),ye.a=y(N,qe,ye.a),ye.o=y(R,Oe,ye.o),ye.i=y(C,Ie,ye.i),ye.n=y(k,Be,ye.n),ye.s=y($,ke,ye.s),ye.h=y(w,Ge,ye.h),ye.r=y(_,et,ye.r),ye.d=y(z,ve,ye.d),ye.l=y(A,De,ye.l),ye.u=y(I,He,ye.u),ye.c=y(ee,Je,ye.c),ye.w=y(se,Le,ye.w),ye.m=y(U,Te,ye.m),ye.f=y(E,he,ye.f),ye.y=y(q,Ne,ye.y),ye},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0}),be(()=>N.value=t.invoice),be(()=>w.value=t.guide),be(()=>I.value=t.shippingMethod),be(()=>U.value=t.description),be(()=>G.checked=t.packagesOrder),p})()};tr(["input"]);var tH=le('<div><h3><span>💳</span><span>Métodos de Pago</span></h3><div><div>Total de la Factura</div><div>$</div></div><div><div><label>💵 Efectivo</label><button type=button title="Auto-completar balance">AUTO</button><div>Pago en efectivo</div></div><div><label>📱 Zelle</label><button type=button title="Auto-completar balance">AUTO</button><div>Transferencia Zelle</div></div><div><label>💳 Tarjeta de Crédito</label><button type=button title="Auto-completar balance">AUTO</button><div>Pago con tarjeta</div></div><div><label>📊 Impuesto (%)</label><input type=number min=0 max=100 step=0.1 placeholder=0.0><div>Porcentaje de impuesto aplicable</div></div></div><div><div><input type=checkbox id=tax-on-total-checkbox><label for=tax-on-total-checkbox>📊 Impuesto sobre el total de la factura</label></div><div><input type=checkbox id=exempt-cash-tax-checkbox><label for=exempt-cash-tax-checkbox>💵 Exento de impuesto en efectivo</label></div></div><div><div><span>Subtotal de Pagos:</span><span>$</span></div><div><span>Base Gravable: (Zelle, credit card)</span><span>$</span></div><div><span>Impuesto (<!>%):</span><span>$</span></div><div><span>Total con Impuesto:</span><span>$</span></div><div><span>Balance Pendiente:</span><span></span></div></div><div><div><strong>Desglose de Pagos:</strong><br>• Efectivo: $<br>• Zelle: $<br>• Tarjeta: $<br>• Use los botones "AUTO" para completar automáticamente el balance restante');const rH=t=>{const e=zt(()=>{const g=t.paymentMethods?.cash+t.paymentMethods?.zelle+t.paymentMethods?.creditCard;console.log(g);let F=g;t.paymentMethods?.exemptTaxOnCash&&(F=t.invoiceTotal-t.paymentMethods?.cash);const V=t.paymentMethods.taxOnTotal?t.invoiceTotal*t.paymentMethods?.taxPercent/100:F*t.paymentMethods?.taxPercent/100,N=t.invoiceTotal+V,R=N-g;return{subtotal:g,taxableAmount:F,taxAmount:V,totalWithTax:N,balance:R,isFullyPaid:Math.round(R)<.01}}),r=g=>{const F=t.paymentMethods?.cash+t.paymentMethods?.zelle+t.paymentMethods?.creditCard,V=t.invoiceTotal-F;V>0&&t.onPaymentMethodsChange({[g]:t.paymentMethods[g]+V})},n={background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius)",padding:"1.5rem","margin-bottom":"1.5rem"},i={"font-size":"1.25rem","font-weight":"bold",color:"var(--text-primary)","margin-bottom":"1rem","padding-bottom":"0.5rem","border-bottom":"2px solid var(--primary-color)",display:"flex","align-items":"center",gap:"0.5rem"},o={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},s={display:"grid","grid-template-columns":"1fr 1fr",gap:"1rem"},a={width:"100%",padding:"0.75rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"1rem",background:"var(--surface-color)"},l={display:"block","font-size":"0.875rem","font-weight":"500",color:"var(--text-secondary)","margin-bottom":"0.25rem"},d={display:"flex","align-items":"center",gap:"0.5rem",padding:"0.5rem 0"},u={width:"1rem",height:"1rem"},h=g=>({"margin-top":"1.5rem",padding:"1rem",background:g===0?"var(--success-background)":g<-.01?"var(--warning-background)":"var(--error-background)",border:`1px solid ${g===0?"var(--success-color)":g<-.01?"var(--warning-color)":"var(--error-color)"}`,"border-radius":"var(--border-radius-sm)"}),f={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.5rem","font-size":"0.875rem"},p={...f,"font-weight":"bold","font-size":"1rem","padding-top":"0.5rem","border-top":"1px solid var(--border-color)"},m={position:"relative"},x={position:"absolute",right:"8px",top:"28px",background:"var(--primary-color)",color:"white",border:"none","border-radius":"4px",padding:"4px 8px",cursor:"pointer","font-size":"0.75rem","z-index":"10",opacity:"0.8",transition:"opacity 0.2s ease"},P={"font-size":"0.75rem",color:"var(--text-muted)","margin-top":"0.25rem","font-style":"italic"};return(()=>{var g=tH(),F=g.firstChild,V=F.nextSibling,N=V.firstChild,R=N.nextSibling;R.firstChild;var M=V.nextSibling,C=M.firstChild,k=C.firstChild,D=k.nextSibling,$=D.nextSibling,w=C.nextSibling,_=w.firstChild,v=_.nextSibling,z=v.nextSibling,W=w.nextSibling,A=W.firstChild,I=A.nextSibling,ee=I.nextSibling,Z=W.nextSibling,X=Z.firstChild,se=X.nextSibling,U=se.nextSibling,E=M.nextSibling,O=E.firstChild,L=O.firstChild,G=L.nextSibling,K=O.nextSibling,q=K.firstChild,B=q.nextSibling,H=E.nextSibling,Y=H.firstChild,te=Y.firstChild,oe=te.nextSibling;oe.firstChild;var pe=Y.nextSibling,ne=pe.firstChild,Q=ne.nextSibling;Q.firstChild;var ce=pe.nextSibling,ue=ce.firstChild,de=ue.firstChild,ge=de.nextSibling;ge.nextSibling;var ye=ue.nextSibling;ye.firstChild;var fe=ce.nextSibling,Se=fe.firstChild,qe=Se.nextSibling;qe.firstChild;var Oe=fe.nextSibling,Ie=Oe.firstChild,Be=Ie.nextSibling,ke=H.nextSibling,Ge=ke.firstChild,et=Ge.firstChild,ve=et.nextSibling,De=ve.nextSibling,He=De.nextSibling,Je=He.nextSibling,Le=Je.nextSibling,Te=Le.nextSibling,he=Te.nextSibling;return y(g,n),y(F,i),V.style.setProperty("padding","1rem"),V.style.setProperty("background","var(--primary-color)"),V.style.setProperty("color","white"),V.style.setProperty("border-radius","var(--border-radius-sm)"),V.style.setProperty("margin-bottom","1rem"),V.style.setProperty("text-align","center"),N.style.setProperty("font-size","0.875rem"),N.style.setProperty("opacity","0.9"),R.style.setProperty("font-size","1.5rem"),R.style.setProperty("font-weight","bold"),c(R,()=>t.invoiceTotal.toFixed(),null),y(M,o),c(C,T(Ot,{type:"number",get style(){return{...a,"padding-right":"50px"}},get value(){return t.paymentMethods.cash.toString()},min:"0",step:"0.01",onChange:Ne=>t.onPaymentMethodsChange({cash:parseFloat(Ne)||0}),placeholder:"0.00"}),D),D.$$click=()=>r("cash"),c(w,T(Ot,{type:"number",get style(){return{...a,"padding-right":"50px"}},get value(){return t.paymentMethods.zelle.toString()},min:"0",step:"0.01",onChange:Ne=>t.onPaymentMethodsChange({zelle:parseFloat(Ne)||0}),placeholder:"0.00"}),v),v.$$click=()=>r("zelle"),c(W,T(Ot,{type:"number",get style(){return{...a,"padding-right":"50px"}},get value(){return t.paymentMethods.creditCard.toString()},min:"0",step:"0.01",onChange:Ne=>t.onPaymentMethodsChange({creditCard:parseFloat(Ne)||0}),placeholder:"0.00"}),I),I.$$click=()=>r("creditCard"),se.$$input=Ne=>t.onPaymentMethodsChange({taxPercent:Number(Ne.target.value)||0}),y(E,s),L.addEventListener("change",Ne=>t.onPaymentMethodsChange({taxOnTotal:Ne.target.checked})),G.style.setProperty("font-size","0.875rem"),G.style.setProperty("font-weight","500"),G.style.setProperty("color","var(--text-secondary)"),G.style.setProperty("cursor","pointer"),q.addEventListener("change",Ne=>t.onPaymentMethodsChange({exemptTaxOnCash:Ne.target.checked})),B.style.setProperty("font-size","0.875rem"),B.style.setProperty("font-weight","500"),B.style.setProperty("color","var(--text-secondary)"),B.style.setProperty("cursor","pointer"),c(oe,()=>e().subtotal.toFixed(1),null),c(Q,()=>e().taxableAmount.toFixed(1),null),c(ue,()=>t.paymentMethods.taxPercent,ge),c(ye,()=>e().taxAmount.toFixed(1),null),c(qe,()=>e().totalWithTax.toFixed(1),null),c(Be,T(We,{get when(){return Math.round(e().balance)<-.01},get children(){return["$",Ve(()=>e().balance.toFixed())," "," (SOBREPAGO)"]}}),null),c(Be,T(We,{get when(){return Math.round(e().balance)===0},children:" (PAGADO)"}),null),c(Be,T(We,{get when(){return Math.round(e().balance)>.01},get children(){return["$",Ve(()=>e().balance.toFixed())," "," (PENDIENTE)"]}}),null),ke.style.setProperty("margin-top","1rem"),ke.style.setProperty("padding","1rem"),ke.style.setProperty("background","var(--strip-color)"),ke.style.setProperty("border-radius","var(--border-radius-sm)"),ke.style.setProperty("border","1px solid var(--border-color)"),Ge.style.setProperty("font-size","0.875rem"),Ge.style.setProperty("color","var(--text-muted)"),Ge.style.setProperty("line-height","1.4"),c(Ge,()=>t.paymentMethods?.cash?.toFixed(2),He),c(Ge,()=>t.paymentMethods?.zelle?.toFixed(2),Le),c(Ge,()=>t.paymentMethods?.creditCard?.toFixed(2),he),be(Ne=>{var rt=m,re=l,Ue=x,we=P,xe=m,je=l,$e=x,ft=P,ct=m,yt=l,$t=x,bt=P,Gt=l,Wt=a,Dt=P,Kt=d,gt=u,St=d,Qe=u,vt=h(Math.round(e().balance)),Ft=f,Pt=f,kt=f,Yt=f,nr=p,cr=Math.round(e().balance)===0?"var(--success-color)":Math.round(e().balance)<.01?"var(--warning-color)":"var(--error-color)";return Ne.e=y(C,rt,Ne.e),Ne.t=y(k,re,Ne.t),Ne.a=y(D,Ue,Ne.a),Ne.o=y($,we,Ne.o),Ne.i=y(w,xe,Ne.i),Ne.n=y(_,je,Ne.n),Ne.s=y(v,$e,Ne.s),Ne.h=y(z,ft,Ne.h),Ne.r=y(W,ct,Ne.r),Ne.d=y(A,yt,Ne.d),Ne.l=y(I,$t,Ne.l),Ne.u=y(ee,bt,Ne.u),Ne.c=y(X,Gt,Ne.c),Ne.w=y(se,Wt,Ne.w),Ne.m=y(U,Dt,Ne.m),Ne.f=y(O,Kt,Ne.f),Ne.y=y(L,gt,Ne.y),Ne.g=y(K,St,Ne.g),Ne.p=y(q,Qe,Ne.p),Ne.b=y(H,vt,Ne.b),Ne.T=y(Y,Ft,Ne.T),Ne.A=y(pe,Pt,Ne.A),Ne.O=y(ce,kt,Ne.O),Ne.I=y(fe,Yt,Ne.I),Ne.S=y(Oe,nr,Ne.S),cr!==Ne.W&&((Ne.W=cr)!=null?Be.style.setProperty("color",cr):Be.style.removeProperty("color")),Ne},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0,S:void 0,W:void 0}),be(()=>se.value=t.paymentMethods.taxPercent),be(()=>L.checked=t.paymentMethods.taxOnTotal),be(()=>q.checked=t.paymentMethods.exemptTaxOnCash||!1),g})()};tr(["click","input"]);var nH=le("<button type=button>"),iH=le("<div><div><h1>Nueva Factura</h1><p>Sistema de facturación con gestión de bultos</p></div><div><h3>Resumen de la Factura</h3><div><span> 📦 Total de Productos:</span><span>$</span></div><div><span>📋 Total de Reservas:</span><span>$</span></div><div><span>🔧 Total de Servicios:</span><span>$</span></div><div><span>🚚 Costo de Transporte:</span><span>$</span></div><div><span>Total General:</span><span>$</span></div></div><div><button type=button>Limpiar Form</button><button type=button>Guardar Borrador"),oH=le("<div><h3>¡Factura Creada Exitosamente!</h3><p>La factura ha sido guardada correctamente en el sistema."),sH=le("<div><strong>Error:</strong> "),aH=le("<details><summary>Debug Info (Development Only)</summary><pre>");const lH=()=>{const[t,e]=Ae(null),[r,n]=Ae(!1),[i,o]=Ae(""),[s,a]=Ae(!1),l=Kr.formData,d=zt(()=>{const B=l(),H=B.products.reduce((fe,Se)=>fe+Se.qty*Se.salePrice,0),Y=B.reservas.reduce((fe,Se)=>fe+(Se.qty*Se.price+Se.arancel),0),te=B.services.reduce((fe,Se)=>fe+Se.qty*Se.arancel,0),oe=B.bulks.reduce((fe,Se)=>fe+(Se?.transportCost||20),0),pe=Math.round(H)+Math.round(Y)+Math.round(te)+Math.round(oe),ne=B.paymentMethods.cash+B.paymentMethods.zelle+B.paymentMethods.creditCard;let Q=ne;B.paymentMethods.exemptTaxOnCash&&(Q=pe-B.paymentMethods.cash);const ce=B.paymentMethods.taxOnTotal?pe*B.paymentMethods.taxPercent/100:Q*B.paymentMethods.taxPercent/100,ue=pe+ce,de=ue-ne,ge=pe*B.paymentMethods.taxPercent/100-ce;return{itemsTotal:pe,transportTotal:oe,grandTotal:pe,productsTotal:H,reservasTotal:Y,servicesTotal:te,balance:de,totalWithTax:ue,taxAmount:ce,saveOnExemptTaxOnCash:ge}});Ei(()=>{if(!l().invoice){const B=`${y5(7)}-${y5(8)}`;Kr.updateForm({invoice:B})}}),Ei(()=>{const B=l();B.reservas.forEach((H,Y)=>{let te={};if(H.autoCalculate!==!1&&H.type){const Q=v1(H.type,H.bulkId||"",B.reservas,H.qty),ce=b1(H.category||Ip(H.type),H.qty);Math.abs(H.price-Q)>.001&&(te.price=Q),Math.abs(H.arancel-ce)>.001&&(te.arancel=ce)}const oe=te.price!==void 0?te.price:H.price,pe=te.arancel!==void 0?te.arancel:H.arancel,ne=(oe+pe)*H.qty;Math.abs(H.total-ne)>.001&&(te.total=ne),Object.keys(te).length>0&&Kr.updateReserva(Y,te)})});const u=async()=>{if(!Kr.isValid()){o("Por favor complete todos los campos requeridos");return}n(!0),o(""),a(!1);try{let B=d();if(!l().invoice.trim())throw new Error("Numero de factura es requerido");if(!l().shipper_consignee.name.trim())throw new Error("Nombre del cliente es requerido");if(l().products.length===0&&l().reservas.length===0&&l().services.length===0)throw new Error("Al menos un producto, reserva o servicio es requerido");B.grandTotal>.01;const H={...l(),type:"SALES",ssg_inventory_key:`INVOICE-${Date.now()}`,ssg_sorder_key:`SO-${Date.now()}`,createDate:l().createDate||Date.now(),businessId:"YB100423253156428",isCompleted:!0,productSubtotal:B.productsTotal,reservaSubtotal:B.reservasTotal,serviceSubtotal:B.servicesTotal,subtotalBeforeTax:B.itemsTotal,transportTotal:B.transportTotal,taxAmount:B.taxAmount,taxSavings:B.saveOnExemptTaxOnCash,total:B.totalWithTax,shippingMethod:l().shippingMethod,taxCalculationMethod:l()?.paymentMethods.taxOnTotal?"total":"subtotal",cashPaymentRatio:B.balance>0?l().paymentMethods.cash/B.balance:0,paymentMethods:l().paymentMethods};console.log("createInvoice",JSON.stringify(H,null,4));const Y=await Ki.addInventory(H);Ki.addInvoice(Y),Kr.clearForm(),e(null),a(!0)}catch(B){console.error("Error submitting invoice:",B),o("Error al guardar la factura. Por favor intente nuevamente.")}finally{n(!1)}},h=()=>{Kr.hasData()&&confirm("¿Está seguro que desea limpiar el formulario? Se perderán todos los datos no guardados.")&&(Kr.clearForm(),e(null),o(""),a(!1))},f=B=>{Kr.addBulk(B)},p=(B,H)=>{Kr.updateBulk(B,H),Kr.updateBulk(B,{token:So()})},m=B=>{const H=l().bulks[B];if(H&&confirm(`¿Está seguro que desea eliminar el bulto "${H.name}"? Esto también eliminará todos los items asignados al bulto.`)){const te=l().reservas.filter(ne=>ne.bulkId!==H.id),oe=l().products.filter(ne=>ne.bulkId!==H.id),pe=l().services.filter(ne=>ne.bulkId!==H.id);Kr.updateForm({reservas:te,products:oe,services:pe}),Kr.removeBulk(B)}},x=B=>{Kr.addReserva(B)},P=(B,H)=>{Kr.updateReserva(B,H)},g=B=>{Kr.removeReserva(B)},F=B=>{Kr.addProduct(B)},V=(B,H)=>{Kr.updateProduct(B,H)},N=B=>{Kr.removeProduct(B)},R=B=>{Kr.addService(B)},M=(B,H)=>{Kr.updateService(B,H)},C=B=>{Kr.removeService(B)},k=B=>{Kr.updateShipperConsignee(B)},D=B=>{Kr.updatePaymentMethods(B)},$=B=>{Kr.updateForm({invoice:B})},w=B=>{Kr.updateForm({description:B})},_=B=>{Kr.updateForm({store:B})},v=B=>{Kr.updateForm({guide:B})},z=B=>{Kr.updateForm({packagesOrder:B})},W=B=>{Kr.updateForm({shippingMethod:B})},A={"max-width":"1200px",margin:"0 auto",padding:"2rem","font-family":"system-ui, sans-serif"},I={"text-align":"center","margin-bottom":"2rem",padding:"1rem",background:"var(--primary-color)",color:"white","border-radius":"var(--border-radius)",position:"relative"},ee={"font-size":"2rem","font-weight":"bold","margin-bottom":"0.5rem"},Z={"font-size":"1rem",opacity:"0.9",color:"white"};Kr.isDirty;const X={background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius)",padding:"1.5rem","margin-bottom":"2rem","text-align":"center"},se={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.5rem","font-size":"1rem"},U={...se,"font-size":"1.25rem","font-weight":"bold","padding-top":"0.5rem","border-top":"2px solid var(--primary-color)",color:"var(--primary-color)"},E={display:"flex",gap:"1rem","justify-content":"center","margin-top":"2rem","flex-wrap":"wrap"},O={padding:"0.75rem 1.5rem","border-radius":"var(--border-radius-sm)","font-size":"1rem","font-weight":"500",cursor:"pointer",border:"none",transition:"all 0.2s ease","min-width":"120px"},L={...O,background:"var(--primary-color)",color:"white"},G={...O,background:"var(--border-color)",color:"var(--text-primary)"},K={background:"var(--error-background)",color:"var(--error-color)",padding:"1rem","border-radius":"var(--border-radius-sm)","margin-bottom":"1rem",border:"1px solid var(--error-color)"},q={background:"var(--success-background)",color:"var(--success-color)",padding:"1rem","border-radius":"var(--border-radius-sm)","margin-bottom":"1rem",border:"1px solid var(--success-color)","text-align":"center"};return(()=>{var B=iH(),H=B.firstChild,Y=H.firstChild,te=Y.firstChild,oe=Y.nextSibling,pe=H.nextSibling,ne=pe.firstChild,Q=ne.firstChild,ce=ne.nextSibling,ue=ce.firstChild,de=ue.nextSibling;de.firstChild;var ge=ce.nextSibling,ye=ge.firstChild,fe=ye.nextSibling;fe.firstChild;var Se=ge.nextSibling,qe=Se.firstChild,Oe=qe.nextSibling;Oe.firstChild;var Ie=Se.nextSibling,Be=Ie.firstChild,ke=Be.nextSibling;ke.firstChild;var Ge=Ie.nextSibling,et=Ge.firstChild,ve=et.firstChild,De=et.nextSibling;De.firstChild;var He=pe.nextSibling,Je=He.firstChild,Le=Je.firstChild,Te=Je.nextSibling,he=Te.firstChild;return y(B,A),y(Y,ee),c(Y,T(Gr,{name:"invoice",size:"1.2em",style:{"margin-right":"0.5rem"}}),te),y(oe,Z),c(B,(()=>{var Ne=Ve(()=>!!s());return()=>Ne()&&(()=>{var rt=oH(),re=rt.firstChild,Ue=re.firstChild,we=re.nextSibling;return re.style.setProperty("margin","0 0 0.5rem 0"),c(re,T(Gr,{name:"success",size:"1.2em",style:{"margin-right":"0.5rem"}}),Ue),we.style.setProperty("margin","0"),be(xe=>y(rt,q,xe)),rt})()})(),pe),c(B,(()=>{var Ne=Ve(()=>!!i());return()=>Ne()&&(()=>{var rt=sH(),re=rt.firstChild,Ue=re.firstChild;return re.nextSibling,y(rt,K),c(re,T(Gr,{name:"error",size:"1em",style:{"margin-right":"0.3rem"}}),Ue),c(rt,i,null),rt})()})(),pe),c(B,T(eH,{get invoice(){return l().invoice},get description(){return l().description},get store(){return l().store},get guide(){return l().guide||""},get packagesOrder(){return l().packagesOrder},get shippingMethod(){return l().shippingMethod},onInvoiceChange:$,onDescriptionChange:w,onStoreChange:_,onGuideChange:v,onPackagesOrderChange:z,onShippingMethodChange:W}),pe),c(B,T(Jq,{get customer(){return t()},get shipperConsignee(){return l().shipper_consignee},onShipperConsigneeChange:k}),pe),c(B,T(Tq,{get bulks(){return l().bulks},get products(){return l().products},get reservas(){return l().reservas},get services(){return l().services},get shippingMethod(){return l().shippingMethod},onAddBulk:f,onUpdateBulk:p,onRemoveBulk:m,onAddReserva:x,onUpdateReserva:P,onRemoveReserva:g,onAddProduct:F,onUpdateProduct:V,onRemoveProduct:N,onAddService:R,onUpdateService:M,onRemoveService:C}),pe),ne.style.setProperty("margin","0 0 1rem 0"),ne.style.setProperty("color","var(--text-primary)"),c(ne,T(Gr,{name:"accounts",size:"1em",style:{"margin-right":"0.5rem"}}),Q),c(de,()=>d().productsTotal.toFixed(1),null),c(fe,()=>d().reservasTotal.toFixed(1),null),c(Oe,()=>d().servicesTotal.toFixed(1),null),c(ke,()=>d().transportTotal.toFixed(1),null),c(et,T(Gr,{name:"finance",size:"1em",style:{"margin-right":"0.3rem"}}),ve),c(De,()=>d().grandTotal.toFixed(1),null),c(B,T(rH,{get paymentMethods(){return l().paymentMethods},onPaymentMethodsChange:D,get invoiceTotal(){return d().grandTotal}}),He),Je.$$click=h,c(Je,T(Gr,{name:"delete",size:"1em",style:{"margin-right":"0.5rem"}}),Le),Te.$$click=()=>Kr.forceSave(),c(Te,T(Gr,{name:"save",size:"1em",style:{"margin-right":"0.5rem"}}),he),c(He,T(We,{get when(){return Kr.isValid()},get children(){var Ne=nH();return Ne.$$click=u,c(Ne,(()=>{var rt=Ve(()=>!!r());return()=>rt()?[T(Gr,{name:"loading",size:"1em",style:{"margin-right":"0.5rem"}}),"Procesando..."]:[T(Gr,{name:"check",size:"1em",style:{"margin-right":"0.5rem"}}),"Crear Factura"]})()),be(rt=>{var re=L,Ue=r()||!Kr.isValid();return rt.e=y(Ne,re,rt.e),Ue!==rt.t&&(Ne.disabled=rt.t=Ue),rt},{e:void 0,t:void 0}),Ne}}),null),c(B,(()=>{var Ne=Ve(()=>!1);return()=>Ne()&&(()=>{var rt=aH(),re=rt.firstChild,Ue=re.firstChild,we=re.nextSibling;return rt.style.setProperty("margin-top","2rem"),rt.style.setProperty("font-size","0.875rem"),c(re,T(Gr,{name:"search",size:"0.9em",style:{"margin-right":"0.3rem"}}),Ue),we.style.setProperty("background","#f5f5f5"),we.style.setProperty("padding","1rem"),we.style.setProperty("border-radius","4px"),we.style.setProperty("overflow","auto"),we.style.setProperty("max-height","300px"),c(we,()=>JSON.stringify({formValid:Kr.isValid(),hasData:Kr.hasData(),isDirty:Kr.isDirty,bulksCount:l().bulks.length,itemsCount:{products:l().products.length,reservas:l().reservas.length,services:l().services.length},totals:d()},null,2)),rt})()})(),null),be(Ne=>{var rt=I,re=X,Ue=se,we=se,xe=se,je=se,$e=U,ft=E,ct=G,yt=r(),$t=L,bt=r();return Ne.e=y(H,rt,Ne.e),Ne.t=y(pe,re,Ne.t),Ne.a=y(ce,Ue,Ne.a),Ne.o=y(ge,we,Ne.o),Ne.i=y(Se,xe,Ne.i),Ne.n=y(Ie,je,Ne.n),Ne.s=y(Ge,$e,Ne.s),Ne.h=y(He,ft,Ne.h),Ne.r=y(Je,ct,Ne.r),yt!==Ne.d&&(Je.disabled=Ne.d=yt),Ne.l=y(Te,$t,Ne.l),bt!==Ne.u&&(Te.disabled=Ne.u=bt),Ne},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),B})()};tr(["click"]);var cH=le("<div><div><label></label><select><option value=all></option></select></div><div><label></label><input type=date></div><div><label></label><input type=date></div><div><label></label><select><option value=all></option><option value=cash></option><option value=zelle></option><option value=other></option></select></div><div><label></label><select><option value=all></option><option value=SEA></option><option value=AEREO>"),dH=le("<div><div><strong>:</strong> </div><div><strong>:</strong> <!> <!> </div><div><strong>:</strong> </div><div><strong>:</strong> "),uH=le("<div><div><strong>:</strong> </div><div><strong>:</strong> </div><div><strong>:</strong> </div><div><strong>:</strong> "),hH=le("<div><div><strong>:</strong> </div><div><strong>:</strong> </div><div><strong>:</strong> "),mS=le("<div>"),gS=le("<div><table><thead><tr><th></th><th></th><th></th><th></th></tr></thead><tbody>"),pH=le("<div><table><thead><tr><th>Tipo de Bulto</th><th>Cantidad</th><th>Items Totales</th><th>Valor Total</th><th>Valor Promedio</th></tr></thead><tbody><tr><td><strong>Total de Bultos:</strong></td><td></td><td></td><td></td><td>-"),fH=le("<div><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td colspan=4><strong>:</strong></td><td>"),yH=le("<div><div><div></div><div></div></div><div><div></div><div></div></div><div><div></div><div></div></div><div><div></div><div>"),mH=le("<div><div>"),gH=le("<div><div><div><h3></h3><button>×</button></div><div><div>: <strong></strong></div><div>: <strong></strong></div><div>: <strong></strong></div></div><div><div>:</div><div></div></div><div>"),vH=le("<div><div class=print-only><h1></h1><div></div><div>: </div></div><div class=no-print><h1></h1><div>"),bH=le("<option>"),PH=le("<tr><td></td><td></td><td></td><td>"),xH=le("<tr><td></td><td></td><td><div></div></td><td>"),SH=le("<div><span> → <!> lbs</span><button>📋 <!> invoice"),wH=le("<tr><td><div><span></span></div></td><td></td><td></td><td></td><td>"),CH=le("<tr><td><div></div></td><td>");const _H=t=>{const{t:e}=Gu(),[r,n]=Ae(!1),[i,o]=Ae(""),[s,a]=Ae(""),[l,d]=Ae("all"),[u,h]=Ae("all"),[f,p]=Ae("all"),[m,x]=Ae("all"),[P,g]=Ae(null),[F,V]=Ae([]),[N,R]=Ae(!1),[M,C]=Ae(null);Kn(async()=>{await D()});const k=()=>At.getActiveLocations(),D=async()=>{n(!0);try{let W=l()!=="all"?l():void 0;const A={store:W,dateFrom:i()||void 0,dateTo:s()||void 0};W&&(await $o.fetchInvoices(A),$())}catch(W){console.error("Error loading report data:",W)}finally{n(!1)}},$=()=>{let W=$o.getFilteredInvoices({store:l(),dateFrom:i(),dateTo:s()});m()!=="all"&&(W=W.filter(q=>q.shippingType===m()||!q.shippingType&&m()==="SEA")),V(W);let A=0,I=0,ee=0,Z=new Map,X=new Map,se=new Map,U=0,E=0,O=0;W.forEach(q=>{const B=MH(q),H=parseFloat(B.total);q.paymentMethods?(q?.paymentMethods?.cash&&(A+=q?.paymentMethods?.cash),q?.paymentMethods?.zelle&&(I+=q?.paymentMethods?.zelle),O+=q?.taxAmount):q.hasTax&&q?.TaxPercent?(I+=H,O+=q?.TaxPercent/100*H):A+=H,q.products?.forEach(Y=>{const te=Y.product.label,oe=Math.abs(Y.qty),pe=parseFloat(D3(Y));let ne=te;if(Y?.bulkId&&q?.bulks){const Q=q?.bulks.find(ce=>ce?.id===Y?.bulkId);Q&&(ne=`${te} (${Q?.name})`)}if(Z.has(ne)){const Q=Z.get(ne);Z.set(ne,{qty:Q.qty+oe,total:Q.total+pe})}else Z.set(ne,{qty:oe,total:pe})}),q.reservas?.forEach(Y=>{const te=Y.type,oe=parseFloat(Y.qty)||0,pe=parseFloat(Y.price)||0,ne=parseFloat(Y.arancel)||0,Q=pe*oe;let ce=te,ue=te;if(Y?.bulkId&&q?.bulks){const ge=q?.bulks.find(ye=>ye?.id===Y?.bulkId);ge&&(ce=`${te}`,ue=ge?.name)}const de=ce;if(X.has(de)){const ge=X.get(de);X.set(de,{qty:parseFloat((ge.qty+oe).toFixed(2)),price:ge.price,total:parseFloat((ge.total+Q).toFixed(2)),priceGroups:ge.priceGroups});const ye=ge.priceGroups.get(pe)||{qty:0,invoices:[]};ye.qty+=oe;let fe=`${te}-${ue}`;ye.invoices.includes(fe)||ye.invoices.push(fe),ge.priceGroups.set(pe,ye)}else{const ge=new Map;ge.set(pe,{qty:oe,invoices:[q.invoice]}),X.set(de,{qty:oe,price:pe,arancel:ne,total:Q,priceGroups:ge})}E+=ne}),q.services?.forEach(Y=>{const te=Y.type,oe=parseFloat(Y.qty)||0,pe=parseFloat(Y.arancel)||0,ne=oe*pe;let Q=te;if(Y.bulkId&&q.bulks){const ce=q.bulks.find(ue=>ue?.id===Y?.bulkId);ce&&(Q=`${te} (${ce?.name})`)}if(se.has(Q)){const ce=se.get(Q);se.set(Q,{qty:ce.qty+oe,arancel:ce.arancel+pe,total:ce.total+ne})}else se.set(Q,{qty:oe,arancel:pe,total:ne})})});let L=new Map;W.forEach(q=>{q.bulks&&q.bulks.length>0&&q.bulks.forEach(B=>{const H=q.products?.filter(Q=>Q.bulkId===B?.id)||[],Y=q.reservas?.filter(Q=>Q.bulkId===B?.id)||[],te=q.services?.filter(Q=>Q.bulkId===B?.id)||[],oe=[...H.map(Q=>Math.abs(Q.qty)*parseFloat(Q.salePrice||0)),...Y.map(Q=>parseFloat(Q.qty||0)*parseFloat(Q.price||0)),...te.map(Q=>parseFloat(Q.qty||0)*parseFloat(Q.arancel||0))].reduce((Q,ce)=>Q+ce,0);U+=B?.transportCost||20;const pe=H.length+Y.length+te.length,ne=`${B?.type} - ${B?.shippingMethod?.toLowerCase()==="aereo"?"Aéreo":"Marítimo"}`;if(L.has(ne)){const Q=L.get(ne);L.set(ne,{count:Q.count+1,totalValue:Q.totalValue+oe,avgValue:(Q.totalValue+oe)/(Q.count+1),items:Q.items+pe,shippingMethod:B?.shippingMethod})}else L.set(ne,{count:1,totalValue:oe,avgValue:oe,items:pe,shippingMethod:B?.shippingMethod})})});const G=A+I+ee,K={dateRange:{from:i(),to:s()},store:l(),shippingType:m(),totalInvoices:W.length,paymentMethods:{cash:A,zelle:I,other:ee,total:A+I+ee},productsByType:Z,reservasByTypeAndPrice:X,otherServicesByType:se,bulkStatistics:L,transportTotal:U,arancelesTotal:E,taxTotal:O,grandTotal:G+O};g(K)},w=W=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(W),_=()=>{v(),setTimeout(()=>{},100)},v=async()=>{try{const W=z();if(W){R(!0);const{generateInvoiceResumePDF:A}=await Qo(async()=>{const{generateInvoiceResumePDF:ee}=await import("./invoiceResumePdfGenerator-CY7l9cls.js");return{generateInvoiceResumePDF:ee}},[]),I=`invoice-resume-report-${new Date().toISOString().split("T")[0]}.pdf`;await A(W,e,I),console.log(`PDF generated successfully: ${I}`)}}catch(W){console.error("Error generating PDF:",W),alert(e("invoiceReport.pdfGenerationFailed")),_()}finally{R(!1)}},z=zt(()=>P());return(()=>{var W=vH(),A=W.firstChild,I=A.firstChild,ee=I.nextSibling,Z=ee.nextSibling,X=Z.firstChild,se=A.nextSibling,U=se.firstChild,E=U.nextSibling;return W.style.setProperty("padding","2rem"),W.style.setProperty("max-width","1200px"),W.style.setProperty("margin","0 auto"),A.style.setProperty("text-align","center"),A.style.setProperty("margin-bottom","2rem"),A.style.setProperty("border-bottom","2px solid #333"),A.style.setProperty("padding-bottom","1rem"),c(I,()=>e("invoiceReport.title")),ee.style.setProperty("font-size","12pt"),ee.style.setProperty("margin-top","0.5rem"),ee.style.setProperty("color","#666"),c(ee,T(We,{get when(){return Ve(()=>!!z()?.dateRange?.from)()&&z()?.dateRange?.to},get children(){return[Ve(()=>e("invoiceReport.reportPeriod")),": ",Ve(()=>z()?.dateRange?.from)," to ",Ve(()=>z()?.dateRange?.to)]}}),null),c(ee,T(We,{get when(){return!z()?.dateRange?.from||!z()?.dateRange?.to},get children(){return e("invoiceReport.allTimeReport")}}),null),Z.style.setProperty("font-size","10pt"),Z.style.setProperty("margin-top","0.5rem"),c(Z,()=>e("invoiceReport.generatedOn"),X),c(Z,()=>new Date().toLocaleDateString(),null),se.style.setProperty("display","flex"),se.style.setProperty("justify-content","space-between"),se.style.setProperty("align-items","center"),se.style.setProperty("margin-bottom","2rem"),U.style.setProperty("font-size","1.75rem"),U.style.setProperty("font-weight","bold"),c(U,()=>e("invoiceReport.title")),E.style.setProperty("display","flex"),E.style.setProperty("gap","1rem"),c(E,T(mt,{variant:"outline",onClick:_,get children(){return e("invoiceReport.print")}}),null),c(E,T(mt,{variant:"outline",onClick:v,get disabled(){return N()},get children(){return Ve(()=>!!N())()?e("invoiceReport.generating"):e("invoiceReport.exportPdf")}}),null),c(E,T(We,{get when(){return t.onClose},get children(){return T(mt,{variant:"secondary",get onClick(){return t.onClose},get children(){return e("invoiceReport.close")}})}}),null),c(W,T(Vt,{get title(){return e("invoiceReport.filters")},style:{"margin-bottom":"2rem"},class:"no-print",get children(){var O=cH(),L=O.firstChild,G=L.firstChild,K=G.nextSibling,q=K.firstChild,B=L.nextSibling,H=B.firstChild,Y=H.nextSibling,te=B.nextSibling,oe=te.firstChild,pe=oe.nextSibling,ne=te.nextSibling,Q=ne.firstChild,ce=Q.nextSibling,ue=ce.firstChild,de=ue.nextSibling,ge=de.nextSibling,ye=ge.nextSibling,fe=ne.nextSibling,Se=fe.firstChild,qe=Se.nextSibling,Oe=qe.firstChild,Ie=Oe.nextSibling,Be=Ie.nextSibling;return O.style.setProperty("display","grid"),O.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(200px, 1fr))"),O.style.setProperty("gap","1rem"),O.style.setProperty("align-items","end"),G.style.setProperty("display","block"),G.style.setProperty("margin-bottom","0.5rem"),G.style.setProperty("font-weight","500"),c(G,()=>e("invoiceReport.storeLocation")),K.addEventListener("change",ke=>d(ke.currentTarget.value)),K.style.setProperty("width","100%"),K.style.setProperty("padding","0.75rem"),K.style.setProperty("border","1px solid var(--border-color)"),K.style.setProperty("border-radius","var(--border-radius-sm)"),c(q,()=>e("invoiceReport.allStores")),c(K,T(_t,{get each(){return k()},children:ke=>(()=>{var Ge=bH();return c(Ge,()=>ke.name),be(()=>Ge.value=ke.id),Ge})()}),null),H.style.setProperty("display","block"),H.style.setProperty("margin-bottom","0.5rem"),H.style.setProperty("font-weight","500"),c(H,()=>e("invoiceReport.fromDate")),Y.addEventListener("change",ke=>o(ke.currentTarget.value)),Y.style.setProperty("width","100%"),Y.style.setProperty("padding","0.75rem"),Y.style.setProperty("border","1px solid var(--border-color)"),Y.style.setProperty("border-radius","var(--border-radius-sm)"),oe.style.setProperty("display","block"),oe.style.setProperty("margin-bottom","0.5rem"),oe.style.setProperty("font-weight","500"),c(oe,()=>e("invoiceReport.toDate")),pe.addEventListener("change",ke=>a(ke.currentTarget.value)),pe.style.setProperty("width","100%"),pe.style.setProperty("padding","0.75rem"),pe.style.setProperty("border","1px solid var(--border-color)"),pe.style.setProperty("border-radius","var(--border-radius-sm)"),Q.style.setProperty("display","block"),Q.style.setProperty("margin-bottom","0.5rem"),Q.style.setProperty("font-weight","500"),c(Q,()=>e("invoiceReport.paymentMethod")),ce.addEventListener("change",ke=>p(ke.currentTarget.value)),ce.style.setProperty("width","100%"),ce.style.setProperty("padding","0.75rem"),ce.style.setProperty("border","1px solid var(--border-color)"),ce.style.setProperty("border-radius","var(--border-radius-sm)"),c(ue,()=>e("invoiceReport.allMethodsOption")),c(de,()=>e("invoiceReport.cashOption")),c(ge,()=>e("invoiceReport.zelleOption")),c(ye,()=>e("invoiceReport.otherOption")),Se.style.setProperty("display","block"),Se.style.setProperty("margin-bottom","0.5rem"),Se.style.setProperty("font-weight","500"),c(Se,()=>e("invoiceReport.shippingType")),qe.addEventListener("change",ke=>x(ke.currentTarget.value)),qe.style.setProperty("width","100%"),qe.style.setProperty("padding","0.75rem"),qe.style.setProperty("border","1px solid var(--border-color)"),qe.style.setProperty("border-radius","var(--border-radius-sm)"),c(Oe,()=>e("invoiceReport.allTypesOption")),c(Ie,()=>e("invoiceReport.seaOption")),c(Be,()=>e("invoiceReport.airOption")),c(O,T(We,{get when(){return l()!=="all"},get children(){return T(mt,{variant:"primary",onClick:D,get disabled(){return Ve(()=>l()==="all")()&&r()},get children(){return Ve(()=>!!r())()?e("invoiceReport.loading"):e("invoiceReport.generateReport")}})}}),null),be(()=>K.value=l()),be(()=>Y.value=i()),be(()=>pe.value=s()),be(()=>ce.value=f()),be(()=>qe.value=m()),O}}),null),c(W,T(We,{get when(){return Ve(()=>!!(l()!=="all"&&z()))()&&!r()},get children(){return[(()=>{var O=mS();return O.style.setProperty("display","grid"),O.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(250px, 1fr))"),O.style.setProperty("gap","1.5rem"),O.style.setProperty("margin-bottom","2rem"),c(O,T(Vt,{get title(){return e("invoiceReport.invoiceSummary")},get children(){var L=dH(),G=L.firstChild,K=G.firstChild,q=K.firstChild;K.nextSibling;var B=G.nextSibling,H=B.firstChild,Y=H.firstChild,te=H.nextSibling,oe=te.nextSibling,pe=oe.nextSibling,ne=pe.nextSibling;ne.nextSibling;var Q=B.nextSibling,ce=Q.firstChild,ue=ce.firstChild;ce.nextSibling;var de=Q.nextSibling,ge=de.firstChild,ye=ge.firstChild;return ge.nextSibling,L.style.setProperty("padding","1rem"),G.style.setProperty("margin-bottom","0.5rem"),c(K,()=>e("invoiceReport.totalInvoices"),q),c(G,()=>z().totalInvoices,null),B.style.setProperty("margin-bottom","0.5rem"),c(H,()=>e("invoiceReport.dateRange"),Y),c(B,()=>z().dateRange.from||e("common.all"),oe),c(B,()=>e("common.to"),ne),c(B,()=>z().dateRange.to||e("common.all"),null),Q.style.setProperty("margin-bottom","0.5rem"),c(ce,()=>e("invoiceReport.store"),ue),c(Q,(()=>{var fe=Ve(()=>z().store==="all");return()=>fe()?e("invoiceReport.allStores"):z().store})(),null),c(ge,()=>e("invoiceReport.shippingTypeLabel"),ye),c(de,(()=>{var fe=Ve(()=>z().shippingType==="all");return()=>fe()?e("invoiceReport.allTypes"):Ve(()=>z().shippingType==="SEA")()?e("invoiceReport.maritime"):Ve(()=>z().shippingType==="AEREO")()?e("invoiceReport.air"):e("invoiceReport.notSet")})(),null),L}}),null),c(O,T(Vt,{get title(){return e("invoiceReport.paymentMethods")},get children(){var L=uH(),G=L.firstChild,K=G.firstChild,q=K.firstChild;K.nextSibling;var B=G.nextSibling,H=B.firstChild,Y=H.firstChild;H.nextSibling;var te=B.nextSibling,oe=te.firstChild,pe=oe.firstChild;oe.nextSibling;var ne=te.nextSibling,Q=ne.firstChild,ce=Q.firstChild;return Q.nextSibling,L.style.setProperty("padding","1rem"),G.style.setProperty("margin-bottom","0.5rem"),c(K,()=>e("invoiceReport.cash"),q),c(G,()=>w(z().paymentMethods.cash),null),B.style.setProperty("margin-bottom","0.5rem"),c(H,()=>e("invoiceReport.zelle"),Y),c(B,()=>w(z().paymentMethods.zelle),null),te.style.setProperty("margin-bottom","0.5rem"),c(oe,()=>e("invoiceReport.other"),pe),c(te,()=>w(z().paymentMethods.other),null),ne.style.setProperty("border-top","1px solid var(--border-color)"),ne.style.setProperty("padding-top","0.5rem"),ne.style.setProperty("font-weight","bold"),c(Q,()=>e("invoiceReport.total"),ce),c(ne,()=>w(z().paymentMethods.total),null),L}}),null),c(O,T(Vt,{get title(){return e("invoiceReport.additionalCharges")},get children(){var L=hH(),G=L.firstChild,K=G.firstChild,q=K.firstChild;K.nextSibling;var B=G.nextSibling,H=B.firstChild,Y=H.firstChild;H.nextSibling;var te=B.nextSibling,oe=te.firstChild,pe=oe.firstChild;return oe.nextSibling,L.style.setProperty("padding","1rem"),G.style.setProperty("margin-bottom","0.5rem"),c(K,()=>e("invoiceReport.transport"),q),c(G,()=>w(z().transportTotal),null),B.style.setProperty("margin-bottom","0.5rem"),c(H,()=>e("invoiceReport.aranceles"),Y),c(B,()=>w(z().arancelesTotal),null),te.style.setProperty("margin-bottom","0.5rem"),c(oe,()=>e("invoiceReport.tax"),pe),c(te,()=>w(z().taxTotal),null),L}}),null),O})(),T(We,{get when(){return z().productsByType?.size>0},get children(){return T(Vt,{get title(){return e("invoiceReport.productsSummary")},style:{"margin-bottom":"2rem"},get children(){var O=gS(),L=O.firstChild,G=L.firstChild,K=G.firstChild,q=K.firstChild,B=q.nextSibling,H=B.nextSibling,Y=H.nextSibling,te=G.nextSibling;return O.style.setProperty("overflow-x","auto"),L.style.setProperty("width","100%"),L.style.setProperty("border-collapse","collapse"),K.style.setProperty("background","var(--background-color)"),q.style.setProperty("padding","1rem"),q.style.setProperty("text-align","left"),q.style.setProperty("border-bottom","2px solid var(--border-color)"),c(q,()=>e("invoiceReport.productType")),B.style.setProperty("padding","1rem"),B.style.setProperty("text-align","right"),B.style.setProperty("border-bottom","2px solid var(--border-color)"),c(B,()=>e("invoiceReport.quantity")),H.style.setProperty("padding","1rem"),H.style.setProperty("text-align","right"),H.style.setProperty("border-bottom","2px solid var(--border-color)"),c(H,()=>e("invoiceReport.totalValue")),Y.style.setProperty("padding","1rem"),Y.style.setProperty("text-align","right"),Y.style.setProperty("border-bottom","2px solid var(--border-color)"),c(Y,()=>e("invoiceReport.avgPrice")),c(te,T(_t,{get each(){return Array.from(z().productsByType.entries()).sort((oe,pe)=>pe[1].total-oe[1].total)},children:([oe,pe])=>(()=>{var ne=PH(),Q=ne.firstChild,ce=Q.nextSibling,ue=ce.nextSibling,de=ue.nextSibling;return Q.style.setProperty("padding","0.75rem"),Q.style.setProperty("border-bottom","1px solid var(--border-color)"),c(Q,oe),ce.style.setProperty("padding","0.75rem"),ce.style.setProperty("text-align","right"),ce.style.setProperty("border-bottom","1px solid var(--border-color)"),c(ce,()=>pe.qty),ue.style.setProperty("padding","0.75rem"),ue.style.setProperty("text-align","right"),ue.style.setProperty("border-bottom","1px solid var(--border-color)"),ue.style.setProperty("font-weight","600"),c(ue,()=>w(pe.total)),de.style.setProperty("padding","0.75rem"),de.style.setProperty("text-align","right"),de.style.setProperty("border-bottom","1px solid var(--border-color)"),c(de,()=>w(pe.total/pe.qty)),ne})()})),O}})}}),T(We,{get when(){return z().reservasByTypeAndPrice?.size>0},get children(){return T(Vt,{get title(){return e("invoiceReport.reservasSummary")},style:{"margin-bottom":"2rem"},get children(){var O=gS(),L=O.firstChild,G=L.firstChild,K=G.firstChild,q=K.firstChild,B=q.nextSibling,H=B.nextSibling,Y=H.nextSibling,te=G.nextSibling;return O.style.setProperty("overflow-x","auto"),L.style.setProperty("width","100%"),L.style.setProperty("border-collapse","collapse"),K.style.setProperty("background","var(--background-color)"),q.style.setProperty("padding","1rem"),q.style.setProperty("text-align","left"),q.style.setProperty("border-bottom","2px solid var(--border-color)"),c(q,()=>e("invoiceReport.reservaType")),B.style.setProperty("padding","1rem"),B.style.setProperty("text-align","right"),B.style.setProperty("border-bottom","2px solid var(--border-color)"),c(B,()=>e("invoiceReport.totalQtyLbs")),H.style.setProperty("padding","1rem"),H.style.setProperty("text-align","left"),H.style.setProperty("border-bottom","2px solid var(--border-color)"),c(H,()=>e("invoiceReport.priceGroups")),Y.style.setProperty("padding","1rem"),Y.style.setProperty("text-align","right"),Y.style.setProperty("border-bottom","2px solid var(--border-color)"),c(Y,()=>e("invoiceReport.total")),c(te,T(_t,{get each(){return Array.from(z().reservasByTypeAndPrice.entries()).sort((oe,pe)=>pe[1].total-oe[1].total)},children:([oe,pe])=>(()=>{var ne=xH(),Q=ne.firstChild,ce=Q.nextSibling,ue=ce.nextSibling,de=ue.firstChild,ge=ue.nextSibling;return Q.style.setProperty("padding","0.75rem"),Q.style.setProperty("border-bottom","1px solid var(--border-color)"),c(Q,oe),ce.style.setProperty("padding","0.75rem"),ce.style.setProperty("text-align","right"),ce.style.setProperty("border-bottom","1px solid var(--border-color)"),ce.style.setProperty("font-weight","600"),c(ce,()=>pe.qty?.toFixed(2)),ue.style.setProperty("padding","0.75rem"),ue.style.setProperty("border-bottom","1px solid var(--border-color)"),de.style.setProperty("font-size","0.875rem"),c(de,T(_t,{get each(){return Array.from(pe.priceGroups.entries()).sort((ye,fe)=>ye[0]-fe[0])},children:([ye,fe])=>(()=>{var Se=SH(),qe=Se.firstChild,Oe=qe.firstChild,Ie=Oe.nextSibling;Ie.nextSibling;var Be=qe.nextSibling,ke=Be.firstChild,Ge=ke.nextSibling;return Ge.nextSibling,Se.style.setProperty("margin-bottom","0.5rem"),Se.style.setProperty("display","flex"),Se.style.setProperty("align-items","center"),Se.style.setProperty("gap","0.5rem"),c(qe,()=>w(ye),Oe),c(qe,()=>fe.qty?.toFixed(2),Ie),Be.addEventListener("mouseleave",et=>et.currentTarget.style.background="#3498db"),Be.addEventListener("mouseenter",et=>et.currentTarget.style.background="#2980b9"),Be.$$click=()=>C({price:ye,invoices:fe.invoices,type:oe}),Be.style.setProperty("background","#3498db"),Be.style.setProperty("color","white"),Be.style.setProperty("border","none"),Be.style.setProperty("border-radius","4px"),Be.style.setProperty("padding","0.25rem 0.5rem"),Be.style.setProperty("font-size","0.75rem"),Be.style.setProperty("cursor","pointer"),Be.style.setProperty("transition","background 0.2s"),c(Be,()=>fe.invoices.length,Ge),c(Be,()=>fe.invoices.length>1?"s":"",null),Se})()})),ge.style.setProperty("padding","0.75rem"),ge.style.setProperty("text-align","right"),ge.style.setProperty("border-bottom","1px solid var(--border-color)"),ge.style.setProperty("font-weight","600"),c(ge,()=>w(pe.total)),ne})()})),O}})}}),T(We,{get when(){return z().bulkStatistics?.size>0},get children(){return T(Vt,{title:"📦 Resumen de Bultos",style:{"margin-bottom":"2rem"},get children(){var O=pH(),L=O.firstChild,G=L.firstChild,K=G.firstChild,q=K.firstChild,B=q.nextSibling,H=B.nextSibling,Y=H.nextSibling,te=Y.nextSibling,oe=G.nextSibling,pe=oe.firstChild,ne=pe.firstChild,Q=ne.nextSibling,ce=Q.nextSibling,ue=ce.nextSibling,de=ue.nextSibling;return O.style.setProperty("overflow-x","auto"),L.style.setProperty("width","100%"),L.style.setProperty("border-collapse","collapse"),K.style.setProperty("background","var(--background-color)"),q.style.setProperty("padding","1rem"),q.style.setProperty("text-align","left"),q.style.setProperty("border-bottom","2px solid var(--border-color)"),B.style.setProperty("padding","1rem"),B.style.setProperty("text-align","center"),B.style.setProperty("border-bottom","2px solid var(--border-color)"),H.style.setProperty("padding","1rem"),H.style.setProperty("text-align","center"),H.style.setProperty("border-bottom","2px solid var(--border-color)"),Y.style.setProperty("padding","1rem"),Y.style.setProperty("text-align","right"),Y.style.setProperty("border-bottom","2px solid var(--border-color)"),te.style.setProperty("padding","1rem"),te.style.setProperty("text-align","right"),te.style.setProperty("border-bottom","2px solid var(--border-color)"),c(oe,T(_t,{get each(){return Array.from(z().bulkStatistics.entries()).sort((ge,ye)=>ye[1].totalValue-ge[1].totalValue)},children:([ge,ye])=>(()=>{var fe=wH(),Se=fe.firstChild,qe=Se.firstChild,Oe=qe.firstChild,Ie=Se.nextSibling,Be=Ie.nextSibling,ke=Be.nextSibling,Ge=ke.nextSibling;return Se.style.setProperty("padding","0.75rem"),Se.style.setProperty("border-bottom","1px solid var(--border-color)"),qe.style.setProperty("display","flex"),qe.style.setProperty("align-items","center"),qe.style.setProperty("gap","0.5rem"),c(Oe,()=>ye.shippingMethod==="aereo"?"✈️":"🚢"),c(qe,ge,null),Ie.style.setProperty("padding","0.75rem"),Ie.style.setProperty("text-align","center"),Ie.style.setProperty("border-bottom","1px solid var(--border-color)"),Ie.style.setProperty("font-weight","600"),c(Ie,()=>ye.count),Be.style.setProperty("padding","0.75rem"),Be.style.setProperty("text-align","center"),Be.style.setProperty("border-bottom","1px solid var(--border-color)"),c(Be,()=>ye.items),ke.style.setProperty("padding","0.75rem"),ke.style.setProperty("text-align","right"),ke.style.setProperty("border-bottom","1px solid var(--border-color)"),ke.style.setProperty("font-weight","600"),c(ke,()=>w(ye.totalValue)),Ge.style.setProperty("padding","0.75rem"),Ge.style.setProperty("text-align","right"),Ge.style.setProperty("border-bottom","1px solid var(--border-color)"),c(Ge,()=>w(ye.avgValue)),fe})()}),pe),pe.style.setProperty("background","var(--strip-color)"),pe.style.setProperty("font-weight","bold"),ne.style.setProperty("padding","0.75rem"),ne.style.setProperty("border-top","2px solid var(--border-color)"),Q.style.setProperty("padding","0.75rem"),Q.style.setProperty("text-align","center"),Q.style.setProperty("border-top","2px solid var(--border-color)"),Q.style.setProperty("font-weight","700"),c(Q,()=>Array.from(z().bulkStatistics.values()).reduce((ge,ye)=>ge+ye.count,0)),ce.style.setProperty("padding","0.75rem"),ce.style.setProperty("text-align","center"),ce.style.setProperty("border-top","2px solid var(--border-color)"),ce.style.setProperty("font-weight","700"),c(ce,()=>Array.from(z().bulkStatistics.values()).reduce((ge,ye)=>ge+ye.items,0)),ue.style.setProperty("padding","0.75rem"),ue.style.setProperty("text-align","right"),ue.style.setProperty("border-top","2px solid var(--border-color)"),ue.style.setProperty("font-weight","700"),c(ue,()=>w(Array.from(z().bulkStatistics.values()).reduce((ge,ye)=>ge+ye.totalValue,0))),de.style.setProperty("padding","0.75rem"),de.style.setProperty("text-align","right"),de.style.setProperty("border-top","2px solid var(--border-color)"),O}})}}),T(We,{get when(){return z().otherServicesByType?.size>0},get children(){return T(Vt,{get title(){return e("invoiceReport.otherServicesTitle")},style:{"margin-bottom":"2rem"},get children(){var O=fH(),L=O.firstChild,G=L.firstChild,K=G.firstChild,q=K.firstChild,B=q.nextSibling,H=G.nextSibling,Y=H.firstChild,te=Y.firstChild,oe=te.firstChild,pe=oe.firstChild,ne=te.nextSibling;return O.style.setProperty("overflow-x","auto"),L.style.setProperty("width","100%"),L.style.setProperty("border-collapse","collapse"),K.style.setProperty("background","var(--background-color)"),q.style.setProperty("padding","1rem"),q.style.setProperty("text-align","left"),q.style.setProperty("border-bottom","2px solid var(--border-color)"),c(q,()=>e("invoiceReport.serviceType")),B.style.setProperty("padding","1rem"),B.style.setProperty("text-align","right"),B.style.setProperty("border-bottom","2px solid var(--border-color)"),c(B,()=>e("invoiceReport.total")),c(H,T(_t,{get each(){return Array.from(z().otherServicesByType.entries()).sort((Q,ce)=>ce[1].total-Q[1].total)},children:([Q,ce])=>(()=>{var ue=CH(),de=ue.firstChild,ge=de.firstChild,ye=de.nextSibling;return de.style.setProperty("padding","0.75rem"),de.style.setProperty("border-bottom","1px solid var(--border-color)"),ge.style.setProperty("display","flex"),ge.style.setProperty("align-items","center"),ge.style.setProperty("gap","0.5rem"),c(ge,Q),ye.style.setProperty("padding","0.75rem"),ye.style.setProperty("text-align","right"),ye.style.setProperty("border-bottom","1px solid var(--border-color)"),ye.style.setProperty("font-weight","600"),c(ye,()=>w(ce.total)),ue})()}),Y),Y.style.setProperty("background","var(--strip-color)"),Y.style.setProperty("font-weight","bold"),te.style.setProperty("padding","0.75rem"),te.style.setProperty("text-align","right"),te.style.setProperty("border-top","2px solid var(--border-color)"),c(oe,()=>e("invoiceReport.totalOtherServices"),pe),ne.style.setProperty("padding","0.75rem"),ne.style.setProperty("text-align","right"),ne.style.setProperty("border-top","2px solid var(--border-color)"),ne.style.setProperty("font-weight","700"),c(ne,()=>w(z().transportTotal)),O}})}}),T(Vt,{get title(){return e("invoiceReport.totalSummary")},get children(){var O=yH(),L=O.firstChild,G=L.firstChild,K=G.nextSibling,q=L.nextSibling,B=q.firstChild,H=B.nextSibling,Y=q.nextSibling,te=Y.firstChild,oe=te.nextSibling,pe=Y.nextSibling,ne=pe.firstChild,Q=ne.nextSibling;return O.style.setProperty("display","grid"),O.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(200px, 1fr))"),O.style.setProperty("gap","2rem"),O.style.setProperty("padding","2rem"),L.style.setProperty("text-align","center"),G.style.setProperty("font-size","0.875rem"),G.style.setProperty("color","var(--text-secondary)"),G.style.setProperty("margin-bottom","0.5rem"),c(G,()=>e("invoiceReport.productsTotal")),K.style.setProperty("font-size","1.5rem"),K.style.setProperty("font-weight","bold"),K.style.setProperty("color","var(--primary-color)"),c(K,()=>w(Array.from(z().productsByType.values()).reduce((ce,ue)=>ce+ue.total,0))),q.style.setProperty("text-align","center"),B.style.setProperty("font-size","0.875rem"),B.style.setProperty("color","var(--text-secondary)"),B.style.setProperty("margin-bottom","0.5rem"),c(B,()=>e("invoiceReport.reservasTotal")),H.style.setProperty("font-size","1.5rem"),H.style.setProperty("font-weight","bold"),H.style.setProperty("color","var(--primary-color)"),c(H,()=>w(Array.from(z().reservasByTypeAndPrice.values()).reduce((ce,ue)=>ce+ue.total,0))),Y.style.setProperty("text-align","center"),te.style.setProperty("font-size","0.875rem"),te.style.setProperty("color","var(--text-secondary)"),te.style.setProperty("margin-bottom","0.5rem"),c(te,()=>e("invoiceReport.transportServices")),oe.style.setProperty("font-size","1.5rem"),oe.style.setProperty("font-weight","bold"),oe.style.setProperty("color","var(--primary-color)"),c(oe,()=>w(z().transportTotal)),pe.style.setProperty("text-align","center"),pe.style.setProperty("border-left","2px solid var(--primary-color)"),pe.style.setProperty("padding-left","2rem"),ne.style.setProperty("font-size","0.875rem"),ne.style.setProperty("color","var(--text-secondary)"),ne.style.setProperty("margin-bottom","0.5rem"),c(ne,()=>e("invoiceReport.grandTotal")),Q.style.setProperty("font-size","2rem"),Q.style.setProperty("font-weight","bold"),Q.style.setProperty("color","var(--primary-color)"),c(Q,()=>w(z().paymentMethods.total)),O}})]}}),null),c(W,T(We,{get when(){return r()},get children(){var O=mH(),L=O.firstChild;return O.style.setProperty("text-align","center"),O.style.setProperty("padding","3rem"),L.style.setProperty("font-size","1.25rem"),L.style.setProperty("margin-bottom","1rem"),c(L,()=>e("invoiceReport.generatingReport")),O}}),null),c(W,T(We,{get when(){return M()},get children(){var O=gH(),L=O.firstChild,G=L.firstChild,K=G.firstChild,q=K.nextSibling,B=G.nextSibling,H=B.firstChild,Y=H.firstChild,te=Y.nextSibling,oe=H.nextSibling,pe=oe.firstChild,ne=pe.nextSibling,Q=oe.nextSibling,ce=Q.firstChild,ue=ce.nextSibling,de=B.nextSibling,ge=de.firstChild,ye=ge.firstChild,fe=ge.nextSibling,Se=de.nextSibling;return O.$$click=()=>C(null),O.style.setProperty("position","fixed"),O.style.setProperty("top","0"),O.style.setProperty("left","0"),O.style.setProperty("right","0"),O.style.setProperty("bottom","0"),O.style.setProperty("background","rgba(0, 0, 0, 0.5)"),O.style.setProperty("display","flex"),O.style.setProperty("align-items","center"),O.style.setProperty("justify-content","center"),O.style.setProperty("z-index","1000"),L.$$click=qe=>qe.stopPropagation(),L.style.setProperty("background","white"),L.style.setProperty("padding","2rem"),L.style.setProperty("border-radius","var(--border-radius)"),L.style.setProperty("max-width","600px"),L.style.setProperty("max-height","80vh"),L.style.setProperty("overflow-y","auto"),L.style.setProperty("box-shadow","var(--shadow-lg)"),G.style.setProperty("display","flex"),G.style.setProperty("justify-content","space-between"),G.style.setProperty("align-items","center"),G.style.setProperty("margin-bottom","1.5rem"),K.style.setProperty("font-size","1.25rem"),K.style.setProperty("font-weight","bold"),c(K,()=>e("invoiceReport.invoiceReferences")),q.$$click=()=>C(null),q.style.setProperty("background","none"),q.style.setProperty("border","none"),q.style.setProperty("font-size","1.5rem"),q.style.setProperty("cursor","pointer"),q.style.setProperty("color","#666"),B.style.setProperty("margin-bottom","1rem"),H.style.setProperty("font-size","0.875rem"),H.style.setProperty("color","var(--text-secondary)"),c(H,()=>e("invoiceReport.type"),Y),c(te,()=>M().type),oe.style.setProperty("font-size","0.875rem"),oe.style.setProperty("color","var(--text-secondary)"),c(oe,()=>e("invoiceReport.pricePerPound"),pe),c(ne,()=>w(M().price)),Q.style.setProperty("font-size","0.875rem"),Q.style.setProperty("color","var(--text-secondary)"),c(Q,()=>e("invoiceReport.totalInvoicesCount"),ce),c(ue,()=>M().invoices.length),de.style.setProperty("border","1px solid var(--border-color)"),de.style.setProperty("border-radius","var(--border-radius-sm)"),de.style.setProperty("padding","1rem"),de.style.setProperty("background","var(--background-color)"),ge.style.setProperty("font-weight","600"),ge.style.setProperty("margin-bottom","0.75rem"),c(ge,()=>e("invoiceReport.invoiceNumbers"),ye),fe.style.setProperty("display","grid"),fe.style.setProperty("grid-template-columns","repeat(auto-fill, minmax(120px, 1fr))"),fe.style.setProperty("gap","0.5rem"),c(fe,T(_t,{get each(){return M().invoices},children:qe=>(()=>{var Oe=mS();return Oe.$$click=()=>{const Ie=F().find(Be=>Be.invoice===qe);Ie&&console.log("Invoice details:",Ie)},Oe.addEventListener("mouseleave",Ie=>{Ie.currentTarget.style.background="white",Ie.currentTarget.style.borderColor="var(--border-color)"}),Oe.addEventListener("mouseenter",Ie=>{Ie.currentTarget.style.background="#e3f2fd",Ie.currentTarget.style.borderColor="#2196f3"}),Oe.style.setProperty("padding","0.5rem"),Oe.style.setProperty("background","white"),Oe.style.setProperty("border","1px solid var(--border-color)"),Oe.style.setProperty("border-radius","var(--border-radius-sm)"),Oe.style.setProperty("font-family","monospace"),Oe.style.setProperty("font-size","0.875rem"),Oe.style.setProperty("text-align","center"),Oe.style.setProperty("transition","all 0.2s"),Oe.style.setProperty("cursor","pointer"),c(Oe,qe),Oe})()})),Se.style.setProperty("margin-top","1.5rem"),Se.style.setProperty("display","flex"),Se.style.setProperty("justify-content","flex-end"),Se.style.setProperty("gap","1rem"),c(Se,T(mt,{variant:"outline",onClick:()=>{const qe=M().invoices.join(", ");navigator.clipboard.writeText(qe).then(()=>{alert(e("invoiceReport.invoiceNumbersCopied"))})},get children(){return e("invoiceReport.copyInvoiceNumbers")}}),null),c(Se,T(mt,{variant:"primary",onClick:()=>C(null),get children(){return e("invoiceReport.close")}}),null),O}}),null),W})()};tr(["click"]);var AH=le("<div><div>"),kH=le("<div>⚠️ "),EH=le("<div><div><label></label><select><option value=all></option></select></div><div><label></label><input type=date></div><div><label></label><input type=date></div><div><label></label><input type=text>"),TH=le("<div><button></button><button></button><button>➕ Crear Nueva Factura</button><button>📊 Resume Report"),Kc=le("<div>"),IH=le("<div><table><thead><tr><th></th><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody>"),NH=le("<button>← "),RH=le("<option>"),DH=le("<div><div></div><div></div><div></div><div>"),vS=le("<div><span></span><span> "),LH=le("<div><span></span><span> $"),$H=le("<tr><td></td><td></td><td></td><td></td><td></td><td><span></span></td><td><button>");const Ry=t=>parseFloat(t?.toString())||0,FH=t=>{let e=Ry(t.qty),r=Ry(t.price),n=Ry(t.arancel);return`${(e*r+n)?.toFixed(2)}`},D3=t=>{let e=Math.abs(t.qty),r=Ry(t.salePrice);return`${(e*r)?.toFixed(2)}`},MH=t=>{let e=0;t?.reservas?.forEach(i=>{e+=parseFloat(FH(i))});let r=0;t?.products?.forEach(i=>{r+=parseFloat(D3(i))});let n={};return n.reservaSubtotal=e.toFixed(2),n.productSubtotal=r.toFixed(2),n.subtotalBeforeTax=(r+e).toFixed(2),n.total=n.subtotalBeforeTax,n},OH=t=>{const{t:e}=pr(),[r,n]=Ae(!1),[i,o]=Ae("all"),[s,a]=Ae(""),[l,d]=Ae(""),[u,h]=Ae(null),[f,p]=Ae(null),[m,x]=Ae("dashboard"),[P,g]=Ae([]),[F,V]=Ae(""),[N,R]=Ae("overview");Kn(async()=>{try{t.invoices;try{const te=await $o.fetchStores();let oe=Array.isArray(te)?te:Object.keys(te)||[]}catch{const oe=$o.state.invoices||t.invoices,pe=[...new Set(oe.map(ne=>ne.store))];g(pe.sort())}}catch(te){console.error("Error loading dashboard data:",te)}}),zt(()=>$o.state.invoices||t.invoices);const M=zt(()=>{let te;return t.invoices?te=$o.getFilteredInvoices({store:i(),dateFrom:s(),dateTo:l()}):te=$o.getFilteredInvoices({store:i(),dateFrom:s(),dateTo:l()}),te}),C=async()=>{try{t.invoices,n(!0),await $o.refreshData({store:i()!=="all"?i():void 0,dateFrom:s()||void 0,dateTo:l()||void 0,search:F()}),n(!1)}catch(te){console.error("Error refreshing data:",te)}},k=zt(()=>{r();const te=M(),oe=$o.calculateSummary(te);let pe=new Map,ne=new Map,Q=new Map;return te.forEach(ce=>{ce?.products?.length>0&&ce?.products?.forEach(ue=>{const de=Math.abs(ue.qty),ge=ue.product.label;pe.set(ge,(pe.get(ge)||0)+de)}),ce?.reservas?.length>0&&ce?.reservas?.forEach(ue=>{let de=parseInt(ue.qty);isNaN(de)&&(de=0),{TRANSPORTACION:1,"OTROS SERVICIO":1,OTROS:1,"SERVICIO DE RAPEADO":1,CAJAS:1}[ue.type]||ue?.onlyTariff?(de=parseFloat(ue.arancel)||parseFloat(ue.qty)*parseFloat(ue.price),Q.set(ue.type,(ne.get(ue.type)||0)+de)):ne.set(ue.type,(ne.get(ue.type)||0)+de)})}),{...oe,productsByCategory:pe,reservasByType:ne,othersByType:Q}}),D=te=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(te),$=te=>new Date(te).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),w={padding:"2rem"},_={display:"flex",gap:"1rem","align-items":"flex-end","margin-bottom":"2rem","flex-wrap":"wrap",padding:"1.5rem",background:"var(--surface-color)","border-radius":"var(--border-radius)","box-shadow":"var(--shadow-sm)"},v={display:"flex","flex-direction":"column",gap:"0.5rem",flex:"1","min-width":"200px"},z={"font-size":"0.875rem","font-weight":"500",color:"var(--text-secondary)"},W={padding:"0.75rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)","font-size":"1rem",background:"var(--background-color)"},A={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(280px, 1fr))",gap:"1.5rem","margin-bottom":"2rem"},I={padding:"1.5rem",background:"var(--surface-color)","border-radius":"var(--border-radius)","box-shadow":"var(--shadow-sm)",border:"1px solid var(--border-color)"},ee={width:"48px",height:"48px","border-radius":"12px",display:"flex","align-items":"center","justify-content":"center","font-size":"1.5rem","margin-bottom":"1rem"},Z={"font-size":"0.875rem",color:"var(--text-secondary)","margin-bottom":"0.5rem"},X={"font-size":"1.75rem","font-weight":"700",color:"var(--text-primary)","margin-bottom":"0.25rem"},se={"font-size":"0.75rem",color:"var(--text-muted)"},U={width:"100%",background:"var(--surface-color)","border-radius":"var(--border-radius)","box-shadow":"var(--shadow-sm)",overflow:"hidden"},E={padding:"1rem","text-align":"left",background:"var(--background-color)","font-weight":"600",color:"var(--text-secondary)","font-size":"0.875rem","border-bottom":"2px solid var(--border-color)"},O={padding:"1rem","border-bottom":"1px solid var(--border-color)"},L={display:"flex","border-bottom":"1px solid var(--border-color)","margin-bottom":"1.5rem"},G=te=>({padding:"0.75rem 1rem",background:"none",border:"none",cursor:"pointer","font-weight":"500",color:te?"var(--primary-color)":"var(--text-muted)","border-bottom":te?"2px solid var(--primary-color)":"2px solid transparent",transition:"all 0.2s ease"}),K={padding:"0.5rem 1rem",background:"var(--primary-color)",color:"white",border:"none","border-radius":"var(--border-radius-sm)",cursor:"pointer","font-size":"0.875rem",transition:"opacity 0.2s"},q={padding:"0.75rem 1.5rem",background:"var(--secondary-color)",color:"white",border:"none","border-radius":"var(--border-radius-sm)",cursor:"pointer","margin-bottom":"1rem",display:"flex","align-items":"center",gap:"0.5rem"},B=()=>[{title:e("invoices.totalRevenue"),value:k().grandTotal,icon:"💰",color:"#4CAF50",subtext:`${e("common.of")} ${k().totalInvoices} ${e("common.invoice")} `},{title:e("invoices.totalProducts"),value:k().totalProducts,icon:"📦",color:"#2196F3",subtext:`${D(k().totalProductAmount)} ${e("invoices.value")}`,isNumber:!0},{title:e("invoices.totalReservations"),value:k().totalReservas,icon:"🎫",color:"#FF9800",subtext:`${D(k().totalReservaAmount)} ${e("invoices.value")}`,isNumber:!0},{title:e("invoices.aranceles"),value:k().totalAranceles,icon:"🏛️",color:"#9C27B0",subtext:e("invoices.customsFees")},{title:e("invoices.uniqueCustomers"),value:k().uniqueCustomers,icon:"👥",color:"#00BCD4",subtext:e("invoices.activeCustomers"),isNumber:!0},{title:e("invoices.averageInvoice"),value:k().avgInvoiceValue,icon:"📊",color:"#FF5722",subtext:e("invoices.perInvoiceValue")},{title:e("invoices.completed"),value:k().completedInvoices,icon:"✅",color:"#4CAF50",subtext:`${k().pendingInvoices} ${e("invoices.pending")}`,isNumber:!0},{title:e("invoices.storesActive"),value:P().length,icon:"🏪",color:"#795548",subtext:e("invoices.locations"),isNumber:!0}],H=()=>At.getActiveLocations();Ei(()=>{});const Y=async()=>{let te="YB1";t2.calcStockLevels(),await At.fecthProduct(te),await At.fecthInventory(te)};return Kn(()=>{Y()}),T(Bo,{get title(){return e("invoices.title")},get children(){var te=Kc();return y(te,w),c(te,T(We,{get when(){return m()==="dashboard"},get children(){return[T(We,{get when(){return!t.invoices&&$o.state.loading},get children(){var oe=AH(),pe=oe.firstChild;return oe.style.setProperty("text-align","center"),oe.style.setProperty("padding","2rem"),pe.style.setProperty("font-size","1.25rem"),pe.style.setProperty("margin-bottom","1rem"),c(pe,()=>e("invoices.loadingInvoices")),oe}}),T(We,{get when(){return $o.state.error},get children(){var oe=kH();return oe.firstChild,oe.style.setProperty("padding","1rem"),oe.style.setProperty("margin-bottom","1rem"),oe.style.setProperty("background","#ffebee"),oe.style.setProperty("border","1px solid #ffcdd2"),oe.style.setProperty("border-radius","var(--border-radius)"),oe.style.setProperty("color","#d32f2f"),c(oe,()=>$o.state.error,null),c(oe,T(mt,{variant:"outline",size:"sm",onClick:C,style:{"margin-left":"1rem"},get children(){return e("invoices.refreshData")}}),null),oe}}),(()=>{var oe=EH(),pe=oe.firstChild,ne=pe.firstChild,Q=ne.nextSibling,ce=Q.firstChild,ue=pe.nextSibling,de=ue.firstChild,ge=de.nextSibling,ye=ue.nextSibling,fe=ye.firstChild,Se=fe.nextSibling,qe=ye.nextSibling,Oe=qe.firstChild,Ie=Oe.nextSibling;return y(oe,_),c(ne,()=>e("invoices.storeLocation")),Q.addEventListener("change",Be=>o(Be.currentTarget.value)),c(ce,()=>e("invoices.allStores")),c(Q,T(_t,{get each(){return H()},children:Be=>(()=>{var ke=RH();return c(ke,()=>Be.name),be(()=>ke.value=Be.id),ke})()}),null),c(de,()=>e("invoices.fromDate")),ge.addEventListener("change",Be=>a(Be.currentTarget.value)),c(fe,()=>e("invoices.toDate")),Se.addEventListener("change",Be=>d(Be.currentTarget.value)),c(Oe,()=>e("invoices.search")),Ie.addEventListener("change",Be=>V(Be.currentTarget.value)),c(oe,T(mt,{variant:"secondary",onClick:()=>{o("all"),a(""),d(""),V("")},get children(){return e("invoices.clearFilters")}}),null),c(oe,T(mt,{variant:"primary",onClick:C,get disabled(){return!t.invoices&&$o.state.loading},get children(){return["🔄 ",Ve(()=>e("invoices.refreshData"))]}}),null),be(Be=>{var ke=v,Ge=z,et=W,ve=v,De=z,He=W,Je=v,Le=z,Te=W,he=v,Ne=z,rt=W,re=e("invoices.searchPlaceholder");return Be.e=y(pe,ke,Be.e),Be.t=y(ne,Ge,Be.t),Be.a=y(Q,et,Be.a),Be.o=y(ue,ve,Be.o),Be.i=y(de,De,Be.i),Be.n=y(ge,He,Be.n),Be.s=y(ye,Je,Be.s),Be.h=y(fe,Le,Be.h),Be.r=y(Se,Te,Be.r),Be.d=y(qe,he,Be.d),Be.l=y(Oe,Ne,Be.l),Be.u=y(Ie,rt,Be.u),re!==Be.c&&ir(Ie,"placeholder",Be.c=re),Be},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0}),be(()=>Q.value=i()),be(()=>ge.value=s()),be(()=>Se.value=l()),be(()=>Ie.value=F()),oe})(),(()=>{var oe=TH(),pe=oe.firstChild,ne=pe.nextSibling,Q=ne.nextSibling,ce=Q.nextSibling;return y(oe,L),pe.$$click=()=>R("overview"),c(pe,()=>e("inventory.overview")),ne.$$click=()=>R("invoices"),c(ne,()=>e("invoices.invoices")),Q.$$click=()=>R("add"),ce.$$click=()=>R("report"),be(ue=>{var de=G(N()==="overview"),ge=G(N()==="invoices"),ye=G(N()==="add"),fe=G(N()==="report");return ue.e=y(pe,de,ue.e),ue.t=y(ne,ge,ue.t),ue.a=y(Q,ye,ue.a),ue.o=y(ce,fe,ue.o),ue},{e:void 0,t:void 0,a:void 0,o:void 0}),oe})(),T(We,{get when(){return N()==="overview"},get children(){return[(()=>{var oe=Kc();return y(oe,A),c(oe,T(_t,{get each(){return B()},children:pe=>(()=>{var ne=DH(),Q=ne.firstChild,ce=Q.nextSibling,ue=ce.nextSibling,de=ue.nextSibling;return y(ne,I),c(Q,()=>pe?.icon),y(ce,Z),c(ce,()=>pe?.title),y(ue,X),c(ue,(()=>{var ge=Ve(()=>!!pe.isNumber);return()=>ge()?pe.value:D(pe.value)})()),y(de,se),c(de,()=>pe.subtext),be(ge=>y(Q,{...ee,background:`${pe?.color}20`,color:pe?.color},ge)),ne})()})),oe})(),T(We,{get when(){return k()?.productsByCategory?.size>0},get children(){return T(Vt,{get title(){return e("invoices.topProducts")},get subtitle(){return e("invoices.mostSoldProducts")},get children(){var oe=Kc();return oe.style.setProperty("max-height","300px"),oe.style.setProperty("overflow-y","auto"),c(oe,()=>Array.from(k().productsByCategory.entries()).sort((pe,ne)=>ne[1]-pe[1]).slice(0,10).map(([pe,ne])=>(()=>{var Q=vS(),ce=Q.firstChild,ue=ce.nextSibling,de=ue.firstChild;return Q.style.setProperty("display","flex"),Q.style.setProperty("justify-content","space-between"),Q.style.setProperty("padding","0.75rem"),Q.style.setProperty("border-bottom","1px solid var(--border-color)"),c(ce,pe),ue.style.setProperty("font-weight","600"),c(ue,ne,de),c(ue,()=>e("common.units"),null),Q})())),oe}})}}),(()=>{var oe=Kc();return oe.style.setProperty("margin","19px"),oe})(),T(We,{get when(){return k()?.reservasByType?.size>0},get children(){return T(Vt,{get title(){return e("invoices.reservationsByType")},get subtitle(){return e("invoices.distributionOfCategories")},style:{"margin-top":"1.5rem"},get children(){var oe=Kc();return oe.style.setProperty("max-height","300px"),oe.style.setProperty("overflow-y","auto"),c(oe,()=>Array.from(k().reservasByType.entries()).sort((pe,ne)=>ne[1]-pe[1]).map(([pe,ne])=>(()=>{var Q=vS(),ce=Q.firstChild,ue=ce.nextSibling,de=ue.firstChild;return Q.style.setProperty("display","flex"),Q.style.setProperty("justify-content","space-between"),Q.style.setProperty("padding","0.75rem"),Q.style.setProperty("border-bottom","1px solid var(--border-color)"),c(ce,pe),ue.style.setProperty("font-weight","600"),c(ue,ne,de),c(ue,()=>e("common.lbs"),null),Q})())),oe}})}}),(()=>{var oe=Kc();return oe.style.setProperty("margin","19px"),oe})(),T(We,{get when(){return k()?.othersByType?.size>0},get children(){return T(Vt,{title:"Aranceles y otros servicios",get subtitle(){return e("invoices.distributionOfCategories")},style:{"margin-top":"1.5rem"},get children(){var oe=Kc();return oe.style.setProperty("max-height","300px"),oe.style.setProperty("overflow-y","auto"),c(oe,()=>Array.from(k().othersByType.entries()).sort((pe,ne)=>ne[1]-pe[1]).map(([pe,ne])=>(()=>{var Q=LH(),ce=Q.firstChild,ue=ce.nextSibling,de=ue.firstChild;return Q.style.setProperty("display","flex"),Q.style.setProperty("justify-content","space-between"),Q.style.setProperty("padding","0.75rem"),Q.style.setProperty("border-bottom","1px solid var(--border-color)"),c(ce,pe),ue.style.setProperty("font-weight","600"),c(ue,ne,de),Q})())),oe}})}})]}})]}}),null),c(te,T(We,{get when(){return N()==="invoices"},get children(){return[T(We,{get when(){return m()!=="detail"},get children(){return T(Vt,{get title(){return e("invoices.recentInvoices")},get subtitle(){return`Mostrando ${M().length} facturas`},style:{"margin-top":"1.5rem"},get children(){var oe=IH(),pe=oe.firstChild,ne=pe.firstChild,Q=ne.firstChild,ce=Q.firstChild,ue=ce.nextSibling,de=ue.nextSibling,ge=de.nextSibling,ye=ge.nextSibling,fe=ye.nextSibling,Se=fe.nextSibling,qe=ne.nextSibling;return oe.style.setProperty("overflow-x","auto"),y(pe,U),c(ce,()=>e("invoices.invoiceNumber")),c(ue,()=>e("invoices.date")),c(de,()=>e("invoices.customer")),c(ge,()=>e("invoices.id")),c(ye,()=>e("invoices.total")),c(fe,()=>e("invoices.status")),c(Se,()=>e("invoices.actions")),c(qe,T(_t,{get each(){return M().slice(0,50)},children:Oe=>{const Ie=()=>vm(Oe);return(()=>{var Be=$H(),ke=Be.firstChild,Ge=ke.nextSibling,et=Ge.nextSibling,ve=et.nextSibling,De=ve.nextSibling,He=De.nextSibling,Je=He.firstChild,Le=He.nextSibling,Te=Le.firstChild;return c(ke,()=>Oe?.invoice),c(Ge,()=>$(Oe?.createDate)),c(et,()=>Oe?.shipper_consignee?.name),c(ve,()=>Oe?.shipper_consignee?.cid),c(De,()=>D(Ie()?.total)),Je.style.setProperty("padding","0.25rem 0.75rem"),Je.style.setProperty("border-radius","9999px"),Je.style.setProperty("font-size","0.75rem"),Je.style.setProperty("font-weight","600"),c(Je,(()=>{var he=Ve(()=>!!Oe.isCompleted);return()=>he()?e("invoices.completed"):e("invoices.pending")})()),Te.addEventListener("mouseleave",he=>he.currentTarget.style.opacity="1"),Te.addEventListener("mouseenter",he=>he.currentTarget.style.opacity="0.8"),Te.$$click=()=>{p(vm(Oe)),h(Oe),x("detail")},y(Te,K),c(Te,()=>e("invoices.view")),be(he=>{var Ne=O,rt=O,re=O,Ue=O,we={...O,"text-align":"right","font-weight":"600"},xe=O,je=Oe.isCompleted?"#d4edda":"#fff3cd",$e=Oe.isCompleted?"#155724":"#856404",ft=O;return he.e=y(ke,Ne,he.e),he.t=y(Ge,rt,he.t),he.a=y(et,re,he.a),he.o=y(ve,Ue,he.o),he.i=y(De,we,he.i),he.n=y(He,xe,he.n),je!==he.s&&((he.s=je)!=null?Je.style.setProperty("background",je):Je.style.removeProperty("background")),$e!==he.h&&((he.h=$e)!=null?Je.style.setProperty("color",$e):Je.style.removeProperty("color")),he.r=y(Le,ft,he.r),he},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),Be})()}})),be(Oe=>{var Ie=E,Be=E,ke=E,Ge=E,et={...E,"text-align":"right"},ve=E,De=E;return Oe.e=y(ce,Ie,Oe.e),Oe.t=y(ue,Be,Oe.t),Oe.a=y(de,ke,Oe.a),Oe.o=y(ge,Ge,Oe.o),Oe.i=y(ye,et,Oe.i),Oe.n=y(fe,ve,Oe.n),Oe.s=y(Se,De,Oe.s),Oe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),oe}})}}),T(We,{get when(){return Ve(()=>m()==="detail")()&&u()},get children(){return[(()=>{var oe=NH();return oe.firstChild,oe.$$click=()=>{x("dashboard"),h(null)},y(oe,q),c(oe,()=>e("invoices.backToDashboard"),null),oe})(),T(zU,{get invoice(){return u()},onPrint:()=>window.print(),get parseData(){return f()},goBack:()=>{x("dashboard"),h(null)}})]}})]}}),null),c(te,T(We,{get when(){return N()==="add"},get children(){return T(lH,{})}}),null),c(te,T(We,{get when(){return N()==="report"},get children(){return T(_H,{})}}),null),te}})};tr(["click"]);const BH=()=>T(OH,{invoices:[{type:"SALES",invoice:"20255FK6S4B43SSS",description:"",store:"YY_8816",ssg_inventory_key:"JqdrRwGBpdBfRCim",ssg_sorder_key:"JqdrRwGBpdBfRCim",createDate:1736132690425,shipper_consignee:{name:"Yudith Perez Medero",phoneNumberS:"5022408378",dob:"1982-07-23",firstName:"RAUL",lastName:"BATISTA",lastName2:"ESPOSITO",middleName:"",email:"",phoneNumber:"52393232",altPhoneNumber:"",cid:"48121007305",ybstreetNo:"9",ybstreet:"10",ybbetwen1:"CARRALERO",ybbetwen2:"3RA",ybapt:"",ybreparto:"PUEBLO NUEVO",consigneeId:"26144",ssg_consignee_key:"26144",passport:"NA",nacionality:"CUB",ybcity:"HOLGUIN",ybestate:"HOLGUIN",comment:""},packagesOrder:!0,businessId:"YB100423253156428",userId:"108694446087560534800",reservas:[{type:"UTILES DEL HOGAR",qty:"15",arancel:"10",price:"5",key:"1GB16SD80"},{type:"MISCELANEAS",qty:"19",arancel:"",price:"4",key:"0DS6K14Y2"}],products:[{product:{id:"CmrhMfVjLR9HxT6P",label:"FOGONES ELECTRICO DOBLE RESISTENCIA DE ALAMBRE",code:"978Y82K94"},qty:-1,price:23.696296296296296,salePrice:"34"},{product:{id:"ov56aPYGbXIq4XGy",label:"Caramelos",code:"C852CSKB5"},qty:-2,price:5.990000000000001,salePrice:"10"}],isCompleted:!0},{type:"SALES",invoice:"20255FK6S4B43TTT",description:"",store:"YY_8803",ssg_inventory_key:"JqdrRwGBpdBfRCin",ssg_sorder_key:"JqdrRwGBpdBfRCin",createDate:1736032690425,shipper_consignee:{name:"Maria Rodriguez Santos",phoneNumberS:"5024567890",dob:"1990-03-15",firstName:"MARIA",lastName:"RODRIGUEZ",lastName2:"SANTOS",middleName:"ELENA",email:"maria@email.com",phoneNumber:"52987654",altPhoneNumber:"",cid:"90031507890",ybstreetNo:"15",ybstreet:"23",ybbetwen1:"MARTI",ybbetwen2:"CESPEDES",ybapt:"2A",ybreparto:"CENTRO",consigneeId:"26145",ssg_consignee_key:"26145",passport:"A1234567",nacionality:"CUB",ybcity:"HAVANA",ybestate:"HAVANA",comment:""},packagesOrder:!0,businessId:"YB100423253156428",userId:"108694446087560534801",reservas:[{type:"ELECTRONICOS",qty:"5",arancel:"15",price:"12",key:"2GB16SD81"},{type:"ROPA Y CALZADO",qty:"8",arancel:"8",price:"7",key:"0DS6K14Y3"}],products:[{product:{id:"XmrhMfVjLR9HxT6Q",label:"TELEVISOR LED 32 PULGADAS",code:"TV32LED01"},qty:-1,price:150.5,salePrice:"220"},{product:{id:"Yv56aPYGbXIq4XGz",label:"Zapatos Deportivos Nike",code:"ZAP001"},qty:-1,price:45.99,salePrice:"75"}],isCompleted:!1},{type:"SALES",invoice:"20255FK6S4B43UUU",description:"",store:"YY_8816",ssg_inventory_key:"JqdrRwGBpdBfRCio",ssg_sorder_key:"JqdrRwGBpdBfRCio",createDate:1735932690425,shipper_consignee:{name:"Carlos Mendez Perez",phoneNumberS:"5025678901",dob:"1975-12-08",firstName:"CARLOS",lastName:"MENDEZ",lastName2:"PEREZ",middleName:"ANTONIO",email:"",phoneNumber:"52876543",altPhoneNumber:"",cid:"75120878901",ybstreetNo:"7",ybstreet:"45",ybbetwen1:"LINEA",ybbetwen2:"PASEO",ybapt:"",ybreparto:"VEDADO",consigneeId:"26146",ssg_consignee_key:"26146",passport:"NA",nacionality:"CUB",ybcity:"HAVANA",ybestate:"HAVANA",comment:""},packagesOrder:!0,businessId:"YB100423253156428",userId:"108694446087560534802",reservas:[{type:"ALIMENTOS",qty:"25",arancel:"5",price:"3",key:"3GB16SD82"}],products:[{product:{id:"ZmrhMfVjLR9HxT6R",label:"ARROZ ESPECIAL 5LB",code:"ARZ005"},qty:-5,price:2.5,salePrice:"4"},{product:{id:"Av56aPYGbXIq4XG1",label:"ACEITE DE COCINA 1L",code:"ACE001"},qty:-3,price:3.75,salePrice:"6"}],isCompleted:!0},{type:"SALES",invoice:"20255FK6S4B43VVV",description:"",store:"YY_8802",ssg_inventory_key:"JqdrRwGBpdBfRCip",ssg_sorder_key:"JqdrRwGBpdBfRCip",createDate:1735832690425,shipper_consignee:{name:"Ana Lucia Fernandez",phoneNumberS:"5026789012",dob:"1988-06-20",firstName:"ANA",lastName:"FERNANDEZ",lastName2:"LOPEZ",middleName:"LUCIA",email:"ana.lucia@email.com",phoneNumber:"52765432",altPhoneNumber:"52111222",cid:"88062076789",ybstreetNo:"12",ybstreet:"18",ybbetwen1:"CALZADA",ybbetwen2:"SAN LAZARO",ybapt:"3B",ybreparto:"CENTRO HABANA",consigneeId:"26147",ssg_consignee_key:"26147",passport:"B9876543",nacionality:"CUB",ybcity:"HAVANA",ybestate:"HAVANA",comment:"Entrega en horario de oficina"},packagesOrder:!0,businessId:"YB100423253156428",userId:"108694446087560534803",reservas:[{type:"MEDICINA Y SALUD",qty:"10",arancel:"12",price:"8",key:"4GB16SD83"},{type:"UTILES DEL HOGAR",qty:"6",arancel:"6",price:"4",key:"5GB16SD84"}],products:[{product:{id:"BmrhMfVjLR9HxT6S",label:"VITAMINAS MULTIPLES 60 CAP",code:"VIT001"},qty:-2,price:12.5,salePrice:"18"}],isCompleted:!0}]}),Dy={invoice:"",description:"",store:"",shipper_consignee:{name:"",firstName:"",middleName:"",lastName:"",lastName2:"",phoneNumber:"",cid:"",passport:"",address:""},products:[],reservas:[],bags:[],packagesOrder:!1,shippingType:"SEA"},d2="invoice_form_draft",jH=()=>{try{const t=localStorage.getItem(d2);if(t){const e=JSON.parse(t),r={...Dy,...e,shipper_consignee:{...Dy.shipper_consignee,...e.shipper_consignee||{}},products:e.products||[],reservas:e.reservas||[],bags:e.bags||[]};return console.log("Loaded form data from storage:",r),r}}catch(t){console.warn("Failed to load invoice form from storage:",t)}return console.log("No saved data found, using default form data"),{...Dy}},u2=t=>{try{localStorage.setItem(d2,JSON.stringify(t))}catch(e){console.warn("Failed to save invoice form to storage:",e)}},bS=()=>{try{localStorage.removeItem(d2)}catch(t){console.warn("Failed to clear invoice form from storage:",t)}},[nd,ys]=Ae(jH()),[L3,Do]=Ae(!1),[VH,Ly]=Ae(null);let r0=null;const zs=()=>{r0&&clearTimeout(r0),r0=setTimeout(()=>{const t=nd();u2(t),Ly(new Date),console.log("Invoice form auto-saved at",new Date().toLocaleTimeString())},1e3)},zH={formData:nd,get isDirty(){return L3()},get lastSaved(){return VH()},updateForm:t=>{ys(e=>{const r={...e,...t};return Do(!0),zs(),r})},updateShipperConsignee:t=>{ys(e=>{const r={...e,shipper_consignee:{...e.shipper_consignee,...t}};return Do(!0),zs(),r})},addProduct:t=>{ys(e=>{const r={...e,products:[...e.products,t]};return Do(!0),zs(),r})},updateProduct:(t,e)=>{ys(r=>{const n=[...r.products];n[t]={...n[t],...e};const i={...r,products:n};return Do(!0),zs(),i})},removeProduct:t=>{ys(e=>{const r=e.products.filter((i,o)=>o!==t),n={...e,products:r};return Do(!0),zs(),n})},addReserva:t=>{ys(e=>{const r={...e,reservas:[...e.reservas,t]};return Do(!0),zs(),r})},updateReserva:(t,e)=>{ys(r=>{const n=[...r.reservas];n[t]={...n[t],...e};const i={...r,reservas:n};return Do(!0),zs(),i})},removeReserva:t=>{ys(e=>{const r=e.reservas.filter((i,o)=>o!==t),n={...e,reservas:r};return Do(!0),zs(),n})},addBag:t=>{ys(e=>{const r={...e,bags:[...e.bags,t]};return Do(!0),zs(),r})},updateBag:(t,e)=>{ys(r=>{const n=[...r.bags];n[t]={...n[t],...e};const i={...r,bags:n};return Do(!0),zs(),i})},removeBag:t=>{ys(e=>{const r=e.bags.filter((i,o)=>o!==t),n={...e,bags:r};return Do(!0),zs(),n})},clearForm:()=>{ys({...Dy}),Do(!1),bS(),Ly(null)},markCompleted:()=>{bS(),Do(!1),Ly(null)},forceSave:()=>{u2(nd()),Ly(new Date),Do(!1)},hasData:()=>{const t=nd();return t.invoice!==""||t.description!==""||t.store!==""||t.shipper_consignee.name!==""||t.shipper_consignee.firstName!==""||t.shipper_consignee.cid!==""||t.products.length>0||t.reservas.length>0||t.bags.length>0},isValid:()=>{const t=nd();return t.invoice.trim()!==""&&t.shipper_consignee.name.trim()!==""&&(t.products.length>0||t.reservas.length>0)},getFormData:()=>nd()};typeof window<"u"&&window.addEventListener("beforeunload",t=>{if(L3()&&(u2(nd()),zH.hasData()))return t.preventDefault(),t.returnValue="You have unsaved changes in your invoice. Are you sure you want to leave?",t.returnValue});var UH=le('<div><div><h2></h2><div><h3>Basic Information</h3><div><div><label>Rule Name *</label><input type=text placeholder="Enter rule name"></div><div><label>Priority</label><input type=number min=1 max=1000></div></div><div><label>Description *</label><textarea placeholder="Describe what this rule does"></textarea></div><div><div><label>Trigger Event *</label><select></select></div><div><label><input type=checkbox>Active</label></div></div></div><div><div><h3>Conditions</h3><button>Add Condition</button></div></div><div><div><h3>Account Mappings</h3><button>Add Mapping</button></div></div><div><button>Cancel</button><button>'),PS=le("<option>"),qH=le('<div><div><div><label>Field</label><input type=text placeholder="e.g., invoice.total, paymentMethods.cash"></div><div><label>Operator</label><select></select></div><div><label>Value</label><input></div><div>'),xS=le("<button>Remove"),HH=le('<div><div><div><label>Debit Account</label><select></select></div><div><label>Credit Account</label><select></select></div></div><div><div><label>Amount Expression</label><input type=text placeholder="e.g., invoice.total, paymentMethods.cash"></div><div><label>Description Template</label><input type=text placeholder="e.g., Sale - Invoice #{invoice}"></div><div>'),SS=le("<option> - ");const WH=t=>{const e=()=>t.rule&&t.rule.id,[r,n]=Ae({id:t.rule?.id||"",name:t.rule?.name||"",description:t.rule?.description||"",triggerEvent:t.rule?.triggerEvent||"invoice_completed",isActive:t.rule?.isActive??!0,priority:t.rule?.priority||100,conditions:t.rule?.conditions||[{field:"",operator:"greaterThan",value:0}],actions:t.rule?.actions||[{type:"create_journal_entry",accountMappings:[{debitAccountId:"1001",creditAccountId:"4001",amountExpression:"",description:""}]}]}),i=[{id:"1001",name:"Cash - Operating Account"},{id:"1002",name:"Cash - Zelle Account"},{id:"1003",name:"Cash - Credit Card Processing"},{id:"1101",name:"Accounts Receivable - Customers"},{id:"1201",name:"Inventory - Products"},{id:"1401",name:"Customs Fees Receivable"},{id:"2001",name:"Accounts Payable"},{id:"2301",name:"Sales Tax Payable"},{id:"2302",name:"Customs Fees Payable"},{id:"3001",name:"Owner's Equity"},{id:"4001",name:"Sales Revenue - Products"},{id:"4101",name:"Service Revenue - General"},{id:"4201",name:"Transport Service Revenue"},{id:"5001",name:"Cost of Goods Sold - Products"},{id:"5201",name:"Salaries and Wages"},{id:"5301",name:"Utilities Expense"}],o=[{value:"invoice_completed",label:"Invoice Completed"},{value:"payment_received",label:"Payment Received"},{value:"service_rendered",label:"Service Rendered"},{value:"inventory_movement",label:"Inventory Movement"},{value:"tax_calculated",label:"Tax Calculated"}],s=[{value:"equals",label:"Equals"},{value:"contains",label:"Contains"},{value:"greaterThan",label:"Greater Than"},{value:"lessThan",label:"Less Than"},{value:"in",label:"In Array"}],a=(R,M)=>{n(C=>({...C,[R]:M}))},l=()=>{const R=r();n({...R,conditions:[...R.conditions||[],{field:"",operator:"greaterThan",value:0}]})},d=R=>{const M=r();n({...M,conditions:M.conditions?.filter((C,k)=>k!==R)||[]})},u=(R,M,C)=>{const k=r(),D=[...k.conditions||[]];D[R]={...D[R],[M]:C},n({...k,conditions:D})},h=()=>{const R=r(),M=[...R.actions||[]];M[0]&&(M[0]={...M[0],accountMappings:[...M[0].accountMappings||[],{debitAccountId:"1001",creditAccountId:"4001",amountExpression:"",description:""}]}),n({...R,actions:M})},f=R=>{const M=r(),C=[...M.actions||[]];C[0]&&(C[0]={...C[0],accountMappings:C[0].accountMappings?.filter((k,D)=>D!==R)||[]}),n({...M,actions:C})},p=(R,M,C)=>{const k=r(),D=[...k.actions||[]];if(D[0]){const $=[...D[0].accountMappings||[]];$[R]={...$[R],[M]:C},D[0]={...D[0],accountMappings:$}}n({...k,actions:D})},m=()=>{const R=r();if(!R.name||!R.description||!R.triggerEvent){alert("Please fill in all required fields");return}const M={id:R.id||`rule_${Date.now()}`,name:R.name,description:R.description,triggerEvent:R.triggerEvent,isActive:R.isActive??!0,priority:R.priority||100,conditions:R.conditions||[],actions:R.actions||[]};t.onSave(M)},x={width:"100%",padding:"0.5rem",border:"1px solid #d1d5db","border-radius":"0.375rem","font-size":"0.875rem"},P={...x,"background-color":"white"},g={padding:"0.5rem 1rem","border-radius":"0.375rem",cursor:"pointer","font-weight":"500",border:"1px solid #d1d5db"},F={...g,"background-color":"#3b82f6",color:"white",border:"none"},V={...g,"background-color":"white",color:"#374151"},N={...g,"background-color":"#ef4444",color:"white",border:"none"};return(()=>{var R=UH(),M=R.firstChild,C=M.firstChild,k=C.nextSibling,D=k.firstChild,$=D.nextSibling,w=$.firstChild,_=w.firstChild,v=_.nextSibling,z=w.nextSibling,W=z.firstChild,A=W.nextSibling,I=$.nextSibling,ee=I.firstChild,Z=ee.nextSibling,X=I.nextSibling,se=X.firstChild,U=se.firstChild,E=U.nextSibling,O=se.nextSibling,L=O.firstChild,G=L.firstChild,K=k.nextSibling,q=K.firstChild,B=q.firstChild,H=B.nextSibling,Y=K.nextSibling,te=Y.firstChild,oe=te.firstChild,pe=oe.nextSibling,ne=Y.nextSibling,Q=ne.firstChild,ce=Q.nextSibling;return R.style.setProperty("position","fixed"),R.style.setProperty("top","0"),R.style.setProperty("left","0"),R.style.setProperty("right","0"),R.style.setProperty("bottom","0"),R.style.setProperty("background-color","rgba(0, 0, 0, 0.5)"),R.style.setProperty("display","flex"),R.style.setProperty("align-items","center"),R.style.setProperty("justify-content","center"),R.style.setProperty("z-index","1000"),M.style.setProperty("background-color","white"),M.style.setProperty("border-radius","0.5rem"),M.style.setProperty("padding","2rem"),M.style.setProperty("max-width","800px"),M.style.setProperty("max-height","90vh"),M.style.setProperty("overflow-y","auto"),M.style.setProperty("width","90%"),C.style.setProperty("font-size","1.5rem"),C.style.setProperty("font-weight","700"),C.style.setProperty("margin-bottom","1.5rem"),c(C,()=>e()?"Edit Automation Rule":"Add New Automation Rule"),k.style.setProperty("margin-bottom","1.5rem"),D.style.setProperty("font-size","1.125rem"),D.style.setProperty("font-weight","600"),D.style.setProperty("margin-bottom","1rem"),$.style.setProperty("display","grid"),$.style.setProperty("grid-template-columns","1fr 1fr"),$.style.setProperty("gap","1rem"),$.style.setProperty("margin-bottom","1rem"),_.style.setProperty("display","block"),_.style.setProperty("font-weight","500"),_.style.setProperty("margin-bottom","0.5rem"),v.$$input=ue=>a("name",ue.currentTarget.value),W.style.setProperty("display","block"),W.style.setProperty("font-weight","500"),W.style.setProperty("margin-bottom","0.5rem"),A.$$input=ue=>a("priority",parseInt(ue.currentTarget.value)||100),I.style.setProperty("margin-bottom","1rem"),ee.style.setProperty("display","block"),ee.style.setProperty("font-weight","500"),ee.style.setProperty("margin-bottom","0.5rem"),Z.$$input=ue=>a("description",ue.currentTarget.value),X.style.setProperty("display","grid"),X.style.setProperty("grid-template-columns","1fr auto"),X.style.setProperty("gap","1rem"),X.style.setProperty("align-items","end"),U.style.setProperty("display","block"),U.style.setProperty("font-weight","500"),U.style.setProperty("margin-bottom","0.5rem"),E.addEventListener("change",ue=>a("triggerEvent",ue.currentTarget.value)),c(E,T(_t,{each:o,children:ue=>(()=>{var de=PS();return c(de,()=>ue.label),be(()=>de.value=ue.value),de})()})),L.style.setProperty("display","flex"),L.style.setProperty("align-items","center"),L.style.setProperty("gap","0.5rem"),G.addEventListener("change",ue=>a("isActive",ue.currentTarget.checked)),K.style.setProperty("margin-bottom","1.5rem"),q.style.setProperty("display","flex"),q.style.setProperty("justify-content","space-between"),q.style.setProperty("align-items","center"),q.style.setProperty("margin-bottom","1rem"),B.style.setProperty("font-size","1.125rem"),B.style.setProperty("font-weight","600"),H.$$click=l,c(K,T(_t,{get each(){return r().conditions||[]},children:(ue,de)=>(()=>{var ge=qH(),ye=ge.firstChild,fe=ye.firstChild,Se=fe.firstChild,qe=Se.nextSibling,Oe=fe.nextSibling,Ie=Oe.firstChild,Be=Ie.nextSibling,ke=Oe.nextSibling,Ge=ke.firstChild,et=Ge.nextSibling,ve=ke.nextSibling;return ge.style.setProperty("border","1px solid #d1d5db"),ge.style.setProperty("border-radius","0.375rem"),ge.style.setProperty("padding","1rem"),ge.style.setProperty("margin-bottom","1rem"),ye.style.setProperty("display","grid"),ye.style.setProperty("grid-template-columns","2fr 1fr 1fr auto"),ye.style.setProperty("gap","1rem"),ye.style.setProperty("align-items","end"),Se.style.setProperty("display","block"),Se.style.setProperty("font-weight","500"),Se.style.setProperty("margin-bottom","0.5rem"),qe.$$input=De=>u(de(),"field",De.currentTarget.value),Ie.style.setProperty("display","block"),Ie.style.setProperty("font-weight","500"),Ie.style.setProperty("margin-bottom","0.5rem"),Be.addEventListener("change",De=>u(de(),"operator",De.currentTarget.value)),c(Be,T(_t,{each:s,children:De=>(()=>{var He=PS();return c(He,()=>De.label),be(()=>He.value=De.value),He})()})),Ge.style.setProperty("display","block"),Ge.style.setProperty("font-weight","500"),Ge.style.setProperty("margin-bottom","0.5rem"),et.$$input=De=>u(de(),"value",ue.operator==="greaterThan"||ue.operator==="lessThan"?parseFloat(De.currentTarget.value)||0:De.currentTarget.value),c(ve,(()=>{var De=Ve(()=>(r().conditions?.length||0)>1);return()=>De()&&(()=>{var He=xS();return He.$$click=()=>d(de()),be(Je=>y(He,N,Je)),He})()})()),be(De=>{var He=x,Je=P,Le=ue.operator==="greaterThan"||ue.operator==="lessThan"?"number":"text",Te=x;return De.e=y(qe,He,De.e),De.t=y(Be,Je,De.t),Le!==De.a&&ir(et,"type",De.a=Le),De.o=y(et,Te,De.o),De},{e:void 0,t:void 0,a:void 0,o:void 0}),be(()=>qe.value=ue.field),be(()=>Be.value=ue.operator),be(()=>et.value=ue.value),ge})()}),null),Y.style.setProperty("margin-bottom","2rem"),te.style.setProperty("display","flex"),te.style.setProperty("justify-content","space-between"),te.style.setProperty("align-items","center"),te.style.setProperty("margin-bottom","1rem"),oe.style.setProperty("font-size","1.125rem"),oe.style.setProperty("font-weight","600"),pe.$$click=h,c(Y,T(_t,{get each(){return r().actions?.[0]?.accountMappings||[]},children:(ue,de)=>(()=>{var ge=HH(),ye=ge.firstChild,fe=ye.firstChild,Se=fe.firstChild,qe=Se.nextSibling,Oe=fe.nextSibling,Ie=Oe.firstChild,Be=Ie.nextSibling,ke=ye.nextSibling,Ge=ke.firstChild,et=Ge.firstChild,ve=et.nextSibling,De=Ge.nextSibling,He=De.firstChild,Je=He.nextSibling,Le=De.nextSibling;return ge.style.setProperty("border","1px solid #d1d5db"),ge.style.setProperty("border-radius","0.375rem"),ge.style.setProperty("padding","1rem"),ge.style.setProperty("margin-bottom","1rem"),ye.style.setProperty("display","grid"),ye.style.setProperty("grid-template-columns","1fr 1fr"),ye.style.setProperty("gap","1rem"),ye.style.setProperty("margin-bottom","1rem"),Se.style.setProperty("display","block"),Se.style.setProperty("font-weight","500"),Se.style.setProperty("margin-bottom","0.5rem"),qe.addEventListener("change",Te=>p(de(),"debitAccountId",Te.currentTarget.value)),c(qe,T(_t,{each:i,children:Te=>(()=>{var he=SS(),Ne=he.firstChild;return c(he,()=>Te.id,Ne),c(he,()=>Te.name,null),be(()=>he.value=Te.id),he})()})),Ie.style.setProperty("display","block"),Ie.style.setProperty("font-weight","500"),Ie.style.setProperty("margin-bottom","0.5rem"),Be.addEventListener("change",Te=>p(de(),"creditAccountId",Te.currentTarget.value)),c(Be,T(_t,{each:i,children:Te=>(()=>{var he=SS(),Ne=he.firstChild;return c(he,()=>Te.id,Ne),c(he,()=>Te.name,null),be(()=>he.value=Te.id),he})()})),ke.style.setProperty("display","grid"),ke.style.setProperty("grid-template-columns","1fr 2fr auto"),ke.style.setProperty("gap","1rem"),ke.style.setProperty("align-items","end"),et.style.setProperty("display","block"),et.style.setProperty("font-weight","500"),et.style.setProperty("margin-bottom","0.5rem"),ve.$$input=Te=>p(de(),"amountExpression",Te.currentTarget.value),He.style.setProperty("display","block"),He.style.setProperty("font-weight","500"),He.style.setProperty("margin-bottom","0.5rem"),Je.$$input=Te=>p(de(),"description",Te.currentTarget.value),c(Le,(()=>{var Te=Ve(()=>(r().actions?.[0]?.accountMappings?.length||0)>1);return()=>Te()&&(()=>{var he=xS();return he.$$click=()=>f(de()),be(Ne=>y(he,N,Ne)),he})()})()),be(Te=>{var he=P,Ne=P,rt=x,re=x;return Te.e=y(qe,he,Te.e),Te.t=y(Be,Ne,Te.t),Te.a=y(ve,rt,Te.a),Te.o=y(Je,re,Te.o),Te},{e:void 0,t:void 0,a:void 0,o:void 0}),be(()=>qe.value=ue.debitAccountId),be(()=>Be.value=ue.creditAccountId),be(()=>ve.value=ue.amountExpression),be(()=>Je.value=ue.description),ge})()}),null),ne.style.setProperty("display","flex"),ne.style.setProperty("justify-content","flex-end"),ne.style.setProperty("gap","1rem"),Qn(Q,"click",t.onCancel,!0),ce.$$click=m,c(ce,()=>e()?"Update Rule":"Create Rule"),be(ue=>{var de=x,ge=x,ye={...x,height:"4rem",resize:"vertical"},fe=P,Se=V,qe=V,Oe=V,Ie=F;return ue.e=y(v,de,ue.e),ue.t=y(A,ge,ue.t),ue.a=y(Z,ye,ue.a),ue.o=y(E,fe,ue.o),ue.i=y(H,Se,ue.i),ue.n=y(pe,qe,ue.n),ue.s=y(Q,Oe,ue.s),ue.h=y(ce,Ie,ue.h),ue},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),be(()=>v.value=r().name||""),be(()=>A.value=r().priority||100),be(()=>Z.value=r().description||""),be(()=>E.value=r().triggerEvent||""),be(()=>G.checked=r().isActive??!0),R})()};tr(["input","click"]);var GH=le('<div><div><h2></h2><div><div><label>Mapping Name *</label><input type=text placeholder="Enter mapping name"></div><div><label>Description</label><textarea placeholder="Describe when this mapping should be used"></textarea></div><div><label>Transaction Type *</label><select></select></div><div><div><label>Debit Account *</label><select></select></div><div><label>Credit Account *</label><select></select></div></div><div><label><input type=checkbox>Active</label></div></div><div><button>Cancel</button><button>'),KH=le("<option>"),wS=le("<option> - ");const YH=t=>{const e=()=>t.mapping&&t.mapping.id,[r,n]=Ae({id:t.mapping?.id||"",name:t.mapping?.name||"",description:t.mapping?.description||"",transactionType:t.mapping?.transactionType||"cashSale",debitAccountId:t.mapping?.debitAccountId||"1001",creditAccountId:t.mapping?.creditAccountId||"4001",conditions:t.mapping?.conditions||[],isActive:t.mapping?.isActive??!0}),i=[{id:"1001",name:"Cash - Operating Account"},{id:"1002",name:"Cash - Zelle Account"},{id:"1003",name:"Cash - Credit Card Processing"},{id:"1101",name:"Accounts Receivable - Customers"},{id:"1201",name:"Inventory - Products"},{id:"1401",name:"Customs Fees Receivable"},{id:"2001",name:"Accounts Payable"},{id:"2301",name:"Sales Tax Payable"},{id:"2302",name:"Customs Fees Payable"},{id:"3001",name:"Owner's Equity"},{id:"4001",name:"Sales Revenue - Products"},{id:"4101",name:"Service Revenue - General"},{id:"4201",name:"Transport Service Revenue"},{id:"5001",name:"Cost of Goods Sold - Products"},{id:"5201",name:"Salaries and Wages"},{id:"5301",name:"Utilities Expense"}],o=[{value:"cashSale",label:"Cash Sale"},{value:"creditSale",label:"Credit Sale"},{value:"serviceRevenue",label:"Service Revenue"},{value:"transportRevenue",label:"Transport Revenue"},{value:"inventoryPurchase",label:"Inventory Purchase"},{value:"expense",label:"General Expense"},{value:"customsFees",label:"Customs Fees"},{value:"salesTax",label:"Sales Tax"}],s=(p,m)=>{n(x=>({...x,[p]:m}))},a=()=>{const p=r();if(!p.name||!p.transactionType||!p.debitAccountId||!p.creditAccountId){alert("Please fill in all required fields");return}const m={id:p.id||`mapping_${Date.now()}`,name:p.name,description:p.description||"",transactionType:p.transactionType,debitAccountId:p.debitAccountId,creditAccountId:p.creditAccountId,conditions:p.conditions||[],isActive:p.isActive??!0,createdAt:t.mapping?.createdAt||new Date,updatedAt:new Date};t.onSave(m)},l={width:"100%",padding:"0.5rem",border:"1px solid #d1d5db","border-radius":"0.375rem","font-size":"0.875rem"},d={...l,"background-color":"white"},u={padding:"0.5rem 1rem","border-radius":"0.375rem",cursor:"pointer","font-weight":"500",border:"1px solid #d1d5db"},h={...u,"background-color":"#3b82f6",color:"white",border:"none"},f={...u,"background-color":"white",color:"#374151"};return(()=>{var p=GH(),m=p.firstChild,x=m.firstChild,P=x.nextSibling,g=P.firstChild,F=g.firstChild,V=F.nextSibling,N=g.nextSibling,R=N.firstChild,M=R.nextSibling,C=N.nextSibling,k=C.firstChild,D=k.nextSibling,$=C.nextSibling,w=$.firstChild,_=w.firstChild,v=_.nextSibling,z=w.nextSibling,W=z.firstChild,A=W.nextSibling,I=$.nextSibling,ee=I.firstChild,Z=ee.firstChild,X=P.nextSibling,se=X.firstChild,U=se.nextSibling;return p.style.setProperty("position","fixed"),p.style.setProperty("top","0"),p.style.setProperty("left","0"),p.style.setProperty("right","0"),p.style.setProperty("bottom","0"),p.style.setProperty("background-color","rgba(0, 0, 0, 0.5)"),p.style.setProperty("display","flex"),p.style.setProperty("align-items","center"),p.style.setProperty("justify-content","center"),p.style.setProperty("z-index","1000"),m.style.setProperty("background-color","white"),m.style.setProperty("border-radius","0.5rem"),m.style.setProperty("padding","2rem"),m.style.setProperty("max-width","600px"),m.style.setProperty("max-height","90vh"),m.style.setProperty("overflow-y","auto"),m.style.setProperty("width","90%"),x.style.setProperty("font-size","1.5rem"),x.style.setProperty("font-weight","700"),x.style.setProperty("margin-bottom","1.5rem"),c(x,()=>e()?"Edit Account Mapping":"Add New Account Mapping"),P.style.setProperty("margin-bottom","1.5rem"),g.style.setProperty("margin-bottom","1rem"),F.style.setProperty("display","block"),F.style.setProperty("font-weight","500"),F.style.setProperty("margin-bottom","0.5rem"),V.$$input=E=>s("name",E.currentTarget.value),N.style.setProperty("margin-bottom","1rem"),R.style.setProperty("display","block"),R.style.setProperty("font-weight","500"),R.style.setProperty("margin-bottom","0.5rem"),M.$$input=E=>s("description",E.currentTarget.value),C.style.setProperty("margin-bottom","1rem"),k.style.setProperty("display","block"),k.style.setProperty("font-weight","500"),k.style.setProperty("margin-bottom","0.5rem"),D.addEventListener("change",E=>s("transactionType",E.currentTarget.value)),c(D,T(_t,{each:o,children:E=>(()=>{var O=KH();return c(O,()=>E.label),be(()=>O.value=E.value),O})()})),$.style.setProperty("display","grid"),$.style.setProperty("grid-template-columns","1fr 1fr"),$.style.setProperty("gap","1rem"),$.style.setProperty("margin-bottom","1rem"),_.style.setProperty("display","block"),_.style.setProperty("font-weight","500"),_.style.setProperty("margin-bottom","0.5rem"),v.addEventListener("change",E=>s("debitAccountId",E.currentTarget.value)),c(v,T(_t,{each:i,children:E=>(()=>{var O=wS(),L=O.firstChild;return c(O,()=>E.id,L),c(O,()=>E.name,null),be(()=>O.value=E.id),O})()})),W.style.setProperty("display","block"),W.style.setProperty("font-weight","500"),W.style.setProperty("margin-bottom","0.5rem"),A.addEventListener("change",E=>s("creditAccountId",E.currentTarget.value)),c(A,T(_t,{each:i,children:E=>(()=>{var O=wS(),L=O.firstChild;return c(O,()=>E.id,L),c(O,()=>E.name,null),be(()=>O.value=E.id),O})()})),ee.style.setProperty("display","flex"),ee.style.setProperty("align-items","center"),ee.style.setProperty("gap","0.5rem"),Z.addEventListener("change",E=>s("isActive",E.currentTarget.checked)),X.style.setProperty("display","flex"),X.style.setProperty("justify-content","flex-end"),X.style.setProperty("gap","1rem"),Qn(se,"click",t.onCancel,!0),U.$$click=a,c(U,()=>e()?"Update Mapping":"Create Mapping"),be(E=>{var O=l,L={...l,height:"3rem",resize:"vertical"},G=d,K=d,q=d,B=f,H=h;return E.e=y(V,O,E.e),E.t=y(M,L,E.t),E.a=y(D,G,E.a),E.o=y(v,K,E.o),E.i=y(A,q,E.i),E.n=y(se,B,E.n),E.s=y(U,H,E.s),E},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),be(()=>V.value=r().name||""),be(()=>M.value=r().description||""),be(()=>D.value=r().transactionType||""),be(()=>v.value=r().debitAccountId||""),be(()=>A.value=r().creditAccountId||""),be(()=>Z.checked=r().isActive??!0),p})()};tr(["input","click"]);var XH=le("<div><div><strong>Automation Status:</strong> <span></span></div><div><strong>Active Rules:</strong> </div><div><strong>Account Mappings:</strong> </div><div><strong>Audit Logging:</strong> <span>Enabled"),ZH=le("<div><div><strong>Cash Sales:</strong> Cash → Sales Revenue</div><div><strong>Credit Sales:</strong> A/R → Sales Revenue</div><div><strong>Services:</strong> Cash → Service Revenue</div><div><strong>Transport:</strong> Cash → Transport Revenue</div><div><strong>Sales Tax:</strong> Cash → Tax Payable"),n0=le("<div>"),JH=le("<div><div><h3>Active Automation Rules</h3></div><table><thead><tr><th>Rule Name</th><th>Trigger Event</th><th>Priority</th><th>Status</th><th>Actions</th></tr></thead><tbody>"),QH=le("<div>No custom account mappings configured. The system uses default mappings."),eW=le("<div><div><h3>Transaction Account Mappings"),tW=le("<table><thead><tr><th>Timestamp</th><th>Event</th><th>Rules Applied</th><th>Entries Created</th><th>Status</th></tr></thead><tbody>"),rW=le("<div><div><h3>Recent Automation Activity"),nW=le("<div><div><h1>Account Automation Configuration</h1><div><label><input type=checkbox>Enable Automation</label></div></div><div><button>Overview</button><button>Automation Rules (<!>)</button><button>Account Mappings (<!>)</button><button>Audit Log"),iW=le("<div>No recent automation activity"),oW=le("<div><div> - </div><div> - <!> rules applied"),sW=le("<tr><td><div><div></div><div></div></div></td><td></td><td></td><td><span></span></td><td><div><button></button><button>Edit</button><button>Delete"),aW=le("<table><thead><tr><th>Mapping Name</th><th>Transaction Type</th><th>Debit Account</th><th>Credit Account</th><th>Status</th><th>Actions</th></tr></thead><tbody>"),lW=le("<tr><td><div><div></div><div></div></div></td><td></td><td></td><td></td><td><span></span></td><td><div><button>Edit</button><button>Delete"),cW=le("<div>No automation activity recorded yet."),dW=le("<tr><td><div></div></td><td><div></div></td><td><div></div></td><td><div> entries</div></td><td><span>");const uW=t=>{const[e,r]=Ae("overview"),[n,i]=Ae(null),[o,s]=Ae(null),a=N=>new Date(N).toLocaleDateString(),l=()=>{Zn.toggleAutomation(!Zn.isEnabled)},d=(N,R)=>{Zn.toggleAutomationRule(N,R)},u=N=>{confirm("Are you sure you want to delete this automation rule?")&&Zn.removeAutomationRule(N)},h=N=>{confirm("Are you sure you want to delete this account mapping?")&&Zn.removeAccountMapping(N)},f=N=>{N.id&&Zn.automationRules.find(R=>R.id===N.id)?Zn.updateAutomationRule(N.id,N):Zn.addAutomationRule(N),i(null)},p=N=>{N.id&&Zn.accountMappings.find(R=>R.id===N.id)?Zn.updateAccountMapping(N.id,N):Zn.addAccountMapping(N),s(null)},m=()=>{i(null),s(null)},x=()=>g1.getAuditLog(50),P=N=>({padding:"0.75rem 1.5rem",border:"none",background:N?"var(--primary-color)":"transparent",color:N?"white":"var(--text-color)","border-radius":"var(--border-radius-sm)",cursor:"pointer","font-weight":"500",transition:"all 0.2s"}),g={width:"100%","border-collapse":"collapse","margin-top":"1rem"},F={"text-align":"left",padding:"0.75rem","border-bottom":"2px solid var(--border-color)","font-weight":"600","font-size":"0.875rem"},V={padding:"0.75rem","border-bottom":"1px solid var(--border-color)"};return(()=>{var N=nW(),R=N.firstChild,M=R.firstChild,C=M.nextSibling,k=C.firstChild,D=k.firstChild,$=R.nextSibling,w=$.firstChild,_=w.nextSibling,v=_.firstChild,z=v.nextSibling;z.nextSibling;var W=_.nextSibling,A=W.firstChild,I=A.nextSibling;I.nextSibling;var ee=W.nextSibling;return N.style.setProperty("padding","2rem"),N.style.setProperty("max-width","1200px"),N.style.setProperty("margin","0 auto"),R.style.setProperty("display","flex"),R.style.setProperty("justify-content","space-between"),R.style.setProperty("align-items","center"),R.style.setProperty("margin-bottom","2rem"),M.style.setProperty("font-size","1.75rem"),M.style.setProperty("font-weight","bold"),C.style.setProperty("display","flex"),C.style.setProperty("gap","1rem"),C.style.setProperty("align-items","center"),k.style.setProperty("display","flex"),k.style.setProperty("align-items","center"),k.style.setProperty("gap","0.5rem"),D.addEventListener("change",l),c(C,T(We,{get when(){return t.onClose},get children(){return T(mt,{variant:"secondary",get onClick(){return t.onClose},children:"Close"})}}),null),$.style.setProperty("display","flex"),$.style.setProperty("gap","0.5rem"),$.style.setProperty("margin-bottom","2rem"),$.style.setProperty("border-bottom","1px solid var(--border-color)"),$.style.setProperty("padding-bottom","1rem"),w.$$click=()=>r("overview"),_.$$click=()=>r("rules"),c(_,()=>Zn.automationRules.length,z),W.$$click=()=>r("mappings"),c(W,()=>Zn.accountMappings.length,I),ee.$$click=()=>r("audit"),c(N,T(We,{get when(){return e()==="overview"},get children(){var Z=n0();return Z.style.setProperty("display","grid"),Z.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(300px, 1fr))"),Z.style.setProperty("gap","1.5rem"),c(Z,T(Vt,{title:"System Status",get children(){var X=XH(),se=X.firstChild,U=se.firstChild,E=U.nextSibling,O=E.nextSibling,L=se.nextSibling,G=L.firstChild;G.nextSibling;var K=L.nextSibling,q=K.firstChild;q.nextSibling;var B=K.nextSibling,H=B.firstChild,Y=H.nextSibling,te=Y.nextSibling;return X.style.setProperty("padding","1rem"),se.style.setProperty("margin-bottom","1rem"),O.style.setProperty("font-weight","600"),c(O,()=>Zn.isEnabled?"Enabled":"Disabled"),L.style.setProperty("margin-bottom","1rem"),c(L,()=>Zn.automationRules.length,null),K.style.setProperty("margin-bottom","1rem"),c(K,()=>Zn.accountMappings.length,null),te.style.setProperty("color","#10b981"),te.style.setProperty("font-weight","600"),be(oe=>(oe=Zn.isEnabled?"#10b981":"#ef4444")!=null?O.style.setProperty("color",oe):O.style.removeProperty("color")),X}}),null),c(Z,T(Vt,{title:"Default Account Mappings",get children(){var X=ZH(),se=X.firstChild,U=se.nextSibling,E=U.nextSibling,O=E.nextSibling;return X.style.setProperty("padding","1rem"),X.style.setProperty("font-size","0.875rem"),se.style.setProperty("margin-bottom","0.5rem"),U.style.setProperty("margin-bottom","0.5rem"),E.style.setProperty("margin-bottom","0.5rem"),O.style.setProperty("margin-bottom","0.5rem"),X}}),null),c(Z,T(Vt,{title:"Recent Activity",get children(){var X=n0();return X.style.setProperty("padding","1rem"),c(X,T(We,{get when(){return x().length>0},get fallback(){return(()=>{var se=iW();return se.style.setProperty("color","var(--text-secondary)"),se.style.setProperty("font-style","italic"),se})()},get children(){return T(_t,{get each(){return x().slice(0,5)},children:se=>(()=>{var U=oW(),E=U.firstChild,O=E.firstChild,L=E.nextSibling,G=L.firstChild,K=G.nextSibling;return K.nextSibling,U.style.setProperty("margin-bottom","0.75rem"),U.style.setProperty("padding-bottom","0.75rem"),U.style.setProperty("border-bottom","1px solid var(--border-color)"),U.style.setProperty("font-size","0.875rem"),E.style.setProperty("font-weight","600"),c(E,()=>se.event,O),c(E,()=>se.success?"Success":"Failed",null),L.style.setProperty("color","var(--text-secondary)"),c(L,()=>a(se.timestamp),G),c(L,()=>se.rulesApplied.length,K),be(q=>(q=se.success?"#10b981":"#ef4444")!=null?E.style.setProperty("color",q):E.style.removeProperty("color")),U})()})}})),X}}),null),Z}}),null),c(N,T(We,{get when(){return e()==="rules"},get children(){return T(Vt,{title:"Automation Rules",get children(){var Z=JH(),X=Z.firstChild;X.firstChild;var se=X.nextSibling,U=se.firstChild,E=U.firstChild,O=E.firstChild,L=O.nextSibling,G=L.nextSibling,K=G.nextSibling,q=K.nextSibling,B=U.nextSibling;return Z.style.setProperty("padding","1rem"),X.style.setProperty("margin-bottom","1rem"),X.style.setProperty("display","flex"),X.style.setProperty("justify-content","space-between"),c(X,T(mt,{variant:"primary",onClick:()=>i({}),children:"Add New Rule"}),null),c(B,T(_t,{get each(){return Zn.automationRules},children:H=>(()=>{var Y=sW(),te=Y.firstChild,oe=te.firstChild,pe=oe.firstChild,ne=pe.nextSibling,Q=te.nextSibling,ce=Q.nextSibling,ue=ce.nextSibling,de=ue.firstChild,ge=ue.nextSibling,ye=ge.firstChild,fe=ye.firstChild,Se=fe.nextSibling,qe=Se.nextSibling;return pe.style.setProperty("font-weight","600"),c(pe,()=>H.name),ne.style.setProperty("font-size","0.875rem"),ne.style.setProperty("color","var(--text-secondary)"),c(ne,()=>H.description),c(Q,()=>H.triggerEvent),c(ce,()=>H.priority),de.style.setProperty("font-weight","600"),c(de,()=>H.isActive?"Active":"Inactive"),ye.style.setProperty("display","flex"),ye.style.setProperty("gap","0.5rem"),fe.$$click=()=>d(H.id,!H.isActive),fe.style.setProperty("padding","0.25rem 0.5rem"),fe.style.setProperty("font-size","0.75rem"),fe.style.setProperty("border","none"),fe.style.setProperty("border-radius","4px"),fe.style.setProperty("color","white"),fe.style.setProperty("cursor","pointer"),c(fe,()=>H.isActive?"Disable":"Enable"),Se.$$click=()=>i(H),Se.style.setProperty("padding","0.25rem 0.5rem"),Se.style.setProperty("font-size","0.75rem"),Se.style.setProperty("border","1px solid var(--border-color)"),Se.style.setProperty("border-radius","4px"),Se.style.setProperty("background","white"),Se.style.setProperty("cursor","pointer"),qe.$$click=()=>u(H.id),qe.style.setProperty("padding","0.25rem 0.5rem"),qe.style.setProperty("font-size","0.75rem"),qe.style.setProperty("border","none"),qe.style.setProperty("border-radius","4px"),qe.style.setProperty("background","#ef4444"),qe.style.setProperty("color","white"),qe.style.setProperty("cursor","pointer"),be(Oe=>{var Ie=V,Be=V,ke=V,Ge=V,et=H.isActive?"#10b981":"#ef4444",ve=V,De=H.isActive?"#ef4444":"#10b981";return Oe.e=y(te,Ie,Oe.e),Oe.t=y(Q,Be,Oe.t),Oe.a=y(ce,ke,Oe.a),Oe.o=y(ue,Ge,Oe.o),et!==Oe.i&&((Oe.i=et)!=null?de.style.setProperty("color",et):de.style.removeProperty("color")),Oe.n=y(ge,ve,Oe.n),De!==Oe.s&&((Oe.s=De)!=null?fe.style.setProperty("background",De):fe.style.removeProperty("background")),Oe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),Y})()})),be(H=>{var Y=g,te=F,oe=F,pe=F,ne=F,Q=F;return H.e=y(se,Y,H.e),H.t=y(O,te,H.t),H.a=y(L,oe,H.a),H.o=y(G,pe,H.o),H.i=y(K,ne,H.i),H.n=y(q,Q,H.n),H},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),Z}})}}),null),c(N,T(We,{get when(){return e()==="mappings"},get children(){return T(Vt,{title:"Account Mappings",get children(){var Z=eW(),X=Z.firstChild;return X.firstChild,Z.style.setProperty("padding","1rem"),X.style.setProperty("margin-bottom","1rem"),X.style.setProperty("display","flex"),X.style.setProperty("justify-content","space-between"),c(X,T(mt,{variant:"primary",onClick:()=>s({}),children:"Add New Mapping"}),null),c(Z,T(We,{get when(){return Zn.accountMappings.length===0},get fallback(){return(()=>{var se=aW(),U=se.firstChild,E=U.firstChild,O=E.firstChild,L=O.nextSibling,G=L.nextSibling,K=G.nextSibling,q=K.nextSibling,B=q.nextSibling,H=U.nextSibling;return c(H,T(_t,{get each(){return Zn.accountMappings},children:Y=>(()=>{var te=lW(),oe=te.firstChild,pe=oe.firstChild,ne=pe.firstChild,Q=ne.nextSibling,ce=oe.nextSibling,ue=ce.nextSibling,de=ue.nextSibling,ge=de.nextSibling,ye=ge.firstChild,fe=ge.nextSibling,Se=fe.firstChild,qe=Se.firstChild,Oe=qe.nextSibling;return ne.style.setProperty("font-weight","600"),c(ne,()=>Y.name),Q.style.setProperty("font-size","0.875rem"),Q.style.setProperty("color","var(--text-secondary)"),c(Q,()=>Y.description),c(ce,()=>Y.transactionType),c(ue,()=>Y.debitAccountId),c(de,()=>Y.creditAccountId),ye.style.setProperty("font-weight","600"),c(ye,()=>Y.isActive?"Active":"Inactive"),Se.style.setProperty("display","flex"),Se.style.setProperty("gap","0.5rem"),qe.$$click=()=>s(Y),qe.style.setProperty("padding","0.25rem 0.5rem"),qe.style.setProperty("font-size","0.75rem"),qe.style.setProperty("border","1px solid var(--border-color)"),qe.style.setProperty("border-radius","4px"),qe.style.setProperty("background","white"),qe.style.setProperty("cursor","pointer"),Oe.$$click=()=>h(Y.id),Oe.style.setProperty("padding","0.25rem 0.5rem"),Oe.style.setProperty("font-size","0.75rem"),Oe.style.setProperty("border","none"),Oe.style.setProperty("border-radius","4px"),Oe.style.setProperty("background","#ef4444"),Oe.style.setProperty("color","white"),Oe.style.setProperty("cursor","pointer"),be(Ie=>{var Be=V,ke=V,Ge=V,et=V,ve=V,De=Y.isActive?"#10b981":"#ef4444",He=V;return Ie.e=y(oe,Be,Ie.e),Ie.t=y(ce,ke,Ie.t),Ie.a=y(ue,Ge,Ie.a),Ie.o=y(de,et,Ie.o),Ie.i=y(ge,ve,Ie.i),De!==Ie.n&&((Ie.n=De)!=null?ye.style.setProperty("color",De):ye.style.removeProperty("color")),Ie.s=y(fe,He,Ie.s),Ie},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),te})()})),be(Y=>{var te=g,oe=F,pe=F,ne=F,Q=F,ce=F,ue=F;return Y.e=y(se,te,Y.e),Y.t=y(O,oe,Y.t),Y.a=y(L,pe,Y.a),Y.o=y(G,ne,Y.o),Y.i=y(K,Q,Y.i),Y.n=y(q,ce,Y.n),Y.s=y(B,ue,Y.s),Y},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),se})()},get children(){var se=QH();return se.style.setProperty("text-align","center"),se.style.setProperty("color","var(--text-secondary)"),se.style.setProperty("font-style","italic"),se.style.setProperty("padding","2rem"),se}}),null),Z}})}}),null),c(N,T(We,{get when(){return e()==="audit"},get children(){return T(Vt,{title:"Automation Audit Log",get children(){var Z=rW(),X=Z.firstChild;return X.firstChild,Z.style.setProperty("padding","1rem"),X.style.setProperty("margin-bottom","1rem"),X.style.setProperty("display","flex"),X.style.setProperty("justify-content","space-between"),c(X,T(mt,{variant:"outline",onClick:()=>g1.clearAuditLog(),children:"Clear Log"}),null),c(Z,T(We,{get when(){return x().length>0},get fallback(){return(()=>{var se=cW();return se.style.setProperty("text-align","center"),se.style.setProperty("color","var(--text-secondary)"),se.style.setProperty("font-style","italic"),se.style.setProperty("padding","2rem"),se})()},get children(){var se=tW(),U=se.firstChild,E=U.firstChild,O=E.firstChild,L=O.nextSibling,G=L.nextSibling,K=G.nextSibling,q=K.nextSibling,B=U.nextSibling;return c(B,T(_t,{get each(){return x()},children:H=>(()=>{var Y=dW(),te=Y.firstChild,oe=te.firstChild,pe=te.nextSibling,ne=pe.firstChild,Q=pe.nextSibling,ce=Q.firstChild,ue=Q.nextSibling,de=ue.firstChild,ge=de.firstChild,ye=ue.nextSibling,fe=ye.firstChild;return oe.style.setProperty("font-size","0.875rem"),c(oe,()=>a(H.timestamp)),ne.style.setProperty("font-weight","600"),c(ne,()=>H.event),ce.style.setProperty("font-size","0.875rem"),c(ce,()=>H.rulesApplied.join(", ")||"None"),de.style.setProperty("font-size","0.875rem"),c(de,()=>H.entriesCreated.length,ge),fe.style.setProperty("font-weight","600"),c(fe,()=>H.success?"Success":"Failed"),c(ye,T(We,{get when(){return H.error},get children(){var Se=n0();return Se.style.setProperty("font-size","0.75rem"),Se.style.setProperty("color","#ef4444"),c(Se,()=>H.error),Se}}),null),be(Se=>{var qe=V,Oe=V,Ie=V,Be=V,ke=V,Ge=H.success?"#10b981":"#ef4444";return Se.e=y(te,qe,Se.e),Se.t=y(pe,Oe,Se.t),Se.a=y(Q,Ie,Se.a),Se.o=y(ue,Be,Se.o),Se.i=y(ye,ke,Se.i),Ge!==Se.n&&((Se.n=Ge)!=null?fe.style.setProperty("color",Ge):fe.style.removeProperty("color")),Se},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),Y})()})),be(H=>{var Y=g,te=F,oe=F,pe=F,ne=F,Q=F;return H.e=y(se,Y,H.e),H.t=y(O,te,H.t),H.a=y(L,oe,H.a),H.o=y(G,pe,H.o),H.i=y(K,ne,H.i),H.n=y(q,Q,H.n),H},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),se}}),null),Z}})}}),null),c(N,T(We,{get when(){return n()},get children(){return T(WH,{get rule(){return n()},onSave:f,onCancel:m})}}),null),c(N,T(We,{get when(){return o()},get children(){return T(YH,{get mapping(){return o()},onSave:p,onCancel:m})}}),null),be(Z=>{var X=P(e()==="overview"),se=P(e()==="rules"),U=P(e()==="mappings"),E=P(e()==="audit");return Z.e=y(w,X,Z.e),Z.t=y(_,se,Z.t),Z.a=y(W,U,Z.a),Z.o=y(ee,E,Z.o),Z},{e:void 0,t:void 0,a:void 0,o:void 0}),be(()=>D.checked=Zn.isEnabled),N})()};tr(["click"]);class hW{async createCustomEntry(e){const{type:r,description:n,reference:i,date:o,entries:s,postImmediately:a=!1}=e,l=s.reduce((p,m)=>p+m.amount,0),d=s.reduce((p,m)=>p+m.amount,0),u=s.flatMap(p=>[{id:`line_${Date.now()}_${Math.random()}`,accountId:p.debitAccountId,accountName:this.getAccountName(p.debitAccountId),description:p.description||n,debitAmount:p.amount,creditAmount:0},{id:`line_${Date.now()}_${Math.random()}`,accountId:p.creditAccountId,accountName:this.getAccountName(p.creditAccountId),description:p.description||n,debitAmount:0,creditAmount:p.amount}]),h={entryNumber:jn.getNextEntryNumber(),date:o||new Date().toISOString().split("T")[0],description:`${n} (Manual)`,reference:i||`MANUAL-${Date.now()}`,status:"draft",createdBy:"manual-automation",createdAt:new Date().toISOString(),totalDebit:l,totalCredit:d,lines:u},f=await jn.addJournalEntry(h);return a&&jn.postJournalEntry(f),f}async createQuickTransaction(e){const{transactionType:r,amount:n,description:i,reference:o,customAccounts:s,paymentMethod:a="cash",postImmediately:l=!1}=e;let d,u;if(r==="custom"&&s)d=s.debitAccountId,u=s.creditAccountId;else{const h=this.getAccountsForTransaction(r,a);d=h.debitAccountId,u=h.creditAccountId}return this.createCustomEntry({type:"manual_entry",description:i,reference:o,entries:[{debitAccountId:d,creditAccountId:u,amount:n,description:i}],postImmediately:l})}async createBankTransfer(e){const{fromAccountId:r,toAccountId:n,amount:i,description:o,reference:s,postImmediately:a=!1}=e;return this.createCustomEntry({type:"transfer",description:`Bank Transfer: ${o}`,reference:s||`XFER-${Date.now()}`,entries:[{debitAccountId:n,creditAccountId:r,amount:i,description:o}],postImmediately:a})}async createAdjustment(e){const{accountId:r,adjustmentAccountId:n,amount:i,type:o,description:s,reference:a,postImmediately:l=!1}=e,d=this.isDebitIncreaseAccount(r);let u,h;return o==="increase"&&d||o==="decrease"&&!d?(u=r,h=n):(u=n,h=r),this.createCustomEntry({type:"adjustment",description:`Adjustment: ${s}`,reference:a||`ADJ-${Date.now()}`,entries:[{debitAccountId:u,creditAccountId:h,amount:i,description:s}],postImmediately:l})}async createComplexTransaction(e){const{description:r,reference:n,date:i,entries:o,postImmediately:s=!1}=e,a=o.filter(m=>m.type==="debit"),l=o.filter(m=>m.type==="credit"),d=a.reduce((m,x)=>m+x.amount,0),u=l.reduce((m,x)=>m+x.amount,0);if(Math.abs(d-u)>.01)throw new Error(`Transaction not balanced. Debits: ${d}, Credits: ${u}`);const h=[...a.map(m=>({id:`line_${Date.now()}_${Math.random()}`,accountId:m.accountId,accountName:this.getAccountName(m.accountId),description:m.description||r,debitAmount:m.amount,creditAmount:0})),...l.map(m=>({id:`line_${Date.now()}_${Math.random()}`,accountId:m.accountId,accountName:this.getAccountName(m.accountId),description:m.description||r,debitAmount:0,creditAmount:m.amount}))],f={entryNumber:jn.getNextEntryNumber(),date:i||new Date().toISOString().split("T")[0],description:`${r} (Complex)`,reference:n||`COMPLEX-${Date.now()}`,status:"draft",createdBy:"manual-automation",createdAt:new Date().toISOString(),totalDebit:d,totalCredit:u,lines:h},p=await jn.addJournalEntry(f);return s&&jn.postJournalEntry(p),p}getAccountsForTransaction(e,r){const i={cash_sale:{cash:{debitAccountId:"1001",creditAccountId:"4001"},zelle:{debitAccountId:"1002",creditAccountId:"4001"},credit_card:{debitAccountId:"1003",creditAccountId:"4001"}},credit_sale:{default:{debitAccountId:"1101",creditAccountId:"4001"}},expense_payment:{cash:{debitAccountId:"5201",creditAccountId:"1001"},check:{debitAccountId:"5201",creditAccountId:"1001"}},customer_payment:{cash:{debitAccountId:"1001",creditAccountId:"1101"},zelle:{debitAccountId:"1002",creditAccountId:"1101"},credit_card:{debitAccountId:"1003",creditAccountId:"1101"}}}[e];if(!i)throw new Error(`Unknown transaction type: ${e}`);return i[r]||i.default||i[Object.keys(i)[0]]}isDebitIncreaseAccount(e){const r=e.charAt(0);return r==="1"||r==="5"}getAccountName(e){return{1001:"Cash - Operating Account",1002:"Cash - Zelle Account",1003:"Cash - Credit Card Processing",1101:"Accounts Receivable - Customers",1102:"Accounts Receivable - Freight Charges",1201:"Inventory - Products",1202:"Inventory - Packaging Materials",1301:"Prepaid Expenses",1401:"Customs Fees Receivable",1402:"Transit Insurance Receivable",2001:"Accounts Payable",2002:"Freight Payable",2101:"Accrued Salaries",2102:"Accrued Rent",2301:"Sales Tax Payable",2302:"Customs Fees Payable",2303:"Transit Insurance Payable",3001:"Owner's Equity",3101:"Retained Earnings",4001:"Sales Revenue - Products",4101:"Service Revenue - General",4201:"Transport Service Revenue",4202:"Freight Revenue - Air",4203:"Freight Revenue - Sea",4301:"Processing Revenue - Packaging",4302:"Processing Revenue - Storage",5001:"Cost of Goods Sold - Products",5002:"Cost of Goods Sold - Packaging",5101:"Freight Expense - Air",5102:"Freight Expense - Sea",5103:"Local Transport Expense",5201:"Salaries and Wages",5202:"Rent Expense - Office",5203:"Rent Expense - Warehouse",5301:"Utilities Expense",5302:"Insurance Expense",5303:"Office Supplies",5401:"Professional Fees",5402:"Bank Fees",5403:"Credit Card Processing Fees",5501:"Vehicle Expenses",5502:"Equipment Maintenance",5601:"Depreciation Expense"}[e]||`Account ${e}`}getAvailableAccounts(){return[{id:"1001",name:"Cash - Operating Account",type:"Asset"},{id:"1002",name:"Cash - Zelle Account",type:"Asset"},{id:"1003",name:"Cash - Credit Card Processing",type:"Asset"},{id:"1101",name:"Accounts Receivable - Customers",type:"Asset"},{id:"1102",name:"Accounts Receivable - Freight Charges",type:"Asset"},{id:"1201",name:"Inventory - Products",type:"Asset"},{id:"1202",name:"Inventory - Packaging Materials",type:"Asset"},{id:"1301",name:"Prepaid Expenses",type:"Asset"},{id:"1401",name:"Customs Fees Receivable",type:"Asset"},{id:"1402",name:"Transit Insurance Receivable",type:"Asset"},{id:"2001",name:"Accounts Payable",type:"Liability"},{id:"2002",name:"Freight Payable",type:"Liability"},{id:"2101",name:"Accrued Salaries",type:"Liability"},{id:"2102",name:"Accrued Rent",type:"Liability"},{id:"2301",name:"Sales Tax Payable",type:"Liability"},{id:"2302",name:"Customs Fees Payable",type:"Liability"},{id:"2303",name:"Transit Insurance Payable",type:"Liability"},{id:"3001",name:"Owner's Equity",type:"Equity"},{id:"3101",name:"Retained Earnings",type:"Equity"},{id:"4001",name:"Sales Revenue - Products",type:"Revenue"},{id:"4101",name:"Service Revenue - General",type:"Revenue"},{id:"4201",name:"Transport Service Revenue",type:"Revenue"},{id:"4202",name:"Freight Revenue - Air",type:"Revenue"},{id:"4203",name:"Freight Revenue - Sea",type:"Revenue"},{id:"4301",name:"Processing Revenue - Packaging",type:"Revenue"},{id:"4302",name:"Processing Revenue - Storage",type:"Revenue"},{id:"5001",name:"Cost of Goods Sold - Products",type:"Expense"},{id:"5002",name:"Cost of Goods Sold - Packaging",type:"Expense"},{id:"5101",name:"Freight Expense - Air",type:"Expense"},{id:"5102",name:"Freight Expense - Sea",type:"Expense"},{id:"5103",name:"Local Transport Expense",type:"Expense"},{id:"5201",name:"Salaries and Wages",type:"Expense"},{id:"5202",name:"Rent Expense - Office",type:"Expense"},{id:"5203",name:"Rent Expense - Warehouse",type:"Expense"},{id:"5301",name:"Utilities Expense",type:"Expense"},{id:"5302",name:"Insurance Expense",type:"Expense"},{id:"5303",name:"Office Supplies",type:"Expense"},{id:"5401",name:"Professional Fees",type:"Expense"},{id:"5402",name:"Bank Fees",type:"Expense"},{id:"5403",name:"Credit Card Processing Fees",type:"Expense"},{id:"5501",name:"Vehicle Expenses",type:"Expense"},{id:"5502",name:"Equipment Maintenance",type:"Expense"},{id:"5601",name:"Depreciation Expense",type:"Expense"}]}getTransactionTemplates(){return[{id:"cash_sale",name:"Cash Sale",description:"Record a cash sale transaction",type:"cash_sale"},{id:"zelle_sale",name:"Zelle Sale",description:"Record a sale paid via Zelle",type:"cash_sale"},{id:"credit_sale",name:"Credit Sale",description:"Record a sale on credit (accounts receivable)",type:"credit_sale"},{id:"customer_payment",name:"Customer Payment",description:"Record payment received from customer",type:"customer_payment"},{id:"freight_expense",name:"Freight Expense",description:"Record freight/shipping costs",type:"custom",defaultAccounts:{debitAccountId:"5101",creditAccountId:"1001"}},{id:"salary_payment",name:"Salary Payment",description:"Record salary/wage payments",type:"expense_payment"},{id:"rent_payment",name:"Rent Payment",description:"Record monthly rent payment",type:"custom",defaultAccounts:{debitAccountId:"5202",creditAccountId:"1001"}},{id:"bank_transfer",name:"Bank Transfer",description:"Transfer funds between bank accounts",type:"custom"}]}}const iy=new hW;var pW=le('<div><h3>Quick Transactions</h3><div><label>Use Template:</label><select><option value>Select a template...</option></select></div><div><div><label>Transaction Type:</label><select><option value=cash_sale>Cash Sale</option><option value=credit_sale>Credit Sale</option><option value=expense_payment>Expense Payment</option><option value=customer_payment>Customer Payment</option><option value=custom>Custom</option></select></div><div><label>Payment Method:</label><select><option value=cash>Cash</option><option value=zelle>Zelle</option><option value=credit_card>Credit Card</option><option value=check>Check</option></select></div></div><div><label>Amount:</label><input type=number step=0.01></div><div><label>Description:</label><input type=text placeholder="Enter transaction description"></div><div><label>Reference (Optional):</label><input type=text placeholder="Invoice number, receipt, etc."></div><div><label><input type=checkbox>Post immediately (skip draft status)</label></div><button>'),fW=le('<div><h3>Custom Journal Entries</h3><div><div><label>Entry Type:</label><select><option value=manual_entry>Manual Entry</option><option value=transfer>Transfer</option><option value=adjustment>Adjustment</option><option value=payment>Payment</option><option value=receipt>Receipt</option></select></div><div><label>Date:</label><input type=date></div></div><div><label>Description:</label><input type=text placeholder="Enter entry description"></div><div><label>Reference (Optional):</label><input type=text placeholder="Reference number or code"></div><div><div><h4>Entry Lines:</h4><button>Add Line</button></div></div><div><label><input type=checkbox>Post immediately (skip draft status)</label></div><button>'),yW=le("<div><div><h2>Custom Automation Panel</h2><p>Create manual journal entries with custom parameters on-demand.</p><div><button>Quick Transactions</button><button>Custom Entries"),CS=le("<div>"),mW=le("<option>"),gW=le('<div><div><div><label>Debit Account:</label><select></select></div><div><label>Credit Account:</label><select></select></div></div><div><div><label>Amount:</label><input type=number step=0.01></div><div><label>Line Description (Optional):</label><input type=text placeholder="Specific line description"></div><div>'),_S=le("<option> - "),vW=le("<button>Remove");const bW=()=>{const[t,e]=Ae("quick"),[r,n]=Ae(!1),[i,o]=Ae(""),[s,a]=Ae(""),[l,d]=Ae({transactionType:"cash_sale",amount:0,description:"",reference:"",paymentMethod:"cash",postImmediately:!1}),[u,h]=Ae({type:"manual_entry",description:"",reference:"",date:new Date().toISOString().split("T")[0],entries:[{debitAccountId:"1001",creditAccountId:"4001",amount:0,description:""}],postImmediately:!1}),f=zt(()=>iy.getAvailableAccounts()),p=zt(()=>iy.getTransactionTemplates()),m=()=>{o(""),a("")},x=async()=>{n(!0),m();try{const D=await iy.createQuickTransaction(l());o(`Transaction created successfully! Entry ID: ${D}`),d({transactionType:"cash_sale",amount:0,description:"",reference:"",paymentMethod:"cash",postImmediately:!1})}catch(D){a(D instanceof Error?D.message:"Failed to create transaction")}finally{n(!1)}},P=async()=>{n(!0),m();try{const D=await iy.createCustomEntry(u());o(`Custom entry created successfully! Entry ID: ${D}`),h({type:"manual_entry",description:"",reference:"",date:new Date().toISOString().split("T")[0],entries:[{debitAccountId:"1001",creditAccountId:"4001",amount:0,description:""}],postImmediately:!1})}catch(D){a(D instanceof Error?D.message:"Failed to create entry")}finally{n(!1)}},g=D=>{const $=p().find(w=>w.id===D);$&&d(w=>({...w,transactionType:$.type,description:$.description}))},F=()=>{h(D=>({...D,entries:[...D.entries,{debitAccountId:"1001",creditAccountId:"4001",amount:0,description:""}]}))},V=D=>{h($=>({...$,entries:$.entries.filter((w,_)=>_!==D)}))},N=(D,$,w)=>{h(_=>({..._,entries:_.entries.map((v,z)=>z===D?{...v,[$]:w}:v)}))},R=D=>({padding:"0.5rem 1rem",border:"none","background-color":D?"#3b82f6":"#e5e7eb",color:D?"white":"#374151","border-radius":"0.375rem",cursor:"pointer","font-weight":D?"600":"400"}),M={width:"100%",padding:"0.5rem",border:"1px solid #d1d5db","border-radius":"0.375rem","font-size":"0.875rem"},C={...M,"background-color":"white"},k={padding:"0.5rem 1rem","background-color":"#3b82f6",color:"white",border:"none","border-radius":"0.375rem",cursor:"pointer","font-weight":"500","disabled:opacity":"0.5","disabled:cursor":"not-allowed"};return(()=>{var D=yW(),$=D.firstChild,w=$.firstChild,_=w.nextSibling,v=_.nextSibling,z=v.firstChild,W=z.nextSibling;return D.style.setProperty("max-width","800px"),D.style.setProperty("margin","0 auto"),D.style.setProperty("padding","1rem"),$.style.setProperty("margin-bottom","2rem"),w.style.setProperty("font-size","1.5rem"),w.style.setProperty("font-weight","700"),w.style.setProperty("margin-bottom","1rem"),_.style.setProperty("color","#6b7280"),_.style.setProperty("margin-bottom","1.5rem"),v.style.setProperty("display","flex"),v.style.setProperty("gap","0.5rem"),v.style.setProperty("margin-bottom","2rem"),z.$$click=()=>e("quick"),W.$$click=()=>e("custom"),c($,(()=>{var A=Ve(()=>!!i());return()=>A()&&(()=>{var I=CS();return I.style.setProperty("padding","0.75rem"),I.style.setProperty("background-color","#d1fae5"),I.style.setProperty("color","#047857"),I.style.setProperty("border-radius","0.375rem"),I.style.setProperty("margin-bottom","1rem"),c(I,i),I})()})(),null),c($,(()=>{var A=Ve(()=>!!s());return()=>A()&&(()=>{var I=CS();return I.style.setProperty("padding","0.75rem"),I.style.setProperty("background-color","#fef2f2"),I.style.setProperty("color","#dc2626"),I.style.setProperty("border-radius","0.375rem"),I.style.setProperty("margin-bottom","1rem"),c(I,s),I})()})(),null),c($,T(We,{get when(){return t()==="quick"},get children(){var A=pW(),I=A.firstChild,ee=I.nextSibling,Z=ee.firstChild,X=Z.nextSibling;X.firstChild;var se=ee.nextSibling,U=se.firstChild,E=U.firstChild,O=E.nextSibling,L=U.nextSibling,G=L.firstChild,K=G.nextSibling,q=se.nextSibling,B=q.firstChild,H=B.nextSibling,Y=q.nextSibling,te=Y.firstChild,oe=te.nextSibling,pe=Y.nextSibling,ne=pe.firstChild,Q=ne.nextSibling,ce=pe.nextSibling,ue=ce.firstChild,de=ue.firstChild,ge=ce.nextSibling;return I.style.setProperty("font-size","1.25rem"),I.style.setProperty("font-weight","600"),I.style.setProperty("margin-bottom","1rem"),ee.style.setProperty("margin-bottom","1.5rem"),Z.style.setProperty("display","block"),Z.style.setProperty("font-weight","500"),Z.style.setProperty("margin-bottom","0.5rem"),X.addEventListener("change",ye=>g(ye.currentTarget.value)),c(X,T(_t,{get each(){return p()},children:ye=>(()=>{var fe=mW();return c(fe,()=>ye.name),be(()=>fe.value=ye.id),fe})()}),null),se.style.setProperty("display","grid"),se.style.setProperty("grid-template-columns","1fr 1fr"),se.style.setProperty("gap","1rem"),se.style.setProperty("margin-bottom","1rem"),E.style.setProperty("display","block"),E.style.setProperty("font-weight","500"),E.style.setProperty("margin-bottom","0.5rem"),O.addEventListener("change",ye=>d(fe=>({...fe,transactionType:ye.currentTarget.value}))),G.style.setProperty("display","block"),G.style.setProperty("font-weight","500"),G.style.setProperty("margin-bottom","0.5rem"),K.addEventListener("change",ye=>d(fe=>({...fe,paymentMethod:ye.currentTarget.value}))),q.style.setProperty("margin-bottom","1rem"),B.style.setProperty("display","block"),B.style.setProperty("font-weight","500"),B.style.setProperty("margin-bottom","0.5rem"),H.$$input=ye=>d(fe=>({...fe,amount:parseFloat(ye.currentTarget.value)||0})),Y.style.setProperty("margin-bottom","1rem"),te.style.setProperty("display","block"),te.style.setProperty("font-weight","500"),te.style.setProperty("margin-bottom","0.5rem"),oe.$$input=ye=>d(fe=>({...fe,description:ye.currentTarget.value})),pe.style.setProperty("margin-bottom","1rem"),ne.style.setProperty("display","block"),ne.style.setProperty("font-weight","500"),ne.style.setProperty("margin-bottom","0.5rem"),Q.$$input=ye=>d(fe=>({...fe,reference:ye.currentTarget.value})),ce.style.setProperty("margin-bottom","1.5rem"),ue.style.setProperty("display","flex"),ue.style.setProperty("align-items","center"),ue.style.setProperty("gap","0.5rem"),de.addEventListener("change",ye=>d(fe=>({...fe,postImmediately:ye.currentTarget.checked}))),ge.$$click=x,c(ge,()=>r()?"Creating...":"Create Quick Transaction"),be(ye=>{var fe=C,Se=C,qe=C,Oe=M,Ie=M,Be=M,ke=k,Ge=r()||!l().description||l().amount<=0;return ye.e=y(X,fe,ye.e),ye.t=y(O,Se,ye.t),ye.a=y(K,qe,ye.a),ye.o=y(H,Oe,ye.o),ye.i=y(oe,Ie,ye.i),ye.n=y(Q,Be,ye.n),ye.s=y(ge,ke,ye.s),Ge!==ye.h&&(ge.disabled=ye.h=Ge),ye},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),be(()=>O.value=l().transactionType),be(()=>K.value=l().paymentMethod),be(()=>H.value=l().amount),be(()=>oe.value=l().description),be(()=>Q.value=l().reference),be(()=>de.checked=l().postImmediately),A}}),null),c($,T(We,{get when(){return t()==="custom"},get children(){var A=fW(),I=A.firstChild,ee=I.nextSibling,Z=ee.firstChild,X=Z.firstChild,se=X.nextSibling,U=Z.nextSibling,E=U.firstChild,O=E.nextSibling,L=ee.nextSibling,G=L.firstChild,K=G.nextSibling,q=L.nextSibling,B=q.firstChild,H=B.nextSibling,Y=q.nextSibling,te=Y.firstChild,oe=te.firstChild,pe=oe.nextSibling,ne=Y.nextSibling,Q=ne.firstChild,ce=Q.firstChild,ue=ne.nextSibling;return I.style.setProperty("font-size","1.25rem"),I.style.setProperty("font-weight","600"),I.style.setProperty("margin-bottom","1rem"),ee.style.setProperty("display","grid"),ee.style.setProperty("grid-template-columns","1fr 1fr"),ee.style.setProperty("gap","1rem"),ee.style.setProperty("margin-bottom","1rem"),X.style.setProperty("display","block"),X.style.setProperty("font-weight","500"),X.style.setProperty("margin-bottom","0.5rem"),se.addEventListener("change",de=>h(ge=>({...ge,type:de.currentTarget.value}))),E.style.setProperty("display","block"),E.style.setProperty("font-weight","500"),E.style.setProperty("margin-bottom","0.5rem"),O.$$input=de=>h(ge=>({...ge,date:de.currentTarget.value})),L.style.setProperty("margin-bottom","1rem"),G.style.setProperty("display","block"),G.style.setProperty("font-weight","500"),G.style.setProperty("margin-bottom","0.5rem"),K.$$input=de=>h(ge=>({...ge,description:de.currentTarget.value})),q.style.setProperty("margin-bottom","1.5rem"),B.style.setProperty("display","block"),B.style.setProperty("font-weight","500"),B.style.setProperty("margin-bottom","0.5rem"),H.$$input=de=>h(ge=>({...ge,reference:de.currentTarget.value})),Y.style.setProperty("margin-bottom","1.5rem"),te.style.setProperty("display","flex"),te.style.setProperty("justify-content","space-between"),te.style.setProperty("align-items","center"),te.style.setProperty("margin-bottom","1rem"),oe.style.setProperty("font-size","1rem"),oe.style.setProperty("font-weight","600"),pe.$$click=F,c(Y,T(_t,{get each(){return u().entries},children:(de,ge)=>(()=>{var ye=gW(),fe=ye.firstChild,Se=fe.firstChild,qe=Se.firstChild,Oe=qe.nextSibling,Ie=Se.nextSibling,Be=Ie.firstChild,ke=Be.nextSibling,Ge=fe.nextSibling,et=Ge.firstChild,ve=et.firstChild,De=ve.nextSibling,He=et.nextSibling,Je=He.firstChild,Le=Je.nextSibling,Te=He.nextSibling;return ye.style.setProperty("border","1px solid #d1d5db"),ye.style.setProperty("border-radius","0.375rem"),ye.style.setProperty("padding","1rem"),ye.style.setProperty("margin-bottom","1rem"),fe.style.setProperty("display","grid"),fe.style.setProperty("grid-template-columns","1fr 1fr"),fe.style.setProperty("gap","1rem"),fe.style.setProperty("margin-bottom","1rem"),qe.style.setProperty("display","block"),qe.style.setProperty("font-weight","500"),qe.style.setProperty("margin-bottom","0.5rem"),Oe.addEventListener("change",he=>N(ge(),"debitAccountId",he.currentTarget.value)),c(Oe,T(_t,{get each(){return f()},children:he=>(()=>{var Ne=_S(),rt=Ne.firstChild;return c(Ne,()=>he.id,rt),c(Ne,()=>he.name,null),be(()=>Ne.value=he.id),Ne})()})),Be.style.setProperty("display","block"),Be.style.setProperty("font-weight","500"),Be.style.setProperty("margin-bottom","0.5rem"),ke.addEventListener("change",he=>N(ge(),"creditAccountId",he.currentTarget.value)),c(ke,T(_t,{get each(){return f()},children:he=>(()=>{var Ne=_S(),rt=Ne.firstChild;return c(Ne,()=>he.id,rt),c(Ne,()=>he.name,null),be(()=>Ne.value=he.id),Ne})()})),Ge.style.setProperty("display","grid"),Ge.style.setProperty("grid-template-columns","1fr 2fr auto"),Ge.style.setProperty("gap","1rem"),Ge.style.setProperty("align-items","end"),ve.style.setProperty("display","block"),ve.style.setProperty("font-weight","500"),ve.style.setProperty("margin-bottom","0.5rem"),De.$$input=he=>N(ge(),"amount",parseFloat(he.currentTarget.value)||0),Je.style.setProperty("display","block"),Je.style.setProperty("font-weight","500"),Je.style.setProperty("margin-bottom","0.5rem"),Le.$$input=he=>N(ge(),"description",he.currentTarget.value),c(Te,(()=>{var he=Ve(()=>u().entries.length>1);return()=>he()&&(()=>{var Ne=vW();return Ne.$$click=()=>V(ge()),be(rt=>y(Ne,{...k,"background-color":"#dc2626"},rt)),Ne})()})()),be(he=>{var Ne=C,rt=C,re=M,Ue=M;return he.e=y(Oe,Ne,he.e),he.t=y(ke,rt,he.t),he.a=y(De,re,he.a),he.o=y(Le,Ue,he.o),he},{e:void 0,t:void 0,a:void 0,o:void 0}),be(()=>Oe.value=de.debitAccountId),be(()=>ke.value=de.creditAccountId),be(()=>De.value=de.amount),be(()=>Le.value=de.description||""),ye})()}),null),ne.style.setProperty("margin-bottom","1.5rem"),Q.style.setProperty("display","flex"),Q.style.setProperty("align-items","center"),Q.style.setProperty("gap","0.5rem"),ce.addEventListener("change",de=>h(ge=>({...ge,postImmediately:de.currentTarget.checked}))),ue.$$click=P,c(ue,()=>r()?"Creating...":"Create Custom Entry"),be(de=>{var ge=C,ye=M,fe=M,Se=M,qe={...k,"background-color":"#059669"},Oe=k,Ie=r()||!u().description||u().entries.some(Be=>Be.amount<=0);return de.e=y(se,ge,de.e),de.t=y(O,ye,de.t),de.a=y(K,fe,de.a),de.o=y(H,Se,de.o),de.i=y(pe,qe,de.i),de.n=y(ue,Oe,de.n),Ie!==de.s&&(ue.disabled=de.s=Ie),de},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),be(()=>se.value=u().type),be(()=>O.value=u().date),be(()=>K.value=u().description),be(()=>H.value=u().reference),be(()=>ce.checked=u().postImmediately),A}}),null),be(A=>{var I=R(t()==="quick"),ee=R(t()==="custom");return A.e=y(z,I,A.e),A.t=y(W,ee,A.t),A},{e:void 0,t:void 0}),D})()};tr(["click","input"]);var AS=le("<div><button>← Back to Menu"),PW=le("<div><h2>Account Automation Menu</h2><p>Choose how you want to manage journal entries and account automation.</p><div><button><div><h3>🎯 Manual Custom Automation</h3><p>Create journal entries on-demand with custom parameters. Perfect for one-off transactions, adjustments, and when you need full control over the entries.</p><div><span>Recommended for custom transactions</span></div></div></button><button><div><h3>⚙️ Automatic Automation Configuration</h3><p>Configure rules that automatically create journal entries when certain events occur (like completing invoices, receiving payments, etc.).</p><div><span>Set up once, works automatically</span></div></div></button><div><h4>💡 Quick Guide:</h4><ul><li><strong>Manual Custom Automation:</strong> Use when you need to create specific entries with custom parameters</li><li><strong>Automatic Configuration:</strong> Use to set up rules that trigger automatically during business operations</li><li>Both systems work together - you can use automatic rules for common transactions and manual entries for exceptions");const xW=()=>{const[t,e]=Ae("menu"),r={display:"block",width:"100%",padding:"1rem","margin-bottom":"0.5rem","background-color":"#f9fafb",border:"1px solid #d1d5db","border-radius":"0.5rem","text-align":"left",cursor:"pointer","text-decoration":"none",color:"#374151",transition:"all 0.2s ease-in-out"},n={padding:"0.5rem 1rem","background-color":"#6b7280",color:"white",border:"none","border-radius":"0.375rem",cursor:"pointer","font-weight":"500","margin-bottom":"1rem"};return[T(We,{get when(){return t()==="custom"},get children(){var i=AS(),o=i.firstChild;return i.style.setProperty("max-width","1200px"),i.style.setProperty("margin","0 auto"),i.style.setProperty("padding","2rem"),o.$$click=()=>e("menu"),c(i,T(bW,{}),null),be(s=>y(o,n,s)),i}}),T(We,{get when(){return t()==="config"},get children(){var i=AS(),o=i.firstChild;return i.style.setProperty("max-width","1200px"),i.style.setProperty("margin","0 auto"),i.style.setProperty("padding","2rem"),o.$$click=()=>e("menu"),c(i,T(uW,{}),null),be(s=>y(o,n,s)),i}}),T(We,{get when(){return t()==="menu"},get children(){var i=PW(),o=i.firstChild,s=o.nextSibling,a=s.nextSibling,l=a.firstChild,d=l.firstChild,u=d.firstChild,h=u.nextSibling,f=h.nextSibling,p=f.firstChild,m=l.nextSibling,x=m.firstChild,P=x.firstChild,g=P.nextSibling,F=g.nextSibling,V=F.firstChild,N=m.nextSibling,R=N.firstChild,M=R.nextSibling;return i.style.setProperty("max-width","600px"),i.style.setProperty("margin","0 auto"),i.style.setProperty("padding","2rem"),o.style.setProperty("font-size","1.5rem"),o.style.setProperty("font-weight","700"),o.style.setProperty("margin-bottom","1rem"),s.style.setProperty("color","#6b7280"),s.style.setProperty("margin-bottom","2rem"),l.$$mouseout=C=>{C.currentTarget.style.backgroundColor="#f9fafb",C.currentTarget.style.borderColor="#d1d5db"},l.$$mouseover=C=>{C.currentTarget.style.backgroundColor="#f3f4f6",C.currentTarget.style.borderColor="#9ca3af"},l.$$click=()=>e("custom"),u.style.setProperty("font-size","1.125rem"),u.style.setProperty("font-weight","600"),u.style.setProperty("margin-bottom","0.5rem"),h.style.setProperty("color","#6b7280"),h.style.setProperty("font-size","0.875rem"),f.style.setProperty("margin-top","0.75rem"),p.style.setProperty("background-color","#dbeafe"),p.style.setProperty("color","#1e40af"),p.style.setProperty("padding","0.25rem 0.5rem"),p.style.setProperty("border-radius","0.25rem"),p.style.setProperty("font-size","0.75rem"),p.style.setProperty("font-weight","500"),m.$$mouseout=C=>{C.currentTarget.style.backgroundColor="#f9fafb",C.currentTarget.style.borderColor="#d1d5db"},m.$$mouseover=C=>{C.currentTarget.style.backgroundColor="#f3f4f6",C.currentTarget.style.borderColor="#9ca3af"},m.$$click=()=>e("config"),P.style.setProperty("font-size","1.125rem"),P.style.setProperty("font-weight","600"),P.style.setProperty("margin-bottom","0.5rem"),g.style.setProperty("color","#6b7280"),g.style.setProperty("font-size","0.875rem"),F.style.setProperty("margin-top","0.75rem"),V.style.setProperty("background-color","#ecfdf5"),V.style.setProperty("color","#065f46"),V.style.setProperty("padding","0.25rem 0.5rem"),V.style.setProperty("border-radius","0.25rem"),V.style.setProperty("font-size","0.75rem"),V.style.setProperty("font-weight","500"),N.style.setProperty("margin-top","2rem"),N.style.setProperty("padding","1rem"),N.style.setProperty("background-color","#fef7cd"),N.style.setProperty("border-radius","0.5rem"),N.style.setProperty("border","1px solid #f59e0b"),R.style.setProperty("font-size","1rem"),R.style.setProperty("font-weight","600"),R.style.setProperty("color","#92400e"),R.style.setProperty("margin-bottom","0.5rem"),M.style.setProperty("color","#92400e"),M.style.setProperty("font-size","0.875rem"),M.style.setProperty("line-height","1.5"),M.style.setProperty("margin-left","1rem"),be(C=>{var k=r,D=r;return C.e=y(l,k,C.e),C.t=y(m,D,C.t),C},{e:void 0,t:void 0}),i}})]};tr(["click","mouseover","mouseout"]);class SW{listeners=new Map;eventHistory=[];maxHistorySize=1e3;on(e,r,n){const i={id:n.id,eventTypes:Array.isArray(e)?e:[e],handler:r,priority:n.priority||100,isActive:n.isActive!==!1};return i.eventTypes.forEach(o=>{this.listeners.has(o)||this.listeners.set(o,[]);const a=this.listeners.get(o).filter(l=>l.id!==i.id);a.push(i),a.sort((l,d)=>d.priority-l.priority),this.listeners.set(o,a)}),i.id}off(e){this.listeners.forEach((r,n)=>{const i=r.filter(o=>o.id!==e);this.listeners.set(n,i)})}async emit(e){this.eventHistory.unshift(e),this.eventHistory.length>this.maxHistorySize&&(this.eventHistory=this.eventHistory.slice(0,this.maxHistorySize));const n=(this.listeners.get(e.type)||[]).filter(i=>i.isActive);for(const i of n)try{await i.handler(e)}catch(o){console.error(`Event listener ${i.id} failed for event ${e.type}:`,o)}}getHistory(e=100){return this.eventHistory.slice(0,e)}getListeners(e){if(e)return this.listeners.get(e)||[];const r=[];return this.listeners.forEach(n=>{n.forEach(i=>{r.find(o=>o.id===i.id)||r.push(i)})}),r}toggleListener(e,r){this.listeners.forEach(n=>{const i=n.find(o=>o.id===e);i&&(i.isActive=r)})}clearHistory(){this.eventHistory=[]}getStats(){const e={};let r=0;this.listeners.forEach((o,s)=>{e[s]=o.length,r+=o.length});const n=new Date(Date.now()-24*60*60*1e3),i=this.eventHistory.filter(o=>o.timestamp>n).reduce((o,s)=>{const a=o.find(l=>l.type===s.type);return a?a.count++:o.push({type:s.type,count:1}),o},[]);return{totalListeners:r,listenersByType:e,totalEvents:this.eventHistory.length,recentEvents:i}}}const $3=new SW,Ga={async getAll(){return Hn(async()=>{const t=await Tn({query:"getEventRules",queryString:"businessId = :businessId",params:{":businessId":Xt.getBusinessId()}});return od(t)},()=>Bn.eventRules.getAll())},async getById(t){return Hn(async()=>{const e=await Tn({query:"getEventRules",queryString:"businessId = :businessId AND id = :ruleId",params:{":businessId":Xt.getBusinessId(),":ruleId":t}});return od(e)[0]||null},()=>Bn.eventRules.getById(t))},async getByEventType(t){return Hn(async()=>{const e=await Tn({query:"getEventRules",queryString:"businessId = :businessId AND eventType = :eventType AND isActive = true",params:{":businessId":Xt.getBusinessId(),":eventType":t}});return od(e)},()=>Bn.eventRules.getByEventType(t))},async create(t){return Hn(async()=>{const e={...t,id:`rule_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,businessId:Xt.getBusinessId(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log("Creating event rule with ID:",e.id),console.log("Rule data:",e);const r=await Tn({query:"addEventRules",form:{data:e}});console.log("GraphQL response:",r);const n=r?.addEventRules;if(!n)throw new Error("Failed to create event rule");return n},()=>Bn.eventRules.create(t))},async update(t,e){return Hn(async()=>{const r={...e,id:t,businessId:Xt.getBusinessId(),updatedAt:new Date().toISOString()},i=(await Tn({query:"updateEventRules",form:{id:t,data:r}}))?.updateEventRules;if(!i)throw new Error("Failed to update event rule");return i},()=>Bn.eventRules.update(t,e))},async delete(t){return Hn(async()=>{if((await Tn({query:"deleteEventRules",params:{id:t,businessId:Xt.getBusinessId()}}))?.deleteEventRules)return{success:!0,message:"Event rule deleted successfully"};throw new Error("Failed to delete event rule")},()=>Bn.eventRules.delete(t))},async toggleActive(t,e){return this.update(t,{isActive:e})},async testRule(t,e){return Hn(async()=>(await Tn({query:"testEventRule",form:{rule:t,sampleData:e,businessId:Xt.getBusinessId()}}))?.testEventRule||{success:!1,error:"Failed to test rule"},()=>Bn.eventRules.testRule(t,e))},async getExecutionHistory(t,e=100){return Hn(async()=>{const r=t?"businessId = :businessId AND ruleId = :ruleId":"businessId = :businessId",n={":businessId":Xt.getBusinessId()};t&&(n[":ruleId"]=t);const i=await Tn({query:"getEventRuleHistory",queryString:r,params:n,form:{limit:e}});return od(i)},()=>Bn.eventRules.getExecutionHistory(t,e))},async bulkToggle(t,e){return Hn(async()=>(await Tn({query:"bulkUpdateEventRules",form:{ruleIds:t,updates:{isActive:e,updatedAt:new Date().toISOString()},businessId:Xt.getBusinessId()}}))?.bulkUpdateEventRules||{success:!1,updated:0,failed:t},()=>Bn.eventRules.bulkToggle(t,e))},async exportRules(){return(await this.getAll()).map(e=>({...e,id:void 0,businessId:void 0}))},async importRules(t){return Hn(async()=>(await Tn({query:"importEventRules",form:{rules:t.map(r=>({...r,businessId:Xt.getBusinessId()})),businessId:Xt.getBusinessId()}}))?.importEventRules||{success:!1,imported:0,failed:t.length,errors:["Import failed"]},()=>Bn.eventRules.importRules(t))}};class wW{rules=new Map;auditLog=[];constructor(){$3.on(["invoice_completed","invoice_created","invoice_updated","invoice_cancelled","payment_received","payment_refunded","inventory_received","inventory_sold","inventory_adjusted","expense_created","expense_approved","expense_paid","service_rendered","freight_processed","customs_cleared","bank_transaction_imported"],this.handleEvent.bind(this),{id:"automation_service",priority:50}),this.loadRulesFromApi()}addRule(e){const r={...e,id:`rule_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:new Date,updatedAt:new Date};return this.rules.set(r.id,r),r.id}updateRule(e,r){const n=this.rules.get(e);if(!n)return!1;const i={...n,...r,id:e,updatedAt:new Date};return this.rules.set(e,i),!0}removeRule(e){return this.rules.delete(e)}getRules(){return Array.from(this.rules.values())}getRulesForEvent(e){return this.getRules().filter(r=>r.eventType===e&&r.isActive).sort((r,n)=>n.priority-r.priority)}async handleEvent(e){const r=this.getRulesForEvent(e.type);if(r.length===0)return;const n=[],i=[];let o=!0,s;try{for(const a of r)try{if(this.evaluateConditions(a.conditions,e)){const d=await this.createJournalEntry(a,e);n.push(a.name),i.push(d)}}catch(l){console.error(`Error executing rule ${a.name}:`,l),s=l instanceof Error?l.message:"Unknown error",o=!1}}catch(a){console.error("Error processing event automation:",a),s=a instanceof Error?a.message:"Unknown error",o=!1}this.auditLog.unshift({timestamp:new Date,eventId:e.id,eventType:e.type,rulesTriggered:n,entriesCreated:i,success:o,error:s}),this.auditLog.length>1e3&&(this.auditLog=this.auditLog.slice(0,1e3))}evaluateConditions(e,r){return e.length===0?!0:e.every(n=>{const i=this.getNestedValue(r,n.field);return this.evaluateCondition(i,n)})}evaluateCondition(e,r){const{operator:n,value:i,dataType:o}=r,s=this.convertValue(e,o),a=this.convertValue(i,o);switch(n){case"equals":return s===a;case"notEquals":return s!==a;case"greaterThan":return s>a;case"lessThan":return s<a;case"greaterThanOrEqual":return s>=a;case"lessThanOrEqual":return s<=a;case"contains":return String(s).toLowerCase().includes(String(a).toLowerCase());case"notContains":return!String(s).toLowerCase().includes(String(a).toLowerCase());case"in":return Array.isArray(a)&&a.includes(s);case"notIn":return Array.isArray(a)&&!a.includes(s);case"exists":return e!=null;case"notExists":return e==null;default:return!1}}convertValue(e,r){if(e==null)return e;switch(r){case"number":return Number(e);case"string":return String(e);case"boolean":return!!e;case"date":return new Date(e);case"array":return Array.isArray(e)?e:[e];default:return e}}async createJournalEntry(e,r){const{journalEntryTemplate:n}=e,i=this.processTemplate(n.description,r),o=this.processTemplate(n.reference,r),s=[];for(const h of n.lines){if(h.conditions&&h.conditions.length>0&&!this.evaluateConditions(h.conditions,r))continue;const f=this.evaluateAmountExpression(h.amountExpression,r);if(f===0)continue;const p=this.processTemplate(h.accountExpression,r),m=h.subAccountExpression?this.processTemplate(h.subAccountExpression,r):void 0,x=this.processTemplate(h.descriptionTemplate,r),P={id:`line_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,accountId:p,accountName:this.getAccountName(p),subAccountId:m,subAccountName:m?this.getAccountName(m):void 0,description:x,debitAmount:h.isDebit?f:0,creditAmount:h.isDebit?0:f,reference:o};s.push(P)}if(s.length===0)throw new Error("No valid journal entry lines generated");const a=s.reduce((h,f)=>h+f.debitAmount,0),l=s.reduce((h,f)=>h+f.creditAmount,0);if(Math.abs(a-l)>.01)throw new Error(`Journal entry not balanced. Debits: ${a}, Credits: ${l}`);const d={entryNumber:jn.getNextEntryNumber(),date:new Date().toISOString().split("T")[0],description:i,reference:o,status:"draft",createdBy:"automation",createdAt:new Date().toISOString(),totalDebit:a,totalCredit:l,lines:s};return await jn.addJournalEntry(d)}processTemplate(e,r){return e.replace(/\{([^}]+)\}/g,(n,i)=>{const o=this.getNestedValue(r,i);return String(o||n)})}evaluateAmountExpression(e,r){try{if(!isNaN(Number(e)))return Number(e);const n=this.getNestedValue(r,e);return Number(n)||0}catch(n){return console.error(`Error evaluating amount expression: ${e}`,n),0}}getNestedValue(e,r){return r.split(".").reduce((n,i)=>n?.[i],e)}getAccountName(e){return{1001:"Cash - Operating Account",1002:"Cash - Zelle Account",1003:"Cash - Credit Card Processing",1101:"Accounts Receivable - Customers",1102:"Accounts Receivable - Freight Charges",1201:"Inventory - Products",1202:"Inventory - Packaging Materials",1301:"Prepaid Expenses",1401:"Customs Fees Receivable",1402:"Transit Insurance Receivable",2001:"Accounts Payable",2002:"Freight Payable",2101:"Accrued Salaries",2102:"Accrued Rent",2301:"Sales Tax Payable",2302:"Customs Fees Payable",2303:"Transit Insurance Payable",3001:"Owner's Equity",3101:"Retained Earnings",4001:"Sales Revenue - Products",4101:"Service Revenue - General",4201:"Transport Service Revenue",4202:"Freight Revenue - Air",4203:"Freight Revenue - Sea",4301:"Processing Revenue - Packaging",4302:"Processing Revenue - Storage",5001:"Cost of Goods Sold - Products",5002:"Cost of Goods Sold - Packaging",5101:"Freight Expense - Air",5102:"Freight Expense - Sea",5103:"Local Transport Expense",5201:"Salaries and Wages",5202:"Rent Expense - Office",5203:"Rent Expense - Warehouse",5301:"Utilities Expense",5302:"Insurance Expense",5303:"Office Supplies",5401:"Professional Fees",5402:"Bank Fees",5403:"Credit Card Processing Fees",5501:"Vehicle Expenses",5502:"Equipment Maintenance",5601:"Depreciation Expense"}[e]||`Account ${e}`}getAuditLog(e=100){return this.auditLog.slice(0,e)}clearAuditLog(){this.auditLog=[]}exportRules(){return this.getRules()}importRules(e){this.rules.clear(),e.forEach(r=>{this.rules.set(r.id,r)})}syncRules(e){this.rules.clear(),e.forEach(r=>{this.rules.set(r.id,r)})}async loadRulesFromApi(){try{const e=await Ga.getAll();this.syncRules(e)}catch(e){console.error("Failed to load event rules from API:",e)}}testRule(e,r){const n=e.conditions.map(s=>({condition:s,result:this.evaluateCondition(this.getNestedValue(r,s.field),s)})),i=n.every(s=>s.result),o={wouldTrigger:i,conditionResults:n};if(i)try{const s=this.processTemplate(e.journalEntryTemplate.description,r),a=this.processTemplate(e.journalEntryTemplate.reference,r),l=e.journalEntryTemplate.lines.map(d=>{const u=this.evaluateAmountExpression(d.amountExpression,r),h=this.processTemplate(d.accountExpression,r),f=this.processTemplate(d.descriptionTemplate,r);return{accountId:h,accountName:this.getAccountName(h),description:f,debitAmount:d.isDebit?u:0,creditAmount:d.isDebit?0:u}});o.estimatedJournalEntry={description:s,reference:a,lines:l}}catch(s){o.errors=[s instanceof Error?s.message:"Unknown error"]}return o}}const oy=new wW,Nt=(t,e,r=!1,n)=>({type:t,description:e,required:r,...n}),CW={eventType:"invoice_completed",displayName:"Invoice Completed",description:"Triggered when an invoice is marked as completed",category:"financial",dataStructure:{"data.invoice":Nt("string","Invoice number",!0,{example:"B47G1D-YY_8635-20250810"}),"data.description":Nt("string","Invoice description",!1,{example:"Customer order description"}),"data.store":Nt("string","Store code",!0,{example:"YY_8665"}),"data.guide":Nt("string","Guide number",!0,{example:"2521"}),"data.createDate":Nt("date","Invoice creation date",!0,{example:"2025-08-13"}),"data.type":Nt("string","Invoice type",!0,{example:"SALES"}),"data.isCompleted":Nt("boolean","Invoice completion status",!0,{example:!0}),"data.shipper_consignee.name":Nt("string","Full name",!0,{example:"SUCEL NUNEZ JORGE"}),"data.shipper_consignee.firstName":Nt("string","First name",!1,{example:"YASEL"}),"data.shipper_consignee.middleName":Nt("string","Middle name",!1,{example:""}),"data.shipper_consignee.lastName":Nt("string","Last name",!1,{example:"VASQUES JORGE"}),"data.shipper_consignee.lastName2":Nt("string","Second last name",!1,{example:""}),"data.shipper_consignee.phoneNumber":Nt("string","Primary phone number",!1,{example:"531101638"}),"data.shipper_consignee.phoneNumberS":Nt("string","Secondary phone number",!1,{example:""}),"data.shipper_consignee.cid":Nt("string","Customer ID number",!1,{example:"82072829422"}),"data.shipper_consignee.passport":Nt("string","Passport number",!1,{example:""}),"data.shipper_consignee.address":Nt("string","Full address",!1,{example:"Calle undefined"}),"data.products[0].id":Nt("string","Product line item ID",!1,{example:"1755310725671"}),"data.products[0].product.id":Nt("string","Product ID",!1,{example:"AjlXorLU63dtPDrm"}),"data.products[0].product.code":Nt("string","Product code",!1,{example:"K89G06815"}),"data.products[0].product.label":Nt("string","Product label/name",!1,{example:"SAZON COMPLETO BADIA 7 OZ"}),"data.products[0].product.price":Nt("number","Product base price",!1,{format:"currency",example:0}),"data.products[0].qty":Nt("number","Product quantity",!1,{example:4}),"data.products[0].salePrice":Nt("number","Product sale price",!1,{format:"currency",example:8}),"data.products[0].total":Nt("number","Product line total",!1,{format:"currency",example:32}),"data.reservas[0].id":Nt("string","Reserva line item ID",!1,{example:"1755276669614"}),"data.reservas[0].type":Nt("string","Reserva type",!1,{example:"Ropa"}),"data.reservas[0].qty":Nt("number","Reserva quantity in lbs",!1,{example:120}),"data.reservas[0].price":Nt("number","Reserva price per lb",!1,{format:"currency",example:4}),"data.reservas[0].arancel":Nt("number","Reserva customs fee",!1,{format:"currency",example:0}),"data.reservas[0].total":Nt("number","Reserva line total",!1,{format:"currency",example:480}),"data.services[0].id":Nt("string","Service line item ID",!1,{example:"1755395460664"}),"data.services[0].type":Nt("string","Service type",!1,{example:"🚛 Transportación"}),"data.services[0].qty":Nt("number","Service quantity",!1,{example:3}),"data.services[0].price":Nt("number","Service base price",!1,{format:"currency",example:0}),"data.services[0].arancel":Nt("number","Service fee per unit",!1,{format:"currency",example:20}),"data.services[0].total":Nt("number","Service line total",!1,{format:"currency",example:60}),"data.packagesOrder":Nt("boolean","Is packages order",!1,{example:!1}),"data.shippingMethod":Nt("string","Shipping method",!0,{example:"AEREO",options:[{value:"AEREO",label:"Air"},{value:"MARITIMO",label:"Maritime"}]}),"data.paymentMethods.taxOnTotal":Nt("boolean","Tax applied on total",!1,{example:!1}),"data.paymentMethods.taxPercent":Nt("number","Tax percentage",!1,{example:7}),"data.paymentMethods.exemptTaxOnCash":Nt("boolean","Cash payment tax exempt",!1,{example:!0}),"data.paymentMethods.cash":Nt("number","Cash payment amount",!1,{format:"currency",example:300}),"data.paymentMethods.zelle":Nt("number","Zelle payment amount",!1,{format:"currency",example:292}),"data.paymentMethods.creditCard":Nt("number","Credit card payment amount",!1,{format:"currency",example:0}),"data.businessId":Nt("string","Business ID",!0,{example:"YB100423253156428"}),"data.ssg_inventory_key":Nt("string","Inventory system key",!1,{example:"INVOICE-1755395719878"}),"data.ssg_sorder_key":Nt("string","Sales order key",!1,{example:"SO-1755395719878"}),"data.referenceHId":Nt("string","Reference hash ID",!1,{example:"xxhdlfvvmgvsn87q_1755395721386"}),"data.productSubtotal":Nt("number","Products subtotal",!0,{format:"currency",example:32}),"data.reservaSubtotal":Nt("number","Reservas subtotal",!0,{format:"currency",example:480}),"data.serviceSubtotal":Nt("number","Services subtotal",!0,{format:"currency",example:60}),"data.subtotalBeforeTax":Nt("number","Subtotal before tax",!0,{format:"currency",example:572}),"data.taxAmount":Nt("number","Total tax amount",!0,{format:"currency",example:19.75}),"data.taxSavings":Nt("number","Tax savings amount",!1,{format:"currency",example:20.29}),"data.total":Nt("number","Final total amount",!0,{format:"currency",example:591.75}),"data.taxCalculationMethod":Nt("string","Tax calculation method",!1,{example:"subtotal"}),"data.cashPaymentRatio":Nt("number","Cash payment ratio",!1,{example:.51})},examples:[{name:"Cash Sale Invoice",description:"Invoice paid entirely in cash",sampleData:{invoice:"INV-2024-001",customerId:"CUST-001",customerName:"ABC Corporation",totalAmount:1500,subtotalAmount:1300,taxAmount:200,paymentMethods:{cash:1500,zelle:0,creditCard:0,check:0,bankTransfer:0},currency:"USD",status:"completed"}},{name:"Mixed Payment Invoice",description:"Invoice with cash and Zelle payments",sampleData:{invoice:"INV-2024-002",customerId:"CUST-002",customerName:"XYZ Inc",totalAmount:2e3,subtotalAmount:1800,taxAmount:200,paymentMethods:{cash:1200,zelle:800,creditCard:0,check:0,bankTransfer:0},currency:"USD",status:"completed"}}]},_W={eventType:"payment_received",displayName:"Payment Received",description:"Triggered when a payment is received from a customer",category:"financial",dataStructure:{"data.paymentId":Nt("string","Payment ID",!0,{example:"PAY-2024-001"}),"data.invoiceId":Nt("string","Related invoice ID",!1,{example:"INV-2024-001"}),"data.customerId":Nt("string","Customer ID",!0),"data.customerName":Nt("string","Customer name",!0,{example:"ABC Corporation"}),"data.amount":Nt("number","Payment amount",!0,{format:"currency",example:1500}),"data.paymentMethod":Nt("string","Payment method",!0,{options:[{value:"cash",label:"Cash"},{value:"zelle",label:"Zelle"},{value:"creditCard",label:"Credit Card"},{value:"check",label:"Check"},{value:"bankTransfer",label:"Bank Transfer"}],example:"cash"}),"data.currency":Nt("string","Currency code",!0,{example:"USD"}),"data.exchangeRate":Nt("number","Exchange rate",!1,{example:1}),"data.reference":Nt("string","Payment reference",!0,{example:"REF-001"}),"data.bankAccount":Nt("string","Bank account used",!1,{example:"BOA-Checking-001"}),"data.depositDate":Nt("date","Date payment was deposited",!1,{format:"date",example:"2024-01-15"})},examples:[{name:"Cash Payment",description:"Cash payment for an invoice",sampleData:{paymentId:"PAY-2024-001",invoiceId:"INV-2024-001",customerId:"CUST-001",customerName:"ABC Corporation",amount:1500,paymentMethod:"cash",currency:"USD",reference:"CASH-001"}}]},AW={eventType:"inventory_received",displayName:"Inventory Received",description:"Triggered when inventory is received from suppliers",category:"inventory",dataStructure:{"data.movementId":Nt("string","Movement ID",!0,{example:"MOV-2024-001"}),"data.productId":Nt("string","Product ID",!0,{example:"PROD-001"}),"data.productName":Nt("string","Product name",!0,{example:"Widget A"}),"data.sku":Nt("string","Product SKU",!0,{example:"WID-A-001"}),"data.category":Nt("string","Product category",!0,{example:"Electronics"}),"data.quantity":Nt("number","Quantity received",!0,{example:100}),"data.unitCost":Nt("number","Cost per unit",!0,{format:"currency",example:25}),"data.totalCost":Nt("number","Total cost",!0,{format:"currency",example:2500}),"data.supplierId":Nt("string","Supplier ID",!1,{example:"SUPP-001"}),"data.supplierName":Nt("string","Supplier name",!1,{example:"Acme Supplies"}),"data.purchaseOrderId":Nt("string","Purchase order ID",!1,{example:"PO-2024-001"}),"data.warehouseLocation":Nt("string","Warehouse location",!0,{example:"WH-A-001"}),"data.movementType":Nt("string","Type of movement",!0,{options:[{value:"purchase",label:"Purchase"},{value:"sale",label:"Sale"},{value:"adjustment",label:"Adjustment"},{value:"transfer",label:"Transfer"}],example:"purchase"})},examples:[{name:"Product Purchase",description:"Products received from supplier",sampleData:{movementId:"MOV-2024-001",productId:"PROD-001",productName:"Widget A",sku:"WID-A-001",category:"Electronics",quantity:100,unitCost:25,totalCost:2500,supplierId:"SUPP-001",supplierName:"Acme Supplies",movementType:"purchase"}}]},kW={eventType:"expense_created",displayName:"Expense Created",description:"Triggered when a new expense is created",category:"financial",dataStructure:{"data.expenseId":Nt("string","Expense ID",!0,{example:"EXP-2024-001"}),"data.category":Nt("string","Expense category",!0,{options:[{value:"office_supplies",label:"Office Supplies"},{value:"travel",label:"Travel"},{value:"utilities",label:"Utilities"},{value:"rent",label:"Rent"},{value:"equipment",label:"Equipment"},{value:"marketing",label:"Marketing"},{value:"professional_services",label:"Professional Services"}],example:"office_supplies"}),"data.subcategory":Nt("string","Expense subcategory",!1,{example:"Stationery"}),"data.description":Nt("string","Expense description",!0,{example:"Office supplies from Staples"}),"data.amount":Nt("number","Expense amount",!0,{format:"currency",example:250}),"data.currency":Nt("string","Currency code",!0,{example:"USD"}),"data.vendorId":Nt("string","Vendor ID",!1,{example:"VEND-001"}),"data.vendorName":Nt("string","Vendor name",!1,{example:"Staples Inc"}),"data.employeeId":Nt("string","Employee ID",!1,{example:"EMP-001"}),"data.employeeName":Nt("string","Employee name",!1,{example:"John Doe"}),"data.departmentId":Nt("string","Department ID",!1,{example:"DEPT-001"}),"data.departmentName":Nt("string","Department name",!1,{example:"Administration"}),"data.paymentMethod":Nt("string","Payment method",!0,{options:[{value:"cash",label:"Cash"},{value:"check",label:"Check"},{value:"creditCard",label:"Credit Card"},{value:"bankTransfer",label:"Bank Transfer"}],example:"creditCard"}),"data.reference":Nt("string","Reference number",!0,{example:"REF-001"}),"data.receiptAttached":Nt("boolean","Receipt attached",!1,{example:!0})},examples:[{name:"Office Supplies Expense",description:"Office supplies purchased with credit card",sampleData:{expenseId:"EXP-2024-001",category:"office_supplies",description:"Office supplies from Staples",amount:250,currency:"USD",vendorName:"Staples Inc",paymentMethod:"creditCard",reference:"CC-001",receiptAttached:!0}}]},EW={eventType:"service_rendered",displayName:"Service Rendered",description:"Triggered when a service is completed for a customer",category:"operational",dataStructure:{"data.serviceId":Nt("string","Service ID",!0,{example:"SRV-2024-001"}),"data.serviceType":Nt("string","Type of service",!0,{options:[{value:"transport",label:"Transportation"},{value:"packaging",label:"Packaging"},{value:"storage",label:"Storage"},{value:"customs",label:"Customs Clearance"},{value:"processing",label:"Processing"},{value:"other",label:"Other"}],example:"transport"}),"data.description":Nt("string","Service description",!0,{example:"Transportation from Miami to NYC"}),"data.customerId":Nt("string","Customer ID",!0,{example:"CUST-001"}),"data.customerName":Nt("string","Customer name",!0,{example:"ABC Corporation"}),"data.amount":Nt("number","Service amount",!0,{format:"currency",example:500}),"data.currency":Nt("string","Currency code",!0,{example:"USD"}),"data.quantity":Nt("number","Service quantity",!1,{example:1}),"data.unitPrice":Nt("number","Price per unit",!1,{format:"currency",example:500}),"data.invoiceId":Nt("string","Related invoice ID",!1,{example:"INV-2024-001"}),"data.reference":Nt("string","Service reference",!0,{example:"TRANS-001"}),"data.serviceDate":Nt("date","Date service was performed",!0,{format:"date",example:"2024-01-15"}),"data.location":Nt("string","Service location",!1,{example:"Miami, FL"}),"data.weight":Nt("number","Weight (if applicable)",!1,{example:150.5}),"data.trackingNumber":Nt("string","Tracking number",!1,{example:"TRK-123456"})},examples:[{name:"Transportation Service",description:"Freight transportation service",sampleData:{serviceId:"SRV-2024-001",serviceType:"transport",description:"Transportation from Miami to NYC",customerId:"CUST-001",customerName:"ABC Corporation",amount:500,currency:"USD",reference:"TRANS-001",serviceDate:"2024-01-15",weight:150.5}}]},TW={invoice_completed:CW,payment_received:_W,inventory_received:AW,expense_created:kW,service_rendered:EW},F3=t=>TW[t]||null,IW=t=>{const e=F3(t);return e?Object.entries(e.dataStructure).map(([r,n])=>({path:r,definition:n})):[]};var NW=le("<label>"),RW=le("<div>No fields found matching your criteria"),DW=le('<div><div><input type=text placeholder="Search fields..."><div></div></div><div>'),LW=le("<div>"),$W=le("<div><button type=button><span></span><span>▼"),FW=le("<button type=button> "),MW=le("<p>Example: <code>"),OW=le("<div><div><code></code><span></span></div><p>");const BW=t=>{Gu();const[e,r]=Ae(!1),[n,i]=Ae(""),[o,s]=Ae("all"),a=zt(()=>{const N=n().toLowerCase(),R=o();return t.availableFields.filter(M=>{const C=!N||M.path.toLowerCase().includes(N)||M.definition.description.toLowerCase().includes(N),k=R==="all"||R==="required"&&M.definition.required||R==="number"&&M.definition.type==="number"||R==="string"&&M.definition.type==="string"||R==="payment"&&M.path.includes("payment")||R==="customer"&&M.path.includes("customer");return C&&k})}),l=N=>{t.onFieldSelect(N),r(!1),i("")},d=N=>{switch(N){case"number":return"#dbeafe";case"string":return"#fef3c7";case"boolean":return"#dcfce7";case"date":return"#f3e8ff";default:return"#f3f4f6"}},u=N=>{switch(N){case"number":return"#1e40af";case"string":return"#92400e";case"boolean":return"#166534";case"date":return"#7c3aed";default:return"#374151"}},h=[{value:"all",label:"All Fields",icon:"📋"},{value:"required",label:"Required",icon:"⭐"},{value:"number",label:"Numbers",icon:"🔢"},{value:"string",label:"Text",icon:"📝"},{value:"payment",label:"Payments",icon:"💰"},{value:"customer",label:"Customer",icon:"👤"}],f={position:"relative",width:"100%"},p={width:"100%",padding:"0.75rem","background-color":"white",border:"1px solid #d1d5db","border-radius":"0.375rem","text-align":"left",cursor:"pointer","font-size":"0.875rem",display:"flex","justify-content":"space-between","align-items":"center"},m={position:"absolute",top:"100%",left:"0",right:"0","z-index":"50","background-color":"white",border:"1px solid #d1d5db","border-radius":"0.375rem","box-shadow":"0 10px 15px -3px rgba(0, 0, 0, 0.1)","margin-top":"0.25rem","max-height":"400px","overflow-y":"auto"},x={padding:"1rem","border-bottom":"1px solid #e5e7eb","background-color":"#f9fafb"},P={width:"100%",padding:"0.5rem",border:"1px solid #d1d5db","border-radius":"0.375rem","font-size":"0.875rem","margin-bottom":"0.75rem"},g={display:"flex","flex-wrap":"wrap",gap:"0.5rem"},F=N=>({padding:"0.25rem 0.75rem","border-radius":"0.375rem",border:"none",cursor:"pointer","font-size":"0.75rem","background-color":N?"#3b82f6":"#f3f4f6",color:N?"white":"#374151"}),V={padding:"0.75rem",cursor:"pointer","border-bottom":"1px solid #f3f4f6","hover:background-color":"#f9fafb"};return(()=>{var N=$W(),R=N.firstChild,M=R.firstChild,C=M.nextSibling;return c(N,T(We,{get when(){return t.label},get children(){var k=NW();return k.style.setProperty("display","block"),k.style.setProperty("font-weight","500"),k.style.setProperty("margin-bottom","0.5rem"),k.style.setProperty("font-size","0.875rem"),c(k,()=>t.label),k}}),R),R.addEventListener("mouseleave",k=>k.currentTarget.style.borderColor="#d1d5db"),R.addEventListener("mouseenter",k=>k.currentTarget.style.borderColor="#3b82f6"),R.$$click=()=>r(!e()),M.style.setProperty("color","#6b7280"),c(M,()=>t.placeholder||"Select a field from data interface..."),C.style.setProperty("transition","transform 0.2s"),c(N,T(We,{get when(){return e()},get children(){var k=DW(),D=k.firstChild,$=D.firstChild,w=$.nextSibling,_=D.nextSibling;return y(D,x),$.$$input=v=>i(v.currentTarget.value),y($,P),c(w,T(_t,{each:h,children:v=>(()=>{var z=FW(),W=z.firstChild;return z.$$click=()=>s(v.value),c(z,()=>v.icon,W),c(z,()=>v.label,null),be(A=>y(z,F(o()===v.value),A)),z})()})),c(_,T(We,{get when(){return a().length===0},get children(){var v=RW();return v.style.setProperty("padding","2rem"),v.style.setProperty("text-align","center"),v.style.setProperty("color","#6b7280"),v}}),null),c(_,T(_t,{get each(){return a()},children:v=>(()=>{var z=OW(),W=z.firstChild,A=W.firstChild,I=A.nextSibling,ee=W.nextSibling;return z.addEventListener("mouseleave",Z=>Z.currentTarget.style.backgroundColor="transparent"),z.addEventListener("mouseenter",Z=>Z.currentTarget.style.backgroundColor="#f9fafb"),z.$$click=()=>l(v.path),y(z,V),W.style.setProperty("display","flex"),W.style.setProperty("justify-content","space-between"),W.style.setProperty("align-items","center"),W.style.setProperty("margin-bottom","0.25rem"),A.style.setProperty("font-family","monospace"),A.style.setProperty("font-size","0.875rem"),A.style.setProperty("color","#059669"),A.style.setProperty("font-weight","600"),c(A,()=>v.path),I.style.setProperty("font-size","0.7rem"),I.style.setProperty("padding","0.125rem 0.375rem"),I.style.setProperty("border-radius","0.25rem"),I.style.setProperty("font-weight","500"),c(I,()=>v.definition.type,null),c(I,()=>v.definition.required&&" *",null),ee.style.setProperty("font-size","0.75rem"),ee.style.setProperty("color","#6b7280"),ee.style.setProperty("margin","0 0 0.25rem 0"),c(ee,()=>v.definition.description),c(z,T(We,{get when(){return v.definition.example},get children(){var Z=MW(),X=Z.firstChild,se=X.nextSibling;return Z.style.setProperty("font-size","0.7rem"),Z.style.setProperty("color","#374151"),Z.style.setProperty("margin","0"),Z.style.setProperty("font-style","italic"),se.style.setProperty("background-color","#f3f4f6"),se.style.setProperty("padding","0.125rem 0.25rem"),se.style.setProperty("border-radius","0.125rem"),c(se,(()=>{var U=Ve(()=>typeof v.definition.example=="object");return()=>U()?JSON.stringify(v.definition.example):v.definition.example})()),Z}}),null),be(Z=>{var X=d(v.definition.type),se=u(v.definition.type);return X!==Z.e&&((Z.e=X)!=null?I.style.setProperty("background-color",X):I.style.removeProperty("background-color")),se!==Z.t&&((Z.t=se)!=null?I.style.setProperty("color",se):I.style.removeProperty("color")),Z},{e:void 0,t:void 0}),z})()}),null),be(v=>{var z=m,W=g;return v.e=y(k,z,v.e),v.t=y(w,W,v.t),v},{e:void 0,t:void 0}),be(()=>$.value=n()),k}}),null),c(N,T(We,{get when(){return e()},get children(){var k=LW();return k.$$click=()=>r(!1),k.style.setProperty("position","fixed"),k.style.setProperty("top","0"),k.style.setProperty("left","0"),k.style.setProperty("right","0"),k.style.setProperty("bottom","0"),k.style.setProperty("z-index","40"),k}}),null),be(k=>{var D=f,$=p,w=e()?"rotate(180deg)":"none";return k.e=y(N,D,k.e),k.t=y(R,$,k.t),w!==k.a&&((k.a=w)!=null?C.style.setProperty("transform",w):C.style.removeProperty("transform")),k},{e:void 0,t:void 0,a:void 0}),N})()};tr(["click","input"]);var jW=le('<div><h4>Create New Custom Field</h4><div><div><label>Field Name *</label><input type=text placeholder="e.g., totalWithTax, customerInfo"></div><div><label>Expression *</label><div><input type=text placeholder="e.g., data.subtotal + data.tax"></div><div><p>💡 Quick templates:</p><div></div></div></div><div><label>Description</label><input type=text placeholder="Describe what this field represents"></div><div><button>Cancel</button><button>Create Field'),VW=le("<div><p>No custom fields created yet</p><p>Create custom fields to combine multiple interface fields into reusable expressions"),zW=le("<div><div><div><h3>🛠️ Custom Fields</h3><p>Create custom expressions by combining interface fields</p></div><button>+ Add Custom Field</button></div><div>"),UW=le("<button type=button>"),qW=le("<p>"),HW=le("<div><div><div><div><h4></h4><span>custom field</span></div><div><code></code></div></div><div><button>Remove");const WW=t=>{Gu();const[e,r]=Ae(!1),[n,i]=Ae(null),[o,s]=Ae({name:"",expression:"",description:""}),a=()=>{const V=o();V.name.trim()&&V.expression.trim()&&(t.onAdd(V),s({name:"",expression:"",description:""}),r(!1))},l=V=>{const N=o().expression,R=N?`${N} + ${V}`:V;s(M=>({...M,expression:R}))},d=V=>{s(N=>({...N,expression:V}))},u=[{label:"Total with Tax",expression:"data.subtotalAmount + data.taxAmount",description:"Subtotal plus tax amount"},{label:"Total Payments",expression:"data.paymentMethods.cash + data.paymentMethods.zelle + data.paymentMethods.creditCard",description:"Sum of all payment methods"},{label:"Customer Info",expression:'data.customerName + " (" + data.customerId + ")"',description:"Customer name with ID"},{label:"Invoice Reference",expression:'"Invoice " + data.invoice + " - " + data.customerName',description:"Complete invoice reference"}],h={border:"1px solid #d1d5db","border-radius":"0.5rem","background-color":"#f9fafb",padding:"1.5rem"},f={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"1.5rem"},p={padding:"0.5rem 1rem","background-color":"#3b82f6",color:"white",border:"none","border-radius":"0.375rem",cursor:"pointer","font-weight":"500","font-size":"0.875rem"},m={...p,"background-color":"#6b7280"},x={...p,"background-color":"#ef4444"},P={width:"100%",padding:"0.5rem",border:"1px solid #d1d5db","border-radius":"0.375rem","font-size":"0.875rem"},g={"background-color":"white",border:"1px solid #e5e7eb","border-radius":"0.375rem",padding:"1rem","margin-bottom":"1rem"},F={"background-color":"white",border:"1px solid #d1d5db","border-radius":"0.375rem",padding:"1.5rem","margin-bottom":"1.5rem"};return(()=>{var V=zW(),N=V.firstChild,R=N.firstChild,M=R.firstChild,C=M.nextSibling,k=R.nextSibling,D=N.nextSibling;return y(V,h),y(N,f),M.style.setProperty("font-size","1.125rem"),M.style.setProperty("font-weight","600"),M.style.setProperty("margin","0 0 0.25rem 0"),C.style.setProperty("font-size","0.875rem"),C.style.setProperty("color","#6b7280"),C.style.setProperty("margin","0"),k.$$click=()=>r(!e()),c(V,T(We,{get when(){return e()},get children(){var $=jW(),w=$.firstChild,_=w.nextSibling,v=_.firstChild,z=v.firstChild,W=z.nextSibling,A=v.nextSibling,I=A.firstChild,ee=I.nextSibling,Z=ee.firstChild,X=ee.nextSibling,se=X.firstChild,U=se.nextSibling,E=A.nextSibling,O=E.firstChild,L=O.nextSibling,G=E.nextSibling,K=G.firstChild,q=K.nextSibling;return y($,F),w.style.setProperty("font-size","1rem"),w.style.setProperty("font-weight","600"),w.style.setProperty("margin-bottom","1rem"),_.style.setProperty("display","grid"),_.style.setProperty("gap","1rem"),z.style.setProperty("display","block"),z.style.setProperty("font-weight","500"),z.style.setProperty("margin-bottom","0.5rem"),W.$$input=B=>s(H=>({...H,name:B.currentTarget.value})),I.style.setProperty("display","block"),I.style.setProperty("font-weight","500"),I.style.setProperty("margin-bottom","0.5rem"),ee.style.setProperty("display","grid"),ee.style.setProperty("grid-template-columns","2fr 1fr"),ee.style.setProperty("gap","0.5rem"),ee.style.setProperty("margin-bottom","0.5rem"),Z.$$input=B=>s(H=>({...H,expression:B.currentTarget.value})),c(ee,T(BW,{get availableFields(){return t.availableFields},onFieldSelect:l,placeholder:"Insert field..."}),null),X.style.setProperty("margin-bottom","0.5rem"),se.style.setProperty("font-size","0.75rem"),se.style.setProperty("color","#6b7280"),se.style.setProperty("margin-bottom","0.5rem"),U.style.setProperty("display","flex"),U.style.setProperty("flex-wrap","wrap"),U.style.setProperty("gap","0.5rem"),c(U,T(_t,{each:u,children:B=>(()=>{var H=UW();return H.$$click=()=>d(B.expression),H.style.setProperty("padding","0.25rem 0.5rem"),H.style.setProperty("background-color","#f3f4f6"),H.style.setProperty("color","#374151"),H.style.setProperty("border","1px solid #d1d5db"),H.style.setProperty("border-radius","0.25rem"),H.style.setProperty("cursor","pointer"),H.style.setProperty("font-size","0.75rem"),c(H,()=>B.label),be(()=>ir(H,"title",B.description)),H})()})),O.style.setProperty("display","block"),O.style.setProperty("font-weight","500"),O.style.setProperty("margin-bottom","0.5rem"),L.$$input=B=>s(H=>({...H,description:B.currentTarget.value})),G.style.setProperty("display","flex"),G.style.setProperty("gap","0.5rem"),G.style.setProperty("justify-content","flex-end"),K.$$click=()=>r(!1),q.$$click=a,be(B=>{var H=P,Y=P,te=P,oe=m,pe=p;return B.e=y(W,H,B.e),B.t=y(Z,Y,B.t),B.a=y(L,te,B.a),B.o=y(K,oe,B.o),B.i=y(q,pe,B.i),B},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),be(()=>W.value=o().name),be(()=>Z.value=o().expression),be(()=>L.value=o().description),$}}),D),c(D,T(We,{get when(){return t.customFields.length===0},get children(){var $=VW(),w=$.firstChild,_=w.nextSibling;return $.style.setProperty("padding","3rem"),$.style.setProperty("text-align","center"),$.style.setProperty("color","#6b7280"),$.style.setProperty("background-color","white"),$.style.setProperty("border-radius","0.375rem"),$.style.setProperty("border","1px solid #e5e7eb"),w.style.setProperty("font-size","1rem"),w.style.setProperty("margin-bottom","0.5rem"),_.style.setProperty("font-size","0.875rem"),$}}),null),c(D,T(_t,{get each(){return t.customFields},children:$=>(()=>{var w=HW(),_=w.firstChild,v=_.firstChild,z=v.firstChild,W=z.firstChild,A=W.nextSibling,I=z.nextSibling,ee=I.firstChild,Z=v.nextSibling,X=Z.firstChild;return y(w,g),_.style.setProperty("display","flex"),_.style.setProperty("justify-content","space-between"),_.style.setProperty("align-items","start"),v.style.setProperty("flex-grow","1"),z.style.setProperty("display","flex"),z.style.setProperty("align-items","center"),z.style.setProperty("gap","0.75rem"),z.style.setProperty("margin-bottom","0.5rem"),W.style.setProperty("font-size","1rem"),W.style.setProperty("font-weight","600"),W.style.setProperty("margin","0"),W.style.setProperty("color","#1f2937"),c(W,()=>$.name),A.style.setProperty("font-size","0.7rem"),A.style.setProperty("padding","0.125rem 0.5rem"),A.style.setProperty("background-color","#dbeafe"),A.style.setProperty("color","#1e40af"),A.style.setProperty("border-radius","0.25rem"),A.style.setProperty("font-weight","500"),I.style.setProperty("margin-bottom","0.5rem"),ee.style.setProperty("font-size","0.875rem"),ee.style.setProperty("color","#4b5563"),ee.style.setProperty("font-family","monospace"),ee.style.setProperty("background-color","#f3f4f6"),ee.style.setProperty("padding","0.5rem"),ee.style.setProperty("border-radius","0.25rem"),ee.style.setProperty("display","block"),c(ee,()=>$.expression),c(v,T(We,{get when(){return $.description},get children(){var se=qW();return se.style.setProperty("font-size","0.875rem"),se.style.setProperty("color","#6b7280"),se.style.setProperty("margin","0"),c(se,()=>$.description),se}}),null),Z.style.setProperty("display","flex"),Z.style.setProperty("gap","0.5rem"),X.$$click=()=>t.onRemove($.id),be(se=>y(X,{...x,padding:"0.5rem","font-size":"0.75rem"},se)),w})()}),null),be($=>y(k,p,$)),V})()};tr(["click","input"]);var GW=le("<input>");const KW=t=>{const[e,r]=Ae("");Ei(()=>{t?.value!==void 0&&r(t.value.toString())});const n=o=>{(o.key==="Enter"||o.key==="Escape"||o.key==="Tab")&&t.onChange&&dd(e())&&t.onChange(e())},i=()=>{dd(e())&&t.onChange(e())};return(()=>{var o=GW();return o.addEventListener("blur",s=>{i(),s.target.style.borderColor="var(--border-color)"}),o.addEventListener("focus",s=>{s.target.style.borderColor="var(--primary-color)"}),o.$$keydown=n,o.$$input=s=>r(s.target.value),be(s=>{var a=t.type||"text",l=t.placeholder,d=t.required,u=t.disabled,h=t.style;return a!==s.e&&ir(o,"type",s.e=a),l!==s.t&&ir(o,"placeholder",s.t=l),d!==s.a&&(o.required=s.a=d),u!==s.o&&(o.disabled=s.o=u),s.i=y(o,h,s.i),s},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),be(()=>o.value=e()),o})()};tr(["input","keydown"]);var YW=le("<p>"),XW=le("<div><div><div><p>Available Fields</p><p>Click a field to insert it at cursor position</p></div><div>"),ZW=le("<div>"),JW=le("<div><label></label><div><button type=button>📋 Fields"),QW=le("<div><div><code></code><span></span></div><p>");const sy=t=>{const[e,r]=Ae(!1),[n,i]=Ae(0),o=f=>{const p=t.value,m=p.substring(0,n()),x=p.substring(n());let P=f;t.type==="text"&&!f.startsWith("{")&&(P=`{${f}}`);const g=m+P+x;t.onInput(g),r(!1)},s=f=>{const p=f.currentTarget;i(p.selectionStart||0)},a={position:"relative",width:"100%"},l={display:"flex",gap:"0.5rem","align-items":"stretch"},d={"flex-grow":"1",padding:"0.5rem",border:"1px solid #d1d5db","border-radius":"0.375rem","font-size":"0.875rem"},u={padding:"0.5rem","background-color":"#f3f4f6",color:"#374151",border:"1px solid #d1d5db","border-radius":"0.375rem",cursor:"pointer","font-size":"0.75rem","white-space":"nowrap","font-weight":"500"},h={"font-size":"0.75rem",color:"#6b7280","margin-top":"0.25rem"};return(()=>{var f=JW(),p=f.firstChild,m=p.nextSibling,x=m.firstChild;return p.style.setProperty("display","block"),p.style.setProperty("font-weight","500"),p.style.setProperty("margin-bottom","0.5rem"),c(p,()=>t.label),y(m,l),c(m,T(KW,{type:"text",style:d,get value(){return t.value},get placeholder(){return t.placeholder},onChange:P=>t.onInput(P),onClick:s}),x),x.addEventListener("mouseleave",P=>P.currentTarget.style.backgroundColor="#f3f4f6"),x.addEventListener("mouseenter",P=>P.currentTarget.style.backgroundColor="#e5e7eb"),x.$$click=()=>r(!e()),c(f,T(We,{get when(){return t.helpText},get children(){var P=YW();return y(P,h),c(P,()=>t.helpText),P}}),null),c(f,T(We,{get when(){return e()},get children(){var P=XW(),g=P.firstChild,F=g.firstChild,V=F.firstChild,N=V.nextSibling,R=F.nextSibling;return P.style.setProperty("position","absolute"),P.style.setProperty("top","100%"),P.style.setProperty("left","0"),P.style.setProperty("right","0"),P.style.setProperty("z-index","50"),P.style.setProperty("margin-top","0.25rem"),g.style.setProperty("background-color","white"),g.style.setProperty("border","1px solid #d1d5db"),g.style.setProperty("border-radius","0.375rem"),g.style.setProperty("box-shadow","0 10px 15px -3px rgba(0, 0, 0, 0.1)"),g.style.setProperty("max-height","300px"),g.style.setProperty("overflow-y","auto"),F.style.setProperty("padding","0.75rem"),F.style.setProperty("border-bottom","1px solid #e5e7eb"),F.style.setProperty("background-color","#f9fafb"),V.style.setProperty("font-size","0.875rem"),V.style.setProperty("font-weight","600"),V.style.setProperty("margin","0 0 0.25rem 0"),N.style.setProperty("font-size","0.75rem"),N.style.setProperty("color","#6b7280"),N.style.setProperty("margin","0"),c(R,T(_t,{get each(){return t.availableFields},children:M=>(()=>{var C=QW(),k=C.firstChild,D=k.firstChild,$=D.nextSibling,w=k.nextSibling;return C.addEventListener("mouseleave",_=>_.currentTarget.style.backgroundColor="transparent"),C.addEventListener("mouseenter",_=>_.currentTarget.style.backgroundColor="#f9fafb"),C.$$click=()=>o(M.path),C.style.setProperty("padding","0.75rem"),C.style.setProperty("cursor","pointer"),C.style.setProperty("border-bottom","1px solid #f3f4f6"),k.style.setProperty("display","flex"),k.style.setProperty("justify-content","space-between"),k.style.setProperty("align-items","center"),k.style.setProperty("margin-bottom","0.25rem"),D.style.setProperty("font-family","monospace"),D.style.setProperty("font-size","0.875rem"),D.style.setProperty("color","#059669"),D.style.setProperty("font-weight","600"),c(D,()=>M.path),$.style.setProperty("font-size","0.7rem"),$.style.setProperty("padding","0.125rem 0.375rem"),$.style.setProperty("border-radius","0.25rem"),c($,()=>M.definition.type),w.style.setProperty("font-size","0.75rem"),w.style.setProperty("color","#6b7280"),w.style.setProperty("margin","0"),c(w,()=>M.definition.description),be(_=>{var v=M.definition.type==="number"?"#dbeafe":"#fef3c7",z=M.definition.type==="number"?"#1e40af":"#92400e";return v!==_.e&&((_.e=v)!=null?$.style.setProperty("background-color",v):$.style.removeProperty("background-color")),z!==_.t&&((_.t=z)!=null?$.style.setProperty("color",z):$.style.removeProperty("color")),_},{e:void 0,t:void 0}),C})()})),P}}),null),c(f,T(We,{get when(){return e()},get children(){var P=ZW();return P.$$click=()=>r(!1),P.style.setProperty("position","fixed"),P.style.setProperty("top","0"),P.style.setProperty("left","0"),P.style.setProperty("right","0"),P.style.setProperty("bottom","0"),P.style.setProperty("z-index","40"),P}}),null),be(P=>{var g=a,F=u;return P.e=y(f,g,P.e),P.t=y(x,F,P.t),P},{e:void 0,t:void 0}),f})()};tr(["click"]);var eG=le("<div><p><strong>:</strong> </p><button type=button>"),kS=le("<div>"),tG=le("<div><h5></h5><p></p><div></div><div><p>💡 <strong>Usage Tip:</strong> Copy field paths like <code>data.totalAmount</code> or <code>data.customerName</code> to use in conditions and journal entry templates."),rG=le("<div><h3>📋 Data Interface & Examples</h3><div><div><h4>📊 Available Fields</h4><div></div></div><div><h4>💡 Sample Data Examples"),nG=le("<p> <!> events"),iG=le("<p>"),oG=le("<div><div><h2></h2><div><h3></h3><div><div><label> *</label><input type=text></div><div><label></label><input type=number min=1 max=1000></div></div><div><label> *</label><textarea></textarea></div><div><div><label> *</label><select></select></div><div><label><input type=checkbox></label></div></div></div><div><div><h3></h3><button>+ </button></div></div><div><div><h3></h3><div><button type=button></button><button></button></div></div><div></div><div><h4></h4><button>+ </button></div></div><div><button></button><button>"),ES=le("<option>"),sG=le("<p>Example: <code>"),aG=le("<div><div><code></code><span></span></div><p>"),lG=le("<button type=button>"),cG=le("<input>"),dG=le("<div><div><div><label></label><select><option value></option></select></div><div><label></label><select></select></div><div><label></label></div><div><button>"),uG=le("<option> (<!>)"),hG=le("<input type=text value=N/A disabled>"),pG=le("<div><div><h5>Journal Line </h5><button></button></div><div><div><label></label><select></select></div><div><label></label><select><option value=debit></option><option value=credit></option></select></div></div><div>"),fG=le("<option> - <!> (<!>)");const yG=t=>{const{t:e}=Gu(),r=()=>t.rule&&t.rule.id,[n,i]=Ae(!1),[o,s]=Ae(0),[a,l]=Ae(!1),[d,u]=Ae([]),[h,f]=Ae({name:t.rule?.name||"",description:t.rule?.description||"",eventType:t.rule?.eventType||"invoice_completed",isActive:t.rule?.isActive??!0,priority:t.rule?.priority||100,conditions:t.rule?.conditions||[],journalEntryTemplate:t.rule?.journalEntryTemplate||{description:"",reference:"",lines:[]},createdBy:t.rule?.createdBy||"user"}),p=zt(()=>{const E=h().eventType;return E?IW(E):[]}),m=zt(()=>{const E=h().eventType;return E?F3(E):null}),x=[{value:"equals",label:e("eventAutomation.operators.equals")},{value:"notEquals",label:e("eventAutomation.operators.notEquals")},{value:"greaterThan",label:e("eventAutomation.operators.greaterThan")},{value:"lessThan",label:e("eventAutomation.operators.lessThan")},{value:"greaterThanOrEqual",label:e("eventAutomation.operators.greaterThanOrEqual")},{value:"lessThanOrEqual",label:e("eventAutomation.operators.lessThanOrEqual")},{value:"contains",label:e("eventAutomation.operators.contains")},{value:"notContains",label:e("eventAutomation.operators.notContains")},{value:"exists",label:e("eventAutomation.operators.exists")},{value:"notExists",label:e("eventAutomation.operators.notExists")}],P=[{id:"1001",name:"Cash - Operating Account",type:"Asset"},{id:"1002",name:"Cash - Zelle Account",type:"Asset"},{id:"1003",name:"Cash - Credit Card Processing",type:"Asset"},{id:"1101",name:"Accounts Receivable - Customers",type:"Asset"},{id:"1201",name:"Inventory - Products",type:"Asset"},{id:"1401",name:"Customs Fees Receivable",type:"Asset"},{id:"2001",name:"Accounts Payable",type:"Liability"},{id:"2301",name:"Sales Tax Payable",type:"Liability"},{id:"2302",name:"Customs Fees Payable",type:"Liability"},{id:"4001",name:"Sales Revenue - Products",type:"Revenue"},{id:"4101",name:"Service Revenue - General",type:"Revenue"},{id:"4201",name:"Transport Service Revenue",type:"Revenue"},{id:"5001",name:"Cost of Goods Sold - Products",type:"Expense"},{id:"5201",name:"Salaries and Wages",type:"Expense"},{id:"5301",name:"Utilities Expense",type:"Expense"}],g=[{value:"invoice_completed",label:e("eventAutomation.eventTypes.invoice_completed")},{value:"invoice_created",label:e("eventAutomation.eventTypes.invoice_created")},{value:"payment_received",label:e("eventAutomation.eventTypes.payment_received")},{value:"inventory_received",label:e("eventAutomation.eventTypes.inventory_received")},{value:"inventory_sold",label:e("eventAutomation.eventTypes.inventory_sold")},{value:"expense_created",label:e("eventAutomation.eventTypes.expense_created")},{value:"expense_approved",label:e("eventAutomation.eventTypes.expense_approved")},{value:"service_rendered",label:e("eventAutomation.eventTypes.service_rendered")}],F=(E,O)=>{f(L=>({...L,[E]:O}))},V=(E,O)=>{f(L=>({...L,journalEntryTemplate:{...L.journalEntryTemplate,[E]:O}}))},N=()=>{const E={field:p()[0]?.path||"",operator:"equals",value:"",dataType:"string"};f(O=>({...O,conditions:[...O.conditions||[],E]}))},R=(E,O,L)=>{const G=[...h().conditions||[]];if(G[E]={...G[E],[O]:L},O==="field"){const K=p().find(q=>q.path===L);K&&(G[E].dataType=K.definition.type)}f(K=>({...K,conditions:G}))},M=E=>{f(O=>({...O,conditions:O.conditions?.filter((L,G)=>G!==E)||[]}))},C=()=>{const E={accountExpression:"1001",descriptionTemplate:"",amountExpression:"",isDebit:!0};f(O=>({...O,journalEntryTemplate:{...O.journalEntryTemplate,lines:[...O.journalEntryTemplate?.lines||[],E]}}))},k=(E,O,L)=>{const G=[...h().journalEntryTemplate?.lines||[]];G[E]={...G[E],[O]:L},f(K=>({...K,journalEntryTemplate:{...K.journalEntryTemplate,lines:G}}))},D=E=>{const O={...E,id:`custom_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};u(L=>[...L,O])},$=(E,O)=>{u(L=>L.map(G=>G.id===E?{...G,...O}:G))},w=E=>{u(O=>O.filter(L=>L.id!==E))},_=E=>{f(O=>({...O,journalEntryTemplate:{...O.journalEntryTemplate,lines:O.journalEntryTemplate?.lines.filter((L,G)=>G!==E)||[]}}))},v=()=>{const E=h();if(!E.name||!E.description||!E.eventType){alert("Please fill in all required fields");return}if(!E.journalEntryTemplate?.lines.length){alert("Please add at least one journal entry line");return}if(E.journalEntryTemplate.lines.filter(L=>!L.accountExpression||!L.amountExpression||!L.descriptionTemplate).length>0){alert("Please complete all journal entry line fields");return}t.onSave(E)},z={position:"fixed",top:"0",left:"0",right:"0",bottom:"0","background-color":"rgba(0, 0, 0, 0.5)",display:"flex","align-items":"center","justify-content":"center","z-index":"1000",overflow:"auto",padding:"2rem"},W={"background-color":"white","border-radius":"0.5rem",padding:"2rem","max-width":"900px","max-height":"90vh","overflow-y":"auto",width:"100%"},A={width:"100%",padding:"0.5rem",border:"1px solid #d1d5db","border-radius":"0.375rem","font-size":"0.875rem"},I={...A,"background-color":"white"},ee={padding:"0.5rem 1rem","border-radius":"0.375rem",cursor:"pointer","font-weight":"500",border:"1px solid #d1d5db"},Z={...ee,"background-color":"#3b82f6",color:"white",border:"none"},X={...ee,"background-color":"white",color:"#374151"},se={...ee,"background-color":"#ef4444",color:"white",border:"none"},U={"margin-bottom":"2rem","border-bottom":"1px solid #e5e7eb","padding-bottom":"2rem"};return(()=>{var E=oG(),O=E.firstChild,L=O.firstChild,G=L.nextSibling,K=G.firstChild,q=K.nextSibling,B=q.firstChild,H=B.firstChild,Y=H.firstChild,te=H.nextSibling,oe=B.nextSibling,pe=oe.firstChild,ne=pe.nextSibling,Q=q.nextSibling,ce=Q.firstChild,ue=ce.firstChild,de=ce.nextSibling,ge=Q.nextSibling,ye=ge.firstChild,fe=ye.firstChild,Se=fe.firstChild,qe=fe.nextSibling,Oe=ye.nextSibling,Ie=Oe.firstChild,Be=Ie.firstChild,ke=G.nextSibling,Ge=ke.firstChild,et=Ge.firstChild,ve=et.nextSibling;ve.firstChild;var De=ke.nextSibling,He=De.firstChild,Je=He.firstChild,Le=Je.nextSibling,Te=Le.firstChild,he=Te.nextSibling,Ne=He.nextSibling,rt=Ne.nextSibling,re=rt.firstChild,Ue=re.nextSibling;Ue.firstChild;var we=De.nextSibling,xe=we.firstChild,je=xe.nextSibling;return y(O,W),L.style.setProperty("font-size","1.5rem"),L.style.setProperty("font-weight","700"),L.style.setProperty("margin-bottom","1.5rem"),c(L,(()=>{var $e=Ve(()=>!!r());return()=>$e()?e("eventAutomation.builder.editTitle"):e("eventAutomation.builder.createTitle")})()),K.style.setProperty("font-size","1.125rem"),K.style.setProperty("font-weight","600"),K.style.setProperty("margin-bottom","1rem"),c(K,()=>e("eventAutomation.builder.basicInfo")),q.style.setProperty("display","grid"),q.style.setProperty("grid-template-columns","1fr 1fr"),q.style.setProperty("gap","1rem"),q.style.setProperty("margin-bottom","1rem"),H.style.setProperty("display","block"),H.style.setProperty("font-weight","500"),H.style.setProperty("margin-bottom","0.5rem"),c(H,()=>e("eventAutomation.builder.ruleName"),Y),te.$$input=$e=>F("name",$e.currentTarget.value),pe.style.setProperty("display","block"),pe.style.setProperty("font-weight","500"),pe.style.setProperty("margin-bottom","0.5rem"),c(pe,()=>e("eventAutomation.builder.priority")),ne.$$input=$e=>F("priority",parseInt($e.currentTarget.value)||100),Q.style.setProperty("margin-bottom","1rem"),ce.style.setProperty("display","block"),ce.style.setProperty("font-weight","500"),ce.style.setProperty("margin-bottom","0.5rem"),c(ce,()=>e("eventAutomation.builder.description"),ue),de.$$input=$e=>F("description",$e.currentTarget.value),ge.style.setProperty("display","grid"),ge.style.setProperty("grid-template-columns","1fr auto"),ge.style.setProperty("gap","1rem"),ge.style.setProperty("align-items","end"),fe.style.setProperty("display","block"),fe.style.setProperty("font-weight","500"),fe.style.setProperty("margin-bottom","0.5rem"),c(fe,()=>e("eventAutomation.builder.eventType"),Se),qe.addEventListener("change",$e=>F("eventType",$e.currentTarget.value)),c(qe,T(_t,{each:g,children:$e=>(()=>{var ft=ES();return c(ft,()=>$e.label),be(()=>ft.value=$e.value),ft})()})),Ie.style.setProperty("display","flex"),Ie.style.setProperty("align-items","center"),Ie.style.setProperty("gap","0.5rem"),Be.addEventListener("change",$e=>F("isActive",$e.currentTarget.checked)),c(Ie,()=>e("eventAutomation.builder.active"),null),c(G,T(We,{get when(){return m()},get children(){var $e=eG(),ft=$e.firstChild,ct=ft.firstChild,yt=ct.firstChild;ct.nextSibling;var $t=ft.nextSibling;return $e.style.setProperty("margin-top","1rem"),$e.style.setProperty("padding","1rem"),$e.style.setProperty("background-color","#f3f4f6"),$e.style.setProperty("border-radius","0.375rem"),ft.style.setProperty("font-size","0.875rem"),ft.style.setProperty("color","#4b5563"),ft.style.setProperty("margin-bottom","0.5rem"),c(ct,()=>e("eventAutomation.builder.eventDescription"),yt),c(ft,()=>m()?.description,null),$t.$$click=()=>i(!n()),c($t,()=>n()?"🔽 Hide Data Interface":"🔼 Show Data Interface & Examples"),be(bt=>y($t,{...X,"font-size":"0.75rem",padding:"0.25rem 0.5rem"},bt)),$e}}),null),c(O,T(We,{get when(){return Ve(()=>!!n())()&&m()},get children(){var $e=rG(),ft=$e.firstChild,ct=ft.nextSibling,yt=ct.firstChild,$t=yt.firstChild,bt=$t.nextSibling,Gt=yt.nextSibling,Wt=Gt.firstChild;return ft.style.setProperty("font-size","1.125rem"),ft.style.setProperty("font-weight","600"),ft.style.setProperty("margin-bottom","1rem"),ct.style.setProperty("display","grid"),ct.style.setProperty("grid-template-columns","1fr 1fr"),ct.style.setProperty("gap","2rem"),$t.style.setProperty("font-size","1rem"),$t.style.setProperty("font-weight","600"),$t.style.setProperty("margin-bottom","0.75rem"),$t.style.setProperty("color","#1f2937"),bt.style.setProperty("max-height","300px"),bt.style.setProperty("overflow-y","auto"),bt.style.setProperty("border","1px solid #d1d5db"),bt.style.setProperty("border-radius","0.375rem"),bt.style.setProperty("padding","0.75rem"),bt.style.setProperty("background-color","#f9fafb"),c(bt,T(_t,{get each(){return p()},children:Dt=>(()=>{var Kt=aG(),gt=Kt.firstChild,St=gt.firstChild,Qe=St.nextSibling,vt=gt.nextSibling;return Kt.style.setProperty("margin-bottom","0.5rem"),Kt.style.setProperty("padding","0.5rem"),Kt.style.setProperty("background-color","white"),Kt.style.setProperty("border-radius","0.25rem"),Kt.style.setProperty("border","1px solid #e5e7eb"),gt.style.setProperty("display","flex"),gt.style.setProperty("justify-content","space-between"),gt.style.setProperty("align-items","center"),St.style.setProperty("font-family","monospace"),St.style.setProperty("font-size","0.8rem"),St.style.setProperty("color","#059669"),St.style.setProperty("font-weight","600"),c(St,()=>Dt.path),Qe.style.setProperty("font-size","0.7rem"),Qe.style.setProperty("padding","0.125rem 0.375rem"),Qe.style.setProperty("border-radius","0.25rem"),Qe.style.setProperty("font-weight","500"),c(Qe,()=>Dt.definition.type),vt.style.setProperty("font-size","0.75rem"),vt.style.setProperty("color","#6b7280"),vt.style.setProperty("margin","0.25rem 0 0 0"),c(vt,()=>Dt.definition.description),c(Kt,T(We,{get when(){return Dt.definition.example},get children(){var Ft=sG(),Pt=Ft.firstChild,kt=Pt.nextSibling;return Ft.style.setProperty("font-size","0.7rem"),Ft.style.setProperty("color","#374151"),Ft.style.setProperty("margin","0.25rem 0 0 0"),Ft.style.setProperty("font-style","italic"),kt.style.setProperty("background-color","#f3f4f6"),kt.style.setProperty("padding","0.125rem 0.25rem"),kt.style.setProperty("border-radius","0.125rem"),c(kt,(()=>{var Yt=Ve(()=>typeof Dt.definition.example=="object");return()=>Yt()?JSON.stringify(Dt.definition.example):Dt.definition.example})()),Ft}}),null),be(Ft=>{var Pt=Dt.definition.type==="number"?"#dbeafe":Dt.definition.type==="string"?"#fef3c7":Dt.definition.type==="boolean"?"#dcfce7":"#f3e8ff",kt=Dt.definition.type==="number"?"#1e40af":Dt.definition.type==="string"?"#92400e":Dt.definition.type==="boolean"?"#166534":"#7c3aed";return Pt!==Ft.e&&((Ft.e=Pt)!=null?Qe.style.setProperty("background-color",Pt):Qe.style.removeProperty("background-color")),kt!==Ft.t&&((Ft.t=kt)!=null?Qe.style.setProperty("color",kt):Qe.style.removeProperty("color")),Ft},{e:void 0,t:void 0}),Kt})()})),Wt.style.setProperty("font-size","1rem"),Wt.style.setProperty("font-weight","600"),Wt.style.setProperty("margin-bottom","0.75rem"),Wt.style.setProperty("color","#1f2937"),c(Gt,T(We,{get when(){return Ve(()=>!!m()?.examples)()&&m().examples.length>0},get children(){return[(()=>{var Dt=kS();return Dt.style.setProperty("margin-bottom","0.75rem"),c(Dt,T(_t,{get each(){return m().examples},children:(Kt,gt)=>(()=>{var St=lG();return St.$$click=()=>s(gt()),c(St,()=>Kt.name),be(Qe=>y(St,{...X,"margin-right":"0.5rem","margin-bottom":"0.5rem","font-size":"0.75rem",padding:"0.375rem 0.75rem","background-color":o()===gt()?"#3b82f6":"white",color:o()===gt()?"white":"#374151",border:o()===gt()?"none":"1px solid #d1d5db"},Qe)),St})()})),Dt})(),T(We,{get when(){return m()?.examples[o()]},get children(){var Dt=tG(),Kt=Dt.firstChild,gt=Kt.nextSibling,St=gt.nextSibling,Qe=St.nextSibling,vt=Qe.firstChild;return Dt.style.setProperty("border","1px solid #d1d5db"),Dt.style.setProperty("border-radius","0.375rem"),Dt.style.setProperty("padding","0.75rem"),Dt.style.setProperty("background-color","#f9fafb"),Kt.style.setProperty("font-size","0.875rem"),Kt.style.setProperty("font-weight","600"),Kt.style.setProperty("margin-bottom","0.5rem"),c(Kt,()=>m().examples[o()].name),gt.style.setProperty("font-size","0.75rem"),gt.style.setProperty("color","#6b7280"),gt.style.setProperty("margin-bottom","0.75rem"),c(gt,()=>m().examples[o()].description),St.style.setProperty("background-color","#1f2937"),St.style.setProperty("color","#f9fafb"),St.style.setProperty("padding","0.75rem"),St.style.setProperty("border-radius","0.25rem"),St.style.setProperty("font-family","monospace"),St.style.setProperty("font-size","0.75rem"),St.style.setProperty("overflow-x","auto"),St.style.setProperty("white-space","pre"),c(St,()=>JSON.stringify({data:m().examples[o()].sampleData},null,2)),Qe.style.setProperty("margin-top","0.5rem"),Qe.style.setProperty("padding","0.5rem"),Qe.style.setProperty("background-color","#fef3c7"),Qe.style.setProperty("border-radius","0.25rem"),vt.style.setProperty("font-size","0.7rem"),vt.style.setProperty("color","#92400e"),Dt}})]}}),null),be(Dt=>y($e,U,Dt)),$e}}),ke),Ge.style.setProperty("display","flex"),Ge.style.setProperty("justify-content","space-between"),Ge.style.setProperty("align-items","center"),Ge.style.setProperty("margin-bottom","1rem"),et.style.setProperty("font-size","1.125rem"),et.style.setProperty("font-weight","600"),c(et,()=>e("eventAutomation.builder.conditions.title")),ve.$$click=N,c(ve,()=>e("eventAutomation.builder.conditions.add"),null),c(ke,T(We,{get when(){return(h().conditions?.length||0)===0},get children(){var $e=nG(),ft=$e.firstChild,ct=ft.nextSibling;return ct.nextSibling,$e.style.setProperty("color","#6b7280"),$e.style.setProperty("font-style","italic"),c($e,()=>e("eventAutomation.builder.conditions.noConditions"),ft),c($e,()=>h().eventType,ct),$e}}),null),c(ke,T(_t,{get each(){return h().conditions||[]},children:($e,ft)=>(()=>{var ct=dG(),yt=ct.firstChild,$t=yt.firstChild,bt=$t.firstChild,Gt=bt.nextSibling,Wt=Gt.firstChild,Dt=$t.nextSibling,Kt=Dt.firstChild,gt=Kt.nextSibling,St=Dt.nextSibling,Qe=St.firstChild,vt=St.nextSibling,Ft=vt.firstChild;return ct.style.setProperty("border","1px solid #d1d5db"),ct.style.setProperty("border-radius","0.375rem"),ct.style.setProperty("padding","1rem"),ct.style.setProperty("margin-bottom","1rem"),yt.style.setProperty("display","grid"),yt.style.setProperty("grid-template-columns","2fr 1fr 1fr auto"),yt.style.setProperty("gap","1rem"),yt.style.setProperty("align-items","end"),bt.style.setProperty("display","block"),bt.style.setProperty("font-weight","500"),bt.style.setProperty("margin-bottom","0.5rem"),c(bt,()=>e("eventAutomation.builder.conditions.field")),Gt.addEventListener("change",Pt=>R(ft(),"field",Pt.currentTarget.value)),c(Wt,()=>e("eventAutomation.builder.conditions.selectField")),c(Gt,T(_t,{get each(){return p()},children:Pt=>(()=>{var kt=uG(),Yt=kt.firstChild,nr=Yt.nextSibling;return nr.nextSibling,c(kt,()=>Pt.path,Yt),c(kt,()=>Pt.definition.description,nr),be(()=>kt.value=Pt.path),kt})()}),null),Kt.style.setProperty("display","block"),Kt.style.setProperty("font-weight","500"),Kt.style.setProperty("margin-bottom","0.5rem"),c(Kt,()=>e("eventAutomation.builder.conditions.operator")),gt.addEventListener("change",Pt=>R(ft(),"operator",Pt.currentTarget.value)),c(gt,T(_t,{each:x,children:Pt=>(()=>{var kt=ES();return c(kt,()=>Pt.label),be(()=>kt.value=Pt.value),kt})()})),Qe.style.setProperty("display","block"),Qe.style.setProperty("font-weight","500"),Qe.style.setProperty("margin-bottom","0.5rem"),c(Qe,()=>e("eventAutomation.builder.conditions.value")),c(St,T(We,{get when(){return $e.operator!=="exists"&&$e.operator!=="notExists"},get fallback(){return(()=>{var Pt=hG();return be(kt=>y(Pt,A,kt)),Pt})()},get children(){var Pt=cG();return Pt.$$input=kt=>R(ft(),"value",$e.dataType==="number"?parseFloat(kt.currentTarget.value)||0:kt.currentTarget.value),be(kt=>{var Yt=$e.dataType==="number"?"number":"text",nr=A,cr=$e.dataType==="number"?"0":e("eventAutomation.builder.conditions.enterValue");return Yt!==kt.e&&ir(Pt,"type",kt.e=Yt),kt.t=y(Pt,nr,kt.t),cr!==kt.a&&ir(Pt,"placeholder",kt.a=cr),kt},{e:void 0,t:void 0,a:void 0}),be(()=>Pt.value=$e.value),Pt}}),null),Ft.$$click=()=>M(ft()),c(Ft,()=>e("eventAutomation.builder.conditions.remove")),be(Pt=>{var kt=I,Yt=I,nr=se;return Pt.e=y(Gt,kt,Pt.e),Pt.t=y(gt,Yt,Pt.t),Pt.a=y(Ft,nr,Pt.a),Pt},{e:void 0,t:void 0,a:void 0}),be(()=>Gt.value=$e.field),be(()=>gt.value=$e.operator),ct})()}),null),c(O,T(We,{get when(){return a()},get children(){var $e=kS();return $e.style.setProperty("margin-bottom","2rem"),c($e,T(WW,{get customFields(){return d()},get availableFields(){return p()},onAdd:D,onUpdate:$,onRemove:w})),$e}}),De),De.style.setProperty("margin-bottom","2rem"),He.style.setProperty("display","flex"),He.style.setProperty("justify-content","space-between"),He.style.setProperty("align-items","center"),He.style.setProperty("margin-bottom","1rem"),Je.style.setProperty("font-size","1.125rem"),Je.style.setProperty("font-weight","600"),c(Je,()=>e("eventAutomation.builder.journalTemplate.title")),Le.style.setProperty("display","flex"),Le.style.setProperty("gap","0.5rem"),Te.$$click=()=>l(!a()),c(Te,()=>a()?"🔽 Hide Custom Fields":"🛠️ Manage Custom Fields"),he.$$click=()=>i(!n()),c(he,()=>n()?"🔽 Hide Data Interface":"📊 Show Data Interface"),Ne.style.setProperty("display","grid"),Ne.style.setProperty("grid-template-columns","1fr 1fr"),Ne.style.setProperty("gap","1rem"),Ne.style.setProperty("margin-bottom","1rem"),c(Ne,T(sy,{get label(){return`${e("eventAutomation.builder.journalTemplate.description")} *`},get value(){return h().journalEntryTemplate?.description||""},get placeholder(){return e("eventAutomation.builder.journalTemplate.descriptionPlaceholder")},get availableFields(){return p()},onInput:$e=>V("description",$e),type:"text",helpText:"Use {data.field} to insert event data in descriptions"}),null),c(Ne,T(sy,{get label(){return`${e("eventAutomation.builder.journalTemplate.reference")} *`},get value(){return h().journalEntryTemplate?.reference||""},get placeholder(){return e("eventAutomation.builder.journalTemplate.referencePlaceholder")},get availableFields(){return p()},onInput:$e=>V("reference",$e),type:"text",helpText:"Template for journal entry reference"}),null),rt.style.setProperty("display","flex"),rt.style.setProperty("justify-content","space-between"),rt.style.setProperty("align-items","center"),rt.style.setProperty("margin-bottom","1rem"),re.style.setProperty("font-size","1rem"),re.style.setProperty("font-weight","600"),c(re,()=>e("eventAutomation.builder.journalTemplate.lines")),Ue.$$click=C,c(Ue,()=>e("eventAutomation.builder.journalTemplate.addLine"),null),c(De,T(We,{get when(){return(h().journalEntryTemplate?.lines.length||0)===0},get children(){var $e=iG();return $e.style.setProperty("color","#6b7280"),$e.style.setProperty("font-style","italic"),$e.style.setProperty("margin-bottom","1rem"),c($e,()=>e("eventAutomation.builder.journalTemplate.noLines")),$e}}),null),c(De,T(_t,{get each(){return h().journalEntryTemplate?.lines||[]},children:($e,ft)=>(()=>{var ct=pG(),yt=ct.firstChild,$t=yt.firstChild;$t.firstChild;var bt=$t.nextSibling,Gt=yt.nextSibling,Wt=Gt.firstChild,Dt=Wt.firstChild,Kt=Dt.nextSibling,gt=Wt.nextSibling,St=gt.firstChild,Qe=St.nextSibling,vt=Qe.firstChild,Ft=vt.nextSibling,Pt=Gt.nextSibling;return ct.style.setProperty("border","1px solid #d1d5db"),ct.style.setProperty("border-radius","0.375rem"),ct.style.setProperty("padding","1rem"),ct.style.setProperty("margin-bottom","1rem"),ct.style.setProperty("background-color","#fafafa"),yt.style.setProperty("display","flex"),yt.style.setProperty("justify-content","space-between"),yt.style.setProperty("align-items","center"),yt.style.setProperty("margin-bottom","1rem"),$t.style.setProperty("font-size","0.875rem"),$t.style.setProperty("font-weight","600"),$t.style.setProperty("margin","0"),c($t,()=>ft()+1,null),bt.$$click=()=>_(ft()),c(bt,()=>e("eventAutomation.builder.conditions.remove")),Gt.style.setProperty("display","grid"),Gt.style.setProperty("grid-template-columns","1fr 1fr"),Gt.style.setProperty("gap","1rem"),Gt.style.setProperty("margin-bottom","1rem"),Dt.style.setProperty("display","block"),Dt.style.setProperty("font-weight","500"),Dt.style.setProperty("margin-bottom","0.5rem"),c(Dt,()=>e("eventAutomation.builder.journalTemplate.account")),Kt.addEventListener("change",kt=>k(ft(),"accountExpression",kt.currentTarget.value)),c(Kt,T(_t,{each:P,children:kt=>(()=>{var Yt=fG(),nr=Yt.firstChild,cr=nr.nextSibling,on=cr.nextSibling,Dr=on.nextSibling;return Dr.nextSibling,c(Yt,()=>kt.id,nr),c(Yt,()=>kt.name,cr),c(Yt,()=>kt.type,Dr),be(()=>Yt.value=kt.id),Yt})()})),St.style.setProperty("display","block"),St.style.setProperty("font-weight","500"),St.style.setProperty("margin-bottom","0.5rem"),c(St,()=>e("eventAutomation.builder.journalTemplate.type")),Qe.addEventListener("change",kt=>k(ft(),"isDebit",kt.currentTarget.value==="debit")),c(vt,()=>e("eventAutomation.builder.journalTemplate.debit")),c(Ft,()=>e("eventAutomation.builder.journalTemplate.credit")),Pt.style.setProperty("display","grid"),Pt.style.setProperty("grid-template-columns","2fr 1fr"),Pt.style.setProperty("gap","1rem"),c(Pt,T(sy,{get label(){return e("eventAutomation.builder.journalTemplate.descriptionTemplate")},get value(){return $e.descriptionTemplate},get placeholder(){return e("eventAutomation.builder.journalTemplate.descriptionTemplatePlaceholder")},get availableFields(){return p()},onInput:kt=>k(ft(),"descriptionTemplate",kt),type:"text",helpText:"Use {data.field} to insert event data"}),null),c(Pt,T(sy,{get label(){return e("eventAutomation.builder.journalTemplate.amountExpression")},get value(){return $e.amountExpression},get placeholder(){return e("eventAutomation.builder.journalTemplate.amountExpressionPlaceholder")},get availableFields(){return p()},onInput:kt=>k(ft(),"amountExpression",kt),type:"expression",helpText:"Field path or expression for amount calculation"}),null),be(kt=>{var Yt=se,nr=I,cr=I;return kt.e=y(bt,Yt,kt.e),kt.t=y(Kt,nr,kt.t),kt.a=y(Qe,cr,kt.a),kt},{e:void 0,t:void 0,a:void 0}),be(()=>Kt.value=$e.accountExpression),be(()=>Qe.value=$e.isDebit?"debit":"credit"),ct})()}),null),we.style.setProperty("display","flex"),we.style.setProperty("justify-content","flex-end"),we.style.setProperty("gap","1rem"),Qn(xe,"click",t.onCancel,!0),c(xe,()=>e("eventAutomation.builder.cancel")),je.$$click=v,c(je,(()=>{var $e=Ve(()=>!!r());return()=>$e()?e("eventAutomation.builder.update"):e("eventAutomation.builder.save")})()),be($e=>{var ft=z,ct=U,yt=A,$t=e("eventAutomation.builder.ruleNamePlaceholder"),bt=A,Gt={...A,height:"4rem",resize:"vertical"},Wt=e("eventAutomation.builder.descriptionPlaceholder"),Dt=I,Kt=U,gt=X,St={...X,"font-size":"0.875rem"},Qe={...X,"font-size":"0.875rem"},vt=X,Ft=X,Pt=Z;return $e.e=y(E,ft,$e.e),$e.t=y(G,ct,$e.t),$e.a=y(te,yt,$e.a),$t!==$e.o&&ir(te,"placeholder",$e.o=$t),$e.i=y(ne,bt,$e.i),$e.n=y(de,Gt,$e.n),Wt!==$e.s&&ir(de,"placeholder",$e.s=Wt),$e.h=y(qe,Dt,$e.h),$e.r=y(ke,Kt,$e.r),$e.d=y(ve,gt,$e.d),$e.l=y(Te,St,$e.l),$e.u=y(he,Qe,$e.u),$e.c=y(Ue,vt,$e.c),$e.w=y(xe,Ft,$e.w),$e.m=y(je,Pt,$e.m),$e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0}),be(()=>te.value=h().name||""),be(()=>ne.value=h().priority||100),be(()=>de.value=h().description||""),be(()=>qe.value=h().eventType||""),be(()=>Be.checked=h().isActive??!0),E})()};tr(["input","click"]);var mG=le("<div><p>Loading rules..."),gG=le("<div><p>Failed to load rules. Please refresh the page."),vG=le("<div><p></p><button>"),bG=le("<div><div><h2></h2><button>+ "),TS=le("<div>"),IS=le("<div><h2>"),PG=le("<div><div><h1></h1><p></p></div><div><button> (<!>)</button><button></button><button>"),xG=le("<div><div><div><div><h3></h3><span></span><span></span></div><p></p><div><div><strong>:</strong></div><div><strong>:</strong><div> <!> - </div></div></div></div><div><button></button><button></button><button>"),SG=le("<div> <!> "),wG=le("<span>"),CG=le("<div><div><h3></h3><span></span></div><div><div><strong>:</strong> </div><div><strong>:</strong> </div><details><summary></summary><pre>"),_G=le("<div><strong>:</strong> "),AG=le("<div><div><div><h3></h3><span></span></div><span></span></div><div><div><strong>:</strong> </div><div><strong>:</strong> </div><div><strong>:</strong> <!> ");const kG=()=>{const{t}=Gu(),[e,r]=Ae("rules"),[n,i]=Ae(null),[o,s]=Ae(!1),[a,l]=Ae(""),[d,{refetch:u}]=Lk(()=>Ga.getAll(),{initialValue:[]}),h=()=>$3.getHistory(50),f=()=>oy.getAuditLog(50);t("eventAutomation.eventTypes.invoice_completed"),t("eventAutomation.categories.financial"),t("eventAutomation.eventTypes.invoice_created"),t("eventAutomation.categories.financial"),t("eventAutomation.eventTypes.invoice_updated"),t("eventAutomation.categories.financial"),t("eventAutomation.eventTypes.payment_received"),t("eventAutomation.categories.financial"),t("eventAutomation.eventTypes.inventory_received"),t("eventAutomation.categories.inventory"),t("eventAutomation.eventTypes.inventory_sold"),t("eventAutomation.categories.inventory"),t("eventAutomation.eventTypes.inventory_adjusted"),t("eventAutomation.categories.inventory"),t("eventAutomation.eventTypes.expense_created"),t("eventAutomation.categories.financial"),t("eventAutomation.eventTypes.expense_approved"),t("eventAutomation.categories.financial"),t("eventAutomation.eventTypes.expense_paid"),t("eventAutomation.categories.financial"),t("eventAutomation.eventTypes.service_rendered"),t("eventAutomation.categories.operational"),t("eventAutomation.eventTypes.freight_processed"),t("eventAutomation.categories.operational"),t("eventAutomation.eventTypes.customs_cleared"),t("eventAutomation.categories.operational");const p=async M=>{try{n()?await Ga.update(n().id,M):await Ga.create(M),await u();const C=await Ga.getAll();oy.syncRules(C),i(null),s(!1)}catch(C){console.error("Failed to save rule:",C),alert("Failed to save rule. Please try again.")}},m=async M=>{if(confirm(t("common.confirmDelete")))try{await Ga.delete(M),await u();const C=await Ga.getAll();oy.syncRules(C)}catch(C){console.error("Failed to delete rule:",C),alert("Failed to delete rule. Please try again.")}},x=M=>new Date(M).toLocaleString(),P=M=>({padding:"0.75rem 1.5rem","background-color":M?"#3b82f6":"transparent",color:M?"white":"#6b7280",border:"none","border-radius":"0.5rem",cursor:"pointer","font-weight":"500",transition:"all 0.2s"}),g={"background-color":"white","border-radius":"0.5rem",padding:"1.5rem","box-shadow":"0 1px 3px 0 rgba(0, 0, 0, 0.1)","margin-bottom":"1rem"},F={padding:"0.5rem 1rem","background-color":"#3b82f6",color:"white",border:"none","border-radius":"0.375rem",cursor:"pointer","font-weight":"500"},V={...F,"background-color":"#6b7280"},N={...F,"background-color":"#ef4444"},R=async(M,C)=>{try{await Ga.toggleActive(M,C),await u();const k=await Ga.getAll();oy.syncRules(k)}catch(k){console.error("Failed to toggle rule:",k),alert("Failed to update rule status. Please try again.")}};return(()=>{var M=PG(),C=M.firstChild,k=C.firstChild,D=k.nextSibling,$=C.nextSibling,w=$.firstChild,_=w.firstChild,v=_.nextSibling;v.nextSibling;var z=w.nextSibling,W=z.nextSibling;return M.style.setProperty("max-width","1200px"),M.style.setProperty("margin","0 auto"),M.style.setProperty("padding","2rem"),C.style.setProperty("margin-bottom","2rem"),k.style.setProperty("font-size","2rem"),k.style.setProperty("font-weight","700"),k.style.setProperty("margin-bottom","0.5rem"),c(k,()=>t("eventAutomation.title")),D.style.setProperty("color","#6b7280"),c(D,()=>t("eventAutomation.subtitle")),$.style.setProperty("display","flex"),$.style.setProperty("gap","0.5rem"),$.style.setProperty("margin-bottom","2rem"),w.$$click=()=>r("rules"),c(w,()=>t("eventAutomation.tabs.rules"),_),c(w,(()=>{var A=Ve(()=>!d.loading&&!d.error);return()=>A()?d().length:0})(),v),z.$$click=()=>r("events"),c(z,()=>t("eventAutomation.tabs.events")),W.$$click=()=>r("audit"),c(W,()=>t("eventAutomation.tabs.audit")),c(M,T(We,{get when(){return e()==="rules"},get children(){var A=bG(),I=A.firstChild,ee=I.firstChild,Z=ee.nextSibling;return Z.firstChild,I.style.setProperty("display","flex"),I.style.setProperty("justify-content","space-between"),I.style.setProperty("margin-bottom","1.5rem"),ee.style.setProperty("font-size","1.25rem"),ee.style.setProperty("font-weight","600"),c(ee,()=>t("eventAutomation.rules.title")),Z.$$click=()=>s(!0),c(Z,()=>t("eventAutomation.rules.createNew"),null),c(A,T(We,{get when(){return d.loading},get children(){var X=mG(),se=X.firstChild;return se.style.setProperty("text-align","center"),se.style.setProperty("color","#6b7280"),be(U=>y(X,g,U)),X}}),null),c(A,T(We,{get when(){return d.error},get children(){var X=gG(),se=X.firstChild;return se.style.setProperty("text-align","center"),se.style.setProperty("color","#ef4444"),be(U=>y(X,g,U)),X}}),null),c(A,T(We,{get when(){return Ve(()=>!d.loading&&!d.error)()&&d().length===0},get children(){var X=vG(),se=X.firstChild,U=se.nextSibling;return se.style.setProperty("margin-bottom","1rem"),c(se,()=>t("eventAutomation.rules.noRules")),U.$$click=()=>s(!0),c(U,()=>t("eventAutomation.rules.createFirst")),be(E=>{var O={...g,"text-align":"center",padding:"3rem",color:"#6b7280"},L=F;return E.e=y(X,O,E.e),E.t=y(U,L,E.t),E},{e:void 0,t:void 0}),X}}),null),c(A,T(_t,{get each(){return Ve(()=>!d.loading&&!d.error)()?d():[]},children:X=>(()=>{var se=xG(),U=se.firstChild,E=U.firstChild,O=E.firstChild,L=O.firstChild,G=L.nextSibling,K=G.nextSibling,q=O.nextSibling,B=q.nextSibling,H=B.firstChild,Y=H.firstChild,te=Y.firstChild,oe=H.nextSibling,pe=oe.firstChild,ne=pe.firstChild,Q=pe.nextSibling,ce=Q.firstChild,ue=ce.nextSibling;ue.nextSibling;var de=E.nextSibling,ge=de.firstChild,ye=ge.nextSibling,fe=ye.nextSibling;return U.style.setProperty("display","flex"),U.style.setProperty("justify-content","space-between"),U.style.setProperty("align-items","start"),E.style.setProperty("flex","1"),O.style.setProperty("display","flex"),O.style.setProperty("align-items","center"),O.style.setProperty("gap","1rem"),O.style.setProperty("margin-bottom","0.5rem"),L.style.setProperty("font-size","1.125rem"),L.style.setProperty("font-weight","600"),c(L,()=>X.name),G.style.setProperty("padding","0.25rem 0.75rem"),G.style.setProperty("border-radius","0.375rem"),G.style.setProperty("font-size","0.875rem"),G.style.setProperty("font-weight","500"),c(G,(()=>{var Se=Ve(()=>!!X.isActive);return()=>Se()?t("common.active"):t("common.inactive")})()),K.style.setProperty("padding","0.25rem 0.75rem"),K.style.setProperty("background-color","#e5e7eb"),K.style.setProperty("color","#374151"),K.style.setProperty("border-radius","0.375rem"),K.style.setProperty("font-size","0.875rem"),c(K,()=>X.eventType),q.style.setProperty("color","#6b7280"),q.style.setProperty("margin-bottom","1rem"),c(q,()=>X.description),B.style.setProperty("font-size","0.875rem"),B.style.setProperty("color","#4b5563"),H.style.setProperty("margin-bottom","0.5rem"),c(Y,()=>t("eventAutomation.rules.conditions"),te),c(H,T(_t,{get each(){return X.conditions},children:(Se,qe)=>(()=>{var Oe=SG(),Ie=Oe.firstChild,Be=Ie.nextSibling;return Be.nextSibling,Oe.style.setProperty("margin-left","1rem"),c(Oe,()=>qe()>0&&"AND ",Ie),c(Oe,()=>Se.field,Ie),c(Oe,()=>Se.operator,Be),c(Oe,()=>Se.value,null),Oe})()}),null),c(H,(()=>{var Se=Ve(()=>X.conditions.length===0);return()=>Se()&&(()=>{var qe=wG();return qe.style.setProperty("margin-left","1rem"),c(qe,()=>t("eventAutomation.rules.alwaysTriggers")),qe})()})(),null),c(pe,()=>t("eventAutomation.rules.journalEntry"),ne),Q.style.setProperty("margin-left","1rem"),c(Q,()=>X.journalEntryTemplate.lines.length,ce),c(Q,()=>t("eventAutomation.rules.lines"),ue),c(Q,()=>X.journalEntryTemplate.description,null),de.style.setProperty("display","flex"),de.style.setProperty("gap","0.5rem"),ge.$$click=()=>R(X.id,!X.isActive),c(ge,(()=>{var Se=Ve(()=>!!X.isActive);return()=>Se()?t("eventAutomation.rules.disable"):t("eventAutomation.rules.enable")})()),ye.$$click=()=>i(X),c(ye,()=>t("common.edit")),fe.$$click=()=>m(X.id),c(fe,()=>t("common.delete")),be(Se=>{var qe=g,Oe=X.isActive?"#d1fae5":"#fee2e2",Ie=X.isActive?"#065f46":"#991b1b",Be=V,ke=F,Ge=N;return Se.e=y(se,qe,Se.e),Oe!==Se.t&&((Se.t=Oe)!=null?G.style.setProperty("background-color",Oe):G.style.removeProperty("background-color")),Ie!==Se.a&&((Se.a=Ie)!=null?G.style.setProperty("color",Ie):G.style.removeProperty("color")),Se.o=y(ge,Be,Se.o),Se.i=y(ye,ke,Se.i),Se.n=y(fe,Ge,Se.n),Se},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),se})()}),null),be(X=>y(Z,F,X)),A}}),null),c(M,T(We,{get when(){return e()==="events"},get children(){var A=IS(),I=A.firstChild;return I.style.setProperty("font-size","1.25rem"),I.style.setProperty("font-weight","600"),I.style.setProperty("margin-bottom","1.5rem"),c(I,()=>t("eventAutomation.events.title")),c(A,T(We,{get when(){return h().length===0},get children(){var ee=TS();return c(ee,()=>t("eventAutomation.events.noEvents")),be(Z=>y(ee,{...g,"text-align":"center",color:"#6b7280"},Z)),ee}}),null),c(A,T(_t,{get each(){return h()},children:ee=>(()=>{var Z=CG(),X=Z.firstChild,se=X.firstChild,U=se.nextSibling,E=X.nextSibling,O=E.firstChild,L=O.firstChild,G=L.firstChild;L.nextSibling;var K=O.nextSibling,q=K.firstChild,B=q.firstChild;q.nextSibling;var H=K.nextSibling,Y=H.firstChild,te=Y.nextSibling;return X.style.setProperty("display","flex"),X.style.setProperty("justify-content","space-between"),X.style.setProperty("margin-bottom","0.5rem"),se.style.setProperty("font-size","1rem"),se.style.setProperty("font-weight","600"),c(se,()=>ee.type),U.style.setProperty("font-size","0.875rem"),U.style.setProperty("color","#6b7280"),c(U,()=>x(ee.timestamp)),E.style.setProperty("font-size","0.875rem"),E.style.setProperty("color","#4b5563"),c(L,()=>t("eventAutomation.events.source"),G),c(O,()=>ee.source,null),c(q,()=>t("eventAutomation.events.eventId"),B),c(K,()=>ee.id,null),H.style.setProperty("margin-top","0.5rem"),Y.style.setProperty("cursor","pointer"),c(Y,()=>t("eventAutomation.events.viewData")),te.style.setProperty("margin-top","0.5rem"),te.style.setProperty("padding","0.5rem"),te.style.setProperty("background-color","#f3f4f6"),te.style.setProperty("border-radius","0.25rem"),te.style.setProperty("overflow","auto"),te.style.setProperty("font-size","0.75rem"),c(te,()=>JSON.stringify(ee.data,null,2)),be(oe=>y(Z,g,oe)),Z})()}),null),A}}),null),c(M,T(We,{get when(){return e()==="audit"},get children(){var A=IS(),I=A.firstChild;return I.style.setProperty("font-size","1.25rem"),I.style.setProperty("font-weight","600"),I.style.setProperty("margin-bottom","1.5rem"),c(I,()=>t("eventAutomation.audit.title")),c(A,T(We,{get when(){return f().length===0},get children(){var ee=TS();return c(ee,()=>t("eventAutomation.audit.noActivity")),be(Z=>y(ee,{...g,"text-align":"center",color:"#6b7280"},Z)),ee}}),null),c(A,T(_t,{get each(){return f()},children:ee=>(()=>{var Z=AG(),X=Z.firstChild,se=X.firstChild,U=se.firstChild,E=U.nextSibling,O=se.nextSibling,L=X.nextSibling,G=L.firstChild,K=G.firstChild,q=K.firstChild;K.nextSibling;var B=G.nextSibling,H=B.firstChild,Y=H.firstChild;H.nextSibling;var te=B.nextSibling,oe=te.firstChild,pe=oe.firstChild,ne=oe.nextSibling,Q=ne.nextSibling;return Q.nextSibling,X.style.setProperty("display","flex"),X.style.setProperty("justify-content","space-between"),X.style.setProperty("margin-bottom","0.5rem"),se.style.setProperty("display","flex"),se.style.setProperty("align-items","center"),se.style.setProperty("gap","1rem"),U.style.setProperty("font-size","1rem"),U.style.setProperty("font-weight","600"),c(U,()=>ee.eventType),E.style.setProperty("padding","0.25rem 0.75rem"),E.style.setProperty("border-radius","0.375rem"),E.style.setProperty("font-size","0.875rem"),E.style.setProperty("font-weight","500"),c(E,(()=>{var ce=Ve(()=>!!ee.success);return()=>ce()?t("eventAutomation.audit.success"):t("eventAutomation.audit.failed")})()),O.style.setProperty("font-size","0.875rem"),O.style.setProperty("color","#6b7280"),c(O,()=>x(ee.timestamp)),L.style.setProperty("font-size","0.875rem"),L.style.setProperty("color","#4b5563"),c(K,()=>t("eventAutomation.audit.eventId"),q),c(G,()=>ee.eventId,null),c(H,()=>t("eventAutomation.audit.rulesTriggered"),Y),c(B,()=>ee.rulesTriggered.join(", ")||t("common.none"),null),c(oe,()=>t("eventAutomation.audit.entriesCreated"),pe),c(te,()=>ee.entriesCreated.length,Q),c(te,()=>t("eventAutomation.audit.journalEntries"),null),c(L,T(We,{get when(){return ee.error},get children(){var ce=_G(),ue=ce.firstChild,de=ue.firstChild;return ue.nextSibling,ce.style.setProperty("color","#dc2626"),ce.style.setProperty("margin-top","0.5rem"),c(ue,()=>t("eventAutomation.audit.error"),de),c(ce,()=>ee.error,null),ce}}),null),be(ce=>{var ue=g,de=ee.success?"#d1fae5":"#fee2e2",ge=ee.success?"#065f46":"#991b1b";return ce.e=y(Z,ue,ce.e),de!==ce.t&&((ce.t=de)!=null?E.style.setProperty("background-color",de):E.style.removeProperty("background-color")),ge!==ce.a&&((ce.a=ge)!=null?E.style.setProperty("color",ge):E.style.removeProperty("color")),ce},{e:void 0,t:void 0,a:void 0}),Z})()}),null),A}}),null),c(M,T(We,{get when(){return o()||n()},get children(){return T(yG,{get rule(){return n()},onSave:p,onCancel:()=>{s(!1),i(null)}})}}),null),be(A=>{var I=P(e()==="rules"),ee=P(e()==="events"),Z=P(e()==="audit");return A.e=y(w,I,A.e),A.t=y(z,ee,A.t),A.a=y(W,Z,A.a),A},{e:void 0,t:void 0,a:void 0}),M})()};tr(["click"]);const M3=async t=>new Promise(e=>{const r=new FileReader;r.onload=n=>{const i=new Image;i.onload=()=>{try{console.log("Image loaded:",i.width,"x",i.height);const o=document.createElement("canvas"),s=o.getContext("2d");if(!s){console.error("Canvas context not available"),e({success:!1,error:"Canvas context not available - your browser may not support this feature"});return}if(i.width===0||i.height===0){e({success:!1,error:"Invalid image dimensions"});return}o.width=i.width,o.height=i.height,s.drawImage(i,0,0);const a=s.getImageData(0,0,o.width,o.height),l=a.data;for(let u=0;u<l.length;u+=4){const h=l[u],f=l[u+1],p=l[u+2],P=.299*h+.587*f+.114*p<128?0:255;l[u]=P,l[u+1]=P,l[u+2]=P}s.putImageData(a,0,0),console.log("Processing image data for signature detection...");const d=EG(a);if(console.log("Signature bounds:",d),d){const u=document.createElement("canvas"),h=u.getContext("2d");if(h){const p=Math.max(d.maxX-d.minX+20,50),m=Math.max(d.maxY-d.minY+20,30);u.width=p,u.height=m,console.log("Creating signature canvas:",p,"x",m),h.fillStyle="white",h.fillRect(0,0,p,m);const x=Math.max(0,d.minX-10),P=Math.max(0,d.minY-10),g=Math.min(o.width-x,p),F=Math.min(o.height-P,m);h.drawImage(o,x,P,g,F,0,0,p,m),console.log("Signature extracted, making background transparent..."),TG(h,p,m);const V=IG(d,o.width,o.height);console.log("Signature extraction completed with confidence:",V),e({success:!0,signatureDataUrl:u.toDataURL("image/png"),confidence:V})}else e({success:!1,error:"Could not create signature canvas context"})}else console.log("No signature detected in image"),e({success:!1,error:`No signature detected. Please ensure:
- The signature is dark (black/blue ink)
- The background is light (white/cream)
- The signature is clearly visible`})}catch(o){e({success:!1,error:o instanceof Error?o.message:"Unknown error"})}},i.onerror=()=>{e({success:!1,error:"Failed to load image"})},i.src=n.target?.result},r.onerror=()=>{e({success:!1,error:"Failed to read file"})},r.readAsDataURL(t)}),EG=t=>{const e=t.data,r=t.width,n=t.height;let i=r,o=n,s=0,a=0,l=0;for(let f=0;f<n;f++)for(let p=0;p<r;p++){const m=(f*r+p)*4,x=e[m],P=e[m+1],g=e[m+2];if(e[m+3]<128)continue;.299*x+.587*P+.114*g<150&&(l++,i=Math.min(i,p),o=Math.min(o,f),s=Math.max(s,p),a=Math.max(a,f))}const d=s-i,u=a-o,h=l>=50&&d>=20&&u>=10;return console.log("Signature detection stats:",{pixelCount:l,width:d,height:u,hasValidSignature:h,bounds:h?{minX:i,minY:o,maxX:s,maxY:a}:null}),h?{minX:i,minY:o,maxX:s,maxY:a}:null},TG=(t,e,r)=>{const n=t.getImageData(0,0,e,r),i=n.data;for(let o=0;o<i.length;o+=4){const s=i[o],a=i[o+1],l=i[o+2];s>240&&a>240&&l>240&&(i[o+3]=0)}t.putImageData(n,0,0)},IG=(t,e,r)=>{const n=t.maxX-t.minX,i=t.maxY-t.minY,o=n*i,s=e*r,a=o/s;let l=0;a>=.05&&a<=.3?l=.9:a<.05?l=.5:l=.6;const d=n/i;return d>=2&&d<=5&&(l=Math.min(l+.1,1)),l},P1=async t=>new Promise(e=>{const r=new Image;r.onload=()=>{const n=document.createElement("canvas"),i=n.getContext("2d");if(!i){e(t);return}const o=3;n.width=r.width*o,n.height=r.height*o,i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",i.drawImage(r,0,0,n.width,n.height);const s=i.getImageData(0,0,n.width,n.height),a=s.data;NG(a,n.width,n.height),i.putImageData(s,0,0),$G(i,n.width,n.height);const l=document.createElement("canvas"),d=l.getContext("2d");if(!d){e(t);return}l.width=r.width,l.height=r.height,d.imageSmoothingEnabled=!0,d.imageSmoothingQuality="high",d.drawImage(n,0,0,l.width,l.height),e(l.toDataURL("image/png"))},r.onerror=()=>e(t),r.src=t}),NG=(t,e,r)=>{for(let n=0;n<t.length;n+=4){const i=t[n],o=t[n+1],s=t[n+2];if(t[n+3]<128)continue;const l=.299*i+.587*o+.114*s,d=RG(t,n,e,r);let u;l<d?u=Math.max(0,l-50):u=Math.min(255,l+30),t[n]=u,t[n+1]=u,t[n+2]=u}DG(t,e,r),LG(t,e,r)},RG=(t,e,r,n)=>{const i=e/4%r,o=Math.floor(e/4/r);let s=0,a=0;const l=5;for(let u=-l;u<=l;u++)for(let h=-l;h<=l;h++){const f=i+h,p=o+u;if(f>=0&&f<r&&p>=0&&p<n){const m=(p*r+f)*4;if(m<t.length){const x=.299*t[m]+.587*t[m+1]+.114*t[m+2];s+=x,a++}}}return(a>0?s/a:128)-15},DG=(t,e,r)=>{const n=new Uint8ClampedArray(t),i=1;for(let o=i;o<r-i;o++)for(let s=i;s<e-i;s++){const a=(o*e+s)*4;if(t[a+3]<128)continue;const l=[];for(let u=-i;u<=i;u++)for(let h=-i;h<=i;h++){const f=((o+u)*e+(s+h))*4,p=.299*n[f]+.587*n[f+1]+.114*n[f+2];l.push(p)}l.sort((u,h)=>u-h);const d=l[Math.floor(l.length/2)];t[a]=d,t[a+1]=d,t[a+2]=d}},LG=(t,e,r)=>{const n=new Uint8ClampedArray(t),i=[[0,-1,0],[-1,5,-1],[0,-1,0]];for(let o=1;o<r-1;o++)for(let s=1;s<e-1;s++){const a=(o*e+s)*4;if(t[a+3]<128)continue;let l=0;for(let u=0;u<3;u++)for(let h=0;h<3;h++){const f=((o+u-1)*e+(s+h-1))*4,p=.299*n[f]+.587*n[f+1]+.114*n[f+2];l+=p*i[u][h]}const d=Math.max(0,Math.min(255,l));t[a]=d,t[a+1]=d,t[a+2]=d}},$G=(t,e,r)=>{const n=[{radius:.5,alpha:.3},{radius:1,alpha:.2},{radius:1.5,alpha:.1}],i=t.getImageData(0,0,e,r);n.forEach(o=>{t.save(),t.globalAlpha=o.alpha,t.filter=`blur(${o.radius}px)`,t.putImageData(i,0,0),t.restore()}),t.save(),t.filter="contrast(120%) brightness(95%)",t.globalCompositeOperation="multiply",t.putImageData(i,0,0),t.restore()},O3=async t=>new Promise(e=>{const r=new Image;r.onload=async()=>{try{const n=document.createElement("canvas"),i=n.getContext("2d");if(!i){e(t);return}const o=800;let{width:s,height:a}=r;if(s>o||a>o){const u=Math.min(o/s,o/a);s=s*u,a=a*u}n.width=s,n.height=a,i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",i.drawImage(r,0,0,s,a);const l=i.getImageData(0,0,n.width,n.height),d=await FG(n,l,3e3);e(d)}catch(n){console.error("Vectorization failed:",n),e(t)}},r.onerror=()=>e(t),r.src=t}),FG=(t,e,r)=>new Promise(n=>{const i=t.getContext("2d"),o=setTimeout(()=>{console.warn("Vectorization timeout - using enhanced fallback"),i.filter="blur(0.5px) contrast(150%) brightness(95%)",i.drawImage(t,0,0),n(t.toDataURL("image/png"))},r);setTimeout(()=>{try{const s=MG(t,e);clearTimeout(o),n(s.toDataURL("image/png"))}catch(s){clearTimeout(o),console.error("Light vectorization failed:",s),i.filter="blur(0.3px) contrast(120%)",i.drawImage(t,0,0),n(t.toDataURL("image/png"))}},10)}),MG=(t,e)=>{t.getContext("2d");const{width:r,height:n}=t,i=document.createElement("canvas"),o=i.getContext("2d");return i.width=r,i.height=n,o.drawImage(t,0,0),["contrast(130%)","blur(0.3px)","brightness(98%)","contrast(110%)"].forEach((a,l)=>{o.save(),o.filter=a,o.globalCompositeOperation=l===0?"source-over":"multiply",o.drawImage(i,0,0),o.restore()}),o.save(),o.globalCompositeOperation="source-over",o.lineCap="round",o.lineJoin="round",o.lineWidth=1.5,o.filter="blur(0.2px)",o.drawImage(i,0,0),o.restore(),i},OG=async()=>new Promise((t,e)=>{if(typeof window<"u"&&window.PDFLib){t(window.PDFLib);return}const r=document.createElement("script");r.src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js",r.onload=()=>{t(window.PDFLib)},r.onerror=e,document.head.appendChild(r)}),BG=async t=>{const e=await OG(),{PDFDocument:r,rgb:n,StandardFonts:i,degrees:o}=e,s=await r.create(),a=s.addPage([612,792]),l=s.addPage([612,792]),d=await s.embedFont(i.Helvetica),u=await s.embedFont(i.HelveticaBold),h=(P,g,F,V,N={})=>{P.drawText(g||"",{x:F,y:V,size:N.size||10,font:N.bold?u:d,color:N.color||n(0,0,0),...N})},f=(P,g,F,V)=>{V&&h(P,"X",g,F,{size:12,bold:!0})},p=async()=>{h(a,"(40498)",540,750,{size:10}),h(a,"SOLICITUD DE SERVICIO CONSULAR",200,720,{size:14,bold:!0}),h(a,"Pasaporte por",200,700,{size:11}),f(a,280,700,t.clasificacionMigratoria==="PSE"),h(a,"primera vez",300,700,{size:10}),h(a,"FOTO PEGADA",80,600,{size:10,bold:!0}),h(a,"(4 ½ X 4 ½)",80,580,{size:8}),a.drawRectangle({x:420,y:620,width:150,height:30,borderColor:n(0,0,0),borderWidth:1}),h(a,"No del Pasaporte",430,605,{size:9}),t.pasaporteAnterior?.numero&&h(a,t.pasaporteAnterior.numero,430,625,{size:12,bold:!0}),h(a,"Carné de Identidad",430,580,{size:9});const P=new Date;h(a,P.getDate().toString(),480,550,{size:11}),h(a,(P.getMonth()+1).toString(),510,550,{size:11}),h(a,P.getFullYear().toString(),540,550,{size:11});let g=480;h(a,"Primer Apellido",50,g,{size:9}),h(a,t.primerApellido.toUpperCase(),50,g-15,{size:11,bold:!0}),h(a,"Segundo Apellido",200,g,{size:9}),h(a,t.segundoApellido.toUpperCase(),200,g-15,{size:11,bold:!0}),g-=40,h(a,"Primer Nombre",50,g,{size:9}),h(a,t.primerNombre.toUpperCase(),50,g-15,{size:11,bold:!0}),h(a,"Segundo Nombre",350,g,{size:9}),h(a,(t.segundoNombre||"").toUpperCase(),350,g-15,{size:11,bold:!0}),g-=40,h(a,"Nombre",50,g,{size:9}),h(a,t.nombre.toUpperCase(),50,g-15,{size:11,bold:!0}),h(a,"Padre",200,g,{size:9}),h(a,t.padre.toUpperCase(),200,g-15,{size:11,bold:!0}),g-=40,h(a,"Sexo",50,g,{size:9}),f(a,50,g-20,t.sexo==="M"),h(a,"Masc",70,g-20,{size:9}),f(a,110,g-20,t.sexo==="F"),h(a,"Fem",130,g-20,{size:9}),h(a,"Color Piel",200,g,{size:9}),h(a,t.colorPiel,200,g-15,{size:10}),h(a,"Color Cabello",350,g,{size:9}),h(a,t.colorCabello,350,g-15,{size:10}),h(a,"Color Ojos",450,g,{size:9}),h(a,t.colorOjos,450,g-15,{size:10}),g-=40,h(a,"Estatura (cm)",50,g,{size:9}),h(a,t.estatura,50,g-15,{size:11,bold:!0}),h(a,"Características Especiales",150,g,{size:9}),h(a,t.caracteristicasEspeciales||"NINGUNA",150,g-15,{size:10}),g-=40,h(a,"Clasificación Migratoria al salir de Cuba",50,g,{size:9}),g-=20,[{code:"PSE",label:"Permiso de Salida Indefinido (PSI)",x:50},{code:"PVE",label:"Permiso de Viaje al Exterior (PVE)",x:200},{code:"PVT",label:"Permiso de Viaje Temporal (PVT)",x:350},{code:"PRE",label:"Permiso de Residencia en el Exterior (PRE)",x:450}].forEach(V=>{f(a,V.x,g,t.clasificacionMigratoria===V.code),h(a,V.label,V.x+20,g,{size:8})}),g-=40,h(a,"Lugar de Nacimiento",50,g,{size:9}),g-=20,h(a,"País",50,g,{size:9}),h(a,t.lugarNacimiento.pais.toUpperCase(),50,g-15,{size:11,bold:!0}),h(a,"Provincia",150,g,{size:9}),h(a,t.lugarNacimiento.provincia.toUpperCase(),150,g-15,{size:11,bold:!0}),h(a,"Municipio",350,g,{size:9}),h(a,t.lugarNacimiento.municipio.toUpperCase(),350,g-15,{size:11,bold:!0}),g-=40,h(a,"Fecha Nacimiento",450,g+40,{size:9}),h(a,"Día",420,g+20,{size:9}),h(a,t.lugarNacimiento.diaNacimiento,450,g+20,{size:11,bold:!0}),h(a,"Mes",480,g+20,{size:9}),h(a,t.lugarNacimiento.mesNacimiento,510,g+20,{size:11,bold:!0}),h(a,"Año",540,g+20,{size:9}),h(a,t.lugarNacimiento.anoNacimiento,550,g+20,{size:11,bold:!0}),h(a,"Dirección de la Residencia Actual",50,g,{size:9}),g-=20,h(a,"Dirección (calle, ave o apto, entre calles)",50,g,{size:8}),h(a,t.direccionActual.calle.toUpperCase(),50,g-15,{size:10,bold:!0}),g-=40,h(a,"Provincia - Estado - Región",50,g,{size:9}),h(a,t.direccionActual.provincia.toUpperCase(),50,g-15,{size:10,bold:!0}),h(a,"País",300,g,{size:9}),h(a,t.direccionActual.pais.toUpperCase(),300,g-15,{size:10,bold:!0}),h(a,"Código Postal",450,g,{size:9}),h(a,t.direccionActual.codigoPostal,450,g-15,{size:10,bold:!0}),g-=40,h(a,"Teléfono",50,g,{size:9}),h(a,t.telefono,50,g-15,{size:10,bold:!0}),h(a,"Fax",200,g,{size:9}),h(a,t.fax||"",200,g-15,{size:10}),h(a,"E-mail",350,g,{size:9}),h(a,t.email,350,g-15,{size:10}),g-=40,h(a,"Datos Laborales o de Estudio Actual",50,g,{size:9,bold:!0}),g-=20,h(a,"PROFESION",50,g,{size:9}),h(a,t.datosLaborales.profesion.toUpperCase(),50,g-15,{size:10,bold:!0}),h(a,"OBRERO",200,g,{size:9}),h(a,t.datosLaborales.ocupacion.toUpperCase(),200,g-15,{size:10,bold:!0}),h(a,"MECANICO",350,g,{size:9}),h(a,"Ocupación",350,g+10,{size:8}),g-=40,h(a,"Nombre del Centro de Trabajo / Estudio",50,g,{size:9}),h(a,t.datosLaborales.nombreCentroTrabajo.toUpperCase(),50,g-15,{size:10,bold:!0}),g-=30,h(a,"Dirección (calle, ave, etc, entre calles)",50,g,{size:9}),h(a,t.datosLaborales.direccionCentro.toUpperCase(),50,g-15,{size:10,bold:!0}),h(a,"Teléfono",400,g,{size:9}),h(a,t.datosLaborales.telefonoCentro,400,g-15,{size:10}),g-=40,h(a,"Observaciones:",50,g,{size:9}),t.firmaBase64&&a.drawImage(await s.embedPng(t.firmaBase64),{x:350,y:50,width:150,height:60}),a.drawLine({start:{x:350,y:50},end:{x:500,y:50},thickness:1,color:n(0,0,0)}),h(a,"Firma y Cuño del Funcionario",375,35,{size:8})},m=()=>{h(l,"(40498)",540,750,{size:10}),h(l,"Nivel Escolar",50,700,{size:9}),h(l,t.datosLaborales.nivelEscolar.toUpperCase(),50,680,{size:11,bold:!0}),h(l,"Nombres y Apellidos de la referencia en Cuba",50,640,{size:9}),h(l,t.referenciaEnCuba.nombre.toUpperCase(),50,620,{size:11,bold:!0}),h(l,"Parentesco",350,640,{size:9}),h(l,t.referenciaEnCuba.parentesco.toUpperCase(),350,620,{size:11,bold:!0}),h(l,"Dirección de la Referencia (incluir la provincia)",50,580,{size:9}),h(l,t.referenciaEnCuba.direccion.toUpperCase(),50,560,{size:10}),h(l,"Lugar de Residencia en Cuba (dos últimas direcciones)",50,500,{size:9});const P=460;l.drawLine({start:{x:50,y:P+20},end:{x:550,y:P+20},thickness:1}),l.drawLine({start:{x:50,y:P},end:{x:550,y:P},thickness:1}),h(l,"Desde",350,P+5,{size:9}),h(l,"Hasta",450,P+5,{size:9});let g=380;h(l,"Apellidos de soltera",50,g,{size:9}),h(l,t.apellidosSoltera||"",50,g-15,{size:10}),h(l,"Otros nombres",200,g,{size:9}),h(l,t.otrosNombres||"",200,g-15,{size:10}),h(l,"Número de residencia",350,g,{size:9}),h(l,t.numeroResidencia||"",350,g-15,{size:10}),h(l,"Pasaporte extranjero",480,g,{size:9}),h(l,t.pasaporteExtranjero||"",480,g-15,{size:10}),g-=60,h(l,"Para la confección del Pasaporte el titular presentó y se comprobó con:",50,g,{size:9}),g-=20,h(l,"Pasaporte vencido:",50,g,{size:9}),g-=30,t.pasaporteAnterior&&(h(l,"Número",50,g,{size:9}),h(l,t.pasaporteAnterior.numero,100,g,{size:10,bold:!0}),h(l,"Fecha de expedición",250,g,{size:9}),h(l,t.pasaporteAnterior.fechaExpedicion||"",350,g,{size:10}),h(l,"Lugar",450,g,{size:9}),h(l,t.pasaporteAnterior.lugar||"",480,g,{size:10})),g-=40,h(l,"Certificación de Nacimiento:",50,g,{size:9}),g-=20,h(l,"Tomo",50,g,{size:9}),h(l,t.certificadoNacimiento.tomo||"",100,g,{size:10}),h(l,"Folio",200,g,{size:9}),h(l,t.certificadoNacimiento.folio||"",250,g,{size:10}),h(l,"Registro Civil",350,g,{size:9}),h(l,t.certificadoNacimiento.registroCivil||"",430,g,{size:10}),g-=40,h(l,"Inscripción Consular",50,g,{size:9,bold:!0}),g-=30,t.inscripcionConsular&&(h(l,"Número",50,g,{size:9}),h(l,t.inscripcionConsular.numero,100,g,{size:10}),h(l,"De Fecha",250,g,{size:9}),h(l,t.inscripcionConsular.fecha,320,g,{size:10})),h(l,"Arancel",450,g+30,{size:9}),h(l,"$",490,g+10,{size:12}),h(l,t.arancel||"",500,g+10,{size:12,bold:!0}),g-=40,h(l,"Valoración Consular",50,g,{size:10,bold:!0}),l.drawRectangle({x:50,y:80,width:500,height:g-100,borderColor:n(0,0,0),borderWidth:1}),l.drawLine({start:{x:350,y:50},end:{x:500,y:50},thickness:1,color:n(0,0,0)}),h(l,"Firma y Cuño del Funcionario",375,35,{size:8})};await p(),m();const x=await s.save();return new Blob([x],{type:"application/pdf"})},x1=async(t,e={})=>{try{const r=Xt.state.user;if(!r)throw new Error("User not authenticated");const{status:n="draft",applicationNumber:i,processingNotes:o,overwrite:s=!1}=e,a=new Date().getTime(),l=So(),d={applicationData:t,status:n,userId:r.uid,createdAt:a,updatedAt:a,applicationNumber:i,processingNotes:o,id:So()};if(n==="submitted"&&!i){const f=Date.now(),p=`${t.primerNombre?.[0]||"X"}${t.primerApellido?.[0]||"X"}`;d.applicationNumber=`CUB-${p}-${f}`}console.log(d),console.log(JSON.stringify(d,null,4));let h={query:"addCubanPassport",params:{businessId:Xt.getBusinessId()},form:d};return console.log(h),console.log("Passport application saved successfully:",l),l}catch(r){throw console.error("Error saving passport application:",r),new Error(`Failed to save passport application: ${r instanceof Error?r.message:"Unknown error"}`)}},S1=async(t,e,r={})=>{try{if(!Xt.state.user)throw new Error("User not authenticated");const{status:i,applicationNumber:o,processingNotes:s}=r,a={applicationData:e,updatedAt:new Date().getTime()};if(i!==void 0&&(a.status=i),o!==void 0&&(a.applicationNumber=o),s!==void 0&&(a.processingNotes=s),i==="submitted"&&!o){const u=Date.now(),h=`${e.primerNombre?.[0]||"X"}${e.primerApellido?.[0]||"X"}`;a.applicationNumber=`CUB-${h}-${u}`,a.submissionDate=new Date().getTime()}console.log(a);let d={query:"updateCubanPassport",params:{businessId:Xt.getBusinessId(),id:a?.id},form:a};console.log(d),console.log("Passport application updated successfully:",t)}catch(n){throw console.error("Error updating passport application:",n),new Error(`Failed to update passport application: ${n instanceof Error?n.message:"Unknown error"}`)}};let Eu=null;const jG=(t,e,r=2e3)=>{Eu&&clearTimeout(Eu),Eu=setTimeout(async()=>{try{if(e)await S1(e,t,{status:"draft"}),console.log("Application auto-saved");else{const n=await x1(t,{status:"draft"});return console.log("New application auto-saved:",n),n}}catch(n){console.error("Auto-save failed:",n)}},r)},VG=()=>{Eu&&(clearTimeout(Eu),Eu=null)},w1=()=>new Promise(t=>{const e=document.createElement("div");e.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      backdrop-filter: blur(2px);
    `;const r=document.createElement("div");r.style.cssText=`
      background: white;
      border-radius: 12px;
      padding: 2rem;
      max-width: 500px;
      width: 90%;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
    `,r.innerHTML=`
      <div style="text-align: center; margin-bottom: 1.5rem;">
        <div style="font-size: 3rem; margin-bottom: 0.5rem;">⚡</div>
        <h3 style="margin: 0; font-size: 1.5rem; color: #333;">Procesamiento Avanzado de Firma</h3>
      </div>
      
      <div style="margin-bottom: 1.5rem; color: #666; line-height: 1.5;">
        <p style="margin-bottom: 1rem;">El procesamiento vectorizado utilizará algoritmos avanzados que:</p>
        <ul style="text-align: left; padding-left: 1.5rem; margin: 0;">
          <li style="margin-bottom: 0.5rem;"><strong>🔧 Recursos:</strong> Consumirá más CPU y memoria</li>
          <li style="margin-bottom: 0.5rem;"><strong>⏱️ Tiempo:</strong> Puede tomar 2-5 segundos adicionales</li>
          <li style="margin-bottom: 0.5rem;"><strong>💻 Rendimiento:</strong> Funciona mejor en dispositivos modernos</li>
          <li style="margin-bottom: 0.5rem;"><strong>✨ Resultado:</strong> Mayor calidad y suavizado profesional</li>
        </ul>
      </div>
      
      <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem;">
        <p style="margin: 0; font-size: 0.9rem; color: #666;">
          <strong>💡 Alternativa:</strong> Si cancela, se usará el procesamiento "Mejorado" que es más rápido y consume menos recursos.
        </p>
      </div>
      
      <div style="display: flex; gap: 1rem; justify-content: flex-end;">
        <button id="cancel-btn" style="
          padding: 0.75rem 1.5rem;
          border: 2px solid #ddd;
          background: white;
          color: #666;
          border-radius: 8px;
          cursor: pointer;
          font-weight: 500;
          transition: all 0.2s;
        ">Usar Mejorado</button>
        <button id="continue-btn" style="
          padding: 0.75rem 1.5rem;
          border: none;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
          border-radius: 8px;
          cursor: pointer;
          font-weight: 500;
          transition: all 0.2s;
        ">Continuar con Avanzado</button>
      </div>
    `;const n=r.querySelector("#cancel-btn"),i=r.querySelector("#continue-btn");n.addEventListener("mouseenter",()=>{n.style.borderColor="#bbb",n.style.color="#333"}),n.addEventListener("mouseleave",()=>{n.style.borderColor="#ddd",n.style.color="#666"}),i.addEventListener("mouseenter",()=>{i.style.transform="translateY(-1px)",i.style.boxShadow="0 4px 12px rgba(102, 126, 234, 0.4)"}),i.addEventListener("mouseleave",()=>{i.style.transform="translateY(0)",i.style.boxShadow="none"});const o=()=>{document.body.removeChild(e),document.body.style.overflow=""};n.addEventListener("click",()=>{o(),t(!1)}),i.addEventListener("click",()=>{o(),t(!0)});const s=a=>{a.key==="Escape"&&(o(),document.removeEventListener("keydown",s),t(!1))};e.addEventListener("click",a=>{a.target===e&&(o(),document.removeEventListener("keydown",s),t(!1))}),document.addEventListener("keydown",s),e.appendChild(r),document.body.appendChild(e),document.body.style.overflow="hidden",setTimeout(()=>i.focus(),100)}),zG=t=>{let e;const r=()=>t.mount??document.body;return Kn(()=>{const n=document.createElement("div");r().appendChild(n),e=Dw(()=>t.children,n),Ta(()=>{e?.(),n.parentNode&&n.parentNode.removeChild(n)})}),null};var UG=le('<div><div><h3>Vista Completa de la Firma</h3><p></p></div><div><img alt="Firma en tamaño completo"></div><div>');const qG=t=>{let e;const r=o=>{o.key==="Escape"&&t.onClose()};if(Ei(()=>{t.isOpen?(document.body.style.overflow="hidden",document.addEventListener("keydown",r)):(document.body.style.overflow="",document.removeEventListener("keydown",r))}),Ta(()=>{document.body.style.overflow="",document.removeEventListener("keydown",r)}),!t.isOpen)return null;const n=()=>{const o=document.createElement("a");o.download="firma-extraida.png",o.href=t.signatureDataUrl,o.click()},i=()=>{switch(t.enhancementType){case"basic":return"Firma extraída sin procesamiento adicional";case"enhanced":return"Firma mejorada con algoritmos avanzados";case"vectorized":return"Firma optimizada con filtros avanzados";default:return"Firma procesada"}};return T(zG,{get children(){var o=UG(),s=o.firstChild,a=s.firstChild,l=a.nextSibling,d=s.nextSibling,u=d.firstChild,h=d.nextSibling;Qn(o,"click",t.onClose,!0);var f=e;return typeof f=="function"?V1(f,o):e=o,o.style.setProperty("position","fixed"),o.style.setProperty("top","0"),o.style.setProperty("left","0"),o.style.setProperty("width","100vw"),o.style.setProperty("height","100vh"),o.style.setProperty("background","rgba(0, 0, 0, 0.9)"),o.style.setProperty("z-index","10000"),o.style.setProperty("display","flex"),o.style.setProperty("flex-direction","column"),o.style.setProperty("align-items","center"),o.style.setProperty("justify-content","center"),o.style.setProperty("padding","2rem"),o.style.setProperty("box-sizing","border-box"),s.$$click=p=>p.stopPropagation(),s.style.setProperty("text-align","center"),s.style.setProperty("color","white"),s.style.setProperty("margin-bottom","2rem"),a.style.setProperty("font-size","1.5rem"),a.style.setProperty("margin","0 0 0.5rem 0"),l.style.setProperty("font-size","1rem"),l.style.setProperty("margin","0"),l.style.setProperty("opacity","0.8"),c(l,i),d.$$click=p=>p.stopPropagation(),d.style.setProperty("background","white"),d.style.setProperty("padding","2rem"),d.style.setProperty("border-radius","12px"),d.style.setProperty("max-width","90vw"),d.style.setProperty("max-height","70vh"),d.style.setProperty("display","flex"),d.style.setProperty("align-items","center"),d.style.setProperty("justify-content","center"),d.style.setProperty("box-shadow","0 10px 30px rgba(0, 0, 0, 0.5)"),d.style.setProperty("margin-bottom","2rem"),u.style.setProperty("max-width","100%"),u.style.setProperty("max-height","100%"),u.style.setProperty("width","auto"),u.style.setProperty("height","auto"),u.style.setProperty("display","block"),h.$$click=p=>p.stopPropagation(),h.style.setProperty("display","flex"),h.style.setProperty("gap","1rem"),c(h,T(mt,{get onClick(){return t.onClose},variant:"secondary",style:{background:"rgba(255, 255, 255, 0.9)",color:"var(--text-primary)"},children:"Cerrar (ESC)"}),null),c(h,T(mt,{onClick:n,variant:"primary",children:"Descargar Firma"}),null),be(()=>ir(u,"src",t.signatureDataUrl)),o}})};tr(["click"]);var HG=le("<div><span>"),WG=le('<div><div><div><h4>Firma Procesada</h4><p>✓ </p></div></div><div><img alt="Firma Extraída"></div><div><p>Esta firma se incluirá en el PDF del pasaporte. Verifique que se vea claramente antes de generar el documento.</p><p>🔍 Haga clic en la firma para verla en tamaño completo'),GG=le("<div><strong></strong> "),KG=le("<span><span></span>Guardando..."),YG=le("<span><span></span>Enviando..."),XG=le("<span><span></span>Generando..."),ZG=le("<span>ID: <!>..."),JG=le("<div><h2>SOLICITUD DE SERVICIO CONSULAR</h2><p>Pasaporte Cubano </p><div><h3>Datos Personales</h3><div></div><div></div></div><div><h3>Características Físicas</h3><div></div></div><div><h3>Clasificación Migratoria al salir de Cuba</h3></div><div><h3>Lugar de Nacimiento</h3><div></div><div></div></div><div><h3>Dirección de la Residencia Actual</h3><div></div></div><div><h3>Información de Contacto</h3><div></div></div><div><h3>Datos Laborales o de Estudio Actual</h3><div></div><div></div></div><div><h3>Referencia en Cuba</h3><div></div></div><div><h3>Pasaporte Anterior (si aplica)</h3><div></div></div><div><h3>Certificación de Nacimiento</h3><div></div></div><div><h3>Firma del Solicitante</h3><div><label>Tipo de Procesamiento de Firma</label><select><option value=basic>Básico - Sin procesamiento adicional</option><option value=enhanced>Mejorado - Reducción de ruido y suavizado</option><option value=vectorized>Vectorizado - Calidad profesional (requiere confirmación)</option></select><div></div></div><div><p>Suba una imagen con su firma sobre fondo blanco para mejores resultados</p><input type=file accept=image/* id=signature-upload-cuban><label for=signature-upload-cuban>Subir Imagen de Firma</label></div></div><div><div></div><div>"),QG=le(`<style>
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `);const eK=t=>{const[e,r]=Ae({clasificacionMigratoria:"PSE",sexo:"M",colorPiel:"Blanca",colorOjos:"Castaños",colorCabello:"Negro",lugarNacimiento:{pais:"CUBA",provincia:"",municipio:"",diaNacimiento:"",mesNacimiento:"",anoNacimiento:""},direccionActual:{calle:"",provincia:"",municipio:"",pais:"ESTADOS UNIDOS",codigoPostal:""},datosLaborales:{ocupacion:"OBRERO",profesion:"MECANICO",nivelEscolar:"PRE-UNIVERSITARIO",nombreCentroTrabajo:"",direccionCentro:"",telefonoCentro:""},referenciaEnCuba:{nombre:"",parentesco:"",direccion:""},certificadoNacimiento:{tomo:"",folio:"",registroCivil:""},...t.initialData}),[n,i]=Ae(null),[o,s]=Ae(!1),[a,l]=Ae(!1),[d,u]=Ae("enhanced"),[h,f]=Ae(!1),[p,m]=Ae(!1),[x,P]=Ae(t.applicationId),[g,F]=Ae(null),[V,N]=Ae(!1);Ei(()=>{const z=e();z.primerNombre&&z.primerApellido&&z.email&&jG(z,x())}),Ta(()=>{VG()});const R=(z,W)=>{r(A=>({...A,[z]:W})),F(null)},M=(z,W,A)=>{r(I=>({...I,[z]:{...I[z],[W]:A}})),F(null)},C=async z=>{const A=z.target.files?.[0];if(!A){console.log("No file selected");return}console.log("Processing file:",A.name,"Size:",A.size,"Type:",A.type),i(A),s(!0);try{if(!A.type.startsWith("image/"))throw new Error("Please select a valid image file");if(A.size>10*1024*1024)throw new Error("Image file is too large. Please select an image smaller than 10MB");console.log("Extracting signature from image...");const I=await M3(A);if(console.log("Extraction result:",{success:I.success,hasSignature:!!I.signatureDataUrl}),I.success&&I.signatureDataUrl){let ee=I.signatureDataUrl;const Z=d();console.log("Enhancement type:",Z);try{Z==="enhanced"?(console.log("Applying enhanced processing..."),ee=await P1(I.signatureDataUrl)):Z==="vectorized"&&(await w1()?(console.log("User approved vectorized processing..."),ee=await O3(I.signatureDataUrl)):(console.log("User declined vectorized processing, using enhanced instead..."),ee=await P1(I.signatureDataUrl))),console.log("Processing completed successfully")}catch(X){console.error("Enhancement failed, using basic extraction:",X),ee=I.signatureDataUrl}R("firmaBase64",ee)}else throw new Error(I.error||"Could not extract signature from image. Please ensure the image contains a clear signature on a white background.")}catch(I){console.error("Error extracting signature:",I);const ee=I instanceof Error?I.message:"Unknown error processing signature";alert(`Error: ${ee}

Tips:
- Use a clear image with good contrast
- Ensure signature is on white/light background
- Try a different enhancement type`)}finally{s(!1)}},k=async()=>{const z=e();if(!z.primerNombre||!z.primerApellido||!z.email){F({type:"error",text:"Por favor complete al menos el nombre, apellido y email antes de guardar"});return}try{f(!0),F(null);let W=x();W?await S1(W,z,{status:"draft"}):(W=await x1(z,{status:"draft"}),P(W),t.onSave?.(W)),F({type:"success",text:"Solicitud guardada como borrador exitosamente"})}catch(W){console.error("Error saving draft:",W),F({type:"error",text:W instanceof Error?W.message:"Error guardando la solicitud"})}finally{f(!1)}},D=async()=>{const z=e();if(["primerApellido","primerNombre","email","telefono","lugarNacimiento.diaNacimiento","lugarNacimiento.mesNacimiento","lugarNacimiento.anoNacimiento"].filter(I=>{const ee=I.split(".");let Z=z;for(const X of ee)Z=Z?.[X];return!Z}).length>0){F({type:"error",text:"Por favor complete todos los campos requeridos antes de enviar"});return}if(confirm("¿Está seguro que desea enviar esta solicitud? Una vez enviada no podrá ser modificada."))try{m(!0),F(null);let I=x();I?await S1(I,z,{status:"submitted"}):(I=await x1(z,{status:"submitted"}),P(I),t.onSave?.(I)),F({type:"success",text:"Solicitud enviada exitosamente. Recibirá notificaciones sobre el estado de su solicitud."})}catch(I){console.error("Error submitting application:",I),F({type:"error",text:I instanceof Error?I.message:"Error enviando la solicitud"})}finally{m(!1)}},$=async()=>{const z=e();if(!z.primerApellido||!z.primerNombre||!z.lugarNacimiento?.diaNacimiento){alert("Por favor complete todos los campos requeridos");return}l(!0);try{const W=await BG({...z,fechaSolicitud:new Date().toLocaleDateString()}),A=URL.createObjectURL(W),I=document.createElement("a");I.href=A,I.download=`pasaporte_cubano_${z.primerApellido}_${Date.now()}.pdf`,document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(A),t.onSubmit&&t.onSubmit(z)}catch(W){console.error("Error generating PDF:",W),alert("Error generando el PDF")}finally{l(!1)}},w={"margin-bottom":"2rem","padding-bottom":"1.5rem","border-bottom":"1px solid var(--border-color)"},_={"font-size":"1.25rem","font-weight":"600","margin-bottom":"1rem",color:"var(--text-primary)"},v={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"};return T(Vt,{get children(){return[(()=>{var z=JG(),W=z.firstChild,A=W.nextSibling,I=A.nextSibling,ee=I.firstChild,Z=ee.nextSibling,X=Z.nextSibling,se=I.nextSibling,U=se.firstChild,E=U.nextSibling,O=se.nextSibling,L=O.firstChild,G=O.nextSibling,K=G.firstChild,q=K.nextSibling,B=q.nextSibling,H=G.nextSibling,Y=H.firstChild,te=Y.nextSibling,oe=H.nextSibling,pe=oe.firstChild,ne=pe.nextSibling,Q=oe.nextSibling,ce=Q.firstChild,ue=ce.nextSibling,de=ue.nextSibling,ge=Q.nextSibling,ye=ge.firstChild,fe=ye.nextSibling,Se=ge.nextSibling,qe=Se.firstChild,Oe=qe.nextSibling,Ie=Se.nextSibling,Be=Ie.firstChild,ke=Be.nextSibling,Ge=Ie.nextSibling,et=Ge.firstChild,ve=et.nextSibling,De=ve.firstChild,He=De.nextSibling,Je=He.nextSibling,Le=ve.nextSibling,Te=Le.firstChild,he=Te.nextSibling,Ne=he.nextSibling,rt=Ge.nextSibling,re=rt.firstChild,Ue=re.nextSibling;return z.style.setProperty("padding","2rem"),W.style.setProperty("font-size","1.75rem"),W.style.setProperty("font-weight","700"),W.style.setProperty("margin-bottom","1rem"),W.style.setProperty("color","var(--text-primary)"),W.style.setProperty("text-align","center"),A.style.setProperty("text-align","center"),A.style.setProperty("margin-bottom","2rem"),A.style.setProperty("color","var(--text-muted)"),c(Z,T(Ot,{label:"Primer Apellido",get value(){return e().primerApellido||""},onChange:we=>R("primerApellido",we.toUpperCase()),required:!0}),null),c(Z,T(Ot,{label:"Segundo Apellido",get value(){return e().segundoApellido||""},onChange:we=>R("segundoApellido",we.toUpperCase()),required:!0}),null),c(Z,T(Ot,{label:"Primer Nombre",get value(){return e().primerNombre||""},onChange:we=>R("primerNombre",we.toUpperCase()),required:!0}),null),c(Z,T(Ot,{label:"Segundo Nombre",get value(){return e().segundoNombre||""},onChange:we=>R("segundoNombre",we.toUpperCase())}),null),c(X,T(Ot,{label:"Nombre de la Madre",get value(){return e().nombre||""},onChange:we=>R("nombre",we.toUpperCase()),required:!0}),null),c(X,T(Ot,{label:"Nombre del Padre",get value(){return e().padre||""},onChange:we=>R("padre",we.toUpperCase()),required:!0}),null),c(E,T(Nn,{label:"Sexo",get value(){return e().sexo||"M"},onChange:we=>R("sexo",we),options:[{value:"M",label:"Masculino"},{value:"F",label:"Femenino"}],required:!0}),null),c(E,T(Nn,{label:"Color de Piel",get value(){return e().colorPiel||"Blanca"},onChange:we=>R("colorPiel",we),options:[{value:"Blanca",label:"Blanca"},{value:"Mestiza",label:"Mestiza"},{value:"Negra",label:"Negra"}],required:!0}),null),c(E,T(Nn,{label:"Color de Cabello",get value(){return e().colorCabello||"Negro"},onChange:we=>R("colorCabello",we),options:[{value:"Negro",label:"Negro"},{value:"Castaño",label:"Castaño"},{value:"Rubio",label:"Rubio"},{value:"Gris",label:"Gris"}],required:!0}),null),c(E,T(Nn,{label:"Color de Ojos",get value(){return e().colorOjos||"Castaños"},onChange:we=>R("colorOjos",we),options:[{value:"Negros",label:"Negros"},{value:"Castaños",label:"Castaños"},{value:"Azules",label:"Azules"},{value:"Verdes",label:"Verdes"}],required:!0}),null),c(E,T(Ot,{label:"Estatura (cm)",get value(){return e().estatura||""},onChange:we=>R("estatura",we),placeholder:"168",required:!0}),null),c(E,T(Ot,{label:"Características Especiales",get value(){return e().caracteristicasEspeciales||""},onChange:we=>R("caracteristicasEspeciales",we.toUpperCase()),placeholder:"NINGUNA"}),null),c(O,T(Nn,{label:"",get value(){return e().clasificacionMigratoria||"PSE"},onChange:we=>R("clasificacionMigratoria",we),options:[{value:"PSE",label:"Permiso de Salida Definitiva (PSD)"},{value:"PVE",label:"Permiso de Viaje al Exterior (PVE)"},{value:"PVT",label:"Permiso de Viaje Temporal (PVT)"},{value:"PRE",label:"Permiso de Residencia en el Exterior (PRE)"}],required:!0}),null),c(q,T(Ot,{label:"País",get value(){return e().lugarNacimiento?.pais||""},onChange:we=>M("lugarNacimiento","pais",we.toUpperCase()),placeholder:"CUBA",required:!0}),null),c(q,T(Ot,{label:"Provincia",get value(){return e().lugarNacimiento?.provincia||""},onChange:we=>M("lugarNacimiento","provincia",we.toUpperCase()),placeholder:"SANTIAGO DE CUBA",required:!0}),null),c(q,T(Ot,{label:"Municipio",get value(){return e().lugarNacimiento?.municipio||""},onChange:we=>M("lugarNacimiento","municipio",we.toUpperCase()),placeholder:"SANTIAGO DE CUBA",required:!0}),null),c(B,T(Ot,{label:"Día",get value(){return e().lugarNacimiento?.diaNacimiento||""},onChange:we=>M("lugarNacimiento","diaNacimiento",we),placeholder:"19",required:!0}),null),c(B,T(Ot,{label:"Mes",get value(){return e().lugarNacimiento?.mesNacimiento||""},onChange:we=>M("lugarNacimiento","mesNacimiento",we),placeholder:"2",required:!0}),null),c(B,T(Ot,{label:"Año",get value(){return e().lugarNacimiento?.anoNacimiento||""},onChange:we=>M("lugarNacimiento","anoNacimiento",we),placeholder:"1985",required:!0}),null),c(H,T(Ot,{label:"Dirección (calle, ave o apto, entre calles)",get value(){return e().direccionActual?.calle||""},onChange:we=>M("direccionActual","calle",we.toUpperCase()),placeholder:"1222 W ASHLAND AVE",required:!0}),te),c(te,T(Ot,{label:"Ciudad/Municipio",get value(){return e().direccionActual?.municipio||""},onChange:we=>M("direccionActual","municipio",we.toUpperCase()),placeholder:"KY",required:!0}),null),c(te,T(Ot,{label:"Provincia/Estado",get value(){return e().direccionActual?.provincia||""},onChange:we=>M("direccionActual","provincia",we.toUpperCase()),placeholder:"LOUISVILLE",required:!0}),null),c(te,T(Ot,{label:"País",get value(){return e().direccionActual?.pais||""},onChange:we=>M("direccionActual","pais",we.toUpperCase()),placeholder:"ESTADOS UNIDOS",required:!0}),null),c(te,T(Ot,{label:"Código Postal",get value(){return e().direccionActual?.codigoPostal||""},onChange:we=>M("direccionActual","codigoPostal",we),placeholder:"40215",required:!0}),null),c(ne,T(Ot,{label:"Teléfono",get value(){return e().telefono||""},onChange:we=>R("telefono",we),placeholder:"502-665-4184",required:!0}),null),c(ne,T(Ot,{label:"Fax",get value(){return e().fax||""},onChange:we=>R("fax",we),placeholder:"000-000-0000"}),null),c(ne,T(Ot,{label:"Email",get value(){return e().email||""},onChange:we=>R("email",we),type:"email",required:!0}),null),c(ue,T(Ot,{label:"Profesión",get value(){return e().datosLaborales?.profesion||""},onChange:we=>M("datosLaborales","profesion",we.toUpperCase()),placeholder:"MECANICO",required:!0}),null),c(ue,T(Ot,{label:"Ocupación",get value(){return e().datosLaborales?.ocupacion||""},onChange:we=>M("datosLaborales","ocupacion",we.toUpperCase()),placeholder:"OBRERO",required:!0}),null),c(ue,T(Nn,{label:"Nivel Escolar",get value(){return e().datosLaborales?.nivelEscolar||"PRE-UNIVERSITARIO"},onChange:we=>M("datosLaborales","nivelEscolar",we),options:[{value:"PRIMARIO",label:"Primario"},{value:"SECUNDARIO",label:"Secundario"},{value:"PRE-UNIVERSITARIO",label:"Pre-Universitario"},{value:"UNIVERSITARIO",label:"Universitario"}],required:!0}),null),de.style.setProperty("margin-top","1rem"),c(de,T(Ot,{label:"Nombre del Centro de Trabajo/Estudio",get value(){return e().datosLaborales?.nombreCentroTrabajo||""},onChange:we=>M("datosLaborales","nombreCentroTrabajo",we.toUpperCase()),placeholder:"BIGO TIRE",required:!0}),null),c(de,T(Ot,{label:"Dirección del Centro",get value(){return e().datosLaborales?.direccionCentro||""},onChange:we=>M("datosLaborales","direccionCentro",we.toUpperCase()),placeholder:"44 13 CANE RUN LOUISVILLE",required:!0}),null),c(de,T(Ot,{label:"Teléfono del Centro",get value(){return e().datosLaborales?.telefonoCentro||""},onChange:we=>M("datosLaborales","telefonoCentro",we),placeholder:"000-000-0000"}),null),c(ge,T(Ot,{label:"Nombres y Apellidos de la referencia en Cuba",get value(){return e().referenciaEnCuba?.nombre||""},onChange:we=>M("referenciaEnCuba","nombre",we.toUpperCase()),placeholder:"ALINA PADRO TERRERO",required:!0}),fe),c(fe,T(Ot,{label:"Parentesco",get value(){return e().referenciaEnCuba?.parentesco||""},onChange:we=>M("referenciaEnCuba","parentesco",we.toUpperCase()),placeholder:"MADRE",required:!0})),c(ge,T(Ot,{label:"Dirección de la Referencia (incluir la provincia)",get value(){return e().referenciaEnCuba?.direccion||""},onChange:we=>M("referenciaEnCuba","direccion",we.toUpperCase()),placeholder:"GRAL BANDERA 308 SANTIAGO DE CUBA SANTIAGO DE CUBA",required:!0}),null),c(Oe,T(Ot,{label:"Número de Pasaporte",get value(){return e().pasaporteAnterior?.numero||""},onChange:we=>R("pasaporteAnterior",{...e().pasaporteAnterior,numero:we.toUpperCase()}),placeholder:"K587373"}),null),c(Oe,T(Ot,{label:"Fecha de Expedición",type:"date",get value(){return e().pasaporteAnterior?.fechaExpedicion||""},onChange:we=>R("pasaporteAnterior",{...e().pasaporteAnterior,fechaExpedicion:we})}),null),c(Oe,T(Ot,{label:"Lugar de Expedición",get value(){return e().pasaporteAnterior?.lugar||""},onChange:we=>R("pasaporteAnterior",{...e().pasaporteAnterior,lugar:we.toUpperCase()})}),null),c(ke,T(Ot,{label:"Tomo",get value(){return e().certificadoNacimiento?.tomo||""},onChange:we=>M("certificadoNacimiento","tomo",we)}),null),c(ke,T(Ot,{label:"Folio",get value(){return e().certificadoNacimiento?.folio||""},onChange:we=>M("certificadoNacimiento","folio",we)}),null),c(ke,T(Ot,{label:"Registro Civil",get value(){return e().certificadoNacimiento?.registroCivil||""},onChange:we=>M("certificadoNacimiento","registroCivil",we.toUpperCase())}),null),ve.style.setProperty("margin-bottom","1rem"),De.style.setProperty("display","block"),De.style.setProperty("font-weight","500"),De.style.setProperty("margin-bottom","0.5rem"),De.style.setProperty("color","var(--text-primary)"),He.addEventListener("blur",we=>we.currentTarget.style.borderColor="var(--border-color)"),He.addEventListener("focus",we=>we.currentTarget.style.borderColor="var(--primary-color)"),He.addEventListener("change",we=>u(we.currentTarget.value)),He.style.setProperty("width","100%"),He.style.setProperty("padding","0.75rem"),He.style.setProperty("border","1px solid var(--border-color)"),He.style.setProperty("border-radius","var(--border-radius-sm)"),He.style.setProperty("background","var(--surface-color)"),He.style.setProperty("font-size","1rem"),He.style.setProperty("cursor","pointer"),Je.style.setProperty("margin-top","0.5rem"),Je.style.setProperty("font-size","0.75rem"),Je.style.setProperty("color","var(--text-muted)"),c(Je,()=>d()==="basic"&&"• Extrae la firma tal como aparece en la imagen",null),c(Je,()=>d()==="enhanced"&&"• Mejora la calidad eliminando pixeles y suavizando bordes",null),c(Je,()=>d()==="vectorized"&&"• Filtros avanzados con calidad profesional (solicitará confirmación antes de procesar)",null),Le.style.setProperty("background","var(--gray-50)"),Le.style.setProperty("padding","1rem"),Le.style.setProperty("border-radius","var(--border-radius)"),Le.style.setProperty("margin-bottom","1rem"),Te.style.setProperty("font-size","0.875rem"),Te.style.setProperty("color","var(--text-muted)"),Te.style.setProperty("margin-bottom","0.5rem"),he.addEventListener("change",C),he.style.setProperty("display","none"),Ne.style.setProperty("display","inline-block"),Ne.style.setProperty("padding","0.75rem 1.5rem"),Ne.style.setProperty("background","var(--primary-color)"),Ne.style.setProperty("color","white"),Ne.style.setProperty("border-radius","var(--border-radius-sm)"),Ne.style.setProperty("cursor","pointer"),Ne.style.setProperty("font-weight","500"),c(Le,T(We,{get when(){return o()},get children(){var we=HG(),xe=we.firstChild;return we.style.setProperty("margin-top","1rem"),we.style.setProperty("color","var(--primary-color)"),we.style.setProperty("font-size","0.875rem"),we.style.setProperty("display","flex"),we.style.setProperty("align-items","center"),xe.style.setProperty("display","inline-block"),xe.style.setProperty("width","16px"),xe.style.setProperty("height","16px"),xe.style.setProperty("border","2px solid var(--primary-color)"),xe.style.setProperty("border-top-color","transparent"),xe.style.setProperty("border-radius","50%"),xe.style.setProperty("animation","spin 0.8s linear infinite"),xe.style.setProperty("margin-right","0.5rem"),c(we,()=>d()==="vectorized"?"Aplicando filtros avanzados... (optimizado para ser rápido)":"Extrayendo y mejorando firma...",null),we}}),null),c(Le,T(We,{get when(){return Ve(()=>!!n())()&&!o()},get children(){return T(mt,{onClick:async()=>{d()==="vectorized"&&!await w1()||n()&&C({target:{files:[n()]}})},variant:"secondary",size:"sm",style:{"margin-top":"0.75rem"},get children(){return["Reprocesar con ",Ve(()=>Ve(()=>d()==="basic")()?"Básico":d()==="enhanced"?"Mejorado":"Filtros Avanzados")]}})}}),null),c(Ge,T(We,{get when(){return e().firmaBase64},get children(){var we=WG(),xe=we.firstChild,je=xe.firstChild,$e=je.firstChild,ft=$e.nextSibling;ft.firstChild;var ct=xe.nextSibling,yt=ct.firstChild,$t=ct.nextSibling,bt=$t.firstChild,Gt=bt.nextSibling;return we.style.setProperty("margin-top","1rem"),we.style.setProperty("padding","1.5rem"),we.style.setProperty("border","1px solid var(--border-color)"),we.style.setProperty("border-radius","var(--border-radius-sm)"),we.style.setProperty("background","white"),xe.style.setProperty("display","flex"),xe.style.setProperty("justify-content","space-between"),xe.style.setProperty("align-items","flex-start"),xe.style.setProperty("margin-bottom","1rem"),$e.style.setProperty("font-size","1.125rem"),$e.style.setProperty("font-weight","600"),$e.style.setProperty("margin-bottom","0.5rem"),$e.style.setProperty("color","var(--text-primary)"),ft.style.setProperty("font-size","0.875rem"),ft.style.setProperty("color","var(--success-color)"),ft.style.setProperty("margin-bottom","0"),ft.style.setProperty("font-weight","500"),c(ft,(()=>{var Wt=Ve(()=>d()==="basic");return()=>Wt()?"Extraída sin procesamiento":d()==="enhanced"?"Mejorada con algoritmos avanzados":"Optimizada con filtros avanzados"})(),null),ct.style.setProperty("display","flex"),ct.style.setProperty("justify-content","center"),ct.style.setProperty("align-items","center"),ct.style.setProperty("background","#f8f9fa"),ct.style.setProperty("padding","2rem"),ct.style.setProperty("border-radius","var(--border-radius)"),ct.style.setProperty("border","2px dashed var(--border-color)"),ct.style.setProperty("min-height","200px"),yt.$$click=()=>N(!1),yt.style.setProperty("max-width","600px"),yt.style.setProperty("max-height","300px"),yt.style.setProperty("width","auto"),yt.style.setProperty("height","auto"),yt.style.setProperty("border","2px solid var(--border-color)"),yt.style.setProperty("border-radius","var(--border-radius-sm)"),yt.style.setProperty("background","white"),yt.style.setProperty("padding","1rem"),yt.style.setProperty("box-shadow","0 4px 12px rgba(0,0,0,0.15)"),yt.style.setProperty("cursor","pointer"),$t.style.setProperty("margin-top","1rem"),$t.style.setProperty("text-align","center"),bt.style.setProperty("font-size","0.875rem"),bt.style.setProperty("color","var(--text-muted)"),bt.style.setProperty("margin","0 0 0.5rem 0"),Gt.style.setProperty("font-size","0.8rem"),Gt.style.setProperty("color","var(--primary-color)"),Gt.style.setProperty("margin","0"),Gt.style.setProperty("font-weight","500"),be(()=>ir(yt,"src",e().firmaBase64)),we}}),null),c(z,T(We,{get when(){return g()},get children(){var we=GG(),xe=we.firstChild;return xe.nextSibling,we.style.setProperty("padding","1rem"),we.style.setProperty("margin-top","1rem"),we.style.setProperty("border-radius","var(--border-radius)"),c(xe,()=>g().type==="success"?"✓ Éxito:":"⚠ Error:"),c(we,()=>g().text,null),be(je=>{var $e=g().type==="success"?"var(--success-light)":"var(--error-light)",ft=g().type==="success"?"var(--success-dark)":"var(--error-dark)",ct=`1px solid ${g().type==="success"?"var(--success-color)":"var(--error-color)"}`;return $e!==je.e&&((je.e=$e)!=null?we.style.setProperty("background",$e):we.style.removeProperty("background")),ft!==je.t&&((je.t=ft)!=null?we.style.setProperty("color",ft):we.style.removeProperty("color")),ct!==je.a&&((je.a=ct)!=null?we.style.setProperty("border",ct):we.style.removeProperty("border")),je},{e:void 0,t:void 0,a:void 0}),we}}),rt),rt.style.setProperty("display","flex"),rt.style.setProperty("justify-content","space-between"),rt.style.setProperty("align-items","center"),rt.style.setProperty("flex-wrap","wrap"),rt.style.setProperty("gap","1rem"),rt.style.setProperty("margin-top","2rem"),re.style.setProperty("display","flex"),re.style.setProperty("gap","1rem"),re.style.setProperty("flex-wrap","wrap"),c(re,T(mt,{onClick:k,get disabled(){return h()||p()},variant:"secondary",size:"md",get children(){return T(We,{get when(){return h()},fallback:"Guardar Borrador",get children(){var we=KG(),xe=we.firstChild;return we.style.setProperty("display","flex"),we.style.setProperty("align-items","center"),xe.style.setProperty("display","inline-block"),xe.style.setProperty("width","16px"),xe.style.setProperty("height","16px"),xe.style.setProperty("border","2px solid currentColor"),xe.style.setProperty("border-top-color","transparent"),xe.style.setProperty("border-radius","50%"),xe.style.setProperty("animation","spin 0.8s linear infinite"),xe.style.setProperty("margin-right","0.5rem"),we}})}}),null),c(re,T(mt,{onClick:D,get disabled(){return h()||p()},variant:"primary",size:"md",get children(){return T(We,{get when(){return p()},fallback:"Enviar Solicitud",get children(){var we=YG(),xe=we.firstChild;return we.style.setProperty("display","flex"),we.style.setProperty("align-items","center"),xe.style.setProperty("display","inline-block"),xe.style.setProperty("width","16px"),xe.style.setProperty("height","16px"),xe.style.setProperty("border","2px solid #fff"),xe.style.setProperty("border-top-color","transparent"),xe.style.setProperty("border-radius","50%"),xe.style.setProperty("animation","spin 0.8s linear infinite"),xe.style.setProperty("margin-right","0.5rem"),we}})}}),null),c(re,T(mt,{onClick:$,get disabled(){return a()||h()||p()},variant:"accent",size:"md",get children(){return T(We,{get when(){return a()},fallback:"Generar PDF",get children(){var we=XG(),xe=we.firstChild;return we.style.setProperty("display","flex"),we.style.setProperty("align-items","center"),xe.style.setProperty("display","inline-block"),xe.style.setProperty("width","16px"),xe.style.setProperty("height","16px"),xe.style.setProperty("border","2px solid #fff"),xe.style.setProperty("border-top-color","transparent"),xe.style.setProperty("border-radius","50%"),xe.style.setProperty("animation","spin 0.8s linear infinite"),xe.style.setProperty("margin-right","0.5rem"),we}})}}),null),Ue.style.setProperty("display","flex"),Ue.style.setProperty("gap","0.5rem"),c(Ue,T(We,{get when(){return x()},get children(){var we=ZG(),xe=we.firstChild,je=xe.nextSibling;return je.nextSibling,we.style.setProperty("font-size","0.875rem"),we.style.setProperty("color","var(--text-muted)"),we.style.setProperty("padding","0.5rem"),c(we,()=>x()?.substring(0,8),je),we}}),null),c(Ue,T(mt,{onClick:()=>{confirm("¿Está seguro que desea limpiar el formulario?")&&window.location.reload()},variant:"secondary",size:"sm",children:"Limpiar Formulario"}),null),be(we=>{var xe=w,je=_,$e=v,ft={...v,"margin-top":"1rem"},ct=w,yt=_,$t=v,bt=w,Gt=_,Wt=w,Dt=_,Kt=v,gt={...v,"margin-top":"1rem","grid-template-columns":"repeat(3, 1fr)","max-width":"400px"},St=w,Qe=_,vt={...v,"margin-top":"1rem"},Ft=w,Pt=_,kt=v,Yt=w,nr=_,cr=v,on=w,Dr=_,lr={...v,"margin-top":"1rem"},Zt=w,yr=_,Lr=v,Wr=w,Ar=_,fr=v,Yr=w,br=_;return we.e=y(I,xe,we.e),we.t=y(ee,je,we.t),we.a=y(Z,$e,we.a),we.o=y(X,ft,we.o),we.i=y(se,ct,we.i),we.n=y(U,yt,we.n),we.s=y(E,$t,we.s),we.h=y(O,bt,we.h),we.r=y(L,Gt,we.r),we.d=y(G,Wt,we.d),we.l=y(K,Dt,we.l),we.u=y(q,Kt,we.u),we.c=y(B,gt,we.c),we.w=y(H,St,we.w),we.m=y(Y,Qe,we.m),we.f=y(te,vt,we.f),we.y=y(oe,Ft,we.y),we.g=y(pe,Pt,we.g),we.p=y(ne,kt,we.p),we.b=y(Q,Yt,we.b),we.T=y(ce,nr,we.T),we.A=y(ue,cr,we.A),we.O=y(ge,on,we.O),we.I=y(ye,Dr,we.I),we.S=y(fe,lr,we.S),we.W=y(Se,Zt,we.W),we.C=y(qe,yr,we.C),we.B=y(Oe,Lr,we.B),we.v=y(Ie,Wr,we.v),we.k=y(Be,Ar,we.k),we.x=y(ke,fr,we.x),we.j=y(Ge,Yr,we.j),we.q=y(et,br,we.q),we},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0,S:void 0,W:void 0,C:void 0,B:void 0,v:void 0,k:void 0,x:void 0,j:void 0,q:void 0}),be(()=>He.value=d()),z})(),T(qG,{get isOpen(){return V()},onClose:()=>N(!1),get signatureDataUrl(){return e().firmaBase64},get enhancementType(){return d()}}),QG()]}})};tr(["click"]);const tK=async(t={})=>{try{const e=Xt.state.user;if(!e)throw new Error("User not authenticated");const{status:r="all",searchTerm:n="",dateFrom:i,dateTo:o,limit:s=20,startAfter:a}=t;let l=[gu("userId","==",e.uid),vA("createdAt","desc")];if(r!=="all"&&l.splice(1,0,gu("status","==",r)),(i||o)&&(i&&l.splice(-1,0,gu("createdAt",">=",new Date(i))),o&&l.splice(-1,0,gu("createdAt","<=",new Date(o)))),a&&l.push(O7(a)),l.push(M7(s+1)),!(n&&n?.trim()))return[];let d={businessId:Xt.getBusinessId()};n&&n.split(" ").map((f,p)=>{f&&(d[":search"+p]=f.trim())});const h=await E0({query:"getCubanPassport",queryString:"!* contain :search0 AND !* contain :search1 AND !* contain :search2 AND !* contain :search3 AND !* contain :search4 AND guia = guia",params:d});return console.log(h),h}catch(e){throw console.error("Error fetching passport applications:",e),new Error(`Failed to fetch passport applications: ${e instanceof Error?e.message:"Unknown error"}`)}},rK=async t=>{try{const e=Xt.state.user;if(!e)throw new Error("User not authenticated");const r=cl(ws,"passportApplications",t),n=await qb(r);if(!n.exists())return null;const i=n.data();if(i.userId!==e.uid)throw new Error("Unauthorized access to passport application");return{id:n.id,...i,createdAt:i.createdAt,updatedAt:i.updatedAt}}catch(e){throw console.error("Error fetching passport application:",e),new Error(`Failed to fetch passport application: ${e instanceof Error?e.message:"Unknown error"}`)}},nK=async t=>{try{const e=Xt.state.user;if(!e)throw new Error("User not authenticated");const r=await rK(t);if(!r)throw new Error("Application not found");if(r.userId!==e.uid)throw new Error("Unauthorized to delete this application");await cl(ws,"passportApplications",t).delete()}catch(e){throw console.error("Error deleting passport application:",e),new Error(`Failed to delete passport application: ${e instanceof Error?e.message:"Unknown error"}`)}},iK=async()=>{try{const t=Xt.state.user;if(!t)throw new Error("User not authenticated");const e={draft:0,submitted:0,processing:0,completed:0,rejected:0,total:0},r=Nb(ws,"passportApplications"),n=Bb(r,gu("userId","==",t.uid));return(await Hb(n)).forEach(o=>{const a=o.data().status||"draft";a in e&&e[a]++,e.total++}),e}catch(t){return console.error("Error fetching application stats:",t),{draft:0,submitted:0,processing:0,completed:0,rejected:0,total:0}}};var ay=le("<div>"),oK=le("<div><strong>Error:</strong> "),sK=le("<div><div></div><p>Cargando solicitudes..."),aK=le(`<div><h2>Solicitudes de Pasaporte Guardadas</h2><div><div><div></div><div>Total</div></div><div><div></div><div>Borradores</div></div><div><div></div><div>Enviados</div></div><div><div></div><div>En Proceso</div></div><div><div></div><div>Completados</div></div></div><style>
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `),lK=le("<div><p>📋 No hay solicitudes guardadas</p><p>Las solicitudes que guarde aparecerán aquí para poder verlas y editarlas más tarde."),cK=le("<div><strong>Número:</strong> "),dK=le("<div><strong>Notas:</strong> "),uK=le("<div><div><div><h3> <!> </h3><div><div><strong>Email:</strong> </div><div><strong>Teléfono:</strong> </div><div><strong>Creado:</strong> </div><div><strong>Actualizado:</strong> </div></div></div><div><div>");const hK=t=>{const[e,r]=Ae([]),[n,i]=Ae(!1),[o,s]=Ae(null),[a,l]=Ae({draft:0,submitted:0,processing:0,completed:0,rejected:0,total:0}),[d,u]=Ae("all"),[h,f]=Ae(""),[p,m]=Ae(""),[x,P]=Ae(""),[g,F]=Ae(!1),[V,N]=Ae(null);Kn(()=>{R(),M()});const R=async(A=!0)=>{try{i(!0),s(null);const I={status:d(),searchTerm:h().trim(),dateFrom:p()||void 0,dateTo:x()||void 0,limit:20,startAfter:A?void 0:V()},ee=await tK(I);r(A?ee.applications:Z=>[...Z,...ee.applications]),F(ee.hasMore),N(ee.lastDoc)}catch(I){const ee=I instanceof Error?I.message:"Failed to load applications";s(ee),console.error("Error loading applications:",I)}finally{i(!1)}},M=async()=>{try{const A=await iK();l(A)}catch(A){console.error("Error loading stats:",A)}},C=()=>{R(!0)},k=async A=>{if(confirm("¿Está seguro que desea eliminar esta solicitud? Esta acción no se puede deshacer."))try{await nK(A),r(I=>I.filter(ee=>ee.id!==A)),await M()}catch(I){const ee=I instanceof Error?I.message:"Failed to delete application";alert(`Error: ${ee}`)}},D=A=>{if(!A)return"N/A";try{return(A.toDate?A.toDate():new Date(A)).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}},$=A=>{switch(A){case"draft":return"var(--text-muted)";case"submitted":return"var(--warning-color)";case"processing":return"var(--primary-color)";case"completed":return"var(--success-color)";case"rejected":return"var(--error-color)";default:return"var(--text-muted)"}},w=A=>{switch(A){case"draft":return"Borrador";case"submitted":return"Enviado";case"processing":return"En Proceso";case"completed":return"Completado";case"rejected":return"Rechazado";default:return A}},_={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem","margin-bottom":"2rem"},v={padding:"1rem",background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius)","text-align":"center"},z={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem","margin-bottom":"1.5rem"},W={padding:"1.5rem",background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius)","margin-bottom":"1rem",cursor:t.onSelectApplication?"pointer":"default",transition:"all 0.2s"};return(()=>{var A=aK(),I=A.firstChild,ee=I.nextSibling,Z=ee.firstChild,X=Z.firstChild,se=X.nextSibling,U=Z.nextSibling,E=U.firstChild,O=E.nextSibling,L=U.nextSibling,G=L.firstChild,K=G.nextSibling,q=L.nextSibling,B=q.firstChild,H=B.nextSibling,Y=q.nextSibling,te=Y.firstChild,oe=te.nextSibling,pe=ee.nextSibling;return I.style.setProperty("font-size","1.5rem"),I.style.setProperty("font-weight","700"),I.style.setProperty("margin-bottom","1.5rem"),I.style.setProperty("color","var(--text-primary)"),y(ee,_),X.style.setProperty("font-size","2rem"),X.style.setProperty("font-weight","700"),X.style.setProperty("color","var(--primary-color)"),c(X,()=>a().total),se.style.setProperty("font-size","0.875rem"),se.style.setProperty("color","var(--text-muted)"),E.style.setProperty("font-size","2rem"),E.style.setProperty("font-weight","700"),c(E,()=>a().draft),O.style.setProperty("font-size","0.875rem"),O.style.setProperty("color","var(--text-muted)"),G.style.setProperty("font-size","2rem"),G.style.setProperty("font-weight","700"),c(G,()=>a().submitted),K.style.setProperty("font-size","0.875rem"),K.style.setProperty("color","var(--text-muted)"),B.style.setProperty("font-size","2rem"),B.style.setProperty("font-weight","700"),c(B,()=>a().processing),H.style.setProperty("font-size","0.875rem"),H.style.setProperty("color","var(--text-muted)"),te.style.setProperty("font-size","2rem"),te.style.setProperty("font-weight","700"),c(te,()=>a().completed),oe.style.setProperty("font-size","0.875rem"),oe.style.setProperty("color","var(--text-muted)"),c(A,T(Vt,{title:"Filtros de Búsqueda",get children(){return[(()=>{var ne=ay();return y(ne,z),c(ne,T(Nn,{label:"Estado",get value(){return d()},onChange:Q=>{u(Q),C()},options:[{value:"all",label:"Todos los Estados"},{value:"draft",label:"Borradores"},{value:"submitted",label:"Enviados"},{value:"processing",label:"En Proceso"},{value:"completed",label:"Completados"},{value:"rejected",label:"Rechazados"}]}),null),c(ne,T(Ot,{label:"Buscar",get value(){return h()},onChange:Q=>{f(Q),setTimeout(()=>C(),500)},placeholder:"Nombre, apellido, email..."}),null),c(ne,T(Ot,{label:"Desde",type:"date",get value(){return p()},onChange:Q=>{m(Q),C()}}),null),c(ne,T(Ot,{label:"Hasta",type:"date",get value(){return x()},onChange:Q=>{P(Q),C()}}),null),ne})(),(()=>{var ne=ay();return ne.style.setProperty("display","flex"),ne.style.setProperty("gap","1rem"),ne.style.setProperty("justify-content","flex-end"),c(ne,T(mt,{onClick:()=>{u("all"),f(""),m(""),P(""),C()},variant:"secondary",size:"sm",children:"Limpiar Filtros"}),null),c(ne,T(mt,{onClick:()=>C(),variant:"primary",size:"sm",children:"Actualizar"}),null),ne})()]}}),pe),c(A,T(We,{get when(){return o()},get children(){var ne=oK(),Q=ne.firstChild;return Q.nextSibling,ne.style.setProperty("padding","1rem"),ne.style.setProperty("background","var(--error-light)"),ne.style.setProperty("color","var(--error-dark)"),ne.style.setProperty("border","1px solid var(--error-color)"),ne.style.setProperty("border-radius","var(--border-radius)"),ne.style.setProperty("margin-bottom","1rem"),c(ne,o,null),ne}}),pe),c(A,T(We,{get when(){return Ve(()=>!!n())()&&e()?.length===0},get children(){var ne=sK(),Q=ne.firstChild;return ne.style.setProperty("text-align","center"),ne.style.setProperty("padding","3rem"),ne.style.setProperty("color","var(--text-muted)"),Q.style.setProperty("display","inline-block"),Q.style.setProperty("width","32px"),Q.style.setProperty("height","32px"),Q.style.setProperty("border","3px solid var(--primary-color)"),Q.style.setProperty("border-top-color","transparent"),Q.style.setProperty("border-radius","50%"),Q.style.setProperty("animation","spin 0.8s linear infinite"),Q.style.setProperty("margin-bottom","1rem"),ne}}),pe),c(A,T(We,{get when(){return!n()||e()?.length>0},get children(){return T(We,{get when(){return e()?.length>0},get fallback(){return(()=>{var ne=lK(),Q=ne.firstChild;return ne.style.setProperty("text-align","center"),ne.style.setProperty("padding","3rem"),ne.style.setProperty("color","var(--text-muted)"),Q.style.setProperty("font-size","1.125rem"),Q.style.setProperty("margin-bottom","1rem"),ne})()},get children(){return[T(_t,{get each(){return e()},children:ne=>(()=>{var Q=uK(),ce=Q.firstChild,ue=ce.firstChild,de=ue.firstChild,ge=de.firstChild,ye=ge.nextSibling;ye.nextSibling;var fe=de.nextSibling,Se=fe.firstChild,qe=Se.firstChild;qe.nextSibling;var Oe=Se.nextSibling,Ie=Oe.firstChild;Ie.nextSibling;var Be=Oe.nextSibling,ke=Be.firstChild;ke.nextSibling;var Ge=Be.nextSibling,et=Ge.firstChild;et.nextSibling;var ve=ue.nextSibling,De=ve.firstChild;return Q.$$click=()=>t.onSelectApplication?.(ne),ce.style.setProperty("display","grid"),ce.style.setProperty("grid-template-columns","1fr auto"),ce.style.setProperty("align-items","start"),ce.style.setProperty("gap","1rem"),de.style.setProperty("font-size","1.125rem"),de.style.setProperty("font-weight","600"),de.style.setProperty("margin-bottom","0.5rem"),de.style.setProperty("color","var(--text-primary)"),c(de,()=>ne.applicationData.primerNombre,ge),c(de,()=>ne.applicationData.primerApellido,ye),c(de,()=>ne.applicationData.segundoApellido,null),fe.style.setProperty("display","grid"),fe.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(200px, 1fr))"),fe.style.setProperty("gap","0.5rem"),fe.style.setProperty("font-size","0.875rem"),fe.style.setProperty("color","var(--text-muted)"),c(Se,()=>ne.applicationData.email,null),c(Oe,()=>ne.applicationData.telefono,null),c(Be,()=>D(ne.createdAt),null),c(Ge,()=>D(ne.updatedAt),null),c(fe,T(We,{get when(){return ne.applicationNumber},get children(){var He=cK(),Je=He.firstChild;return Je.nextSibling,c(He,()=>ne.applicationNumber,null),He}}),null),c(ue,T(We,{get when(){return ne.processingNotes},get children(){var He=dK(),Je=He.firstChild;return Je.nextSibling,He.style.setProperty("margin-top","0.75rem"),He.style.setProperty("padding","0.75rem"),He.style.setProperty("background","var(--gray-50)"),He.style.setProperty("border-radius","var(--border-radius-sm)"),He.style.setProperty("font-size","0.875rem"),c(He,()=>ne.processingNotes,null),He}}),null),ve.style.setProperty("display","flex"),ve.style.setProperty("flex-direction","column"),ve.style.setProperty("align-items","flex-end"),ve.style.setProperty("gap","0.75rem"),De.style.setProperty("padding","0.5rem 1rem"),De.style.setProperty("color","white"),De.style.setProperty("border-radius","var(--border-radius-sm)"),De.style.setProperty("font-size","0.875rem"),De.style.setProperty("font-weight","500"),c(De,()=>w(ne.status)),c(ve,T(We,{get when(){return t.showActions!==!1},get children(){var He=ay();return He.style.setProperty("display","flex"),He.style.setProperty("gap","0.5rem"),c(He,T(We,{get when(){return t.onEditApplication},get children(){return T(mt,{onClick:Je=>{Je.stopPropagation(),t.onEditApplication?.(ne)},variant:"secondary",size:"sm",children:"Editar"})}}),null),c(He,T(mt,{onClick:Je=>{Je.stopPropagation(),k(ne.id)},variant:"danger",size:"sm",children:"Eliminar"}),null),He}}),null),be(He=>{var Je={...W,":hover":t.onSelectApplication?{"border-color":"var(--primary-color)","box-shadow":"0 2px 8px rgba(0,0,0,0.1)"}:{}},Le=$(ne.status);return He.e=y(Q,Je,He.e),Le!==He.t&&((He.t=Le)!=null?De.style.setProperty("background",Le):De.style.removeProperty("background")),He},{e:void 0,t:void 0}),Q})()}),T(We,{get when(){return g()},get children(){var ne=ay();return ne.style.setProperty("text-align","center"),ne.style.setProperty("margin-top","2rem"),c(ne,T(mt,{onClick:()=>R(!1),variant:"secondary",get disabled(){return n()},get children(){return T(We,{get when(){return n()},fallback:"Cargar Más",children:"Cargando..."})}})),ne}})]}})}}),pe),be(ne=>{var Q=v,ce=v,ue=$("draft"),de=v,ge=$("submitted"),ye=v,fe=$("processing"),Se=v,qe=$("completed");return ne.e=y(Z,Q,ne.e),ne.t=y(U,ce,ne.t),ue!==ne.a&&((ne.a=ue)!=null?E.style.setProperty("color",ue):E.style.removeProperty("color")),ne.o=y(L,de,ne.o),ge!==ne.i&&((ne.i=ge)!=null?G.style.setProperty("color",ge):G.style.removeProperty("color")),ne.n=y(q,ye,ne.n),fe!==ne.s&&((ne.s=fe)!=null?B.style.setProperty("color",fe):B.style.removeProperty("color")),ne.h=y(Y,Se,ne.h),qe!==ne.r&&((ne.r=qe)!=null?te.style.setProperty("color",qe):te.style.removeProperty("color")),ne},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),A})()};tr(["click"]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var C1=function(t,e){return C1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},C1(t,e)};function Ht(t,e){C1(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Tr=function(){return Tr=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Tr.apply(this,arguments)};function pK(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function jr(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(u){try{d(n.next(u))}catch(h){s(h)}}function l(u){try{d(n.throw(u))}catch(h){s(h)}}function d(u){u.done?o(u.value):i(u.value).then(a,l)}d((n=n.apply(t,[])).next())})}function Vr(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(d){return function(u){return l([d,u])}}function l(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(t,r)}catch(u){d=[6,u],i=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function sn(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}var vu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Uh=new Uint8Array(256);for(var ly=0;ly<vu.length;ly++)Uh[vu.charCodeAt(ly)]=ly;var fK=function(t){for(var e="",r=t.length,n=0;n<r;n+=3)e+=vu[t[n]>>2],e+=vu[(t[n]&3)<<4|t[n+1]>>4],e+=vu[(t[n+1]&15)<<2|t[n+2]>>6],e+=vu[t[n+2]&63];return r%3===2?e=e.substring(0,e.length-1)+"=":r%3===1&&(e=e.substring(0,e.length-2)+"=="),e},NS=function(t){var e=t.length*.75,r=t.length,n,i=0,o,s,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var d=new Uint8Array(e);for(n=0;n<r;n+=4)o=Uh[t.charCodeAt(n)],s=Uh[t.charCodeAt(n+1)],a=Uh[t.charCodeAt(n+2)],l=Uh[t.charCodeAt(n+3)],d[i++]=o<<2|s>>4,d[i++]=(s&15)<<4|a>>2,d[i++]=(a&3)<<6|l&63;return d},yK=/^(data)?:?([\w\/\+]+)?;?(charset=[\w-]+|base64)?.*,/i,mK=function(t){var e=t.trim(),r=e.substring(0,100),n=r.match(yK);if(!n)return NS(e);var i=n[0],o=e.substring(i.length);return NS(o)},Er=function(t){return t.charCodeAt(0)},gK=function(t){return t.codePointAt(0)},Xp=function(t,e){return Gs(t.toString(16),e,"0").toUpperCase()},fg=function(t){return Xp(t,2)},tl=function(t){return String.fromCharCode(t)},vK=function(t){return tl(parseInt(t,16))},Gs=function(t,e,r){for(var n="",i=0,o=e-t.length;i<o;i++)n+=r;return n+t},Gi=function(t,e,r){for(var n=t.length,i=0;i<n;i++)e[r++]=t.charCodeAt(i);return n},bK=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},Zp=function(t){return t.replace(/\t|\u0085|\u2028|\u2029/g,"    ").replace(/[\b\v]/g,"")},PK=["\\n","\\f","\\r","\\u000B"],B3=function(t){return/^[\n\f\r\u000B]$/.test(t)},j3=function(t){return t.split(/[\n\f\r\u000B]/)},V3=function(t){return t.replace(/[\n\f\r\u000B]/g," ")},z3=function(t,e){var r=t.charCodeAt(e),n,i=e+1,o=1;return r>=55296&&r<=56319&&t.length>i&&(n=t.charCodeAt(i),n>=56320&&n<=57343&&(o=2)),[t.slice(e,e+o),o]},xK=function(t){for(var e=[],r=0,n=t.length;r<n;){var i=z3(t,r),o=i[0],s=i[1];e.push(o),r+=s}return e},SK=function(t){for(var e=PK.join("|"),r=["$"],n=0,i=t.length;n<i;n++){var o=t[n];if(B3(o))throw new TypeError("`wordBreak` must not include "+e);r.push(o===""?".":bK(o))}var s=r.join("|");return new RegExp("("+e+")|((.*?)("+s+"))","gm")},wK=function(t,e,r,n){for(var i=SK(e),o=Zp(t).match(i),s="",a=0,l=[],d=function(){s!==""&&l.push(s),s="",a=0},u=0,h=o.length;u<h;u++){var f=o[u];if(B3(f))d();else{var p=n(f);a+p>r&&d(),s+=f,a+=p}}return d(),l},CK=/^D:(\d\d\d\d)(\d\d)?(\d\d)?(\d\d)?(\d\d)?(\d\d)?([+\-Z])?(\d\d)?'?(\d\d)?'?$/,U3=function(t){var e=t.match(CK);if(e){var r=e[1],n=e[2],i=n===void 0?"01":n,o=e[3],s=o===void 0?"01":o,a=e[4],l=a===void 0?"00":a,d=e[5],u=d===void 0?"00":d,h=e[6],f=h===void 0?"00":h,p=e[7],m=p===void 0?"Z":p,x=e[8],P=x===void 0?"00":x,g=e[9],F=g===void 0?"00":g,V=m==="Z"?"Z":""+m+P+":"+F,N=new Date(r+"-"+i+"-"+s+"T"+l+":"+u+":"+f+V);return N}},h2=function(t,e){for(var r,n=0,i;n<t.length;){var o=t.substring(n).match(e);if(!o)return{match:i,pos:n};i=o,n+=((r=o.index)!==null&&r!==void 0?r:0)+o[0].length}return{match:i,pos:n}},bm=function(t){return t[t.length-1]},_1=function(t){if(t instanceof Uint8Array)return t;for(var e=t.length,r=new Uint8Array(e),n=0;n<e;n++)r[n]=t.charCodeAt(n);return r},_K=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.length,n=[],i=0;i<r;i++){var o=t[i];n[i]=o instanceof Uint8Array?o:_1(o)}for(var s=0,i=0;i<r;i++)s+=t[i].length;for(var a=new Uint8Array(s),l=0,d=0;d<r;d++)for(var u=n[d],h=0,f=u.length;h<f;h++)a[l++]=u[h];return a},AK=function(t){for(var e=0,r=0,n=t.length;r<n;r++)e+=t[r].length;for(var i=new Uint8Array(e),o=0,r=0,n=t.length;r<n;r++){var s=t[r];i.set(s,o),o+=s.length}return i},q3=function(t){for(var e="",r=0,n=t.length;r<n;r++)e+=tl(t[r]);return e},kK=function(t,e){return t.id-e.id},EK=function(t,e){for(var r=[],n=0,i=t.length;n<i;n++){var o=t[n],s=t[n-1];(n===0||e(o)!==e(s))&&r.push(o)}return r},ou=function(t){for(var e=t.length,r=0,n=Math.floor(e/2);r<n;r++){var i=r,o=e-r-1,s=t[r];t[i]=t[o],t[o]=s}return t},TK=function(t){for(var e=0,r=0,n=t.length;r<n;r++)e+=t[r];return e},IK=function(t,e){for(var r=new Array(e-t),n=0,i=r.length;n<i;n++)r[n]=t+n;return r},NK=function(t,e){for(var r=new Array(e.length),n=0,i=e.length;n<i;n++)r[n]=t[e[n]];return r},RK=function(t){return t instanceof Uint8Array||t instanceof ArrayBuffer||typeof t=="string"},kh=function(t){if(typeof t=="string")return mK(t);if(t instanceof ArrayBuffer)return new Uint8Array(t);if(t instanceof Uint8Array)return t;throw new TypeError("`input` must be one of `string | ArrayBuffer | Uint8Array`")},Ou=function(){return new Promise(function(t){setTimeout(function(){return t()},0)})},DK=function(t,e){e===void 0&&(e=!0);var r=[];e&&r.push(65279);for(var n=0,i=t.length;n<i;){var o=t.codePointAt(n);if(o<65536)r.push(o),n+=1;else if(o<1114112)r.push(H3(o),W3(o)),n+=2;else throw new Error("Invalid code point: 0x"+fg(o))}return new Uint16Array(r)},LK=function(t){return t>=0&&t<=65535},$K=function(t){return t>=65536&&t<=1114111},H3=function(t){return Math.floor((t-65536)/1024)+55296},W3=function(t){return(t-65536)%1024+56320},uc;(function(t){t.BigEndian="BigEndian",t.LittleEndian="LittleEndian"})(uc||(uc={}));var Eh="�".codePointAt(0),G3=function(t,e){if(e===void 0&&(e=!0),t.length<=1)return String.fromCodePoint(Eh);for(var r=e?MK(t):uc.BigEndian,n=e?2:0,i=[];t.length-n>=2;){var o=DS(t[n++],t[n++],r);if(FK(o))if(t.length-n<2)i.push(Eh);else{var s=DS(t[n++],t[n++],r);RS(s)?i.push(o,s):i.push(Eh)}else RS(o)?(n+=2,i.push(Eh)):i.push(o)}return n<t.length&&i.push(Eh),String.fromCodePoint.apply(String,i)},FK=function(t){return t>=55296&&t<=56319},RS=function(t){return t>=56320&&t<=57343},DS=function(t,e,r){if(r===uc.LittleEndian)return e<<8|t;if(r===uc.BigEndian)return t<<8|e;throw new Error("Invalid byteOrder: "+r)},MK=function(t){return K3(t)?uc.BigEndian:Y3(t)?uc.LittleEndian:uc.BigEndian},K3=function(t){return t[0]===254&&t[1]===255},Y3=function(t){return t[0]===255&&t[1]===254},X3=function(t){return K3(t)||Y3(t)},OK=function(t){var e=String(t);if(Math.abs(t)<1){var r=parseInt(t.toString().split("e-")[1]);if(r){var n=t<0;n&&(t*=-1),t*=Math.pow(10,r-1),e="0."+new Array(r).join("0")+t.toString().substring(2),n&&(e="-"+e)}}else{var r=parseInt(t.toString().split("+")[1]);r>20&&(r-=20,t/=Math.pow(10,r),e=t.toString()+new Array(r+1).join("0"))}return e},$y=function(t){return Math.ceil(t.toString(2).length/8)},su=function(t){for(var e=new Uint8Array($y(t)),r=1;r<=e.length;r++)e[r-1]=t>>(e.length-r)*8;return e},Jp=function(t){throw new Error(t)},lJ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function BK(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var i0={},LS;function Ec(){return LS||(LS=1,function(t){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function r(o,s){return Object.prototype.hasOwnProperty.call(o,s)}t.assign=function(o){for(var s=Array.prototype.slice.call(arguments,1);s.length;){var a=s.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(var l in a)r(a,l)&&(o[l]=a[l])}}return o},t.shrinkBuf=function(o,s){return o.length===s?o:o.subarray?o.subarray(0,s):(o.length=s,o)};var n={arraySet:function(o,s,a,l,d){if(s.subarray&&o.subarray){o.set(s.subarray(a,a+l),d);return}for(var u=0;u<l;u++)o[d+u]=s[a+u]},flattenChunks:function(o){var s,a,l,d,u,h;for(l=0,s=0,a=o.length;s<a;s++)l+=o[s].length;for(h=new Uint8Array(l),d=0,s=0,a=o.length;s<a;s++)u=o[s],h.set(u,d),d+=u.length;return h}},i={arraySet:function(o,s,a,l,d){for(var u=0;u<l;u++)o[d+u]=s[a+u]},flattenChunks:function(o){return[].concat.apply([],o)}};t.setTyped=function(o){o?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,n)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(e)}(i0)),i0}var au={},Us={},Yc={},$S;function jK(){if($S)return Yc;$S=1;var t=Ec(),e=4,r=0,n=1,i=2;function o(ve){for(var De=ve.length;--De>=0;)ve[De]=0}var s=0,a=1,l=2,d=3,u=258,h=29,f=256,p=f+1+h,m=30,x=19,P=2*p+1,g=15,F=16,V=7,N=256,R=16,M=17,C=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],$=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],w=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],_=512,v=new Array((p+2)*2);o(v);var z=new Array(m*2);o(z);var W=new Array(_);o(W);var A=new Array(u-d+1);o(A);var I=new Array(h);o(I);var ee=new Array(m);o(ee);function Z(ve,De,He,Je,Le){this.static_tree=ve,this.extra_bits=De,this.extra_base=He,this.elems=Je,this.max_length=Le,this.has_stree=ve&&ve.length}var X,se,U;function E(ve,De){this.dyn_tree=ve,this.max_code=0,this.stat_desc=De}function O(ve){return ve<256?W[ve]:W[256+(ve>>>7)]}function L(ve,De){ve.pending_buf[ve.pending++]=De&255,ve.pending_buf[ve.pending++]=De>>>8&255}function G(ve,De,He){ve.bi_valid>F-He?(ve.bi_buf|=De<<ve.bi_valid&65535,L(ve,ve.bi_buf),ve.bi_buf=De>>F-ve.bi_valid,ve.bi_valid+=He-F):(ve.bi_buf|=De<<ve.bi_valid&65535,ve.bi_valid+=He)}function K(ve,De,He){G(ve,He[De*2],He[De*2+1])}function q(ve,De){var He=0;do He|=ve&1,ve>>>=1,He<<=1;while(--De>0);return He>>>1}function B(ve){ve.bi_valid===16?(L(ve,ve.bi_buf),ve.bi_buf=0,ve.bi_valid=0):ve.bi_valid>=8&&(ve.pending_buf[ve.pending++]=ve.bi_buf&255,ve.bi_buf>>=8,ve.bi_valid-=8)}function H(ve,De){var He=De.dyn_tree,Je=De.max_code,Le=De.stat_desc.static_tree,Te=De.stat_desc.has_stree,he=De.stat_desc.extra_bits,Ne=De.stat_desc.extra_base,rt=De.stat_desc.max_length,re,Ue,we,xe,je,$e,ft=0;for(xe=0;xe<=g;xe++)ve.bl_count[xe]=0;for(He[ve.heap[ve.heap_max]*2+1]=0,re=ve.heap_max+1;re<P;re++)Ue=ve.heap[re],xe=He[He[Ue*2+1]*2+1]+1,xe>rt&&(xe=rt,ft++),He[Ue*2+1]=xe,!(Ue>Je)&&(ve.bl_count[xe]++,je=0,Ue>=Ne&&(je=he[Ue-Ne]),$e=He[Ue*2],ve.opt_len+=$e*(xe+je),Te&&(ve.static_len+=$e*(Le[Ue*2+1]+je)));if(ft!==0){do{for(xe=rt-1;ve.bl_count[xe]===0;)xe--;ve.bl_count[xe]--,ve.bl_count[xe+1]+=2,ve.bl_count[rt]--,ft-=2}while(ft>0);for(xe=rt;xe!==0;xe--)for(Ue=ve.bl_count[xe];Ue!==0;)we=ve.heap[--re],!(we>Je)&&(He[we*2+1]!==xe&&(ve.opt_len+=(xe-He[we*2+1])*He[we*2],He[we*2+1]=xe),Ue--)}}function Y(ve,De,He){var Je=new Array(g+1),Le=0,Te,he;for(Te=1;Te<=g;Te++)Je[Te]=Le=Le+He[Te-1]<<1;for(he=0;he<=De;he++){var Ne=ve[he*2+1];Ne!==0&&(ve[he*2]=q(Je[Ne]++,Ne))}}function te(){var ve,De,He,Je,Le,Te=new Array(g+1);for(He=0,Je=0;Je<h-1;Je++)for(I[Je]=He,ve=0;ve<1<<k[Je];ve++)A[He++]=Je;for(A[He-1]=Je,Le=0,Je=0;Je<16;Je++)for(ee[Je]=Le,ve=0;ve<1<<D[Je];ve++)W[Le++]=Je;for(Le>>=7;Je<m;Je++)for(ee[Je]=Le<<7,ve=0;ve<1<<D[Je]-7;ve++)W[256+Le++]=Je;for(De=0;De<=g;De++)Te[De]=0;for(ve=0;ve<=143;)v[ve*2+1]=8,ve++,Te[8]++;for(;ve<=255;)v[ve*2+1]=9,ve++,Te[9]++;for(;ve<=279;)v[ve*2+1]=7,ve++,Te[7]++;for(;ve<=287;)v[ve*2+1]=8,ve++,Te[8]++;for(Y(v,p+1,Te),ve=0;ve<m;ve++)z[ve*2+1]=5,z[ve*2]=q(ve,5);X=new Z(v,k,f+1,p,g),se=new Z(z,D,0,m,g),U=new Z(new Array(0),$,0,x,V)}function oe(ve){var De;for(De=0;De<p;De++)ve.dyn_ltree[De*2]=0;for(De=0;De<m;De++)ve.dyn_dtree[De*2]=0;for(De=0;De<x;De++)ve.bl_tree[De*2]=0;ve.dyn_ltree[N*2]=1,ve.opt_len=ve.static_len=0,ve.last_lit=ve.matches=0}function pe(ve){ve.bi_valid>8?L(ve,ve.bi_buf):ve.bi_valid>0&&(ve.pending_buf[ve.pending++]=ve.bi_buf),ve.bi_buf=0,ve.bi_valid=0}function ne(ve,De,He,Je){pe(ve),L(ve,He),L(ve,~He),t.arraySet(ve.pending_buf,ve.window,De,He,ve.pending),ve.pending+=He}function Q(ve,De,He,Je){var Le=De*2,Te=He*2;return ve[Le]<ve[Te]||ve[Le]===ve[Te]&&Je[De]<=Je[He]}function ce(ve,De,He){for(var Je=ve.heap[He],Le=He<<1;Le<=ve.heap_len&&(Le<ve.heap_len&&Q(De,ve.heap[Le+1],ve.heap[Le],ve.depth)&&Le++,!Q(De,Je,ve.heap[Le],ve.depth));)ve.heap[He]=ve.heap[Le],He=Le,Le<<=1;ve.heap[He]=Je}function ue(ve,De,He){var Je,Le,Te=0,he,Ne;if(ve.last_lit!==0)do Je=ve.pending_buf[ve.d_buf+Te*2]<<8|ve.pending_buf[ve.d_buf+Te*2+1],Le=ve.pending_buf[ve.l_buf+Te],Te++,Je===0?K(ve,Le,De):(he=A[Le],K(ve,he+f+1,De),Ne=k[he],Ne!==0&&(Le-=I[he],G(ve,Le,Ne)),Je--,he=O(Je),K(ve,he,He),Ne=D[he],Ne!==0&&(Je-=ee[he],G(ve,Je,Ne)));while(Te<ve.last_lit);K(ve,N,De)}function de(ve,De){var He=De.dyn_tree,Je=De.stat_desc.static_tree,Le=De.stat_desc.has_stree,Te=De.stat_desc.elems,he,Ne,rt=-1,re;for(ve.heap_len=0,ve.heap_max=P,he=0;he<Te;he++)He[he*2]!==0?(ve.heap[++ve.heap_len]=rt=he,ve.depth[he]=0):He[he*2+1]=0;for(;ve.heap_len<2;)re=ve.heap[++ve.heap_len]=rt<2?++rt:0,He[re*2]=1,ve.depth[re]=0,ve.opt_len--,Le&&(ve.static_len-=Je[re*2+1]);for(De.max_code=rt,he=ve.heap_len>>1;he>=1;he--)ce(ve,He,he);re=Te;do he=ve.heap[1],ve.heap[1]=ve.heap[ve.heap_len--],ce(ve,He,1),Ne=ve.heap[1],ve.heap[--ve.heap_max]=he,ve.heap[--ve.heap_max]=Ne,He[re*2]=He[he*2]+He[Ne*2],ve.depth[re]=(ve.depth[he]>=ve.depth[Ne]?ve.depth[he]:ve.depth[Ne])+1,He[he*2+1]=He[Ne*2+1]=re,ve.heap[1]=re++,ce(ve,He,1);while(ve.heap_len>=2);ve.heap[--ve.heap_max]=ve.heap[1],H(ve,De),Y(He,rt,ve.bl_count)}function ge(ve,De,He){var Je,Le=-1,Te,he=De[0*2+1],Ne=0,rt=7,re=4;for(he===0&&(rt=138,re=3),De[(He+1)*2+1]=65535,Je=0;Je<=He;Je++)Te=he,he=De[(Je+1)*2+1],!(++Ne<rt&&Te===he)&&(Ne<re?ve.bl_tree[Te*2]+=Ne:Te!==0?(Te!==Le&&ve.bl_tree[Te*2]++,ve.bl_tree[R*2]++):Ne<=10?ve.bl_tree[M*2]++:ve.bl_tree[C*2]++,Ne=0,Le=Te,he===0?(rt=138,re=3):Te===he?(rt=6,re=3):(rt=7,re=4))}function ye(ve,De,He){var Je,Le=-1,Te,he=De[0*2+1],Ne=0,rt=7,re=4;for(he===0&&(rt=138,re=3),Je=0;Je<=He;Je++)if(Te=he,he=De[(Je+1)*2+1],!(++Ne<rt&&Te===he)){if(Ne<re)do K(ve,Te,ve.bl_tree);while(--Ne!==0);else Te!==0?(Te!==Le&&(K(ve,Te,ve.bl_tree),Ne--),K(ve,R,ve.bl_tree),G(ve,Ne-3,2)):Ne<=10?(K(ve,M,ve.bl_tree),G(ve,Ne-3,3)):(K(ve,C,ve.bl_tree),G(ve,Ne-11,7));Ne=0,Le=Te,he===0?(rt=138,re=3):Te===he?(rt=6,re=3):(rt=7,re=4)}}function fe(ve){var De;for(ge(ve,ve.dyn_ltree,ve.l_desc.max_code),ge(ve,ve.dyn_dtree,ve.d_desc.max_code),de(ve,ve.bl_desc),De=x-1;De>=3&&ve.bl_tree[w[De]*2+1]===0;De--);return ve.opt_len+=3*(De+1)+5+5+4,De}function Se(ve,De,He,Je){var Le;for(G(ve,De-257,5),G(ve,He-1,5),G(ve,Je-4,4),Le=0;Le<Je;Le++)G(ve,ve.bl_tree[w[Le]*2+1],3);ye(ve,ve.dyn_ltree,De-1),ye(ve,ve.dyn_dtree,He-1)}function qe(ve){var De=4093624447,He;for(He=0;He<=31;He++,De>>>=1)if(De&1&&ve.dyn_ltree[He*2]!==0)return r;if(ve.dyn_ltree[9*2]!==0||ve.dyn_ltree[10*2]!==0||ve.dyn_ltree[13*2]!==0)return n;for(He=32;He<f;He++)if(ve.dyn_ltree[He*2]!==0)return n;return r}var Oe=!1;function Ie(ve){Oe||(te(),Oe=!0),ve.l_desc=new E(ve.dyn_ltree,X),ve.d_desc=new E(ve.dyn_dtree,se),ve.bl_desc=new E(ve.bl_tree,U),ve.bi_buf=0,ve.bi_valid=0,oe(ve)}function Be(ve,De,He,Je){G(ve,(s<<1)+(Je?1:0),3),ne(ve,De,He)}function ke(ve){G(ve,a<<1,3),K(ve,N,v),B(ve)}function Ge(ve,De,He,Je){var Le,Te,he=0;ve.level>0?(ve.strm.data_type===i&&(ve.strm.data_type=qe(ve)),de(ve,ve.l_desc),de(ve,ve.d_desc),he=fe(ve),Le=ve.opt_len+3+7>>>3,Te=ve.static_len+3+7>>>3,Te<=Le&&(Le=Te)):Le=Te=He+5,He+4<=Le&&De!==-1?Be(ve,De,He,Je):ve.strategy===e||Te===Le?(G(ve,(a<<1)+(Je?1:0),3),ue(ve,v,z)):(G(ve,(l<<1)+(Je?1:0),3),Se(ve,ve.l_desc.max_code+1,ve.d_desc.max_code+1,he+1),ue(ve,ve.dyn_ltree,ve.dyn_dtree)),oe(ve),Je&&pe(ve)}function et(ve,De,He){return ve.pending_buf[ve.d_buf+ve.last_lit*2]=De>>>8&255,ve.pending_buf[ve.d_buf+ve.last_lit*2+1]=De&255,ve.pending_buf[ve.l_buf+ve.last_lit]=He&255,ve.last_lit++,De===0?ve.dyn_ltree[He*2]++:(ve.matches++,De--,ve.dyn_ltree[(A[He]+f+1)*2]++,ve.dyn_dtree[O(De)*2]++),ve.last_lit===ve.lit_bufsize-1}return Yc._tr_init=Ie,Yc._tr_stored_block=Be,Yc._tr_flush_block=Ge,Yc._tr_tally=et,Yc._tr_align=ke,Yc}var o0,FS;function Z3(){if(FS)return o0;FS=1;function t(e,r,n,i){for(var o=e&65535|0,s=e>>>16&65535|0,a=0;n!==0;){a=n>2e3?2e3:n,n-=a;do o=o+r[i++]|0,s=s+o|0;while(--a);o%=65521,s%=65521}return o|s<<16|0}return o0=t,o0}var s0,MS;function J3(){if(MS)return s0;MS=1;function t(){for(var n,i=[],o=0;o<256;o++){n=o;for(var s=0;s<8;s++)n=n&1?3988292384^n>>>1:n>>>1;i[o]=n}return i}var e=t();function r(n,i,o,s){var a=e,l=s+o;n^=-1;for(var d=s;d<l;d++)n=n>>>8^a[(n^i[d])&255];return n^-1}return s0=r,s0}var a0,OS;function p2(){return OS||(OS=1,a0={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),a0}var BS;function VK(){if(BS)return Us;BS=1;var t=Ec(),e=jK(),r=Z3(),n=J3(),i=p2(),o=0,s=1,a=3,l=4,d=5,u=0,h=1,f=-2,p=-3,m=-5,x=-1,P=1,g=2,F=3,V=4,N=0,R=2,M=8,C=9,k=15,D=8,$=29,w=256,_=w+1+$,v=30,z=19,W=2*_+1,A=15,I=3,ee=258,Z=ee+I+1,X=32,se=42,U=69,E=73,O=91,L=103,G=113,K=666,q=1,B=2,H=3,Y=4,te=3;function oe(re,Ue){return re.msg=i[Ue],Ue}function pe(re){return(re<<1)-(re>4?9:0)}function ne(re){for(var Ue=re.length;--Ue>=0;)re[Ue]=0}function Q(re){var Ue=re.state,we=Ue.pending;we>re.avail_out&&(we=re.avail_out),we!==0&&(t.arraySet(re.output,Ue.pending_buf,Ue.pending_out,we,re.next_out),re.next_out+=we,Ue.pending_out+=we,re.total_out+=we,re.avail_out-=we,Ue.pending-=we,Ue.pending===0&&(Ue.pending_out=0))}function ce(re,Ue){e._tr_flush_block(re,re.block_start>=0?re.block_start:-1,re.strstart-re.block_start,Ue),re.block_start=re.strstart,Q(re.strm)}function ue(re,Ue){re.pending_buf[re.pending++]=Ue}function de(re,Ue){re.pending_buf[re.pending++]=Ue>>>8&255,re.pending_buf[re.pending++]=Ue&255}function ge(re,Ue,we,xe){var je=re.avail_in;return je>xe&&(je=xe),je===0?0:(re.avail_in-=je,t.arraySet(Ue,re.input,re.next_in,je,we),re.state.wrap===1?re.adler=r(re.adler,Ue,je,we):re.state.wrap===2&&(re.adler=n(re.adler,Ue,je,we)),re.next_in+=je,re.total_in+=je,je)}function ye(re,Ue){var we=re.max_chain_length,xe=re.strstart,je,$e,ft=re.prev_length,ct=re.nice_match,yt=re.strstart>re.w_size-Z?re.strstart-(re.w_size-Z):0,$t=re.window,bt=re.w_mask,Gt=re.prev,Wt=re.strstart+ee,Dt=$t[xe+ft-1],Kt=$t[xe+ft];re.prev_length>=re.good_match&&(we>>=2),ct>re.lookahead&&(ct=re.lookahead);do if(je=Ue,!($t[je+ft]!==Kt||$t[je+ft-1]!==Dt||$t[je]!==$t[xe]||$t[++je]!==$t[xe+1])){xe+=2,je++;do;while($t[++xe]===$t[++je]&&$t[++xe]===$t[++je]&&$t[++xe]===$t[++je]&&$t[++xe]===$t[++je]&&$t[++xe]===$t[++je]&&$t[++xe]===$t[++je]&&$t[++xe]===$t[++je]&&$t[++xe]===$t[++je]&&xe<Wt);if($e=ee-(Wt-xe),xe=Wt-ee,$e>ft){if(re.match_start=Ue,ft=$e,$e>=ct)break;Dt=$t[xe+ft-1],Kt=$t[xe+ft]}}while((Ue=Gt[Ue&bt])>yt&&--we!==0);return ft<=re.lookahead?ft:re.lookahead}function fe(re){var Ue=re.w_size,we,xe,je,$e,ft;do{if($e=re.window_size-re.lookahead-re.strstart,re.strstart>=Ue+(Ue-Z)){t.arraySet(re.window,re.window,Ue,Ue,0),re.match_start-=Ue,re.strstart-=Ue,re.block_start-=Ue,xe=re.hash_size,we=xe;do je=re.head[--we],re.head[we]=je>=Ue?je-Ue:0;while(--xe);xe=Ue,we=xe;do je=re.prev[--we],re.prev[we]=je>=Ue?je-Ue:0;while(--xe);$e+=Ue}if(re.strm.avail_in===0)break;if(xe=ge(re.strm,re.window,re.strstart+re.lookahead,$e),re.lookahead+=xe,re.lookahead+re.insert>=I)for(ft=re.strstart-re.insert,re.ins_h=re.window[ft],re.ins_h=(re.ins_h<<re.hash_shift^re.window[ft+1])&re.hash_mask;re.insert&&(re.ins_h=(re.ins_h<<re.hash_shift^re.window[ft+I-1])&re.hash_mask,re.prev[ft&re.w_mask]=re.head[re.ins_h],re.head[re.ins_h]=ft,ft++,re.insert--,!(re.lookahead+re.insert<I)););}while(re.lookahead<Z&&re.strm.avail_in!==0)}function Se(re,Ue){var we=65535;for(we>re.pending_buf_size-5&&(we=re.pending_buf_size-5);;){if(re.lookahead<=1){if(fe(re),re.lookahead===0&&Ue===o)return q;if(re.lookahead===0)break}re.strstart+=re.lookahead,re.lookahead=0;var xe=re.block_start+we;if((re.strstart===0||re.strstart>=xe)&&(re.lookahead=re.strstart-xe,re.strstart=xe,ce(re,!1),re.strm.avail_out===0)||re.strstart-re.block_start>=re.w_size-Z&&(ce(re,!1),re.strm.avail_out===0))return q}return re.insert=0,Ue===l?(ce(re,!0),re.strm.avail_out===0?H:Y):(re.strstart>re.block_start&&(ce(re,!1),re.strm.avail_out===0),q)}function qe(re,Ue){for(var we,xe;;){if(re.lookahead<Z){if(fe(re),re.lookahead<Z&&Ue===o)return q;if(re.lookahead===0)break}if(we=0,re.lookahead>=I&&(re.ins_h=(re.ins_h<<re.hash_shift^re.window[re.strstart+I-1])&re.hash_mask,we=re.prev[re.strstart&re.w_mask]=re.head[re.ins_h],re.head[re.ins_h]=re.strstart),we!==0&&re.strstart-we<=re.w_size-Z&&(re.match_length=ye(re,we)),re.match_length>=I)if(xe=e._tr_tally(re,re.strstart-re.match_start,re.match_length-I),re.lookahead-=re.match_length,re.match_length<=re.max_lazy_match&&re.lookahead>=I){re.match_length--;do re.strstart++,re.ins_h=(re.ins_h<<re.hash_shift^re.window[re.strstart+I-1])&re.hash_mask,we=re.prev[re.strstart&re.w_mask]=re.head[re.ins_h],re.head[re.ins_h]=re.strstart;while(--re.match_length!==0);re.strstart++}else re.strstart+=re.match_length,re.match_length=0,re.ins_h=re.window[re.strstart],re.ins_h=(re.ins_h<<re.hash_shift^re.window[re.strstart+1])&re.hash_mask;else xe=e._tr_tally(re,0,re.window[re.strstart]),re.lookahead--,re.strstart++;if(xe&&(ce(re,!1),re.strm.avail_out===0))return q}return re.insert=re.strstart<I-1?re.strstart:I-1,Ue===l?(ce(re,!0),re.strm.avail_out===0?H:Y):re.last_lit&&(ce(re,!1),re.strm.avail_out===0)?q:B}function Oe(re,Ue){for(var we,xe,je;;){if(re.lookahead<Z){if(fe(re),re.lookahead<Z&&Ue===o)return q;if(re.lookahead===0)break}if(we=0,re.lookahead>=I&&(re.ins_h=(re.ins_h<<re.hash_shift^re.window[re.strstart+I-1])&re.hash_mask,we=re.prev[re.strstart&re.w_mask]=re.head[re.ins_h],re.head[re.ins_h]=re.strstart),re.prev_length=re.match_length,re.prev_match=re.match_start,re.match_length=I-1,we!==0&&re.prev_length<re.max_lazy_match&&re.strstart-we<=re.w_size-Z&&(re.match_length=ye(re,we),re.match_length<=5&&(re.strategy===P||re.match_length===I&&re.strstart-re.match_start>4096)&&(re.match_length=I-1)),re.prev_length>=I&&re.match_length<=re.prev_length){je=re.strstart+re.lookahead-I,xe=e._tr_tally(re,re.strstart-1-re.prev_match,re.prev_length-I),re.lookahead-=re.prev_length-1,re.prev_length-=2;do++re.strstart<=je&&(re.ins_h=(re.ins_h<<re.hash_shift^re.window[re.strstart+I-1])&re.hash_mask,we=re.prev[re.strstart&re.w_mask]=re.head[re.ins_h],re.head[re.ins_h]=re.strstart);while(--re.prev_length!==0);if(re.match_available=0,re.match_length=I-1,re.strstart++,xe&&(ce(re,!1),re.strm.avail_out===0))return q}else if(re.match_available){if(xe=e._tr_tally(re,0,re.window[re.strstart-1]),xe&&ce(re,!1),re.strstart++,re.lookahead--,re.strm.avail_out===0)return q}else re.match_available=1,re.strstart++,re.lookahead--}return re.match_available&&(xe=e._tr_tally(re,0,re.window[re.strstart-1]),re.match_available=0),re.insert=re.strstart<I-1?re.strstart:I-1,Ue===l?(ce(re,!0),re.strm.avail_out===0?H:Y):re.last_lit&&(ce(re,!1),re.strm.avail_out===0)?q:B}function Ie(re,Ue){for(var we,xe,je,$e,ft=re.window;;){if(re.lookahead<=ee){if(fe(re),re.lookahead<=ee&&Ue===o)return q;if(re.lookahead===0)break}if(re.match_length=0,re.lookahead>=I&&re.strstart>0&&(je=re.strstart-1,xe=ft[je],xe===ft[++je]&&xe===ft[++je]&&xe===ft[++je])){$e=re.strstart+ee;do;while(xe===ft[++je]&&xe===ft[++je]&&xe===ft[++je]&&xe===ft[++je]&&xe===ft[++je]&&xe===ft[++je]&&xe===ft[++je]&&xe===ft[++je]&&je<$e);re.match_length=ee-($e-je),re.match_length>re.lookahead&&(re.match_length=re.lookahead)}if(re.match_length>=I?(we=e._tr_tally(re,1,re.match_length-I),re.lookahead-=re.match_length,re.strstart+=re.match_length,re.match_length=0):(we=e._tr_tally(re,0,re.window[re.strstart]),re.lookahead--,re.strstart++),we&&(ce(re,!1),re.strm.avail_out===0))return q}return re.insert=0,Ue===l?(ce(re,!0),re.strm.avail_out===0?H:Y):re.last_lit&&(ce(re,!1),re.strm.avail_out===0)?q:B}function Be(re,Ue){for(var we;;){if(re.lookahead===0&&(fe(re),re.lookahead===0)){if(Ue===o)return q;break}if(re.match_length=0,we=e._tr_tally(re,0,re.window[re.strstart]),re.lookahead--,re.strstart++,we&&(ce(re,!1),re.strm.avail_out===0))return q}return re.insert=0,Ue===l?(ce(re,!0),re.strm.avail_out===0?H:Y):re.last_lit&&(ce(re,!1),re.strm.avail_out===0)?q:B}function ke(re,Ue,we,xe,je){this.good_length=re,this.max_lazy=Ue,this.nice_length=we,this.max_chain=xe,this.func=je}var Ge;Ge=[new ke(0,0,0,0,Se),new ke(4,4,8,4,qe),new ke(4,5,16,8,qe),new ke(4,6,32,32,qe),new ke(4,4,16,16,Oe),new ke(8,16,32,32,Oe),new ke(8,16,128,128,Oe),new ke(8,32,128,256,Oe),new ke(32,128,258,1024,Oe),new ke(32,258,258,4096,Oe)];function et(re){re.window_size=2*re.w_size,ne(re.head),re.max_lazy_match=Ge[re.level].max_lazy,re.good_match=Ge[re.level].good_length,re.nice_match=Ge[re.level].nice_length,re.max_chain_length=Ge[re.level].max_chain,re.strstart=0,re.block_start=0,re.lookahead=0,re.insert=0,re.match_length=re.prev_length=I-1,re.match_available=0,re.ins_h=0}function ve(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=M,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new t.Buf16(W*2),this.dyn_dtree=new t.Buf16((2*v+1)*2),this.bl_tree=new t.Buf16((2*z+1)*2),ne(this.dyn_ltree),ne(this.dyn_dtree),ne(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new t.Buf16(A+1),this.heap=new t.Buf16(2*_+1),ne(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new t.Buf16(2*_+1),ne(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function De(re){var Ue;return!re||!re.state?oe(re,f):(re.total_in=re.total_out=0,re.data_type=R,Ue=re.state,Ue.pending=0,Ue.pending_out=0,Ue.wrap<0&&(Ue.wrap=-Ue.wrap),Ue.status=Ue.wrap?se:G,re.adler=Ue.wrap===2?0:1,Ue.last_flush=o,e._tr_init(Ue),u)}function He(re){var Ue=De(re);return Ue===u&&et(re.state),Ue}function Je(re,Ue){return!re||!re.state||re.state.wrap!==2?f:(re.state.gzhead=Ue,u)}function Le(re,Ue,we,xe,je,$e){if(!re)return f;var ft=1;if(Ue===x&&(Ue=6),xe<0?(ft=0,xe=-xe):xe>15&&(ft=2,xe-=16),je<1||je>C||we!==M||xe<8||xe>15||Ue<0||Ue>9||$e<0||$e>V)return oe(re,f);xe===8&&(xe=9);var ct=new ve;return re.state=ct,ct.strm=re,ct.wrap=ft,ct.gzhead=null,ct.w_bits=xe,ct.w_size=1<<ct.w_bits,ct.w_mask=ct.w_size-1,ct.hash_bits=je+7,ct.hash_size=1<<ct.hash_bits,ct.hash_mask=ct.hash_size-1,ct.hash_shift=~~((ct.hash_bits+I-1)/I),ct.window=new t.Buf8(ct.w_size*2),ct.head=new t.Buf16(ct.hash_size),ct.prev=new t.Buf16(ct.w_size),ct.lit_bufsize=1<<je+6,ct.pending_buf_size=ct.lit_bufsize*4,ct.pending_buf=new t.Buf8(ct.pending_buf_size),ct.d_buf=1*ct.lit_bufsize,ct.l_buf=3*ct.lit_bufsize,ct.level=Ue,ct.strategy=$e,ct.method=we,He(re)}function Te(re,Ue){return Le(re,Ue,M,k,D,N)}function he(re,Ue){var we,xe,je,$e;if(!re||!re.state||Ue>d||Ue<0)return re?oe(re,f):f;if(xe=re.state,!re.output||!re.input&&re.avail_in!==0||xe.status===K&&Ue!==l)return oe(re,re.avail_out===0?m:f);if(xe.strm=re,we=xe.last_flush,xe.last_flush=Ue,xe.status===se)if(xe.wrap===2)re.adler=0,ue(xe,31),ue(xe,139),ue(xe,8),xe.gzhead?(ue(xe,(xe.gzhead.text?1:0)+(xe.gzhead.hcrc?2:0)+(xe.gzhead.extra?4:0)+(xe.gzhead.name?8:0)+(xe.gzhead.comment?16:0)),ue(xe,xe.gzhead.time&255),ue(xe,xe.gzhead.time>>8&255),ue(xe,xe.gzhead.time>>16&255),ue(xe,xe.gzhead.time>>24&255),ue(xe,xe.level===9?2:xe.strategy>=g||xe.level<2?4:0),ue(xe,xe.gzhead.os&255),xe.gzhead.extra&&xe.gzhead.extra.length&&(ue(xe,xe.gzhead.extra.length&255),ue(xe,xe.gzhead.extra.length>>8&255)),xe.gzhead.hcrc&&(re.adler=n(re.adler,xe.pending_buf,xe.pending,0)),xe.gzindex=0,xe.status=U):(ue(xe,0),ue(xe,0),ue(xe,0),ue(xe,0),ue(xe,0),ue(xe,xe.level===9?2:xe.strategy>=g||xe.level<2?4:0),ue(xe,te),xe.status=G);else{var ft=M+(xe.w_bits-8<<4)<<8,ct=-1;xe.strategy>=g||xe.level<2?ct=0:xe.level<6?ct=1:xe.level===6?ct=2:ct=3,ft|=ct<<6,xe.strstart!==0&&(ft|=X),ft+=31-ft%31,xe.status=G,de(xe,ft),xe.strstart!==0&&(de(xe,re.adler>>>16),de(xe,re.adler&65535)),re.adler=1}if(xe.status===U)if(xe.gzhead.extra){for(je=xe.pending;xe.gzindex<(xe.gzhead.extra.length&65535)&&!(xe.pending===xe.pending_buf_size&&(xe.gzhead.hcrc&&xe.pending>je&&(re.adler=n(re.adler,xe.pending_buf,xe.pending-je,je)),Q(re),je=xe.pending,xe.pending===xe.pending_buf_size));)ue(xe,xe.gzhead.extra[xe.gzindex]&255),xe.gzindex++;xe.gzhead.hcrc&&xe.pending>je&&(re.adler=n(re.adler,xe.pending_buf,xe.pending-je,je)),xe.gzindex===xe.gzhead.extra.length&&(xe.gzindex=0,xe.status=E)}else xe.status=E;if(xe.status===E)if(xe.gzhead.name){je=xe.pending;do{if(xe.pending===xe.pending_buf_size&&(xe.gzhead.hcrc&&xe.pending>je&&(re.adler=n(re.adler,xe.pending_buf,xe.pending-je,je)),Q(re),je=xe.pending,xe.pending===xe.pending_buf_size)){$e=1;break}xe.gzindex<xe.gzhead.name.length?$e=xe.gzhead.name.charCodeAt(xe.gzindex++)&255:$e=0,ue(xe,$e)}while($e!==0);xe.gzhead.hcrc&&xe.pending>je&&(re.adler=n(re.adler,xe.pending_buf,xe.pending-je,je)),$e===0&&(xe.gzindex=0,xe.status=O)}else xe.status=O;if(xe.status===O)if(xe.gzhead.comment){je=xe.pending;do{if(xe.pending===xe.pending_buf_size&&(xe.gzhead.hcrc&&xe.pending>je&&(re.adler=n(re.adler,xe.pending_buf,xe.pending-je,je)),Q(re),je=xe.pending,xe.pending===xe.pending_buf_size)){$e=1;break}xe.gzindex<xe.gzhead.comment.length?$e=xe.gzhead.comment.charCodeAt(xe.gzindex++)&255:$e=0,ue(xe,$e)}while($e!==0);xe.gzhead.hcrc&&xe.pending>je&&(re.adler=n(re.adler,xe.pending_buf,xe.pending-je,je)),$e===0&&(xe.status=L)}else xe.status=L;if(xe.status===L&&(xe.gzhead.hcrc?(xe.pending+2>xe.pending_buf_size&&Q(re),xe.pending+2<=xe.pending_buf_size&&(ue(xe,re.adler&255),ue(xe,re.adler>>8&255),re.adler=0,xe.status=G)):xe.status=G),xe.pending!==0){if(Q(re),re.avail_out===0)return xe.last_flush=-1,u}else if(re.avail_in===0&&pe(Ue)<=pe(we)&&Ue!==l)return oe(re,m);if(xe.status===K&&re.avail_in!==0)return oe(re,m);if(re.avail_in!==0||xe.lookahead!==0||Ue!==o&&xe.status!==K){var yt=xe.strategy===g?Be(xe,Ue):xe.strategy===F?Ie(xe,Ue):Ge[xe.level].func(xe,Ue);if((yt===H||yt===Y)&&(xe.status=K),yt===q||yt===H)return re.avail_out===0&&(xe.last_flush=-1),u;if(yt===B&&(Ue===s?e._tr_align(xe):Ue!==d&&(e._tr_stored_block(xe,0,0,!1),Ue===a&&(ne(xe.head),xe.lookahead===0&&(xe.strstart=0,xe.block_start=0,xe.insert=0))),Q(re),re.avail_out===0))return xe.last_flush=-1,u}return Ue!==l?u:xe.wrap<=0?h:(xe.wrap===2?(ue(xe,re.adler&255),ue(xe,re.adler>>8&255),ue(xe,re.adler>>16&255),ue(xe,re.adler>>24&255),ue(xe,re.total_in&255),ue(xe,re.total_in>>8&255),ue(xe,re.total_in>>16&255),ue(xe,re.total_in>>24&255)):(de(xe,re.adler>>>16),de(xe,re.adler&65535)),Q(re),xe.wrap>0&&(xe.wrap=-xe.wrap),xe.pending!==0?u:h)}function Ne(re){var Ue;return!re||!re.state?f:(Ue=re.state.status,Ue!==se&&Ue!==U&&Ue!==E&&Ue!==O&&Ue!==L&&Ue!==G&&Ue!==K?oe(re,f):(re.state=null,Ue===G?oe(re,p):u))}function rt(re,Ue){var we=Ue.length,xe,je,$e,ft,ct,yt,$t,bt;if(!re||!re.state||(xe=re.state,ft=xe.wrap,ft===2||ft===1&&xe.status!==se||xe.lookahead))return f;for(ft===1&&(re.adler=r(re.adler,Ue,we,0)),xe.wrap=0,we>=xe.w_size&&(ft===0&&(ne(xe.head),xe.strstart=0,xe.block_start=0,xe.insert=0),bt=new t.Buf8(xe.w_size),t.arraySet(bt,Ue,we-xe.w_size,xe.w_size,0),Ue=bt,we=xe.w_size),ct=re.avail_in,yt=re.next_in,$t=re.input,re.avail_in=we,re.next_in=0,re.input=Ue,fe(xe);xe.lookahead>=I;){je=xe.strstart,$e=xe.lookahead-(I-1);do xe.ins_h=(xe.ins_h<<xe.hash_shift^xe.window[je+I-1])&xe.hash_mask,xe.prev[je&xe.w_mask]=xe.head[xe.ins_h],xe.head[xe.ins_h]=je,je++;while(--$e);xe.strstart=je,xe.lookahead=I-1,fe(xe)}return xe.strstart+=xe.lookahead,xe.block_start=xe.strstart,xe.insert=xe.lookahead,xe.lookahead=0,xe.match_length=xe.prev_length=I-1,xe.match_available=0,re.next_in=yt,re.input=$t,re.avail_in=ct,xe.wrap=ft,u}return Us.deflateInit=Te,Us.deflateInit2=Le,Us.deflateReset=He,Us.deflateResetKeep=De,Us.deflateSetHeader=Je,Us.deflate=he,Us.deflateEnd=Ne,Us.deflateSetDictionary=rt,Us.deflateInfo="pako deflate (from Nodeca project)",Us}var Xc={},jS;function Q3(){if(jS)return Xc;jS=1;var t=Ec(),e=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch{e=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}for(var n=new t.Buf8(256),i=0;i<256;i++)n[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;n[254]=n[254]=1,Xc.string2buf=function(s){var a,l,d,u,h,f=s.length,p=0;for(u=0;u<f;u++)l=s.charCodeAt(u),(l&64512)===55296&&u+1<f&&(d=s.charCodeAt(u+1),(d&64512)===56320&&(l=65536+(l-55296<<10)+(d-56320),u++)),p+=l<128?1:l<2048?2:l<65536?3:4;for(a=new t.Buf8(p),h=0,u=0;h<p;u++)l=s.charCodeAt(u),(l&64512)===55296&&u+1<f&&(d=s.charCodeAt(u+1),(d&64512)===56320&&(l=65536+(l-55296<<10)+(d-56320),u++)),l<128?a[h++]=l:l<2048?(a[h++]=192|l>>>6,a[h++]=128|l&63):l<65536?(a[h++]=224|l>>>12,a[h++]=128|l>>>6&63,a[h++]=128|l&63):(a[h++]=240|l>>>18,a[h++]=128|l>>>12&63,a[h++]=128|l>>>6&63,a[h++]=128|l&63);return a};function o(s,a){if(a<65534&&(s.subarray&&r||!s.subarray&&e))return String.fromCharCode.apply(null,t.shrinkBuf(s,a));for(var l="",d=0;d<a;d++)l+=String.fromCharCode(s[d]);return l}return Xc.buf2binstring=function(s){return o(s,s.length)},Xc.binstring2buf=function(s){for(var a=new t.Buf8(s.length),l=0,d=a.length;l<d;l++)a[l]=s.charCodeAt(l);return a},Xc.buf2string=function(s,a){var l,d,u,h,f=a||s.length,p=new Array(f*2);for(d=0,l=0;l<f;){if(u=s[l++],u<128){p[d++]=u;continue}if(h=n[u],h>4){p[d++]=65533,l+=h-1;continue}for(u&=h===2?31:h===3?15:7;h>1&&l<f;)u=u<<6|s[l++]&63,h--;if(h>1){p[d++]=65533;continue}u<65536?p[d++]=u:(u-=65536,p[d++]=55296|u>>10&1023,p[d++]=56320|u&1023)}return o(p,d)},Xc.utf8border=function(s,a){var l;for(a=a||s.length,a>s.length&&(a=s.length),l=a-1;l>=0&&(s[l]&192)===128;)l--;return l<0||l===0?a:l+n[s[l]]>a?l:a},Xc}var l0,VS;function e4(){if(VS)return l0;VS=1;function t(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return l0=t,l0}var zS;function zK(){if(zS)return au;zS=1;var t=VK(),e=Ec(),r=Q3(),n=p2(),i=e4(),o=Object.prototype.toString,s=0,a=4,l=0,d=1,u=2,h=-1,f=0,p=8;function m(F){if(!(this instanceof m))return new m(F);this.options=e.assign({level:h,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},F||{});var V=this.options;V.raw&&V.windowBits>0?V.windowBits=-V.windowBits:V.gzip&&V.windowBits>0&&V.windowBits<16&&(V.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var N=t.deflateInit2(this.strm,V.level,V.method,V.windowBits,V.memLevel,V.strategy);if(N!==l)throw new Error(n[N]);if(V.header&&t.deflateSetHeader(this.strm,V.header),V.dictionary){var R;if(typeof V.dictionary=="string"?R=r.string2buf(V.dictionary):o.call(V.dictionary)==="[object ArrayBuffer]"?R=new Uint8Array(V.dictionary):R=V.dictionary,N=t.deflateSetDictionary(this.strm,R),N!==l)throw new Error(n[N]);this._dict_set=!0}}m.prototype.push=function(F,V){var N=this.strm,R=this.options.chunkSize,M,C;if(this.ended)return!1;C=V===~~V?V:V===!0?a:s,typeof F=="string"?N.input=r.string2buf(F):o.call(F)==="[object ArrayBuffer]"?N.input=new Uint8Array(F):N.input=F,N.next_in=0,N.avail_in=N.input.length;do{if(N.avail_out===0&&(N.output=new e.Buf8(R),N.next_out=0,N.avail_out=R),M=t.deflate(N,C),M!==d&&M!==l)return this.onEnd(M),this.ended=!0,!1;(N.avail_out===0||N.avail_in===0&&(C===a||C===u))&&(this.options.to==="string"?this.onData(r.buf2binstring(e.shrinkBuf(N.output,N.next_out))):this.onData(e.shrinkBuf(N.output,N.next_out)))}while((N.avail_in>0||N.avail_out===0)&&M!==d);return C===a?(M=t.deflateEnd(this.strm),this.onEnd(M),this.ended=!0,M===l):(C===u&&(this.onEnd(l),N.avail_out=0),!0)},m.prototype.onData=function(F){this.chunks.push(F)},m.prototype.onEnd=function(F){F===l&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=e.flattenChunks(this.chunks)),this.chunks=[],this.err=F,this.msg=this.strm.msg};function x(F,V){var N=new m(V);if(N.push(F,!0),N.err)throw N.msg||n[N.err];return N.result}function P(F,V){return V=V||{},V.raw=!0,x(F,V)}function g(F,V){return V=V||{},V.gzip=!0,x(F,V)}return au.Deflate=m,au.deflate=x,au.deflateRaw=P,au.gzip=g,au}var lu={},ms={},c0,US;function UK(){if(US)return c0;US=1;var t=30,e=12;return c0=function(n,i){var o,s,a,l,d,u,h,f,p,m,x,P,g,F,V,N,R,M,C,k,D,$,w,_,v;o=n.state,s=n.next_in,_=n.input,a=s+(n.avail_in-5),l=n.next_out,v=n.output,d=l-(i-n.avail_out),u=l+(n.avail_out-257),h=o.dmax,f=o.wsize,p=o.whave,m=o.wnext,x=o.window,P=o.hold,g=o.bits,F=o.lencode,V=o.distcode,N=(1<<o.lenbits)-1,R=(1<<o.distbits)-1;e:do{g<15&&(P+=_[s++]<<g,g+=8,P+=_[s++]<<g,g+=8),M=F[P&N];t:for(;;){if(C=M>>>24,P>>>=C,g-=C,C=M>>>16&255,C===0)v[l++]=M&65535;else if(C&16){k=M&65535,C&=15,C&&(g<C&&(P+=_[s++]<<g,g+=8),k+=P&(1<<C)-1,P>>>=C,g-=C),g<15&&(P+=_[s++]<<g,g+=8,P+=_[s++]<<g,g+=8),M=V[P&R];r:for(;;){if(C=M>>>24,P>>>=C,g-=C,C=M>>>16&255,C&16){if(D=M&65535,C&=15,g<C&&(P+=_[s++]<<g,g+=8,g<C&&(P+=_[s++]<<g,g+=8)),D+=P&(1<<C)-1,D>h){n.msg="invalid distance too far back",o.mode=t;break e}if(P>>>=C,g-=C,C=l-d,D>C){if(C=D-C,C>p&&o.sane){n.msg="invalid distance too far back",o.mode=t;break e}if($=0,w=x,m===0){if($+=f-C,C<k){k-=C;do v[l++]=x[$++];while(--C);$=l-D,w=v}}else if(m<C){if($+=f+m-C,C-=m,C<k){k-=C;do v[l++]=x[$++];while(--C);if($=0,m<k){C=m,k-=C;do v[l++]=x[$++];while(--C);$=l-D,w=v}}}else if($+=m-C,C<k){k-=C;do v[l++]=x[$++];while(--C);$=l-D,w=v}for(;k>2;)v[l++]=w[$++],v[l++]=w[$++],v[l++]=w[$++],k-=3;k&&(v[l++]=w[$++],k>1&&(v[l++]=w[$++]))}else{$=l-D;do v[l++]=v[$++],v[l++]=v[$++],v[l++]=v[$++],k-=3;while(k>2);k&&(v[l++]=v[$++],k>1&&(v[l++]=v[$++]))}}else if((C&64)===0){M=V[(M&65535)+(P&(1<<C)-1)];continue r}else{n.msg="invalid distance code",o.mode=t;break e}break}}else if((C&64)===0){M=F[(M&65535)+(P&(1<<C)-1)];continue t}else if(C&32){o.mode=e;break e}else{n.msg="invalid literal/length code",o.mode=t;break e}break}}while(s<a&&l<u);k=g>>3,s-=k,g-=k<<3,P&=(1<<g)-1,n.next_in=s,n.next_out=l,n.avail_in=s<a?5+(a-s):5-(s-a),n.avail_out=l<u?257+(u-l):257-(l-u),o.hold=P,o.bits=g},c0}var d0,qS;function qK(){if(qS)return d0;qS=1;var t=Ec(),e=15,r=852,n=592,i=0,o=1,s=2,a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return d0=function(f,p,m,x,P,g,F,V){var N=V.bits,R=0,M=0,C=0,k=0,D=0,$=0,w=0,_=0,v=0,z=0,W,A,I,ee,Z,X=null,se=0,U,E=new t.Buf16(e+1),O=new t.Buf16(e+1),L=null,G=0,K,q,B;for(R=0;R<=e;R++)E[R]=0;for(M=0;M<x;M++)E[p[m+M]]++;for(D=N,k=e;k>=1&&E[k]===0;k--);if(D>k&&(D=k),k===0)return P[g++]=1<<24|64<<16|0,P[g++]=1<<24|64<<16|0,V.bits=1,0;for(C=1;C<k&&E[C]===0;C++);for(D<C&&(D=C),_=1,R=1;R<=e;R++)if(_<<=1,_-=E[R],_<0)return-1;if(_>0&&(f===i||k!==1))return-1;for(O[1]=0,R=1;R<e;R++)O[R+1]=O[R]+E[R];for(M=0;M<x;M++)p[m+M]!==0&&(F[O[p[m+M]]++]=M);if(f===i?(X=L=F,U=19):f===o?(X=a,se-=257,L=l,G-=257,U=256):(X=d,L=u,U=-1),z=0,M=0,R=C,Z=g,$=D,w=0,I=-1,v=1<<D,ee=v-1,f===o&&v>r||f===s&&v>n)return 1;for(;;){K=R-w,F[M]<U?(q=0,B=F[M]):F[M]>U?(q=L[G+F[M]],B=X[se+F[M]]):(q=96,B=0),W=1<<R-w,A=1<<$,C=A;do A-=W,P[Z+(z>>w)+A]=K<<24|q<<16|B|0;while(A!==0);for(W=1<<R-1;z&W;)W>>=1;if(W!==0?(z&=W-1,z+=W):z=0,M++,--E[R]===0){if(R===k)break;R=p[m+F[M]]}if(R>D&&(z&ee)!==I){for(w===0&&(w=D),Z+=C,$=R-w,_=1<<$;$+w<k&&(_-=E[$+w],!(_<=0));)$++,_<<=1;if(v+=1<<$,f===o&&v>r||f===s&&v>n)return 1;I=z&ee,P[I]=D<<24|$<<16|Z-g|0}}return z!==0&&(P[Z+z]=R-w<<24|64<<16|0),V.bits=D,0},d0}var HS;function HK(){if(HS)return ms;HS=1;var t=Ec(),e=Z3(),r=J3(),n=UK(),i=qK(),o=0,s=1,a=2,l=4,d=5,u=6,h=0,f=1,p=2,m=-2,x=-3,P=-4,g=-5,F=8,V=1,N=2,R=3,M=4,C=5,k=6,D=7,$=8,w=9,_=10,v=11,z=12,W=13,A=14,I=15,ee=16,Z=17,X=18,se=19,U=20,E=21,O=22,L=23,G=24,K=25,q=26,B=27,H=28,Y=29,te=30,oe=31,pe=32,ne=852,Q=592,ce=15,ue=ce;function de(Le){return(Le>>>24&255)+(Le>>>8&65280)+((Le&65280)<<8)+((Le&255)<<24)}function ge(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new t.Buf16(320),this.work=new t.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ye(Le){var Te;return!Le||!Le.state?m:(Te=Le.state,Le.total_in=Le.total_out=Te.total=0,Le.msg="",Te.wrap&&(Le.adler=Te.wrap&1),Te.mode=V,Te.last=0,Te.havedict=0,Te.dmax=32768,Te.head=null,Te.hold=0,Te.bits=0,Te.lencode=Te.lendyn=new t.Buf32(ne),Te.distcode=Te.distdyn=new t.Buf32(Q),Te.sane=1,Te.back=-1,h)}function fe(Le){var Te;return!Le||!Le.state?m:(Te=Le.state,Te.wsize=0,Te.whave=0,Te.wnext=0,ye(Le))}function Se(Le,Te){var he,Ne;return!Le||!Le.state||(Ne=Le.state,Te<0?(he=0,Te=-Te):(he=(Te>>4)+1,Te<48&&(Te&=15)),Te&&(Te<8||Te>15))?m:(Ne.window!==null&&Ne.wbits!==Te&&(Ne.window=null),Ne.wrap=he,Ne.wbits=Te,fe(Le))}function qe(Le,Te){var he,Ne;return Le?(Ne=new ge,Le.state=Ne,Ne.window=null,he=Se(Le,Te),he!==h&&(Le.state=null),he):m}function Oe(Le){return qe(Le,ue)}var Ie=!0,Be,ke;function Ge(Le){if(Ie){var Te;for(Be=new t.Buf32(512),ke=new t.Buf32(32),Te=0;Te<144;)Le.lens[Te++]=8;for(;Te<256;)Le.lens[Te++]=9;for(;Te<280;)Le.lens[Te++]=7;for(;Te<288;)Le.lens[Te++]=8;for(i(s,Le.lens,0,288,Be,0,Le.work,{bits:9}),Te=0;Te<32;)Le.lens[Te++]=5;i(a,Le.lens,0,32,ke,0,Le.work,{bits:5}),Ie=!1}Le.lencode=Be,Le.lenbits=9,Le.distcode=ke,Le.distbits=5}function et(Le,Te,he,Ne){var rt,re=Le.state;return re.window===null&&(re.wsize=1<<re.wbits,re.wnext=0,re.whave=0,re.window=new t.Buf8(re.wsize)),Ne>=re.wsize?(t.arraySet(re.window,Te,he-re.wsize,re.wsize,0),re.wnext=0,re.whave=re.wsize):(rt=re.wsize-re.wnext,rt>Ne&&(rt=Ne),t.arraySet(re.window,Te,he-Ne,rt,re.wnext),Ne-=rt,Ne?(t.arraySet(re.window,Te,he-Ne,Ne,0),re.wnext=Ne,re.whave=re.wsize):(re.wnext+=rt,re.wnext===re.wsize&&(re.wnext=0),re.whave<re.wsize&&(re.whave+=rt))),0}function ve(Le,Te){var he,Ne,rt,re,Ue,we,xe,je,$e,ft,ct,yt,$t,bt,Gt=0,Wt,Dt,Kt,gt,St,Qe,vt,Ft,Pt=new t.Buf8(4),kt,Yt,nr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Le||!Le.state||!Le.output||!Le.input&&Le.avail_in!==0)return m;he=Le.state,he.mode===z&&(he.mode=W),Ue=Le.next_out,rt=Le.output,xe=Le.avail_out,re=Le.next_in,Ne=Le.input,we=Le.avail_in,je=he.hold,$e=he.bits,ft=we,ct=xe,Ft=h;e:for(;;)switch(he.mode){case V:if(he.wrap===0){he.mode=W;break}for(;$e<16;){if(we===0)break e;we--,je+=Ne[re++]<<$e,$e+=8}if(he.wrap&2&&je===35615){he.check=0,Pt[0]=je&255,Pt[1]=je>>>8&255,he.check=r(he.check,Pt,2,0),je=0,$e=0,he.mode=N;break}if(he.flags=0,he.head&&(he.head.done=!1),!(he.wrap&1)||(((je&255)<<8)+(je>>8))%31){Le.msg="incorrect header check",he.mode=te;break}if((je&15)!==F){Le.msg="unknown compression method",he.mode=te;break}if(je>>>=4,$e-=4,vt=(je&15)+8,he.wbits===0)he.wbits=vt;else if(vt>he.wbits){Le.msg="invalid window size",he.mode=te;break}he.dmax=1<<vt,Le.adler=he.check=1,he.mode=je&512?_:z,je=0,$e=0;break;case N:for(;$e<16;){if(we===0)break e;we--,je+=Ne[re++]<<$e,$e+=8}if(he.flags=je,(he.flags&255)!==F){Le.msg="unknown compression method",he.mode=te;break}if(he.flags&57344){Le.msg="unknown header flags set",he.mode=te;break}he.head&&(he.head.text=je>>8&1),he.flags&512&&(Pt[0]=je&255,Pt[1]=je>>>8&255,he.check=r(he.check,Pt,2,0)),je=0,$e=0,he.mode=R;case R:for(;$e<32;){if(we===0)break e;we--,je+=Ne[re++]<<$e,$e+=8}he.head&&(he.head.time=je),he.flags&512&&(Pt[0]=je&255,Pt[1]=je>>>8&255,Pt[2]=je>>>16&255,Pt[3]=je>>>24&255,he.check=r(he.check,Pt,4,0)),je=0,$e=0,he.mode=M;case M:for(;$e<16;){if(we===0)break e;we--,je+=Ne[re++]<<$e,$e+=8}he.head&&(he.head.xflags=je&255,he.head.os=je>>8),he.flags&512&&(Pt[0]=je&255,Pt[1]=je>>>8&255,he.check=r(he.check,Pt,2,0)),je=0,$e=0,he.mode=C;case C:if(he.flags&1024){for(;$e<16;){if(we===0)break e;we--,je+=Ne[re++]<<$e,$e+=8}he.length=je,he.head&&(he.head.extra_len=je),he.flags&512&&(Pt[0]=je&255,Pt[1]=je>>>8&255,he.check=r(he.check,Pt,2,0)),je=0,$e=0}else he.head&&(he.head.extra=null);he.mode=k;case k:if(he.flags&1024&&(yt=he.length,yt>we&&(yt=we),yt&&(he.head&&(vt=he.head.extra_len-he.length,he.head.extra||(he.head.extra=new Array(he.head.extra_len)),t.arraySet(he.head.extra,Ne,re,yt,vt)),he.flags&512&&(he.check=r(he.check,Ne,yt,re)),we-=yt,re+=yt,he.length-=yt),he.length))break e;he.length=0,he.mode=D;case D:if(he.flags&2048){if(we===0)break e;yt=0;do vt=Ne[re+yt++],he.head&&vt&&he.length<65536&&(he.head.name+=String.fromCharCode(vt));while(vt&&yt<we);if(he.flags&512&&(he.check=r(he.check,Ne,yt,re)),we-=yt,re+=yt,vt)break e}else he.head&&(he.head.name=null);he.length=0,he.mode=$;case $:if(he.flags&4096){if(we===0)break e;yt=0;do vt=Ne[re+yt++],he.head&&vt&&he.length<65536&&(he.head.comment+=String.fromCharCode(vt));while(vt&&yt<we);if(he.flags&512&&(he.check=r(he.check,Ne,yt,re)),we-=yt,re+=yt,vt)break e}else he.head&&(he.head.comment=null);he.mode=w;case w:if(he.flags&512){for(;$e<16;){if(we===0)break e;we--,je+=Ne[re++]<<$e,$e+=8}if(je!==(he.check&65535)){Le.msg="header crc mismatch",he.mode=te;break}je=0,$e=0}he.head&&(he.head.hcrc=he.flags>>9&1,he.head.done=!0),Le.adler=he.check=0,he.mode=z;break;case _:for(;$e<32;){if(we===0)break e;we--,je+=Ne[re++]<<$e,$e+=8}Le.adler=he.check=de(je),je=0,$e=0,he.mode=v;case v:if(he.havedict===0)return Le.next_out=Ue,Le.avail_out=xe,Le.next_in=re,Le.avail_in=we,he.hold=je,he.bits=$e,p;Le.adler=he.check=1,he.mode=z;case z:if(Te===d||Te===u)break e;case W:if(he.last){je>>>=$e&7,$e-=$e&7,he.mode=B;break}for(;$e<3;){if(we===0)break e;we--,je+=Ne[re++]<<$e,$e+=8}switch(he.last=je&1,je>>>=1,$e-=1,je&3){case 0:he.mode=A;break;case 1:if(Ge(he),he.mode=U,Te===u){je>>>=2,$e-=2;break e}break;case 2:he.mode=Z;break;case 3:Le.msg="invalid block type",he.mode=te}je>>>=2,$e-=2;break;case A:for(je>>>=$e&7,$e-=$e&7;$e<32;){if(we===0)break e;we--,je+=Ne[re++]<<$e,$e+=8}if((je&65535)!==(je>>>16^65535)){Le.msg="invalid stored block lengths",he.mode=te;break}if(he.length=je&65535,je=0,$e=0,he.mode=I,Te===u)break e;case I:he.mode=ee;case ee:if(yt=he.length,yt){if(yt>we&&(yt=we),yt>xe&&(yt=xe),yt===0)break e;t.arraySet(rt,Ne,re,yt,Ue),we-=yt,re+=yt,xe-=yt,Ue+=yt,he.length-=yt;break}he.mode=z;break;case Z:for(;$e<14;){if(we===0)break e;we--,je+=Ne[re++]<<$e,$e+=8}if(he.nlen=(je&31)+257,je>>>=5,$e-=5,he.ndist=(je&31)+1,je>>>=5,$e-=5,he.ncode=(je&15)+4,je>>>=4,$e-=4,he.nlen>286||he.ndist>30){Le.msg="too many length or distance symbols",he.mode=te;break}he.have=0,he.mode=X;case X:for(;he.have<he.ncode;){for(;$e<3;){if(we===0)break e;we--,je+=Ne[re++]<<$e,$e+=8}he.lens[nr[he.have++]]=je&7,je>>>=3,$e-=3}for(;he.have<19;)he.lens[nr[he.have++]]=0;if(he.lencode=he.lendyn,he.lenbits=7,kt={bits:he.lenbits},Ft=i(o,he.lens,0,19,he.lencode,0,he.work,kt),he.lenbits=kt.bits,Ft){Le.msg="invalid code lengths set",he.mode=te;break}he.have=0,he.mode=se;case se:for(;he.have<he.nlen+he.ndist;){for(;Gt=he.lencode[je&(1<<he.lenbits)-1],Wt=Gt>>>24,Dt=Gt>>>16&255,Kt=Gt&65535,!(Wt<=$e);){if(we===0)break e;we--,je+=Ne[re++]<<$e,$e+=8}if(Kt<16)je>>>=Wt,$e-=Wt,he.lens[he.have++]=Kt;else{if(Kt===16){for(Yt=Wt+2;$e<Yt;){if(we===0)break e;we--,je+=Ne[re++]<<$e,$e+=8}if(je>>>=Wt,$e-=Wt,he.have===0){Le.msg="invalid bit length repeat",he.mode=te;break}vt=he.lens[he.have-1],yt=3+(je&3),je>>>=2,$e-=2}else if(Kt===17){for(Yt=Wt+3;$e<Yt;){if(we===0)break e;we--,je+=Ne[re++]<<$e,$e+=8}je>>>=Wt,$e-=Wt,vt=0,yt=3+(je&7),je>>>=3,$e-=3}else{for(Yt=Wt+7;$e<Yt;){if(we===0)break e;we--,je+=Ne[re++]<<$e,$e+=8}je>>>=Wt,$e-=Wt,vt=0,yt=11+(je&127),je>>>=7,$e-=7}if(he.have+yt>he.nlen+he.ndist){Le.msg="invalid bit length repeat",he.mode=te;break}for(;yt--;)he.lens[he.have++]=vt}}if(he.mode===te)break;if(he.lens[256]===0){Le.msg="invalid code -- missing end-of-block",he.mode=te;break}if(he.lenbits=9,kt={bits:he.lenbits},Ft=i(s,he.lens,0,he.nlen,he.lencode,0,he.work,kt),he.lenbits=kt.bits,Ft){Le.msg="invalid literal/lengths set",he.mode=te;break}if(he.distbits=6,he.distcode=he.distdyn,kt={bits:he.distbits},Ft=i(a,he.lens,he.nlen,he.ndist,he.distcode,0,he.work,kt),he.distbits=kt.bits,Ft){Le.msg="invalid distances set",he.mode=te;break}if(he.mode=U,Te===u)break e;case U:he.mode=E;case E:if(we>=6&&xe>=258){Le.next_out=Ue,Le.avail_out=xe,Le.next_in=re,Le.avail_in=we,he.hold=je,he.bits=$e,n(Le,ct),Ue=Le.next_out,rt=Le.output,xe=Le.avail_out,re=Le.next_in,Ne=Le.input,we=Le.avail_in,je=he.hold,$e=he.bits,he.mode===z&&(he.back=-1);break}for(he.back=0;Gt=he.lencode[je&(1<<he.lenbits)-1],Wt=Gt>>>24,Dt=Gt>>>16&255,Kt=Gt&65535,!(Wt<=$e);){if(we===0)break e;we--,je+=Ne[re++]<<$e,$e+=8}if(Dt&&(Dt&240)===0){for(gt=Wt,St=Dt,Qe=Kt;Gt=he.lencode[Qe+((je&(1<<gt+St)-1)>>gt)],Wt=Gt>>>24,Dt=Gt>>>16&255,Kt=Gt&65535,!(gt+Wt<=$e);){if(we===0)break e;we--,je+=Ne[re++]<<$e,$e+=8}je>>>=gt,$e-=gt,he.back+=gt}if(je>>>=Wt,$e-=Wt,he.back+=Wt,he.length=Kt,Dt===0){he.mode=q;break}if(Dt&32){he.back=-1,he.mode=z;break}if(Dt&64){Le.msg="invalid literal/length code",he.mode=te;break}he.extra=Dt&15,he.mode=O;case O:if(he.extra){for(Yt=he.extra;$e<Yt;){if(we===0)break e;we--,je+=Ne[re++]<<$e,$e+=8}he.length+=je&(1<<he.extra)-1,je>>>=he.extra,$e-=he.extra,he.back+=he.extra}he.was=he.length,he.mode=L;case L:for(;Gt=he.distcode[je&(1<<he.distbits)-1],Wt=Gt>>>24,Dt=Gt>>>16&255,Kt=Gt&65535,!(Wt<=$e);){if(we===0)break e;we--,je+=Ne[re++]<<$e,$e+=8}if((Dt&240)===0){for(gt=Wt,St=Dt,Qe=Kt;Gt=he.distcode[Qe+((je&(1<<gt+St)-1)>>gt)],Wt=Gt>>>24,Dt=Gt>>>16&255,Kt=Gt&65535,!(gt+Wt<=$e);){if(we===0)break e;we--,je+=Ne[re++]<<$e,$e+=8}je>>>=gt,$e-=gt,he.back+=gt}if(je>>>=Wt,$e-=Wt,he.back+=Wt,Dt&64){Le.msg="invalid distance code",he.mode=te;break}he.offset=Kt,he.extra=Dt&15,he.mode=G;case G:if(he.extra){for(Yt=he.extra;$e<Yt;){if(we===0)break e;we--,je+=Ne[re++]<<$e,$e+=8}he.offset+=je&(1<<he.extra)-1,je>>>=he.extra,$e-=he.extra,he.back+=he.extra}if(he.offset>he.dmax){Le.msg="invalid distance too far back",he.mode=te;break}he.mode=K;case K:if(xe===0)break e;if(yt=ct-xe,he.offset>yt){if(yt=he.offset-yt,yt>he.whave&&he.sane){Le.msg="invalid distance too far back",he.mode=te;break}yt>he.wnext?(yt-=he.wnext,$t=he.wsize-yt):$t=he.wnext-yt,yt>he.length&&(yt=he.length),bt=he.window}else bt=rt,$t=Ue-he.offset,yt=he.length;yt>xe&&(yt=xe),xe-=yt,he.length-=yt;do rt[Ue++]=bt[$t++];while(--yt);he.length===0&&(he.mode=E);break;case q:if(xe===0)break e;rt[Ue++]=he.length,xe--,he.mode=E;break;case B:if(he.wrap){for(;$e<32;){if(we===0)break e;we--,je|=Ne[re++]<<$e,$e+=8}if(ct-=xe,Le.total_out+=ct,he.total+=ct,ct&&(Le.adler=he.check=he.flags?r(he.check,rt,ct,Ue-ct):e(he.check,rt,ct,Ue-ct)),ct=xe,(he.flags?je:de(je))!==he.check){Le.msg="incorrect data check",he.mode=te;break}je=0,$e=0}he.mode=H;case H:if(he.wrap&&he.flags){for(;$e<32;){if(we===0)break e;we--,je+=Ne[re++]<<$e,$e+=8}if(je!==(he.total&4294967295)){Le.msg="incorrect length check",he.mode=te;break}je=0,$e=0}he.mode=Y;case Y:Ft=f;break e;case te:Ft=x;break e;case oe:return P;case pe:default:return m}return Le.next_out=Ue,Le.avail_out=xe,Le.next_in=re,Le.avail_in=we,he.hold=je,he.bits=$e,(he.wsize||ct!==Le.avail_out&&he.mode<te&&(he.mode<B||Te!==l))&&et(Le,Le.output,Le.next_out,ct-Le.avail_out),ft-=Le.avail_in,ct-=Le.avail_out,Le.total_in+=ft,Le.total_out+=ct,he.total+=ct,he.wrap&&ct&&(Le.adler=he.check=he.flags?r(he.check,rt,ct,Le.next_out-ct):e(he.check,rt,ct,Le.next_out-ct)),Le.data_type=he.bits+(he.last?64:0)+(he.mode===z?128:0)+(he.mode===U||he.mode===I?256:0),(ft===0&&ct===0||Te===l)&&Ft===h&&(Ft=g),Ft}function De(Le){if(!Le||!Le.state)return m;var Te=Le.state;return Te.window&&(Te.window=null),Le.state=null,h}function He(Le,Te){var he;return!Le||!Le.state||(he=Le.state,(he.wrap&2)===0)?m:(he.head=Te,Te.done=!1,h)}function Je(Le,Te){var he=Te.length,Ne,rt,re;return!Le||!Le.state||(Ne=Le.state,Ne.wrap!==0&&Ne.mode!==v)?m:Ne.mode===v&&(rt=1,rt=e(rt,Te,he,0),rt!==Ne.check)?x:(re=et(Le,Te,he,he),re?(Ne.mode=oe,P):(Ne.havedict=1,h))}return ms.inflateReset=fe,ms.inflateReset2=Se,ms.inflateResetKeep=ye,ms.inflateInit=Oe,ms.inflateInit2=qe,ms.inflate=ve,ms.inflateEnd=De,ms.inflateGetHeader=He,ms.inflateSetDictionary=Je,ms.inflateInfo="pako inflate (from Nodeca project)",ms}var u0,WS;function t4(){return WS||(WS=1,u0={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),u0}var h0,GS;function WK(){if(GS)return h0;GS=1;function t(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return h0=t,h0}var KS;function GK(){if(KS)return lu;KS=1;var t=HK(),e=Ec(),r=Q3(),n=t4(),i=p2(),o=e4(),s=WK(),a=Object.prototype.toString;function l(h){if(!(this instanceof l))return new l(h);this.options=e.assign({chunkSize:16384,windowBits:0,to:""},h||{});var f=this.options;f.raw&&f.windowBits>=0&&f.windowBits<16&&(f.windowBits=-f.windowBits,f.windowBits===0&&(f.windowBits=-15)),f.windowBits>=0&&f.windowBits<16&&!(h&&h.windowBits)&&(f.windowBits+=32),f.windowBits>15&&f.windowBits<48&&(f.windowBits&15)===0&&(f.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var p=t.inflateInit2(this.strm,f.windowBits);if(p!==n.Z_OK)throw new Error(i[p]);if(this.header=new s,t.inflateGetHeader(this.strm,this.header),f.dictionary&&(typeof f.dictionary=="string"?f.dictionary=r.string2buf(f.dictionary):a.call(f.dictionary)==="[object ArrayBuffer]"&&(f.dictionary=new Uint8Array(f.dictionary)),f.raw&&(p=t.inflateSetDictionary(this.strm,f.dictionary),p!==n.Z_OK)))throw new Error(i[p])}l.prototype.push=function(h,f){var p=this.strm,m=this.options.chunkSize,x=this.options.dictionary,P,g,F,V,N,R=!1;if(this.ended)return!1;g=f===~~f?f:f===!0?n.Z_FINISH:n.Z_NO_FLUSH,typeof h=="string"?p.input=r.binstring2buf(h):a.call(h)==="[object ArrayBuffer]"?p.input=new Uint8Array(h):p.input=h,p.next_in=0,p.avail_in=p.input.length;do{if(p.avail_out===0&&(p.output=new e.Buf8(m),p.next_out=0,p.avail_out=m),P=t.inflate(p,n.Z_NO_FLUSH),P===n.Z_NEED_DICT&&x&&(P=t.inflateSetDictionary(this.strm,x)),P===n.Z_BUF_ERROR&&R===!0&&(P=n.Z_OK,R=!1),P!==n.Z_STREAM_END&&P!==n.Z_OK)return this.onEnd(P),this.ended=!0,!1;p.next_out&&(p.avail_out===0||P===n.Z_STREAM_END||p.avail_in===0&&(g===n.Z_FINISH||g===n.Z_SYNC_FLUSH))&&(this.options.to==="string"?(F=r.utf8border(p.output,p.next_out),V=p.next_out-F,N=r.buf2string(p.output,F),p.next_out=V,p.avail_out=m-V,V&&e.arraySet(p.output,p.output,F,V,0),this.onData(N)):this.onData(e.shrinkBuf(p.output,p.next_out))),p.avail_in===0&&p.avail_out===0&&(R=!0)}while((p.avail_in>0||p.avail_out===0)&&P!==n.Z_STREAM_END);return P===n.Z_STREAM_END&&(g=n.Z_FINISH),g===n.Z_FINISH?(P=t.inflateEnd(this.strm),this.onEnd(P),this.ended=!0,P===n.Z_OK):(g===n.Z_SYNC_FLUSH&&(this.onEnd(n.Z_OK),p.avail_out=0),!0)},l.prototype.onData=function(h){this.chunks.push(h)},l.prototype.onEnd=function(h){h===n.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=e.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function d(h,f){var p=new l(f);if(p.push(h,!0),p.err)throw p.msg||i[p.err];return p.result}function u(h,f){return f=f||{},f.raw=!0,d(h,f)}return lu.Inflate=l,lu.inflate=d,lu.inflateRaw=u,lu.ungzip=d,lu}var p0,YS;function KK(){if(YS)return p0;YS=1;var t=Ec().assign,e=zK(),r=GK(),n=t4(),i={};return t(i,e,r,n),p0=i,p0}var YK=KK();const yg=BK(YK);var XS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qh=new Uint8Array(256);for(var cy=0;cy<XS.length;cy++)qh[XS.charCodeAt(cy)]=cy;var XK=function(t){var e=t.length*.75,r=t.length,n,i=0,o,s,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var d=new Uint8Array(e);for(n=0;n<r;n+=4)o=qh[t.charCodeAt(n)],s=qh[t.charCodeAt(n+1)],a=qh[t.charCodeAt(n+2)],l=qh[t.charCodeAt(n+3)],d[i++]=o<<2|s>>4,d[i++]=(s&15)<<4|a>>2,d[i++]=(a&3)<<6|l&63;return d},ZK=function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},r4=function(t){return ZK(yg.inflate(XK(t)))},JK=function(t,e,r){for(var n="",i=0,o=e-t.length;i<o;i++)n+=r;return n+t};const QK="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",eY="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",tY="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",rY="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",nY=JSON.parse('"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"'),iY=JSON.parse('"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"'),oY=JSON.parse('"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"'),sY=JSON.parse('"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"'),aY=JSON.parse('"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"'),lY=JSON.parse('"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"'),cY=JSON.parse('"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"'),dY=JSON.parse('"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"'),uY="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",hY="eJxtmNtu20YQhl+F4FULyMGeD7pz3AY1ChtG7NpFA18w1NomIlECSRcxgrx7SVk7+wOdG8H5OJydf2Z2d5gf9cV+t0v9VK/r+6vXsXlOlbHe28paq229qj/t++m62aXZ4J/m8PRb1z9/baZxefK63Z6eXN5dVMvTCh83u277xr/6kLrnl2XNq7TpXnczuZyabdee98/b2VzM/x4/dd/T5qab2pd6PQ2vaVVfvDRD005puE3Lu7eH1HbN9hTjx4/77/X6y5lcnUmjVzHIVVDicVX/1W/SsO36dLMfu6nb9/X6TAoBD+5euvZbn8axXtuZ36dhPJrVQqgPQoh5hev91LWLkIv94W1Ygq9+aX+tZAx2tfz64284/sblN/rqfLP/mqrbt3FKu7G67Nv9cNgPzZQ2H6rz7bb6vLgZq89pTMO/M/xfEqturJpqSM/d7GJIm2oamk3aNcO3av80O5xh3yyKmm1193ZIT02bqovTKjP+MAf++7zsZvZ3276kYyWWXB0z99S18/PbafPHQ71W4fjn/fxnFO+ZvkrT0LVzTr78qB/+nk38bHM9exgP8zr1z9U7jt6840YW5uSJKcZOCaBBnKgm5mU8MVNYyMwWFvO7Ukagkmgg6sDWQ5yFFqjzUrLEaQ3BEmiwNsMSaZS0vgWfOkPHWQowNeTUc0kumnxZvsgPxlGai6VTGUqAVCTQ6QkWnc77DKEiLktSUBJKqHIQZ86d8gCpHYoiEzMsb1ubYy8vW50DChB5ZhGqrijD0EqUIeiaEHIfCg5Kpuu0ApiToaGPSY0uaQsyr65L2oKi1yFt1PLaQ3lzfXTgXodGoJYzglndSLDMPg1sTPJpQJHJigw0QrGERqD9YhyTOgONQDUyuF1zaxuokc/BW2ztXCMrGZ9WMW1oQZHIXWNBkSCfRZEL5BMUiZw6CzVSFCfUSGZFNjIldoKDkonTKQiJIGzWmFd3BizJJ9SINoLDriOfUCOZS+zg+KGD1qGiLNMLxtJD1/ns00ON6EzyUCM6vbxhoBKaqbG3DFQCNiL1iHccBPV0DHhQH/JW8EW90dkyFKGywCJU0WkVSvSGeiSUODWFFD0HYdPQVoiRgfPMA+/nnRgiAyNYSjpWNQcNSMrtFCUH4ZIRpSCWocFCSuhCEY6hoUClc0WC52BJlCYYLQdhN+hygRRRlo5BKRRLS6oihSqh+ZzzRGG1Mo4Iz1LoP0qsxDGFzk0JE42ji0jCPejomJKCuwil4m5CiRMEUMVSzVLDUstSx1Juc0oVWMpqY295qVltmtWmWW2a1aZZbZrVplltmtWmWW2G1WZYbYbVZlhthtVmWG2G1WZYbYbVZlhtltVmWW2W1WZZbZbVZlltltVmWW2W1QYjQCh7E2aAQHeGhCFgPoNoy8KNb2wxBhmGKBxoUZXlLGsLI6AsftEDHV0wIURVbANLcTKlGGBIKPOAxCmhePCKUwFzAmpDFRQvjA9R06Hq8TONvshgKDCuRAZTXigUxjxNFfKRo3CLhnIJBMFRvMZpqpNBMlQJzGT5WFQMVQI/AikPMIhEU1aDjqJvQwmjSHB05cC9jbYwc5UtAHNLhDw41ha+lEqF4JaH3gmB61SYcqInxTDmQK8v08vjqv4zDf1N0w3Lf4A8/vwPpfK11w==";var pY={Courier:rY,"Courier-Bold":QK,"Courier-Oblique":tY,"Courier-BoldOblique":eY,Helvetica:sY,"Helvetica-Bold":nY,"Helvetica-Oblique":oY,"Helvetica-BoldOblique":iY,"Times-Roman":dY,"Times-Bold":aY,"Times-Italic":cY,"Times-BoldItalic":lY,Symbol:uY,ZapfDingbats:hY},Np;(function(t){t.Courier="Courier",t.CourierBold="Courier-Bold",t.CourierOblique="Courier-Oblique",t.CourierBoldOblique="Courier-BoldOblique",t.Helvetica="Helvetica",t.HelveticaBold="Helvetica-Bold",t.HelveticaOblique="Helvetica-Oblique",t.HelveticaBoldOblique="Helvetica-BoldOblique",t.TimesRoman="Times-Roman",t.TimesRomanBold="Times-Bold",t.TimesRomanItalic="Times-Italic",t.TimesRomanBoldItalic="Times-BoldItalic",t.Symbol="Symbol",t.ZapfDingbats="ZapfDingbats"})(Np||(Np={}));var ZS={},fY=function(){function t(){var e=this;this.getWidthOfGlyph=function(r){return e.CharWidths[r]},this.getXAxisKerningForPair=function(r,n){return(e.KernPairXAmounts[r]||{})[n]}}return t.load=function(e){var r=ZS[e];if(r)return r;var n=r4(pY[e]),i=Object.assign(new t,JSON.parse(n));return i.CharWidths=i.CharMetrics.reduce(function(o,s){return o[s.N]=s.WX,o},{}),i.KernPairXAmounts=i.KernPairs.reduce(function(o,s){var a=s[0],l=s[1],d=s[2];return o[a]||(o[a]={}),o[a][l]=d,o},{}),ZS[e]=i,i},t}();const yY="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";var mY=r4(yY),f0=JSON.parse(mY),y0=function(){function t(e,r){var n=this;this.canEncodeUnicodeCodePoint=function(i){return i in n.unicodeMappings},this.encodeUnicodeCodePoint=function(i){var o=n.unicodeMappings[i];if(!o){var s=String.fromCharCode(i),a="0x"+JK(i.toString(16),4,"0"),l=n.name+' cannot encode "'+s+'" ('+a+")";throw new Error(l)}return{code:o[0],name:o[1]}},this.name=e,this.supportedCodePoints=Object.keys(r).map(Number).sort(function(i,o){return i-o}),this.unicodeMappings=r}return t}(),dy={Symbol:new y0("Symbol",f0.symbol),ZapfDingbats:new y0("ZapfDingbats",f0.zapfdingbats),WinAnsi:new y0("WinAnsi",f0.win1252)},mg=function(t){return Object.keys(t).map(function(e){return t[e]})},gY=mg(Np),JS=function(t){return gY.includes(t)},uy=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height},wi=function(t){return"`"+t+"`"},vY=function(t){return"'"+t+"'"},QS=function(t){var e=typeof t;return e==="string"?vY(t):e==="undefined"?wi(t):t},bY=function(t,e,r){for(var n=new Array(r.length),i=0,o=r.length;i<o;i++){var s=r[i];n[i]=QS(s)}var a=n.join(" or ");return wi(e)+" must be one of "+a+", but was actually "+QS(t)},ic=function(t,e,r){Array.isArray(r)||(r=mg(r));for(var n=0,i=r.length;n<i;n++)if(t===r[n])return;throw new TypeError(bY(t,e,r))},gs=function(t,e,r){Array.isArray(r)||(r=mg(r)),ic(t,e,r.concat(void 0))},PY=function(t,e,r){Array.isArray(r)||(r=mg(r));for(var n=0,i=t.length;n<i;n++)ic(t[n],e,r)},xY=function(t){return t===null?"null":t===void 0?"undefined":typeof t=="string"?"string":isNaN(t)?"NaN":typeof t=="number"?"number":typeof t=="boolean"?"boolean":typeof t=="symbol"?"symbol":typeof t=="bigint"?"bigint":t.constructor&&t.constructor.name?t.constructor.name:t.name?t.name:t.constructor?String(t.constructor):String(t)},SY=function(t,e){return e==="null"?t===null:e==="undefined"?t===void 0:e==="string"?typeof t=="string":e==="number"?typeof t=="number"&&!isNaN(t):e==="boolean"?typeof t=="boolean":e==="symbol"?typeof t=="symbol":e==="bigint"?typeof t=="bigint":e===Date?t instanceof Date:e===Array?t instanceof Array:e===Uint8Array?t instanceof Uint8Array:e===ArrayBuffer?t instanceof ArrayBuffer:e===Function?t instanceof Function:t instanceof e[0]},wY=function(t,e,r){for(var n=new Array(r.length),i=0,o=r.length;i<o;i++){var s=r[i];s==="null"&&(n[i]=wi("null")),s==="undefined"&&(n[i]=wi("undefined")),s==="string"?n[i]=wi("string"):s==="number"?n[i]=wi("number"):s==="boolean"?n[i]=wi("boolean"):s==="symbol"?n[i]=wi("symbol"):s==="bigint"?n[i]=wi("bigint"):s===Array?n[i]=wi("Array"):s===Uint8Array?n[i]=wi("Uint8Array"):s===ArrayBuffer?n[i]=wi("ArrayBuffer"):n[i]=wi(s[1])}var a=n.join(" or ");return wi(e)+" must be of type "+a+", but was actually of type "+wi(xY(t))},dt=function(t,e,r){for(var n=0,i=r.length;n<i;n++)if(SY(t,r[n]))return;throw new TypeError(wY(t,e,r))},qt=function(t,e,r){dt(t,e,r.concat("undefined"))},n4=function(t,e,r){for(var n=0,i=t.length;n<i;n++)dt(t[n],e,r)},ts=function(t,e,r,n){if(dt(t,e,["number"]),dt(r,"min",["number"]),dt(n,"max",["number"]),n=Math.max(r,n),t<r||t>n)throw new Error(wi(e)+" must be at least "+r+" and at most "+n+", but was actually "+t)},qs=function(t,e,r,n){dt(t,e,["number","undefined"]),typeof t=="number"&&ts(t,e,r,n)},i4=function(t,e,r){if(dt(t,e,["number"]),t%r!==0)throw new Error(wi(e)+" must be a multiple of "+r+", but was actually "+t)},CY=function(t,e){if(!Number.isInteger(t))throw new Error(wi(e)+" must be an integer, but was actually "+t)},gg=function(t,e){if(![1,0].includes(Math.sign(t)))throw new Error(wi(e)+" must be a positive number or 0, but was actually "+t)},Ir=new Uint16Array(256);for(var hy=0;hy<256;hy++)Ir[hy]=hy;Ir[22]=Er("");Ir[24]=Er("˘");Ir[25]=Er("ˇ");Ir[26]=Er("ˆ");Ir[27]=Er("˙");Ir[28]=Er("˝");Ir[29]=Er("˛");Ir[30]=Er("˚");Ir[31]=Er("˜");Ir[127]=Er("�");Ir[128]=Er("•");Ir[129]=Er("†");Ir[130]=Er("‡");Ir[131]=Er("…");Ir[132]=Er("—");Ir[133]=Er("–");Ir[134]=Er("ƒ");Ir[135]=Er("⁄");Ir[136]=Er("‹");Ir[137]=Er("›");Ir[138]=Er("−");Ir[139]=Er("‰");Ir[140]=Er("„");Ir[141]=Er("“");Ir[142]=Er("”");Ir[143]=Er("‘");Ir[144]=Er("’");Ir[145]=Er("‚");Ir[146]=Er("™");Ir[147]=Er("ﬁ");Ir[148]=Er("ﬂ");Ir[149]=Er("Ł");Ir[150]=Er("Œ");Ir[151]=Er("Š");Ir[152]=Er("Ÿ");Ir[153]=Er("Ž");Ir[154]=Er("ı");Ir[155]=Er("ł");Ir[156]=Er("œ");Ir[157]=Er("š");Ir[158]=Er("ž");Ir[159]=Er("�");Ir[160]=Er("€");Ir[173]=Er("�");var o4=function(t){for(var e=new Array(t.length),r=0,n=t.length;r<n;r++)e[r]=Ir[t[r]];return String.fromCodePoint.apply(String,e)},rl=function(){function t(e){this.populate=e,this.value=void 0}return t.prototype.getValue=function(){return this.value},t.prototype.access=function(){return this.value||(this.value=this.populate()),this.value},t.prototype.invalidate=function(){this.value=void 0},t.populatedBy=function(e){return new t(e)},t}(),xs=function(t){Ht(e,t);function e(r,n){var i=this,o="Method "+r+"."+n+"() not implemented";return i=t.call(this,o)||this,i}return e}(Error),f2=function(t){Ht(e,t);function e(r){var n=this,i="Cannot construct "+r+" - it has a private constructor";return n=t.call(this,i)||this,n}return e}(Error),Pm=function(t){Ht(e,t);function e(r,n){var i=this,o=function(l){var d,u;return(d=l?.name)!==null&&d!==void 0?d:(u=l?.constructor)===null||u===void 0?void 0:u.name},s=Array.isArray(r)?r.map(o):[o(r)],a="Expected instance of "+s.join(" or ")+", "+("but got instance of "+(n&&o(n)));return i=t.call(this,a)||this,i}return e}(Error),_Y=function(t){Ht(e,t);function e(r){var n=this,i=r+" stream encoding not supported";return n=t.call(this,i)||this,n}return e}(Error),y2=function(t){Ht(e,t);function e(r,n){var i=this,o="Cannot call "+r+"."+n+"() more than once";return i=t.call(this,o)||this,i}return e}(Error);(function(t){Ht(e,t);function e(r){var n=this,i="Missing catalog (ref="+r+")";return n=t.call(this,i)||this,n}return e})(Error);var AY=function(t){Ht(e,t);function e(){var r=this,n="Can't embed page with missing Contents";return r=t.call(this,n)||this,r}return e}(Error),kY=function(t){Ht(e,t);function e(r){var n,i,o,s=this,a=(o=(i=(n=r?.contructor)===null||n===void 0?void 0:n.name)!==null&&i!==void 0?i:r?.name)!==null&&o!==void 0?o:r,l="Unrecognized stream type: "+a;return s=t.call(this,l)||this,s}return e}(Error),EY=function(t){Ht(e,t);function e(){var r=this,n="Found mismatched contexts while embedding pages. All pages in the array passed to `PDFDocument.embedPages()` must be from the same document.";return r=t.call(this,n)||this,r}return e}(Error),TY=function(t){Ht(e,t);function e(r){var n=this,i="Attempted to convert PDFArray with "+r+" elements to rectangle, but must have exactly 4 elements.";return n=t.call(this,i)||this,n}return e}(Error),s4=function(t){Ht(e,t);function e(r){var n=this,i='Attempted to convert "'+r+'" to a date, but it does not match the PDF date string format.';return n=t.call(this,i)||this,n}return e}(Error),ew=function(t){Ht(e,t);function e(r,n){var i=this,o="Invalid targetIndex specified: targetIndex="+r+" must be less than Count="+n;return i=t.call(this,o)||this,i}return e}(Error),tw=function(t){Ht(e,t);function e(r,n){var i=this,o="Failed to "+n+" at targetIndex="+r+" due to corrupt page tree: It is likely that one or more 'Count' entries are invalid";return i=t.call(this,o)||this,i}return e}(Error),xm=function(t){Ht(e,t);function e(r,n,i){var o=this,s="index should be at least "+n+" and at most "+i+", but was actually "+r;return o=t.call(this,s)||this,o}return e}(Error),m2=function(t){Ht(e,t);function e(){var r=this,n="Attempted to set invalid field value";return r=t.call(this,n)||this,r}return e}(Error),IY=function(t){Ht(e,t);function e(){var r=this,n="Attempted to select multiple values for single-select field";return r=t.call(this,n)||this,r}return e}(Error),NY=function(t){Ht(e,t);function e(r){var n=this,i="No /DA (default appearance) entry found for field: "+r;return n=t.call(this,i)||this,n}return e}(Error),RY=function(t){Ht(e,t);function e(r){var n=this,i="No Tf operator found for DA of field: "+r;return n=t.call(this,i)||this,n}return e}(Error),rw=function(t){Ht(e,t);function e(r,n){var i=this,o="Failed to parse number "+("(line:"+r.line+" col:"+r.column+" offset="+r.offset+'): "'+n+'"');return i=t.call(this,o)||this,i}return e}(Error),Tc=function(t){Ht(e,t);function e(r,n){var i=this,o="Failed to parse PDF document "+("(line:"+r.line+" col:"+r.column+" offset="+r.offset+"): "+n);return i=t.call(this,o)||this,i}return e}(Error),DY=function(t){Ht(e,t);function e(r,n,i){var o=this,s="Expected next byte to be "+n+" but it was actually "+i;return o=t.call(this,r,s)||this,o}return e}(Tc),LY=function(t){Ht(e,t);function e(r,n){var i=this,o="Failed to parse PDF object starting with the following byte: "+n;return i=t.call(this,r,o)||this,i}return e}(Tc),$Y=function(t){Ht(e,t);function e(r){var n=this,i="Failed to parse invalid PDF object";return n=t.call(this,r,i)||this,n}return e}(Tc),FY=function(t){Ht(e,t);function e(r){var n=this,i="Failed to parse PDF stream";return n=t.call(this,r,i)||this,n}return e}(Tc),MY=function(t){Ht(e,t);function e(r){var n=this,i="Failed to parse PDF literal string due to unbalanced parenthesis";return n=t.call(this,r,i)||this,n}return e}(Tc),OY=function(t){Ht(e,t);function e(r){var n=this,i="Parser stalled";return n=t.call(this,r,i)||this,n}return e}(Tc),BY=function(t){Ht(e,t);function e(r){var n=this,i="No PDF header found";return n=t.call(this,r,i)||this,n}return e}(Tc),jY=function(t){Ht(e,t);function e(r,n){var i=this,o="Did not find expected keyword '"+q3(n)+"'";return i=t.call(this,r,o)||this,i}return e}(Tc),A1;(function(t){t[t.Null=0]="Null",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.Newline=10]="Newline",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.ExclamationPoint=33]="ExclamationPoint",t[t.Hash=35]="Hash",t[t.Percent=37]="Percent",t[t.LeftParen=40]="LeftParen",t[t.RightParen=41]="RightParen",t[t.Plus=43]="Plus",t[t.Minus=45]="Minus",t[t.Dash=45]="Dash",t[t.Period=46]="Period",t[t.ForwardSlash=47]="ForwardSlash",t[t.Zero=48]="Zero",t[t.One=49]="One",t[t.Two=50]="Two",t[t.Three=51]="Three",t[t.Four=52]="Four",t[t.Five=53]="Five",t[t.Six=54]="Six",t[t.Seven=55]="Seven",t[t.Eight=56]="Eight",t[t.Nine=57]="Nine",t[t.LessThan=60]="LessThan",t[t.GreaterThan=62]="GreaterThan",t[t.A=65]="A",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.O=79]="O",t[t.P=80]="P",t[t.R=82]="R",t[t.LeftSquareBracket=91]="LeftSquareBracket",t[t.BackSlash=92]="BackSlash",t[t.RightSquareBracket=93]="RightSquareBracket",t[t.a=97]="a",t[t.b=98]="b",t[t.d=100]="d",t[t.e=101]="e",t[t.f=102]="f",t[t.i=105]="i",t[t.j=106]="j",t[t.l=108]="l",t[t.m=109]="m",t[t.n=110]="n",t[t.o=111]="o",t[t.r=114]="r",t[t.s=115]="s",t[t.t=116]="t",t[t.u=117]="u",t[t.x=120]="x",t[t.LeftCurly=123]="LeftCurly",t[t.RightCurly=125]="RightCurly",t[t.Tilde=126]="Tilde"})(A1||(A1={}));const Xe=A1;var vg=function(){function t(e,r){this.major=String(e),this.minor=String(r)}return t.prototype.toString=function(){var e=tl(129);return"%PDF-"+this.major+"."+this.minor+`
%`+e+e+e+e},t.prototype.sizeInBytes=function(){return 12+this.major.length+this.minor.length},t.prototype.copyBytesInto=function(e,r){var n=r;return e[r++]=Xe.Percent,e[r++]=Xe.P,e[r++]=Xe.D,e[r++]=Xe.F,e[r++]=Xe.Dash,r+=Gi(this.major,e,r),e[r++]=Xe.Period,r+=Gi(this.minor,e,r),e[r++]=Xe.Newline,e[r++]=Xe.Percent,e[r++]=129,e[r++]=129,e[r++]=129,e[r++]=129,r-n},t.forVersion=function(e,r){return new t(e,r)},t}(),wo=function(){function t(){}return t.prototype.clone=function(e){throw new xs(this.constructor.name,"clone")},t.prototype.toString=function(){throw new xs(this.constructor.name,"toString")},t.prototype.sizeInBytes=function(){throw new xs(this.constructor.name,"sizeInBytes")},t.prototype.copyBytesInto=function(e,r){throw new xs(this.constructor.name,"copyBytesInto")},t}(),Cr=function(t){Ht(e,t);function e(r){var n=t.call(this)||this;return n.numberValue=r,n.stringValue=OK(r),n}return e.prototype.asNumber=function(){return this.numberValue},e.prototype.value=function(){return this.numberValue},e.prototype.clone=function(){return e.of(this.numberValue)},e.prototype.toString=function(){return this.stringValue},e.prototype.sizeInBytes=function(){return this.stringValue.length},e.prototype.copyBytesInto=function(r,n){return n+=Gi(this.stringValue,r,n),this.stringValue.length},e.of=function(r){return new e(r)},e}(wo),pn=function(t){Ht(e,t);function e(r){var n=t.call(this)||this;return n.array=[],n.context=r,n}return e.prototype.size=function(){return this.array.length},e.prototype.push=function(r){this.array.push(r)},e.prototype.insert=function(r,n){this.array.splice(r,0,n)},e.prototype.indexOf=function(r){var n=this.array.indexOf(r);return n===-1?void 0:n},e.prototype.remove=function(r){this.array.splice(r,1)},e.prototype.set=function(r,n){this.array[r]=n},e.prototype.get=function(r){return this.array[r]},e.prototype.lookupMaybe=function(r){for(var n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return(n=this.context).lookupMaybe.apply(n,sn([this.get(r)],i))},e.prototype.lookup=function(r){for(var n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return(n=this.context).lookup.apply(n,sn([this.get(r)],i))},e.prototype.asRectangle=function(){if(this.size()!==4)throw new TY(this.size());var r=this.lookup(0,Cr).asNumber(),n=this.lookup(1,Cr).asNumber(),i=this.lookup(2,Cr).asNumber(),o=this.lookup(3,Cr).asNumber(),s=r,a=n,l=i-r,d=o-n;return{x:s,y:a,width:l,height:d}},e.prototype.asArray=function(){return this.array.slice()},e.prototype.clone=function(r){for(var n=e.withContext(r||this.context),i=0,o=this.size();i<o;i++)n.push(this.array[i]);return n},e.prototype.toString=function(){for(var r="[ ",n=0,i=this.size();n<i;n++)r+=this.get(n).toString(),r+=" ";return r+="]",r},e.prototype.sizeInBytes=function(){for(var r=3,n=0,i=this.size();n<i;n++)r+=this.get(n).sizeInBytes()+1;return r},e.prototype.copyBytesInto=function(r,n){var i=n;r[n++]=Xe.LeftSquareBracket,r[n++]=Xe.Space;for(var o=0,s=this.size();o<s;o++)n+=this.get(o).copyBytesInto(r,n),r[n++]=Xe.Space;return r[n++]=Xe.RightSquareBracket,n-i},e.prototype.scalePDFNumbers=function(r,n){for(var i=0,o=this.size();i<o;i++){var s=this.lookup(i);if(s instanceof Cr){var a=i%2===0?r:n;this.set(i,Cr.of(s.asNumber()*a))}}},e.withContext=function(r){return new e(r)},e}(wo),m0={},Rp=function(t){Ht(e,t);function e(r,n){var i=this;if(r!==m0)throw new f2("PDFBool");return i=t.call(this)||this,i.value=n,i}return e.prototype.asBoolean=function(){return this.value},e.prototype.clone=function(){return this},e.prototype.toString=function(){return String(this.value)},e.prototype.sizeInBytes=function(){return this.value?4:5},e.prototype.copyBytesInto=function(r,n){return this.value?(r[n++]=Xe.t,r[n++]=Xe.r,r[n++]=Xe.u,r[n++]=Xe.e,4):(r[n++]=Xe.f,r[n++]=Xe.a,r[n++]=Xe.l,r[n++]=Xe.s,r[n++]=Xe.e,5)},e.True=new e(m0,!0),e.False=new e(m0,!1),e}(wo),As=new Uint8Array(256);As[Xe.LeftParen]=1;As[Xe.RightParen]=1;As[Xe.LessThan]=1;As[Xe.GreaterThan]=1;As[Xe.LeftSquareBracket]=1;As[Xe.RightSquareBracket]=1;As[Xe.LeftCurly]=1;As[Xe.RightCurly]=1;As[Xe.ForwardSlash]=1;As[Xe.Percent]=1;var fl=new Uint8Array(256);fl[Xe.Null]=1;fl[Xe.Tab]=1;fl[Xe.Newline]=1;fl[Xe.FormFeed]=1;fl[Xe.CarriageReturn]=1;fl[Xe.Space]=1;var g2=new Uint8Array(256);for(var Th=0,VY=256;Th<VY;Th++)g2[Th]=fl[Th]||As[Th]?1:0;g2[Xe.Hash]=1;var zY=function(t){return t.replace(/#([\dABCDEF]{2})/g,function(e,r){return vK(r)})},UY=function(t){return t>=Xe.ExclamationPoint&&t<=Xe.Tilde&&!g2[t]},nw={},iw=new Map,Ke=function(t){Ht(e,t);function e(r,n){var i=this;if(r!==nw)throw new f2("PDFName");i=t.call(this)||this;for(var o="/",s=0,a=n.length;s<a;s++){var l=n[s],d=Er(l);o+=UY(d)?l:"#"+fg(d)}return i.encodedName=o,i}return e.prototype.asBytes=function(){for(var r=[],n="",i=!1,o=function(h){h!==void 0&&r.push(h),i=!1},s=1,a=this.encodedName.length;s<a;s++){var l=this.encodedName[s],d=Er(l),u=this.encodedName[s+1];i?d>=Xe.Zero&&d<=Xe.Nine||d>=Xe.a&&d<=Xe.f||d>=Xe.A&&d<=Xe.F?(n+=l,(n.length===2||!(u>="0"&&u<="9"||u>="a"&&u<="f"||u>="A"&&u<="F"))&&(o(parseInt(n,16)),n="")):o(d):d===Xe.Hash?i=!0:o(d)}return new Uint8Array(r)},e.prototype.decodeText=function(){var r=this.asBytes();return String.fromCharCode.apply(String,Array.from(r))},e.prototype.asString=function(){return this.encodedName},e.prototype.value=function(){return this.encodedName},e.prototype.clone=function(){return this},e.prototype.toString=function(){return this.encodedName},e.prototype.sizeInBytes=function(){return this.encodedName.length},e.prototype.copyBytesInto=function(r,n){return n+=Gi(this.encodedName,r,n),this.encodedName.length},e.of=function(r){var n=zY(r),i=iw.get(n);return i||(i=new e(nw,n),iw.set(n,i)),i},e.Length=e.of("Length"),e.FlateDecode=e.of("FlateDecode"),e.Resources=e.of("Resources"),e.Font=e.of("Font"),e.XObject=e.of("XObject"),e.ExtGState=e.of("ExtGState"),e.Contents=e.of("Contents"),e.Type=e.of("Type"),e.Parent=e.of("Parent"),e.MediaBox=e.of("MediaBox"),e.Page=e.of("Page"),e.Annots=e.of("Annots"),e.TrimBox=e.of("TrimBox"),e.ArtBox=e.of("ArtBox"),e.BleedBox=e.of("BleedBox"),e.CropBox=e.of("CropBox"),e.Rotate=e.of("Rotate"),e.Title=e.of("Title"),e.Author=e.of("Author"),e.Subject=e.of("Subject"),e.Creator=e.of("Creator"),e.Keywords=e.of("Keywords"),e.Producer=e.of("Producer"),e.CreationDate=e.of("CreationDate"),e.ModDate=e.of("ModDate"),e}(wo),qY=function(t){Ht(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.asNull=function(){return null},e.prototype.clone=function(){return this},e.prototype.toString=function(){return"null"},e.prototype.sizeInBytes=function(){return 4},e.prototype.copyBytesInto=function(r,n){return r[n++]=Xe.n,r[n++]=Xe.u,r[n++]=Xe.l,r[n++]=Xe.l,4},e}(wo);const Mo=new qY;var Or=function(t){Ht(e,t);function e(r,n){var i=t.call(this)||this;return i.dict=r,i.context=n,i}return e.prototype.keys=function(){return Array.from(this.dict.keys())},e.prototype.values=function(){return Array.from(this.dict.values())},e.prototype.entries=function(){return Array.from(this.dict.entries())},e.prototype.set=function(r,n){this.dict.set(r,n)},e.prototype.get=function(r,n){n===void 0&&(n=!1);var i=this.dict.get(r);if(!(i===Mo&&!n))return i},e.prototype.has=function(r){var n=this.dict.get(r);return n!==void 0&&n!==Mo},e.prototype.lookupMaybe=function(r){for(var n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var s=i.includes(Mo),a=(n=this.context).lookupMaybe.apply(n,sn([this.get(r,s)],i));if(!(a===Mo&&!s))return a},e.prototype.lookup=function(r){for(var n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var s=i.includes(Mo),a=(n=this.context).lookup.apply(n,sn([this.get(r,s)],i));if(!(a===Mo&&!s))return a},e.prototype.delete=function(r){return this.dict.delete(r)},e.prototype.asMap=function(){return new Map(this.dict)},e.prototype.uniqueKey=function(r){r===void 0&&(r="");for(var n=this.keys(),i=Ke.of(this.context.addRandomSuffix(r,10));n.includes(i);)i=Ke.of(this.context.addRandomSuffix(r,10));return i},e.prototype.clone=function(r){for(var n=e.withContext(r||this.context),i=this.entries(),o=0,s=i.length;o<s;o++){var a=i[o],l=a[0],d=a[1];n.set(l,d)}return n},e.prototype.toString=function(){for(var r=`<<
`,n=this.entries(),i=0,o=n.length;i<o;i++){var s=n[i],a=s[0],l=s[1];r+=a.toString()+" "+l.toString()+`
`}return r+=">>",r},e.prototype.sizeInBytes=function(){for(var r=5,n=this.entries(),i=0,o=n.length;i<o;i++){var s=n[i],a=s[0],l=s[1];r+=a.sizeInBytes()+l.sizeInBytes()+2}return r},e.prototype.copyBytesInto=function(r,n){var i=n;r[n++]=Xe.LessThan,r[n++]=Xe.LessThan,r[n++]=Xe.Newline;for(var o=this.entries(),s=0,a=o.length;s<a;s++){var l=o[s],d=l[0],u=l[1];n+=d.copyBytesInto(r,n),r[n++]=Xe.Space,n+=u.copyBytesInto(r,n),r[n++]=Xe.Newline}return r[n++]=Xe.GreaterThan,r[n++]=Xe.GreaterThan,n-i},e.withContext=function(r){return new e(new Map,r)},e.fromMapWithContext=function(r,n){return new e(r,n)},e}(wo),ns=function(t){Ht(e,t);function e(r){var n=t.call(this)||this;return n.dict=r,n}return e.prototype.clone=function(r){throw new xs(this.constructor.name,"clone")},e.prototype.getContentsString=function(){throw new xs(this.constructor.name,"getContentsString")},e.prototype.getContents=function(){throw new xs(this.constructor.name,"getContents")},e.prototype.getContentsSize=function(){throw new xs(this.constructor.name,"getContentsSize")},e.prototype.updateDict=function(){var r=this.getContentsSize();this.dict.set(Ke.Length,Cr.of(r))},e.prototype.sizeInBytes=function(){return this.updateDict(),this.dict.sizeInBytes()+this.getContentsSize()+18},e.prototype.toString=function(){this.updateDict();var r=this.dict.toString();return r+=`
stream
`,r+=this.getContentsString(),r+=`
endstream`,r},e.prototype.copyBytesInto=function(r,n){this.updateDict();var i=n;n+=this.dict.copyBytesInto(r,n),r[n++]=Xe.Newline,r[n++]=Xe.s,r[n++]=Xe.t,r[n++]=Xe.r,r[n++]=Xe.e,r[n++]=Xe.a,r[n++]=Xe.m,r[n++]=Xe.Newline;for(var o=this.getContents(),s=0,a=o.length;s<a;s++)r[n++]=o[s];return r[n++]=Xe.Newline,r[n++]=Xe.e,r[n++]=Xe.n,r[n++]=Xe.d,r[n++]=Xe.s,r[n++]=Xe.t,r[n++]=Xe.r,r[n++]=Xe.e,r[n++]=Xe.a,r[n++]=Xe.m,n-i},e}(wo),Dp=function(t){Ht(e,t);function e(r,n){var i=t.call(this,r)||this;return i.contents=n,i}return e.prototype.asUint8Array=function(){return this.contents.slice()},e.prototype.clone=function(r){return e.of(this.dict.clone(r),this.contents.slice())},e.prototype.getContentsString=function(){return q3(this.contents)},e.prototype.getContents=function(){return this.contents},e.prototype.getContentsSize=function(){return this.contents.length},e.of=function(r,n){return new e(r,n)},e}(ns),ow={},sw=new Map,bn=function(t){Ht(e,t);function e(r,n,i){var o=this;if(r!==ow)throw new f2("PDFRef");return o=t.call(this)||this,o.objectNumber=n,o.generationNumber=i,o.tag=n+" "+i+" R",o}return e.prototype.clone=function(){return this},e.prototype.toString=function(){return this.tag},e.prototype.sizeInBytes=function(){return this.tag.length},e.prototype.copyBytesInto=function(r,n){return n+=Gi(this.tag,r,n),this.tag.length},e.of=function(r,n){n===void 0&&(n=0);var i=r+" "+n+" R",o=sw.get(i);return o||(o=new e(ow,r,n),sw.set(i,o)),o},e}(wo),nn=function(){function t(e,r){this.name=e,this.args=r||[]}return t.prototype.clone=function(e){for(var r=new Array(this.args.length),n=0,i=r.length;n<i;n++){var o=this.args[n];r[n]=o instanceof wo?o.clone(e):o}return t.of(this.name,r)},t.prototype.toString=function(){for(var e="",r=0,n=this.args.length;r<n;r++)e+=String(this.args[r])+" ";return e+=this.name,e},t.prototype.sizeInBytes=function(){for(var e=0,r=0,n=this.args.length;r<n;r++){var i=this.args[r];e+=(i instanceof wo?i.sizeInBytes():i.length)+1}return e+=this.name.length,e},t.prototype.copyBytesInto=function(e,r){for(var n=r,i=0,o=this.args.length;i<o;i++){var s=this.args[i];s instanceof wo?r+=s.copyBytesInto(e,r):r+=Gi(s,e,r),e[r++]=Xe.Space}return r+=Gi(this.name,e,r),r-n},t.of=function(e,r){return new t(e,r)},t}(),k1;(function(t){t.NonStrokingColor="sc",t.NonStrokingColorN="scn",t.NonStrokingColorRgb="rg",t.NonStrokingColorGray="g",t.NonStrokingColorCmyk="k",t.NonStrokingColorspace="cs",t.StrokingColor="SC",t.StrokingColorN="SCN",t.StrokingColorRgb="RG",t.StrokingColorGray="G",t.StrokingColorCmyk="K",t.StrokingColorspace="CS",t.BeginMarkedContentSequence="BDC",t.BeginMarkedContent="BMC",t.EndMarkedContent="EMC",t.MarkedContentPointWithProps="DP",t.MarkedContentPoint="MP",t.DrawObject="Do",t.ConcatTransformationMatrix="cm",t.PopGraphicsState="Q",t.PushGraphicsState="q",t.SetFlatness="i",t.SetGraphicsStateParams="gs",t.SetLineCapStyle="J",t.SetLineDashPattern="d",t.SetLineJoinStyle="j",t.SetLineMiterLimit="M",t.SetLineWidth="w",t.SetTextMatrix="Tm",t.SetRenderingIntent="ri",t.AppendRectangle="re",t.BeginInlineImage="BI",t.BeginInlineImageData="ID",t.EndInlineImage="EI",t.ClipEvenOdd="W*",t.ClipNonZero="W",t.CloseAndStroke="s",t.CloseFillEvenOddAndStroke="b*",t.CloseFillNonZeroAndStroke="b",t.ClosePath="h",t.AppendBezierCurve="c",t.CurveToReplicateFinalPoint="y",t.CurveToReplicateInitialPoint="v",t.EndPath="n",t.FillEvenOddAndStroke="B*",t.FillEvenOdd="f*",t.FillNonZeroAndStroke="B",t.FillNonZero="f",t.LegacyFillNonZero="F",t.LineTo="l",t.MoveTo="m",t.ShadingFill="sh",t.StrokePath="S",t.BeginText="BT",t.EndText="ET",t.MoveText="Td",t.MoveTextSetLeading="TD",t.NextLine="T*",t.SetCharacterSpacing="Tc",t.SetFontAndSize="Tf",t.SetTextHorizontalScaling="Tz",t.SetTextLineHeight="TL",t.SetTextRenderingMode="Tr",t.SetTextRise="Ts",t.SetWordSpacing="Tw",t.ShowText="Tj",t.ShowTextAdjusted="TJ",t.ShowTextLine="'",t.ShowTextLineAndSpace='"',t.Type3D0="d0",t.Type3D1="d1",t.BeginCompatibilitySection="BX",t.EndCompatibilitySection="EX"})(k1||(k1={}));const an=k1;var v2=function(t){Ht(e,t);function e(r,n){var i=t.call(this,r)||this;return i.computeContents=function(){var o=i.getUnencodedContents();return i.encode?yg.deflate(o):o},i.encode=n,n&&r.set(Ke.of("Filter"),Ke.of("FlateDecode")),i.contentsCache=rl.populatedBy(i.computeContents),i}return e.prototype.getContents=function(){return this.contentsCache.access()},e.prototype.getContentsSize=function(){return this.contentsCache.access().length},e.prototype.getUnencodedContents=function(){throw new xs(this.constructor.name,"getUnencodedContents")},e}(ns),cp=function(t){Ht(e,t);function e(r,n,i){i===void 0&&(i=!0);var o=t.call(this,r,i)||this;return o.operators=n,o}return e.prototype.push=function(){for(var r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];(r=this.operators).push.apply(r,n)},e.prototype.clone=function(r){for(var n=new Array(this.operators.length),i=0,o=this.operators.length;i<o;i++)n[i]=this.operators[i].clone(r);var s=this,a=s.dict,l=s.encode;return e.of(a.clone(r),n,l)},e.prototype.getContentsString=function(){for(var r="",n=0,i=this.operators.length;n<i;n++)r+=this.operators[n]+`
`;return r},e.prototype.getUnencodedContents=function(){for(var r=new Uint8Array(this.getUnencodedContentsSize()),n=0,i=0,o=this.operators.length;i<o;i++)n+=this.operators[i].copyBytesInto(r,n),r[n++]=Xe.Newline;return r},e.prototype.getUnencodedContentsSize=function(){for(var r=0,n=0,i=this.operators.length;n<i;n++)r+=this.operators[n].sizeInBytes()+1;return r},e.of=function(r,n,i){return i===void 0&&(i=!0),new e(r,n,i)},e}(v2),HY=function(){function t(e){this.seed=e}return t.prototype.nextInt=function(){var e=Math.sin(this.seed++)*1e4;return e-Math.floor(e)},t.withSeed=function(e){return new t(e)},t}(),WY=function(t,e){var r=t[0],n=e[0];return r.objectNumber-n.objectNumber},E1=function(){function t(){this.largestObjectNumber=0,this.header=vg.forVersion(1,7),this.trailerInfo={},this.indirectObjects=new Map,this.rng=HY.withSeed(1)}return t.prototype.assign=function(e,r){this.indirectObjects.set(e,r),e.objectNumber>this.largestObjectNumber&&(this.largestObjectNumber=e.objectNumber)},t.prototype.nextRef=function(){return this.largestObjectNumber+=1,bn.of(this.largestObjectNumber)},t.prototype.register=function(e){var r=this.nextRef();return this.assign(r,e),r},t.prototype.delete=function(e){return this.indirectObjects.delete(e)},t.prototype.lookupMaybe=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=r.includes(Mo),o=e instanceof bn?this.indirectObjects.get(e):e;if(!(!o||o===Mo&&!i)){for(var s=0,a=r.length;s<a;s++){var l=r[s];if(l===Mo){if(o===Mo)return o}else if(o instanceof l)return o}throw new Pm(r,o)}},t.prototype.lookup=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e instanceof bn?this.indirectObjects.get(e):e;if(r.length===0)return i;for(var o=0,s=r.length;o<s;o++){var a=r[o];if(a===Mo){if(i===Mo)return i}else if(i instanceof a)return i}throw new Pm(r,i)},t.prototype.getObjectRef=function(e){for(var r=Array.from(this.indirectObjects.entries()),n=0,i=r.length;n<i;n++){var o=r[n],s=o[0],a=o[1];if(a===e)return s}},t.prototype.enumerateIndirectObjects=function(){return Array.from(this.indirectObjects.entries()).sort(WY)},t.prototype.obj=function(e){if(e instanceof wo)return e;if(e==null)return Mo;if(typeof e=="string")return Ke.of(e);if(typeof e=="number")return Cr.of(e);if(typeof e=="boolean")return e?Rp.True:Rp.False;if(Array.isArray(e)){for(var r=pn.withContext(this),n=0,i=e.length;n<i;n++)r.push(this.obj(e[n]));return r}else{for(var o=Or.withContext(this),s=Object.keys(e),n=0,i=s.length;n<i;n++){var a=s[n],l=e[a];l!==void 0&&o.set(Ke.of(a),this.obj(l))}return o}},t.prototype.stream=function(e,r){return r===void 0&&(r={}),Dp.of(this.obj(r),_1(e))},t.prototype.flateStream=function(e,r){return r===void 0&&(r={}),this.stream(yg.deflate(_1(e)),Tr(Tr({},r),{Filter:"FlateDecode"}))},t.prototype.contentStream=function(e,r){return r===void 0&&(r={}),cp.of(this.obj(r),e)},t.prototype.formXObject=function(e,r){return r===void 0&&(r={}),this.contentStream(e,Tr(Tr({BBox:this.obj([0,0,0,0]),Matrix:this.obj([1,0,0,1,0,0])},r),{Type:"XObject",Subtype:"Form"}))},t.prototype.getPushGraphicsStateContentStream=function(){if(this.pushGraphicsStateContentStreamRef)return this.pushGraphicsStateContentStreamRef;var e=this.obj({}),r=nn.of(an.PushGraphicsState),n=cp.of(e,[r]);return this.pushGraphicsStateContentStreamRef=this.register(n),this.pushGraphicsStateContentStreamRef},t.prototype.getPopGraphicsStateContentStream=function(){if(this.popGraphicsStateContentStreamRef)return this.popGraphicsStateContentStreamRef;var e=this.obj({}),r=nn.of(an.PopGraphicsState),n=cp.of(e,[r]);return this.popGraphicsStateContentStreamRef=this.register(n),this.popGraphicsStateContentStreamRef},t.prototype.addRandomSuffix=function(e,r){return r===void 0&&(r=4),e+"-"+Math.floor(this.rng.nextInt()*Math.pow(10,r))},t.create=function(){return new t},t}(),nl=function(t){Ht(e,t);function e(r,n,i){i===void 0&&(i=!0);var o=t.call(this,r,n)||this;return o.normalized=!1,o.autoNormalizeCTM=i,o}return e.prototype.clone=function(r){for(var n=e.fromMapWithContext(new Map,r||this.context,this.autoNormalizeCTM),i=this.entries(),o=0,s=i.length;o<s;o++){var a=i[o],l=a[0],d=a[1];n.set(l,d)}return n},e.prototype.Parent=function(){return this.lookupMaybe(Ke.Parent,Or)},e.prototype.Contents=function(){return this.lookup(Ke.of("Contents"))},e.prototype.Annots=function(){return this.lookupMaybe(Ke.Annots,pn)},e.prototype.BleedBox=function(){return this.lookupMaybe(Ke.BleedBox,pn)},e.prototype.TrimBox=function(){return this.lookupMaybe(Ke.TrimBox,pn)},e.prototype.ArtBox=function(){return this.lookupMaybe(Ke.ArtBox,pn)},e.prototype.Resources=function(){var r=this.getInheritableAttribute(Ke.Resources);return this.context.lookupMaybe(r,Or)},e.prototype.MediaBox=function(){var r=this.getInheritableAttribute(Ke.MediaBox);return this.context.lookup(r,pn)},e.prototype.CropBox=function(){var r=this.getInheritableAttribute(Ke.CropBox);return this.context.lookupMaybe(r,pn)},e.prototype.Rotate=function(){var r=this.getInheritableAttribute(Ke.Rotate);return this.context.lookupMaybe(r,Cr)},e.prototype.getInheritableAttribute=function(r){var n;return this.ascend(function(i){n||(n=i.get(r))}),n},e.prototype.setParent=function(r){this.set(Ke.Parent,r)},e.prototype.addContentStream=function(r){var n=this.normalizedEntries().Contents||this.context.obj([]);this.set(Ke.Contents,n),n.push(r)},e.prototype.wrapContentStreams=function(r,n){var i=this.Contents();return i instanceof pn?(i.insert(0,r),i.push(n),!0):!1},e.prototype.addAnnot=function(r){var n=this.normalizedEntries().Annots;n.push(r)},e.prototype.removeAnnot=function(r){var n=this.normalizedEntries().Annots,i=n.indexOf(r);i!==void 0&&n.remove(i)},e.prototype.setFontDictionary=function(r,n){var i=this.normalizedEntries().Font;i.set(r,n)},e.prototype.newFontDictionaryKey=function(r){var n=this.normalizedEntries().Font;return n.uniqueKey(r)},e.prototype.newFontDictionary=function(r,n){var i=this.newFontDictionaryKey(r);return this.setFontDictionary(i,n),i},e.prototype.setXObject=function(r,n){var i=this.normalizedEntries().XObject;i.set(r,n)},e.prototype.newXObjectKey=function(r){var n=this.normalizedEntries().XObject;return n.uniqueKey(r)},e.prototype.newXObject=function(r,n){var i=this.newXObjectKey(r);return this.setXObject(i,n),i},e.prototype.setExtGState=function(r,n){var i=this.normalizedEntries().ExtGState;i.set(r,n)},e.prototype.newExtGStateKey=function(r){var n=this.normalizedEntries().ExtGState;return n.uniqueKey(r)},e.prototype.newExtGState=function(r,n){var i=this.newExtGStateKey(r);return this.setExtGState(i,n),i},e.prototype.ascend=function(r){r(this);var n=this.Parent();n&&n.ascend(r)},e.prototype.normalize=function(){if(!this.normalized){var r=this.context,n=this.get(Ke.Contents),i=this.context.lookup(n);i instanceof ns&&this.set(Ke.Contents,r.obj([n])),this.autoNormalizeCTM&&this.wrapContentStreams(this.context.getPushGraphicsStateContentStream(),this.context.getPopGraphicsStateContentStream());var o=this.getInheritableAttribute(Ke.Resources),s=r.lookupMaybe(o,Or)||r.obj({});this.set(Ke.Resources,s);var a=s.lookupMaybe(Ke.Font,Or)||r.obj({});s.set(Ke.Font,a);var l=s.lookupMaybe(Ke.XObject,Or)||r.obj({});s.set(Ke.XObject,l);var d=s.lookupMaybe(Ke.ExtGState,Or)||r.obj({});s.set(Ke.ExtGState,d);var u=this.Annots()||r.obj([]);this.set(Ke.Annots,u),this.normalized=!0}},e.prototype.normalizedEntries=function(){this.normalize();var r=this.Annots(),n=this.Resources(),i=this.Contents();return{Annots:r,Resources:n,Contents:i,Font:n.lookup(Ke.Font,Or),XObject:n.lookup(Ke.XObject,Or),ExtGState:n.lookup(Ke.ExtGState,Or)}},e.InheritableEntries=["Resources","MediaBox","CropBox","Rotate"],e.withContextAndParent=function(r,n){var i=new Map;return i.set(Ke.Type,Ke.Page),i.set(Ke.Parent,n),i.set(Ke.Resources,r.obj({})),i.set(Ke.MediaBox,r.obj([0,0,612,792])),new e(i,r,!1)},e.fromMapWithContext=function(r,n,i){return i===void 0&&(i=!0),new e(r,n,i)},e}(Or),aw=function(){function t(e,r){var n=this;this.traversedObjects=new Map,this.copy=function(i){return i instanceof nl?n.copyPDFPage(i):i instanceof Or?n.copyPDFDict(i):i instanceof pn?n.copyPDFArray(i):i instanceof ns?n.copyPDFStream(i):i instanceof bn?n.copyPDFIndirectObject(i):i.clone()},this.copyPDFPage=function(i){for(var o=i.clone(),s=nl.InheritableEntries,a=0,l=s.length;a<l;a++){var d=Ke.of(s[a]),u=o.getInheritableAttribute(d);!o.get(d)&&u&&o.set(d,u)}return o.delete(Ke.of("Parent")),n.copyPDFDict(o)},this.copyPDFDict=function(i){if(n.traversedObjects.has(i))return n.traversedObjects.get(i);var o=i.clone(n.dest);n.traversedObjects.set(i,o);for(var s=i.entries(),a=0,l=s.length;a<l;a++){var d=s[a],u=d[0],h=d[1];o.set(u,n.copy(h))}return o},this.copyPDFArray=function(i){if(n.traversedObjects.has(i))return n.traversedObjects.get(i);var o=i.clone(n.dest);n.traversedObjects.set(i,o);for(var s=0,a=i.size();s<a;s++){var l=i.get(s);o.set(s,n.copy(l))}return o},this.copyPDFStream=function(i){if(n.traversedObjects.has(i))return n.traversedObjects.get(i);var o=i.clone(n.dest);n.traversedObjects.set(i,o);for(var s=i.dict.entries(),a=0,l=s.length;a<l;a++){var d=s[a],u=d[0],h=d[1];o.dict.set(u,n.copy(h))}return o},this.copyPDFIndirectObject=function(i){var o=n.traversedObjects.has(i);if(!o){var s=n.dest.nextRef();n.traversedObjects.set(i,s);var a=n.src.lookup(i);if(a){var l=n.copy(a);n.dest.assign(s,l)}}return n.traversedObjects.get(i)},this.src=e,this.dest=r}return t.for=function(e,r){return new t(e,r)},t}(),a4=function(){function t(e){this.subsections=e?[[e]]:[],this.chunkIdx=0,this.chunkLength=e?1:0}return t.prototype.addEntry=function(e,r){this.append({ref:e,offset:r,deleted:!1})},t.prototype.addDeletedEntry=function(e,r){this.append({ref:e,offset:r,deleted:!0})},t.prototype.toString=function(){for(var e=`xref
`,r=0,n=this.subsections.length;r<n;r++){var i=this.subsections[r];e+=i[0].ref.objectNumber+" "+i.length+`
`;for(var o=0,s=i.length;o<s;o++){var a=i[o];e+=Gs(String(a.offset),10,"0"),e+=" ",e+=Gs(String(a.ref.generationNumber),5,"0"),e+=" ",e+=a.deleted?"f":"n",e+=` 
`}}return e},t.prototype.sizeInBytes=function(){for(var e=5,r=0,n=this.subsections.length;r<n;r++){var i=this.subsections[r],o=i.length,s=i[0];e+=2,e+=String(s.ref.objectNumber).length,e+=String(o).length,e+=20*o}return e},t.prototype.copyBytesInto=function(e,r){var n=r;return e[r++]=Xe.x,e[r++]=Xe.r,e[r++]=Xe.e,e[r++]=Xe.f,e[r++]=Xe.Newline,r+=this.copySubsectionsIntoBuffer(this.subsections,e,r),r-n},t.prototype.copySubsectionsIntoBuffer=function(e,r,n){for(var i=n,o=e.length,s=0;s<o;s++){var a=this.subsections[s],l=String(a[0].ref.objectNumber);n+=Gi(l,r,n),r[n++]=Xe.Space;var d=String(a.length);n+=Gi(d,r,n),r[n++]=Xe.Newline,n+=this.copyEntriesIntoBuffer(a,r,n)}return n-i},t.prototype.copyEntriesIntoBuffer=function(e,r,n){for(var i=e.length,o=0;o<i;o++){var s=e[o],a=Gs(String(s.offset),10,"0");n+=Gi(a,r,n),r[n++]=Xe.Space;var l=Gs(String(s.ref.generationNumber),5,"0");n+=Gi(l,r,n),r[n++]=Xe.Space,r[n++]=s.deleted?Xe.f:Xe.n,r[n++]=Xe.Space,r[n++]=Xe.Newline}return 20*i},t.prototype.append=function(e){if(this.chunkLength===0){this.subsections.push([e]),this.chunkIdx=0,this.chunkLength=1;return}var r=this.subsections[this.chunkIdx],n=r[this.chunkLength-1];e.ref.objectNumber-n.ref.objectNumber>1?(this.subsections.push([e]),this.chunkIdx+=1,this.chunkLength=1):(r.push(e),this.chunkLength+=1)},t.create=function(){return new t({ref:bn.of(0,65535),offset:0,deleted:!0})},t.createEmpty=function(){return new t},t}(),b2=function(){function t(e){this.lastXRefOffset=String(e)}return t.prototype.toString=function(){return`startxref
`+this.lastXRefOffset+`
%%EOF`},t.prototype.sizeInBytes=function(){return 16+this.lastXRefOffset.length},t.prototype.copyBytesInto=function(e,r){var n=r;return e[r++]=Xe.s,e[r++]=Xe.t,e[r++]=Xe.a,e[r++]=Xe.r,e[r++]=Xe.t,e[r++]=Xe.x,e[r++]=Xe.r,e[r++]=Xe.e,e[r++]=Xe.f,e[r++]=Xe.Newline,r+=Gi(this.lastXRefOffset,e,r),e[r++]=Xe.Newline,e[r++]=Xe.Percent,e[r++]=Xe.Percent,e[r++]=Xe.E,e[r++]=Xe.O,e[r++]=Xe.F,r-n},t.forLastCrossRefSectionOffset=function(e){return new t(e)},t}(),GY=function(){function t(e){this.dict=e}return t.prototype.toString=function(){return`trailer
`+this.dict.toString()},t.prototype.sizeInBytes=function(){return 8+this.dict.sizeInBytes()},t.prototype.copyBytesInto=function(e,r){var n=r;return e[r++]=Xe.t,e[r++]=Xe.r,e[r++]=Xe.a,e[r++]=Xe.i,e[r++]=Xe.l,e[r++]=Xe.e,e[r++]=Xe.r,e[r++]=Xe.Newline,r+=this.dict.copyBytesInto(e,r),r-n},t.of=function(e){return new t(e)},t}(),l4=function(t){Ht(e,t);function e(r,n,i){i===void 0&&(i=!0);var o=t.call(this,r.obj({}),i)||this;return o.objects=n,o.offsets=o.computeObjectOffsets(),o.offsetsString=o.computeOffsetsString(),o.dict.set(Ke.of("Type"),Ke.of("ObjStm")),o.dict.set(Ke.of("N"),Cr.of(o.objects.length)),o.dict.set(Ke.of("First"),Cr.of(o.offsetsString.length)),o}return e.prototype.getObjectsCount=function(){return this.objects.length},e.prototype.clone=function(r){return e.withContextAndObjects(r||this.dict.context,this.objects.slice(),this.encode)},e.prototype.getContentsString=function(){for(var r=this.offsetsString,n=0,i=this.objects.length;n<i;n++){var o=this.objects[n],s=o[1];r+=s+`
`}return r},e.prototype.getUnencodedContents=function(){for(var r=new Uint8Array(this.getUnencodedContentsSize()),n=Gi(this.offsetsString,r,0),i=0,o=this.objects.length;i<o;i++){var s=this.objects[i],a=s[1];n+=a.copyBytesInto(r,n),r[n++]=Xe.Newline}return r},e.prototype.getUnencodedContentsSize=function(){return this.offsetsString.length+bm(this.offsets)[1]+bm(this.objects)[1].sizeInBytes()+1},e.prototype.computeOffsetsString=function(){for(var r="",n=0,i=this.offsets.length;n<i;n++){var o=this.offsets[n],s=o[0],a=o[1];r+=s+" "+a+" "}return r},e.prototype.computeObjectOffsets=function(){for(var r=0,n=new Array(this.objects.length),i=0,o=this.objects.length;i<o;i++){var s=this.objects[i],a=s[0],l=s[1];n[i]=[a.objectNumber,r],r+=l.sizeInBytes()+1}return n},e.withContextAndObjects=function(r,n,i){return i===void 0&&(i=!0),new e(r,n,i)},e}(v2),c4=function(){function t(e,r){var n=this;this.parsedObjects=0,this.shouldWaitForTick=function(i){return n.parsedObjects+=i,n.parsedObjects%n.objectsPerTick===0},this.context=e,this.objectsPerTick=r}return t.prototype.serializeToBuffer=function(){return jr(this,void 0,void 0,function(){var e,r,n,i,o,s,a,l,d,u,h,f,p,m,x,P,g;return Vr(this,function(F){switch(F.label){case 0:return[4,this.computeBufferSize()];case 1:e=F.sent(),r=e.size,n=e.header,i=e.indirectObjects,o=e.xref,s=e.trailerDict,a=e.trailer,l=0,d=new Uint8Array(r),l+=n.copyBytesInto(d,l),d[l++]=Xe.Newline,d[l++]=Xe.Newline,u=0,h=i.length,F.label=2;case 2:return u<h?(f=i[u],p=f[0],m=f[1],x=String(p.objectNumber),l+=Gi(x,d,l),d[l++]=Xe.Space,P=String(p.generationNumber),l+=Gi(P,d,l),d[l++]=Xe.Space,d[l++]=Xe.o,d[l++]=Xe.b,d[l++]=Xe.j,d[l++]=Xe.Newline,l+=m.copyBytesInto(d,l),d[l++]=Xe.Newline,d[l++]=Xe.e,d[l++]=Xe.n,d[l++]=Xe.d,d[l++]=Xe.o,d[l++]=Xe.b,d[l++]=Xe.j,d[l++]=Xe.Newline,d[l++]=Xe.Newline,g=m instanceof l4?m.getObjectsCount():1,this.shouldWaitForTick(g)?[4,Ou()]:[3,4]):[3,5];case 3:F.sent(),F.label=4;case 4:return u++,[3,2];case 5:return o&&(l+=o.copyBytesInto(d,l),d[l++]=Xe.Newline),s&&(l+=s.copyBytesInto(d,l),d[l++]=Xe.Newline,d[l++]=Xe.Newline),l+=a.copyBytesInto(d,l),[2,d]}})})},t.prototype.computeIndirectObjectSize=function(e){var r=e[0],n=e[1],i=r.sizeInBytes()+3,o=n.sizeInBytes()+9;return i+o},t.prototype.createTrailerDict=function(){return this.context.obj({Size:this.context.largestObjectNumber+1,Root:this.context.trailerInfo.Root,Encrypt:this.context.trailerInfo.Encrypt,Info:this.context.trailerInfo.Info,ID:this.context.trailerInfo.ID})},t.prototype.computeBufferSize=function(){return jr(this,void 0,void 0,function(){var e,r,n,i,o,s,a,l,d,u,h;return Vr(this,function(f){switch(f.label){case 0:e=vg.forVersion(1,7),r=e.sizeInBytes()+2,n=a4.create(),i=this.context.enumerateIndirectObjects(),o=0,s=i.length,f.label=1;case 1:return o<s?(a=i[o],l=a[0],n.addEntry(l,r),r+=this.computeIndirectObjectSize(a),this.shouldWaitForTick(1)?[4,Ou()]:[3,3]):[3,4];case 2:f.sent(),f.label=3;case 3:return o++,[3,1];case 4:return d=r,r+=n.sizeInBytes()+1,u=GY.of(this.createTrailerDict()),r+=u.sizeInBytes()+2,h=b2.forLastCrossRefSectionOffset(d),r+=h.sizeInBytes(),[2,{size:r,header:e,indirectObjects:i,xref:n,trailerDict:u,trailer:h}]}})})},t.forContext=function(e,r){return new t(e,r)},t}(),d4=function(t){Ht(e,t);function e(r){var n=t.call(this)||this;return n.data=r,n}return e.prototype.clone=function(){return e.of(this.data.slice())},e.prototype.toString=function(){return"PDFInvalidObject("+this.data.length+" bytes)"},e.prototype.sizeInBytes=function(){return this.data.length},e.prototype.copyBytesInto=function(r,n){for(var i=this.data.length,o=0;o<i;o++)r[n++]=this.data[o];return i},e.of=function(r){return new e(r)},e}(wo),Xl;(function(t){t[t.Deleted=0]="Deleted",t[t.Uncompressed=1]="Uncompressed",t[t.Compressed=2]="Compressed"})(Xl||(Xl={}));var KY=function(t){Ht(e,t);function e(r,n,i){i===void 0&&(i=!0);var o=t.call(this,r,i)||this;return o.computeIndex=function(){for(var s=[],a=0,l=0,d=o.entries.length;l<d;l++){var u=o.entries[l],h=o.entries[l-1];l===0?s.push(u.ref.objectNumber):u.ref.objectNumber-h.ref.objectNumber>1&&(s.push(a),s.push(u.ref.objectNumber),a=0),a+=1}return s.push(a),s},o.computeEntryTuples=function(){for(var s=new Array(o.entries.length),a=0,l=o.entries.length;a<l;a++){var d=o.entries[a];if(d.type===Xl.Deleted){var u=d.type,h=d.nextFreeObjectNumber,f=d.ref;s[a]=[u,h,f.generationNumber]}if(d.type===Xl.Uncompressed){var u=d.type,p=d.offset,f=d.ref;s[a]=[u,p,f.generationNumber]}if(d.type===Xl.Compressed){var u=d.type,m=d.objectStreamRef,x=d.index;s[a]=[u,m.objectNumber,x]}}return s},o.computeMaxEntryByteWidths=function(){for(var s=o.entryTuplesCache.access(),a=[0,0,0],l=0,d=s.length;l<d;l++){var u=s[l],h=u[0],f=u[1],p=u[2],m=$y(h),x=$y(f),P=$y(p);m>a[0]&&(a[0]=m),x>a[1]&&(a[1]=x),P>a[2]&&(a[2]=P)}return a},o.entries=n||[],o.entryTuplesCache=rl.populatedBy(o.computeEntryTuples),o.maxByteWidthsCache=rl.populatedBy(o.computeMaxEntryByteWidths),o.indexCache=rl.populatedBy(o.computeIndex),r.set(Ke.of("Type"),Ke.of("XRef")),o}return e.prototype.addDeletedEntry=function(r,n){var i=Xl.Deleted;this.entries.push({type:i,ref:r,nextFreeObjectNumber:n}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},e.prototype.addUncompressedEntry=function(r,n){var i=Xl.Uncompressed;this.entries.push({type:i,ref:r,offset:n}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},e.prototype.addCompressedEntry=function(r,n,i){var o=Xl.Compressed;this.entries.push({type:o,ref:r,objectStreamRef:n,index:i}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},e.prototype.clone=function(r){var n=this,i=n.dict,o=n.entries,s=n.encode;return e.of(i.clone(r),o.slice(),s)},e.prototype.getContentsString=function(){for(var r=this.entryTuplesCache.access(),n=this.maxByteWidthsCache.access(),i="",o=0,s=r.length;o<s;o++){for(var a=r[o],l=a[0],d=a[1],u=a[2],h=ou(su(l)),f=ou(su(d)),p=ou(su(u)),m=n[0]-1;m>=0;m--)i+=(h[m]||0).toString(2);for(var m=n[1]-1;m>=0;m--)i+=(f[m]||0).toString(2);for(var m=n[2]-1;m>=0;m--)i+=(p[m]||0).toString(2)}return i},e.prototype.getUnencodedContents=function(){for(var r=this.entryTuplesCache.access(),n=this.maxByteWidthsCache.access(),i=new Uint8Array(this.getUnencodedContentsSize()),o=0,s=0,a=r.length;s<a;s++){for(var l=r[s],d=l[0],u=l[1],h=l[2],f=ou(su(d)),p=ou(su(u)),m=ou(su(h)),x=n[0]-1;x>=0;x--)i[o++]=f[x]||0;for(var x=n[1]-1;x>=0;x--)i[o++]=p[x]||0;for(var x=n[2]-1;x>=0;x--)i[o++]=m[x]||0}return i},e.prototype.getUnencodedContentsSize=function(){var r=this.maxByteWidthsCache.access(),n=TK(r);return n*this.entries.length},e.prototype.updateDict=function(){t.prototype.updateDict.call(this);var r=this.maxByteWidthsCache.access(),n=this.indexCache.access(),i=this.dict.context;this.dict.set(Ke.of("W"),i.obj(r)),this.dict.set(Ke.of("Index"),i.obj(n))},e.create=function(r,n){n===void 0&&(n=!0);var i=new e(r,[],n);return i.addDeletedEntry(bn.of(0,65535),0),i},e.of=function(r,n,i){return i===void 0&&(i=!0),new e(r,n,i)},e}(v2),YY=function(t){Ht(e,t);function e(r,n,i,o){var s=t.call(this,r,n)||this;return s.encodeStreams=i,s.objectsPerStream=o,s}return e.prototype.computeBufferSize=function(){return jr(this,void 0,void 0,function(){var r,n,i,o,s,a,l,d,m,x,u,g,h,f,P,p,m,x,P,g,F,V,N,R;return Vr(this,function(M){switch(M.label){case 0:r=this.context.largestObjectNumber+1,n=vg.forVersion(1,7),i=n.sizeInBytes()+2,o=KY.create(this.createTrailerDict(),this.encodeStreams),s=[],a=[],l=[],d=this.context.enumerateIndirectObjects(),m=0,x=d.length,M.label=1;case 1:return m<x?(u=d[m],g=u[0],h=u[1],f=g===this.context.trailerInfo.Encrypt||h instanceof ns||h instanceof d4||g.generationNumber!==0,f?(s.push(u),o.addUncompressedEntry(g,i),i+=this.computeIndirectObjectSize(u),this.shouldWaitForTick(1)?[4,Ou()]:[3,3]):[3,4]):[3,6];case 2:M.sent(),M.label=3;case 3:return[3,5];case 4:P=bm(a),p=bm(l),(!P||P.length%this.objectsPerStream===0)&&(P=[],a.push(P),p=bn.of(r++),l.push(p)),o.addCompressedEntry(g,p,P.length),P.push(u),M.label=5;case 5:return m++,[3,1];case 6:m=0,x=a.length,M.label=7;case 7:return m<x?(P=a[m],g=l[m],F=l4.withContextAndObjects(this.context,P,this.encodeStreams),o.addUncompressedEntry(g,i),i+=this.computeIndirectObjectSize([g,F]),s.push([g,F]),this.shouldWaitForTick(P.length)?[4,Ou()]:[3,9]):[3,10];case 8:M.sent(),M.label=9;case 9:return m++,[3,7];case 10:return V=bn.of(r++),o.dict.set(Ke.of("Size"),Cr.of(r)),o.addUncompressedEntry(V,i),N=i,i+=this.computeIndirectObjectSize([V,o]),s.push([V,o]),R=b2.forLastCrossRefSectionOffset(N),i+=R.sizeInBytes(),[2,{size:i,header:n,indirectObjects:s,trailer:R}]}})})},e.forContext=function(r,n,i,o){return i===void 0&&(i=!0),o===void 0&&(o=50),new e(r,n,i,o)},e}(c4),vr=function(t){Ht(e,t);function e(r){var n=t.call(this)||this;return n.value=r,n}return e.prototype.asBytes=function(){for(var r=this.value+(this.value.length%2===1?"0":""),n=r.length,i=new Uint8Array(r.length/2),o=0,s=0;o<n;){var a=parseInt(r.substring(o,o+2),16);i[s]=a,o+=2,s+=1}return i},e.prototype.decodeText=function(){var r=this.asBytes();return X3(r)?G3(r):o4(r)},e.prototype.decodeDate=function(){var r=this.decodeText(),n=U3(r);if(!n)throw new s4(r);return n},e.prototype.asString=function(){return this.value},e.prototype.clone=function(){return e.of(this.value)},e.prototype.toString=function(){return"<"+this.value+">"},e.prototype.sizeInBytes=function(){return this.value.length+2},e.prototype.copyBytesInto=function(r,n){return r[n++]=Xe.LessThan,n+=Gi(this.value,r,n),r[n++]=Xe.GreaterThan,this.value.length+2},e.of=function(r){return new e(r)},e.fromText=function(r){for(var n=DK(r),i="",o=0,s=n.length;o<s;o++)i+=Xp(n[o],4);return new e(i)},e}(wo),Sm=function(){function t(e,r){this.encoding=e===Np.ZapfDingbats?dy.ZapfDingbats:e===Np.Symbol?dy.Symbol:dy.WinAnsi,this.font=fY.load(e),this.fontName=this.font.FontName,this.customName=r}return t.prototype.encodeText=function(e){for(var r=this.encodeTextAsGlyphs(e),n=new Array(r.length),i=0,o=r.length;i<o;i++)n[i]=fg(r[i].code);return vr.of(n.join(""))},t.prototype.widthOfTextAtSize=function(e,r){for(var n=this.encodeTextAsGlyphs(e),i=0,o=0,s=n.length;o<s;o++){var a=n[o].name,l=(n[o+1]||{}).name,d=this.font.getXAxisKerningForPair(a,l)||0;i+=this.widthOfGlyph(a)+d}var u=r/1e3;return i*u},t.prototype.heightOfFontAtSize=function(e,r){r===void 0&&(r={});var n=r.descender,i=n===void 0?!0:n,o=this.font,s=o.Ascender,a=o.Descender,l=o.FontBBox,d=s||l[3],u=a||l[1],h=d-u;return i||(h+=a||0),h/1e3*e},t.prototype.sizeOfFontAtHeight=function(e){var r=this.font,n=r.Ascender,i=r.Descender,o=r.FontBBox,s=n||o[3],a=i||o[1];return 1e3*e/(s-a)},t.prototype.embedIntoContext=function(e,r){var n=e.obj({Type:"Font",Subtype:"Type1",BaseFont:this.customName||this.fontName,Encoding:this.encoding===dy.WinAnsi?"WinAnsiEncoding":void 0});return r?(e.assign(r,n),r):e.register(n)},t.prototype.widthOfGlyph=function(e){return this.font.getWidthOfGlyph(e)||250},t.prototype.encodeTextAsGlyphs=function(e){for(var r=Array.from(e),n=new Array(r.length),i=0,o=r.length;i<o;i++){var s=gK(r[i]);n[i]=this.encoding.encodeUnicodeCodePoint(s)}return n},t.for=function(e,r){return new t(e,r)},t}(),XY=function(t,e){for(var r=new Array(t.length),n=0,i=t.length;n<i;n++){var o=t[n],s=lw(Fy(e(o))),a=lw.apply(void 0,o.codePoints.map(JY));r[n]=[s,a]}return ZY(r)},ZY=function(t){return`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange
`+t.length+` beginbfchar
`+t.map(function(e){var r=e[0],n=e[1];return r+" "+n}).join(`
`)+`
endbfchar
endcmap
CMapName currentdict /CMap defineresource pop
end
end`},lw=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"<"+t.join("")+">"},Fy=function(t){return Xp(t,4)},JY=function(t){if(LK(t))return Fy(t);if($K(t)){var e=H3(t),r=W3(t);return""+Fy(e)+Fy(r)}var n=fg(t),i="0x"+n+" is not a valid UTF-8 or UTF-16 codepoint.";throw new Error(i)},QY=function(t){var e=0,r=function(n){e|=1<<n-1};return t.fixedPitch&&r(1),t.serif&&r(2),r(3),t.script&&r(4),t.nonsymbolic&&r(6),t.italic&&r(7),t.allCap&&r(17),t.smallCap&&r(18),t.forceBold&&r(19),e},eX=function(t){var e=t["OS/2"]?t["OS/2"].sFamilyClass:0,r=QY({fixedPitch:t.post.isFixedPitch,serif:1<=e&&e<=7,script:e===10,italic:t.head.macStyle.italic});return r},vn=function(t){Ht(e,t);function e(r){var n=t.call(this)||this;return n.value=r,n}return e.prototype.asBytes=function(){for(var r=[],n="",i=!1,o=function(h){h!==void 0&&r.push(h),i=!1},s=0,a=this.value.length;s<a;s++){var l=this.value[s],d=Er(l),u=this.value[s+1];i?d===Xe.Newline||d===Xe.CarriageReturn?o():d===Xe.n?o(Xe.Newline):d===Xe.r?o(Xe.CarriageReturn):d===Xe.t?o(Xe.Tab):d===Xe.b?o(Xe.Backspace):d===Xe.f?o(Xe.FormFeed):d===Xe.LeftParen?o(Xe.LeftParen):d===Xe.RightParen?o(Xe.RightParen):d===Xe.Backspace?o(Xe.BackSlash):d>=Xe.Zero&&d<=Xe.Seven?(n+=l,(n.length===3||!(u>="0"&&u<="7"))&&(o(parseInt(n,8)),n="")):o(d):d===Xe.BackSlash?i=!0:o(d)}return new Uint8Array(r)},e.prototype.decodeText=function(){var r=this.asBytes();return X3(r)?G3(r):o4(r)},e.prototype.decodeDate=function(){var r=this.decodeText(),n=U3(r);if(!n)throw new s4(r);return n},e.prototype.asString=function(){return this.value},e.prototype.clone=function(){return e.of(this.value)},e.prototype.toString=function(){return"("+this.value+")"},e.prototype.sizeInBytes=function(){return this.value.length+2},e.prototype.copyBytesInto=function(r,n){return r[n++]=Xe.LeftParen,n+=Gi(this.value,r,n),r[n++]=Xe.RightParen,this.value.length+2},e.of=function(r){return new e(r)},e.fromDate=function(r){var n=Gs(String(r.getUTCFullYear()),4,"0"),i=Gs(String(r.getUTCMonth()+1),2,"0"),o=Gs(String(r.getUTCDate()),2,"0"),s=Gs(String(r.getUTCHours()),2,"0"),a=Gs(String(r.getUTCMinutes()),2,"0"),l=Gs(String(r.getUTCSeconds()),2,"0");return new e("D:"+n+i+o+s+a+l+"Z")},e}(wo),P2=function(){function t(e,r,n,i){var o=this;this.allGlyphsInFontSortedById=function(){for(var s=new Array(o.font.characterSet.length),a=0,l=s.length;a<l;a++){var d=o.font.characterSet[a];s[a]=o.font.glyphForCodePoint(d)}return EK(s.sort(kK),function(u){return u.id})},this.font=e,this.scale=1e3/this.font.unitsPerEm,this.fontData=r,this.fontName=this.font.postscriptName||"Font",this.customName=n,this.fontFeatures=i,this.baseFontName="",this.glyphCache=rl.populatedBy(this.allGlyphsInFontSortedById)}return t.for=function(e,r,n,i){return jr(this,void 0,void 0,function(){var o;return Vr(this,function(s){switch(s.label){case 0:return[4,e.create(r)];case 1:return o=s.sent(),[2,new t(o,r,n,i)]}})})},t.prototype.encodeText=function(e){for(var r=this.font.layout(e,this.fontFeatures).glyphs,n=new Array(r.length),i=0,o=r.length;i<o;i++)n[i]=Xp(r[i].id,4);return vr.of(n.join(""))},t.prototype.widthOfTextAtSize=function(e,r){for(var n=this.font.layout(e,this.fontFeatures).glyphs,i=0,o=0,s=n.length;o<s;o++)i+=n[o].advanceWidth*this.scale;var a=r/1e3;return i*a},t.prototype.heightOfFontAtSize=function(e,r){r===void 0&&(r={});var n=r.descender,i=n===void 0?!0:n,o=this.font,s=o.ascent,a=o.descent,l=o.bbox,d=(s||l.maxY)*this.scale,u=(a||l.minY)*this.scale,h=d-u;return i||(h-=Math.abs(a)||0),h/1e3*e},t.prototype.sizeOfFontAtHeight=function(e){var r=this.font,n=r.ascent,i=r.descent,o=r.bbox,s=(n||o.maxY)*this.scale,a=(i||o.minY)*this.scale;return 1e3*e/(s-a)},t.prototype.embedIntoContext=function(e,r){return this.baseFontName=this.customName||e.addRandomSuffix(this.fontName),this.embedFontDict(e,r)},t.prototype.embedFontDict=function(e,r){return jr(this,void 0,void 0,function(){var n,i,o;return Vr(this,function(s){switch(s.label){case 0:return[4,this.embedCIDFontDict(e)];case 1:return n=s.sent(),i=this.embedUnicodeCmap(e),o=e.obj({Type:"Font",Subtype:"Type0",BaseFont:this.baseFontName,Encoding:"Identity-H",DescendantFonts:[n],ToUnicode:i}),r?(e.assign(r,o),[2,r]):[2,e.register(o)]}})})},t.prototype.isCFF=function(){return this.font.cff},t.prototype.embedCIDFontDict=function(e){return jr(this,void 0,void 0,function(){var r,n;return Vr(this,function(i){switch(i.label){case 0:return[4,this.embedFontDescriptor(e)];case 1:return r=i.sent(),n=e.obj({Type:"Font",Subtype:this.isCFF()?"CIDFontType0":"CIDFontType2",CIDToGIDMap:"Identity",BaseFont:this.baseFontName,CIDSystemInfo:{Registry:vn.of("Adobe"),Ordering:vn.of("Identity"),Supplement:0},FontDescriptor:r,W:this.computeWidths()}),[2,e.register(n)]}})})},t.prototype.embedFontDescriptor=function(e){return jr(this,void 0,void 0,function(){var r,n,i,o,s,a,l,d,u,h,f,p,m,x,P;return Vr(this,function(g){switch(g.label){case 0:return[4,this.embedFontStream(e)];case 1:return r=g.sent(),n=this.scale,i=this.font,o=i.italicAngle,s=i.ascent,a=i.descent,l=i.capHeight,d=i.xHeight,u=this.font.bbox,h=u.minX,f=u.minY,p=u.maxX,m=u.maxY,x=e.obj((P={Type:"FontDescriptor",FontName:this.baseFontName,Flags:eX(this.font),FontBBox:[h*n,f*n,p*n,m*n],ItalicAngle:o,Ascent:s*n,Descent:a*n,CapHeight:(l||s)*n,XHeight:(d||0)*n,StemV:0},P[this.isCFF()?"FontFile3":"FontFile2"]=r,P)),[2,e.register(x)]}})})},t.prototype.serializeFont=function(){return jr(this,void 0,void 0,function(){return Vr(this,function(e){return[2,this.fontData]})})},t.prototype.embedFontStream=function(e){return jr(this,void 0,void 0,function(){var r,n,i;return Vr(this,function(o){switch(o.label){case 0:return i=(n=e).flateStream,[4,this.serializeFont()];case 1:return r=i.apply(n,[o.sent(),{Subtype:this.isCFF()?"CIDFontType0C":void 0}]),[2,e.register(r)]}})})},t.prototype.embedUnicodeCmap=function(e){var r=XY(this.glyphCache.access(),this.glyphId.bind(this)),n=e.flateStream(r);return e.register(n)},t.prototype.glyphId=function(e){return e?e.id:-1},t.prototype.computeWidths=function(){for(var e=this.glyphCache.access(),r=[],n=[],i=0,o=e.length;i<o;i++){var s=e[i],a=e[i-1],l=this.glyphId(s),d=this.glyphId(a);i===0?r.push(l):l-d!==1&&(r.push(n),r.push(l),n=[]),n.push(s.advanceWidth*this.scale)}return r.push(n),r},t}(),tX=function(t){Ht(e,t);function e(r,n,i,o){var s=t.call(this,r,n,i,o)||this;return s.subset=s.font.createSubset(),s.glyphs=[],s.glyphCache=rl.populatedBy(function(){return s.glyphs}),s.glyphIdMap=new Map,s}return e.for=function(r,n,i,o){return jr(this,void 0,void 0,function(){var s;return Vr(this,function(a){switch(a.label){case 0:return[4,r.create(n)];case 1:return s=a.sent(),[2,new e(s,n,i,o)]}})})},e.prototype.encodeText=function(r){for(var n=this.font.layout(r,this.fontFeatures).glyphs,i=new Array(n.length),o=0,s=n.length;o<s;o++){var a=n[o],l=this.subset.includeGlyph(a);this.glyphs[l-1]=a,this.glyphIdMap.set(a.id,l),i[o]=Xp(l,4)}return this.glyphCache.invalidate(),vr.of(i.join(""))},e.prototype.isCFF=function(){return this.subset.cff},e.prototype.glyphId=function(r){return r?this.glyphIdMap.get(r.id):-1},e.prototype.serializeFont=function(){var r=this;return new Promise(function(n,i){var o=[];r.subset.encodeStream().on("data",function(s){return o.push(s)}).on("end",function(){return n(AK(o))}).on("error",function(s){return i(s)})})},e}(P2),T1;(function(t){t.Source="Source",t.Data="Data",t.Alternative="Alternative",t.Supplement="Supplement",t.EncryptedPayload="EncryptedPayload",t.FormData="EncryptedPayload",t.Schema="Schema",t.Unspecified="Unspecified"})(T1||(T1={}));var rX=function(){function t(e,r,n){n===void 0&&(n={}),this.fileData=e,this.fileName=r,this.options=n}return t.for=function(e,r,n){return n===void 0&&(n={}),new t(e,r,n)},t.prototype.embedIntoContext=function(e,r){return jr(this,void 0,void 0,function(){var n,i,o,s,a,l,d,u,h;return Vr(this,function(f){return n=this.options,i=n.mimeType,o=n.description,s=n.creationDate,a=n.modificationDate,l=n.afRelationship,d=e.flateStream(this.fileData,{Type:"EmbeddedFile",Subtype:i??void 0,Params:{Size:this.fileData.length,CreationDate:s?vn.fromDate(s):void 0,ModDate:a?vn.fromDate(a):void 0}}),u=e.register(d),h=e.obj({Type:"Filespec",F:vn.of(this.fileName),UF:vr.fromText(this.fileName),EF:{F:u},Desc:o?vr.fromText(o):void 0,AFRelationship:l??void 0}),r?(e.assign(r,h),[2,r]):[2,e.register(h)]})})},t}(),cw=[65472,65473,65474,65475,65477,65478,65479,65480,65481,65482,65483,65484,65485,65486,65487],Tu;(function(t){t.DeviceGray="DeviceGray",t.DeviceRGB="DeviceRGB",t.DeviceCMYK="DeviceCMYK"})(Tu||(Tu={}));var nX={1:Tu.DeviceGray,3:Tu.DeviceRGB,4:Tu.DeviceCMYK},u4=function(){function t(e,r,n,i,o){this.imageData=e,this.bitsPerComponent=r,this.width=n,this.height=i,this.colorSpace=o}return t.for=function(e){return jr(this,void 0,void 0,function(){var r,n,i,o,s,a,l,d,u,h;return Vr(this,function(f){if(r=new DataView(e.buffer),n=r.getUint16(0),n!==65496)throw new Error("SOI not found in JPEG");for(i=2;i<r.byteLength&&(o=r.getUint16(i),i+=2,!cw.includes(o));)i+=r.getUint16(i);if(!cw.includes(o))throw new Error("Invalid JPEG");if(i+=2,s=r.getUint8(i++),a=r.getUint16(i),i+=2,l=r.getUint16(i),i+=2,d=r.getUint8(i++),u=nX[d],!u)throw new Error("Unknown JPEG channel.");return h=u,[2,new t(e,s,l,a,h)]})})},t.prototype.embedIntoContext=function(e,r){return jr(this,void 0,void 0,function(){var n;return Vr(this,function(i){return n=e.stream(this.imageData,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.bitsPerComponent,Width:this.width,Height:this.height,ColorSpace:this.colorSpace,Filter:"DCTDecode",Decode:this.colorSpace===Tu.DeviceCMYK?[1,0,1,0,1,0,1,0]:void 0}),r?(e.assign(r,n),[2,r]):[2,e.register(n)]})})},t}(),Bt={};Bt.toRGBA8=function(t){var e=t.width,r=t.height;if(t.tabs.acTL==null)return[Bt.toRGBA8.decodeImage(t.data,e,r,t).buffer];var n=[];t.frames[0].data==null&&(t.frames[0].data=t.data);for(var i=e*r*4,o=new Uint8Array(i),s=new Uint8Array(i),a=new Uint8Array(i),l=0;l<t.frames.length;l++){var d=t.frames[l],u=d.rect.x,h=d.rect.y,f=d.rect.width,p=d.rect.height,m=Bt.toRGBA8.decodeImage(d.data,f,p,t);if(l!=0)for(var x=0;x<i;x++)a[x]=o[x];if(d.blend==0?Bt._copyTile(m,f,p,o,e,r,u,h,0):d.blend==1&&Bt._copyTile(m,f,p,o,e,r,u,h,1),n.push(o.buffer.slice(0)),d.dispose!=0){if(d.dispose==1)Bt._copyTile(s,f,p,o,e,r,u,h,0);else if(d.dispose==2)for(var x=0;x<i;x++)o[x]=a[x]}}return n};Bt.toRGBA8.decodeImage=function(t,e,r,n){var i=e*r,o=Bt.decode._getBPP(n),s=Math.ceil(e*o/8),a=new Uint8Array(i*4),l=new Uint32Array(a.buffer),d=n.ctype,u=n.depth,h=Bt._bin.readUshort;if(d==6){var f=i<<2;if(u==8)for(var p=0;p<f;p+=4)a[p]=t[p],a[p+1]=t[p+1],a[p+2]=t[p+2],a[p+3]=t[p+3];if(u==16)for(var p=0;p<f;p++)a[p]=t[p<<1]}else if(d==2){var m=n.tabs.tRNS;if(m==null){if(u==8)for(var p=0;p<i;p++){var x=p*3;l[p]=255<<24|t[x+2]<<16|t[x+1]<<8|t[x]}if(u==16)for(var p=0;p<i;p++){var x=p*6;l[p]=255<<24|t[x+4]<<16|t[x+2]<<8|t[x]}}else{var P=m[0],g=m[1],F=m[2];if(u==8)for(var p=0;p<i;p++){var V=p<<2,x=p*3;l[p]=255<<24|t[x+2]<<16|t[x+1]<<8|t[x],t[x]==P&&t[x+1]==g&&t[x+2]==F&&(a[V+3]=0)}if(u==16)for(var p=0;p<i;p++){var V=p<<2,x=p*6;l[p]=255<<24|t[x+4]<<16|t[x+2]<<8|t[x],h(t,x)==P&&h(t,x+2)==g&&h(t,x+4)==F&&(a[V+3]=0)}}}else if(d==3){var N=n.tabs.PLTE,R=n.tabs.tRNS,M=R?R.length:0;if(u==1)for(var C=0;C<r;C++)for(var k=C*s,D=C*e,p=0;p<e;p++){var V=D+p<<2,$=t[k+(p>>3)]>>7-((p&7)<<0)&1,w=3*$;a[V]=N[w],a[V+1]=N[w+1],a[V+2]=N[w+2],a[V+3]=$<M?R[$]:255}if(u==2)for(var C=0;C<r;C++)for(var k=C*s,D=C*e,p=0;p<e;p++){var V=D+p<<2,$=t[k+(p>>2)]>>6-((p&3)<<1)&3,w=3*$;a[V]=N[w],a[V+1]=N[w+1],a[V+2]=N[w+2],a[V+3]=$<M?R[$]:255}if(u==4)for(var C=0;C<r;C++)for(var k=C*s,D=C*e,p=0;p<e;p++){var V=D+p<<2,$=t[k+(p>>1)]>>4-((p&1)<<2)&15,w=3*$;a[V]=N[w],a[V+1]=N[w+1],a[V+2]=N[w+2],a[V+3]=$<M?R[$]:255}if(u==8)for(var p=0;p<i;p++){var V=p<<2,$=t[p],w=3*$;a[V]=N[w],a[V+1]=N[w+1],a[V+2]=N[w+2],a[V+3]=$<M?R[$]:255}}else if(d==4){if(u==8)for(var p=0;p<i;p++){var V=p<<2,_=p<<1,v=t[_];a[V]=v,a[V+1]=v,a[V+2]=v,a[V+3]=t[_+1]}if(u==16)for(var p=0;p<i;p++){var V=p<<2,_=p<<2,v=t[_];a[V]=v,a[V+1]=v,a[V+2]=v,a[V+3]=t[_+2]}}else if(d==0)for(var P=n.tabs.tRNS?n.tabs.tRNS:-1,C=0;C<r;C++){var z=C*s,W=C*e;if(u==1)for(var A=0;A<e;A++){var v=255*(t[z+(A>>>3)]>>>7-(A&7)&1),I=v==P*255?0:255;l[W+A]=I<<24|v<<16|v<<8|v}else if(u==2)for(var A=0;A<e;A++){var v=85*(t[z+(A>>>2)]>>>6-((A&3)<<1)&3),I=v==P*85?0:255;l[W+A]=I<<24|v<<16|v<<8|v}else if(u==4)for(var A=0;A<e;A++){var v=17*(t[z+(A>>>1)]>>>4-((A&1)<<2)&15),I=v==P*17?0:255;l[W+A]=I<<24|v<<16|v<<8|v}else if(u==8)for(var A=0;A<e;A++){var v=t[z+A],I=v==P?0:255;l[W+A]=I<<24|v<<16|v<<8|v}else if(u==16)for(var A=0;A<e;A++){var v=t[z+(A<<1)],I=h(t,z+(A<<p))==P?0:255;l[W+A]=I<<24|v<<16|v<<8|v}}return a};Bt.decode=function(t){for(var e=new Uint8Array(t),r=8,n=Bt._bin,i=n.readUshort,o=n.readUint,s={tabs:{},frames:[]},a=new Uint8Array(e.length),l=0,d,u=0,h=[137,80,78,71,13,10,26,10],f=0;f<8;f++)if(e[f]!=h[f])throw"The input is not a PNG file!";for(;r<e.length;){var p=n.readUint(e,r);r+=4;var m=n.readASCII(e,r,4);if(r+=4,m=="IHDR")Bt.decode._IHDR(e,r,s);else if(m=="IDAT"){for(var f=0;f<p;f++)a[l+f]=e[r+f];l+=p}else if(m=="acTL")s.tabs[m]={num_frames:o(e,r),num_plays:o(e,r+4)},d=new Uint8Array(e.length);else if(m=="fcTL"){if(u!=0){var x=s.frames[s.frames.length-1];x.data=Bt.decode._decompress(s,d.slice(0,u),x.rect.width,x.rect.height),u=0}var P={x:o(e,r+12),y:o(e,r+16),width:o(e,r+4),height:o(e,r+8)},g=i(e,r+22);g=i(e,r+20)/(g==0?100:g);var F={rect:P,delay:Math.round(g*1e3),dispose:e[r+24],blend:e[r+25]};s.frames.push(F)}else if(m=="fdAT"){for(var f=0;f<p-4;f++)d[u+f]=e[r+f+4];u+=p-4}else if(m=="pHYs")s.tabs[m]=[n.readUint(e,r),n.readUint(e,r+4),e[r+8]];else if(m=="cHRM"){s.tabs[m]=[];for(var f=0;f<8;f++)s.tabs[m].push(n.readUint(e,r+f*4))}else if(m=="tEXt"){s.tabs[m]==null&&(s.tabs[m]={});var V=n.nextZero(e,r),N=n.readASCII(e,r,V-r),R=n.readASCII(e,V+1,r+p-V-1);s.tabs[m][N]=R}else if(m=="iTXt"){s.tabs[m]==null&&(s.tabs[m]={});var V=0,M=r;V=n.nextZero(e,M);var N=n.readASCII(e,M,V-M);M=V+1,e[M],e[M+1],M+=2,V=n.nextZero(e,M),n.readASCII(e,M,V-M),M=V+1,V=n.nextZero(e,M),n.readUTF8(e,M,V-M),M=V+1;var R=n.readUTF8(e,M,p-(M-r));s.tabs[m][N]=R}else if(m=="PLTE")s.tabs[m]=n.readBytes(e,r,p);else if(m=="hIST"){var C=s.tabs.PLTE.length/3;s.tabs[m]=[];for(var f=0;f<C;f++)s.tabs[m].push(i(e,r+f*2))}else if(m=="tRNS")s.ctype==3?s.tabs[m]=n.readBytes(e,r,p):s.ctype==0?s.tabs[m]=i(e,r):s.ctype==2&&(s.tabs[m]=[i(e,r),i(e,r+2),i(e,r+4)]);else if(m=="gAMA")s.tabs[m]=n.readUint(e,r)/1e5;else if(m=="sRGB")s.tabs[m]=e[r];else if(m=="bKGD")s.ctype==0||s.ctype==4?s.tabs[m]=[i(e,r)]:s.ctype==2||s.ctype==6?s.tabs[m]=[i(e,r),i(e,r+2),i(e,r+4)]:s.ctype==3&&(s.tabs[m]=e[r]);else if(m=="IEND")break;r+=p,n.readUint(e,r),r+=4}if(u!=0){var x=s.frames[s.frames.length-1];x.data=Bt.decode._decompress(s,d.slice(0,u),x.rect.width,x.rect.height),u=0}return s.data=Bt.decode._decompress(s,a,s.width,s.height),delete s.compress,delete s.interlace,delete s.filter,s};Bt.decode._decompress=function(t,e,r,n){var i=Bt.decode._getBPP(t),o=Math.ceil(r*i/8),s=new Uint8Array((o+1+t.interlace)*n);return e=Bt.decode._inflate(e,s),t.interlace==0?e=Bt.decode._filterZero(e,t,0,r,n):t.interlace==1&&(e=Bt.decode._readInterlace(e,t)),e};Bt.decode._inflate=function(t,e){var r=Bt.inflateRaw(new Uint8Array(t.buffer,2,t.length-6),e);return r};Bt.inflateRaw=function(){var t={};return t.H={},t.H.N=function(e,r){var n=Uint8Array,i=0,o=0,s=0,a=0,l=0,d=0,u=0,h=0,f=0,p,m;if(e[0]==3&&e[1]==0)return r||new n(0);var x=t.H,P=x.b,g=x.e,F=x.R,V=x.n,N=x.A,R=x.Z,M=x.m,C=r==null;for(C&&(r=new n(e.length>>>2<<3));i==0;){if(i=P(e,f,1),o=P(e,f+1,2),f+=3,o==0){(f&7)!=0&&(f+=8-(f&7));var k=(f>>>3)+4,D=e[k-4]|e[k-3]<<8;C&&(r=t.H.W(r,h+D)),r.set(new n(e.buffer,e.byteOffset+k,D),h),f=k+D<<3,h+=D;continue}if(C&&(r=t.H.W(r,h+(1<<17))),o==1&&(p=M.J,m=M.h,d=511,u=31),o==2){s=g(e,f,5)+257,a=g(e,f+5,5)+1,l=g(e,f+10,4)+4,f+=14;for(var $=1,w=0;w<38;w+=2)M.Q[w]=0,M.Q[w+1]=0;for(var w=0;w<l;w++){var _=g(e,f+w*3,3);M.Q[(M.X[w]<<1)+1]=_,_>$&&($=_)}f+=3*l,V(M.Q,$),N(M.Q,$,M.u),p=M.w,m=M.d,f=F(M.u,(1<<$)-1,s+a,e,f,M.v);var v=x.V(M.v,0,s,M.C);d=(1<<v)-1;var z=x.V(M.v,s,a,M.D);u=(1<<z)-1,V(M.C,v),N(M.C,v,p),V(M.D,z),N(M.D,z,m)}for(;;){var W=p[R(e,f)&d];f+=W&15;var A=W>>>4;if(!(A>>>8))r[h++]=A;else{if(A==256)break;var I=h+A-254;if(A>264){var ee=M.q[A-257];I=h+(ee>>>3)+g(e,f,ee&7),f+=ee&7}var Z=m[R(e,f)&u];f+=Z&15;var X=Z>>>4,se=M.c[X],U=(se>>>4)+P(e,f,se&15);for(f+=se&15;h<I;)r[h]=r[h++-U],r[h]=r[h++-U],r[h]=r[h++-U],r[h]=r[h++-U];h=I}}}return r.length==h?r:r.slice(0,h)},t.H.W=function(e,r){var n=e.length;if(r<=n)return e;var i=new Uint8Array(n<<1);return i.set(e,0),i},t.H.R=function(e,r,n,i,o,s){for(var a=t.H.e,l=t.H.Z,d=0;d<n;){var u=e[l(i,o)&r];o+=u&15;var h=u>>>4;if(h<=15)s[d]=h,d++;else{var f=0,p=0;h==16?(p=3+a(i,o,2),o+=2,f=s[d-1]):h==17?(p=3+a(i,o,3),o+=3):h==18&&(p=11+a(i,o,7),o+=7);for(var m=d+p;d<m;)s[d]=f,d++}}return o},t.H.V=function(e,r,n,i){for(var o=0,s=0,a=i.length>>>1;s<n;){var l=e[s+r];i[s<<1]=0,i[(s<<1)+1]=l,l>o&&(o=l),s++}for(;s<a;)i[s<<1]=0,i[(s<<1)+1]=0,s++;return o},t.H.n=function(e,r){for(var n=t.H.m,i=e.length,o,s,a,l,d,u=n.j,l=0;l<=r;l++)u[l]=0;for(l=1;l<i;l+=2)u[e[l]]++;var h=n.K;for(o=0,u[0]=0,s=1;s<=r;s++)o=o+u[s-1]<<1,h[s]=o;for(a=0;a<i;a+=2)d=e[a+1],d!=0&&(e[a]=h[d],h[d]++)},t.H.A=function(e,r,n){for(var i=e.length,o=t.H.m,s=o.r,a=0;a<i;a+=2)if(e[a+1]!=0)for(var l=a>>1,d=e[a+1],u=l<<4|d,h=r-d,f=e[a]<<h,p=f+(1<<h);f!=p;){var m=s[f]>>>15-r;n[m]=u,f++}},t.H.l=function(e,r){for(var n=t.H.m.r,i=15-r,o=0;o<e.length;o+=2){var s=e[o]<<r-e[o+1];e[o]=n[s]>>>i}},t.H.M=function(e,r,n){n=n<<(r&7);var i=r>>>3;e[i]|=n,e[i+1]|=n>>>8},t.H.I=function(e,r,n){n=n<<(r&7);var i=r>>>3;e[i]|=n,e[i+1]|=n>>>8,e[i+2]|=n>>>16},t.H.e=function(e,r,n){return(e[r>>>3]|e[(r>>>3)+1]<<8)>>>(r&7)&(1<<n)-1},t.H.b=function(e,r,n){return(e[r>>>3]|e[(r>>>3)+1]<<8|e[(r>>>3)+2]<<16)>>>(r&7)&(1<<n)-1},t.H.Z=function(e,r){return(e[r>>>3]|e[(r>>>3)+1]<<8|e[(r>>>3)+2]<<16)>>>(r&7)},t.H.i=function(e,r){return(e[r>>>3]|e[(r>>>3)+1]<<8|e[(r>>>3)+2]<<16|e[(r>>>3)+3]<<24)>>>(r&7)},t.H.m=function(){var e=Uint16Array,r=Uint32Array;return{K:new e(16),j:new e(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new e(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new r(32),J:new e(512),_:[],h:new e(32),$:[],w:new e(32768),C:[],v:[],d:new e(32768),D:[],u:new e(512),Q:[],r:new e(32768),s:new r(286),Y:new r(30),a:new r(19),t:new r(15e3),k:new e(65536),g:new e(32768)}}(),function(){for(var e=t.H.m,r=32768,n=0;n<r;n++){var i=n;i=(i&2863311530)>>>1|(i&1431655765)<<1,i=(i&3435973836)>>>2|(i&858993459)<<2,i=(i&4042322160)>>>4|(i&252645135)<<4,i=(i&4278255360)>>>8|(i&16711935)<<8,e.r[n]=(i>>>16|i<<16)>>>17}function o(s,a,l){for(;a--!=0;)s.push(0,l)}for(var n=0;n<32;n++)e.q[n]=e.S[n]<<3|e.T[n],e.c[n]=e.p[n]<<4|e.z[n];o(e._,144,8),o(e._,112,9),o(e._,24,7),o(e._,8,8),t.H.n(e._,9),t.H.A(e._,9,e.J),t.H.l(e._,9),o(e.$,32,5),t.H.n(e.$,5),t.H.A(e.$,5,e.h),t.H.l(e.$,5),o(e.Q,19,0),o(e.C,286,0),o(e.D,30,0),o(e.v,320,0)}(),t.H.N}();Bt.decode._readInterlace=function(t,e){for(var r=e.width,n=e.height,i=Bt.decode._getBPP(e),o=i>>3,s=Math.ceil(r*i/8),a=new Uint8Array(n*s),l=0,d=[0,0,4,0,2,0,1],u=[0,4,0,2,0,1,0],h=[8,8,8,4,4,2,2],f=[8,8,4,4,2,2,1],p=0;p<7;){for(var m=h[p],x=f[p],P=0,g=0,F=d[p];F<n;)F+=m,g++;for(var V=u[p];V<r;)V+=x,P++;var N=Math.ceil(P*i/8);Bt.decode._filterZero(t,e,l,P,g);for(var R=0,M=d[p];M<n;){for(var C=u[p],k=l+R*N<<3;C<r;){if(i==1){var D=t[k>>3];D=D>>7-(k&7)&1,a[M*s+(C>>3)]|=D<<7-((C&7)<<0)}if(i==2){var D=t[k>>3];D=D>>6-(k&7)&3,a[M*s+(C>>2)]|=D<<6-((C&3)<<1)}if(i==4){var D=t[k>>3];D=D>>4-(k&7)&15,a[M*s+(C>>1)]|=D<<4-((C&1)<<2)}if(i>=8)for(var $=M*s+C*o,w=0;w<o;w++)a[$+w]=t[(k>>3)+w];k+=i,C+=x}R++,M+=m}P*g!=0&&(l+=g*(1+N)),p=p+1}return a};Bt.decode._getBPP=function(t){var e=[1,null,3,1,2,null,4][t.ctype];return e*t.depth};Bt.decode._filterZero=function(t,e,r,n,i){var o=Bt.decode._getBPP(e),s=Math.ceil(n*o/8),a=Bt.decode._paeth;o=Math.ceil(o/8);var l=0,d=1,u=t[r],h=0;if(u>1&&(t[r]=[0,0,1][u-2]),u==3)for(h=o;h<s;h++)t[h+1]=t[h+1]+(t[h+1-o]>>>1)&255;for(var f=0;f<i;f++)if(l=r+f*s,d=l+f+1,u=t[d-1],h=0,u==0)for(;h<s;h++)t[l+h]=t[d+h];else if(u==1){for(;h<o;h++)t[l+h]=t[d+h];for(;h<s;h++)t[l+h]=t[d+h]+t[l+h-o]}else if(u==2)for(;h<s;h++)t[l+h]=t[d+h]+t[l+h-s];else if(u==3){for(;h<o;h++)t[l+h]=t[d+h]+(t[l+h-s]>>>1);for(;h<s;h++)t[l+h]=t[d+h]+(t[l+h-s]+t[l+h-o]>>>1)}else{for(;h<o;h++)t[l+h]=t[d+h]+a(0,t[l+h-s],0);for(;h<s;h++)t[l+h]=t[d+h]+a(t[l+h-o],t[l+h-s],t[l+h-o-s])}return t};Bt.decode._paeth=function(t,e,r){var n=t+e-r,i=n-t,o=n-e,s=n-r;return i*i<=o*o&&i*i<=s*s?t:o*o<=s*s?e:r};Bt.decode._IHDR=function(t,e,r){var n=Bt._bin;r.width=n.readUint(t,e),e+=4,r.height=n.readUint(t,e),e+=4,r.depth=t[e],e++,r.ctype=t[e],e++,r.compress=t[e],e++,r.filter=t[e],e++,r.interlace=t[e],e++};Bt._bin={nextZero:function(t,e){for(;t[e]!=0;)e++;return e},readUshort:function(t,e){return t[e]<<8|t[e+1]},writeUshort:function(t,e,r){t[e]=r>>8&255,t[e+1]=r&255},readUint:function(t,e){return t[e]*(256*256*256)+(t[e+1]<<16|t[e+2]<<8|t[e+3])},writeUint:function(t,e,r){t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=r&255},readASCII:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n},writeASCII:function(t,e,r){for(var n=0;n<r.length;n++)t[e+n]=r.charCodeAt(n)},readBytes:function(t,e,r){for(var n=[],i=0;i<r;i++)n.push(t[e+i]);return n},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(t,e,r){for(var n="",i,o=0;o<r;o++)n+="%"+Bt._bin.pad(t[e+o].toString(16));try{i=decodeURIComponent(n)}catch{return Bt._bin.readASCII(t,e,r)}return i}};Bt._copyTile=function(t,e,r,n,i,o,s,a,l){for(var d=Math.min(e,i),u=Math.min(r,o),h=0,f=0,p=0;p<u;p++)for(var m=0;m<d;m++)if(s>=0&&a>=0?(h=p*e+m<<2,f=(a+p)*i+s+m<<2):(h=(-a+p)*e-s+m<<2,f=p*i+m<<2),l==0)n[f]=t[h],n[f+1]=t[h+1],n[f+2]=t[h+2],n[f+3]=t[h+3];else if(l==1){var x=t[h+3]*.00392156862745098,P=t[h]*x,g=t[h+1]*x,F=t[h+2]*x,V=n[f+3]*(1/255),N=n[f]*V,R=n[f+1]*V,M=n[f+2]*V,C=1-x,k=x+V*C,D=k==0?0:1/k;n[f+3]=255*k,n[f+0]=(P+N*C)*D,n[f+1]=(g+R*C)*D,n[f+2]=(F+M*C)*D}else if(l==2){var x=t[h+3],P=t[h],g=t[h+1],F=t[h+2],V=n[f+3],N=n[f],R=n[f+1],M=n[f+2];x==V&&P==N&&g==R&&F==M?(n[f]=0,n[f+1]=0,n[f+2]=0,n[f+3]=0):(n[f]=P,n[f+1]=g,n[f+2]=F,n[f+3]=x)}else if(l==3){var x=t[h+3],P=t[h],g=t[h+1],F=t[h+2],V=n[f+3],N=n[f],R=n[f+1],M=n[f+2];if(x==V&&P==N&&g==R&&F==M)continue;if(x<220&&V>20)return!1}return!0};Bt.encode=function(t,e,r,n,i,o,s){n==null&&(n=0),s==null&&(s=!1);var a=Bt.encode.compress(t,e,r,n,[!1,!1,!1,0,s]);return Bt.encode.compressPNG(a,-1),Bt.encode._main(a,e,r,i,o)};Bt.encodeLL=function(t,e,r,n,i,o,s,a){for(var l={ctype:0+(n==1?0:2)+(i==0?0:4),depth:o,frames:[]},d=(n+i)*o,u=d*e,h=0;h<t.length;h++)l.frames.push({rect:{x:0,y:0,width:e,height:r},img:new Uint8Array(t[h]),blend:0,dispose:1,bpp:Math.ceil(d/8),bpl:Math.ceil(u/8)});Bt.encode.compressPNG(l,0,!0);var f=Bt.encode._main(l,e,r,s,a);return f};Bt.encode._main=function(t,e,r,n,i){i==null&&(i={});var o=Bt.crc.crc,s=Bt._bin.writeUint,a=Bt._bin.writeUshort,l=Bt._bin.writeASCII,d=8,u=t.frames.length>1,h=!1,f=33+(u?20:0);if(i.sRGB!=null&&(f+=13),i.pHYs!=null&&(f+=21),t.ctype==3){for(var p=t.plte.length,m=0;m<p;m++)t.plte[m]>>>24!=255&&(h=!0);f+=8+p*3+4+(h?8+p*1+4:0)}for(var x=0;x<t.frames.length;x++){var P=t.frames[x];u&&(f+=38),f+=P.cimg.length+12,x!=0&&(f+=4)}f+=12;for(var g=new Uint8Array(f),F=[137,80,78,71,13,10,26,10],m=0;m<8;m++)g[m]=F[m];if(s(g,d,13),d+=4,l(g,d,"IHDR"),d+=4,s(g,d,e),d+=4,s(g,d,r),d+=4,g[d]=t.depth,d++,g[d]=t.ctype,d++,g[d]=0,d++,g[d]=0,d++,g[d]=0,d++,s(g,d,o(g,d-17,17)),d+=4,i.sRGB!=null&&(s(g,d,1),d+=4,l(g,d,"sRGB"),d+=4,g[d]=i.sRGB,d++,s(g,d,o(g,d-5,5)),d+=4),i.pHYs!=null&&(s(g,d,9),d+=4,l(g,d,"pHYs"),d+=4,s(g,d,i.pHYs[0]),d+=4,s(g,d,i.pHYs[1]),d+=4,g[d]=i.pHYs[2],d++,s(g,d,o(g,d-13,13)),d+=4),u&&(s(g,d,8),d+=4,l(g,d,"acTL"),d+=4,s(g,d,t.frames.length),d+=4,s(g,d,i.loop!=null?i.loop:0),d+=4,s(g,d,o(g,d-12,12)),d+=4),t.ctype==3){var p=t.plte.length;s(g,d,p*3),d+=4,l(g,d,"PLTE"),d+=4;for(var m=0;m<p;m++){var V=m*3,N=t.plte[m],R=N&255,M=N>>>8&255,C=N>>>16&255;g[d+V+0]=R,g[d+V+1]=M,g[d+V+2]=C}if(d+=p*3,s(g,d,o(g,d-p*3-4,p*3+4)),d+=4,h){s(g,d,p),d+=4,l(g,d,"tRNS"),d+=4;for(var m=0;m<p;m++)g[d+m]=t.plte[m]>>>24&255;d+=p,s(g,d,o(g,d-p-4,p+4)),d+=4}}for(var k=0,x=0;x<t.frames.length;x++){var P=t.frames[x];u&&(s(g,d,26),d+=4,l(g,d,"fcTL"),d+=4,s(g,d,k++),d+=4,s(g,d,P.rect.width),d+=4,s(g,d,P.rect.height),d+=4,s(g,d,P.rect.x),d+=4,s(g,d,P.rect.y),d+=4,a(g,d,n[x]),d+=2,a(g,d,1e3),d+=2,g[d]=P.dispose,d++,g[d]=P.blend,d++,s(g,d,o(g,d-30,30)),d+=4);var D=P.cimg,p=D.length;s(g,d,p+(x==0?0:4)),d+=4;var $=d;l(g,d,x==0?"IDAT":"fdAT"),d+=4,x!=0&&(s(g,d,k++),d+=4),g.set(D,d),d+=p,s(g,d,o(g,$,d-$)),d+=4}return s(g,d,0),d+=4,l(g,d,"IEND"),d+=4,s(g,d,o(g,d-4,4)),d+=4,g.buffer};Bt.encode.compressPNG=function(t,e,r){for(var n=0;n<t.frames.length;n++){var i=t.frames[n];i.rect.width;var o=i.rect.height,s=new Uint8Array(o*i.bpl+o);i.cimg=Bt.encode._filterZero(i.img,o,i.bpp,i.bpl,s,e,r)}};Bt.encode.compress=function(t,e,r,n,i){for(var o=i[0],s=i[1],a=i[2],l=i[3],d=i[4],u=6,h=8,f=255,p=0;p<t.length;p++)for(var m=new Uint8Array(t[p]),x=m.length,P=0;P<x;P+=4)f&=m[P+3];var g=f!=255,F=Bt.encode.framize(t,e,r,o,s,a),V={},N=[],R=[];if(n!=0){for(var M=[],P=0;P<F.length;P++)M.push(F[P].img.buffer);for(var C=Bt.encode.concatRGBA(M),k=Bt.quantize(C,n),D=0,$=new Uint8Array(k.abuf),P=0;P<F.length;P++){var w=F[P].img,_=w.length;R.push(new Uint8Array(k.inds.buffer,D>>2,_>>2));for(var p=0;p<_;p+=4)w[p]=$[D+p],w[p+1]=$[D+p+1],w[p+2]=$[D+p+2],w[p+3]=$[D+p+3];D+=_}for(var P=0;P<k.plte.length;P++)N.push(k.plte[P].est.rgba)}else for(var p=0;p<F.length;p++){var v=F[p],z=new Uint32Array(v.img.buffer),W=v.rect.width,x=z.length,A=new Uint8Array(x);R.push(A);for(var P=0;P<x;P++){var I=z[P];if(P!=0&&I==z[P-1])A[P]=A[P-1];else if(P>W&&I==z[P-W])A[P]=A[P-W];else{var ee=V[I];if(ee==null&&(V[I]=ee=N.length,N.push(I),N.length>=300))break;A[P]=ee}}}var Z=N.length;Z<=256&&d==!1&&(Z<=2?h=1:Z<=4?h=2:Z<=16?h=4:h=8,h=Math.max(h,l));for(var p=0;p<F.length;p++){var v=F[p];v.rect.x,v.rect.y;var W=v.rect.width,X=v.rect.height,se=v.img;new Uint32Array(se.buffer);var U=4*W,E=4;if(Z<=256&&d==!1){U=Math.ceil(h*W/8);for(var O=new Uint8Array(U*X),L=R[p],G=0;G<X;G++){var P=G*U,K=G*W;if(h==8)for(var q=0;q<W;q++)O[P+q]=L[K+q];else if(h==4)for(var q=0;q<W;q++)O[P+(q>>1)]|=L[K+q]<<4-(q&1)*4;else if(h==2)for(var q=0;q<W;q++)O[P+(q>>2)]|=L[K+q]<<6-(q&3)*2;else if(h==1)for(var q=0;q<W;q++)O[P+(q>>3)]|=L[K+q]<<7-(q&7)*1}se=O,u=3,E=1}else if(g==!1&&F.length==1){for(var O=new Uint8Array(W*X*3),B=W*X,P=0;P<B;P++){var w=P*3,H=P*4;O[w]=se[H],O[w+1]=se[H+1],O[w+2]=se[H+2]}se=O,u=2,E=3,U=3*W}v.img=se,v.bpl=U,v.bpp=E}return{ctype:u,depth:h,plte:N,frames:F}};Bt.encode.framize=function(t,e,r,n,i,o){for(var s=[],a=0;a<t.length;a++){var l=new Uint8Array(t[a]),d=new Uint32Array(l.buffer),u,h=0,f=0,p=e,m=r,x=n?1:0;if(a!=0){for(var P=o||n||a==1||s[a-2].dispose!=0?1:2,g=0,F=1e9,V=0;V<P;V++){for(var v=new Uint8Array(t[a-1-V]),N=new Uint32Array(t[a-1-V]),R=e,M=r,C=-1,k=-1,D=0;D<r;D++)for(var $=0;$<e;$++){var w=D*e+$;d[w]!=N[w]&&($<R&&(R=$),$>C&&(C=$),D<M&&(M=D),D>k&&(k=D))}C==-1&&(R=M=C=k=0),i&&((R&1)==1&&R--,(M&1)==1&&M--);var _=(C-R+1)*(k-M+1);_<F&&(F=_,g=V,h=R,f=M,p=C-R+1,m=k-M+1)}var v=new Uint8Array(t[a-1-g]);g==1&&(s[a-1].dispose=2),u=new Uint8Array(p*m*4),Bt._copyTile(v,e,r,u,p,m,-h,-f,0),x=Bt._copyTile(l,e,r,u,p,m,-h,-f,3)?1:0,x==1?Bt.encode._prepareDiff(l,e,r,u,{x:h,y:f,width:p,height:m}):Bt._copyTile(l,e,r,u,p,m,-h,-f,0)}else u=l.slice(0);s.push({rect:{x:h,y:f,width:p,height:m},img:u,blend:x,dispose:0})}if(n)for(var a=0;a<s.length;a++){var z=s[a];if(z.blend!=1){var W=z.rect,A=s[a-1].rect,I=Math.min(W.x,A.x),ee=Math.min(W.y,A.y),Z=Math.max(W.x+W.width,A.x+A.width),X=Math.max(W.y+W.height,A.y+A.height),se={x:I,y:ee,width:Z-I,height:X-ee};s[a-1].dispose=1,a-1!=0&&Bt.encode._updateFrame(t,e,r,s,a-1,se,i),Bt.encode._updateFrame(t,e,r,s,a,se,i)}}var U=0;if(t.length!=1)for(var w=0;w<s.length;w++){var z=s[w];U+=z.rect.width*z.rect.height}return s};Bt.encode._updateFrame=function(t,e,r,n,i,o,s){for(var a=Uint8Array,l=Uint32Array,d=new a(t[i-1]),u=new l(t[i-1]),h=i+1<t.length?new a(t[i+1]):null,f=new a(t[i]),p=new l(f.buffer),m=e,x=r,P=-1,g=-1,F=0;F<o.height;F++)for(var V=0;V<o.width;V++){var N=o.x+V,R=o.y+F,M=R*e+N,C=p[M];C==0||n[i-1].dispose==0&&u[M]==C&&(h==null||h[M*4+3]!=0)||(N<m&&(m=N),N>P&&(P=N),R<x&&(x=R),R>g&&(g=R))}P==-1&&(m=x=P=g=0),s&&((m&1)==1&&m--,(x&1)==1&&x--),o={x:m,y:x,width:P-m+1,height:g-x+1};var k=n[i];k.rect=o,k.blend=1,k.img=new Uint8Array(o.width*o.height*4),n[i-1].dispose==0?(Bt._copyTile(d,e,r,k.img,o.width,o.height,-o.x,-o.y,0),Bt.encode._prepareDiff(f,e,r,k.img,o)):Bt._copyTile(f,e,r,k.img,o.width,o.height,-o.x,-o.y,0)};Bt.encode._prepareDiff=function(t,e,r,n,i){Bt._copyTile(t,e,r,n,i.width,i.height,-i.x,-i.y,2)};Bt.encode._filterZero=function(t,e,r,n,i,o,s){var a=[],l=[0,1,2,3,4];o!=-1?l=[o]:(e*n>5e5||r==1)&&(l=[0]);var d;s&&(d={level:0});for(var u=s&&UZIP!=null?UZIP:yg,h=0;h<l.length;h++){for(var f=0;f<e;f++)Bt.encode._filterLine(i,t,f,n,r,l[h]);a.push(u.deflate(i,d))}for(var p,m=1e9,h=0;h<a.length;h++)a[h].length<m&&(p=h,m=a[h].length);return a[p]};Bt.encode._filterLine=function(t,e,r,n,i,o){var s=r*n,a=s+r,l=Bt.decode._paeth;if(t[a]=o,a++,o==0)if(n<500)for(var d=0;d<n;d++)t[a+d]=e[s+d];else t.set(new Uint8Array(e.buffer,s,n),a);else if(o==1){for(var d=0;d<i;d++)t[a+d]=e[s+d];for(var d=i;d<n;d++)t[a+d]=e[s+d]-e[s+d-i]+256&255}else if(r==0){for(var d=0;d<i;d++)t[a+d]=e[s+d];if(o==2)for(var d=i;d<n;d++)t[a+d]=e[s+d];if(o==3)for(var d=i;d<n;d++)t[a+d]=e[s+d]-(e[s+d-i]>>1)+256&255;if(o==4)for(var d=i;d<n;d++)t[a+d]=e[s+d]-l(e[s+d-i],0,0)+256&255}else{if(o==2)for(var d=0;d<n;d++)t[a+d]=e[s+d]+256-e[s+d-n]&255;if(o==3){for(var d=0;d<i;d++)t[a+d]=e[s+d]+256-(e[s+d-n]>>1)&255;for(var d=i;d<n;d++)t[a+d]=e[s+d]+256-(e[s+d-n]+e[s+d-i]>>1)&255}if(o==4){for(var d=0;d<i;d++)t[a+d]=e[s+d]+256-l(0,e[s+d-n],0)&255;for(var d=i;d<n;d++)t[a+d]=e[s+d]+256-l(e[s+d-i],e[s+d-n],e[s+d-i-n])&255}}};Bt.crc={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var r=e,n=0;n<8;n++)r&1?r=3988292384^r>>>1:r=r>>>1;t[e]=r}return t}(),update:function(t,e,r,n){for(var i=0;i<n;i++)t=Bt.crc.table[(t^e[r+i])&255]^t>>>8;return t},crc:function(t,e,r){return Bt.crc.update(4294967295,t,e,r)^4294967295}};Bt.quantize=function(t,e){var r=new Uint8Array(t),n=r.slice(0),i=new Uint32Array(n.buffer),o=Bt.quantize.getKDtree(n,e),s=o[0],a=o[1];Bt.quantize.planeDst;for(var l=r,d=i,u=l.length,h=new Uint8Array(r.length>>2),f=0;f<u;f+=4){var p=l[f]*.00392156862745098,m=l[f+1]*(1/255),x=l[f+2]*(1/255),P=l[f+3]*(1/255),g=Bt.quantize.getNearest(s,p,m,x,P);h[f>>2]=g.ind,d[f>>2]=g.est.rgba}return{abuf:n.buffer,inds:h,plte:a}};Bt.quantize.getKDtree=function(t,e,r){r==null&&(r=1e-4);var n=new Uint32Array(t.buffer),i={i0:0,i1:t.length,bst:null,est:null,tdst:0,left:null,right:null};i.bst=Bt.quantize.stats(t,i.i0,i.i1),i.est=Bt.quantize.estats(i.bst);for(var o=[i];o.length<e;){for(var s=0,a=0,l=0;l<o.length;l++)o[l].est.L>s&&(s=o[l].est.L,a=l);if(s<r)break;var d=o[a],u=Bt.quantize.splitPixels(t,n,d.i0,d.i1,d.est.e,d.est.eMq255),h=d.i0>=u||d.i1<=u;if(h){d.est.L=0;continue}var f={i0:d.i0,i1:u,bst:null,est:null,tdst:0,left:null,right:null};f.bst=Bt.quantize.stats(t,f.i0,f.i1),f.est=Bt.quantize.estats(f.bst);var p={i0:u,i1:d.i1,bst:null,est:null,tdst:0,left:null,right:null};p.bst={R:[],m:[],N:d.bst.N-f.bst.N};for(var l=0;l<16;l++)p.bst.R[l]=d.bst.R[l]-f.bst.R[l];for(var l=0;l<4;l++)p.bst.m[l]=d.bst.m[l]-f.bst.m[l];p.est=Bt.quantize.estats(p.bst),d.left=f,d.right=p,o[a]=f,o.push(p)}o.sort(function(m,x){return x.bst.N-m.bst.N});for(var l=0;l<o.length;l++)o[l].ind=l;return[i,o]};Bt.quantize.getNearest=function(t,e,r,n,i){if(t.left==null)return t.tdst=Bt.quantize.dist(t.est.q,e,r,n,i),t;var o=Bt.quantize.planeDst(t.est,e,r,n,i),s=t.left,a=t.right;o>0&&(s=t.right,a=t.left);var l=Bt.quantize.getNearest(s,e,r,n,i);if(l.tdst<=o*o)return l;var d=Bt.quantize.getNearest(a,e,r,n,i);return d.tdst<l.tdst?d:l};Bt.quantize.planeDst=function(t,e,r,n,i){var o=t.e;return o[0]*e+o[1]*r+o[2]*n+o[3]*i-t.eMq};Bt.quantize.dist=function(t,e,r,n,i){var o=e-t[0],s=r-t[1],a=n-t[2],l=i-t[3];return o*o+s*s+a*a+l*l};Bt.quantize.splitPixels=function(t,e,r,n,i,o){var s=Bt.quantize.vecDot;for(n-=4;r<n;){for(;s(t,r,i)<=o;)r+=4;for(;s(t,n,i)>o;)n-=4;if(r>=n)break;var a=e[r>>2];e[r>>2]=e[n>>2],e[n>>2]=a,r+=4,n-=4}for(;s(t,r,i)>o;)r-=4;return r+4};Bt.quantize.vecDot=function(t,e,r){return t[e]*r[0]+t[e+1]*r[1]+t[e+2]*r[2]+t[e+3]*r[3]};Bt.quantize.stats=function(t,e,r){for(var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0],o=r-e>>2,s=e;s<r;s+=4){var a=t[s]*.00392156862745098,l=t[s+1]*(1/255),d=t[s+2]*(1/255),u=t[s+3]*(1/255);i[0]+=a,i[1]+=l,i[2]+=d,i[3]+=u,n[0]+=a*a,n[1]+=a*l,n[2]+=a*d,n[3]+=a*u,n[5]+=l*l,n[6]+=l*d,n[7]+=l*u,n[10]+=d*d,n[11]+=d*u,n[15]+=u*u}return n[4]=n[1],n[8]=n[2],n[9]=n[6],n[12]=n[3],n[13]=n[7],n[14]=n[11],{R:n,m:i,N:o}};Bt.quantize.estats=function(t){var e=t.R,r=t.m,n=t.N,i=r[0],o=r[1],s=r[2],a=r[3],l=n==0?0:1/n,d=[e[0]-i*i*l,e[1]-i*o*l,e[2]-i*s*l,e[3]-i*a*l,e[4]-o*i*l,e[5]-o*o*l,e[6]-o*s*l,e[7]-o*a*l,e[8]-s*i*l,e[9]-s*o*l,e[10]-s*s*l,e[11]-s*a*l,e[12]-a*i*l,e[13]-a*o*l,e[14]-a*s*l,e[15]-a*a*l],u=d,h=Bt.M4,f=[.5,.5,.5,.5],p=0,m=0;if(n!=0)for(var x=0;x<10&&(f=h.multVec(u,f),m=Math.sqrt(h.dot(f,f)),f=h.sml(1/m,f),!(Math.abs(m-p)<1e-9));x++)p=m;var P=[i*l,o*l,s*l,a*l],g=h.dot(h.sml(255,P),f);return{Cov:d,q:P,e:f,L:p,eMq255:g,eMq:h.dot(f,P),rgba:(Math.round(255*P[3])<<24|Math.round(255*P[2])<<16|Math.round(255*P[1])<<8|Math.round(255*P[0])<<0)>>>0}};Bt.M4={multVec:function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],t[4]*e[0]+t[5]*e[1]+t[6]*e[2]+t[7]*e[3],t[8]*e[0]+t[9]*e[1]+t[10]*e[2]+t[11]*e[3],t[12]*e[0]+t[13]*e[1]+t[14]*e[2]+t[15]*e[3]]},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},sml:function(t,e){return[t*e[0],t*e[1],t*e[2],t*e[3]]}};Bt.encode.concatRGBA=function(t){for(var e=0,r=0;r<t.length;r++)e+=t[r].byteLength;for(var n=new Uint8Array(e),i=0,r=0;r<t.length;r++){for(var o=new Uint8Array(t[r]),s=o.length,a=0;a<s;a+=4){var l=o[a],d=o[a+1],u=o[a+2],h=o[a+3];h==0&&(l=d=u=0),n[i+a]=l,n[i+a+1]=d,n[i+a+2]=u,n[i+a+3]=h}i+=s}return n.buffer};var iX=function(t){if(t===0)return id.Greyscale;if(t===2)return id.Truecolour;if(t===3)return id.IndexedColour;if(t===4)return id.GreyscaleWithAlpha;if(t===6)return id.TruecolourWithAlpha;throw new Error("Unknown color type: "+t)},oX=function(t){for(var e=Math.floor(t.length/4),r=new Uint8Array(e*3),n=new Uint8Array(e*1),i=0,o=0,s=0;i<t.length;)r[o++]=t[i++],r[o++]=t[i++],r[o++]=t[i++],n[s++]=t[i++];return{rgbChannel:r,alphaChannel:n}},id;(function(t){t.Greyscale="Greyscale",t.Truecolour="Truecolour",t.IndexedColour="IndexedColour",t.GreyscaleWithAlpha="GreyscaleWithAlpha",t.TruecolourWithAlpha="TruecolourWithAlpha"})(id||(id={}));var sX=function(){function t(e){var r=Bt.decode(e),n=Bt.toRGBA8(r);if(n.length>1)throw new Error("Animated PNGs are not supported");var i=new Uint8Array(n[0]),o=oX(i),s=o.rgbChannel,a=o.alphaChannel;this.rgbChannel=s;var l=a.some(function(d){return d<255});l&&(this.alphaChannel=a),this.type=iX(r.ctype),this.width=r.width,this.height=r.height,this.bitsPerComponent=8}return t.load=function(e){return new t(e)},t}(),h4=function(){function t(e){this.image=e,this.bitsPerComponent=e.bitsPerComponent,this.width=e.width,this.height=e.height,this.colorSpace="DeviceRGB"}return t.for=function(e){return jr(this,void 0,void 0,function(){var r;return Vr(this,function(n){return r=sX.load(e),[2,new t(r)]})})},t.prototype.embedIntoContext=function(e,r){return jr(this,void 0,void 0,function(){var n,i;return Vr(this,function(o){return n=this.embedAlphaChannel(e),i=e.flateStream(this.image.rgbChannel,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.image.bitsPerComponent,Width:this.image.width,Height:this.image.height,ColorSpace:this.colorSpace,SMask:n}),r?(e.assign(r,i),[2,r]):[2,e.register(i)]})})},t.prototype.embedAlphaChannel=function(e){if(this.image.alphaChannel){var r=e.flateStream(this.image.alphaChannel,{Type:"XObject",Subtype:"Image",Height:this.image.height,Width:this.image.width,BitsPerComponent:this.image.bitsPerComponent,ColorSpace:"DeviceGray",Decode:[0,1]});return e.register(r)}},t}(),p4=function(){function t(e,r,n){this.bytes=e,this.start=r||0,this.pos=this.start,this.end=r&&n?r+n:this.bytes.length}return Object.defineProperty(t.prototype,"length",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this.length===0},enumerable:!1,configurable:!0}),t.prototype.getByte=function(){return this.pos>=this.end?-1:this.bytes[this.pos++]},t.prototype.getUint16=function(){var e=this.getByte(),r=this.getByte();return e===-1||r===-1?-1:(e<<8)+r},t.prototype.getInt32=function(){var e=this.getByte(),r=this.getByte(),n=this.getByte(),i=this.getByte();return(e<<24)+(r<<16)+(n<<8)+i},t.prototype.getBytes=function(e,r){r===void 0&&(r=!1);var n=this.bytes,i=this.pos,o=this.end;if(e){var a=i+e;a>o&&(a=o),this.pos=a;var s=n.subarray(i,a);return r?new Uint8ClampedArray(s):s}else{var s=n.subarray(i,o);return r?new Uint8ClampedArray(s):s}},t.prototype.peekByte=function(){var e=this.getByte();return this.pos--,e},t.prototype.peekBytes=function(e,r){r===void 0&&(r=!1);var n=this.getBytes(e,r);return this.pos-=n.length,n},t.prototype.skip=function(e){e||(e=1),this.pos+=e},t.prototype.reset=function(){this.pos=this.start},t.prototype.moveStart=function(){this.start=this.pos},t.prototype.makeSubStream=function(e,r){return new t(this.bytes,e,r)},t.prototype.decode=function(){return this.bytes},t}(),aX=new Uint8Array(0),Qp=function(){function t(e){if(this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=aX,this.minBufferLength=512,e)for(;this.minBufferLength<e;)this.minBufferLength*=2}return Object.defineProperty(t.prototype,"isEmpty",{get:function(){for(;!this.eof&&this.bufferLength===0;)this.readBlock();return this.bufferLength===0},enumerable:!1,configurable:!0}),t.prototype.getByte=function(){for(var e=this.pos;this.bufferLength<=e;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]},t.prototype.getUint16=function(){var e=this.getByte(),r=this.getByte();return e===-1||r===-1?-1:(e<<8)+r},t.prototype.getInt32=function(){var e=this.getByte(),r=this.getByte(),n=this.getByte(),i=this.getByte();return(e<<24)+(r<<16)+(n<<8)+i},t.prototype.getBytes=function(e,r){r===void 0&&(r=!1);var n,i=this.pos;if(e){for(this.ensureBuffer(i+e),n=i+e;!this.eof&&this.bufferLength<n;)this.readBlock();var o=this.bufferLength;n>o&&(n=o)}else{for(;!this.eof;)this.readBlock();n=this.bufferLength}this.pos=n;var s=this.buffer.subarray(i,n);return r&&!(s instanceof Uint8ClampedArray)?new Uint8ClampedArray(s):s},t.prototype.peekByte=function(){var e=this.getByte();return this.pos--,e},t.prototype.peekBytes=function(e,r){r===void 0&&(r=!1);var n=this.getBytes(e,r);return this.pos-=n.length,n},t.prototype.skip=function(e){e||(e=1),this.pos+=e},t.prototype.reset=function(){this.pos=0},t.prototype.makeSubStream=function(e,r){for(var n=e+r;this.bufferLength<=n&&!this.eof;)this.readBlock();return new p4(this.buffer,e,r)},t.prototype.decode=function(){for(;!this.eof;)this.readBlock();return this.buffer.subarray(0,this.bufferLength)},t.prototype.readBlock=function(){throw new xs(this.constructor.name,"readBlock")},t.prototype.ensureBuffer=function(e){var r=this.buffer;if(e<=r.byteLength)return r;for(var n=this.minBufferLength;n<e;)n*=2;var i=new Uint8Array(n);return i.set(r),this.buffer=i},t}(),dw=function(t){return t===32||t===9||t===13||t===10},lX=function(t){Ht(e,t);function e(r,n){var i=t.call(this,n)||this;return i.stream=r,i.input=new Uint8Array(5),n&&(n=.8*n),i}return e.prototype.readBlock=function(){for(var r=126,n=122,i=-1,o=this.stream,s=o.getByte();dw(s);)s=o.getByte();if(s===i||s===r){this.eof=!0;return}var a=this.bufferLength,l,d;if(s===n){for(l=this.ensureBuffer(a+4),d=0;d<4;++d)l[a+d]=0;this.bufferLength+=4}else{var u=this.input;for(u[0]=s,d=1;d<5;++d){for(s=o.getByte();dw(s);)s=o.getByte();if(u[d]=s,s===i||s===r)break}if(l=this.ensureBuffer(a+d-1),this.bufferLength+=d-1,d<5){for(;d<5;++d)u[d]=117;this.eof=!0}var h=0;for(d=0;d<5;++d)h=h*85+(u[d]-33);for(d=3;d>=0;--d)l[a+d]=h&255,h>>=8}},e}(Qp),cX=function(t){Ht(e,t);function e(r,n){var i=t.call(this,n)||this;return i.stream=r,i.firstDigit=-1,n&&(n=.5*n),i}return e.prototype.readBlock=function(){var r=8e3,n=this.stream.getBytes(r);if(!n.length){this.eof=!0;return}for(var i=n.length+1>>1,o=this.ensureBuffer(this.bufferLength+i),s=this.bufferLength,a=this.firstDigit,l=0,d=n.length;l<d;l++){var u=n[l],h=void 0;if(u>=48&&u<=57)h=u&15;else if(u>=65&&u<=70||u>=97&&u<=102)h=(u&15)+9;else if(u===62){this.eof=!0;break}else continue;a<0?a=h:(o[s++]=a<<4|h,a=-1)}a>=0&&this.eof&&(o[s++]=a<<4,a=-1),this.firstDigit=a,this.bufferLength=s},e}(Qp),uw=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dX=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),uX=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),hX=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],pX=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5],fX=function(t){Ht(e,t);function e(r,n){var i=t.call(this,n)||this;i.stream=r;var o=r.getByte(),s=r.getByte();if(o===-1||s===-1)throw new Error("Invalid header in flate stream: "+o+", "+s);if((o&15)!==8)throw new Error("Unknown compression method in flate stream: "+o+", "+s);if(((o<<8)+s)%31!==0)throw new Error("Bad FCHECK in flate stream: "+o+", "+s);if(s&32)throw new Error("FDICT bit set in flate stream: "+o+", "+s);return i.codeSize=0,i.codeBuf=0,i}return e.prototype.readBlock=function(){var r,n,i=this.stream,o=this.getBits(3);if(o&1&&(this.eof=!0),o>>=1,o===0){var s=void 0;if((s=i.getByte())===-1)throw new Error("Bad block header in flate stream");var a=s;if((s=i.getByte())===-1)throw new Error("Bad block header in flate stream");if(a|=s<<8,(s=i.getByte())===-1)throw new Error("Bad block header in flate stream");var l=s;if((s=i.getByte())===-1)throw new Error("Bad block header in flate stream");if(l|=s<<8,l!==(~a&65535)&&(a!==0||l!==0))throw new Error("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;var d=this.bufferLength;r=this.ensureBuffer(d+a);var u=d+a;if(this.bufferLength=u,a===0)i.peekByte()===-1&&(this.eof=!0);else for(var h=d;h<u;++h){if((s=i.getByte())===-1){this.eof=!0;break}r[h]=s}return}var f,p;if(o===1)f=hX,p=pX;else if(o===2){var m=this.getBits(5)+257,x=this.getBits(5)+1,P=this.getBits(4)+4,g=new Uint8Array(uw.length),F=void 0;for(F=0;F<P;++F)g[uw[F]]=this.getBits(3);var V=this.generateHuffmanTable(g);n=0,F=0;for(var N=m+x,R=new Uint8Array(N),M=void 0,C=void 0,k=void 0;F<N;){var D=this.getCode(V);if(D===16)M=2,C=3,k=n;else if(D===17)M=3,C=3,k=n=0;else if(D===18)M=7,C=11,k=n=0;else{R[F++]=n=D;continue}for(var $=this.getBits(M)+C;$-- >0;)R[F++]=k}f=this.generateHuffmanTable(R.subarray(0,m)),p=this.generateHuffmanTable(R.subarray(m,N))}else throw new Error("Unknown block type in flate stream");r=this.buffer;for(var w=r?r.length:0,_=this.bufferLength;;){var v=this.getCode(f);if(v<256){_+1>=w&&(r=this.ensureBuffer(_+1),w=r.length),r[_++]=v;continue}if(v===256){this.bufferLength=_;return}v-=257,v=dX[v];var z=v>>16;z>0&&(z=this.getBits(z)),n=(v&65535)+z,v=this.getCode(p),v=uX[v],z=v>>16,z>0&&(z=this.getBits(z));var W=(v&65535)+z;_+n>=w&&(r=this.ensureBuffer(_+n),w=r.length);for(var A=0;A<n;++A,++_)r[_]=r[_-W]}},e.prototype.getBits=function(r){for(var n=this.stream,i=this.codeSize,o=this.codeBuf,s;i<r;){if((s=n.getByte())===-1)throw new Error("Bad encoding in flate stream");o|=s<<i,i+=8}return s=o&(1<<r)-1,this.codeBuf=o>>r,this.codeSize=i-=r,s},e.prototype.getCode=function(r){for(var n=this.stream,i=r[0],o=r[1],s=this.codeSize,a=this.codeBuf,l;s<o&&(l=n.getByte())!==-1;)a|=l<<s,s+=8;var d=i[a&(1<<o)-1];typeof i=="number"&&console.log("FLATE:",d);var u=d>>16,h=d&65535;if(u<1||s<u)throw new Error("Bad encoding in flate stream");return this.codeBuf=a>>u,this.codeSize=s-u,h},e.prototype.generateHuffmanTable=function(r){var n=r.length,i=0,o;for(o=0;o<n;++o)r[o]>i&&(i=r[o]);for(var s=1<<i,a=new Int32Array(s),l=1,d=0,u=2;l<=i;++l,d<<=1,u<<=1)for(var h=0;h<n;++h)if(r[h]===l){var f=0,p=d;for(o=0;o<l;++o)f=f<<1|p&1,p>>=1;for(o=f;o<s;o+=u)a[o]=l<<16|h;++d}return[a,i]},e}(Qp),yX=function(t){Ht(e,t);function e(r,n,i){var o=t.call(this,n)||this;o.stream=r,o.cachedData=0,o.bitsCached=0;for(var s=4096,a={earlyChange:i,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(s),dictionaryLengths:new Uint16Array(s),dictionaryPrevCodes:new Uint16Array(s),currentSequence:new Uint8Array(s),currentSequenceLength:0},l=0;l<256;++l)a.dictionaryValues[l]=l,a.dictionaryLengths[l]=1;return o.lzwState=a,o}return e.prototype.readBlock=function(){var r=512,n=r*2,i=r,o,s,a,l=this.lzwState;if(l){var d=l.earlyChange,u=l.nextCode,h=l.dictionaryValues,f=l.dictionaryLengths,p=l.dictionaryPrevCodes,m=l.codeLength,x=l.prevCode,P=l.currentSequence,g=l.currentSequenceLength,F=0,V=this.bufferLength,N=this.ensureBuffer(this.bufferLength+n);for(o=0;o<r;o++){var R=this.readBits(m),M=g>0;if(!R||R<256)P[0]=R,g=1;else if(R>=258)if(R<u)for(g=f[R],s=g-1,a=R;s>=0;s--)P[s]=h[a],a=p[a];else P[g++]=P[0];else if(R===256){m=9,u=258,g=0;continue}else{this.eof=!0,delete this.lzwState;break}if(M&&(p[u]=x,f[u]=f[x]+1,h[u]=P[0],u++,m=u+d&u+d-1?m:Math.min(Math.log(u+d)/.6931471805599453+1,12)|0),x=R,F+=g,n<F){do n+=i;while(n<F);N=this.ensureBuffer(this.bufferLength+n)}for(s=0;s<g;s++)N[V++]=P[s]}l.nextCode=u,l.codeLength=m,l.prevCode=x,l.currentSequenceLength=g,this.bufferLength=V}},e.prototype.readBits=function(r){for(var n=this.bitsCached,i=this.cachedData;n<r;){var o=this.stream.getByte();if(o===-1)return this.eof=!0,null;i=i<<8|o,n+=8}return this.bitsCached=n-=r,this.cachedData=i,i>>>n&(1<<r)-1},e}(Qp),mX=function(t){Ht(e,t);function e(r,n){var i=t.call(this,n)||this;return i.stream=r,i}return e.prototype.readBlock=function(){var r=this.stream.getBytes(2);if(!r||r.length<2||r[0]===128){this.eof=!0;return}var n,i=this.bufferLength,o=r[0];if(o<128){if(n=this.ensureBuffer(i+o+1),n[i++]=r[1],o>0){var s=this.stream.getBytes(o);n.set(s,i),i+=o}}else{o=257-o;var a=r[1];n=this.ensureBuffer(i+o+1);for(var l=0;l<o;l++)n[i++]=a}this.bufferLength=i},e}(Qp),hw=function(t,e,r){if(e===Ke.of("FlateDecode"))return new fX(t);if(e===Ke.of("LZWDecode")){var n=1;if(r instanceof Or){var i=r.lookup(Ke.of("EarlyChange"));i instanceof Cr&&(n=i.asNumber())}return new yX(t,void 0,n)}if(e===Ke.of("ASCII85Decode"))return new lX(t);if(e===Ke.of("ASCIIHexDecode"))return new cX(t);if(e===Ke.of("RunLengthDecode"))return new mX(t);throw new _Y(e.asString())},f4=function(t){var e=t.dict,r=t.contents,n=new p4(r),i=e.lookup(Ke.of("Filter")),o=e.lookup(Ke.of("DecodeParms"));if(i instanceof Ke)n=hw(n,i,o);else if(i instanceof pn)for(var s=0,a=i.size();s<a;s++)n=hw(n,i.lookup(s,Ke),o&&o.lookupMaybe(s,Or));else if(i)throw new Pm([Ke,pn],i);return n},gX=function(t){var e=t.MediaBox(),r=e.lookup(2,Cr).asNumber()-e.lookup(0,Cr).asNumber(),n=e.lookup(3,Cr).asNumber()-e.lookup(1,Cr).asNumber();return{left:0,bottom:0,right:r,top:n}},vX=function(t){return[1,0,0,1,-t.left,-t.bottom]},y4=function(){function t(e,r,n){this.page=e;var i=r??gX(e);this.width=i.right-i.left,this.height=i.top-i.bottom,this.boundingBox=i,this.transformationMatrix=n??vX(i)}return t.for=function(e,r,n){return jr(this,void 0,void 0,function(){return Vr(this,function(i){return[2,new t(e,r,n)]})})},t.prototype.embedIntoContext=function(e,r){return jr(this,void 0,void 0,function(){var n,i,o,s,a,l,d,u,h,f;return Vr(this,function(p){if(n=this.page.normalizedEntries(),i=n.Contents,o=n.Resources,!i)throw new AY;return s=this.decodeContents(i),a=this.boundingBox,l=a.left,d=a.bottom,u=a.right,h=a.top,f=e.flateStream(s,{Type:"XObject",Subtype:"Form",FormType:1,BBox:[l,d,u,h],Matrix:this.transformationMatrix,Resources:o}),r?(e.assign(r,f),[2,r]):[2,e.register(f)]})})},t.prototype.decodeContents=function(e){for(var r=Uint8Array.of(Xe.Newline),n=[],i=0,o=e.size();i<o;i++){var s=e.lookup(i,ns),a=void 0;if(s instanceof Dp)a=f4(s).decode();else if(s instanceof cp)a=s.getUnencodedContents();else throw new kY(s);n.push(a,r)}return _K.apply(void 0,n)},t}(),py=function(t,e){if(t!==void 0)return e[t]},dp;(function(t){t.UseNone="UseNone",t.UseOutlines="UseOutlines",t.UseThumbs="UseThumbs",t.UseOC="UseOC"})(dp||(dp={}));var up;(function(t){t.L2R="L2R",t.R2L="R2L"})(up||(up={}));var hp;(function(t){t.None="None",t.AppDefault="AppDefault"})(hp||(hp={}));var wm;(function(t){t.Simplex="Simplex",t.DuplexFlipShortEdge="DuplexFlipShortEdge",t.DuplexFlipLongEdge="DuplexFlipLongEdge"})(wm||(wm={}));var pw=function(){function t(e){this.dict=e}return t.prototype.lookupBool=function(e){var r=this.dict.lookup(Ke.of(e));if(r instanceof Rp)return r},t.prototype.lookupName=function(e){var r=this.dict.lookup(Ke.of(e));if(r instanceof Ke)return r},t.prototype.HideToolbar=function(){return this.lookupBool("HideToolbar")},t.prototype.HideMenubar=function(){return this.lookupBool("HideMenubar")},t.prototype.HideWindowUI=function(){return this.lookupBool("HideWindowUI")},t.prototype.FitWindow=function(){return this.lookupBool("FitWindow")},t.prototype.CenterWindow=function(){return this.lookupBool("CenterWindow")},t.prototype.DisplayDocTitle=function(){return this.lookupBool("DisplayDocTitle")},t.prototype.NonFullScreenPageMode=function(){return this.lookupName("NonFullScreenPageMode")},t.prototype.Direction=function(){return this.lookupName("Direction")},t.prototype.PrintScaling=function(){return this.lookupName("PrintScaling")},t.prototype.Duplex=function(){return this.lookupName("Duplex")},t.prototype.PickTrayByPDFSize=function(){return this.lookupBool("PickTrayByPDFSize")},t.prototype.PrintPageRange=function(){var e=this.dict.lookup(Ke.of("PrintPageRange"));if(e instanceof pn)return e},t.prototype.NumCopies=function(){var e=this.dict.lookup(Ke.of("NumCopies"));if(e instanceof Cr)return e},t.prototype.getHideToolbar=function(){var e,r;return(r=(e=this.HideToolbar())===null||e===void 0?void 0:e.asBoolean())!==null&&r!==void 0?r:!1},t.prototype.getHideMenubar=function(){var e,r;return(r=(e=this.HideMenubar())===null||e===void 0?void 0:e.asBoolean())!==null&&r!==void 0?r:!1},t.prototype.getHideWindowUI=function(){var e,r;return(r=(e=this.HideWindowUI())===null||e===void 0?void 0:e.asBoolean())!==null&&r!==void 0?r:!1},t.prototype.getFitWindow=function(){var e,r;return(r=(e=this.FitWindow())===null||e===void 0?void 0:e.asBoolean())!==null&&r!==void 0?r:!1},t.prototype.getCenterWindow=function(){var e,r;return(r=(e=this.CenterWindow())===null||e===void 0?void 0:e.asBoolean())!==null&&r!==void 0?r:!1},t.prototype.getDisplayDocTitle=function(){var e,r;return(r=(e=this.DisplayDocTitle())===null||e===void 0?void 0:e.asBoolean())!==null&&r!==void 0?r:!1},t.prototype.getNonFullScreenPageMode=function(){var e,r,n=(e=this.NonFullScreenPageMode())===null||e===void 0?void 0:e.decodeText();return(r=py(n,dp))!==null&&r!==void 0?r:dp.UseNone},t.prototype.getReadingDirection=function(){var e,r,n=(e=this.Direction())===null||e===void 0?void 0:e.decodeText();return(r=py(n,up))!==null&&r!==void 0?r:up.L2R},t.prototype.getPrintScaling=function(){var e,r,n=(e=this.PrintScaling())===null||e===void 0?void 0:e.decodeText();return(r=py(n,hp))!==null&&r!==void 0?r:hp.AppDefault},t.prototype.getDuplex=function(){var e,r=(e=this.Duplex())===null||e===void 0?void 0:e.decodeText();return py(r,wm)},t.prototype.getPickTrayByPDFSize=function(){var e;return(e=this.PickTrayByPDFSize())===null||e===void 0?void 0:e.asBoolean()},t.prototype.getPrintPageRange=function(){var e=this.PrintPageRange();if(!e)return[];for(var r=[],n=0;n<e.size();n+=2){var i=e.lookup(n,Cr).asNumber(),o=e.lookup(n+1,Cr).asNumber();r.push({start:i,end:o})}return r},t.prototype.getNumCopies=function(){var e,r;return(r=(e=this.NumCopies())===null||e===void 0?void 0:e.asNumber())!==null&&r!==void 0?r:1},t.prototype.setHideToolbar=function(e){var r=this.dict.context.obj(e);this.dict.set(Ke.of("HideToolbar"),r)},t.prototype.setHideMenubar=function(e){var r=this.dict.context.obj(e);this.dict.set(Ke.of("HideMenubar"),r)},t.prototype.setHideWindowUI=function(e){var r=this.dict.context.obj(e);this.dict.set(Ke.of("HideWindowUI"),r)},t.prototype.setFitWindow=function(e){var r=this.dict.context.obj(e);this.dict.set(Ke.of("FitWindow"),r)},t.prototype.setCenterWindow=function(e){var r=this.dict.context.obj(e);this.dict.set(Ke.of("CenterWindow"),r)},t.prototype.setDisplayDocTitle=function(e){var r=this.dict.context.obj(e);this.dict.set(Ke.of("DisplayDocTitle"),r)},t.prototype.setNonFullScreenPageMode=function(e){ic(e,"nonFullScreenPageMode",dp);var r=Ke.of(e);this.dict.set(Ke.of("NonFullScreenPageMode"),r)},t.prototype.setReadingDirection=function(e){ic(e,"readingDirection",up);var r=Ke.of(e);this.dict.set(Ke.of("Direction"),r)},t.prototype.setPrintScaling=function(e){ic(e,"printScaling",hp);var r=Ke.of(e);this.dict.set(Ke.of("PrintScaling"),r)},t.prototype.setDuplex=function(e){ic(e,"duplex",wm);var r=Ke.of(e);this.dict.set(Ke.of("Duplex"),r)},t.prototype.setPickTrayByPDFSize=function(e){var r=this.dict.context.obj(e);this.dict.set(Ke.of("PickTrayByPDFSize"),r)},t.prototype.setPrintPageRange=function(e){Array.isArray(e)||(e=[e]);for(var r=[],n=0,i=e.length;n<i;n++)r.push(e[n].start),r.push(e[n].end);n4(r,"printPageRange",["number"]);var o=this.dict.context.obj(r);this.dict.set(Ke.of("PrintPageRange"),o)},t.prototype.setNumCopies=function(e){ts(e,"numCopies",1,Number.MAX_VALUE),CY(e,"numCopies");var r=this.dict.context.obj(e);this.dict.set(Ke.of("NumCopies"),r)},t.fromDict=function(e){return new t(e)},t.create=function(e){var r=e.obj({});return new t(r)},t}(),bX=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+Tf/,m4=function(){function t(e,r){this.dict=e,this.ref=r}return t.prototype.T=function(){return this.dict.lookupMaybe(Ke.of("T"),vn,vr)},t.prototype.Ff=function(){var e=this.getInheritableAttribute(Ke.of("Ff"));return this.dict.context.lookupMaybe(e,Cr)},t.prototype.V=function(){var e=this.getInheritableAttribute(Ke.of("V"));return this.dict.context.lookup(e)},t.prototype.Kids=function(){return this.dict.lookupMaybe(Ke.of("Kids"),pn)},t.prototype.DA=function(){var e=this.dict.lookup(Ke.of("DA"));if(e instanceof vn||e instanceof vr)return e},t.prototype.setKids=function(e){this.dict.set(Ke.of("Kids"),this.dict.context.obj(e))},t.prototype.getParent=function(){var e=this.dict.get(Ke.of("Parent"));if(e instanceof bn){var r=this.dict.lookup(Ke.of("Parent"),Or);return new t(r,e)}},t.prototype.setParent=function(e){e?this.dict.set(Ke.of("Parent"),e):this.dict.delete(Ke.of("Parent"))},t.prototype.getFullyQualifiedName=function(){var e=this.getParent();return e?e.getFullyQualifiedName()+"."+this.getPartialName():this.getPartialName()},t.prototype.getPartialName=function(){var e;return(e=this.T())===null||e===void 0?void 0:e.decodeText()},t.prototype.setPartialName=function(e){e?this.dict.set(Ke.of("T"),vr.fromText(e)):this.dict.delete(Ke.of("T"))},t.prototype.setDefaultAppearance=function(e){this.dict.set(Ke.of("DA"),vn.of(e))},t.prototype.getDefaultAppearance=function(){var e=this.DA();return e instanceof vr?e.decodeText():e?.asString()},t.prototype.setFontSize=function(e){var r,n=(r=this.getFullyQualifiedName())!==null&&r!==void 0?r:"",i=this.getDefaultAppearance();if(!i)throw new NY(n);var o=h2(i,bX);if(!o.match)throw new RY(n);var s=i.slice(0,o.pos-o.match[0].length),a=o.pos<=i.length?i.slice(o.pos):"",l=o.match[1],d=s+" /"+l+" "+e+" Tf "+a;this.setDefaultAppearance(d)},t.prototype.getFlags=function(){var e,r;return(r=(e=this.Ff())===null||e===void 0?void 0:e.asNumber())!==null&&r!==void 0?r:0},t.prototype.setFlags=function(e){this.dict.set(Ke.of("Ff"),Cr.of(e))},t.prototype.hasFlag=function(e){var r=this.getFlags();return(r&e)!==0},t.prototype.setFlag=function(e){var r=this.getFlags();this.setFlags(r|e)},t.prototype.clearFlag=function(e){var r=this.getFlags();this.setFlags(r&~e)},t.prototype.setFlagTo=function(e,r){r?this.setFlag(e):this.clearFlag(e)},t.prototype.getInheritableAttribute=function(e){var r;return this.ascend(function(n){r||(r=n.dict.get(e))}),r},t.prototype.ascend=function(e){e(this);var r=this.getParent();r&&r.ascend(e)},t}(),g0=function(){function t(e){this.dict=e}return t.prototype.W=function(){var e=this.dict.lookup(Ke.of("W"));if(e instanceof Cr)return e},t.prototype.getWidth=function(){var e,r;return(r=(e=this.W())===null||e===void 0?void 0:e.asNumber())!==null&&r!==void 0?r:1},t.prototype.setWidth=function(e){var r=this.dict.context.obj(e);this.dict.set(Ke.of("W"),r)},t.fromDict=function(e){return new t(e)},t}(),PX=function(){function t(e){this.dict=e}return t.prototype.Rect=function(){return this.dict.lookup(Ke.of("Rect"),pn)},t.prototype.AP=function(){return this.dict.lookupMaybe(Ke.of("AP"),Or)},t.prototype.F=function(){var e=this.dict.lookup(Ke.of("F"));return this.dict.context.lookupMaybe(e,Cr)},t.prototype.getRectangle=function(){var e,r=this.Rect();return(e=r?.asRectangle())!==null&&e!==void 0?e:{x:0,y:0,width:0,height:0}},t.prototype.setRectangle=function(e){var r=e.x,n=e.y,i=e.width,o=e.height,s=this.dict.context.obj([r,n,r+i,n+o]);this.dict.set(Ke.of("Rect"),s)},t.prototype.getAppearanceState=function(){var e=this.dict.lookup(Ke.of("AS"));if(e instanceof Ke)return e},t.prototype.setAppearanceState=function(e){this.dict.set(Ke.of("AS"),e)},t.prototype.setAppearances=function(e){this.dict.set(Ke.of("AP"),e)},t.prototype.ensureAP=function(){var e=this.AP();return e||(e=this.dict.context.obj({}),this.dict.set(Ke.of("AP"),e)),e},t.prototype.getNormalAppearance=function(){var e=this.ensureAP(),r=e.get(Ke.of("N"));if(r instanceof bn||r instanceof Or)return r;throw new Error("Unexpected N type: "+r?.constructor.name)},t.prototype.setNormalAppearance=function(e){var r=this.ensureAP();r.set(Ke.of("N"),e)},t.prototype.setRolloverAppearance=function(e){var r=this.ensureAP();r.set(Ke.of("R"),e)},t.prototype.setDownAppearance=function(e){var r=this.ensureAP();r.set(Ke.of("D"),e)},t.prototype.removeRolloverAppearance=function(){var e=this.AP();e?.delete(Ke.of("R"))},t.prototype.removeDownAppearance=function(){var e=this.AP();e?.delete(Ke.of("D"))},t.prototype.getAppearances=function(){var e=this.AP();if(e){var r=e.lookup(Ke.of("N"),Or,ns),n=e.lookupMaybe(Ke.of("R"),Or,ns),i=e.lookupMaybe(Ke.of("D"),Or,ns);return{normal:r,rollover:n,down:i}}},t.prototype.getFlags=function(){var e,r;return(r=(e=this.F())===null||e===void 0?void 0:e.asNumber())!==null&&r!==void 0?r:0},t.prototype.setFlags=function(e){this.dict.set(Ke.of("F"),Cr.of(e))},t.prototype.hasFlag=function(e){var r=this.getFlags();return(r&e)!==0},t.prototype.setFlag=function(e){var r=this.getFlags();this.setFlags(r|e)},t.prototype.clearFlag=function(e){var r=this.getFlags();this.setFlags(r&~e)},t.prototype.setFlagTo=function(e,r){r?this.setFlag(e):this.clearFlag(e)},t.fromDict=function(e){return new t(e)},t}(),v0=function(){function t(e){this.dict=e}return t.prototype.R=function(){var e=this.dict.lookup(Ke.of("R"));if(e instanceof Cr)return e},t.prototype.BC=function(){var e=this.dict.lookup(Ke.of("BC"));if(e instanceof pn)return e},t.prototype.BG=function(){var e=this.dict.lookup(Ke.of("BG"));if(e instanceof pn)return e},t.prototype.CA=function(){var e=this.dict.lookup(Ke.of("CA"));if(e instanceof vr||e instanceof vn)return e},t.prototype.RC=function(){var e=this.dict.lookup(Ke.of("RC"));if(e instanceof vr||e instanceof vn)return e},t.prototype.AC=function(){var e=this.dict.lookup(Ke.of("AC"));if(e instanceof vr||e instanceof vn)return e},t.prototype.getRotation=function(){var e;return(e=this.R())===null||e===void 0?void 0:e.asNumber()},t.prototype.getBorderColor=function(){var e=this.BC();if(e){for(var r=[],n=0,i=e?.size();n<i;n++){var o=e.get(n);o instanceof Cr&&r.push(o.asNumber())}return r}},t.prototype.getBackgroundColor=function(){var e=this.BG();if(e){for(var r=[],n=0,i=e?.size();n<i;n++){var o=e.get(n);o instanceof Cr&&r.push(o.asNumber())}return r}},t.prototype.getCaptions=function(){var e=this.CA(),r=this.RC(),n=this.AC();return{normal:e?.decodeText(),rollover:r?.decodeText(),down:n?.decodeText()}},t.prototype.setRotation=function(e){var r=this.dict.context.obj(e);this.dict.set(Ke.of("R"),r)},t.prototype.setBorderColor=function(e){var r=this.dict.context.obj(e);this.dict.set(Ke.of("BC"),r)},t.prototype.setBackgroundColor=function(e){var r=this.dict.context.obj(e);this.dict.set(Ke.of("BG"),r)},t.prototype.setCaptions=function(e){var r=vr.fromText(e.normal);if(this.dict.set(Ke.of("CA"),r),e.rollover){var n=vr.fromText(e.rollover);this.dict.set(Ke.of("RC"),n)}else this.dict.delete(Ke.of("RC"));if(e.down){var i=vr.fromText(e.down);this.dict.set(Ke.of("AC"),i)}else this.dict.delete(Ke.of("AC"))},t.fromDict=function(e){return new t(e)},t}(),I1=function(t){Ht(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.MK=function(){var r=this.dict.lookup(Ke.of("MK"));if(r instanceof Or)return r},e.prototype.BS=function(){var r=this.dict.lookup(Ke.of("BS"));if(r instanceof Or)return r},e.prototype.DA=function(){var r=this.dict.lookup(Ke.of("DA"));if(r instanceof vn||r instanceof vr)return r},e.prototype.P=function(){var r=this.dict.get(Ke.of("P"));if(r instanceof bn)return r},e.prototype.setP=function(r){this.dict.set(Ke.of("P"),r)},e.prototype.setDefaultAppearance=function(r){this.dict.set(Ke.of("DA"),vn.of(r))},e.prototype.getDefaultAppearance=function(){var r=this.DA();return r instanceof vr?r.decodeText():r?.asString()},e.prototype.getAppearanceCharacteristics=function(){var r=this.MK();if(r)return v0.fromDict(r)},e.prototype.getOrCreateAppearanceCharacteristics=function(){var r=this.MK();if(r)return v0.fromDict(r);var n=v0.fromDict(this.dict.context.obj({}));return this.dict.set(Ke.of("MK"),n.dict),n},e.prototype.getBorderStyle=function(){var r=this.BS();if(r)return g0.fromDict(r)},e.prototype.getOrCreateBorderStyle=function(){var r=this.BS();if(r)return g0.fromDict(r);var n=g0.fromDict(this.dict.context.obj({}));return this.dict.set(Ke.of("BS"),n.dict),n},e.prototype.getOnValue=function(){var r,n=(r=this.getAppearances())===null||r===void 0?void 0:r.normal;if(n instanceof Or)for(var i=n.keys(),o=0,s=i.length;o<s;o++){var a=i[o];if(a!==Ke.of("Off"))return a}},e.fromDict=function(r){return new e(r)},e.create=function(r,n){var i=r.obj({Type:"Annot",Subtype:"Widget",Rect:[0,0,0,0],Parent:n});return new e(i)},e}(PX),Ku=function(t){Ht(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.FT=function(){var r=this.getInheritableAttribute(Ke.of("FT"));return this.dict.context.lookup(r,Ke)},e.prototype.getWidgets=function(){var r=this.Kids();if(!r)return[I1.fromDict(this.dict)];for(var n=new Array(r.size()),i=0,o=r.size();i<o;i++){var s=r.lookup(i,Or);n[i]=I1.fromDict(s)}return n},e.prototype.addWidget=function(r){var n=this.normalizedEntries().Kids;n.push(r)},e.prototype.removeWidget=function(r){var n=this.Kids();if(n){if(r<0||r>n.size())throw new xm(r,0,n.size());n.remove(r)}else{if(r!==0)throw new xm(r,0,0);this.setKids([])}},e.prototype.normalizedEntries=function(){var r=this.Kids();return r||(r=this.dict.context.obj([this.ref]),this.dict.set(Ke.of("Kids"),r)),{Kids:r}},e.fromDict=function(r,n){return new e(r,n)},e}(m4),x2=function(t){Ht(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.Opt=function(){return this.dict.lookupMaybe(Ke.of("Opt"),vn,vr,pn)},e.prototype.setOpt=function(r){this.dict.set(Ke.of("Opt"),this.dict.context.obj(r))},e.prototype.getExportValues=function(){var r=this.Opt();if(r){if(r instanceof vn||r instanceof vr)return[r];for(var n=[],i=0,o=r.size();i<o;i++){var s=r.lookup(i);(s instanceof vn||s instanceof vr)&&n.push(s)}return n}},e.prototype.removeExportValue=function(r){var n=this.Opt();if(n)if(n instanceof vn||n instanceof vr){if(r!==0)throw new xm(r,0,0);this.setOpt([])}else{if(r<0||r>n.size())throw new xm(r,0,n.size());n.remove(r)}},e.prototype.normalizeExportValues=function(){for(var r,n,i,o,s=(r=this.getExportValues())!==null&&r!==void 0?r:[],a=[],l=this.getWidgets(),d=0,u=l.length;d<u;d++){var h=l[d],f=(n=s[d])!==null&&n!==void 0?n:vr.fromText((o=(i=h.getOnValue())===null||i===void 0?void 0:i.decodeText())!==null&&o!==void 0?o:"");a.push(f)}this.setOpt(a)},e.prototype.addOpt=function(r,n){var i;this.normalizeExportValues();var o=r.decodeText(),s;if(n)for(var a=(i=this.getExportValues())!==null&&i!==void 0?i:[],l=0,d=a.length;l<d;l++){var u=a[l];u.decodeText()===o&&(s=l)}var h=this.Opt();return h.push(r),s??h.size()-1},e.prototype.addWidgetWithOpt=function(r,n,i){var o=this.addOpt(n,i),s=Ke.of(String(o));return this.addWidget(r),s},e}(Ku),bg=function(t){Ht(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.setValue=function(r){var n,i=(n=this.getOnValue())!==null&&n!==void 0?n:Ke.of("Yes");if(r!==i&&r!==Ke.of("Off"))throw new m2;this.dict.set(Ke.of("V"),r);for(var o=this.getWidgets(),s=0,a=o.length;s<a;s++){var l=o[s],d=l.getOnValue()===r?r:Ke.of("Off");l.setAppearanceState(d)}},e.prototype.getValue=function(){var r=this.V();return r instanceof Ke?r:Ke.of("Off")},e.prototype.getOnValue=function(){var r=this.getWidgets()[0];return r?.getOnValue()},e.fromDict=function(r,n){return new e(r,n)},e.create=function(r){var n=r.obj({FT:"Btn",Kids:[]}),i=r.register(n);return new e(n,i)},e}(x2),gi=function(t){return 1<<t},Hs;(function(t){t[t.ReadOnly=gi(0)]="ReadOnly",t[t.Required=gi(1)]="Required",t[t.NoExport=gi(2)]="NoExport"})(Hs||(Hs={}));var vs;(function(t){t[t.NoToggleToOff=gi(14)]="NoToggleToOff",t[t.Radio=gi(15)]="Radio",t[t.PushButton=gi(16)]="PushButton",t[t.RadiosInUnison=gi(25)]="RadiosInUnison"})(vs||(vs={}));var Jn;(function(t){t[t.Multiline=gi(12)]="Multiline",t[t.Password=gi(13)]="Password",t[t.FileSelect=gi(20)]="FileSelect",t[t.DoNotSpellCheck=gi(22)]="DoNotSpellCheck",t[t.DoNotScroll=gi(23)]="DoNotScroll",t[t.Comb=gi(24)]="Comb",t[t.RichText=gi(25)]="RichText"})(Jn||(Jn={}));var gn;(function(t){t[t.Combo=gi(17)]="Combo",t[t.Edit=gi(18)]="Edit",t[t.Sort=gi(19)]="Sort",t[t.MultiSelect=gi(21)]="MultiSelect",t[t.DoNotSpellCheck=gi(22)]="DoNotSpellCheck",t[t.CommitOnSelChange=gi(26)]="CommitOnSelChange"})(gn||(gn={}));var g4=function(t){Ht(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.setValues=function(r){if(this.hasFlag(gn.Combo)&&!this.hasFlag(gn.Edit)&&!this.valuesAreValid(r))throw new m2;if(r.length===0&&this.dict.delete(Ke.of("V")),r.length===1&&this.dict.set(Ke.of("V"),r[0]),r.length>1){if(!this.hasFlag(gn.MultiSelect))throw new IY;this.dict.set(Ke.of("V"),this.dict.context.obj(r))}this.updateSelectedIndices(r)},e.prototype.valuesAreValid=function(r){for(var n=this.getOptions(),i=function(l,d){var u=r[l].decodeText();if(!n.find(function(h){return u===(h.display||h.value).decodeText()}))return{value:!1}},o=0,s=r.length;o<s;o++){var a=i(o);if(typeof a=="object")return a.value}return!0},e.prototype.updateSelectedIndices=function(r){if(r.length>1){for(var n=new Array(r.length),i=this.getOptions(),o=function(l,d){var u=r[l].decodeText();n[l]=i.findIndex(function(h){return u===(h.display||h.value).decodeText()})},s=0,a=r.length;s<a;s++)o(s,a);this.dict.set(Ke.of("I"),this.dict.context.obj(n.sort()))}else this.dict.delete(Ke.of("I"))},e.prototype.getValues=function(){var r=this.V();if(r instanceof vn||r instanceof vr)return[r];if(r instanceof pn){for(var n=[],i=0,o=r.size();i<o;i++){var s=r.lookup(i);(s instanceof vn||s instanceof vr)&&n.push(s)}return n}return[]},e.prototype.Opt=function(){return this.dict.lookupMaybe(Ke.of("Opt"),vn,vr,pn)},e.prototype.setOptions=function(r){for(var n=new Array(r.length),i=0,o=r.length;i<o;i++){var s=r[i],a=s.value,l=s.display;n[i]=this.dict.context.obj([a,l||a])}this.dict.set(Ke.of("Opt"),this.dict.context.obj(n))},e.prototype.getOptions=function(){var r=this.Opt();if(r instanceof vn||r instanceof vr)return[{value:r,display:r}];if(r instanceof pn){for(var n=[],i=0,o=r.size();i<o;i++){var s=r.lookup(i);if((s instanceof vn||s instanceof vr)&&n.push({value:s,display:s}),s instanceof pn&&s.size()>0){var a=s.lookup(0,vn,vr),l=s.lookupMaybe(1,vn,vr);n.push({value:a,display:l||a})}}return n}return[]},e}(Ku),Pg=function(t){Ht(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.fromDict=function(r,n){return new e(r,n)},e.create=function(r){var n=r.obj({FT:"Ch",Ff:gn.Combo,Kids:[]}),i=r.register(n);return new e(n,i)},e}(g4),Cm=function(t){Ht(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.addField=function(r){var n=this.normalizedEntries().Kids;n?.push(r)},e.prototype.normalizedEntries=function(){var r=this.Kids();return r||(r=this.dict.context.obj([]),this.dict.set(Ke.of("Kids"),r)),{Kids:r}},e.fromDict=function(r,n){return new e(r,n)},e.create=function(r){var n=r.obj({}),i=r.register(n);return new e(n,i)},e}(m4),S2=function(t){Ht(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.fromDict=function(r,n){return new e(r,n)},e}(Ku),xg=function(t){Ht(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.MaxLen=function(){var r=this.dict.lookup(Ke.of("MaxLen"));if(r instanceof Cr)return r},e.prototype.Q=function(){var r=this.dict.lookup(Ke.of("Q"));if(r instanceof Cr)return r},e.prototype.setMaxLength=function(r){this.dict.set(Ke.of("MaxLen"),Cr.of(r))},e.prototype.removeMaxLength=function(){this.dict.delete(Ke.of("MaxLen"))},e.prototype.getMaxLength=function(){var r;return(r=this.MaxLen())===null||r===void 0?void 0:r.asNumber()},e.prototype.setQuadding=function(r){this.dict.set(Ke.of("Q"),Cr.of(r))},e.prototype.getQuadding=function(){var r;return(r=this.Q())===null||r===void 0?void 0:r.asNumber()},e.prototype.setValue=function(r){this.dict.set(Ke.of("V"),r)},e.prototype.removeValue=function(){this.dict.delete(Ke.of("V"))},e.prototype.getValue=function(){var r=this.V();if(r instanceof vn||r instanceof vr)return r},e.fromDict=function(r,n){return new e(r,n)},e.create=function(r){var n=r.obj({FT:"Tx",Kids:[]}),i=r.register(n);return new e(n,i)},e}(Ku),Sg=function(t){Ht(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.fromDict=function(r,n){return new e(r,n)},e.create=function(r){var n=r.obj({FT:"Btn",Ff:vs.PushButton,Kids:[]}),i=r.register(n);return new e(n,i)},e}(x2),wg=function(t){Ht(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.setValue=function(r){var n=this.getOnValues();if(!n.includes(r)&&r!==Ke.of("Off"))throw new m2;this.dict.set(Ke.of("V"),r);for(var i=this.getWidgets(),o=0,s=i.length;o<s;o++){var a=i[o],l=a.getOnValue()===r?r:Ke.of("Off");a.setAppearanceState(l)}},e.prototype.getValue=function(){var r=this.V();return r instanceof Ke?r:Ke.of("Off")},e.prototype.getOnValues=function(){for(var r=this.getWidgets(),n=[],i=0,o=r.length;i<o;i++){var s=r[i].getOnValue();s&&n.push(s)}return n},e.fromDict=function(r,n){return new e(r,n)},e.create=function(r){var n=r.obj({FT:"Btn",Ff:vs.Radio,Kids:[]}),i=r.register(n);return new e(n,i)},e}(x2),Cg=function(t){Ht(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.fromDict=function(r,n){return new e(r,n)},e.create=function(r){var n=r.obj({FT:"Ch",Kids:[]}),i=r.register(n);return new e(n,i)},e}(g4),w2=function(t){if(!t)return[];for(var e=[],r=0,n=t.size();r<n;r++){var i=t.get(r),o=t.lookup(r);i instanceof bn&&o instanceof Or&&e.push([v4(o,i),i])}return e},v4=function(t,e){var r=xX(t);return r?Cm.fromDict(t,e):SX(t,e)},xX=function(t){var e=t.lookup(Ke.of("Kids"));if(e instanceof pn)for(var r=0,n=e.size();r<n;r++){var i=e.lookup(r),o=i instanceof Or&&i.has(Ke.of("T"));if(o)return!0}return!1},SX=function(t,e){var r=C2(t,Ke.of("FT")),n=t.context.lookup(r,Ke);return n===Ke.of("Btn")?wX(t,e):n===Ke.of("Ch")?CX(t,e):n===Ke.of("Tx")?xg.fromDict(t,e):n===Ke.of("Sig")?S2.fromDict(t,e):Ku.fromDict(t,e)},wX=function(t,e){var r,n=C2(t,Ke.of("Ff")),i=t.context.lookupMaybe(n,Cr),o=(r=i?.asNumber())!==null&&r!==void 0?r:0;return N1(o,vs.PushButton)?Sg.fromDict(t,e):N1(o,vs.Radio)?wg.fromDict(t,e):bg.fromDict(t,e)},CX=function(t,e){var r,n=C2(t,Ke.of("Ff")),i=t.context.lookupMaybe(n,Cr),o=(r=i?.asNumber())!==null&&r!==void 0?r:0;return N1(o,gn.Combo)?Pg.fromDict(t,e):Cg.fromDict(t,e)},N1=function(t,e){return(t&e)!==0},C2=function(t,e){var r;return b4(t,function(n){r||(r=n.get(e))}),r},b4=function(t,e){e(t);var r=t.lookupMaybe(Ke.of("Parent"),Or);r&&b4(r,e)},_m=function(){function t(e){this.dict=e}return t.prototype.Fields=function(){var e=this.dict.lookup(Ke.of("Fields"));if(e instanceof pn)return e},t.prototype.getFields=function(){for(var e=this.normalizedEntries().Fields,r=new Array(e.size()),n=0,i=e.size();n<i;n++){var o=e.get(n),s=e.lookup(n,Or);r[n]=[v4(s,o),o]}return r},t.prototype.getAllFields=function(){var e=[],r=function(n){if(n)for(var i=0,o=n.length;i<o;i++){var s=n[i];e.push(s);var a=s[0];a instanceof Cm&&r(w2(a.Kids()))}};return r(this.getFields()),e},t.prototype.addField=function(e){var r=this.normalizedEntries().Fields;r?.push(e)},t.prototype.removeField=function(e){var r=e.getParent(),n=r===void 0?this.normalizedEntries().Fields:r.Kids(),i=n?.indexOf(e.ref);if(n===void 0||i===void 0)throw new Error("Tried to remove inexistent field "+e.getFullyQualifiedName());n.remove(i),r!==void 0&&n.size()===0&&this.removeField(r)},t.prototype.normalizedEntries=function(){var e=this.Fields();return e||(e=this.dict.context.obj([]),this.dict.set(Ke.of("Fields"),e)),{Fields:e}},t.fromDict=function(e){return new t(e)},t.create=function(e){var r=e.obj({Fields:[]});return new t(r)},t}(),P4=function(t){Ht(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.Pages=function(){return this.lookup(Ke.of("Pages"),Or)},e.prototype.AcroForm=function(){return this.lookupMaybe(Ke.of("AcroForm"),Or)},e.prototype.getAcroForm=function(){var r=this.AcroForm();if(r)return _m.fromDict(r)},e.prototype.getOrCreateAcroForm=function(){var r=this.getAcroForm();if(!r){r=_m.create(this.context);var n=this.context.register(r.dict);this.set(Ke.of("AcroForm"),n)}return r},e.prototype.ViewerPreferences=function(){return this.lookupMaybe(Ke.of("ViewerPreferences"),Or)},e.prototype.getViewerPreferences=function(){var r=this.ViewerPreferences();if(r)return pw.fromDict(r)},e.prototype.getOrCreateViewerPreferences=function(){var r=this.getViewerPreferences();if(!r){r=pw.create(this.context);var n=this.context.register(r.dict);this.set(Ke.of("ViewerPreferences"),n)}return r},e.prototype.insertLeafNode=function(r,n){var i=this.get(Ke.of("Pages")),o=this.Pages().insertLeafNode(r,n);return o||i},e.prototype.removeLeafNode=function(r){this.Pages().removeLeafNode(r)},e.withContextAndPages=function(r,n){var i=new Map;return i.set(Ke.of("Type"),Ke.of("Catalog")),i.set(Ke.of("Pages"),n),new e(i,r)},e.fromMapWithContext=function(r,n){return new e(r,n)},e}(Or),x4=function(t){Ht(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.Parent=function(){return this.lookup(Ke.of("Parent"))},e.prototype.Kids=function(){return this.lookup(Ke.of("Kids"),pn)},e.prototype.Count=function(){return this.lookup(Ke.of("Count"),Cr)},e.prototype.pushTreeNode=function(r){var n=this.Kids();n.push(r)},e.prototype.pushLeafNode=function(r){var n=this.Kids();this.insertLeafKid(n.size(),r)},e.prototype.insertLeafNode=function(r,n){var i=this.Kids(),o=this.Count().asNumber();if(n>o)throw new ew(n,o);for(var s=n,a=0,l=i.size();a<l;a++){if(s===0){this.insertLeafKid(a,r);return}var d=i.get(a),u=this.context.lookup(d);if(u instanceof e){if(u.Count().asNumber()>s)return u.insertLeafNode(r,s)||d;s-=u.Count().asNumber()}u instanceof nl&&(s-=1)}if(s===0){this.insertLeafKid(i.size(),r);return}throw new tw(n,"insertLeafNode")},e.prototype.removeLeafNode=function(r,n){n===void 0&&(n=!0);var i=this.Kids(),o=this.Count().asNumber();if(r>=o)throw new ew(r,o);for(var s=r,a=0,l=i.size();a<l;a++){var d=i.get(a),u=this.context.lookup(d);if(u instanceof e)if(u.Count().asNumber()>s){u.removeLeafNode(s,n),n&&u.Kids().size()===0&&i.remove(a);return}else s-=u.Count().asNumber();if(u instanceof nl)if(s===0){this.removeKid(a);return}else s-=1}throw new tw(r,"removeLeafNode")},e.prototype.ascend=function(r){r(this);var n=this.Parent();n&&n.ascend(r)},e.prototype.traverse=function(r){for(var n=this.Kids(),i=0,o=n.size();i<o;i++){var s=n.get(i),a=this.context.lookup(s);a instanceof e&&a.traverse(r),r(a,s)}},e.prototype.insertLeafKid=function(r,n){var i=this.Kids();this.ascend(function(o){var s=o.Count().asNumber()+1;o.set(Ke.of("Count"),Cr.of(s))}),i.insert(r,n)},e.prototype.removeKid=function(r){var n=this.Kids(),i=n.lookup(r);i instanceof nl&&this.ascend(function(o){var s=o.Count().asNumber()-1;o.set(Ke.of("Count"),Cr.of(s))}),n.remove(r)},e.withContext=function(r,n){var i=new Map;return i.set(Ke.of("Type"),Ke.of("Pages")),i.set(Ke.of("Kids"),r.obj([])),i.set(Ke.of("Count"),r.obj(0)),n&&i.set(Ke.of("Parent"),n),new e(i,r)},e.fromMapWithContext=function(r,n){return new e(r,n)},e}(Or),po=new Uint8Array(256);po[Xe.Zero]=1;po[Xe.One]=1;po[Xe.Two]=1;po[Xe.Three]=1;po[Xe.Four]=1;po[Xe.Five]=1;po[Xe.Six]=1;po[Xe.Seven]=1;po[Xe.Eight]=1;po[Xe.Nine]=1;var _g=new Uint8Array(256);_g[Xe.Period]=1;_g[Xe.Plus]=1;_g[Xe.Minus]=1;var _2=new Uint8Array(256);for(var Ih=0,_X=256;Ih<_X;Ih++)_2[Ih]=po[Ih]||_g[Ih]?1:0;var fw=Xe.Newline,yw=Xe.CarriageReturn,AX=function(){function t(e,r){r===void 0&&(r=!1),this.bytes=e,this.capNumbers=r}return t.prototype.parseRawInt=function(){for(var e="";!this.bytes.done();){var r=this.bytes.peek();if(!po[r])break;e+=tl(this.bytes.next())}var n=Number(e);if(!e||!isFinite(n))throw new rw(this.bytes.position(),e);return n},t.prototype.parseRawNumber=function(){for(var e="";!this.bytes.done();){var r=this.bytes.peek();if(!_2[r]||(e+=tl(this.bytes.next()),r===Xe.Period))break}for(;!this.bytes.done();){var r=this.bytes.peek();if(!po[r])break;e+=tl(this.bytes.next())}var n=Number(e);if(!e||!isFinite(n))throw new rw(this.bytes.position(),e);if(n>Number.MAX_SAFE_INTEGER)if(this.capNumbers){var i="Parsed number that is too large for some PDF readers: "+e+", using Number.MAX_SAFE_INTEGER instead.";return console.warn(i),Number.MAX_SAFE_INTEGER}else{var i="Parsed number that is too large for some PDF readers: "+e+", not capping.";console.warn(i)}return n},t.prototype.skipWhitespace=function(){for(;!this.bytes.done()&&fl[this.bytes.peek()];)this.bytes.next()},t.prototype.skipLine=function(){for(;!this.bytes.done();){var e=this.bytes.peek();if(e===fw||e===yw)return;this.bytes.next()}},t.prototype.skipComment=function(){if(this.bytes.peek()!==Xe.Percent)return!1;for(;!this.bytes.done();){var e=this.bytes.peek();if(e===fw||e===yw)return!0;this.bytes.next()}return!0},t.prototype.skipWhitespaceAndComments=function(){for(this.skipWhitespace();this.skipComment();)this.skipWhitespace()},t.prototype.matchKeyword=function(e){for(var r=this.bytes.offset(),n=0,i=e.length;n<i;n++)if(this.bytes.done()||this.bytes.next()!==e[n])return this.bytes.moveTo(r),!1;return!0},t}(),Ag=function(){function t(e){this.idx=0,this.line=0,this.column=0,this.bytes=e,this.length=this.bytes.length}return t.prototype.moveTo=function(e){this.idx=e},t.prototype.next=function(){var e=this.bytes[this.idx++];return e===Xe.Newline?(this.line+=1,this.column=0):this.column+=1,e},t.prototype.assertNext=function(e){if(this.peek()!==e)throw new DY(this.position(),e,this.peek());return this.next()},t.prototype.peek=function(){return this.bytes[this.idx]},t.prototype.peekAhead=function(e){return this.bytes[this.idx+e]},t.prototype.peekAt=function(e){return this.bytes[e]},t.prototype.done=function(){return this.idx>=this.length},t.prototype.offset=function(){return this.idx},t.prototype.slice=function(e,r){return this.bytes.slice(e,r)},t.prototype.position=function(){return{line:this.line,column:this.column,offset:this.idx}},t.of=function(e){return new t(e)},t.fromPDFRawStream=function(e){return t.of(f4(e).decode())},t}(),kX=Xe.Space,Nh=Xe.CarriageReturn,Rh=Xe.Newline,Dh=[Xe.s,Xe.t,Xe.r,Xe.e,Xe.a,Xe.m],fy=[Xe.e,Xe.n,Xe.d,Xe.s,Xe.t,Xe.r,Xe.e,Xe.a,Xe.m],$n={header:[Xe.Percent,Xe.P,Xe.D,Xe.F,Xe.Dash],eof:[Xe.Percent,Xe.Percent,Xe.E,Xe.O,Xe.F],obj:[Xe.o,Xe.b,Xe.j],endobj:[Xe.e,Xe.n,Xe.d,Xe.o,Xe.b,Xe.j],xref:[Xe.x,Xe.r,Xe.e,Xe.f],trailer:[Xe.t,Xe.r,Xe.a,Xe.i,Xe.l,Xe.e,Xe.r],startxref:[Xe.s,Xe.t,Xe.a,Xe.r,Xe.t,Xe.x,Xe.r,Xe.e,Xe.f],true:[Xe.t,Xe.r,Xe.u,Xe.e],false:[Xe.f,Xe.a,Xe.l,Xe.s,Xe.e],null:[Xe.n,Xe.u,Xe.l,Xe.l],stream:Dh,streamEOF1:sn(Dh,[kX,Nh,Rh]),streamEOF2:sn(Dh,[Nh,Rh]),streamEOF3:sn(Dh,[Nh]),streamEOF4:sn(Dh,[Rh]),endstream:fy,EOF1endstream:sn([Nh,Rh],fy),EOF2endstream:sn([Nh],fy),EOF3endstream:sn([Rh],fy)},S4=function(t){Ht(e,t);function e(r,n,i){i===void 0&&(i=!1);var o=t.call(this,r,i)||this;return o.context=n,o}return e.prototype.parseObject=function(){if(this.skipWhitespaceAndComments(),this.matchKeyword($n.true))return Rp.True;if(this.matchKeyword($n.false))return Rp.False;if(this.matchKeyword($n.null))return Mo;var r=this.bytes.peek();if(r===Xe.LessThan&&this.bytes.peekAhead(1)===Xe.LessThan)return this.parseDictOrStream();if(r===Xe.LessThan)return this.parseHexString();if(r===Xe.LeftParen)return this.parseString();if(r===Xe.ForwardSlash)return this.parseName();if(r===Xe.LeftSquareBracket)return this.parseArray();if(_2[r])return this.parseNumberOrRef();throw new LY(this.bytes.position(),r)},e.prototype.parseNumberOrRef=function(){var r=this.parseRawNumber();this.skipWhitespaceAndComments();var n=this.bytes.offset();if(po[this.bytes.peek()]){var i=this.parseRawNumber();if(this.skipWhitespaceAndComments(),this.bytes.peek()===Xe.R)return this.bytes.assertNext(Xe.R),bn.of(r,i)}return this.bytes.moveTo(n),Cr.of(r)},e.prototype.parseHexString=function(){var r="";for(this.bytes.assertNext(Xe.LessThan);!this.bytes.done()&&this.bytes.peek()!==Xe.GreaterThan;)r+=tl(this.bytes.next());return this.bytes.assertNext(Xe.GreaterThan),vr.of(r)},e.prototype.parseString=function(){for(var r=0,n=!1,i="";!this.bytes.done();){var o=this.bytes.next();if(i+=tl(o),n||(o===Xe.LeftParen&&(r+=1),o===Xe.RightParen&&(r-=1)),o===Xe.BackSlash?n=!n:n&&(n=!1),r===0)return vn.of(i.substring(1,i.length-1))}throw new MY(this.bytes.position())},e.prototype.parseName=function(){this.bytes.assertNext(Xe.ForwardSlash);for(var r="";!this.bytes.done();){var n=this.bytes.peek();if(fl[n]||As[n])break;r+=tl(n),this.bytes.next()}return Ke.of(r)},e.prototype.parseArray=function(){this.bytes.assertNext(Xe.LeftSquareBracket),this.skipWhitespaceAndComments();for(var r=pn.withContext(this.context);this.bytes.peek()!==Xe.RightSquareBracket;){var n=this.parseObject();r.push(n),this.skipWhitespaceAndComments()}return this.bytes.assertNext(Xe.RightSquareBracket),r},e.prototype.parseDict=function(){this.bytes.assertNext(Xe.LessThan),this.bytes.assertNext(Xe.LessThan),this.skipWhitespaceAndComments();for(var r=new Map;!this.bytes.done()&&this.bytes.peek()!==Xe.GreaterThan&&this.bytes.peekAhead(1)!==Xe.GreaterThan;){var n=this.parseName(),i=this.parseObject();r.set(n,i),this.skipWhitespaceAndComments()}this.skipWhitespaceAndComments(),this.bytes.assertNext(Xe.GreaterThan),this.bytes.assertNext(Xe.GreaterThan);var o=r.get(Ke.of("Type"));return o===Ke.of("Catalog")?P4.fromMapWithContext(r,this.context):o===Ke.of("Pages")?x4.fromMapWithContext(r,this.context):o===Ke.of("Page")?nl.fromMapWithContext(r,this.context):Or.fromMapWithContext(r,this.context)},e.prototype.parseDictOrStream=function(){var r=this.bytes.position(),n=this.parseDict();if(this.skipWhitespaceAndComments(),!this.matchKeyword($n.streamEOF1)&&!this.matchKeyword($n.streamEOF2)&&!this.matchKeyword($n.streamEOF3)&&!this.matchKeyword($n.streamEOF4)&&!this.matchKeyword($n.stream))return n;var i=this.bytes.offset(),o,s=n.get(Ke.of("Length"));s instanceof Cr?(o=i+s.asNumber(),this.bytes.moveTo(o),this.skipWhitespaceAndComments(),this.matchKeyword($n.endstream)||(this.bytes.moveTo(i),o=this.findEndOfStreamFallback(r))):o=this.findEndOfStreamFallback(r);var a=this.bytes.slice(i,o);return Dp.of(n,a)},e.prototype.findEndOfStreamFallback=function(r){for(var n=1,i=this.bytes.offset();!this.bytes.done()&&(i=this.bytes.offset(),this.matchKeyword($n.stream)?n+=1:this.matchKeyword($n.EOF1endstream)||this.matchKeyword($n.EOF2endstream)||this.matchKeyword($n.EOF3endstream)||this.matchKeyword($n.endstream)?n-=1:this.bytes.next(),n!==0););if(n!==0)throw new FY(r);return i},e.forBytes=function(r,n,i){return new e(Ag.of(r),n,i)},e.forByteStream=function(r,n,i){return i===void 0&&(i=!1),new e(r,n,i)},e}(AX),EX=function(t){Ht(e,t);function e(r,n){var i=t.call(this,Ag.fromPDFRawStream(r),r.dict.context)||this,o=r.dict;return i.alreadyParsed=!1,i.shouldWaitForTick=n||function(){return!1},i.firstOffset=o.lookup(Ke.of("First"),Cr).asNumber(),i.objectCount=o.lookup(Ke.of("N"),Cr).asNumber(),i}return e.prototype.parseIntoContext=function(){return jr(this,void 0,void 0,function(){var r,n,i,o,s,a,l,d;return Vr(this,function(u){switch(u.label){case 0:if(this.alreadyParsed)throw new y2("PDFObjectStreamParser","parseIntoContext");this.alreadyParsed=!0,r=this.parseOffsetsAndObjectNumbers(),n=0,i=r.length,u.label=1;case 1:return n<i?(o=r[n],s=o.objectNumber,a=o.offset,this.bytes.moveTo(this.firstOffset+a),l=this.parseObject(),d=bn.of(s,0),this.context.assign(d,l),this.shouldWaitForTick()?[4,Ou()]:[3,3]):[3,4];case 2:u.sent(),u.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},e.prototype.parseOffsetsAndObjectNumbers=function(){for(var r=[],n=0,i=this.objectCount;n<i;n++){this.skipWhitespaceAndComments();var o=this.parseRawInt();this.skipWhitespaceAndComments();var s=this.parseRawInt();r.push({objectNumber:o,offset:s})}return r},e.forStream=function(r,n){return new e(r,n)},e}(S4),TX=function(){function t(e){this.alreadyParsed=!1,this.dict=e.dict,this.bytes=Ag.fromPDFRawStream(e),this.context=this.dict.context;var r=this.dict.lookup(Ke.of("Size"),Cr),n=this.dict.lookup(Ke.of("Index"));if(n instanceof pn){this.subsections=[];for(var i=0,o=n.size();i<o;i+=2){var s=n.lookup(i+0,Cr).asNumber(),a=n.lookup(i+1,Cr).asNumber();this.subsections.push({firstObjectNumber:s,length:a})}}else this.subsections=[{firstObjectNumber:0,length:r.asNumber()}];var l=this.dict.lookup(Ke.of("W"),pn);this.byteWidths=[-1,-1,-1];for(var i=0,o=l.size();i<o;i++)this.byteWidths[i]=l.lookup(i,Cr).asNumber()}return t.prototype.parseIntoContext=function(){if(this.alreadyParsed)throw new y2("PDFXRefStreamParser","parseIntoContext");this.alreadyParsed=!0,this.context.trailerInfo={Root:this.dict.get(Ke.of("Root")),Encrypt:this.dict.get(Ke.of("Encrypt")),Info:this.dict.get(Ke.of("Info")),ID:this.dict.get(Ke.of("ID"))};var e=this.parseEntries();return e},t.prototype.parseEntries=function(){for(var e=[],r=this.byteWidths,n=r[0],i=r[1],o=r[2],s=0,a=this.subsections.length;s<a;s++)for(var l=this.subsections[s],d=l.firstObjectNumber,u=l.length,h=0;h<u;h++){for(var f=0,p=0,m=n;p<m;p++)f=f<<8|this.bytes.next();for(var x=0,p=0,m=i;p<m;p++)x=x<<8|this.bytes.next();for(var P=0,p=0,m=o;p<m;p++)P=P<<8|this.bytes.next();n===0&&(f=1);var g=d+h,F={ref:bn.of(g,P),offset:x,deleted:f===0,inObjectStream:f===2};e.push(F)}return e},t.forStream=function(e){return new t(e)},t}(),IX=function(t){Ht(e,t);function e(r,n,i,o){n===void 0&&(n=1/0),i===void 0&&(i=!1),o===void 0&&(o=!1);var s=t.call(this,Ag.of(r),E1.create(),o)||this;return s.alreadyParsed=!1,s.parsedObjects=0,s.shouldWaitForTick=function(){return s.parsedObjects+=1,s.parsedObjects%s.objectsPerTick===0},s.objectsPerTick=n,s.throwOnInvalidObject=i,s}return e.prototype.parseDocument=function(){return jr(this,void 0,void 0,function(){var r,n;return Vr(this,function(i){switch(i.label){case 0:if(this.alreadyParsed)throw new y2("PDFParser","parseDocument");this.alreadyParsed=!0,this.context.header=this.parseHeader(),i.label=1;case 1:return this.bytes.done()?[3,3]:[4,this.parseDocumentSection()];case 2:if(i.sent(),n=this.bytes.offset(),n===r)throw new OY(this.bytes.position());return r=n,[3,1];case 3:return this.maybeRecoverRoot(),this.context.lookup(bn.of(0))&&(console.warn("Removing parsed object: 0 0 R"),this.context.delete(bn.of(0))),[2,this.context]}})})},e.prototype.maybeRecoverRoot=function(){var r=function(u){return u instanceof Or&&u.lookup(Ke.of("Type"))===Ke.of("Catalog")},n=this.context.lookup(this.context.trailerInfo.Root);if(!r(n))for(var i=this.context.enumerateIndirectObjects(),o=0,s=i.length;o<s;o++){var a=i[o],l=a[0],d=a[1];r(d)&&(this.context.trailerInfo.Root=l)}},e.prototype.parseHeader=function(){for(;!this.bytes.done();){if(this.matchKeyword($n.header)){var r=this.parseRawInt();this.bytes.assertNext(Xe.Period);var n=this.parseRawInt(),i=vg.forVersion(r,n);return this.skipBinaryHeaderComment(),i}this.bytes.next()}throw new BY(this.bytes.position())},e.prototype.parseIndirectObjectHeader=function(){this.skipWhitespaceAndComments();var r=this.parseRawInt();this.skipWhitespaceAndComments();var n=this.parseRawInt();if(this.skipWhitespaceAndComments(),!this.matchKeyword($n.obj))throw new jY(this.bytes.position(),$n.obj);return bn.of(r,n)},e.prototype.matchIndirectObjectHeader=function(){var r=this.bytes.offset();try{return this.parseIndirectObjectHeader(),!0}catch{return this.bytes.moveTo(r),!1}},e.prototype.parseIndirectObject=function(){return jr(this,void 0,void 0,function(){var r,n;return Vr(this,function(i){switch(i.label){case 0:return r=this.parseIndirectObjectHeader(),this.skipWhitespaceAndComments(),n=this.parseObject(),this.skipWhitespaceAndComments(),this.matchKeyword($n.endobj),n instanceof Dp&&n.dict.lookup(Ke.of("Type"))===Ke.of("ObjStm")?[4,EX.forStream(n,this.shouldWaitForTick).parseIntoContext()]:[3,2];case 1:return i.sent(),[3,3];case 2:n instanceof Dp&&n.dict.lookup(Ke.of("Type"))===Ke.of("XRef")?TX.forStream(n).parseIntoContext():this.context.assign(r,n),i.label=3;case 3:return[2,r]}})})},e.prototype.tryToParseInvalidIndirectObject=function(){var r=this.bytes.position(),n="Trying to parse invalid object: "+JSON.stringify(r)+")";if(this.throwOnInvalidObject)throw new Error(n);console.warn(n);var i=this.parseIndirectObjectHeader();console.warn("Invalid object ref: "+i),this.skipWhitespaceAndComments();for(var o=this.bytes.offset(),s=!0;!this.bytes.done()&&(this.matchKeyword($n.endobj)&&(s=!1),!!s);)this.bytes.next();if(s)throw new $Y(r);var a=this.bytes.offset()-$n.endobj.length,l=d4.of(this.bytes.slice(o,a));return this.context.assign(i,l),i},e.prototype.parseIndirectObjects=function(){return jr(this,void 0,void 0,function(){var r;return Vr(this,function(n){switch(n.label){case 0:this.skipWhitespaceAndComments(),n.label=1;case 1:if(!(!this.bytes.done()&&po[this.bytes.peek()]))return[3,8];r=this.bytes.offset(),n.label=2;case 2:return n.trys.push([2,4,,5]),[4,this.parseIndirectObject()];case 3:return n.sent(),[3,5];case 4:return n.sent(),this.bytes.moveTo(r),this.tryToParseInvalidIndirectObject(),[3,5];case 5:return this.skipWhitespaceAndComments(),this.skipJibberish(),this.shouldWaitForTick()?[4,Ou()]:[3,7];case 6:n.sent(),n.label=7;case 7:return[3,1];case 8:return[2]}})})},e.prototype.maybeParseCrossRefSection=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword($n.xref)){this.skipWhitespaceAndComments();for(var r=-1,n=a4.createEmpty();!this.bytes.done()&&po[this.bytes.peek()];){var i=this.parseRawInt();this.skipWhitespaceAndComments();var o=this.parseRawInt();this.skipWhitespaceAndComments();var s=this.bytes.peek();if(s===Xe.n||s===Xe.f){var a=bn.of(r,o);this.bytes.next()===Xe.n?n.addEntry(a,i):n.addDeletedEntry(a,i),r+=1}else r=i;this.skipWhitespaceAndComments()}return n}},e.prototype.maybeParseTrailerDict=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword($n.trailer)){this.skipWhitespaceAndComments();var r=this.parseDict(),n=this.context;n.trailerInfo={Root:r.get(Ke.of("Root"))||n.trailerInfo.Root,Encrypt:r.get(Ke.of("Encrypt"))||n.trailerInfo.Encrypt,Info:r.get(Ke.of("Info"))||n.trailerInfo.Info,ID:r.get(Ke.of("ID"))||n.trailerInfo.ID}}},e.prototype.maybeParseTrailer=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword($n.startxref)){this.skipWhitespaceAndComments();var r=this.parseRawInt();return this.skipWhitespace(),this.matchKeyword($n.eof),this.skipWhitespaceAndComments(),this.matchKeyword($n.eof),this.skipWhitespaceAndComments(),b2.forLastCrossRefSectionOffset(r)}},e.prototype.parseDocumentSection=function(){return jr(this,void 0,void 0,function(){return Vr(this,function(r){switch(r.label){case 0:return[4,this.parseIndirectObjects()];case 1:return r.sent(),this.maybeParseCrossRefSection(),this.maybeParseTrailerDict(),this.maybeParseTrailer(),this.skipJibberish(),[2]}})})},e.prototype.skipJibberish=function(){for(this.skipWhitespaceAndComments();!this.bytes.done();){var r=this.bytes.offset(),n=this.bytes.peek(),i=n>=Xe.Space&&n<=Xe.Tilde;if(i&&(this.matchKeyword($n.xref)||this.matchKeyword($n.trailer)||this.matchKeyword($n.startxref)||this.matchIndirectObjectHeader())){this.bytes.moveTo(r);break}this.bytes.next()}},e.prototype.skipBinaryHeaderComment=function(){this.skipWhitespaceAndComments();try{var r=this.bytes.offset();this.parseIndirectObjectHeader(),this.bytes.moveTo(r)}catch{this.bytes.next(),this.skipWhitespaceAndComments()}},e.forBytesWithOptions=function(r,n,i,o){return new e(r,n,i,o)},e}(S4),ha=function(t){return 1<<t},pp;(function(t){t[t.Invisible=ha(0)]="Invisible",t[t.Hidden=ha(1)]="Hidden",t[t.Print=ha(2)]="Print",t[t.NoZoom=ha(3)]="NoZoom",t[t.NoRotate=ha(4)]="NoRotate",t[t.NoView=ha(5)]="NoView",t[t.ReadOnly=ha(6)]="ReadOnly",t[t.Locked=ha(7)]="Locked",t[t.ToggleNoView=ha(8)]="ToggleNoView",t[t.LockedContents=ha(9)]="LockedContents"})(pp||(pp={}));var kg=function(t){return t instanceof Ke?t:Ke.of(t)},_r=function(t){return t instanceof Cr?t:Cr.of(t)},Ur=function(t){return t instanceof Cr?t.asNumber():t},Lp;(function(t){t.Degrees="degrees",t.Radians="radians"})(Lp||(Lp={}));var xr=function(t){return dt(t,"degreeAngle",["number"]),{type:Lp.Degrees,angle:t}},w4=Lp.Radians,C4=Lp.Degrees,_4=function(t){return t*Math.PI/180},NX=function(t){return t*180/Math.PI},Yi=function(t){return t.type===w4?t.angle:t.type===C4?_4(t.angle):Jp("Invalid rotation: "+JSON.stringify(t))},A4=function(t){return t.type===w4?NX(t.angle):t.type===C4?t.angle:Jp("Invalid rotation: "+JSON.stringify(t))},yl=function(t){t===void 0&&(t=0);var e=t/90%4;return e===0?0:e===1?90:e===2?180:e===3?270:0},Td=function(t,e){e===void 0&&(e=0);var r=yl(e);return r===90||r===270?{width:t.height,height:t.width}:{width:t.width,height:t.height}},RX=function(t,e,r){e===void 0&&(e=0),r===void 0&&(r=0);var n=t.x,i=t.y,o=t.width,s=t.height,a=yl(r),l=e/2;return a===0?{x:n-l,y:i-l,width:o,height:s}:a===90?{x:n-s+l,y:i-l,width:s,height:o}:a===180?{x:n-o+l,y:i-s+l,width:o,height:s}:a===270?{x:n-l,y:i-o+l,width:s,height:o}:{x:n-l,y:i-l,width:o,height:s}},k4=function(){return nn.of(an.ClipNonZero)},Am=Math.cos,km=Math.sin,Em=Math.tan,Eg=function(t,e,r,n,i,o){return nn.of(an.ConcatTransformationMatrix,[_r(t),_r(e),_r(r),_r(n),_r(i),_r(o)])},Ss=function(t,e){return Eg(1,0,0,1,t,e)},$p=function(t,e){return Eg(t,0,0,e,0,0)},Yu=function(t){return Eg(Am(Ur(t)),km(Ur(t)),-km(Ur(t)),Am(Ur(t)),0,0)},yy=function(t){return Yu(_4(Ur(t)))},A2=function(t,e){return Eg(1,Em(Ur(t)),Em(Ur(e)),1,0,0)},Tg=function(t,e){return nn.of(an.SetLineDashPattern,["["+t.map(_r).join(" ")+"]",_r(e)])},bu;(function(t){t[t.Butt=0]="Butt",t[t.Round=1]="Round",t[t.Projecting=2]="Projecting"})(bu||(bu={}));var Ig=function(t){return nn.of(an.SetLineCapStyle,[_r(t)])},mw;(function(t){t[t.Miter=0]="Miter",t[t.Round=1]="Round",t[t.Bevel=2]="Bevel"})(mw||(mw={}));var Id=function(t){return nn.of(an.SetGraphicsStateParams,[kg(t)])},Ti=function(){return nn.of(an.PushGraphicsState)},Ii=function(){return nn.of(an.PopGraphicsState)},ef=function(t){return nn.of(an.SetLineWidth,[_r(t)])},rs=function(t,e,r,n,i,o){return nn.of(an.AppendBezierCurve,[_r(t),_r(e),_r(r),_r(n),_r(i),_r(o)])},my=function(t,e,r,n){return nn.of(an.CurveToReplicateInitialPoint,[_r(t),_r(e),_r(r),_r(n)])},Sc=function(){return nn.of(an.ClosePath)},Ea=function(t,e){return nn.of(an.MoveTo,[_r(t),_r(e)])},Oi=function(t,e){return nn.of(an.LineTo,[_r(t),_r(e)])},tf=function(){return nn.of(an.StrokePath)},k2=function(){return nn.of(an.FillNonZero)},E2=function(){return nn.of(an.FillNonZeroAndStroke)},E4=function(){return nn.of(an.EndPath)},DX=function(){return nn.of(an.NextLine)},T4=function(t){return nn.of(an.ShowText,[t])},I4=function(){return nn.of(an.BeginText)},N4=function(){return nn.of(an.EndText)},T2=function(t,e){return nn.of(an.SetFontAndSize,[kg(t),_r(e)])},LX=function(t){return nn.of(an.SetTextLineHeight,[_r(t)])},gw;(function(t){t[t.Fill=0]="Fill",t[t.Outline=1]="Outline",t[t.FillAndOutline=2]="FillAndOutline",t[t.Invisible=3]="Invisible",t[t.FillAndClip=4]="FillAndClip",t[t.OutlineAndClip=5]="OutlineAndClip",t[t.FillAndOutlineAndClip=6]="FillAndOutlineAndClip",t[t.Clip=7]="Clip"})(gw||(gw={}));var $X=function(t,e,r,n,i,o){return nn.of(an.SetTextMatrix,[_r(t),_r(e),_r(r),_r(n),_r(i),_r(o)])},R4=function(t,e,r,n,i){return $X(Am(Ur(t)),km(Ur(t))+Em(Ur(e)),-km(Ur(t))+Em(Ur(r)),Am(Ur(t)),n,i)},I2=function(t){return nn.of(an.DrawObject,[kg(t)])},FX=function(t){return nn.of(an.NonStrokingColorGray,[_r(t)])},MX=function(t){return nn.of(an.StrokingColorGray,[_r(t)])},OX=function(t,e,r){return nn.of(an.NonStrokingColorRgb,[_r(t),_r(e),_r(r)])},BX=function(t,e,r){return nn.of(an.StrokingColorRgb,[_r(t),_r(e),_r(r)])},jX=function(t,e,r,n){return nn.of(an.NonStrokingColorCmyk,[_r(t),_r(e),_r(r),_r(n)])},VX=function(t,e,r,n){return nn.of(an.StrokingColorCmyk,[_r(t),_r(e),_r(r),_r(n)])},D4=function(t){return nn.of(an.BeginMarkedContent,[kg(t)])},L4=function(){return nn.of(an.EndMarkedContent)},wc;(function(t){t.Grayscale="Grayscale",t.RGB="RGB",t.CMYK="CMYK"})(wc||(wc={}));var $4=function(t){return ts(t,"gray",0,1),{type:wc.Grayscale,gray:t}},Pn=function(t,e,r){return ts(t,"red",0,1),ts(e,"green",0,1),ts(r,"blue",0,1),{type:wc.RGB,red:t,green:e,blue:r}},F4=function(t,e,r,n){return ts(t,"cyan",0,1),ts(e,"magenta",0,1),ts(r,"yellow",0,1),ts(n,"key",0,1),{type:wc.CMYK,cyan:t,magenta:e,yellow:r,key:n}},N2=wc.Grayscale,R2=wc.RGB,D2=wc.CMYK,Nd=function(t){return t.type===N2?FX(t.gray):t.type===R2?OX(t.red,t.green,t.blue):t.type===D2?jX(t.cyan,t.magenta,t.yellow,t.key):Jp("Invalid color: "+JSON.stringify(t))},rf=function(t){return t.type===N2?MX(t.gray):t.type===R2?BX(t.red,t.green,t.blue):t.type===D2?VX(t.cyan,t.magenta,t.yellow,t.key):Jp("Invalid color: "+JSON.stringify(t))},Co=function(t,e){return e===void 0&&(e=1),t?.length===1?$4(t[0]*e):t?.length===3?Pn(t[0]*e,t[1]*e,t[2]*e):t?.length===4?F4(t[0]*e,t[1]*e,t[2]*e,t[3]*e):void 0},vw=function(t){return t.type===N2?[t.gray]:t.type===R2?[t.red,t.green,t.blue]:t.type===D2?[t.cyan,t.magenta,t.yellow,t.key]:Jp("Invalid color: "+JSON.stringify(t))},dr=0,ur=0,Jr=0,Qr=0,Hh=0,Wh=0,bw=new Map([["A",7],["a",7],["C",6],["c",6],["H",1],["h",1],["L",2],["l",2],["M",2],["m",2],["Q",4],["q",4],["S",4],["s",4],["T",2],["t",2],["V",1],["v",1],["Z",0],["z",0]]),zX=function(t){for(var e,r=[],n=[],i="",o=!1,s=0,a=0,l=t;a<l.length;a++){var d=l[a];if(bw.has(d))s=bw.get(d),e&&(i.length>0&&(n[n.length]=+i),r[r.length]={cmd:e,args:n},n=[],i="",o=!1),e=d;else if([" ",","].includes(d)||d==="-"&&i.length>0&&i[i.length-1]!=="e"||d==="."&&o){if(i.length===0)continue;n.length===s?(r[r.length]={cmd:e,args:n},n=[+i],e==="M"&&(e="L"),e==="m"&&(e="l")):n[n.length]=+i,o=d===".",i=["-","."].includes(d)?d:""}else i+=d,d==="."&&(o=!0)}return i.length>0&&(n.length===s?(r[r.length]={cmd:e,args:n},n=[+i],e==="M"&&(e="L"),e==="m"&&(e="l")):n[n.length]=+i),r[r.length]={cmd:e,args:n},r},UX=function(t){dr=ur=Jr=Qr=Hh=Wh=0;for(var e=[],r=0;r<t.length;r++){var n=t[r];if(n.cmd&&typeof Pw[n.cmd]=="function"){var i=Pw[n.cmd](n.args);Array.isArray(i)?e=e.concat(i):e.push(i)}}return e},Pw={M:function(t){return dr=t[0],ur=t[1],Jr=Qr=null,Hh=dr,Wh=ur,Ea(dr,ur)},m:function(t){return dr+=t[0],ur+=t[1],Jr=Qr=null,Hh=dr,Wh=ur,Ea(dr,ur)},C:function(t){return dr=t[4],ur=t[5],Jr=t[2],Qr=t[3],rs(t[0],t[1],t[2],t[3],t[4],t[5])},c:function(t){var e=rs(t[0]+dr,t[1]+ur,t[2]+dr,t[3]+ur,t[4]+dr,t[5]+ur);return Jr=dr+t[2],Qr=ur+t[3],dr+=t[4],ur+=t[5],e},S:function(t){(Jr===null||Qr===null)&&(Jr=dr,Qr=ur);var e=rs(dr-(Jr-dr),ur-(Qr-ur),t[0],t[1],t[2],t[3]);return Jr=t[0],Qr=t[1],dr=t[2],ur=t[3],e},s:function(t){(Jr===null||Qr===null)&&(Jr=dr,Qr=ur);var e=rs(dr-(Jr-dr),ur-(Qr-ur),dr+t[0],ur+t[1],dr+t[2],ur+t[3]);return Jr=dr+t[0],Qr=ur+t[1],dr+=t[2],ur+=t[3],e},Q:function(t){return Jr=t[0],Qr=t[1],dr=t[2],ur=t[3],my(t[0],t[1],dr,ur)},q:function(t){var e=my(t[0]+dr,t[1]+ur,t[2]+dr,t[3]+ur);return Jr=dr+t[0],Qr=ur+t[1],dr+=t[2],ur+=t[3],e},T:function(t){Jr===null||Qr===null?(Jr=dr,Qr=ur):(Jr=dr-(Jr-dr),Qr=ur-(Qr-ur));var e=my(Jr,Qr,t[0],t[1]);return Jr=dr-(Jr-dr),Qr=ur-(Qr-ur),dr=t[0],ur=t[1],e},t:function(t){Jr===null||Qr===null?(Jr=dr,Qr=ur):(Jr=dr-(Jr-dr),Qr=ur-(Qr-ur));var e=my(Jr,Qr,dr+t[0],ur+t[1]);return dr+=t[0],ur+=t[1],e},A:function(t){var e=xw(dr,ur,t);return dr=t[5],ur=t[6],e},a:function(t){t[5]+=dr,t[6]+=ur;var e=xw(dr,ur,t);return dr=t[5],ur=t[6],e},L:function(t){return dr=t[0],ur=t[1],Jr=Qr=null,Oi(dr,ur)},l:function(t){return dr+=t[0],ur+=t[1],Jr=Qr=null,Oi(dr,ur)},H:function(t){return dr=t[0],Jr=Qr=null,Oi(dr,ur)},h:function(t){return dr+=t[0],Jr=Qr=null,Oi(dr,ur)},V:function(t){return ur=t[0],Jr=Qr=null,Oi(dr,ur)},v:function(t){return ur+=t[0],Jr=Qr=null,Oi(dr,ur)},Z:function(){var t=Sc();return dr=Hh,ur=Wh,t},z:function(){var t=Sc();return dr=Hh,ur=Wh,t}},xw=function(t,e,r){for(var n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],l=r[5],d=r[6],u=qX(l,d,n,i,s,a,o,t,e),h=[],f=0,p=u;f<p.length;f++){var m=p[f],x=HX.apply(void 0,m);h.push(rs.apply(void 0,x))}return h},qX=function(t,e,r,n,i,o,s,a,l){var d=s*(Math.PI/180),u=Math.sin(d),h=Math.cos(d);r=Math.abs(r),n=Math.abs(n),Jr=h*(a-t)*.5+u*(l-e)*.5,Qr=h*(l-e)*.5-u*(a-t)*.5;var f=Jr*Jr/(r*r)+Qr*Qr/(n*n);f>1&&(f=Math.sqrt(f),r*=f,n*=f);var p=h/r,m=u/r,x=-u/n,P=h/n,g=p*a+m*l,F=x*a+P*l,V=p*t+m*e,N=x*t+P*e,R=(V-g)*(V-g)+(N-F)*(N-F),M=1/R-.25;M<0&&(M=0);var C=Math.sqrt(M);o===i&&(C=-C);var k=.5*(g+V)-C*(N-F),D=.5*(F+N)+C*(V-g),$=Math.atan2(F-D,g-k),w=Math.atan2(N-D,V-k),_=w-$;_<0&&o===1?_+=2*Math.PI:_>0&&o===0&&(_-=2*Math.PI);for(var v=Math.ceil(Math.abs(_/(Math.PI*.5+.001))),z=[],W=0;W<v;W++){var A=$+W*_/v,I=$+(W+1)*_/v;z[W]=[k,D,A,I,r,n,u,h]}return z},HX=function(t,e,r,n,i,o,s,a){var l=a*i,d=-s*o,u=s*i,h=a*o,f=.5*(n-r),p=8/3*Math.sin(f*.5)*Math.sin(f*.5)/Math.sin(f),m=t+Math.cos(r)-p*Math.sin(r),x=e+Math.sin(r)+p*Math.cos(r),P=t+Math.cos(n),g=e+Math.sin(n),F=P+p*Math.sin(n),V=g-p*Math.cos(n),N=[l*m+d*x,u*m+h*x,l*F+d*V,u*F+h*V,l*P+d*g,u*P+h*g];return N},WX=function(t){return UX(zX(t))},GX=function(t,e){for(var r=[Ti(),e.graphicsState&&Id(e.graphicsState),I4(),Nd(e.color),T2(e.font,e.size),LX(e.lineHeight),R4(Yi(e.rotate),Yi(e.xSkew),Yi(e.ySkew),e.x,e.y)].filter(Boolean),n=0,i=t.length;n<i;n++)r.push(T4(t[n]),DX());return r.push(N4(),Ii()),r},M4=function(t,e){return[Ti(),e.graphicsState&&Id(e.graphicsState),Ss(e.x,e.y),Yu(Yi(e.rotate)),$p(e.width,e.height),A2(Yi(e.xSkew),Yi(e.ySkew)),I2(t),Ii()].filter(Boolean)},KX=function(t,e){return[Ti(),e.graphicsState&&Id(e.graphicsState),Ss(e.x,e.y),Yu(Yi(e.rotate)),$p(e.xScale,e.yScale),A2(Yi(e.xSkew),Yi(e.ySkew)),I2(t),Ii()].filter(Boolean)},YX=function(t){var e,r;return[Ti(),t.graphicsState&&Id(t.graphicsState),t.color&&rf(t.color),ef(t.thickness),Tg((e=t.dashArray)!==null&&e!==void 0?e:[],(r=t.dashPhase)!==null&&r!==void 0?r:0),Ea(t.start.x,t.start.y),t.lineCap&&Ig(t.lineCap),Ea(t.start.x,t.start.y),Oi(t.end.x,t.end.y),tf(),Ii()].filter(Boolean)},Bu=function(t){var e,r;return[Ti(),t.graphicsState&&Id(t.graphicsState),t.color&&Nd(t.color),t.borderColor&&rf(t.borderColor),ef(t.borderWidth),t.borderLineCap&&Ig(t.borderLineCap),Tg((e=t.borderDashArray)!==null&&e!==void 0?e:[],(r=t.borderDashPhase)!==null&&r!==void 0?r:0),Ss(t.x,t.y),Yu(Yi(t.rotate)),A2(Yi(t.xSkew),Yi(t.ySkew)),Ea(0,0),Oi(0,t.height),Oi(t.width,t.height),Oi(t.width,0),Sc(),t.color&&t.borderWidth?E2():t.color?k2():t.borderColor?tf():Sc(),Ii()].filter(Boolean)},Tm=4*((Math.sqrt(2)-1)/3),XX=function(t){var e=Ur(t.x),r=Ur(t.y),n=Ur(t.xScale),i=Ur(t.yScale);e-=n,r-=i;var o=n*Tm,s=i*Tm,a=e+n*2,l=r+i*2,d=e+n,u=r+i;return[Ti(),Ea(e,u),rs(e,u-s,d-o,r,d,r),rs(d+o,r,a,u-s,a,u),rs(a,u+s,d+o,l,d,l),rs(d-o,l,e,u+s,e,u),Ii()]},ZX=function(t){var e=Ur(t.x),r=Ur(t.y),n=Ur(t.xScale),i=Ur(t.yScale),o=-n,s=-i,a=n*Tm,l=i*Tm,d=o+n*2,u=s+i*2,h=o+n,f=s+i;return[Ss(e,r),Yu(Yi(t.rotate)),Ea(o,f),rs(o,f-l,h-a,s,h,s),rs(h+a,s,d,f-l,d,f),rs(d,f+l,h+a,u,h,u),rs(h-a,u,o,f+l,o,f)]},R1=function(t){var e,r,n;return sn([Ti(),t.graphicsState&&Id(t.graphicsState),t.color&&Nd(t.color),t.borderColor&&rf(t.borderColor),ef(t.borderWidth),t.borderLineCap&&Ig(t.borderLineCap),Tg((e=t.borderDashArray)!==null&&e!==void 0?e:[],(r=t.borderDashPhase)!==null&&r!==void 0?r:0)],t.rotate===void 0?XX({x:t.x,y:t.y,xScale:t.xScale,yScale:t.yScale}):ZX({x:t.x,y:t.y,xScale:t.xScale,yScale:t.yScale,rotate:(n=t.rotate)!==null&&n!==void 0?n:xr(0)}),[t.color&&t.borderWidth?E2():t.color?k2():t.borderColor?tf():Sc(),Ii()]).filter(Boolean)},JX=function(t,e){var r,n,i;return sn([Ti(),e.graphicsState&&Id(e.graphicsState),Ss(e.x,e.y),Yu(Yi((r=e.rotate)!==null&&r!==void 0?r:xr(0))),e.scale?$p(e.scale,-e.scale):$p(1,-1),e.color&&Nd(e.color),e.borderColor&&rf(e.borderColor),e.borderWidth&&ef(e.borderWidth),e.borderLineCap&&Ig(e.borderLineCap),Tg((n=e.borderDashArray)!==null&&n!==void 0?n:[],(i=e.borderDashPhase)!==null&&i!==void 0?i:0)],WX(t),[e.color&&e.borderWidth?E2():e.color?k2():e.borderColor?tf():Sc(),Ii()]).filter(Boolean)},QX=function(t){var e=Ur(t.size),r=-1+.75,n=-1+.51,i=1-.525,o=1-.31,s=-1+.325,a=.3995/(i-n)+n;return[Ti(),t.color&&rf(t.color),ef(t.thickness),Ss(t.x,t.y),Ea(s*e,a*e),Oi(r*e,n*e),Oi(o*e,i*e),tf(),Ii()].filter(Boolean)},Ic=function(t){return t.rotation===0?[Ss(0,0),yy(0)]:t.rotation===90?[Ss(t.width,0),yy(90)]:t.rotation===180?[Ss(t.width,t.height),yy(180)]:t.rotation===270?[Ss(0,t.height),yy(270)]:[]},gy=function(t){var e=Bu({x:t.x,y:t.y,width:t.width,height:t.height,borderWidth:t.borderWidth,color:t.color,borderColor:t.borderColor,rotate:xr(0),xSkew:xr(0),ySkew:xr(0)});if(!t.filled)return e;var r=Ur(t.width),n=Ur(t.height),i=Math.min(r,n)/2,o=QX({x:r/2,y:n/2,size:i,thickness:t.thickness,color:t.markColor});return sn([Ti()],e,o,[Ii()])},vy=function(t){var e=Ur(t.width),r=Ur(t.height),n=Math.min(e,r)/2,i=R1({x:t.x,y:t.y,xScale:n,yScale:n,color:t.color,borderColor:t.borderColor,borderWidth:t.borderWidth});if(!t.filled)return i;var o=R1({x:t.x,y:t.y,xScale:n*.45,yScale:n*.45,color:t.dotColor,borderColor:void 0,borderWidth:0});return sn([Ti()],i,o,[Ii()])},Sw=function(t){var e=Ur(t.x),r=Ur(t.y),n=Ur(t.width),i=Ur(t.height),o=Bu({x:e,y:r,width:n,height:i,borderWidth:t.borderWidth,color:t.color,borderColor:t.borderColor,rotate:xr(0),xSkew:xr(0),ySkew:xr(0)}),s=L2(t.textLines,{color:t.textColor,font:t.font,size:t.fontSize,rotate:xr(0),xSkew:xr(0),ySkew:xr(0)});return sn([Ti()],o,s,[Ii()])},L2=function(t,e){for(var r=[I4(),Nd(e.color),T2(e.font,e.size)],n=0,i=t.length;n<i;n++){var o=t[n],s=o.encoded,a=o.x,l=o.y;r.push(R4(Yi(e.rotate),Yi(e.xSkew),Yi(e.ySkew),a,l),T4(s))}return r.push(N4()),r},O4=function(t){var e=Ur(t.x),r=Ur(t.y),n=Ur(t.width),i=Ur(t.height),o=Ur(t.borderWidth),s=Ur(t.padding),a=e+o/2+s,l=r+o/2+s,d=n-(o/2+s)*2,u=i-(o/2+s)*2,h=[Ea(a,l),Oi(a,l+u),Oi(a+d,l+u),Oi(a+d,l),Sc(),k4(),E4()],f=Bu({x:e,y:r,width:n,height:i,borderWidth:t.borderWidth,color:t.color,borderColor:t.borderColor,rotate:xr(0),xSkew:xr(0),ySkew:xr(0)}),p=L2(t.textLines,{color:t.textColor,font:t.font,size:t.fontSize,rotate:xr(0),xSkew:xr(0),ySkew:xr(0)}),m=sn([D4("Tx"),Ti()],p,[Ii(),L4()]);return sn([Ti()],f,h,m,[Ii()])},eZ=function(t){for(var e=Ur(t.x),r=Ur(t.y),n=Ur(t.width),i=Ur(t.height),o=Ur(t.lineHeight),s=Ur(t.borderWidth),a=Ur(t.padding),l=e+s/2+a,d=r+s/2+a,u=n-(s/2+a)*2,h=i-(s/2+a)*2,f=[Ea(l,d),Oi(l,d+h),Oi(l+u,d+h),Oi(l+u,d),Sc(),k4(),E4()],p=Bu({x:e,y:r,width:n,height:i,borderWidth:t.borderWidth,color:t.color,borderColor:t.borderColor,rotate:xr(0),xSkew:xr(0),ySkew:xr(0)}),m=[],x=0,P=t.selectedLines.length;x<P;x++){var g=t.textLines[t.selectedLines[x]];m.push.apply(m,Bu({x:g.x-a,y:g.y-(o-g.height)/2,width:n-s,height:g.height+(o-g.height)/2,borderWidth:0,color:t.selectedColor,borderColor:void 0,rotate:xr(0),xSkew:xr(0),ySkew:xr(0)}))}var F=L2(t.textLines,{color:t.textColor,font:t.font,size:t.fontSize,rotate:xr(0),xSkew:xr(0),ySkew:xr(0)}),V=sn([D4("Tx"),Ti()],F,[Ii(),L4()]);return sn([Ti()],p,m,f,V,[Ii()])},tZ=function(t){Ht(e,t);function e(){var r=this,n="Input document to `PDFDocument.load` is encrypted. You can use `PDFDocument.load(..., { ignoreEncryption: true })` if you wish to load the document anyways.";return r=t.call(this,n)||this,r}return e}(Error),rZ=function(t){Ht(e,t);function e(){var r=this,n="Input to `PDFDocument.embedFont` was a custom font, but no `fontkit` instance was found. You must register a `fontkit` instance with `PDFDocument.registerFontkit(...)` before embedding custom fonts.";return r=t.call(this,n)||this,r}return e}(Error),nZ=function(t){Ht(e,t);function e(){var r=this,n="A `page` passed to `PDFDocument.addPage` or `PDFDocument.insertPage` was from a different (foreign) PDF document. If you want to copy pages from one PDFDocument to another, you must use `PDFDocument.copyPages(...)` to copy the pages before adding or inserting them.";return r=t.call(this,n)||this,r}return e}(Error),iZ=function(t){Ht(e,t);function e(){var r=this,n="PDFDocument has no pages so `PDFDocument.removePage` cannot be called";return r=t.call(this,n)||this,r}return e}(Error),oZ=function(t){Ht(e,t);function e(r){var n=this,i='PDFDocument has no form field with the name "'+r+'"';return n=t.call(this,i)||this,n}return e}(Error),Zc=function(t){Ht(e,t);function e(r,n,i){var o,s,a=this,l=n?.name,d=(s=(o=i?.constructor)===null||o===void 0?void 0:o.name)!==null&&s!==void 0?s:i,u='Expected field "'+r+'" to be of type '+l+", "+("but it is actually of type "+d);return a=t.call(this,u)||this,a}return e}(Error);(function(t){Ht(e,t);function e(r){var n=this,i='Failed to select check box due to missing onValue: "'+r+'"';return n=t.call(this,i)||this,n}return e})(Error);var B4=function(t){Ht(e,t);function e(r){var n=this,i='A field already exists with the specified name: "'+r+'"';return n=t.call(this,i)||this,n}return e}(Error),sZ=function(t){Ht(e,t);function e(r){var n=this,i='Field name contains invalid component: "'+r+'"';return n=t.call(this,i)||this,n}return e}(Error);(function(t){Ht(e,t);function e(r){var n=this,i='A non-terminal field already exists with the specified name: "'+r+'"';return n=t.call(this,i)||this,n}return e})(Error);var aZ=function(t){Ht(e,t);function e(r){var n=this,i="Reading rich text fields is not supported: Attempted to read rich text field: "+r;return n=t.call(this,i)||this,n}return e}(Error),lZ=function(t){Ht(e,t);function e(r,n){var i=this,o="Failed to layout combed text as lineLength="+r+" is greater than cellCount="+n;return i=t.call(this,o)||this,i}return e}(Error),cZ=function(t){Ht(e,t);function e(r,n,i){var o=this,s="Attempted to set text with length="+r+" for TextField with maxLength="+n+" and name="+i;return o=t.call(this,s)||this,o}return e}(Error),dZ=function(t){Ht(e,t);function e(r,n,i){var o=this,s="Attempted to set maxLength="+n+", which is less than "+r+", the length of this field's current value (name="+i+")";return o=t.call(this,s)||this,o}return e}(Error),Ai;(function(t){t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right"})(Ai||(Ai={}));var j4=4,V4=500,z4=function(t,e,r,n){n===void 0&&(n=!1);for(var i=j4;i<V4;){for(var o=0,s=0,a=t.length;s<a;s++){o+=1;for(var l=t[s],d=l.split(" "),u=r.width,h=0,f=d.length;h<f;h++){var p=h===f-1,m=p?d[h]:d[h]+" ",x=e.widthOfTextAtSize(m,i);u-=x,u<=0&&(o+=1,u=r.width-x)}}if(!n&&o>t.length)return i-1;var P=e.heightAtSize(i),g=P+P*.2,F=g*o;if(F>Math.abs(r.height))return i-1;i+=1}return i},uZ=function(t,e,r,n){for(var i=r.width/n,o=r.height,s=j4,a=xK(t);s<V4;){for(var l=0,d=a.length;l<d;l++){var u=a[l],h=e.widthOfTextAtSize(u,s)>i*.75;if(h)return s-1}var f=e.heightAtSize(s,{descender:!1});if(f>o)return s-1;s+=1}return s},hZ=function(t){for(var e=t.length;e>0;e--)if(/\s/.test(t[e]))return e},pZ=function(t,e,r,n){for(var i,o=t.length;o>0;){var s=t.substring(0,o),a=r.encodeText(s),l=r.widthOfTextAtSize(s,n);if(l<e){var d=t.substring(o)||void 0;return{line:s,encoded:a,width:l,remainder:d}}o=(i=hZ(s))!==null&&i!==void 0?i:0}return{line:t,encoded:r.encodeText(t),width:r.widthOfTextAtSize(t,n),remainder:void 0}},U4=function(t,e){var r=e.alignment,n=e.fontSize,i=e.font,o=e.bounds,s=j3(Zp(t));(n===void 0||n===0)&&(n=z4(s,i,o,!0));for(var a=i.heightAtSize(n),l=a+a*.2,d=[],u=o.x,h=o.y,f=o.x+o.width,p=o.y+o.height,m=o.y+o.height,x=0,P=s.length;x<P;x++)for(var g=s[x];g!==void 0;){var F=pZ(g,o.width,i,n),V=F.line,N=F.encoded,R=F.width,M=F.remainder,C=r===Ai.Left?o.x:r===Ai.Center?o.x+o.width/2-R/2:r===Ai.Right?o.x+o.width-R:o.x;m-=l,C<u&&(u=C),m<h&&(h=m),C+R>f&&(f=C+R),m+a>p&&(p=m+a),d.push({text:V,encoded:N,width:R,height:a,x:C,y:m}),g=M?.trim()}return{fontSize:n,lineHeight:l,lines:d,bounds:{x:u,y:h,width:f-u,height:p-h}}},fZ=function(t,e){var r=e.fontSize,n=e.font,i=e.bounds,o=e.cellCount,s=V3(Zp(t));if(s.length>o)throw new lZ(s.length,o);(r===void 0||r===0)&&(r=uZ(s,n,i,o));for(var a=i.width/o,l=n.heightAtSize(r,{descender:!1}),d=i.y+(i.height/2-l/2),u=[],h=i.x,f=i.y,p=i.x+i.width,m=i.y+i.height,x=0,P=0;x<o;){var g=z3(s,P),F=g[0],V=g[1],N=n.encodeText(F),R=n.widthOfTextAtSize(F,r),M=i.x+(a*x+a/2),C=M-R/2;C<h&&(h=C),d<f&&(f=d),C+R>p&&(p=C+R),d+l>m&&(m=d+l),u.push({text:s,encoded:N,width:R,height:l,x:C,y:d}),x+=1,P+=V}return{fontSize:r,cells:u,bounds:{x:h,y:f,width:p-h,height:m-f}}},Im=function(t,e){var r=e.alignment,n=e.fontSize,i=e.font,o=e.bounds,s=V3(Zp(t));(n===void 0||n===0)&&(n=z4([s],i,o));var a=i.encodeText(s),l=i.widthOfTextAtSize(s,n),d=i.heightAtSize(n,{descender:!1}),u=r===Ai.Left?o.x:r===Ai.Center?o.x+o.width/2-l/2:r===Ai.Right?o.x+o.width-l:o.x,h=o.y+(o.height/2-d/2);return{fontSize:n,line:{text:s,encoded:a,width:l,height:d,x:u,y:h},bounds:{x:u,y:h,width:l,height:d}}},Xu=function(t){return"normal"in t?t:{normal:t}},yZ=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]+(\d*\.\d+|\d+)[\0\t\n\f\r\ ]+Tf/,Cc=function(t){var e,r,n=(e=t.getDefaultAppearance())!==null&&e!==void 0?e:"",i=(r=h2(n,yZ).match)!==null&&r!==void 0?r:[],o=Number(i[2]);return isFinite(o)?o:void 0},mZ=/(\d*\.\d+|\d+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+(g|rg|k)/,Cs=function(t){var e,r=(e=t.getDefaultAppearance())!==null&&e!==void 0?e:"",n=h2(r,mZ).match,i=n??[],o=i[1],s=i[2],a=i[3],l=i[4],d=i[5];if(d==="g"&&o)return $4(Number(o));if(d==="rg"&&o&&s&&a)return Pn(Number(o),Number(s),Number(a));if(d==="k"&&o&&s&&a&&l)return F4(Number(o),Number(s),Number(a),Number(l))},_s=function(t,e,r,n){var i;n===void 0&&(n=0);var o=[Nd(e).toString(),T2((i=r?.name)!==null&&i!==void 0?i:"dummy__noop",n).toString()].join(`
`);t.setDefaultAppearance(o)},gZ=function(t,e){var r,n,i,o=Cs(e),s=Cs(t.acroField),a=e.getRectangle(),l=e.getAppearanceCharacteristics(),d=e.getBorderStyle(),u=(r=d?.getWidth())!==null&&r!==void 0?r:0,h=yl(l?.getRotation()),f=Td(a,h),p=f.width,m=f.height,x=Ic(Tr(Tr({},a),{rotation:h})),P=Pn(0,0,0),g=(n=Co(l?.getBorderColor()))!==null&&n!==void 0?n:P,F=Co(l?.getBackgroundColor()),V=Co(l?.getBackgroundColor(),.8),N=(i=o??s)!==null&&i!==void 0?i:P;_s(o?e:t.acroField,N);var R={x:0+u/2,y:0+u/2,width:p-u,height:m-u,thickness:1.5,borderWidth:u,borderColor:g,markColor:N};return{normal:{on:sn(x,gy(Tr(Tr({},R),{color:F,filled:!0}))),off:sn(x,gy(Tr(Tr({},R),{color:F,filled:!1})))},down:{on:sn(x,gy(Tr(Tr({},R),{color:V,filled:!0}))),off:sn(x,gy(Tr(Tr({},R),{color:V,filled:!1})))}}},vZ=function(t,e){var r,n,i,o=Cs(e),s=Cs(t.acroField),a=e.getRectangle(),l=e.getAppearanceCharacteristics(),d=e.getBorderStyle(),u=(r=d?.getWidth())!==null&&r!==void 0?r:0,h=yl(l?.getRotation()),f=Td(a,h),p=f.width,m=f.height,x=Ic(Tr(Tr({},a),{rotation:h})),P=Pn(0,0,0),g=(n=Co(l?.getBorderColor()))!==null&&n!==void 0?n:P,F=Co(l?.getBackgroundColor()),V=Co(l?.getBackgroundColor(),.8),N=(i=o??s)!==null&&i!==void 0?i:P;_s(o?e:t.acroField,N);var R={x:p/2,y:m/2,width:p-u,height:m-u,borderWidth:u,borderColor:g,dotColor:N};return{normal:{on:sn(x,vy(Tr(Tr({},R),{color:F,filled:!0}))),off:sn(x,vy(Tr(Tr({},R),{color:F,filled:!1})))},down:{on:sn(x,vy(Tr(Tr({},R),{color:V,filled:!0}))),off:sn(x,vy(Tr(Tr({},R),{color:V,filled:!1})))}}},bZ=function(t,e,r){var n,i,o,s,a,l=Cs(e),d=Cs(t.acroField),u=Cc(e),h=Cc(t.acroField),f=e.getRectangle(),p=e.getAppearanceCharacteristics(),m=e.getBorderStyle(),x=p?.getCaptions(),P=(n=x?.normal)!==null&&n!==void 0?n:"",g=(o=(i=x?.down)!==null&&i!==void 0?i:P)!==null&&o!==void 0?o:"",F=(s=m?.getWidth())!==null&&s!==void 0?s:0,V=yl(p?.getRotation()),N=Td(f,V),R=N.width,M=N.height,C=Ic(Tr(Tr({},f),{rotation:V})),k=Pn(0,0,0),D=Co(p?.getBorderColor()),$=Co(p?.getBackgroundColor()),w=Co(p?.getBackgroundColor(),.8),_={x:F,y:F,width:R-F*2,height:M-F*2},v=Im(P,{alignment:Ai.Center,fontSize:u??h,font:r,bounds:_}),z=Im(g,{alignment:Ai.Center,fontSize:u??h,font:r,bounds:_}),W=Math.min(v.fontSize,z.fontSize),A=(a=l??d)!==null&&a!==void 0?a:k;_s(l||u!==void 0?e:t.acroField,A,r,W);var I={x:0+F/2,y:0+F/2,width:R-F,height:M-F,borderWidth:F,borderColor:D,textColor:A,font:r.name,fontSize:W};return{normal:sn(C,Sw(Tr(Tr({},I),{color:$,textLines:[v.line]}))),down:sn(C,Sw(Tr(Tr({},I),{color:w,textLines:[z.line]})))}},PZ=function(t,e,r){var n,i,o,s,a=Cs(e),l=Cs(t.acroField),d=Cc(e),u=Cc(t.acroField),h=e.getRectangle(),f=e.getAppearanceCharacteristics(),p=e.getBorderStyle(),m=(n=t.getText())!==null&&n!==void 0?n:"",x=(i=p?.getWidth())!==null&&i!==void 0?i:0,P=yl(f?.getRotation()),g=Td(h,P),F=g.width,V=g.height,N=Ic(Tr(Tr({},h),{rotation:P})),R=Pn(0,0,0),M=Co(f?.getBorderColor()),C=Co(f?.getBackgroundColor()),k,D,$=t.isCombed()?0:1,w={x:x+$,y:x+$,width:F-(x+$)*2,height:V-(x+$)*2};if(t.isMultiline()){var _=U4(m,{alignment:t.getAlignment(),fontSize:d??u,font:r,bounds:w});k=_.lines,D=_.fontSize}else if(t.isCombed()){var _=fZ(m,{fontSize:d??u,font:r,bounds:w,cellCount:(o=t.getMaxLength())!==null&&o!==void 0?o:0});k=_.cells,D=_.fontSize}else{var _=Im(m,{alignment:t.getAlignment(),fontSize:d??u,font:r,bounds:w});k=[_.line],D=_.fontSize}var v=(s=a??l)!==null&&s!==void 0?s:R;_s(a||d!==void 0?e:t.acroField,v,r,D);var z={x:0+x/2,y:0+x/2,width:F-x,height:V-x,borderWidth:x??0,borderColor:M,textColor:v,font:r.name,fontSize:D,color:C,textLines:k,padding:$};return sn(N,O4(z))},xZ=function(t,e,r){var n,i,o,s=Cs(e),a=Cs(t.acroField),l=Cc(e),d=Cc(t.acroField),u=e.getRectangle(),h=e.getAppearanceCharacteristics(),f=e.getBorderStyle(),p=(n=t.getSelected()[0])!==null&&n!==void 0?n:"",m=(i=f?.getWidth())!==null&&i!==void 0?i:0,x=yl(h?.getRotation()),P=Td(u,x),g=P.width,F=P.height,V=Ic(Tr(Tr({},u),{rotation:x})),N=Pn(0,0,0),R=Co(h?.getBorderColor()),M=Co(h?.getBackgroundColor()),C=1,k={x:m+C,y:m+C,width:g-(m+C)*2,height:F-(m+C)*2},D=Im(p,{alignment:Ai.Left,fontSize:l??d,font:r,bounds:k}),$=D.line,w=D.fontSize,_=(o=s??a)!==null&&o!==void 0?o:N;_s(s||l!==void 0?e:t.acroField,_,r,w);var v={x:0+m/2,y:0+m/2,width:g-m,height:F-m,borderWidth:m??0,borderColor:R,textColor:_,font:r.name,fontSize:w,color:M,textLines:[$],padding:C};return sn(V,O4(v))},SZ=function(t,e,r){var n,i,o=Cs(e),s=Cs(t.acroField),a=Cc(e),l=Cc(t.acroField),d=e.getRectangle(),u=e.getAppearanceCharacteristics(),h=e.getBorderStyle(),f=(n=h?.getWidth())!==null&&n!==void 0?n:0,p=yl(u?.getRotation()),m=Td(d,p),x=m.width,P=m.height,g=Ic(Tr(Tr({},d),{rotation:p})),F=Pn(0,0,0),V=Co(u?.getBorderColor()),N=Co(u?.getBackgroundColor()),R=t.getOptions(),M=t.getSelected();t.isSorted()&&R.sort();for(var C="",k=0,D=R.length;k<D;k++)C+=R[k],k<D-1&&(C+=`
`);for(var $=1,w={x:f+$,y:f+$,width:x-(f+$)*2,height:P-(f+$)*2},_=U4(C,{alignment:Ai.Left,fontSize:a??l,font:r,bounds:w}),v=_.lines,z=_.fontSize,W=_.lineHeight,A=[],k=0,D=v.length;k<D;k++){var I=v[k];M.includes(I.text)&&A.push(k)}var ee=Pn(153/255,193/255,218/255),Z=(i=o??s)!==null&&i!==void 0?i:F;return _s(o||a!==void 0?e:t.acroField,Z,r,z),sn(g,eZ({x:0+f/2,y:0+f/2,width:x-f,height:P-f,borderWidth:f??0,borderColor:V,textColor:Z,font:r.name,fontSize:z,color:N,textLines:v,lineHeight:W,selectedColor:ee,selectedLines:A,padding:$}))},q4=function(){function t(e,r,n){this.alreadyEmbedded=!1,dt(e,"ref",[[bn,"PDFRef"]]),dt(r,"doc",[[ul,"PDFDocument"]]),dt(n,"embedder",[[y4,"PDFPageEmbedder"]]),this.ref=e,this.doc=r,this.width=n.width,this.height=n.height,this.embedder=n}return t.prototype.scale=function(e){return dt(e,"factor",["number"]),{width:this.width*e,height:this.height*e}},t.prototype.size=function(){return this.scale(1)},t.prototype.embed=function(){return jr(this,void 0,void 0,function(){return Vr(this,function(e){switch(e.label){case 0:return this.alreadyEmbedded?[3,2]:[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:e.sent(),this.alreadyEmbedded=!0,e.label=2;case 2:return[2]}})})},t.of=function(e,r,n){return new t(e,r,n)},t}(),is=function(){function t(e,r,n){this.modified=!0,dt(e,"ref",[[bn,"PDFRef"]]),dt(r,"doc",[[ul,"PDFDocument"]]),dt(n,"embedder",[[P2,"CustomFontEmbedder"],[Sm,"StandardFontEmbedder"]]),this.ref=e,this.doc=r,this.name=n.fontName,this.embedder=n}return t.prototype.encodeText=function(e){return dt(e,"text",["string"]),this.modified=!0,this.embedder.encodeText(e)},t.prototype.widthOfTextAtSize=function(e,r){return dt(e,"text",["string"]),dt(r,"size",["number"]),this.embedder.widthOfTextAtSize(e,r)},t.prototype.heightAtSize=function(e,r){var n;return dt(e,"size",["number"]),qt(r?.descender,"options.descender",["boolean"]),this.embedder.heightOfFontAtSize(e,{descender:(n=r?.descender)!==null&&n!==void 0?n:!0})},t.prototype.sizeAtHeight=function(e){return dt(e,"height",["number"]),this.embedder.sizeOfFontAtHeight(e)},t.prototype.getCharacterSet=function(){return this.embedder instanceof Sm?this.embedder.encoding.supportedCodePoints:this.embedder.font.characterSet},t.prototype.embed=function(){return jr(this,void 0,void 0,function(){return Vr(this,function(e){switch(e.label){case 0:return this.modified?[4,this.embedder.embedIntoContext(this.doc.context,this.ref)]:[3,2];case 1:e.sent(),this.modified=!1,e.label=2;case 2:return[2]}})})},t.of=function(e,r,n){return new t(e,r,n)},t}(),D1=function(){function t(e,r,n){dt(e,"ref",[[bn,"PDFRef"]]),dt(r,"doc",[[ul,"PDFDocument"]]),dt(n,"embedder",[[u4,"JpegEmbedder"],[h4,"PngEmbedder"]]),this.ref=e,this.doc=r,this.width=n.width,this.height=n.height,this.embedder=n}return t.prototype.scale=function(e){return dt(e,"factor",["number"]),{width:this.width*e,height:this.height*e}},t.prototype.scaleToFit=function(e,r){dt(e,"width",["number"]),dt(r,"height",["number"]);var n=e/this.width,i=r/this.height,o=Math.min(n,i);return this.scale(o)},t.prototype.size=function(){return this.scale(1)},t.prototype.embed=function(){return jr(this,void 0,void 0,function(){var e,r,n;return Vr(this,function(i){switch(i.label){case 0:return this.embedder?(this.embedTask||(e=this,r=e.doc,n=e.ref,this.embedTask=this.embedder.embedIntoContext(r.context,n)),[4,this.embedTask]):[2];case 1:return i.sent(),this.embedder=void 0,[2]}})})},t.of=function(e,r,n){return new t(e,r,n)},t}(),hc;(function(t){t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right"})(hc||(hc={}));var Zu=function(t){qt(t?.x,"options.x",["number"]),qt(t?.y,"options.y",["number"]),qt(t?.width,"options.width",["number"]),qt(t?.height,"options.height",["number"]),qt(t?.textColor,"options.textColor",[[Object,"Color"]]),qt(t?.backgroundColor,"options.backgroundColor",[[Object,"Color"]]),qt(t?.borderColor,"options.borderColor",[[Object,"Color"]]),qt(t?.borderWidth,"options.borderWidth",["number"]),qt(t?.rotate,"options.rotate",[[Object,"Rotation"]])},Rd=function(){function t(e,r,n){dt(e,"acroField",[[Ku,"PDFAcroTerminal"]]),dt(r,"ref",[[bn,"PDFRef"]]),dt(n,"doc",[[ul,"PDFDocument"]]),this.acroField=e,this.ref=r,this.doc=n}return t.prototype.getName=function(){var e;return(e=this.acroField.getFullyQualifiedName())!==null&&e!==void 0?e:""},t.prototype.isReadOnly=function(){return this.acroField.hasFlag(Hs.ReadOnly)},t.prototype.enableReadOnly=function(){this.acroField.setFlagTo(Hs.ReadOnly,!0)},t.prototype.disableReadOnly=function(){this.acroField.setFlagTo(Hs.ReadOnly,!1)},t.prototype.isRequired=function(){return this.acroField.hasFlag(Hs.Required)},t.prototype.enableRequired=function(){this.acroField.setFlagTo(Hs.Required,!0)},t.prototype.disableRequired=function(){this.acroField.setFlagTo(Hs.Required,!1)},t.prototype.isExported=function(){return!this.acroField.hasFlag(Hs.NoExport)},t.prototype.enableExporting=function(){this.acroField.setFlagTo(Hs.NoExport,!1)},t.prototype.disableExporting=function(){this.acroField.setFlagTo(Hs.NoExport,!0)},t.prototype.needsAppearancesUpdate=function(){throw new xs(this.constructor.name,"needsAppearancesUpdate")},t.prototype.defaultUpdateAppearances=function(e){throw new xs(this.constructor.name,"defaultUpdateAppearances")},t.prototype.markAsDirty=function(){this.doc.getForm().markFieldAsDirty(this.ref)},t.prototype.markAsClean=function(){this.doc.getForm().markFieldAsClean(this.ref)},t.prototype.isDirty=function(){return this.doc.getForm().fieldIsDirty(this.ref)},t.prototype.createWidget=function(e){var r,n=e.textColor,i=e.backgroundColor,o=e.borderColor,s=e.borderWidth,a=A4(e.rotate),l=e.caption,d=e.x,u=e.y,h=e.width+s,f=e.height+s,p=!!e.hidden,m=e.page;i4(a,"degreesAngle",90);var x=I1.create(this.doc.context,this.ref),P=RX({x:d,y:u,width:h,height:f},s,a);x.setRectangle(P),m&&x.setP(m);var g=x.getOrCreateAppearanceCharacteristics();i&&g.setBackgroundColor(vw(i)),g.setRotation(a),l&&g.setCaptions({normal:l}),o&&g.setBorderColor(vw(o));var F=x.getOrCreateBorderStyle();if(s!==void 0&&F.setWidth(s),x.setFlagTo(pp.Print,!0),x.setFlagTo(pp.Hidden,p),x.setFlagTo(pp.Invisible,!1),n){var V=(r=this.acroField.getDefaultAppearance())!==null&&r!==void 0?r:"",N=V+`
`+Nd(n).toString();this.acroField.setDefaultAppearance(N)}return x},t.prototype.updateWidgetAppearanceWithFont=function(e,r,n){var i=n.normal,o=n.rollover,s=n.down;this.updateWidgetAppearances(e,{normal:this.createAppearanceStream(e,i,r),rollover:o&&this.createAppearanceStream(e,o,r),down:s&&this.createAppearanceStream(e,s,r)})},t.prototype.updateOnOffWidgetAppearance=function(e,r,n){var i=n.normal,o=n.rollover,s=n.down;this.updateWidgetAppearances(e,{normal:this.createAppearanceDict(e,i,r),rollover:o&&this.createAppearanceDict(e,o,r),down:s&&this.createAppearanceDict(e,s,r)})},t.prototype.updateWidgetAppearances=function(e,r){var n=r.normal,i=r.rollover,o=r.down;e.setNormalAppearance(n),i?e.setRolloverAppearance(i):e.removeRolloverAppearance(),o?e.setDownAppearance(o):e.removeDownAppearance()},t.prototype.createAppearanceStream=function(e,r,n){var i,o=this.acroField.dict.context,s=e.getRectangle(),a=s.width,l=s.height,d=n&&{Font:(i={},i[n.name]=n.ref,i)},u=o.formXObject(r,{Resources:d,BBox:o.obj([0,0,a,l]),Matrix:o.obj([1,0,0,1,0,0])}),h=o.register(u);return h},t.prototype.createImageAppearanceStream=function(e,r,n){var i,o,s=this.acroField.dict.context,a=e.getRectangle(),l=e.getAppearanceCharacteristics(),d=e.getBorderStyle(),u=(o=d?.getWidth())!==null&&o!==void 0?o:0,h=yl(l?.getRotation()),f=Ic(Tr(Tr({},a),{rotation:h})),p=Td(a,h),m=r.scaleToFit(p.width-u*2,p.height-u*2),x={x:u,y:u,width:m.width,height:m.height,rotate:xr(0),xSkew:xr(0),ySkew:xr(0)};n===hc.Center?(x.x+=(p.width-u*2)/2-m.width/2,x.y+=(p.height-u*2)/2-m.height/2):n===hc.Right&&(x.x=p.width-u-m.width,x.y=p.height-u-m.height);var P=this.doc.context.addRandomSuffix("Image",10),g=sn(f,M4(P,x)),F={XObject:(i={},i[P]=r.ref,i)},V=s.formXObject(g,{Resources:F,BBox:s.obj([0,0,a.width,a.height]),Matrix:s.obj([1,0,0,1,0,0])});return s.register(V)},t.prototype.createAppearanceDict=function(e,r,n){var i=this.acroField.dict.context,o=this.createAppearanceStream(e,r.on),s=this.createAppearanceStream(e,r.off),a=i.obj({});return a.set(n,o),a.set(Ke.of("Off"),s),a},t}(),Gh=function(t){Ht(e,t);function e(r,n,i){var o=t.call(this,r,n,i)||this;return dt(r,"acroCheckBox",[[bg,"PDFAcroCheckBox"]]),o.acroField=r,o}return e.prototype.check=function(){var r,n=(r=this.acroField.getOnValue())!==null&&r!==void 0?r:Ke.of("Yes");this.markAsDirty(),this.acroField.setValue(n)},e.prototype.uncheck=function(){this.markAsDirty(),this.acroField.setValue(Ke.of("Off"))},e.prototype.isChecked=function(){var r=this.acroField.getOnValue();return!!r&&r===this.acroField.getValue()},e.prototype.addToPage=function(r,n){var i,o,s,a,l,d;dt(r,"page",[[bs,"PDFPage"]]),Zu(n),n||(n={}),"textColor"in n||(n.textColor=Pn(0,0,0)),"backgroundColor"in n||(n.backgroundColor=Pn(1,1,1)),"borderColor"in n||(n.borderColor=Pn(0,0,0)),"borderWidth"in n||(n.borderWidth=1);var u=this.createWidget({x:(i=n.x)!==null&&i!==void 0?i:0,y:(o=n.y)!==null&&o!==void 0?o:0,width:(s=n.width)!==null&&s!==void 0?s:50,height:(a=n.height)!==null&&a!==void 0?a:50,textColor:n.textColor,backgroundColor:n.backgroundColor,borderColor:n.borderColor,borderWidth:(l=n.borderWidth)!==null&&l!==void 0?l:0,rotate:(d=n.rotate)!==null&&d!==void 0?d:xr(0),hidden:n.hidden,page:r.ref}),h=this.doc.context.register(u.dict);this.acroField.addWidget(h),u.setAppearanceState(Ke.of("Off")),this.updateWidgetAppearance(u,Ke.of("Yes")),r.node.addAnnot(h)},e.prototype.needsAppearancesUpdate=function(){for(var r,n=this.acroField.getWidgets(),i=0,o=n.length;i<o;i++){var s=n[i],a=s.getAppearanceState(),l=(r=s.getAppearances())===null||r===void 0?void 0:r.normal;if(!(l instanceof Or)||a&&!l.has(a))return!0}return!1},e.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},e.prototype.updateAppearances=function(r){var n;qt(r,"provider",[Function]);for(var i=this.acroField.getWidgets(),o=0,s=i.length;o<s;o++){var a=i[o],l=(n=a.getOnValue())!==null&&n!==void 0?n:Ke.of("Yes");l&&this.updateWidgetAppearance(a,l,r)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(r,n,i){var o=i??gZ,s=Xu(o(this,r));this.updateOnOffWidgetAppearance(r,n,s)},e.of=function(r,n,i){return new e(r,n,i)},e}(Rd),My=function(t){Ht(e,t);function e(r,n,i){var o=t.call(this,r,n,i)||this;return dt(r,"acroComboBox",[[Pg,"PDFAcroComboBox"]]),o.acroField=r,o}return e.prototype.getOptions=function(){for(var r=this.acroField.getOptions(),n=new Array(r.length),i=0,o=n.length;i<o;i++){var s=r[i],a=s.display,l=s.value;n[i]=(a??l).decodeText()}return n},e.prototype.getSelected=function(){for(var r=this.acroField.getValues(),n=new Array(r.length),i=0,o=r.length;i<o;i++)n[i]=r[i].decodeText();return n},e.prototype.setOptions=function(r){dt(r,"options",[Array]);for(var n=new Array(r.length),i=0,o=r.length;i<o;i++)n[i]={value:vr.fromText(r[i])};this.acroField.setOptions(n)},e.prototype.addOptions=function(r){dt(r,"options",["string",Array]);for(var n=Array.isArray(r)?r:[r],i=this.acroField.getOptions(),o=new Array(n.length),s=0,a=n.length;s<a;s++)o[s]={value:vr.fromText(n[s])};this.acroField.setOptions(i.concat(o))},e.prototype.select=function(r,n){n===void 0&&(n=!1),dt(r,"options",["string",Array]),dt(n,"merge",["boolean"]);var i=Array.isArray(r)?r:[r],o=this.getOptions(),s=i.find(function(h){return!o.includes(h)});s&&this.enableEditing(),this.markAsDirty(),(i.length>1||i.length===1&&n)&&this.enableMultiselect();for(var a=new Array(i.length),l=0,d=i.length;l<d;l++)a[l]=vr.fromText(i[l]);if(n){var u=this.acroField.getValues();this.acroField.setValues(u.concat(a))}else this.acroField.setValues(a)},e.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},e.prototype.setFontSize=function(r){gg(r,"fontSize"),this.acroField.setFontSize(r),this.markAsDirty()},e.prototype.isEditable=function(){return this.acroField.hasFlag(gn.Edit)},e.prototype.enableEditing=function(){this.acroField.setFlagTo(gn.Edit,!0)},e.prototype.disableEditing=function(){this.acroField.setFlagTo(gn.Edit,!1)},e.prototype.isSorted=function(){return this.acroField.hasFlag(gn.Sort)},e.prototype.enableSorting=function(){this.acroField.setFlagTo(gn.Sort,!0)},e.prototype.disableSorting=function(){this.acroField.setFlagTo(gn.Sort,!1)},e.prototype.isMultiselect=function(){return this.acroField.hasFlag(gn.MultiSelect)},e.prototype.enableMultiselect=function(){this.acroField.setFlagTo(gn.MultiSelect,!0)},e.prototype.disableMultiselect=function(){this.acroField.setFlagTo(gn.MultiSelect,!1)},e.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(gn.DoNotSpellCheck)},e.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(gn.DoNotSpellCheck,!1)},e.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(gn.DoNotSpellCheck,!0)},e.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(gn.CommitOnSelChange)},e.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(gn.CommitOnSelChange,!0)},e.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(gn.CommitOnSelChange,!1)},e.prototype.addToPage=function(r,n){var i,o,s,a,l,d,u;dt(r,"page",[[bs,"PDFPage"]]),Zu(n),n||(n={}),"textColor"in n||(n.textColor=Pn(0,0,0)),"backgroundColor"in n||(n.backgroundColor=Pn(1,1,1)),"borderColor"in n||(n.borderColor=Pn(0,0,0)),"borderWidth"in n||(n.borderWidth=1);var h=this.createWidget({x:(i=n.x)!==null&&i!==void 0?i:0,y:(o=n.y)!==null&&o!==void 0?o:0,width:(s=n.width)!==null&&s!==void 0?s:200,height:(a=n.height)!==null&&a!==void 0?a:50,textColor:n.textColor,backgroundColor:n.backgroundColor,borderColor:n.borderColor,borderWidth:(l=n.borderWidth)!==null&&l!==void 0?l:0,rotate:(d=n.rotate)!==null&&d!==void 0?d:xr(0),hidden:n.hidden,page:r.ref}),f=this.doc.context.register(h.dict);this.acroField.addWidget(f);var p=(u=n.font)!==null&&u!==void 0?u:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(h,p),r.node.addAnnot(f)},e.prototype.needsAppearancesUpdate=function(){var r;if(this.isDirty())return!0;for(var n=this.acroField.getWidgets(),i=0,o=n.length;i<o;i++){var s=n[i],a=((r=s.getAppearances())===null||r===void 0?void 0:r.normal)instanceof ns;if(!a)return!0}return!1},e.prototype.defaultUpdateAppearances=function(r){dt(r,"font",[[is,"PDFFont"]]),this.updateAppearances(r)},e.prototype.updateAppearances=function(r,n){dt(r,"font",[[is,"PDFFont"]]),qt(n,"provider",[Function]);for(var i=this.acroField.getWidgets(),o=0,s=i.length;o<s;o++){var a=i[o];this.updateWidgetAppearance(a,r,n)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(r,n,i){var o=i??xZ,s=Xu(o(this,r,n));this.updateWidgetAppearanceWithFont(r,n,s)},e.of=function(r,n,i){return new e(r,n,i)},e}(Rd),Oy=function(t){Ht(e,t);function e(r,n,i){var o=t.call(this,r,n,i)||this;return dt(r,"acroListBox",[[Cg,"PDFAcroListBox"]]),o.acroField=r,o}return e.prototype.getOptions=function(){for(var r=this.acroField.getOptions(),n=new Array(r.length),i=0,o=n.length;i<o;i++){var s=r[i],a=s.display,l=s.value;n[i]=(a??l).decodeText()}return n},e.prototype.getSelected=function(){for(var r=this.acroField.getValues(),n=new Array(r.length),i=0,o=r.length;i<o;i++)n[i]=r[i].decodeText();return n},e.prototype.setOptions=function(r){dt(r,"options",[Array]),this.markAsDirty();for(var n=new Array(r.length),i=0,o=r.length;i<o;i++)n[i]={value:vr.fromText(r[i])};this.acroField.setOptions(n)},e.prototype.addOptions=function(r){dt(r,"options",["string",Array]),this.markAsDirty();for(var n=Array.isArray(r)?r:[r],i=this.acroField.getOptions(),o=new Array(n.length),s=0,a=n.length;s<a;s++)o[s]={value:vr.fromText(n[s])};this.acroField.setOptions(i.concat(o))},e.prototype.select=function(r,n){n===void 0&&(n=!1),dt(r,"options",["string",Array]),dt(n,"merge",["boolean"]);var i=Array.isArray(r)?r:[r],o=this.getOptions();PY(i,"option",o),this.markAsDirty(),(i.length>1||i.length===1&&n)&&this.enableMultiselect();for(var s=new Array(i.length),a=0,l=i.length;a<l;a++)s[a]=vr.fromText(i[a]);if(n){var d=this.acroField.getValues();this.acroField.setValues(d.concat(s))}else this.acroField.setValues(s)},e.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},e.prototype.setFontSize=function(r){gg(r,"fontSize"),this.acroField.setFontSize(r),this.markAsDirty()},e.prototype.isSorted=function(){return this.acroField.hasFlag(gn.Sort)},e.prototype.enableSorting=function(){this.acroField.setFlagTo(gn.Sort,!0)},e.prototype.disableSorting=function(){this.acroField.setFlagTo(gn.Sort,!1)},e.prototype.isMultiselect=function(){return this.acroField.hasFlag(gn.MultiSelect)},e.prototype.enableMultiselect=function(){this.acroField.setFlagTo(gn.MultiSelect,!0)},e.prototype.disableMultiselect=function(){this.acroField.setFlagTo(gn.MultiSelect,!1)},e.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(gn.CommitOnSelChange)},e.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(gn.CommitOnSelChange,!0)},e.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(gn.CommitOnSelChange,!1)},e.prototype.addToPage=function(r,n){var i,o,s,a,l,d,u;dt(r,"page",[[bs,"PDFPage"]]),Zu(n),n||(n={}),"textColor"in n||(n.textColor=Pn(0,0,0)),"backgroundColor"in n||(n.backgroundColor=Pn(1,1,1)),"borderColor"in n||(n.borderColor=Pn(0,0,0)),"borderWidth"in n||(n.borderWidth=1);var h=this.createWidget({x:(i=n.x)!==null&&i!==void 0?i:0,y:(o=n.y)!==null&&o!==void 0?o:0,width:(s=n.width)!==null&&s!==void 0?s:200,height:(a=n.height)!==null&&a!==void 0?a:100,textColor:n.textColor,backgroundColor:n.backgroundColor,borderColor:n.borderColor,borderWidth:(l=n.borderWidth)!==null&&l!==void 0?l:0,rotate:(d=n.rotate)!==null&&d!==void 0?d:xr(0),hidden:n.hidden,page:r.ref}),f=this.doc.context.register(h.dict);this.acroField.addWidget(f);var p=(u=n.font)!==null&&u!==void 0?u:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(h,p),r.node.addAnnot(f)},e.prototype.needsAppearancesUpdate=function(){var r;if(this.isDirty())return!0;for(var n=this.acroField.getWidgets(),i=0,o=n.length;i<o;i++){var s=n[i],a=((r=s.getAppearances())===null||r===void 0?void 0:r.normal)instanceof ns;if(!a)return!0}return!1},e.prototype.defaultUpdateAppearances=function(r){dt(r,"font",[[is,"PDFFont"]]),this.updateAppearances(r)},e.prototype.updateAppearances=function(r,n){dt(r,"font",[[is,"PDFFont"]]),qt(n,"provider",[Function]);for(var i=this.acroField.getWidgets(),o=0,s=i.length;o<s;o++){var a=i[o];this.updateWidgetAppearance(a,r,n)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(r,n,i){var o=i??SZ,s=Xu(o(this,r,n));this.updateWidgetAppearanceWithFont(r,n,s)},e.of=function(r,n,i){return new e(r,n,i)},e}(Rd),Kh=function(t){Ht(e,t);function e(r,n,i){var o=t.call(this,r,n,i)||this;return dt(r,"acroRadioButton",[[wg,"PDFAcroRadioButton"]]),o.acroField=r,o}return e.prototype.getOptions=function(){var r=this.acroField.getExportValues();if(r){for(var n=new Array(r.length),i=0,o=r.length;i<o;i++)n[i]=r[i].decodeText();return n}for(var s=this.acroField.getOnValues(),a=new Array(s.length),i=0,o=a.length;i<o;i++)a[i]=s[i].decodeText();return a},e.prototype.getSelected=function(){var r=this.acroField.getValue();if(r!==Ke.of("Off")){var n=this.acroField.getExportValues();if(n){for(var i=this.acroField.getOnValues(),o=0,s=i.length;o<s;o++)if(i[o]===r)return n[o].decodeText()}return r.decodeText()}},e.prototype.select=function(r){dt(r,"option",["string"]);var n=this.getOptions();ic(r,"option",n),this.markAsDirty();var i=this.acroField.getOnValues(),o=this.acroField.getExportValues();if(o)for(var s=0,a=o.length;s<a;s++)o[s].decodeText()===r&&this.acroField.setValue(i[s]);else for(var s=0,a=i.length;s<a;s++){var l=i[s];l.decodeText()===r&&this.acroField.setValue(l)}},e.prototype.clear=function(){this.markAsDirty(),this.acroField.setValue(Ke.of("Off"))},e.prototype.isOffToggleable=function(){return!this.acroField.hasFlag(vs.NoToggleToOff)},e.prototype.enableOffToggling=function(){this.acroField.setFlagTo(vs.NoToggleToOff,!1)},e.prototype.disableOffToggling=function(){this.acroField.setFlagTo(vs.NoToggleToOff,!0)},e.prototype.isMutuallyExclusive=function(){return!this.acroField.hasFlag(vs.RadiosInUnison)},e.prototype.enableMutualExclusion=function(){this.acroField.setFlagTo(vs.RadiosInUnison,!1)},e.prototype.disableMutualExclusion=function(){this.acroField.setFlagTo(vs.RadiosInUnison,!0)},e.prototype.addOptionToPage=function(r,n,i){var o,s,a,l,d,u,h,f,p;dt(r,"option",["string"]),dt(n,"page",[[bs,"PDFPage"]]),Zu(i);var m=this.createWidget({x:(o=i?.x)!==null&&o!==void 0?o:0,y:(s=i?.y)!==null&&s!==void 0?s:0,width:(a=i?.width)!==null&&a!==void 0?a:50,height:(l=i?.height)!==null&&l!==void 0?l:50,textColor:(d=i?.textColor)!==null&&d!==void 0?d:Pn(0,0,0),backgroundColor:(u=i?.backgroundColor)!==null&&u!==void 0?u:Pn(1,1,1),borderColor:(h=i?.borderColor)!==null&&h!==void 0?h:Pn(0,0,0),borderWidth:(f=i?.borderWidth)!==null&&f!==void 0?f:1,rotate:(p=i?.rotate)!==null&&p!==void 0?p:xr(0),hidden:i?.hidden,page:n.ref}),x=this.doc.context.register(m.dict),P=this.acroField.addWidgetWithOpt(x,vr.fromText(r),!this.isMutuallyExclusive());m.setAppearanceState(Ke.of("Off")),this.updateWidgetAppearance(m,P),n.node.addAnnot(x)},e.prototype.needsAppearancesUpdate=function(){for(var r,n=this.acroField.getWidgets(),i=0,o=n.length;i<o;i++){var s=n[i],a=s.getAppearanceState(),l=(r=s.getAppearances())===null||r===void 0?void 0:r.normal;if(!(l instanceof Or)||a&&!l.has(a))return!0}return!1},e.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},e.prototype.updateAppearances=function(r){qt(r,"provider",[Function]);for(var n=this.acroField.getWidgets(),i=0,o=n.length;i<o;i++){var s=n[i],a=s.getOnValue();a&&this.updateWidgetAppearance(s,a,r)}},e.prototype.updateWidgetAppearance=function(r,n,i){var o=i??vZ,s=Xu(o(this,r));this.updateOnOffWidgetAppearance(r,n,s)},e.of=function(r,n,i){return new e(r,n,i)},e}(Rd),L1=function(t){Ht(e,t);function e(r,n,i){var o=t.call(this,r,n,i)||this;return dt(r,"acroSignature",[[S2,"PDFAcroSignature"]]),o.acroField=r,o}return e.prototype.needsAppearancesUpdate=function(){return!1},e.of=function(r,n,i){return new e(r,n,i)},e}(Rd),By=function(t){Ht(e,t);function e(r,n,i){var o=t.call(this,r,n,i)||this;return dt(r,"acroText",[[xg,"PDFAcroText"]]),o.acroField=r,o}return e.prototype.getText=function(){var r=this.acroField.getValue();if(!r&&this.isRichFormatted())throw new aZ(this.getName());return r?.decodeText()},e.prototype.setText=function(r){qt(r,"text",["string"]);var n=this.getMaxLength();if(n!==void 0&&r&&r.length>n)throw new cZ(r.length,n,this.getName());this.markAsDirty(),this.disableRichFormatting(),r?this.acroField.setValue(vr.fromText(r)):this.acroField.removeValue()},e.prototype.getAlignment=function(){var r=this.acroField.getQuadding();return r===0?Ai.Left:r===1?Ai.Center:r===2?Ai.Right:Ai.Left},e.prototype.setAlignment=function(r){ic(r,"alignment",Ai),this.markAsDirty(),this.acroField.setQuadding(r)},e.prototype.getMaxLength=function(){return this.acroField.getMaxLength()},e.prototype.setMaxLength=function(r){if(qs(r,"maxLength",0,Number.MAX_SAFE_INTEGER),this.markAsDirty(),r===void 0)this.acroField.removeMaxLength();else{var n=this.getText();if(n&&n.length>r)throw new dZ(n.length,r,this.getName());this.acroField.setMaxLength(r)}},e.prototype.removeMaxLength=function(){this.markAsDirty(),this.acroField.removeMaxLength()},e.prototype.setImage=function(r){for(var n=this.getAlignment(),i=n===Ai.Center?hc.Center:n===Ai.Right?hc.Right:hc.Left,o=this.acroField.getWidgets(),s=0,a=o.length;s<a;s++){var l=o[s],d=this.createImageAppearanceStream(l,r,i);this.updateWidgetAppearances(l,{normal:d})}this.markAsClean()},e.prototype.setFontSize=function(r){gg(r,"fontSize"),this.acroField.setFontSize(r),this.markAsDirty()},e.prototype.isMultiline=function(){return this.acroField.hasFlag(Jn.Multiline)},e.prototype.enableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(Jn.Multiline,!0)},e.prototype.disableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(Jn.Multiline,!1)},e.prototype.isPassword=function(){return this.acroField.hasFlag(Jn.Password)},e.prototype.enablePassword=function(){this.acroField.setFlagTo(Jn.Password,!0)},e.prototype.disablePassword=function(){this.acroField.setFlagTo(Jn.Password,!1)},e.prototype.isFileSelector=function(){return this.acroField.hasFlag(Jn.FileSelect)},e.prototype.enableFileSelection=function(){this.acroField.setFlagTo(Jn.FileSelect,!0)},e.prototype.disableFileSelection=function(){this.acroField.setFlagTo(Jn.FileSelect,!1)},e.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(Jn.DoNotSpellCheck)},e.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(Jn.DoNotSpellCheck,!1)},e.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(Jn.DoNotSpellCheck,!0)},e.prototype.isScrollable=function(){return!this.acroField.hasFlag(Jn.DoNotScroll)},e.prototype.enableScrolling=function(){this.acroField.setFlagTo(Jn.DoNotScroll,!1)},e.prototype.disableScrolling=function(){this.acroField.setFlagTo(Jn.DoNotScroll,!0)},e.prototype.isCombed=function(){return this.acroField.hasFlag(Jn.Comb)&&!this.isMultiline()&&!this.isPassword()&&!this.isFileSelector()&&this.getMaxLength()!==void 0},e.prototype.enableCombing=function(){if(this.getMaxLength()===void 0){var r="PDFTextFields must have a max length in order to be combed";console.warn(r)}this.markAsDirty(),this.disableMultiline(),this.disablePassword(),this.disableFileSelection(),this.acroField.setFlagTo(Jn.Comb,!0)},e.prototype.disableCombing=function(){this.markAsDirty(),this.acroField.setFlagTo(Jn.Comb,!1)},e.prototype.isRichFormatted=function(){return this.acroField.hasFlag(Jn.RichText)},e.prototype.enableRichFormatting=function(){this.acroField.setFlagTo(Jn.RichText,!0)},e.prototype.disableRichFormatting=function(){this.acroField.setFlagTo(Jn.RichText,!1)},e.prototype.addToPage=function(r,n){var i,o,s,a,l,d,u;dt(r,"page",[[bs,"PDFPage"]]),Zu(n),n||(n={}),"textColor"in n||(n.textColor=Pn(0,0,0)),"backgroundColor"in n||(n.backgroundColor=Pn(1,1,1)),"borderColor"in n||(n.borderColor=Pn(0,0,0)),"borderWidth"in n||(n.borderWidth=1);var h=this.createWidget({x:(i=n.x)!==null&&i!==void 0?i:0,y:(o=n.y)!==null&&o!==void 0?o:0,width:(s=n.width)!==null&&s!==void 0?s:200,height:(a=n.height)!==null&&a!==void 0?a:50,textColor:n.textColor,backgroundColor:n.backgroundColor,borderColor:n.borderColor,borderWidth:(l=n.borderWidth)!==null&&l!==void 0?l:0,rotate:(d=n.rotate)!==null&&d!==void 0?d:xr(0),hidden:n.hidden,page:r.ref}),f=this.doc.context.register(h.dict);this.acroField.addWidget(f);var p=(u=n.font)!==null&&u!==void 0?u:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(h,p),r.node.addAnnot(f)},e.prototype.needsAppearancesUpdate=function(){var r;if(this.isDirty())return!0;for(var n=this.acroField.getWidgets(),i=0,o=n.length;i<o;i++){var s=n[i],a=((r=s.getAppearances())===null||r===void 0?void 0:r.normal)instanceof ns;if(!a)return!0}return!1},e.prototype.defaultUpdateAppearances=function(r){dt(r,"font",[[is,"PDFFont"]]),this.updateAppearances(r)},e.prototype.updateAppearances=function(r,n){dt(r,"font",[[is,"PDFFont"]]),qt(n,"provider",[Function]);for(var i=this.acroField.getWidgets(),o=0,s=i.length;o<s;o++){var a=i[o];this.updateWidgetAppearance(a,r,n)}this.markAsClean()},e.prototype.updateWidgetAppearance=function(r,n,i){var o=i??PZ,s=Xu(o(this,r,n));this.updateWidgetAppearanceWithFont(r,n,s)},e.of=function(r,n,i){return new e(r,n,i)},e}(Rd),Nm;(function(t){t.Courier="Courier",t.CourierBold="Courier-Bold",t.CourierOblique="Courier-Oblique",t.CourierBoldOblique="Courier-BoldOblique",t.Helvetica="Helvetica",t.HelveticaBold="Helvetica-Bold",t.HelveticaOblique="Helvetica-Oblique",t.HelveticaBoldOblique="Helvetica-BoldOblique",t.TimesRoman="Times-Roman",t.TimesRomanBold="Times-Bold",t.TimesRomanItalic="Times-Italic",t.TimesRomanBoldItalic="Times-BoldItalic",t.Symbol="Symbol",t.ZapfDingbats="ZapfDingbats"})(Nm||(Nm={}));var wZ=function(){function t(e,r){var n=this;this.embedDefaultFont=function(){return n.doc.embedStandardFont(Nm.Helvetica)},dt(e,"acroForm",[[_m,"PDFAcroForm"]]),dt(r,"doc",[[ul,"PDFDocument"]]),this.acroForm=e,this.doc=r,this.dirtyFields=new Set,this.defaultFontCache=rl.populatedBy(this.embedDefaultFont)}return t.prototype.hasXFA=function(){return this.acroForm.dict.has(Ke.of("XFA"))},t.prototype.deleteXFA=function(){this.acroForm.dict.delete(Ke.of("XFA"))},t.prototype.getFields=function(){for(var e=this.acroForm.getAllFields(),r=[],n=0,i=e.length;n<i;n++){var o=e[n],s=o[0],a=o[1],l=CZ(s,a,this.doc);l&&r.push(l)}return r},t.prototype.getFieldMaybe=function(e){dt(e,"name",["string"]);for(var r=this.getFields(),n=0,i=r.length;n<i;n++){var o=r[n];if(o.getName()===e)return o}},t.prototype.getField=function(e){dt(e,"name",["string"]);var r=this.getFieldMaybe(e);if(r)return r;throw new oZ(e)},t.prototype.getButton=function(e){dt(e,"name",["string"]);var r=this.getField(e);if(r instanceof jy)return r;throw new Zc(e,jy,r)},t.prototype.getCheckBox=function(e){dt(e,"name",["string"]);var r=this.getField(e);if(r instanceof Gh)return r;throw new Zc(e,Gh,r)},t.prototype.getDropdown=function(e){dt(e,"name",["string"]);var r=this.getField(e);if(r instanceof My)return r;throw new Zc(e,My,r)},t.prototype.getOptionList=function(e){dt(e,"name",["string"]);var r=this.getField(e);if(r instanceof Oy)return r;throw new Zc(e,Oy,r)},t.prototype.getRadioGroup=function(e){dt(e,"name",["string"]);var r=this.getField(e);if(r instanceof Kh)return r;throw new Zc(e,Kh,r)},t.prototype.getSignature=function(e){dt(e,"name",["string"]);var r=this.getField(e);if(r instanceof L1)return r;throw new Zc(e,L1,r)},t.prototype.getTextField=function(e){dt(e,"name",["string"]);var r=this.getField(e);if(r instanceof By)return r;throw new Zc(e,By,r)},t.prototype.createButton=function(e){dt(e,"name",["string"]);var r=cu(e),n=this.findOrCreateNonTerminals(r.nonTerminal),i=Sg.create(this.doc.context);return i.setPartialName(r.terminal),du(n,[i,i.ref],r.terminal),jy.of(i,i.ref,this.doc)},t.prototype.createCheckBox=function(e){dt(e,"name",["string"]);var r=cu(e),n=this.findOrCreateNonTerminals(r.nonTerminal),i=bg.create(this.doc.context);return i.setPartialName(r.terminal),du(n,[i,i.ref],r.terminal),Gh.of(i,i.ref,this.doc)},t.prototype.createDropdown=function(e){dt(e,"name",["string"]);var r=cu(e),n=this.findOrCreateNonTerminals(r.nonTerminal),i=Pg.create(this.doc.context);return i.setPartialName(r.terminal),du(n,[i,i.ref],r.terminal),My.of(i,i.ref,this.doc)},t.prototype.createOptionList=function(e){dt(e,"name",["string"]);var r=cu(e),n=this.findOrCreateNonTerminals(r.nonTerminal),i=Cg.create(this.doc.context);return i.setPartialName(r.terminal),du(n,[i,i.ref],r.terminal),Oy.of(i,i.ref,this.doc)},t.prototype.createRadioGroup=function(e){dt(e,"name",["string"]);var r=cu(e),n=this.findOrCreateNonTerminals(r.nonTerminal),i=wg.create(this.doc.context);return i.setPartialName(r.terminal),du(n,[i,i.ref],r.terminal),Kh.of(i,i.ref,this.doc)},t.prototype.createTextField=function(e){dt(e,"name",["string"]);var r=cu(e),n=this.findOrCreateNonTerminals(r.nonTerminal),i=xg.create(this.doc.context);return i.setPartialName(r.terminal),du(n,[i,i.ref],r.terminal),By.of(i,i.ref,this.doc)},t.prototype.flatten=function(e){e===void 0&&(e={updateFieldAppearances:!0}),e.updateFieldAppearances&&this.updateFieldAppearances();for(var r=this.getFields(),n=0,i=r.length;n<i;n++){for(var o=r[n],s=o.acroField.getWidgets(),a=0,l=s.length;a<l;a++){var d=s[a],u=this.findWidgetPage(d),h=this.findWidgetAppearanceRef(o,d),f=u.node.newXObject("FlatWidget",h),p=d.getRectangle(),m=sn([Ti(),Ss(p.x,p.y)],Ic(Tr(Tr({},p),{rotation:0})),[I2(f),Ii()]).filter(Boolean);u.pushOperators.apply(u,m)}this.removeField(o)}},t.prototype.removeField=function(e){for(var r=e.acroField.getWidgets(),n=new Set,i=0,o=r.length;i<o;i++){var s=r[i],a=this.findWidgetAppearanceRef(e,s),l=this.findWidgetPage(s);n.add(l),l.node.removeAnnot(a)}n.forEach(function(p){return p.node.removeAnnot(e.ref)}),this.acroForm.removeField(e.acroField);for(var d=e.acroField.normalizedEntries().Kids,u=d.size(),h=0;h<u;h++){var f=d.get(h);f instanceof bn&&this.doc.context.delete(f)}this.doc.context.delete(e.ref)},t.prototype.updateFieldAppearances=function(e){qt(e,"font",[[is,"PDFFont"]]),e=e??this.getDefaultFont();for(var r=this.getFields(),n=0,i=r.length;n<i;n++){var o=r[n];o.needsAppearancesUpdate()&&o.defaultUpdateAppearances(e)}},t.prototype.markFieldAsDirty=function(e){qt(e,"fieldRef",[[bn,"PDFRef"]]),this.dirtyFields.add(e)},t.prototype.markFieldAsClean=function(e){qt(e,"fieldRef",[[bn,"PDFRef"]]),this.dirtyFields.delete(e)},t.prototype.fieldIsDirty=function(e){return qt(e,"fieldRef",[[bn,"PDFRef"]]),this.dirtyFields.has(e)},t.prototype.getDefaultFont=function(){return this.defaultFontCache.access()},t.prototype.findWidgetPage=function(e){var r=e.P(),n=this.doc.getPages().find(function(o){return o.ref===r});if(n===void 0){var i=this.doc.context.getObjectRef(e.dict);if(i===void 0)throw new Error("Could not find PDFRef for PDFObject");if(n=this.doc.findPageForAnnotationRef(i),n===void 0)throw new Error("Could not find page for PDFRef "+i)}return n},t.prototype.findWidgetAppearanceRef=function(e,r){var n,i=r.getNormalAppearance();if(i instanceof Or&&(e instanceof Gh||e instanceof Kh)){var o=e.acroField.getValue(),s=(n=i.get(o))!==null&&n!==void 0?n:i.get(Ke.of("Off"));s instanceof bn&&(i=s)}if(!(i instanceof bn)){var a=e.getName();throw new Error("Failed to extract appearance ref for: "+a)}return i},t.prototype.findOrCreateNonTerminals=function(e){for(var r=[this.acroForm],n=0,i=e.length;n<i;n++){var o=e[n];if(!o)throw new sZ(o);var s=r[0],a=r[1],l=this.findNonTerminal(o,s);if(l)r=l;else{var d=Cm.create(this.doc.context);d.setPartialName(o),d.setParent(a);var u=this.doc.context.register(d.dict);s.addField(u),r=[d,u]}}return r},t.prototype.findNonTerminal=function(e,r){for(var n=r instanceof _m?this.acroForm.getFields():w2(r.Kids()),i=0,o=n.length;i<o;i++){var s=n[i],a=s[0],l=s[1];if(a.getPartialName()===e){if(a instanceof Cm)return[a,l];throw new B4(e)}}},t.of=function(e,r){return new t(e,r)},t}(),CZ=function(t,e,r){if(t instanceof Sg)return jy.of(t,e,r);if(t instanceof bg)return Gh.of(t,e,r);if(t instanceof Pg)return My.of(t,e,r);if(t instanceof Cg)return Oy.of(t,e,r);if(t instanceof xg)return By.of(t,e,r);if(t instanceof wg)return Kh.of(t,e,r);if(t instanceof S2)return L1.of(t,e,r)},cu=function(t){if(t.length===0)throw new Error("PDF field names must not be empty strings");for(var e=t.split("."),r=0,n=e.length;r<n;r++)if(e[r]==="")throw new Error('Periods in PDF field names must be separated by at least one character: "'+t+'"');return e.length===1?{nonTerminal:[],terminal:e[0]}:{nonTerminal:e.slice(0,e.length-1),terminal:e[e.length-1]}},du=function(t,e,r){for(var n=t[0],i=t[1],o=e[0],s=e[1],a=n.normalizedEntries(),l=w2("Kids"in a?a.Kids:a.Fields),d=0,u=l.length;d<u;d++)if(l[d][0].getPartialName()===r)throw new B4(r);n.addField(s),o.setParent(i)},_Z={A4:[595.28,841.89]},$1;(function(t){t[t.Fastest=1/0]="Fastest",t[t.Fast=1500]="Fast",t[t.Medium=500]="Medium",t[t.Slow=100]="Slow"})($1||($1={}));var AZ=function(){function t(e,r,n){this.alreadyEmbedded=!1,this.ref=e,this.doc=r,this.embedder=n}return t.prototype.embed=function(){return jr(this,void 0,void 0,function(){var e,r,n,i,o;return Vr(this,function(s){switch(s.label){case 0:return this.alreadyEmbedded?[3,2]:[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:e=s.sent(),this.doc.catalog.has(Ke.of("Names"))||this.doc.catalog.set(Ke.of("Names"),this.doc.context.obj({})),r=this.doc.catalog.lookup(Ke.of("Names"),Or),r.has(Ke.of("EmbeddedFiles"))||r.set(Ke.of("EmbeddedFiles"),this.doc.context.obj({})),n=r.lookup(Ke.of("EmbeddedFiles"),Or),n.has(Ke.of("Names"))||n.set(Ke.of("Names"),this.doc.context.obj([])),i=n.lookup(Ke.of("Names"),pn),i.push(vr.fromText(this.embedder.fileName)),i.push(e),this.doc.catalog.has(Ke.of("AF"))||this.doc.catalog.set(Ke.of("AF"),this.doc.context.obj([])),o=this.doc.catalog.lookup(Ke.of("AF"),pn),o.push(e),this.alreadyEmbedded=!0,s.label=2;case 2:return[2]}})})},t.of=function(e,r,n){return new t(e,r,n)},t}(),kZ=function(){function t(e,r,n){this.alreadyEmbedded=!1,this.ref=e,this.doc=r,this.embedder=n}return t.prototype.embed=function(){return jr(this,void 0,void 0,function(){var e,r,n,i,o,s,a;return Vr(this,function(l){switch(l.label){case 0:return this.alreadyEmbedded?[3,2]:(e=this.doc,r=e.catalog,n=e.context,[4,this.embedder.embedIntoContext(this.doc.context,this.ref)]);case 1:i=l.sent(),r.has(Ke.of("Names"))||r.set(Ke.of("Names"),n.obj({})),o=r.lookup(Ke.of("Names"),Or),o.has(Ke.of("JavaScript"))||o.set(Ke.of("JavaScript"),n.obj({})),s=o.lookup(Ke.of("JavaScript"),Or),s.has(Ke.of("Names"))||s.set(Ke.of("Names"),n.obj([])),a=s.lookup(Ke.of("Names"),pn),a.push(vr.fromText(this.embedder.scriptName)),a.push(i),this.alreadyEmbedded=!0,l.label=2;case 2:return[2]}})})},t.of=function(e,r,n){return new t(e,r,n)},t}(),EZ=function(){function t(e,r){this.script=e,this.scriptName=r}return t.for=function(e,r){return new t(e,r)},t.prototype.embedIntoContext=function(e,r){return jr(this,void 0,void 0,function(){var n;return Vr(this,function(i){return n=e.obj({Type:"Action",S:"JavaScript",JS:vr.fromText(this.script)}),r?(e.assign(r,n),[2,r]):[2,e.register(n)]})})},t}(),ul=function(){function t(e,r,n){var i=this;if(this.defaultWordBreaks=[" "],this.computePages=function(){var o=[];return i.catalog.Pages().traverse(function(s,a){if(s instanceof nl){var l=i.pageMap.get(s);l||(l=bs.of(s,a,i),i.pageMap.set(s,l)),o.push(l)}}),o},this.getOrCreateForm=function(){var o=i.catalog.getOrCreateAcroForm();return wZ.of(o,i)},dt(e,"context",[[E1,"PDFContext"]]),dt(r,"ignoreEncryption",["boolean"]),this.context=e,this.catalog=e.lookup(e.trailerInfo.Root),this.isEncrypted=!!e.lookup(e.trailerInfo.Encrypt),this.pageCache=rl.populatedBy(this.computePages),this.pageMap=new Map,this.formCache=rl.populatedBy(this.getOrCreateForm),this.fonts=[],this.images=[],this.embeddedPages=[],this.embeddedFiles=[],this.javaScripts=[],!r&&this.isEncrypted)throw new tZ;n&&this.updateInfoDict()}return t.load=function(e,r){return r===void 0&&(r={}),jr(this,void 0,void 0,function(){var n,i,o,s,a,l,d,u,h,f,p,m;return Vr(this,function(x){switch(x.label){case 0:return n=r.ignoreEncryption,i=n===void 0?!1:n,o=r.parseSpeed,s=o===void 0?$1.Slow:o,a=r.throwOnInvalidObject,l=a===void 0?!1:a,d=r.updateMetadata,u=d===void 0?!0:d,h=r.capNumbers,f=h===void 0?!1:h,dt(e,"pdf",["string",Uint8Array,ArrayBuffer]),dt(i,"ignoreEncryption",["boolean"]),dt(s,"parseSpeed",["number"]),dt(l,"throwOnInvalidObject",["boolean"]),p=kh(e),[4,IX.forBytesWithOptions(p,s,l,f).parseDocument()];case 1:return m=x.sent(),[2,new t(m,i,u)]}})})},t.create=function(e){return e===void 0&&(e={}),jr(this,void 0,void 0,function(){var r,n,i,o,s,a;return Vr(this,function(l){return r=e.updateMetadata,n=r===void 0?!0:r,i=E1.create(),o=x4.withContext(i),s=i.register(o),a=P4.withContextAndPages(i,s),i.trailerInfo.Root=i.register(a),[2,new t(i,!1,n)]})})},t.prototype.registerFontkit=function(e){this.fontkit=e},t.prototype.getForm=function(){var e=this.formCache.access();return e.hasXFA()&&(console.warn("Removing XFA form data as pdf-lib does not support reading or writing XFA"),e.deleteXFA()),e},t.prototype.getTitle=function(){var e=this.getInfoDict().lookup(Ke.Title);if(e)return Kl(e),e.decodeText()},t.prototype.getAuthor=function(){var e=this.getInfoDict().lookup(Ke.Author);if(e)return Kl(e),e.decodeText()},t.prototype.getSubject=function(){var e=this.getInfoDict().lookup(Ke.Subject);if(e)return Kl(e),e.decodeText()},t.prototype.getKeywords=function(){var e=this.getInfoDict().lookup(Ke.Keywords);if(e)return Kl(e),e.decodeText()},t.prototype.getCreator=function(){var e=this.getInfoDict().lookup(Ke.Creator);if(e)return Kl(e),e.decodeText()},t.prototype.getProducer=function(){var e=this.getInfoDict().lookup(Ke.Producer);if(e)return Kl(e),e.decodeText()},t.prototype.getCreationDate=function(){var e=this.getInfoDict().lookup(Ke.CreationDate);if(e)return Kl(e),e.decodeDate()},t.prototype.getModificationDate=function(){var e=this.getInfoDict().lookup(Ke.ModDate);if(e)return Kl(e),e.decodeDate()},t.prototype.setTitle=function(e,r){dt(e,"title",["string"]);var n=Ke.of("Title");if(this.getInfoDict().set(n,vr.fromText(e)),r?.showInWindowTitleBar){var i=this.catalog.getOrCreateViewerPreferences();i.setDisplayDocTitle(!0)}},t.prototype.setAuthor=function(e){dt(e,"author",["string"]);var r=Ke.of("Author");this.getInfoDict().set(r,vr.fromText(e))},t.prototype.setSubject=function(e){dt(e,"author",["string"]);var r=Ke.of("Subject");this.getInfoDict().set(r,vr.fromText(e))},t.prototype.setKeywords=function(e){dt(e,"keywords",[Array]);var r=Ke.of("Keywords");this.getInfoDict().set(r,vr.fromText(e.join(" ")))},t.prototype.setCreator=function(e){dt(e,"creator",["string"]);var r=Ke.of("Creator");this.getInfoDict().set(r,vr.fromText(e))},t.prototype.setProducer=function(e){dt(e,"creator",["string"]);var r=Ke.of("Producer");this.getInfoDict().set(r,vr.fromText(e))},t.prototype.setLanguage=function(e){dt(e,"language",["string"]);var r=Ke.of("Lang");this.catalog.set(r,vn.of(e))},t.prototype.setCreationDate=function(e){dt(e,"creationDate",[[Date,"Date"]]);var r=Ke.of("CreationDate");this.getInfoDict().set(r,vn.fromDate(e))},t.prototype.setModificationDate=function(e){dt(e,"modificationDate",[[Date,"Date"]]);var r=Ke.of("ModDate");this.getInfoDict().set(r,vn.fromDate(e))},t.prototype.getPageCount=function(){return this.pageCount===void 0&&(this.pageCount=this.getPages().length),this.pageCount},t.prototype.getPages=function(){return this.pageCache.access()},t.prototype.getPage=function(e){var r=this.getPages();return ts(e,"index",0,r.length-1),r[e]},t.prototype.getPageIndices=function(){return IK(0,this.getPageCount())},t.prototype.removePage=function(e){var r=this.getPageCount();if(this.pageCount===0)throw new iZ;ts(e,"index",0,r-1),this.catalog.removeLeafNode(e),this.pageCount=r-1},t.prototype.addPage=function(e){return dt(e,"page",["undefined",[bs,"PDFPage"],Array]),this.insertPage(this.getPageCount(),e)},t.prototype.insertPage=function(e,r){var n=this.getPageCount();if(ts(e,"index",0,n),dt(r,"page",["undefined",[bs,"PDFPage"],Array]),!r||Array.isArray(r)){var i=Array.isArray(r)?r:_Z.A4;r=bs.create(this),r.setSize.apply(r,i)}else if(r.doc!==this)throw new nZ;var o=this.catalog.insertLeafNode(r.ref,e);return r.node.setParent(o),this.pageMap.set(r.node,r),this.pageCache.invalidate(),this.pageCount=n+1,r},t.prototype.copyPages=function(e,r){return jr(this,void 0,void 0,function(){var n,i,o,s,a,l,d,u;return Vr(this,function(h){switch(h.label){case 0:return dt(e,"srcDoc",[[t,"PDFDocument"]]),dt(r,"indices",[Array]),[4,e.flush()];case 1:for(h.sent(),n=aw.for(e.context,this.context),i=e.getPages(),o=new Array(r.length),s=0,a=r.length;s<a;s++)l=i[r[s]],d=n.copy(l.node),u=this.context.register(d),o[s]=bs.of(d,u,this);return[2,o]}})})},t.prototype.copy=function(){return jr(this,void 0,void 0,function(){var e,r,n,i;return Vr(this,function(o){switch(o.label){case 0:return[4,t.create()];case 1:return e=o.sent(),[4,e.copyPages(this,this.getPageIndices())];case 2:for(r=o.sent(),n=0,i=r.length;n<i;n++)e.addPage(r[n]);return this.getAuthor()!==void 0&&e.setAuthor(this.getAuthor()),this.getCreationDate()!==void 0&&e.setCreationDate(this.getCreationDate()),this.getCreator()!==void 0&&e.setCreator(this.getCreator()),this.getModificationDate()!==void 0&&e.setModificationDate(this.getModificationDate()),this.getProducer()!==void 0&&e.setProducer(this.getProducer()),this.getSubject()!==void 0&&e.setSubject(this.getSubject()),this.getTitle()!==void 0&&e.setTitle(this.getTitle()),e.defaultWordBreaks=this.defaultWordBreaks,[2,e]}})})},t.prototype.addJavaScript=function(e,r){dt(e,"name",["string"]),dt(r,"script",["string"]);var n=EZ.for(r,e),i=this.context.nextRef(),o=kZ.of(i,this,n);this.javaScripts.push(o)},t.prototype.attach=function(e,r,n){return n===void 0&&(n={}),jr(this,void 0,void 0,function(){var i,o,s,a;return Vr(this,function(l){return dt(e,"attachment",["string",Uint8Array,ArrayBuffer]),dt(r,"name",["string"]),qt(n.mimeType,"mimeType",["string"]),qt(n.description,"description",["string"]),qt(n.creationDate,"options.creationDate",[Date]),qt(n.modificationDate,"options.modificationDate",[Date]),gs(n.afRelationship,"options.afRelationship",T1),i=kh(e),o=rX.for(i,r,n),s=this.context.nextRef(),a=AZ.of(s,this,o),this.embeddedFiles.push(a),[2]})})},t.prototype.embedFont=function(e,r){return r===void 0&&(r={}),jr(this,void 0,void 0,function(){var n,i,o,s,a,l,d,u,h,f;return Vr(this,function(p){switch(p.label){case 0:return n=r.subset,i=n===void 0?!1:n,o=r.customName,s=r.features,dt(e,"font",["string",Uint8Array,ArrayBuffer]),dt(i,"subset",["boolean"]),JS(e)?(a=Sm.for(e,o),[3,7]):[3,1];case 1:return RK(e)?(l=kh(e),d=this.assertFontkit(),i?[4,tX.for(d,l,o,s)]:[3,3]):[3,6];case 2:return u=p.sent(),[3,5];case 3:return[4,P2.for(d,l,o,s)];case 4:u=p.sent(),p.label=5;case 5:return a=u,[3,7];case 6:throw new TypeError("`font` must be one of `StandardFonts | string | Uint8Array | ArrayBuffer`");case 7:return h=this.context.nextRef(),f=is.of(h,this,a),this.fonts.push(f),[2,f]}})})},t.prototype.embedStandardFont=function(e,r){if(dt(e,"font",["string"]),!JS(e))throw new TypeError("`font` must be one of type `StandardFonts`");var n=Sm.for(e,r),i=this.context.nextRef(),o=is.of(i,this,n);return this.fonts.push(o),o},t.prototype.embedJpg=function(e){return jr(this,void 0,void 0,function(){var r,n,i,o;return Vr(this,function(s){switch(s.label){case 0:return dt(e,"jpg",["string",Uint8Array,ArrayBuffer]),r=kh(e),[4,u4.for(r)];case 1:return n=s.sent(),i=this.context.nextRef(),o=D1.of(i,this,n),this.images.push(o),[2,o]}})})},t.prototype.embedPng=function(e){return jr(this,void 0,void 0,function(){var r,n,i,o;return Vr(this,function(s){switch(s.label){case 0:return dt(e,"png",["string",Uint8Array,ArrayBuffer]),r=kh(e),[4,h4.for(r)];case 1:return n=s.sent(),i=this.context.nextRef(),o=D1.of(i,this,n),this.images.push(o),[2,o]}})})},t.prototype.embedPdf=function(e,r){return r===void 0&&(r=[0]),jr(this,void 0,void 0,function(){var n,i,o;return Vr(this,function(s){switch(s.label){case 0:return dt(e,"pdf",["string",Uint8Array,ArrayBuffer,[t,"PDFDocument"]]),dt(r,"indices",[Array]),e instanceof t?(i=e,[3,3]):[3,1];case 1:return[4,t.load(e)];case 2:i=s.sent(),s.label=3;case 3:return n=i,o=NK(n.getPages(),r),[2,this.embedPages(o)]}})})},t.prototype.embedPage=function(e,r,n){return jr(this,void 0,void 0,function(){var i;return Vr(this,function(o){switch(o.label){case 0:return dt(e,"page",[[bs,"PDFPage"]]),[4,this.embedPages([e],[r],[n])];case 1:return i=o.sent()[0],[2,i]}})})},t.prototype.embedPages=function(e,r,n){return r===void 0&&(r=[]),n===void 0&&(n=[]),jr(this,void 0,void 0,function(){var d,u,i,o,s,a,l,d,u,h,f,p,m,x,P;return Vr(this,function(g){switch(g.label){case 0:if(e.length===0)return[2,[]];for(d=0,u=e.length-1;d<u;d++)if(i=e[d],o=e[d+1],i.node.context!==o.node.context)throw new EY;s=e[0].node.context,a=s===this.context?function(F){return F}:aw.for(s,this.context).copy,l=new Array(e.length),d=0,u=e.length,g.label=1;case 1:return d<u?(h=a(e[d].node),f=r[d],p=n[d],[4,y4.for(h,f,p)]):[3,4];case 2:m=g.sent(),x=this.context.nextRef(),l[d]=q4.of(x,this,m),g.label=3;case 3:return d++,[3,1];case 4:return(P=this.embeddedPages).push.apply(P,l),[2,l]}})})},t.prototype.flush=function(){return jr(this,void 0,void 0,function(){return Vr(this,function(e){switch(e.label){case 0:return[4,this.embedAll(this.fonts)];case 1:return e.sent(),[4,this.embedAll(this.images)];case 2:return e.sent(),[4,this.embedAll(this.embeddedPages)];case 3:return e.sent(),[4,this.embedAll(this.embeddedFiles)];case 4:return e.sent(),[4,this.embedAll(this.javaScripts)];case 5:return e.sent(),[2]}})})},t.prototype.save=function(e){return e===void 0&&(e={}),jr(this,void 0,void 0,function(){var r,n,i,o,s,a,l,d,u,h;return Vr(this,function(f){switch(f.label){case 0:return r=e.useObjectStreams,n=r===void 0?!0:r,i=e.addDefaultPage,o=i===void 0?!0:i,s=e.objectsPerTick,a=s===void 0?50:s,l=e.updateFieldAppearances,d=l===void 0?!0:l,dt(n,"useObjectStreams",["boolean"]),dt(o,"addDefaultPage",["boolean"]),dt(a,"objectsPerTick",["number"]),dt(d,"updateFieldAppearances",["boolean"]),o&&this.getPageCount()===0&&this.addPage(),d&&(u=this.formCache.getValue(),u&&u.updateFieldAppearances()),[4,this.flush()];case 1:return f.sent(),h=n?YY:c4,[2,h.forContext(this.context,a).serializeToBuffer()]}})})},t.prototype.saveAsBase64=function(e){return e===void 0&&(e={}),jr(this,void 0,void 0,function(){var r,n,i,o,s;return Vr(this,function(a){switch(a.label){case 0:return r=e.dataUri,n=r===void 0?!1:r,i=pK(e,["dataUri"]),dt(n,"dataUri",["boolean"]),[4,this.save(i)];case 1:return o=a.sent(),s=fK(o),[2,n?"data:application/pdf;base64,"+s:s]}})})},t.prototype.findPageForAnnotationRef=function(e){for(var r=this.getPages(),n=0,i=r.length;n<i;n++){var o=r[n],s=o.node.Annots();if(s?.indexOf(e)!==void 0)return o}},t.prototype.embedAll=function(e){return jr(this,void 0,void 0,function(){var r,n;return Vr(this,function(i){switch(i.label){case 0:r=0,n=e.length,i.label=1;case 1:return r<n?[4,e[r].embed()]:[3,4];case 2:i.sent(),i.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},t.prototype.updateInfoDict=function(){var e="pdf-lib (https://github.com/Hopding/pdf-lib)",r=new Date,n=this.getInfoDict();this.setProducer(e),this.setModificationDate(r),n.get(Ke.of("Creator"))||this.setCreator(e),n.get(Ke.of("CreationDate"))||this.setCreationDate(r)},t.prototype.getInfoDict=function(){var e=this.context.lookup(this.context.trailerInfo.Info);if(e instanceof Or)return e;var r=this.context.obj({});return this.context.trailerInfo.Info=this.context.register(r),r},t.prototype.assertFontkit=function(){if(!this.fontkit)throw new rZ;return this.fontkit},t}();function Kl(t){if(!(t instanceof vr)&&!(t instanceof vn))throw new Pm([vr,vn],t)}var Ka;(function(t){t.Normal="Normal",t.Multiply="Multiply",t.Screen="Screen",t.Overlay="Overlay",t.Darken="Darken",t.Lighten="Lighten",t.ColorDodge="ColorDodge",t.ColorBurn="ColorBurn",t.HardLight="HardLight",t.SoftLight="SoftLight",t.Difference="Difference",t.Exclusion="Exclusion"})(Ka||(Ka={}));var bs=function(){function t(e,r,n){this.fontSize=24,this.fontColor=Pn(0,0,0),this.lineHeight=24,this.x=0,this.y=0,dt(e,"leafNode",[[nl,"PDFPageLeaf"]]),dt(r,"ref",[[bn,"PDFRef"]]),dt(n,"doc",[[ul,"PDFDocument"]]),this.node=e,this.ref=r,this.doc=n}return t.prototype.setRotation=function(e){var r=A4(e);i4(r,"degreesAngle",90),this.node.set(Ke.of("Rotate"),this.doc.context.obj(r))},t.prototype.getRotation=function(){var e=this.node.Rotate();return xr(e?e.asNumber():0)},t.prototype.setSize=function(e,r){dt(e,"width",["number"]),dt(r,"height",["number"]);var n=this.getMediaBox();this.setMediaBox(n.x,n.y,e,r);var i=this.getCropBox(),o=this.getBleedBox(),s=this.getTrimBox(),a=this.getArtBox(),l=this.node.CropBox(),d=this.node.BleedBox(),u=this.node.TrimBox(),h=this.node.ArtBox();l&&uy(i,n)&&this.setCropBox(n.x,n.y,e,r),d&&uy(o,n)&&this.setBleedBox(n.x,n.y,e,r),u&&uy(s,n)&&this.setTrimBox(n.x,n.y,e,r),h&&uy(a,n)&&this.setArtBox(n.x,n.y,e,r)},t.prototype.setWidth=function(e){dt(e,"width",["number"]),this.setSize(e,this.getSize().height)},t.prototype.setHeight=function(e){dt(e,"height",["number"]),this.setSize(this.getSize().width,e)},t.prototype.setMediaBox=function(e,r,n,i){dt(e,"x",["number"]),dt(r,"y",["number"]),dt(n,"width",["number"]),dt(i,"height",["number"]);var o=this.doc.context.obj([e,r,e+n,r+i]);this.node.set(Ke.MediaBox,o)},t.prototype.setCropBox=function(e,r,n,i){dt(e,"x",["number"]),dt(r,"y",["number"]),dt(n,"width",["number"]),dt(i,"height",["number"]);var o=this.doc.context.obj([e,r,e+n,r+i]);this.node.set(Ke.CropBox,o)},t.prototype.setBleedBox=function(e,r,n,i){dt(e,"x",["number"]),dt(r,"y",["number"]),dt(n,"width",["number"]),dt(i,"height",["number"]);var o=this.doc.context.obj([e,r,e+n,r+i]);this.node.set(Ke.BleedBox,o)},t.prototype.setTrimBox=function(e,r,n,i){dt(e,"x",["number"]),dt(r,"y",["number"]),dt(n,"width",["number"]),dt(i,"height",["number"]);var o=this.doc.context.obj([e,r,e+n,r+i]);this.node.set(Ke.TrimBox,o)},t.prototype.setArtBox=function(e,r,n,i){dt(e,"x",["number"]),dt(r,"y",["number"]),dt(n,"width",["number"]),dt(i,"height",["number"]);var o=this.doc.context.obj([e,r,e+n,r+i]);this.node.set(Ke.ArtBox,o)},t.prototype.getSize=function(){var e=this.getMediaBox(),r=e.width,n=e.height;return{width:r,height:n}},t.prototype.getWidth=function(){return this.getSize().width},t.prototype.getHeight=function(){return this.getSize().height},t.prototype.getMediaBox=function(){var e=this.node.MediaBox();return e.asRectangle()},t.prototype.getCropBox=function(){var e,r=this.node.CropBox();return(e=r?.asRectangle())!==null&&e!==void 0?e:this.getMediaBox()},t.prototype.getBleedBox=function(){var e,r=this.node.BleedBox();return(e=r?.asRectangle())!==null&&e!==void 0?e:this.getCropBox()},t.prototype.getTrimBox=function(){var e,r=this.node.TrimBox();return(e=r?.asRectangle())!==null&&e!==void 0?e:this.getCropBox()},t.prototype.getArtBox=function(){var e,r=this.node.ArtBox();return(e=r?.asRectangle())!==null&&e!==void 0?e:this.getCropBox()},t.prototype.translateContent=function(e,r){dt(e,"x",["number"]),dt(r,"y",["number"]),this.node.normalize(),this.getContentStream();var n=this.createContentStream(Ti(),Ss(e,r)),i=this.doc.context.register(n),o=this.createContentStream(Ii()),s=this.doc.context.register(o);this.node.wrapContentStreams(i,s)},t.prototype.scale=function(e,r){dt(e,"x",["number"]),dt(r,"y",["number"]),this.setSize(this.getWidth()*e,this.getHeight()*r),this.scaleContent(e,r),this.scaleAnnotations(e,r)},t.prototype.scaleContent=function(e,r){dt(e,"x",["number"]),dt(r,"y",["number"]),this.node.normalize(),this.getContentStream();var n=this.createContentStream(Ti(),$p(e,r)),i=this.doc.context.register(n),o=this.createContentStream(Ii()),s=this.doc.context.register(o);this.node.wrapContentStreams(i,s)},t.prototype.scaleAnnotations=function(e,r){dt(e,"x",["number"]),dt(r,"y",["number"]);var n=this.node.Annots();if(n)for(var i=0;i<n.size();i++){var o=n.lookup(i);o instanceof Or&&this.scaleAnnot(o,e,r)}},t.prototype.resetPosition=function(){this.getContentStream(!1),this.x=0,this.y=0},t.prototype.setFont=function(e){dt(e,"font",[[is,"PDFFont"]]),this.font=e,this.fontKey=this.node.newFontDictionary(this.font.name,this.font.ref)},t.prototype.setFontSize=function(e){dt(e,"fontSize",["number"]),this.fontSize=e},t.prototype.setFontColor=function(e){dt(e,"fontColor",[[Object,"Color"]]),this.fontColor=e},t.prototype.setLineHeight=function(e){dt(e,"lineHeight",["number"]),this.lineHeight=e},t.prototype.getPosition=function(){return{x:this.x,y:this.y}},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.moveTo=function(e,r){dt(e,"x",["number"]),dt(r,"y",["number"]),this.x=e,this.y=r},t.prototype.moveDown=function(e){dt(e,"yDecrease",["number"]),this.y-=e},t.prototype.moveUp=function(e){dt(e,"yIncrease",["number"]),this.y+=e},t.prototype.moveLeft=function(e){dt(e,"xDecrease",["number"]),this.x-=e},t.prototype.moveRight=function(e){dt(e,"xIncrease",["number"]),this.x+=e},t.prototype.pushOperators=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];n4(e,"operator",[[nn,"PDFOperator"]]);var n=this.getContentStream();n.push.apply(n,e)},t.prototype.drawText=function(e,r){var n,i,o,s,a,l,d;r===void 0&&(r={}),dt(e,"text",["string"]),qt(r.color,"options.color",[[Object,"Color"]]),qs(r.opacity,"opacity.opacity",0,1),qt(r.font,"options.font",[[is,"PDFFont"]]),qt(r.size,"options.size",["number"]),qt(r.rotate,"options.rotate",[[Object,"Rotation"]]),qt(r.xSkew,"options.xSkew",[[Object,"Rotation"]]),qt(r.ySkew,"options.ySkew",[[Object,"Rotation"]]),qt(r.x,"options.x",["number"]),qt(r.y,"options.y",["number"]),qt(r.lineHeight,"options.lineHeight",["number"]),qt(r.maxWidth,"options.maxWidth",["number"]),qt(r.wordBreaks,"options.wordBreaks",[Array]),gs(r.blendMode,"options.blendMode",Ka);for(var u=this.setOrEmbedFont(r.font),h=u.oldFont,f=u.newFont,p=u.newFontKey,m=r.size||this.fontSize,x=r.wordBreaks||this.doc.defaultWordBreaks,P=function(C){return f.widthOfTextAtSize(C,m)},g=r.maxWidth===void 0?j3(Zp(e)):wK(e,x,r.maxWidth,P),F=new Array(g.length),V=0,N=g.length;V<N;V++)F[V]=f.encodeText(g[V]);var R=this.maybeEmbedGraphicsState({opacity:r.opacity,blendMode:r.blendMode}),M=this.getContentStream();M.push.apply(M,GX(F,{color:(n=r.color)!==null&&n!==void 0?n:this.fontColor,font:p,size:m,rotate:(i=r.rotate)!==null&&i!==void 0?i:xr(0),xSkew:(o=r.xSkew)!==null&&o!==void 0?o:xr(0),ySkew:(s=r.ySkew)!==null&&s!==void 0?s:xr(0),x:(a=r.x)!==null&&a!==void 0?a:this.x,y:(l=r.y)!==null&&l!==void 0?l:this.y,lineHeight:(d=r.lineHeight)!==null&&d!==void 0?d:this.lineHeight,graphicsState:R})),r.font&&(h?this.setFont(h):this.resetFont())},t.prototype.drawImage=function(e,r){var n,i,o,s,a,l,d;r===void 0&&(r={}),dt(e,"image",[[D1,"PDFImage"]]),qt(r.x,"options.x",["number"]),qt(r.y,"options.y",["number"]),qt(r.width,"options.width",["number"]),qt(r.height,"options.height",["number"]),qt(r.rotate,"options.rotate",[[Object,"Rotation"]]),qt(r.xSkew,"options.xSkew",[[Object,"Rotation"]]),qt(r.ySkew,"options.ySkew",[[Object,"Rotation"]]),qs(r.opacity,"opacity.opacity",0,1),gs(r.blendMode,"options.blendMode",Ka);var u=this.node.newXObject("Image",e.ref),h=this.maybeEmbedGraphicsState({opacity:r.opacity,blendMode:r.blendMode}),f=this.getContentStream();f.push.apply(f,M4(u,{x:(n=r.x)!==null&&n!==void 0?n:this.x,y:(i=r.y)!==null&&i!==void 0?i:this.y,width:(o=r.width)!==null&&o!==void 0?o:e.size().width,height:(s=r.height)!==null&&s!==void 0?s:e.size().height,rotate:(a=r.rotate)!==null&&a!==void 0?a:xr(0),xSkew:(l=r.xSkew)!==null&&l!==void 0?l:xr(0),ySkew:(d=r.ySkew)!==null&&d!==void 0?d:xr(0),graphicsState:h}))},t.prototype.drawPage=function(e,r){var n,i,o,s,a;r===void 0&&(r={}),dt(e,"embeddedPage",[[q4,"PDFEmbeddedPage"]]),qt(r.x,"options.x",["number"]),qt(r.y,"options.y",["number"]),qt(r.xScale,"options.xScale",["number"]),qt(r.yScale,"options.yScale",["number"]),qt(r.width,"options.width",["number"]),qt(r.height,"options.height",["number"]),qt(r.rotate,"options.rotate",[[Object,"Rotation"]]),qt(r.xSkew,"options.xSkew",[[Object,"Rotation"]]),qt(r.ySkew,"options.ySkew",[[Object,"Rotation"]]),qs(r.opacity,"opacity.opacity",0,1),gs(r.blendMode,"options.blendMode",Ka);var l=this.node.newXObject("EmbeddedPdfPage",e.ref),d=this.maybeEmbedGraphicsState({opacity:r.opacity,blendMode:r.blendMode}),u=r.width!==void 0?r.width/e.width:r.xScale!==void 0?r.xScale:1,h=r.height!==void 0?r.height/e.height:r.yScale!==void 0?r.yScale:1,f=this.getContentStream();f.push.apply(f,KX(l,{x:(n=r.x)!==null&&n!==void 0?n:this.x,y:(i=r.y)!==null&&i!==void 0?i:this.y,xScale:u,yScale:h,rotate:(o=r.rotate)!==null&&o!==void 0?o:xr(0),xSkew:(s=r.xSkew)!==null&&s!==void 0?s:xr(0),ySkew:(a=r.ySkew)!==null&&a!==void 0?a:xr(0),graphicsState:d}))},t.prototype.drawSvgPath=function(e,r){var n,i,o,s,a,l,d,u,h;r===void 0&&(r={}),dt(e,"path",["string"]),qt(r.x,"options.x",["number"]),qt(r.y,"options.y",["number"]),qt(r.scale,"options.scale",["number"]),qt(r.rotate,"options.rotate",[[Object,"Rotation"]]),qt(r.borderWidth,"options.borderWidth",["number"]),qt(r.color,"options.color",[[Object,"Color"]]),qs(r.opacity,"opacity.opacity",0,1),qt(r.borderColor,"options.borderColor",[[Object,"Color"]]),qt(r.borderDashArray,"options.borderDashArray",[Array]),qt(r.borderDashPhase,"options.borderDashPhase",["number"]),gs(r.borderLineCap,"options.borderLineCap",bu),qs(r.borderOpacity,"options.borderOpacity",0,1),gs(r.blendMode,"options.blendMode",Ka);var f=this.maybeEmbedGraphicsState({opacity:r.opacity,borderOpacity:r.borderOpacity,blendMode:r.blendMode});!("color"in r)&&!("borderColor"in r)&&(r.borderColor=Pn(0,0,0));var p=this.getContentStream();p.push.apply(p,JX(e,{x:(n=r.x)!==null&&n!==void 0?n:this.x,y:(i=r.y)!==null&&i!==void 0?i:this.y,scale:r.scale,rotate:(o=r.rotate)!==null&&o!==void 0?o:xr(0),color:(s=r.color)!==null&&s!==void 0?s:void 0,borderColor:(a=r.borderColor)!==null&&a!==void 0?a:void 0,borderWidth:(l=r.borderWidth)!==null&&l!==void 0?l:0,borderDashArray:(d=r.borderDashArray)!==null&&d!==void 0?d:void 0,borderDashPhase:(u=r.borderDashPhase)!==null&&u!==void 0?u:void 0,borderLineCap:(h=r.borderLineCap)!==null&&h!==void 0?h:void 0,graphicsState:f}))},t.prototype.drawLine=function(e){var r,n,i,o,s;dt(e.start,"options.start",[[Object,"{ x: number, y: number }"]]),dt(e.end,"options.end",[[Object,"{ x: number, y: number }"]]),dt(e.start.x,"options.start.x",["number"]),dt(e.start.y,"options.start.y",["number"]),dt(e.end.x,"options.end.x",["number"]),dt(e.end.y,"options.end.y",["number"]),qt(e.thickness,"options.thickness",["number"]),qt(e.color,"options.color",[[Object,"Color"]]),qt(e.dashArray,"options.dashArray",[Array]),qt(e.dashPhase,"options.dashPhase",["number"]),gs(e.lineCap,"options.lineCap",bu),qs(e.opacity,"opacity.opacity",0,1),gs(e.blendMode,"options.blendMode",Ka);var a=this.maybeEmbedGraphicsState({borderOpacity:e.opacity,blendMode:e.blendMode});"color"in e||(e.color=Pn(0,0,0));var l=this.getContentStream();l.push.apply(l,YX({start:e.start,end:e.end,thickness:(r=e.thickness)!==null&&r!==void 0?r:1,color:(n=e.color)!==null&&n!==void 0?n:void 0,dashArray:(i=e.dashArray)!==null&&i!==void 0?i:void 0,dashPhase:(o=e.dashPhase)!==null&&o!==void 0?o:void 0,lineCap:(s=e.lineCap)!==null&&s!==void 0?s:void 0,graphicsState:a}))},t.prototype.drawRectangle=function(e){var r,n,i,o,s,a,l,d,u,h,f,p,m;e===void 0&&(e={}),qt(e.x,"options.x",["number"]),qt(e.y,"options.y",["number"]),qt(e.width,"options.width",["number"]),qt(e.height,"options.height",["number"]),qt(e.rotate,"options.rotate",[[Object,"Rotation"]]),qt(e.xSkew,"options.xSkew",[[Object,"Rotation"]]),qt(e.ySkew,"options.ySkew",[[Object,"Rotation"]]),qt(e.borderWidth,"options.borderWidth",["number"]),qt(e.color,"options.color",[[Object,"Color"]]),qs(e.opacity,"opacity.opacity",0,1),qt(e.borderColor,"options.borderColor",[[Object,"Color"]]),qt(e.borderDashArray,"options.borderDashArray",[Array]),qt(e.borderDashPhase,"options.borderDashPhase",["number"]),gs(e.borderLineCap,"options.borderLineCap",bu),qs(e.borderOpacity,"options.borderOpacity",0,1),gs(e.blendMode,"options.blendMode",Ka);var x=this.maybeEmbedGraphicsState({opacity:e.opacity,borderOpacity:e.borderOpacity,blendMode:e.blendMode});!("color"in e)&&!("borderColor"in e)&&(e.color=Pn(0,0,0));var P=this.getContentStream();P.push.apply(P,Bu({x:(r=e.x)!==null&&r!==void 0?r:this.x,y:(n=e.y)!==null&&n!==void 0?n:this.y,width:(i=e.width)!==null&&i!==void 0?i:150,height:(o=e.height)!==null&&o!==void 0?o:100,rotate:(s=e.rotate)!==null&&s!==void 0?s:xr(0),xSkew:(a=e.xSkew)!==null&&a!==void 0?a:xr(0),ySkew:(l=e.ySkew)!==null&&l!==void 0?l:xr(0),borderWidth:(d=e.borderWidth)!==null&&d!==void 0?d:0,color:(u=e.color)!==null&&u!==void 0?u:void 0,borderColor:(h=e.borderColor)!==null&&h!==void 0?h:void 0,borderDashArray:(f=e.borderDashArray)!==null&&f!==void 0?f:void 0,borderDashPhase:(p=e.borderDashPhase)!==null&&p!==void 0?p:void 0,graphicsState:x,borderLineCap:(m=e.borderLineCap)!==null&&m!==void 0?m:void 0}))},t.prototype.drawSquare=function(e){e===void 0&&(e={});var r=e.size;qt(r,"size",["number"]),this.drawRectangle(Tr(Tr({},e),{width:r,height:r}))},t.prototype.drawEllipse=function(e){var r,n,i,o,s,a,l,d,u,h,f;e===void 0&&(e={}),qt(e.x,"options.x",["number"]),qt(e.y,"options.y",["number"]),qt(e.xScale,"options.xScale",["number"]),qt(e.yScale,"options.yScale",["number"]),qt(e.rotate,"options.rotate",[[Object,"Rotation"]]),qt(e.color,"options.color",[[Object,"Color"]]),qs(e.opacity,"opacity.opacity",0,1),qt(e.borderColor,"options.borderColor",[[Object,"Color"]]),qs(e.borderOpacity,"options.borderOpacity",0,1),qt(e.borderWidth,"options.borderWidth",["number"]),qt(e.borderDashArray,"options.borderDashArray",[Array]),qt(e.borderDashPhase,"options.borderDashPhase",["number"]),gs(e.borderLineCap,"options.borderLineCap",bu),gs(e.blendMode,"options.blendMode",Ka);var p=this.maybeEmbedGraphicsState({opacity:e.opacity,borderOpacity:e.borderOpacity,blendMode:e.blendMode});!("color"in e)&&!("borderColor"in e)&&(e.color=Pn(0,0,0));var m=this.getContentStream();m.push.apply(m,R1({x:(r=e.x)!==null&&r!==void 0?r:this.x,y:(n=e.y)!==null&&n!==void 0?n:this.y,xScale:(i=e.xScale)!==null&&i!==void 0?i:100,yScale:(o=e.yScale)!==null&&o!==void 0?o:100,rotate:(s=e.rotate)!==null&&s!==void 0?s:void 0,color:(a=e.color)!==null&&a!==void 0?a:void 0,borderColor:(l=e.borderColor)!==null&&l!==void 0?l:void 0,borderWidth:(d=e.borderWidth)!==null&&d!==void 0?d:0,borderDashArray:(u=e.borderDashArray)!==null&&u!==void 0?u:void 0,borderDashPhase:(h=e.borderDashPhase)!==null&&h!==void 0?h:void 0,borderLineCap:(f=e.borderLineCap)!==null&&f!==void 0?f:void 0,graphicsState:p}))},t.prototype.drawCircle=function(e){e===void 0&&(e={});var r=e.size,n=r===void 0?100:r;qt(n,"size",["number"]),this.drawEllipse(Tr(Tr({},e),{xScale:n,yScale:n}))},t.prototype.setOrEmbedFont=function(e){var r=this.font,n=this.fontKey;e?this.setFont(e):this.getFont();var i=this.font,o=this.fontKey;return{oldFont:r,oldFontKey:n,newFont:i,newFontKey:o}},t.prototype.getFont=function(){if(!this.font||!this.fontKey){var e=this.doc.embedStandardFont(Nm.Helvetica);this.setFont(e)}return[this.font,this.fontKey]},t.prototype.resetFont=function(){this.font=void 0,this.fontKey=void 0},t.prototype.getContentStream=function(e){return e===void 0&&(e=!0),e&&this.contentStream?this.contentStream:(this.contentStream=this.createContentStream(),this.contentStreamRef=this.doc.context.register(this.contentStream),this.node.addContentStream(this.contentStreamRef),this.contentStream)},t.prototype.createContentStream=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=this.doc.context.obj({}),i=cp.of(n,e);return i},t.prototype.maybeEmbedGraphicsState=function(e){var r=e.opacity,n=e.borderOpacity,i=e.blendMode;if(!(r===void 0&&n===void 0&&i===void 0)){var o=this.doc.context.obj({Type:"ExtGState",ca:r,CA:n,BM:i}),s=this.node.newExtGState("GS",o);return s}},t.prototype.scaleAnnot=function(e,r,n){for(var i=["RD","CL","Vertices","QuadPoints","L","Rect"],o=0,s=i.length;o<s;o++){var a=e.lookup(Ke.of(i[o]));a instanceof pn&&a.scalePDFNumbers(r,n)}var l=e.lookup(Ke.of("InkList"));if(l instanceof pn)for(var o=0,s=l.size();o<s;o++){var d=l.lookup(o);d instanceof pn&&d.scalePDFNumbers(r,n)}},t.of=function(e,r,n){return new t(e,r,n)},t.create=function(e){dt(e,"doc",[[ul,"PDFDocument"]]);var r=bn.of(-1),n=nl.withContextAndParent(e.context,r),i=e.context.register(n);return new t(n,i,e)},t}(),jy=function(t){Ht(e,t);function e(r,n,i){var o=t.call(this,r,n,i)||this;return dt(r,"acroButton",[[Sg,"PDFAcroPushButton"]]),o.acroField=r,o}return e.prototype.setImage=function(r,n){n===void 0&&(n=hc.Center);for(var i=this.acroField.getWidgets(),o=0,s=i.length;o<s;o++){var a=i[o],l=this.createImageAppearanceStream(a,r,n);this.updateWidgetAppearances(a,{normal:l})}this.markAsClean()},e.prototype.setFontSize=function(r){gg(r,"fontSize"),this.acroField.setFontSize(r),this.markAsDirty()},e.prototype.addToPage=function(r,n,i){var o,s,a,l,d,u,h,f,p,m,x;qt(r,"text",["string"]),qt(n,"page",[[bs,"PDFPage"]]),Zu(i);var P=this.createWidget({x:((o=i?.x)!==null&&o!==void 0?o:0)-((s=i?.borderWidth)!==null&&s!==void 0?s:0)/2,y:((a=i?.y)!==null&&a!==void 0?a:0)-((l=i?.borderWidth)!==null&&l!==void 0?l:0)/2,width:(d=i?.width)!==null&&d!==void 0?d:100,height:(u=i?.height)!==null&&u!==void 0?u:50,textColor:(h=i?.textColor)!==null&&h!==void 0?h:Pn(0,0,0),backgroundColor:(f=i?.backgroundColor)!==null&&f!==void 0?f:Pn(.75,.75,.75),borderColor:i?.borderColor,borderWidth:(p=i?.borderWidth)!==null&&p!==void 0?p:0,rotate:(m=i?.rotate)!==null&&m!==void 0?m:xr(0),caption:r,hidden:i?.hidden,page:n.ref}),g=this.doc.context.register(P.dict);this.acroField.addWidget(g);var F=(x=i?.font)!==null&&x!==void 0?x:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(P,F),n.node.addAnnot(g)},e.prototype.needsAppearancesUpdate=function(){var r;if(this.isDirty())return!0;for(var n=this.acroField.getWidgets(),i=0,o=n.length;i<o;i++){var s=n[i],a=((r=s.getAppearances())===null||r===void 0?void 0:r.normal)instanceof ns;if(!a)return!0}return!1},e.prototype.defaultUpdateAppearances=function(r){dt(r,"font",[[is,"PDFFont"]]),this.updateAppearances(r)},e.prototype.updateAppearances=function(r,n){dt(r,"font",[[is,"PDFFont"]]),qt(n,"provider",[Function]);for(var i=this.acroField.getWidgets(),o=0,s=i.length;o<s;o++){var a=i[o];this.updateWidgetAppearance(a,r,n)}},e.prototype.updateWidgetAppearance=function(r,n,i){var o=i??bZ,s=Xu(o(this,r,n));this.updateWidgetAppearanceWithFont(r,n,s)},e.of=function(r,n,i){return new e(r,n,i)},e}(Rd);const TZ=async(t,e)=>{try{const r=await t.arrayBuffer(),n=await ul.load(r),i=await n.embedPng(e.signatureDataUrl),o=e.position.pageIndex??0,s=n.getPages();if(o>=s.length)throw new Error(`Page index ${o} does not exist. PDF has ${s.length} pages.`);const a=s[o],{width:l,height:d}=a.getSize();let u=e.position.width,h=e.position.height;if(e.maintainAspectRatio!==!1){const f=i.width/i.height;u/h>f?u=h*f:h=u/f}return a.drawImage(i,{x:e.position.x,y:d-e.position.y-h,width:u,height:h,opacity:e.opacity??1}),await n.save()}catch(r){throw console.error("Error adding signature to PDF:",r),new Error(`Failed to add signature to PDF: ${r instanceof Error?r.message:"Unknown error"}`)}},IZ=async t=>{try{const e=await t.arrayBuffer(),n=(await ul.load(e)).getPages();return{pageCount:n.length,pages:n.map((i,o)=>({index:o,width:i.getSize().width,height:i.getSize().height}))}}catch(e){throw console.error("Error getting PDF info:",e),new Error(`Failed to get PDF info: ${e instanceof Error?e.message:"Unknown error"}`)}},b0={CUBAN_PASSPORT_SIGNATURE:{x:260,y:115,width:250,height:60,pageIndex:0},BOTTOM_LEFT:{x:50,y:750,width:180,height:45,pageIndex:0}},NZ=(t,e="signed-document.pdf")=>{const r=new Blob([t],{type:"application/pdf"}),n=URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download=e,i.click(),setTimeout(()=>URL.revokeObjectURL(n),1e3)};var RZ=le("<span>(<!> página<!>)"),DZ=le("<div><p>✓ "),LZ=le("<div><h4>✓ Firma cargada desde solicitud</h4><p><strong>Cliente:</strong> <br><strong>ID Solicitud:</strong> <br><strong>Firmado:</strong> "),$Z=le("<div><label><input type=radio name=enhancement>Básico</label><label><input type=radio name=enhancement>Mejorado</label><label><input type=radio name=enhancement>Avanzado"),ww=le("<input type=file accept=image/* id=signature-upload>"),FZ=le("<label for=signature-upload>Seleccionar Imagen"),MZ=le("<label for=signature-upload>Cargar Nueva Imagen"),OZ=le("<div>Procesando firma..."),BZ=le('<div><h4>Firma Procesada:</h4><img alt="Firma procesada">'),jZ=le("<label><input type=radio name=position><span>Posición Personalizada"),VZ=le("<div>"),zZ=le("<div><h3>3. Posición de la Firma</h3><div>"),UZ=le("<div><strong></strong> "),qZ=le("<span><span></span>Generando PDF..."),HZ=le('<div><h2>Agregar Firma a PDF</h2><p>Suba un PDF y una imagen de firma para generar un documento firmado automáticamente.</p><div><h3>1. Cargar Documento PDF</h3><input type=file accept=.pdf id=pdf-upload><label for=pdf-upload>Seleccionar PDF</label></div><div><h3>2. Cargar Imagen de Firma</h3></div><div></div><div><h4>💡 Consejos:</h4><ul><li>Use imágenes de firma con fondo blanco para mejores resultados</li><li>Las posiciones se miden desde la esquina superior izquierda</li><li>El PDF modificado se descargará automáticamente</li><li>Para pasaportes cubanos, use la posición "Pasaporte Cubano (Recomendado)"'),WZ=le(`<style>
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `),GZ=le("<label><input type=radio name=position><span>");const KZ=()=>{const[t,e]=Ae(null),[r,n]=Ae(null),[i,o]=Ae(""),[s,a]=Ae(null),[l,d]=Ae(b0.CUBAN_PASSPORT_SIGNATURE),[u,h]=Ae(!1),[f,p]=Ae(!1),[m,x]=Ae(!1),[P,g]=Ae("enhanced"),[F,V]=Ae(null),[N,R]=Ae(null),[M,C]=Ae(null);Kn(()=>{const z=sessionStorage.getItem("pendingSignature");if(z)try{const W=JSON.parse(z);o(W.imageData),R("request"),C(W),V({type:"success",text:`Firma de ${W.clientName} cargada desde solicitud de firma`}),sessionStorage.removeItem("pendingSignature")}catch(W){console.error("Error loading pending signature:",W)}});const k=async z=>{const A=z.target.files?.[0];if(A){if(A.type!=="application/pdf"){V({type:"error",text:"Por favor seleccione un archivo PDF válido."});return}e(A),V(null);try{const I=await IZ(A);a(I),V({type:"success",text:`PDF cargado: ${I.pageCount} página(s)`})}catch(I){V({type:"error",text:"Error al leer el PDF"}),console.error(I)}}},D=async z=>{const A=z.target.files?.[0];if(A){if(!A.type.startsWith("image/")){V({type:"error",text:"Por favor seleccione una imagen válida."});return}n(A),R("upload"),C(null),V(null),await $(A)}},$=async z=>{if(z){x(!0),V(null);try{if(P()==="vectorized"&&!await w1()){x(!1);return}const W=await M3(z);if(!W.success||!W.signatureDataUrl){V({type:"error",text:W.error||"Error extrayendo la firma"}),x(!1);return}let A=W.signatureDataUrl;P()==="enhanced"?A=await P1(A):P()==="vectorized"&&(A=await O3(A)),o(A),V({type:"success",text:"Firma extraída y procesada correctamente"})}catch(W){V({type:"error",text:"Error procesando la firma"}),console.error(W)}x(!1)}},w=async()=>{if(!t()||!i()){V({type:"error",text:"Necesita cargar un PDF y una firma"});return}p(!0),V(null);try{const z={signatureDataUrl:i(),position:l(),opacity:1,maintainAspectRatio:!0},W=await TZ(t(),z),I=`${t().name.replace(".pdf","")}-firmado.pdf`;NZ(W,I),V({type:"success",text:"PDF firmado generado y descargado correctamente"})}catch(z){V({type:"error",text:"Error agregando firma al PDF"}),console.error(z)}p(!1)},_=(z,W)=>{const A=parseInt(W)||0;d(I=>({...I,[z]:A}))},v=[{name:"Pasaporte Cubano (Recomendado)",position:b0.CUBAN_PASSPORT_SIGNATURE},{name:"Parte Inferior Izquierda",position:b0.BOTTOM_LEFT}];return T(Vt,{get children(){return[(()=>{var z=HZ(),W=z.firstChild,A=W.nextSibling,I=A.nextSibling,ee=I.firstChild,Z=ee.nextSibling,X=Z.nextSibling,se=I.nextSibling,U=se.firstChild,E=se.nextSibling,O=E.nextSibling,L=O.firstChild,G=L.nextSibling;return z.style.setProperty("padding","2rem"),z.style.setProperty("max-width","800px"),z.style.setProperty("margin","0 auto"),W.style.setProperty("font-size","1.5rem"),W.style.setProperty("font-weight","600"),W.style.setProperty("margin-bottom","1rem"),W.style.setProperty("color","var(--text-primary)"),A.style.setProperty("margin-bottom","2rem"),A.style.setProperty("color","var(--text-muted)"),A.style.setProperty("line-height","1.6"),I.style.setProperty("margin-bottom","2rem"),I.style.setProperty("padding","1.5rem"),I.style.setProperty("border","2px dashed var(--border-color)"),I.style.setProperty("border-radius","var(--border-radius)"),I.style.setProperty("text-align","center"),ee.style.setProperty("margin-bottom","1rem"),Z.addEventListener("change",k),Z.style.setProperty("display","none"),X.style.setProperty("display","inline-block"),X.style.setProperty("padding","0.75rem 1.5rem"),X.style.setProperty("background","var(--primary-color)"),X.style.setProperty("color","white"),X.style.setProperty("border-radius","var(--border-radius-sm)"),X.style.setProperty("cursor","pointer"),X.style.setProperty("font-weight","500"),X.style.setProperty("margin-bottom","1rem"),c(I,T(We,{get when(){return t()},get children(){var K=DZ(),q=K.firstChild;return q.firstChild,K.style.setProperty("margin-top","1rem"),K.style.setProperty("padding","1rem"),K.style.setProperty("background","var(--success-light)"),K.style.setProperty("border-radius","var(--border-radius-sm)"),q.style.setProperty("margin","0"),q.style.setProperty("color","var(--success-dark)"),c(q,()=>t().name,null),c(q,T(We,{get when(){return s()},get children(){var B=RZ(),H=B.firstChild,Y=H.nextSibling,te=Y.nextSibling,oe=te.nextSibling;return oe.nextSibling,B.style.setProperty("margin-left","0.5rem"),c(B,()=>s().pageCount,Y),c(B,()=>s().pageCount>1?"s":"",oe),B}}),null),K}}),null),se.style.setProperty("margin-bottom","2rem"),se.style.setProperty("padding","1.5rem"),se.style.setProperty("border-radius","var(--border-radius)"),se.style.setProperty("text-align","center"),U.style.setProperty("margin-bottom","1rem"),c(se,T(We,{get when(){return Ve(()=>N()==="request")()&&M()},get children(){var K=LZ(),q=K.firstChild,B=q.nextSibling,H=B.firstChild,Y=H.nextSibling,te=Y.nextSibling,oe=te.nextSibling,pe=oe.nextSibling,ne=pe.nextSibling,Q=ne.nextSibling;return Q.nextSibling,K.style.setProperty("margin-bottom","1rem"),K.style.setProperty("padding","1rem"),K.style.setProperty("background","white"),K.style.setProperty("border-radius","var(--border-radius-sm)"),K.style.setProperty("text-align","left"),q.style.setProperty("margin-bottom","0.5rem"),q.style.setProperty("color","var(--success-dark)"),q.style.setProperty("display","flex"),q.style.setProperty("align-items","center"),q.style.setProperty("gap","0.5rem"),B.style.setProperty("margin","0"),B.style.setProperty("font-size","0.875rem"),B.style.setProperty("color","var(--text-muted)"),c(B,()=>M().clientName,te),c(B,()=>M().requestId,ne),c(B,()=>new Date(M().signedAt).toLocaleString(),null),K}}),null),c(se,T(We,{get when(){return N()!=="request"},get children(){return[(()=>{var K=$Z(),q=K.firstChild,B=q.firstChild,H=q.nextSibling,Y=H.firstChild,te=H.nextSibling,oe=te.firstChild;return K.style.setProperty("margin-bottom","1rem"),K.style.setProperty("display","flex"),K.style.setProperty("justify-content","center"),K.style.setProperty("align-items","center"),K.style.setProperty("gap","1rem"),K.style.setProperty("flex-wrap","wrap"),q.style.setProperty("display","flex"),q.style.setProperty("align-items","center"),q.style.setProperty("gap","0.5rem"),B.addEventListener("change",()=>g("basic")),H.style.setProperty("display","flex"),H.style.setProperty("align-items","center"),H.style.setProperty("gap","0.5rem"),Y.addEventListener("change",()=>g("enhanced")),te.style.setProperty("display","flex"),te.style.setProperty("align-items","center"),te.style.setProperty("gap","0.5rem"),oe.addEventListener("change",()=>g("vectorized")),be(()=>B.checked=P()==="basic"),be(()=>Y.checked=P()==="enhanced"),be(()=>oe.checked=P()==="vectorized"),K})(),(()=>{var K=ww();return K.addEventListener("change",D),K.style.setProperty("display","none"),K})(),(()=>{var K=FZ();return K.style.setProperty("display","inline-block"),K.style.setProperty("padding","0.75rem 1.5rem"),K.style.setProperty("background","var(--secondary-color)"),K.style.setProperty("color","white"),K.style.setProperty("border-radius","var(--border-radius-sm)"),K.style.setProperty("cursor","pointer"),K.style.setProperty("font-weight","500"),K})()]}}),null),c(se,T(We,{get when(){return N()==="request"},get children(){return[(()=>{var K=MZ();return K.style.setProperty("display","inline-block"),K.style.setProperty("padding","0.75rem 1.5rem"),K.style.setProperty("background","var(--secondary-color)"),K.style.setProperty("color","white"),K.style.setProperty("border-radius","var(--border-radius-sm)"),K.style.setProperty("cursor","pointer"),K.style.setProperty("font-weight","500"),K.style.setProperty("margin-top","0.5rem"),K})(),(()=>{var K=ww();return K.addEventListener("change",D),K.style.setProperty("display","none"),K})()]}}),null),c(se,T(We,{get when(){return m()},get children(){var K=OZ();return K.style.setProperty("margin-top","1rem"),K.style.setProperty("color","var(--primary-color)"),K.style.setProperty("font-size","0.875rem"),K}}),null),c(se,T(We,{get when(){return Ve(()=>!!i())()&&!m()},get children(){var K=BZ(),q=K.firstChild,B=q.nextSibling;return K.style.setProperty("margin-top","1rem"),K.style.setProperty("padding","1rem"),K.style.setProperty("background","white"),K.style.setProperty("border","1px solid var(--border-color)"),K.style.setProperty("border-radius","var(--border-radius-sm)"),q.style.setProperty("margin-bottom","0.5rem"),B.style.setProperty("max-width","300px"),B.style.setProperty("max-height","100px"),B.style.setProperty("border","1px solid var(--border-color)"),B.style.setProperty("border-radius","4px"),B.style.setProperty("background","white"),c(K,T(mt,{onClick:()=>r()&&$(r()),variant:"secondary",size:"sm",style:{"margin-top":"0.5rem"},get disabled(){return m()},children:"Reprocesar"}),null),be(()=>ir(B,"src",i())),K}}),null),c(z,T(We,{get when(){return i()},get children(){var K=zZ(),q=K.firstChild,B=q.nextSibling;return K.style.setProperty("margin-bottom","2rem"),K.style.setProperty("padding","1.5rem"),K.style.setProperty("border","1px solid var(--border-color)"),K.style.setProperty("border-radius","var(--border-radius)"),q.style.setProperty("margin-bottom","1rem"),B.style.setProperty("display","grid"),B.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(200px, 1fr))"),B.style.setProperty("gap","0.5rem"),B.style.setProperty("margin-bottom","1rem"),c(B,T(_t,{each:v,children:H=>(()=>{var Y=GZ(),te=Y.firstChild,oe=te.nextSibling;return Y.style.setProperty("display","flex"),Y.style.setProperty("align-items","center"),Y.style.setProperty("gap","0.5rem"),Y.style.setProperty("padding","0.5rem"),Y.style.setProperty("border","1px solid var(--border-color)"),Y.style.setProperty("border-radius","4px"),Y.style.setProperty("cursor","pointer"),te.addEventListener("change",()=>{d(H.position),h(!1)}),oe.style.setProperty("font-size","0.875rem"),c(oe,()=>H.name),be(()=>te.checked=!u()&&JSON.stringify(l())===JSON.stringify(H.position)),Y})()}),null),c(B,T(We,{get when(){return Xt.state?.profile.isAdmin},get children(){var H=jZ(),Y=H.firstChild,te=Y.nextSibling;return H.style.setProperty("display","flex"),H.style.setProperty("align-items","center"),H.style.setProperty("gap","0.5rem"),H.style.setProperty("padding","0.5rem"),H.style.setProperty("border","1px solid var(--border-color)"),H.style.setProperty("border-radius","4px"),H.style.setProperty("cursor","pointer"),Y.addEventListener("change",()=>h(!0)),te.style.setProperty("font-size","0.875rem"),be(()=>Y.checked=u()),H}}),null),c(K,T(We,{get when(){return u()},get children(){var H=VZ();return H.style.setProperty("display","grid"),H.style.setProperty("grid-template-columns","repeat(4, 1fr)"),H.style.setProperty("gap","1rem"),H.style.setProperty("margin-top","1rem"),c(H,T(Ot,{label:"X (px)",type:"number",get value(){return l().x.toString()},onChange:Y=>_("x",Y)}),null),c(H,T(Ot,{label:"Y (px)",type:"number",get value(){return l().y.toString()},onChange:Y=>_("y",Y)}),null),c(H,T(Ot,{label:"Ancho (px)",type:"number",get value(){return l().width.toString()},onChange:Y=>_("width",Y)}),null),c(H,T(Ot,{label:"Alto (px)",type:"number",get value(){return l().height.toString()},onChange:Y=>_("height",Y)}),null),H}}),null),K}}),E),c(z,T(We,{get when(){return F()},get children(){var K=UZ(),q=K.firstChild;return q.nextSibling,K.style.setProperty("padding","1rem"),K.style.setProperty("margin-bottom","1rem"),K.style.setProperty("border-radius","var(--border-radius)"),c(q,()=>F().type==="success"?"✓ Éxito:":"⚠ Error:"),c(K,()=>F().text,null),be(B=>{var H=F().type==="success"?"var(--success-light)":"var(--error-light)",Y=F().type==="success"?"var(--success-dark)":"var(--error-dark)",te=`1px solid ${F().type==="success"?"var(--success-color)":"var(--error-color)"}`;return H!==B.e&&((B.e=H)!=null?K.style.setProperty("background",H):K.style.removeProperty("background")),Y!==B.t&&((B.t=Y)!=null?K.style.setProperty("color",Y):K.style.removeProperty("color")),te!==B.a&&((B.a=te)!=null?K.style.setProperty("border",te):K.style.removeProperty("border")),B},{e:void 0,t:void 0,a:void 0}),K}}),E),E.style.setProperty("text-align","center"),E.style.setProperty("margin-top","2rem"),c(E,T(mt,{onClick:w,get disabled(){return!t()||!i()||f()},variant:"primary",size:"lg",get children(){return T(We,{get when(){return f()},fallback:"🖋️ Generar PDF Firmado",get children(){var K=qZ(),q=K.firstChild;return K.style.setProperty("display","flex"),K.style.setProperty("align-items","center"),q.style.setProperty("display","inline-block"),q.style.setProperty("width","16px"),q.style.setProperty("height","16px"),q.style.setProperty("border","2px solid #fff"),q.style.setProperty("border-top-color","transparent"),q.style.setProperty("border-radius","50%"),q.style.setProperty("animation","spin 0.8s linear infinite"),q.style.setProperty("margin-right","0.5rem"),K}})}})),O.style.setProperty("margin-top","2rem"),O.style.setProperty("padding","1rem"),O.style.setProperty("background","var(--info-light)"),O.style.setProperty("border-radius","var(--border-radius)"),O.style.setProperty("font-size","0.875rem"),O.style.setProperty("color","var(--info-dark)"),L.style.setProperty("margin-bottom","0.5rem"),G.style.setProperty("margin","0"),G.style.setProperty("padding-left","1.5rem"),be(K=>{var q=N()==="request"?"2px solid var(--success-color)":"2px dashed var(--border-color)",B=N()==="request"?"var(--success-light)":"transparent";return q!==K.e&&((K.e=q)!=null?se.style.setProperty("border",q):se.style.removeProperty("border")),B!==K.t&&((K.t=B)!=null?se.style.setProperty("background",B):se.style.removeProperty("background")),K},{e:void 0,t:void 0}),z})(),WZ()]}})};var YZ=le("<div><h3></h3><ul><li></li><li></li><li></li><li></li><li></li><li><strong>Auto-guardado:</strong> Su progreso se guarda automáticamente mientras completa el formulario"),XZ=le("<div><div><h1></h1><p></p><div></div></div><div><h3></h3><p></p><div><div><h4></h4><p>1-800-CUBA-PASS</p></div><div><h4></h4><p>pasaportes@consuladocuba.com");const ZZ=()=>{const{t}=pr(),[e,r]=Ae("form"),[n,i]=Ae(null),o=h=>{console.log("Cuban passport form submitted:",h)},s=h=>{i(h),r("form")},a=h=>{i(h),r("form")},l=()=>{i(null),r("form")},d=h=>{console.log("Application saved:",h)},u={lugarNacimiento:{pais:"CUBA",provincia:"",municipio:"",diaNacimiento:"",mesNacimiento:"",anoNacimiento:""},direccionActual:{calle:"",provincia:"",municipio:"",pais:"ESTADOS UNIDOS",codigoPostal:""}};return(()=>{var h=XZ(),f=h.firstChild,p=f.firstChild,m=p.nextSibling,x=m.nextSibling,P=f.nextSibling,g=P.firstChild,F=g.nextSibling,V=F.nextSibling,N=V.firstChild,R=N.firstChild,M=R.nextSibling,C=N.nextSibling,k=C.firstChild,D=k.nextSibling;return h.style.setProperty("max-width","1200px"),h.style.setProperty("margin","0 auto"),h.style.setProperty("padding","2rem"),f.style.setProperty("text-align","center"),f.style.setProperty("margin-bottom","2rem"),p.style.setProperty("font-size","2rem"),p.style.setProperty("font-weight","700"),p.style.setProperty("color","var(--text-primary)"),p.style.setProperty("margin-bottom","0.5rem"),c(p,()=>t("passport.cuban.pageTitle","Cuban Passport Application")),m.style.setProperty("color","var(--text-muted)"),m.style.setProperty("font-size","1.125rem"),m.style.setProperty("margin-bottom","1.5rem"),c(m,(()=>{var $=Ve(()=>e()==="form");return()=>$()?n()?"Editando solicitud existente":"Complete el formulario para crear una nueva solicitud":"Gestione sus solicitudes de pasaporte guardadas"})()),x.style.setProperty("display","flex"),x.style.setProperty("justify-content","center"),x.style.setProperty("gap","1rem"),x.style.setProperty("margin-bottom","2rem"),c(x,T(mt,{onClick:()=>r("list"),get variant(){return e()==="list"?"primary":"secondary"},children:"📋 Ver Solicitudes"}),null),c(x,T(mt,{onClick:l,get variant(){return e()==="form"&&!n()?"primary":"secondary"},children:"➕ Nueva Solicitud"}),null),c(h,T(We,{get when(){return e()==="form"},get children(){var $=YZ(),w=$.firstChild,_=w.nextSibling,v=_.firstChild,z=v.nextSibling,W=z.nextSibling,A=W.nextSibling,I=A.nextSibling;return $.style.setProperty("background","var(--warning-light)"),$.style.setProperty("padding","1rem"),$.style.setProperty("border-radius","var(--border-radius)"),$.style.setProperty("margin-bottom","2rem"),$.style.setProperty("border","1px solid var(--warning-color)"),w.style.setProperty("font-size","1.125rem"),w.style.setProperty("font-weight","600"),w.style.setProperty("margin-bottom","0.5rem"),w.style.setProperty("color","var(--warning-dark)"),c(w,()=>t("passport.cuban.instructions.title","Important Instructions")),_.style.setProperty("margin-left","1.5rem"),_.style.setProperty("font-size","0.875rem"),_.style.setProperty("color","var(--text-primary)"),c(v,()=>t("passport.cuban.instructions.1","All names should be entered in UPPERCASE letters")),c(z,()=>t("passport.cuban.instructions.2","Ensure all information matches your official documents")),c(W,()=>t("passport.cuban.instructions.3","Upload a clear image of your signature on white paper")),c(A,()=>t("passport.cuban.instructions.4","The generated PDF will match the official Cuban passport form format")),c(I,()=>t("passport.cuban.instructions.5","You will need to print the form and add a 4.5 x 4.5 cm photo")),$}}),P),c(h,T(We,{get when(){return e()==="form"},get children(){return T(eK,{onSubmit:o,get initialData(){return n()?.applicationData||u},get applicationId(){return n()?.id},onSave:d})}}),P),c(h,T(We,{get when(){return e()==="list"},get children(){return T(hK,{onSelectApplication:s,onEditApplication:a,showActions:!0})}}),P),P.style.setProperty("margin-top","3rem"),P.style.setProperty("padding","1.5rem"),P.style.setProperty("background","var(--gray-50)"),P.style.setProperty("border-radius","var(--border-radius)"),P.style.setProperty("text-align","center"),g.style.setProperty("font-size","1.25rem"),g.style.setProperty("font-weight","600"),g.style.setProperty("margin-bottom","1rem"),g.style.setProperty("color","var(--text-primary)"),c(g,()=>t("passport.cuban.help.title","Need Help?")),F.style.setProperty("font-size","1rem"),F.style.setProperty("color","var(--text-muted)"),F.style.setProperty("margin-bottom","1rem"),c(F,()=>t("passport.cuban.help.description","For assistance with your passport application, contact the nearest Cuban consulate.")),V.style.setProperty("display","flex"),V.style.setProperty("justify-content","center"),V.style.setProperty("gap","2rem"),V.style.setProperty("flex-wrap","wrap"),R.style.setProperty("font-weight","500"),R.style.setProperty("margin-bottom","0.25rem"),c(R,()=>t("passport.cuban.help.phone","Phone")),M.style.setProperty("color","var(--primary-color)"),k.style.setProperty("font-weight","500"),k.style.setProperty("margin-bottom","0.25rem"),c(k,()=>t("passport.cuban.help.email","Email")),D.style.setProperty("color","var(--primary-color)"),h})()};var JZ=le("<div><div><div><h1>🖋️ Firmar Documentos PDF</h1><p>Agregue su firma a cualquier documento PDF de forma automática. Perfecto para aplicaciones de pasaporte, formularios oficiales y documentos legales.</p></div><div><div><div>🤖</div><h3>Procesamiento Inteligente</h3><p>Extracción automática de firmas con algoritmos avanzados para obtener resultados profesionales.</p></div><div><div>🎯</div><h3>Posicionamiento Preciso</h3><p>Posiciones predefinidas para documentos comunes o configuración personalizada para máxima flexibilidad.</p></div><div><div>⚡</div><h3>Rápido y Seguro</h3><p>Procesamiento local sin subir documentos a servidores externos. Sus datos permanecen seguros.</p></div></div><div><h3>📄 Documentos Compatibles</h3><div><div><strong>🇨🇺 Pasaporte Cubano</strong><br><small>Aplicaciones DS-1 y formularios relacionados</small></div><div><strong>🇺🇸 Pasaporte Americano</strong><br><small>Formularios DS-11, DS-82, etc.</small></div><div><strong>📋 Documentos Legales</strong><br><small>Contratos, formularios oficiales</small></div><div><strong>🏢 Formularios Comerciales</strong><br><small>Cualquier PDF que requiera firma");const QZ=()=>(()=>{var t=JZ(),e=t.firstChild,r=e.firstChild,n=r.firstChild,i=n.nextSibling,o=r.nextSibling,s=o.firstChild,a=s.firstChild,l=a.nextSibling,d=l.nextSibling,u=s.nextSibling,h=u.firstChild,f=h.nextSibling,p=f.nextSibling,m=u.nextSibling,x=m.firstChild,P=x.nextSibling,g=P.nextSibling,F=o.nextSibling,V=F.firstChild,N=V.nextSibling,R=N.firstChild,M=R.firstChild,C=M.nextSibling,k=C.nextSibling,D=R.nextSibling,$=D.firstChild,w=$.nextSibling,_=w.nextSibling,v=D.nextSibling,z=v.firstChild,W=z.nextSibling,A=W.nextSibling,I=v.nextSibling,ee=I.firstChild,Z=ee.nextSibling,X=Z.nextSibling;return t.style.setProperty("min-height","100vh"),t.style.setProperty("background","var(--background-secondary)"),t.style.setProperty("padding","2rem 0"),e.style.setProperty("max-width","1200px"),e.style.setProperty("margin","0 auto"),e.style.setProperty("padding","0 1rem"),r.style.setProperty("text-align","center"),r.style.setProperty("margin-bottom","3rem"),n.style.setProperty("font-size","2.5rem"),n.style.setProperty("font-weight","700"),n.style.setProperty("margin-bottom","1rem"),n.style.setProperty("color","var(--text-primary)"),n.style.setProperty("background","linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%)"),n.style.setProperty("-webkit-background-clip","text"),n.style.setProperty("-webkit-text-fill-color","transparent"),n.style.setProperty("background-clip","text"),i.style.setProperty("font-size","1.125rem"),i.style.setProperty("color","var(--text-muted)"),i.style.setProperty("max-width","600px"),i.style.setProperty("margin","0 auto"),i.style.setProperty("line-height","1.6"),c(e,T(KZ,{}),o),o.style.setProperty("margin-top","4rem"),o.style.setProperty("display","grid"),o.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(300px, 1fr))"),o.style.setProperty("gap","2rem"),s.style.setProperty("padding","2rem"),s.style.setProperty("background","white"),s.style.setProperty("border-radius","var(--border-radius)"),s.style.setProperty("box-shadow","var(--shadow-sm)"),s.style.setProperty("text-align","center"),a.style.setProperty("font-size","2.5rem"),a.style.setProperty("margin-bottom","1rem"),l.style.setProperty("font-size","1.25rem"),l.style.setProperty("font-weight","600"),l.style.setProperty("margin-bottom","0.5rem"),l.style.setProperty("color","var(--text-primary)"),d.style.setProperty("color","var(--text-muted)"),d.style.setProperty("line-height","1.5"),d.style.setProperty("margin","0"),u.style.setProperty("padding","2rem"),u.style.setProperty("background","white"),u.style.setProperty("border-radius","var(--border-radius)"),u.style.setProperty("box-shadow","var(--shadow-sm)"),u.style.setProperty("text-align","center"),h.style.setProperty("font-size","2.5rem"),h.style.setProperty("margin-bottom","1rem"),f.style.setProperty("font-size","1.25rem"),f.style.setProperty("font-weight","600"),f.style.setProperty("margin-bottom","0.5rem"),f.style.setProperty("color","var(--text-primary)"),p.style.setProperty("color","var(--text-muted)"),p.style.setProperty("line-height","1.5"),p.style.setProperty("margin","0"),m.style.setProperty("padding","2rem"),m.style.setProperty("background","white"),m.style.setProperty("border-radius","var(--border-radius)"),m.style.setProperty("box-shadow","var(--shadow-sm)"),m.style.setProperty("text-align","center"),x.style.setProperty("font-size","2.5rem"),x.style.setProperty("margin-bottom","1rem"),P.style.setProperty("font-size","1.25rem"),P.style.setProperty("font-weight","600"),P.style.setProperty("margin-bottom","0.5rem"),P.style.setProperty("color","var(--text-primary)"),g.style.setProperty("color","var(--text-muted)"),g.style.setProperty("line-height","1.5"),g.style.setProperty("margin","0"),F.style.setProperty("margin-top","4rem"),F.style.setProperty("padding","2rem"),F.style.setProperty("background","white"),F.style.setProperty("border-radius","var(--border-radius)"),F.style.setProperty("box-shadow","var(--shadow-sm)"),V.style.setProperty("font-size","1.5rem"),V.style.setProperty("font-weight","600"),V.style.setProperty("margin-bottom","1.5rem"),V.style.setProperty("color","var(--text-primary)"),V.style.setProperty("text-align","center"),N.style.setProperty("display","grid"),N.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(250px, 1fr))"),N.style.setProperty("gap","1rem"),N.style.setProperty("text-align","center"),R.style.setProperty("padding","1rem"),R.style.setProperty("background","var(--background-secondary)"),R.style.setProperty("border-radius","var(--border-radius-sm)"),k.style.setProperty("color","var(--text-muted)"),D.style.setProperty("padding","1rem"),D.style.setProperty("background","var(--background-secondary)"),D.style.setProperty("border-radius","var(--border-radius-sm)"),_.style.setProperty("color","var(--text-muted)"),v.style.setProperty("padding","1rem"),v.style.setProperty("background","var(--background-secondary)"),v.style.setProperty("border-radius","var(--border-radius-sm)"),A.style.setProperty("color","var(--text-muted)"),I.style.setProperty("padding","1rem"),I.style.setProperty("background","var(--background-secondary)"),I.style.setProperty("border-radius","var(--border-radius-sm)"),X.style.setProperty("color","var(--text-muted)"),t})();var eJ=le("<div><main>");const H4=t=>[T(QL,{}),Ve(()=>t.children)],io=t=>T(UA,{get children(){return T(H4,{get children(){return T(n$,{get permission(){return t.permission},get featureName(){return t.featureName},get children(){return t.children}})}})}}),tJ=()=>T(xL,{get children(){var t=eJ(),e=t.firstChild;return c(e,T(FE,{get children(){return[T($i,{path:"/sign/:id",component:Lz}),T($i,{path:"/",component:()=>T(UA,{get children(){return T(H4,{get children(){return T(vz,{})}})}})}),T($i,{path:"/accounts",component:()=>T(io,{permission:"AccountAccess",featureName:"Accounts",get children(){return T(q$,{})}})}),T($i,{path:"/accounts/:id",component:()=>T(io,{permission:"AccountAccess",featureName:"Account Details",get children(){return T(Z$,{})}})}),T($i,{path:"/entry-books",component:()=>T(io,{permission:"JournalAccess",featureName:"Entry Books",get children(){return T(JB,{})}})}),T($i,{path:"/employees",component:()=>T(io,{permission:"EmployeeAccess",featureName:"Employee Management",get children(){return T(XM,{})}})}),T($i,{path:"/bank-consolidations",component:()=>T(io,{permission:"BankingAccess",featureName:"Bank Consolidations",get children(){return T(CO,{})}})}),T($i,{path:"/balance-sheet",component:()=>T(io,{permission:"AccountAccess",featureName:"Balance Sheet",get children(){return T(nF,{})}})}),T($i,{path:"/invoices",component:()=>T(io,{permission:"invoiceAccess",featureName:"Invoices",get children(){return T(BH,{})}})}),T($i,{path:"/inventory",component:()=>T(io,{permission:"InventoryAccess",featureName:"Inventory Management",get children(){return T(VM,{})}})}),T($i,{path:"/products",component:()=>T(io,{permission:"InventoryAccess",featureName:"Product Management",get children(){return T(qA,{})}})}),T($i,{path:"/hbl",component:()=>T(io,{permission:"HBLAccess",featureName:"HBL Management",get children(){return T(oz,{})}})}),T($i,{path:"/cuban-passport",component:()=>T(io,{permission:"PassportAccess",featureName:"Cuban Passport Application",get children(){return T(ZZ,{})}})}),T($i,{path:"/pdf-signature",component:()=>T(io,{permission:"PassportAccess",featureName:"PDF Signature Integration",get children(){return T(QZ,{})}})}),T($i,{path:"/signature-requests",component:()=>T(io,{permission:"PassportAccess",featureName:"Signature Request Management",get children(){return T(Xz,{})}})}),T($i,{path:"/admin/users",component:()=>T(io,{permission:"isAdmin",featureName:"User Administration",get children(){return T(cU,{})}})}),T($i,{path:"/automation",component:()=>T(io,{permission:"AccountAccess",featureName:"Manual Automation",get children(){return T(xW,{})}})}),T($i,{path:"/event-automation",component:()=>T(io,{permission:"AccountAccess",featureName:"Event Automation",get children(){return T(kG,{})}})})]}})),c(t,(()=>{var r=Ve(()=>!1);return()=>r()&&T(h$,{})})(),null),t}}),rJ=document.getElementById("root");Dw(()=>T(tJ,{}),rJ);export{gr as E,Qo as _,Rn as a,aJ as b,lJ as c,BK as g,At as i,y3 as j};
