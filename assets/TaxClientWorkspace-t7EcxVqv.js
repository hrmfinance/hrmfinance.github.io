import{c as Ne,D as Ft,ar as Wt,a,t as y,i as e,X as Dt,S as $,b as z,W as bt,w as qe,aC as Ct,d as $t,g as zt,j as t,B as Pt,Z as dr,k as ct,F as pt,P as yr,h as cr,a3 as Kt,e as Jt,aD as xt,aE as St,v as Tt,aa as ur,G as pr,o as gr}from"./index-BnkqGl0R.js";import{d as Ut,n as jt,o as mr,p as vr,g as hr,u as fr}from"./taxPortalApi-Bp8ahsfr.js";import{p as Vt,d as br,v as xr,u as Pr,g as $r}from"./taxDocumentApi-JL7et1pI.js";import{D as kt,a as Sr,F as wr}from"./drakeTypes-DcjcYEfx.js";import{S as _r}from"./SignatureValidationView-gAOqsVde.js";import{F as Cr,a as zr,f as Tr,b as Rt,c as kr,D as Ir}from"./drakeFieldMappings-DyaT91Ke.js";var Nr=y("<img alt=QR>"),Dr=y("<div><div><div><span></span><button>×</button></div><div><div></div><pre></pre><div><button>Download</button><button>Copy"),Fr=y("<span>");const Zt=l=>{const[E,G]=Ne(""),[he,$e]=Ne(!1),fe=Fe=>{let Le=Fe;return l.convertPipeToTab&&(Le=Le.replace(/\|/g,"	")),l.toUpperCase&&(Le=Le.toUpperCase()),Le},Ae=async()=>{if(!l.qrText){G("");return}$e(!0);try{const Fe=fe(l.qrText),Le=await Ct.toDataURL(Fe,{width:300,margin:3,errorCorrectionLevel:"M",color:{dark:"#000000",light:"#ffffff"}});G(Le)}catch(Fe){console.error("QR generation error:",Fe),G("")}$e(!1)};Ft(Wt(()=>[l.isOpen,l.qrText],([Fe])=>{Fe&&Ae()}));const Be=()=>{const Fe=E();if(!Fe)return;const Le=document.createElement("a");Le.href=Fe,Le.download=`QR_${Date.now()}.png`,Le.click()},te=()=>l.qrText||"";return a($,{get when(){return l.isOpen},get children(){var Fe=Dr(),Le=Fe.firstChild,r=Le.firstChild,ce=r.firstChild,K=ce.nextSibling,L=r.nextSibling,Se=L.firstChild,b=Se.nextSibling,C=b.nextSibling,i=C.firstChild,be=i.nextSibling;return Fe.$$click=ue=>ue.target===ue.currentTarget&&l.onClose(),Fe.style.setProperty("position","fixed"),Fe.style.setProperty("inset","0"),Fe.style.setProperty("background","rgba(0,0,0,0.5)"),Fe.style.setProperty("display","flex"),Fe.style.setProperty("align-items","center"),Fe.style.setProperty("justify-content","center"),Fe.style.setProperty("z-index","9999"),Le.style.setProperty("background","white"),Le.style.setProperty("border-radius","12px"),Le.style.setProperty("width","380px"),Le.style.setProperty("max-width","95vw"),Le.style.setProperty("overflow","hidden"),r.style.setProperty("padding","1rem"),r.style.setProperty("background","#1e3a5f"),r.style.setProperty("color","white"),r.style.setProperty("display","flex"),r.style.setProperty("justify-content","space-between"),r.style.setProperty("align-items","center"),ce.style.setProperty("font-weight","600"),e(ce,()=>l.title||"QR Code"),Dt(K,"click",l.onClose,!0),K.style.setProperty("background","none"),K.style.setProperty("border","none"),K.style.setProperty("color","white"),K.style.setProperty("cursor","pointer"),K.style.setProperty("font-size","1.5rem"),L.style.setProperty("padding","1.25rem"),L.style.setProperty("text-align","center"),Se.style.setProperty("width","256px"),Se.style.setProperty("height","256px"),Se.style.setProperty("margin","0 auto"),Se.style.setProperty("background","#f5f5f5"),Se.style.setProperty("border-radius","8px"),Se.style.setProperty("display","flex"),Se.style.setProperty("align-items","center"),Se.style.setProperty("justify-content","center"),e(Se,a($,{get when(){return qe(()=>!he())()&&E()},get fallback(){return(()=>{var ue=Fr();return ue.style.setProperty("color","#999"),e(ue,()=>he()?"Generating...":"No data"),ue})()},get children(){var ue=Nr();return ue.style.setProperty("width","256px"),ue.style.setProperty("height","256px"),ue.style.setProperty("border-radius","8px"),z(()=>bt(ue,"src",E())),ue}})),b.style.setProperty("margin-top","1rem"),b.style.setProperty("padding","0.5rem"),b.style.setProperty("background","#f8fafc"),b.style.setProperty("border-radius","6px"),b.style.setProperty("font-size","0.7rem"),b.style.setProperty("text-align","left"),b.style.setProperty("max-height","70px"),b.style.setProperty("overflow","auto"),b.style.setProperty("white-space","pre-wrap"),b.style.setProperty("word-break","break-all"),e(b,te),C.style.setProperty("margin-top","1rem"),C.style.setProperty("display","flex"),C.style.setProperty("gap","0.5rem"),C.style.setProperty("justify-content","center"),i.$$click=Be,i.style.setProperty("padding","0.5rem 1.25rem"),i.style.setProperty("color","white"),i.style.setProperty("border","none"),i.style.setProperty("border-radius","6px"),be.$$click=()=>navigator.clipboard.writeText(te()),be.style.setProperty("padding","0.5rem 1.25rem"),be.style.setProperty("background","#f1f5f9"),be.style.setProperty("border","1px solid #ddd"),be.style.setProperty("border-radius","6px"),be.style.setProperty("cursor","pointer"),z(ue=>{var D=!E(),pe=E()?"#3b82f6":"#ccc",m=E()?"pointer":"not-allowed";return D!==ue.e&&(i.disabled=ue.e=D),pe!==ue.t&&((ue.t=pe)!=null?i.style.setProperty("background",pe):i.style.removeProperty("background")),m!==ue.a&&((ue.a=m)!=null?i.style.setProperty("cursor",m):i.style.removeProperty("cursor")),ue},{e:void 0,t:void 0,a:void 0}),Fe}})};$t(["click"]);var Ar=y('<svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"clip-rule=evenodd>'),Lr=y('<svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"clip-rule=evenodd>'),Rr=y('<svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"clip-rule=evenodd>'),Mr=y('<svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"clip-rule=evenodd>'),Er=y("<div><div></div><span> Analyzing"),Br=y("<div><div></div><span> Errors"),Or=y('<div><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"clip-rule=evenodd>'),Ur=y('<div><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"clip-rule=evenodd>'),Wr=y("<div><table><thead><tr><th>Document</th><th>Type</th><th>Status</th><th>Size</th><th>Uploaded</th><th>Actions</th></tr></thead><tbody>"),jr=y("<div><div>No documents yet</div><div>Upload tax documents using the drop zone above</div><div>Or request documents from your client"),Vr=y("<div><span>Confidence: </span><span>%"),vt=y("<div>"),Hr=y("<div><div>AI Analysis</div><div>"),wt=y("<div>EIN: "),qr=y("<div><div>Box 1 - Wages</div><div>$"),Yr=y("<div><div>Box 2 - Federal Tax Withheld</div><div>$"),Xr=y("<div><div>Box 3 - SS Wages</div><div>$"),Qr=y("<div><div>Box 4 - SS Tax Withheld</div><div>$"),Gr=y("<div><div>Box 5 - Medicare Wages</div><div>$"),Kr=y("<div><div>Box 6 - Medicare Tax Withheld</div><div>$"),Jr=y("<div><div>Box 17 - State Tax Withheld</div><div>$"),Zr=y("<div><div>Box 16 - State Wages</div><div>$"),en=y("<div><div><span>W-2</span>Employer Information</div><div></div><div>Wage & Tax Information</div><div>"),tn=y("<div><div><span>1099-NEC</span>Payer Information</div><div></div><div>Nonemployee Compensation</div><div><div>Box 1 - Nonemployee Compensation</div><div>$"),rn=y("<div><div>Box 1 - Rents</div><div>$"),nn=y("<div><div>Box 2 - Royalties</div><div>$"),ln=y("<div><div>Box 3 - Other Income</div><div>$"),on=y("<div><div><span>1099-MISC</span>Payer Information</div><div></div><div>Miscellaneous Income</div><div>"),sn=y("<div><div><span>1099-INT</span>Payer Information</div><div></div><div>Interest Income</div><div><div>Box 1 - Interest Income</div><div>$"),an=y("<div><div>Box 1a - Ordinary Dividends</div><div>$"),dn=y("<div><div>Box 1b - Qualified Dividends</div><div>$"),yn=y("<div><div>Box 2a - Capital Gains</div><div>$"),cn=y("<div><div><span>1099-DIV</span>Payer Information</div><div></div><div>Dividend Income</div><div>"),un=y("<div><div>Box 1 - Mortgage Interest</div><div>$"),pn=y("<div><div>Box 10 - Property Taxes</div><div>$"),gn=y("<div><div>Box 5 - Mortgage Insurance</div><div>$"),mn=y("<div><div><span>1098</span>Lender Information</div><div></div><div>Mortgage Interest Statement</div><div>"),vn=y("<div><div>Box 1 - Payments Received</div><div>$"),hn=y("<div><div>Box 5 - Scholarships/Grants</div><div>$"),fn=y("<div><div><span>1098-T</span>Educational Institution</div><div></div><div>Tuition Statement</div><div>"),bn=y("<div><div>Extracted Amounts</div><div>"),xn=y("<div><strong>Error:</strong> "),Pn=y("<button>Verify"),$n=y('<div><div><div><h3>Document Details</h3><button><svg width=20 height=20 viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"clip-rule=evenodd></path></svg></button></div><div><div><div><div></div><div><div></div><div> • </div></div></div></div><div><div><div>Status</div><div><span></span></div></div><div><div>Document Type</div><div></div></div></div></div><div><button>Archivar'),Sn=y(`<div><div><div><h3>Documents</h3><div><div><div></div><span> Verified</span></div><div><div></div><span> Needs Review</span></div></div></div><div></div></div><div><input type=file multiple accept=.pdf,.jpg,.jpeg,.png><div></div><div></div><div>Accepts PDF, JPG, PNG (W-2, 1099, 1098, K-1, receipts)</div></div><style>
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `),wn=y('<button title="Re-analyze document">Analyze'),_n=y('<tr><td><div><div></div><div></div></div></td><td><span></span></td><td><span></span></td><td><span></span></td><td><span></span></td><td><div><button title="View document">View</button><button title="Delete document">Delete'),Cn=y("<div><div></div><div>$");const zn=["application/pdf","image/jpeg","image/png"],Tn=l=>{const[E,G]=Ne(!1),[he,$e]=Ne(!1),[fe,Ae]=Ne(null),[Be,te]=Ne(null),[Fe,Le]=Ne(!1),[r,ce]=Ne(null),[K,L]=Ne(!1),[Se,b]=Ne(""),C=()=>l.client?.id||l.taxPortal?.id||l.taxPortalId||"",i=()=>l.client||l.taxPortal,be=()=>l.taxYear||new Date().getFullYear(),ue=()=>{l.onRefresh?.()};let D;const pe=n=>n.uploadStatus==="error"?"error":n.uploadStatus==="analyzing"||n.uploadStatus==="uploading"?"analyzing":n.verified?"verified":(n.uploadStatus==="analyzed","needs_review"),m=zt(()=>{const n=l.documents;return{total:n.length,verified:n.filter(o=>o.verified).length,needsReview:n.filter(o=>!o.verified&&o.uploadStatus==="analyzed").length,analyzing:n.filter(o=>o.uploadStatus==="analyzing"||o.uploadStatus==="uploading").length,errors:n.filter(o=>o.uploadStatus==="error").length}}),je=n=>n?n<1024?`${n} B`:n<1024*1024?`${(n/1024).toFixed(1)} KB`:`${(n/(1024*1024)).toFixed(1)} MB`:"-",Re=n=>n?new Date(n).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-",ae=n=>({verified:{label:"Verified",color:"#22c55e",bg:"rgba(34, 197, 94, 0.1)"},needs_review:{label:"Needs Review",color:"#f59e0b",bg:"rgba(245, 158, 11, 0.1)"},missing:{label:"Missing",color:"#ef4444",bg:"rgba(239, 68, 68, 0.1)"},analyzing:{label:"Analyzing...",color:"#3b82f6",bg:"rgba(59, 130, 246, 0.1)"},error:{label:"Error",color:"#ef4444",bg:"rgba(239, 68, 68, 0.1)"}})[n],ke=async n=>{const o=Array.from(n).filter(h=>zn.includes(h.type));if(o.length===0){Ae("Please select PDF, JPG, or PNG files");return}$e(!0),Ae(null);try{for(const h of o){const u=await Pr(h,C(),be());if(u.success&&u.documentId)await Vt(u.documentId);else throw new Error(u.error||"Upload failed")}te(`Successfully uploaded ${o.length} document(s)`),setTimeout(()=>te(null),3e3),ue()}catch(h){Ae(h.message)}finally{$e(!1)}},we=n=>{n.preventDefault(),G(!1),n.dataTransfer?.files&&ke(n.dataTransfer.files)},Ve=n=>{const o=n.target;o.files&&ke(o.files),o.value=""},ze=n=>{ce(n)},de=n=>{n.fileUrl&&window.open(n.fileUrl,"_blank")},W=()=>{ce(null)},Q=n=>{const o=n.extractedAmounts||{},h=n.payerInfo||{};switch(n.drakeFormType){case"w2":return[h.ein?.split("-")?.[0]||"",h.ein?.split("-")?.[1]||"","|",h.name||"","|",h.address||"","|","|",h.zip||"","|","|","|","|","|",o.wages||"","|",o.wages||"","|",o.federalTaxWithheld||"","|",o.federalTaxWithheld||"","|",o.socialSecurityWages||"","|",o.socialSecurityTax||"","|",o.medicareWages||"","|",o.medicareTax||"","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|","|",o.stateWages||"","|",o.stateWages||"","|",o.stateTaxWithheld||"","|",o.stateTaxWithheld||"","|"].join("");case"1099_nec":return[h?.ein||"","|","|",h?.name||"","|","|",h?.address||"","|",h?.zip?.split("-")?.[0]||"","|","|","|","|","|","|","|","|","|","|","|","|","|",o.nonEmployeeCompensation||"888","|","|","|","|",o.federalTaxWithheld||"","|"].join("");case"1099_misc":return[h.ein||"","|",h.name||"","|",h.address||"","|",h.zip||"","|",o.rents||"","|",o.royalties||"","|",o.otherIncome||"","|",o.federalTaxWithheld||"","|"].join("");case"1099_int":return[h.ein||"",h.name||"",h.address||"",h.city||"",h.state||"",h.zip||"",o.interestIncome||"",o.federalTaxWithheld||""].join("|");case"1099_div":return[h.ein||"",h.name||"",h.address||"",h.city||"",h.state||"",h.zip||"",o.ordinaryDividends||"",o.qualifiedDividends||"",o.capitalGains||"",o.federalTaxWithheld||""].join("|");case"1098":return[h.ein||"",h.name||"",h.address||"",h.city||"",h.state||"",h.zip||"",o.mortgageInterest||"",o.mortgageInsurance||"",o.propertyTaxes||""].join("|");case"1098_t":return[h.ein||"",h.name||"",h.address||"",h.city||"",h.state||"",h.zip||"",o.tuitionPaid||"",o.scholarshipsGrants||""].join("|");default:const u=Object.entries(o).filter(([S,T])=>T!=null).map(([S,T])=>T);return[h.ein||"",h.name||"",...u].join("|")}},le=n=>{const o=Q(n);b(o),L(!0)},_e=async n=>{try{const o=await xr(n.id);if(o.success){const h={...n,verified:!0,verifiedAt:Date.now()};ce(h),te("Document verified successfully"),setTimeout(()=>te(null),3e3),ue()}else Ae(o.error||"Failed to verify document")}catch(o){Ae(o.message)}},Xe=async n=>{try{const o=await yr({query:"updateTaxDocument",params:{businessId:cr.getBusinessId(),id:n?.id},form:{taxPortalId:"archive_hrm",clientNotaryId:"archive_hrm"}});o.success?(te("Document verified successfully"),setTimeout(()=>te(null),3e3),ue()):Ae(o.error||"Failed to verify document")}catch(o){Ae(o.message)}},Je=async n=>{try{await Vt(n.id),ue(),te("Document sent for analysis"),setTimeout(()=>te(null),3e3)}catch(o){Ae(o.message)}},ft=async n=>{if(confirm("Are you sure you want to delete this document?"))try{await br(n.id),ue(),te("Document deleted"),setTimeout(()=>te(null),3e3)}catch(o){Ae(o.message)}},gt=async()=>{const n=i();if(!n){Ae("Tax portal information not available");return}Le(!0);try{await Ut(n,{taxYear:be(),instructions:"Please upload the requested tax documents."}),te("Document request sent to client"),setTimeout(()=>te(null),3e3)}catch(o){Ae(o.message)}finally{Le(!1)}},mt={display:"flex","flex-direction":"column",gap:"1.5rem"},st={display:"flex","justify-content":"space-between","align-items":"center","flex-wrap":"wrap",gap:"1rem"},ut={"font-size":"1.25rem","font-weight":"600",color:"var(--text-primary, #1f2937)",margin:"0"},Me={display:"flex",gap:"1.5rem","flex-wrap":"wrap","margin-top":"0.5rem"},J={display:"flex","align-items":"center",gap:"0.5rem","font-size":"0.875rem"},w=n=>({width:"8px",height:"8px","border-radius":"50%",background:n}),I=n=>({border:`2px dashed ${n?"var(--primary-color, #3b82f6)":"var(--border-color, #e5e7eb)"}`,"border-radius":"12px",padding:"2rem","text-align":"center",background:n?"rgba(59, 130, 246, 0.05)":"var(--surface-alt, #f9fafb)",transition:"all 0.2s ease",cursor:"pointer"}),Z={"overflow-x":"auto","border-radius":"8px",border:"1px solid var(--border-color, #e5e7eb)"},Oe={width:"100%","border-collapse":"collapse","font-size":"0.875rem"},Ye={padding:"0.75rem 1rem","text-align":"left","font-weight":"600","font-size":"0.75rem","text-transform":"uppercase","letter-spacing":"0.05em",color:"var(--text-secondary, #6b7280)",background:"var(--surface-alt, #f9fafb)","border-bottom":"1px solid var(--border-color, #e5e7eb)"},Ge={padding:"0.75rem 1rem","border-bottom":"1px solid var(--border-color, #e5e7eb)","vertical-align":"middle"},Ue=n=>({display:"inline-flex","align-items":"center",gap:"0.375rem",padding:"0.25rem 0.625rem","border-radius":"9999px",background:n.bg,color:n.color,"font-size":"0.75rem","font-weight":"600"}),nt={padding:"0.375rem 0.625rem",background:"transparent",border:"1px solid var(--border-color, #e5e7eb)","border-radius":"6px",cursor:"pointer","font-size":"0.75rem",color:"var(--text-secondary, #6b7280)",transition:"all 0.2s ease",display:"inline-flex","align-items":"center",gap:"0.25rem"},lt={...nt,background:"var(--primary-color, #3b82f6)","border-color":"var(--primary-color, #3b82f6)",color:"white"},De=n=>({padding:"0.75rem 1rem","border-radius":"8px","font-size":"0.875rem",background:n==="success"?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",color:n==="success"?"#22c55e":"#ef4444",border:`1px solid ${n==="success"?"#22c55e":"#ef4444"}`,display:"flex","align-items":"center",gap:"0.5rem"}),Ke={"text-align":"center",padding:"3rem",color:"var(--text-secondary, #6b7280)"},v={width:"32px",height:"32px",display:"flex","align-items":"center","justify-content":"center",background:"var(--surface-alt, #f3f4f6)","border-radius":"6px","font-size":"0.75rem","font-weight":"600"},p={"font-weight":"500",color:"var(--text-primary, #1f2937)","max-width":"250px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"},R={display:"inline-block",padding:"0.125rem 0.5rem",background:"var(--surface-alt, #f3f4f6)","border-radius":"4px","font-size":"0.75rem",color:"var(--text-secondary, #6b7280)"},M=n=>{switch(n){case"verified":return(()=>{var o=Ar();return o.style.setProperty("width","14px"),o.style.setProperty("height","14px"),o})();case"needs_review":return(()=>{var o=Lr();return o.style.setProperty("width","14px"),o.style.setProperty("height","14px"),o})();case"analyzing":return(()=>{var o=Rr();return o.style.setProperty("width","14px"),o.style.setProperty("height","14px"),o.style.setProperty("animation","spin 1s linear infinite"),o})();case"error":case"missing":return(()=>{var o=Mr();return o.style.setProperty("width","14px"),o.style.setProperty("height","14px"),o})();default:return null}},V=n=>n?.includes("pdf")?"PDF":n?.includes("image")?"IMG":"DOC";return(()=>{var n=Sn(),o=n.firstChild,h=o.firstChild,u=h.firstChild,S=u.nextSibling,T=S.firstChild,g=T.firstChild,c=g.nextSibling,Y=c.firstChild,oe=T.nextSibling,xe=oe.firstChild,re=xe.nextSibling,Te=re.firstChild,j=h.nextSibling,Pe=o.nextSibling,H=Pe.firstChild,P=H.nextSibling,_=P.nextSibling,ee=_.nextSibling,N=Pe.nextSibling;t(u,ut),e(c,()=>m().verified,Y),e(re,()=>m().needsReview,Te),e(S,a($,{get when(){return m().analyzing>0},get children(){var F=Er(),q=F.firstChild,O=q.nextSibling,f=O.firstChild;return e(O,()=>m().analyzing,f),z(ye=>{var me=J,Ie=w("#3b82f6");return ye.e=t(F,me,ye.e),ye.t=t(q,Ie,ye.t),ye},{e:void 0,t:void 0}),F}}),null),e(S,a($,{get when(){return m().errors>0},get children(){var F=Br(),q=F.firstChild,O=q.nextSibling,f=O.firstChild;return e(O,()=>m().errors,f),z(ye=>{var me=J,Ie=w("#ef4444");return ye.e=t(F,me,ye.e),ye.t=t(q,Ie,ye.t),ye},{e:void 0,t:void 0}),F}}),null),j.style.setProperty("display","flex"),j.style.setProperty("gap","0.5rem"),e(j,a(Pt,{variant:"secondary",size:"sm",onClick:ue,children:"Refresh"}),null),e(j,a($,{get when(){return i()},get children(){return a(Pt,{variant:"secondary",size:"sm",onClick:gt,get disabled(){return Fe()},get children(){return Fe()?"Sending...":"Request from Client"}})}}),null),e(n,a($,{get when(){return fe()},get children(){var F=Or(),q=F.firstChild;return q.style.setProperty("width","16px"),q.style.setProperty("height","16px"),e(F,fe,null),z(O=>t(F,De("error"),O)),F}}),Pe),e(n,a($,{get when(){return Be()},get children(){var F=Ur(),q=F.firstChild;return q.style.setProperty("width","16px"),q.style.setProperty("height","16px"),e(F,Be,null),z(O=>t(F,De("success"),O)),F}}),Pe),Pe.$$click=()=>D?.click(),Pe.addEventListener("drop",we),Pe.addEventListener("dragleave",()=>G(!1)),Pe.addEventListener("dragover",F=>{F.preventDefault(),G(!0)}),H.addEventListener("change",Ve);var ge=D;return typeof ge=="function"?dr(ge,H):D=H,H.style.setProperty("display","none"),P.style.setProperty("font-size","2.5rem"),P.style.setProperty("margin-bottom","0.75rem"),e(P,()=>E()?"Drop files here":"Upload Documents"),_.style.setProperty("color","var(--text-secondary)"),_.style.setProperty("margin-bottom","1rem"),e(_,()=>E()?"Let go to upload":"Drag and drop your tax documents here, or click to browse"),e(Pe,a(Pt,{variant:"primary",get disabled(){return he()},get children(){return he()?"Uploading...":"Browse Files"}}),ee),ee.style.setProperty("font-size","0.75rem"),ee.style.setProperty("color","var(--text-muted)"),ee.style.setProperty("margin-top","0.75rem"),e(n,a($,{get when(){return l.documents.length>0},get children(){return a(ct,{get children(){var F=Wr(),q=F.firstChild,O=q.firstChild,f=O.firstChild,ye=f.firstChild,me=ye.nextSibling,Ie=me.nextSibling,B=Ie.nextSibling,Ee=B.nextSibling,U=Ee.nextSibling,d=O.nextSibling;return e(d,a(pt,{get each(){return l.documents},children:A=>{const se=pe(A),He=ae(se);return console.log(A),(()=>{var Qe=_n(),et=Qe.firstChild,it=et.firstChild,tt=it.firstChild,Ze=tt.nextSibling,rt=et.nextSibling,dt=rt.firstChild,at=rt.nextSibling,ot=at.firstChild,ie=at.nextSibling,ne=ie.firstChild,Ce=ie.nextSibling,X=Ce.firstChild,We=Ce.nextSibling,ve=We.firstChild,s=ve.firstChild,k=s.nextSibling;return it.style.setProperty("display","flex"),it.style.setProperty("align-items","center"),it.style.setProperty("gap","0.75rem"),t(tt,v),e(tt,()=>V(A.mimeType)),e(Ze,()=>A.originalFileName),t(dt,R),e(dt,()=>kt[A.drakeFormType||"other"]),e(ot,()=>M(se),null),e(ot,()=>He.label,null),ne.style.setProperty("color","var(--text-secondary)"),e(ne,()=>je(A.fileSize)),X.style.setProperty("color","var(--text-secondary)"),e(X,()=>Re(A.uploadedAt)),ve.style.setProperty("display","flex"),ve.style.setProperty("gap","0.5rem"),ve.style.setProperty("justify-content","flex-end"),s.$$click=()=>ze(A),e(ve,a($,{when:se!=="analyzing",get children(){var x=wn();return x.$$click=()=>Je(A),z(yt=>t(x,nt,yt)),x}}),k),k.$$click=()=>ft(A),z(x=>{var yt=A.verified?"rgba(34, 197, 94, 0.03)":"transparent",At=Ge,Lt=p,It=A.originalFileName,tr=Ge,rr=Ge,nr=Ue(He),lr=Ge,ir=Ge,or={...Ge,"text-align":"right"},sr=lt,ar={...nt,color:"#ef4444"};return yt!==x.e&&((x.e=yt)!=null?Qe.style.setProperty("background",yt):Qe.style.removeProperty("background")),x.t=t(et,At,x.t),x.a=t(Ze,Lt,x.a),It!==x.o&&bt(Ze,"title",x.o=It),x.i=t(rt,tr,x.i),x.n=t(at,rr,x.n),x.s=t(ot,nr,x.s),x.h=t(ie,lr,x.h),x.r=t(Ce,ir,x.r),x.d=t(We,or,x.d),x.l=t(s,sr,x.l),x.u=t(k,ar,x.u),x},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),Qe})()}})),z(A=>{var se=Z,He=Oe,Qe=Ye,et=Ye,it=Ye,tt=Ye,Ze=Ye,rt={...Ye,"text-align":"right"};return A.e=t(F,se,A.e),A.t=t(q,He,A.t),A.a=t(ye,Qe,A.a),A.o=t(me,et,A.o),A.i=t(Ie,it,A.i),A.n=t(B,tt,A.n),A.s=t(Ee,Ze,A.s),A.h=t(U,rt,A.h),A},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),F}})}}),N),e(n,a($,{get when(){return l.documents.length===0},get children(){return a(ct,{get children(){var F=jr(),q=F.firstChild,O=q.nextSibling,f=O.nextSibling;return q.style.setProperty("font-size","3rem"),q.style.setProperty("margin-bottom","1rem"),O.style.setProperty("font-size","1rem"),O.style.setProperty("margin-bottom","0.5rem"),f.style.setProperty("font-size","0.875rem"),z(ye=>t(F,Ke,ye)),F}})}}),N),e(n,a($,{get when(){return r()},get children(){var F=$n(),q=F.firstChild,O=q.firstChild,f=O.firstChild,ye=f.nextSibling,me=O.nextSibling,Ie=me.firstChild,B=Ie.firstChild,Ee=B.firstChild,U=Ee.nextSibling,d=U.firstChild,A=d.nextSibling,se=A.firstChild,He=Ie.nextSibling,Qe=He.firstChild,et=Qe.firstChild,it=et.nextSibling,tt=it.firstChild,Ze=Qe.nextSibling,rt=Ze.firstChild,dt=rt.nextSibling,at=me.nextSibling,ot=at.firstChild;return F.$$click=W,F.style.setProperty("position","fixed"),F.style.setProperty("top","0"),F.style.setProperty("left","0"),F.style.setProperty("right","0"),F.style.setProperty("bottom","0"),F.style.setProperty("background","rgba(0, 0, 0, 0.5)"),F.style.setProperty("display","flex"),F.style.setProperty("align-items","center"),F.style.setProperty("justify-content","center"),F.style.setProperty("z-index","1000"),F.style.setProperty("padding","1rem"),q.$$click=ie=>ie.stopPropagation(),q.style.setProperty("background","var(--surface-color, white)"),q.style.setProperty("border-radius","12px"),q.style.setProperty("max-width","900px"),q.style.setProperty("width","100%"),q.style.setProperty("max-height","90vh"),q.style.setProperty("overflow","auto"),q.style.setProperty("box-shadow","0 25px 50px -12px rgba(0, 0, 0, 0.25)"),O.style.setProperty("display","flex"),O.style.setProperty("justify-content","space-between"),O.style.setProperty("align-items","center"),O.style.setProperty("padding","1.25rem 1.5rem"),O.style.setProperty("border-bottom","1px solid var(--border-color, #e5e7eb)"),f.style.setProperty("margin","0"),f.style.setProperty("font-size","1.125rem"),f.style.setProperty("font-weight","600"),ye.$$click=W,ye.style.setProperty("background","transparent"),ye.style.setProperty("border","none"),ye.style.setProperty("cursor","pointer"),ye.style.setProperty("padding","0.5rem"),ye.style.setProperty("border-radius","6px"),ye.style.setProperty("display","flex"),ye.style.setProperty("align-items","center"),ye.style.setProperty("justify-content","center"),me.style.setProperty("padding","1.5rem"),Ie.style.setProperty("margin-bottom","1.5rem"),B.style.setProperty("display","flex"),B.style.setProperty("align-items","center"),B.style.setProperty("gap","1rem"),Ee.style.setProperty("width","48px"),Ee.style.setProperty("height","48px"),Ee.style.setProperty("display","flex"),Ee.style.setProperty("align-items","center"),Ee.style.setProperty("justify-content","center"),Ee.style.setProperty("background","var(--surface-alt, #f3f4f6)"),Ee.style.setProperty("border-radius","8px"),Ee.style.setProperty("font-weight","600"),Ee.style.setProperty("color","var(--primary-color, #3b82f6)"),e(Ee,()=>V(r()?.mimeType)),d.style.setProperty("font-weight","600"),d.style.setProperty("font-size","1rem"),e(d,()=>r()?.originalFileName),A.style.setProperty("font-size","0.875rem"),A.style.setProperty("color","var(--text-secondary)"),e(A,()=>je(r()?.fileSize),se),e(A,()=>Re(r()?.uploadedAt),null),He.style.setProperty("display","grid"),He.style.setProperty("grid-template-columns","1fr 1fr"),He.style.setProperty("gap","1rem"),He.style.setProperty("margin-bottom","1.5rem"),Qe.style.setProperty("padding","1rem"),Qe.style.setProperty("background","var(--surface-alt, #f9fafb)"),Qe.style.setProperty("border-radius","8px"),et.style.setProperty("font-size","0.75rem"),et.style.setProperty("color","var(--text-secondary)"),et.style.setProperty("margin-bottom","0.25rem"),et.style.setProperty("text-transform","uppercase"),it.style.setProperty("font-weight","500"),e(tt,()=>M(pe(r())),null),e(tt,()=>ae(pe(r())).label,null),Ze.style.setProperty("padding","1rem"),Ze.style.setProperty("background","var(--surface-alt, #f9fafb)"),Ze.style.setProperty("border-radius","8px"),rt.style.setProperty("font-size","0.75rem"),rt.style.setProperty("color","var(--text-secondary)"),rt.style.setProperty("margin-bottom","0.25rem"),rt.style.setProperty("text-transform","uppercase"),dt.style.setProperty("font-weight","500"),e(dt,()=>kt[r()?.drakeFormType||"other"]),e(me,a($,{get when(){return r()?.aiAnalysis},get children(){var ie=Hr(),ne=ie.firstChild,Ce=ne.nextSibling;return ie.style.setProperty("margin-bottom","1.5rem"),ne.style.setProperty("font-weight","600"),ne.style.setProperty("margin-bottom","0.75rem"),Ce.style.setProperty("padding","1rem"),Ce.style.setProperty("background","rgba(139, 92, 246, 0.05)"),Ce.style.setProperty("border","1px solid rgba(139, 92, 246, 0.2)"),Ce.style.setProperty("border-radius","8px"),e(Ce,a($,{get when(){return r()?.aiAnalysis?.confidence},get children(){var X=Vr(),We=X.firstChild,ve=We.nextSibling,s=ve.firstChild;return X.style.setProperty("margin-bottom","0.5rem"),We.style.setProperty("color","var(--text-secondary)"),We.style.setProperty("font-size","0.875rem"),ve.style.setProperty("font-weight","500"),e(ve,()=>Math.round((r()?.aiAnalysis?.confidence||0)*100),s),X}}),null),e(Ce,a($,{get when(){return r()?.aiAnalysis?.summary},get children(){var X=vt();return X.style.setProperty("font-size","0.875rem"),X.style.setProperty("color","var(--text-secondary)"),e(X,()=>r()?.aiAnalysis?.summary),X}}),null),ie}}),null),e(me,a($,{get when(){return r()?.drakeFormType==="w2"},get children(){var ie=en(),ne=ie.firstChild,Ce=ne.firstChild,X=ne.nextSibling,We=X.nextSibling,ve=We.nextSibling;return ie.style.setProperty("margin-bottom","1.5rem"),ne.style.setProperty("font-weight","600"),ne.style.setProperty("margin-bottom","0.75rem"),ne.style.setProperty("display","flex"),ne.style.setProperty("align-items","center"),ne.style.setProperty("gap","0.5rem"),Ce.style.setProperty("background","#3b82f6"),Ce.style.setProperty("color","white"),Ce.style.setProperty("padding","0.125rem 0.5rem"),Ce.style.setProperty("border-radius","4px"),Ce.style.setProperty("font-size","0.75rem"),X.style.setProperty("padding","1rem"),X.style.setProperty("background","rgba(59, 130, 246, 0.05)"),X.style.setProperty("border","1px solid rgba(59, 130, 246, 0.2)"),X.style.setProperty("border-radius","8px"),X.style.setProperty("margin-bottom","1rem"),e(X,a($,{get when(){return r()?.payerInfo?.name},get children(){var s=vt();return s.style.setProperty("font-weight","600"),s.style.setProperty("font-size","1rem"),s.style.setProperty("margin-bottom","0.25rem"),e(s,()=>r()?.payerInfo?.name),s}}),null),e(X,a($,{get when(){return r()?.payerInfo?.ein},get children(){var s=wt();return s.firstChild,s.style.setProperty("font-size","0.875rem"),s.style.setProperty("color","var(--text-secondary)"),e(s,()=>r()?.payerInfo?.ein,null),s}}),null),e(X,a($,{get when(){return r()?.payerInfo?.address||r()?.payerInfo?.city},get children(){var s=vt();return s.style.setProperty("font-size","0.875rem"),s.style.setProperty("color","var(--text-secondary)"),s.style.setProperty("margin-top","0.25rem"),e(s,()=>r()?.payerInfo?.address,null),e(s,(()=>{var k=qe(()=>!!r()?.payerInfo?.city);return()=>k()&&`, ${r()?.payerInfo?.city}`})(),null),e(s,(()=>{var k=qe(()=>!!r()?.payerInfo?.state);return()=>k()&&`, ${r()?.payerInfo?.state}`})(),null),e(s,(()=>{var k=qe(()=>!!r()?.payerInfo?.zip);return()=>k()&&` ${r()?.payerInfo?.zip}`})(),null),s}}),null),We.style.setProperty("font-weight","600"),We.style.setProperty("margin-bottom","0.75rem"),ve.style.setProperty("display","grid"),ve.style.setProperty("grid-template-columns","repeat(2, 1fr)"),ve.style.setProperty("gap","0.5rem"),e(ve,a($,{get when(){return r()?.extractedAmounts?.wages!==void 0},get children(){var s=qr(),k=s.firstChild,x=k.nextSibling;return x.firstChild,s.style.setProperty("padding","0.75rem"),s.style.setProperty("background","var(--surface-alt, #f9fafb)"),s.style.setProperty("border-radius","6px"),k.style.setProperty("font-size","0.75rem"),k.style.setProperty("color","var(--text-secondary)"),x.style.setProperty("font-weight","600"),x.style.setProperty("font-size","1.125rem"),x.style.setProperty("color","#22c55e"),e(x,()=>(r()?.extractedAmounts?.wages||0).toLocaleString("en-US",{minimumFractionDigits:2}),null),s}}),null),e(ve,a($,{get when(){return r()?.extractedAmounts?.federalTaxWithheld!==void 0},get children(){var s=Yr(),k=s.firstChild,x=k.nextSibling;return x.firstChild,s.style.setProperty("padding","0.75rem"),s.style.setProperty("background","var(--surface-alt, #f9fafb)"),s.style.setProperty("border-radius","6px"),k.style.setProperty("font-size","0.75rem"),k.style.setProperty("color","var(--text-secondary)"),x.style.setProperty("font-weight","600"),x.style.setProperty("font-size","1.125rem"),x.style.setProperty("color","#ef4444"),e(x,()=>(r()?.extractedAmounts?.federalTaxWithheld||0).toLocaleString("en-US",{minimumFractionDigits:2}),null),s}}),null),e(ve,a($,{get when(){return r()?.extractedAmounts?.socialSecurityWages!==void 0},get children(){var s=Xr(),k=s.firstChild,x=k.nextSibling;return x.firstChild,s.style.setProperty("padding","0.75rem"),s.style.setProperty("background","var(--surface-alt, #f9fafb)"),s.style.setProperty("border-radius","6px"),k.style.setProperty("font-size","0.75rem"),k.style.setProperty("color","var(--text-secondary)"),x.style.setProperty("font-weight","600"),e(x,()=>(r()?.extractedAmounts?.socialSecurityWages||0).toLocaleString("en-US",{minimumFractionDigits:2}),null),s}}),null),e(ve,a($,{get when(){return r()?.extractedAmounts?.socialSecurityTax!==void 0},get children(){var s=Qr(),k=s.firstChild,x=k.nextSibling;return x.firstChild,s.style.setProperty("padding","0.75rem"),s.style.setProperty("background","var(--surface-alt, #f9fafb)"),s.style.setProperty("border-radius","6px"),k.style.setProperty("font-size","0.75rem"),k.style.setProperty("color","var(--text-secondary)"),x.style.setProperty("font-weight","600"),e(x,()=>(r()?.extractedAmounts?.socialSecurityTax||0).toLocaleString("en-US",{minimumFractionDigits:2}),null),s}}),null),e(ve,a($,{get when(){return r()?.extractedAmounts?.medicareWages!==void 0},get children(){var s=Gr(),k=s.firstChild,x=k.nextSibling;return x.firstChild,s.style.setProperty("padding","0.75rem"),s.style.setProperty("background","var(--surface-alt, #f9fafb)"),s.style.setProperty("border-radius","6px"),k.style.setProperty("font-size","0.75rem"),k.style.setProperty("color","var(--text-secondary)"),x.style.setProperty("font-weight","600"),e(x,()=>(r()?.extractedAmounts?.medicareWages||0).toLocaleString("en-US",{minimumFractionDigits:2}),null),s}}),null),e(ve,a($,{get when(){return r()?.extractedAmounts?.medicareTax!==void 0},get children(){var s=Kr(),k=s.firstChild,x=k.nextSibling;return x.firstChild,s.style.setProperty("padding","0.75rem"),s.style.setProperty("background","var(--surface-alt, #f9fafb)"),s.style.setProperty("border-radius","6px"),k.style.setProperty("font-size","0.75rem"),k.style.setProperty("color","var(--text-secondary)"),x.style.setProperty("font-weight","600"),e(x,()=>(r()?.extractedAmounts?.medicareTax||0).toLocaleString("en-US",{minimumFractionDigits:2}),null),s}}),null),e(ve,a($,{get when(){return r()?.extractedAmounts?.stateTaxWithheld!==void 0},get children(){var s=Jr(),k=s.firstChild,x=k.nextSibling;return x.firstChild,s.style.setProperty("padding","0.75rem"),s.style.setProperty("background","var(--surface-alt, #f9fafb)"),s.style.setProperty("border-radius","6px"),k.style.setProperty("font-size","0.75rem"),k.style.setProperty("color","var(--text-secondary)"),x.style.setProperty("font-weight","600"),e(x,()=>(r()?.extractedAmounts?.stateTaxWithheld||0).toLocaleString("en-US",{minimumFractionDigits:2}),null),s}}),null),e(ve,a($,{get when(){return r()?.extractedAmounts?.stateWages!==void 0},get children(){var s=Zr(),k=s.firstChild,x=k.nextSibling;return x.firstChild,s.style.setProperty("padding","0.75rem"),s.style.setProperty("background","var(--surface-alt, #f9fafb)"),s.style.setProperty("border-radius","6px"),k.style.setProperty("font-size","0.75rem"),k.style.setProperty("color","var(--text-secondary)"),x.style.setProperty("font-weight","600"),e(x,()=>(r()?.extractedAmounts?.stateWages||0).toLocaleString("en-US",{minimumFractionDigits:2}),null),s}}),null),ie}}),null),e(me,a($,{get when(){return r()?.drakeFormType==="1099_nec"},get children(){var ie=tn(),ne=ie.firstChild,Ce=ne.firstChild,X=ne.nextSibling,We=X.nextSibling,ve=We.nextSibling,s=ve.firstChild,k=s.nextSibling;return k.firstChild,ie.style.setProperty("margin-bottom","1.5rem"),ne.style.setProperty("font-weight","600"),ne.style.setProperty("margin-bottom","0.75rem"),ne.style.setProperty("display","flex"),ne.style.setProperty("align-items","center"),ne.style.setProperty("gap","0.5rem"),Ce.style.setProperty("background","#8b5cf6"),Ce.style.setProperty("color","white"),Ce.style.setProperty("padding","0.125rem 0.5rem"),Ce.style.setProperty("border-radius","4px"),Ce.style.setProperty("font-size","0.75rem"),X.style.setProperty("padding","1rem"),X.style.setProperty("background","rgba(139, 92, 246, 0.05)"),X.style.setProperty("border","1px solid rgba(139, 92, 246, 0.2)"),X.style.setProperty("border-radius","8px"),X.style.setProperty("margin-bottom","1rem"),e(X,a($,{get when(){return r()?.payerInfo?.name},get children(){var x=vt();return x.style.setProperty("font-weight","600"),x.style.setProperty("font-size","1rem"),x.style.setProperty("margin-bottom","0.25rem"),e(x,()=>r()?.payerInfo?.name),x}}),null),e(X,a($,{get when(){return r()?.payerInfo?.ein},get children(){var x=wt();return x.firstChild,x.style.setProperty("font-size","0.875rem"),x.style.setProperty("color","var(--text-secondary)"),e(x,()=>r()?.payerInfo?.ein,null),x}}),null),e(X,a($,{get when(){return r()?.payerInfo?.address||r()?.payerInfo?.city},get children(){var x=vt();return x.style.setProperty("font-size","0.875rem"),x.style.setProperty("color","var(--text-secondary)"),x.style.setProperty("margin-top","0.25rem"),e(x,()=>r()?.payerInfo?.address,null),e(x,(()=>{var yt=qe(()=>!!r()?.payerInfo?.city);return()=>yt()&&`, ${r()?.payerInfo?.city}`})(),null),e(x,(()=>{var yt=qe(()=>!!r()?.payerInfo?.state);return()=>yt()&&`, ${r()?.payerInfo?.state}`})(),null),e(x,(()=>{var yt=qe(()=>!!r()?.payerInfo?.zip);return()=>yt()&&` ${r()?.payerInfo?.zip}`})(),null),x}}),null),We.style.setProperty("font-weight","600"),We.style.setProperty("margin-bottom","0.75rem"),ve.style.setProperty("padding","1.25rem"),ve.style.setProperty("background","linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(168, 85, 247, 0.1))"),ve.style.setProperty("border-radius","8px"),ve.style.setProperty("text-align","center"),s.style.setProperty("font-size","0.875rem"),s.style.setProperty("color","var(--text-secondary)"),s.style.setProperty("margin-bottom","0.25rem"),k.style.setProperty("font-size","2rem"),k.style.setProperty("font-weight","700"),k.style.setProperty("color","#8b5cf6"),e(k,()=>(r()?.extractedAmounts?.nonEmployeeCompensation||0).toLocaleString("en-US",{minimumFractionDigits:2}),null),ie}}),null),e(me,a($,{get when(){return r()?.drakeFormType==="1099_misc"},get children(){var ie=on(),ne=ie.firstChild,Ce=ne.firstChild,X=ne.nextSibling,We=X.nextSibling,ve=We.nextSibling;return ie.style.setProperty("margin-bottom","1.5rem"),ne.style.setProperty("font-weight","600"),ne.style.setProperty("margin-bottom","0.75rem"),ne.style.setProperty("display","flex"),ne.style.setProperty("align-items","center"),ne.style.setProperty("gap","0.5rem"),Ce.style.setProperty("background","#f59e0b"),Ce.style.setProperty("color","white"),Ce.style.setProperty("padding","0.125rem 0.5rem"),Ce.style.setProperty("border-radius","4px"),Ce.style.setProperty("font-size","0.75rem"),X.style.setProperty("padding","1rem"),X.style.setProperty("background","rgba(245, 158, 11, 0.05)"),X.style.setProperty("border","1px solid rgba(245, 158, 11, 0.2)"),X.style.setProperty("border-radius","8px"),X.style.setProperty("margin-bottom","1rem"),e(X,a($,{get when(){return r()?.payerInfo?.name},get children(){var s=vt();return s.style.setProperty("font-weight","600"),s.style.setProperty("font-size","1rem"),s.style.setProperty("margin-bottom","0.25rem"),e(s,()=>r()?.payerInfo?.name),s}}),null),e(X,a($,{get when(){return r()?.payerInfo?.ein},get children(){var s=wt();return s.firstChild,s.style.setProperty("font-size","0.875rem"),s.style.setProperty("color","var(--text-secondary)"),e(s,()=>r()?.payerInfo?.ein,null),s}}),null),e(X,a($,{get when(){return r()?.payerInfo?.address||r()?.payerInfo?.city},get children(){var s=vt();return s.style.setProperty("font-size","0.875rem"),s.style.setProperty("color","var(--text-secondary)"),s.style.setProperty("margin-top","0.25rem"),e(s,()=>r()?.payerInfo?.address,null),e(s,(()=>{var k=qe(()=>!!r()?.payerInfo?.city);return()=>k()&&`, ${r()?.payerInfo?.city}`})(),null),e(s,(()=>{var k=qe(()=>!!r()?.payerInfo?.state);return()=>k()&&`, ${r()?.payerInfo?.state}`})(),null),e(s,(()=>{var k=qe(()=>!!r()?.payerInfo?.zip);return()=>k()&&` ${r()?.payerInfo?.zip}`})(),null),s}}),null),We.style.setProperty("font-weight","600"),We.style.setProperty("margin-bottom","0.75rem"),ve.style.setProperty("display","grid"),ve.style.setProperty("grid-template-columns","repeat(2, 1fr)"),ve.style.setProperty("gap","0.5rem"),e(ve,a($,{get when(){return r()?.extractedAmounts?.rents!==void 0},get children(){var s=rn(),k=s.firstChild,x=k.nextSibling;return x.firstChild,s.style.setProperty("padding","0.75rem"),s.style.setProperty("background","var(--surface-alt, #f9fafb)"),s.style.setProperty("border-radius","6px"),k.style.setProperty("font-size","0.75rem"),k.style.setProperty("color","var(--text-secondary)"),x.style.setProperty("font-weight","600"),e(x,()=>(r()?.extractedAmounts?.rents||0).toLocaleString("en-US",{minimumFractionDigits:2}),null),s}}),null),e(ve,a($,{get when(){return r()?.extractedAmounts?.royalties!==void 0},get children(){var s=nn(),k=s.firstChild,x=k.nextSibling;return x.firstChild,s.style.setProperty("padding","0.75rem"),s.style.setProperty("background","var(--surface-alt, #f9fafb)"),s.style.setProperty("border-radius","6px"),k.style.setProperty("font-size","0.75rem"),k.style.setProperty("color","var(--text-secondary)"),x.style.setProperty("font-weight","600"),e(x,()=>(r()?.extractedAmounts?.royalties||0).toLocaleString("en-US",{minimumFractionDigits:2}),null),s}}),null),e(ve,a($,{get when(){return r()?.extractedAmounts?.otherIncome!==void 0},get children(){var s=ln(),k=s.firstChild,x=k.nextSibling;return x.firstChild,s.style.setProperty("padding","0.75rem"),s.style.setProperty("background","var(--surface-alt, #f9fafb)"),s.style.setProperty("border-radius","6px"),k.style.setProperty("font-size","0.75rem"),k.style.setProperty("color","var(--text-secondary)"),x.style.setProperty("font-weight","600"),e(x,()=>(r()?.extractedAmounts?.otherIncome||0).toLocaleString("en-US",{minimumFractionDigits:2}),null),s}}),null),ie}}),null),e(me,a($,{get when(){return r()?.drakeFormType==="1099_int"},get children(){var ie=sn(),ne=ie.firstChild,Ce=ne.firstChild,X=ne.nextSibling,We=X.nextSibling,ve=We.nextSibling,s=ve.firstChild,k=s.nextSibling;return k.firstChild,ie.style.setProperty("margin-bottom","1.5rem"),ne.style.setProperty("font-weight","600"),ne.style.setProperty("margin-bottom","0.75rem"),ne.style.setProperty("display","flex"),ne.style.setProperty("align-items","center"),ne.style.setProperty("gap","0.5rem"),Ce.style.setProperty("background","#22c55e"),Ce.style.setProperty("color","white"),Ce.style.setProperty("padding","0.125rem 0.5rem"),Ce.style.setProperty("border-radius","4px"),Ce.style.setProperty("font-size","0.75rem"),X.style.setProperty("padding","1rem"),X.style.setProperty("background","rgba(34, 197, 94, 0.05)"),X.style.setProperty("border","1px solid rgba(34, 197, 94, 0.2)"),X.style.setProperty("border-radius","8px"),X.style.setProperty("margin-bottom","1rem"),e(X,a($,{get when(){return r()?.payerInfo?.name},get children(){var x=vt();return x.style.setProperty("font-weight","600"),x.style.setProperty("font-size","1rem"),x.style.setProperty("margin-bottom","0.25rem"),e(x,()=>r()?.payerInfo?.name),x}}),null),e(X,a($,{get when(){return r()?.payerInfo?.ein},get children(){var x=wt();return x.firstChild,x.style.setProperty("font-size","0.875rem"),x.style.setProperty("color","var(--text-secondary)"),e(x,()=>r()?.payerInfo?.ein,null),x}}),null),e(X,a($,{get when(){return r()?.payerInfo?.address||r()?.payerInfo?.city},get children(){var x=vt();return x.style.setProperty("font-size","0.875rem"),x.style.setProperty("color","var(--text-secondary)"),x.style.setProperty("margin-top","0.25rem"),e(x,()=>r()?.payerInfo?.address,null),e(x,(()=>{var yt=qe(()=>!!r()?.payerInfo?.city);return()=>yt()&&`, ${r()?.payerInfo?.city}`})(),null),e(x,(()=>{var yt=qe(()=>!!r()?.payerInfo?.state);return()=>yt()&&`, ${r()?.payerInfo?.state}`})(),null),e(x,(()=>{var yt=qe(()=>!!r()?.payerInfo?.zip);return()=>yt()&&` ${r()?.payerInfo?.zip}`})(),null),x}}),null),We.style.setProperty("font-weight","600"),We.style.setProperty("margin-bottom","0.75rem"),ve.style.setProperty("padding","1.25rem"),ve.style.setProperty("background","linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(16, 185, 129, 0.1))"),ve.style.setProperty("border-radius","8px"),ve.style.setProperty("text-align","center"),s.style.setProperty("font-size","0.875rem"),s.style.setProperty("color","var(--text-secondary)"),s.style.setProperty("margin-bottom","0.25rem"),k.style.setProperty("font-size","2rem"),k.style.setProperty("font-weight","700"),k.style.setProperty("color","#22c55e"),e(k,()=>(r()?.extractedAmounts?.interestIncome||0).toLocaleString("en-US",{minimumFractionDigits:2}),null),ie}}),null),e(me,a($,{get when(){return r()?.drakeFormType==="1099_div"},get children(){var ie=cn(),ne=ie.firstChild,Ce=ne.firstChild,X=ne.nextSibling,We=X.nextSibling,ve=We.nextSibling;return ie.style.setProperty("margin-bottom","1.5rem"),ne.style.setProperty("font-weight","600"),ne.style.setProperty("margin-bottom","0.75rem"),ne.style.setProperty("display","flex"),ne.style.setProperty("align-items","center"),ne.style.setProperty("gap","0.5rem"),Ce.style.setProperty("background","#06b6d4"),Ce.style.setProperty("color","white"),Ce.style.setProperty("padding","0.125rem 0.5rem"),Ce.style.setProperty("border-radius","4px"),Ce.style.setProperty("font-size","0.75rem"),X.style.setProperty("padding","1rem"),X.style.setProperty("background","rgba(6, 182, 212, 0.05)"),X.style.setProperty("border","1px solid rgba(6, 182, 212, 0.2)"),X.style.setProperty("border-radius","8px"),X.style.setProperty("margin-bottom","1rem"),e(X,a($,{get when(){return r()?.payerInfo?.name},get children(){var s=vt();return s.style.setProperty("font-weight","600"),s.style.setProperty("font-size","1rem"),s.style.setProperty("margin-bottom","0.25rem"),e(s,()=>r()?.payerInfo?.name),s}}),null),e(X,a($,{get when(){return r()?.payerInfo?.ein},get children(){var s=wt();return s.firstChild,s.style.setProperty("font-size","0.875rem"),s.style.setProperty("color","var(--text-secondary)"),e(s,()=>r()?.payerInfo?.ein,null),s}}),null),e(X,a($,{get when(){return r()?.payerInfo?.address||r()?.payerInfo?.city},get children(){var s=vt();return s.style.setProperty("font-size","0.875rem"),s.style.setProperty("color","var(--text-secondary)"),s.style.setProperty("margin-top","0.25rem"),e(s,()=>r()?.payerInfo?.address,null),e(s,(()=>{var k=qe(()=>!!r()?.payerInfo?.city);return()=>k()&&`, ${r()?.payerInfo?.city}`})(),null),e(s,(()=>{var k=qe(()=>!!r()?.payerInfo?.state);return()=>k()&&`, ${r()?.payerInfo?.state}`})(),null),e(s,(()=>{var k=qe(()=>!!r()?.payerInfo?.zip);return()=>k()&&` ${r()?.payerInfo?.zip}`})(),null),s}}),null),We.style.setProperty("font-weight","600"),We.style.setProperty("margin-bottom","0.75rem"),ve.style.setProperty("display","grid"),ve.style.setProperty("grid-template-columns","repeat(2, 1fr)"),ve.style.setProperty("gap","0.5rem"),e(ve,a($,{get when(){return r()?.extractedAmounts?.ordinaryDividends!==void 0},get children(){var s=an(),k=s.firstChild,x=k.nextSibling;return x.firstChild,s.style.setProperty("padding","0.75rem"),s.style.setProperty("background","var(--surface-alt, #f9fafb)"),s.style.setProperty("border-radius","6px"),k.style.setProperty("font-size","0.75rem"),k.style.setProperty("color","var(--text-secondary)"),x.style.setProperty("font-weight","600"),x.style.setProperty("font-size","1.125rem"),x.style.setProperty("color","#06b6d4"),e(x,()=>(r()?.extractedAmounts?.ordinaryDividends||0).toLocaleString("en-US",{minimumFractionDigits:2}),null),s}}),null),e(ve,a($,{get when(){return r()?.extractedAmounts?.qualifiedDividends!==void 0},get children(){var s=dn(),k=s.firstChild,x=k.nextSibling;return x.firstChild,s.style.setProperty("padding","0.75rem"),s.style.setProperty("background","var(--surface-alt, #f9fafb)"),s.style.setProperty("border-radius","6px"),k.style.setProperty("font-size","0.75rem"),k.style.setProperty("color","var(--text-secondary)"),x.style.setProperty("font-weight","600"),x.style.setProperty("font-size","1.125rem"),x.style.setProperty("color","#06b6d4"),e(x,()=>(r()?.extractedAmounts?.qualifiedDividends||0).toLocaleString("en-US",{minimumFractionDigits:2}),null),s}}),null),e(ve,a($,{get when(){return r()?.extractedAmounts?.capitalGains!==void 0},get children(){var s=yn(),k=s.firstChild,x=k.nextSibling;return x.firstChild,s.style.setProperty("padding","0.75rem"),s.style.setProperty("background","var(--surface-alt, #f9fafb)"),s.style.setProperty("border-radius","6px"),k.style.setProperty("font-size","0.75rem"),k.style.setProperty("color","var(--text-secondary)"),x.style.setProperty("font-weight","600"),e(x,()=>(r()?.extractedAmounts?.capitalGains||0).toLocaleString("en-US",{minimumFractionDigits:2}),null),s}}),null),ie}}),null),e(me,a($,{get when(){return r()?.drakeFormType==="1098"},get children(){var ie=mn(),ne=ie.firstChild,Ce=ne.firstChild,X=ne.nextSibling,We=X.nextSibling,ve=We.nextSibling;return ie.style.setProperty("margin-bottom","1.5rem"),ne.style.setProperty("font-weight","600"),ne.style.setProperty("margin-bottom","0.75rem"),ne.style.setProperty("display","flex"),ne.style.setProperty("align-items","center"),ne.style.setProperty("gap","0.5rem"),Ce.style.setProperty("background","#ec4899"),Ce.style.setProperty("color","white"),Ce.style.setProperty("padding","0.125rem 0.5rem"),Ce.style.setProperty("border-radius","4px"),Ce.style.setProperty("font-size","0.75rem"),X.style.setProperty("padding","1rem"),X.style.setProperty("background","rgba(236, 72, 153, 0.05)"),X.style.setProperty("border","1px solid rgba(236, 72, 153, 0.2)"),X.style.setProperty("border-radius","8px"),X.style.setProperty("margin-bottom","1rem"),e(X,a($,{get when(){return r()?.payerInfo?.name},get children(){var s=vt();return s.style.setProperty("font-weight","600"),s.style.setProperty("font-size","1rem"),s.style.setProperty("margin-bottom","0.25rem"),e(s,()=>r()?.payerInfo?.name),s}}),null),e(X,a($,{get when(){return r()?.payerInfo?.ein},get children(){var s=wt();return s.firstChild,s.style.setProperty("font-size","0.875rem"),s.style.setProperty("color","var(--text-secondary)"),e(s,()=>r()?.payerInfo?.ein,null),s}}),null),e(X,a($,{get when(){return r()?.payerInfo?.address||r()?.payerInfo?.city},get children(){var s=vt();return s.style.setProperty("font-size","0.875rem"),s.style.setProperty("color","var(--text-secondary)"),s.style.setProperty("margin-top","0.25rem"),e(s,()=>r()?.payerInfo?.address,null),e(s,(()=>{var k=qe(()=>!!r()?.payerInfo?.city);return()=>k()&&`, ${r()?.payerInfo?.city}`})(),null),e(s,(()=>{var k=qe(()=>!!r()?.payerInfo?.state);return()=>k()&&`, ${r()?.payerInfo?.state}`})(),null),e(s,(()=>{var k=qe(()=>!!r()?.payerInfo?.zip);return()=>k()&&` ${r()?.payerInfo?.zip}`})(),null),s}}),null),We.style.setProperty("font-weight","600"),We.style.setProperty("margin-bottom","0.75rem"),ve.style.setProperty("display","grid"),ve.style.setProperty("grid-template-columns","repeat(2, 1fr)"),ve.style.setProperty("gap","0.5rem"),e(ve,a($,{get when(){return r()?.extractedAmounts?.mortgageInterest!==void 0},get children(){var s=un(),k=s.firstChild,x=k.nextSibling;return x.firstChild,s.style.setProperty("padding","0.75rem"),s.style.setProperty("background","var(--surface-alt, #f9fafb)"),s.style.setProperty("border-radius","6px"),k.style.setProperty("font-size","0.75rem"),k.style.setProperty("color","var(--text-secondary)"),x.style.setProperty("font-weight","600"),x.style.setProperty("font-size","1.125rem"),x.style.setProperty("color","#ec4899"),e(x,()=>(r()?.extractedAmounts?.mortgageInterest||0).toLocaleString("en-US",{minimumFractionDigits:2}),null),s}}),null),e(ve,a($,{get when(){return r()?.extractedAmounts?.propertyTaxes!==void 0},get children(){var s=pn(),k=s.firstChild,x=k.nextSibling;return x.firstChild,s.style.setProperty("padding","0.75rem"),s.style.setProperty("background","var(--surface-alt, #f9fafb)"),s.style.setProperty("border-radius","6px"),k.style.setProperty("font-size","0.75rem"),k.style.setProperty("color","var(--text-secondary)"),x.style.setProperty("font-weight","600"),x.style.setProperty("font-size","1.125rem"),e(x,()=>(r()?.extractedAmounts?.propertyTaxes||0).toLocaleString("en-US",{minimumFractionDigits:2}),null),s}}),null),e(ve,a($,{get when(){return r()?.extractedAmounts?.mortgageInsurance!==void 0},get children(){var s=gn(),k=s.firstChild,x=k.nextSibling;return x.firstChild,s.style.setProperty("padding","0.75rem"),s.style.setProperty("background","var(--surface-alt, #f9fafb)"),s.style.setProperty("border-radius","6px"),k.style.setProperty("font-size","0.75rem"),k.style.setProperty("color","var(--text-secondary)"),x.style.setProperty("font-weight","600"),e(x,()=>(r()?.extractedAmounts?.mortgageInsurance||0).toLocaleString("en-US",{minimumFractionDigits:2}),null),s}}),null),ie}}),null),e(me,a($,{get when(){return r()?.drakeFormType==="1098_t"},get children(){var ie=fn(),ne=ie.firstChild,Ce=ne.firstChild,X=ne.nextSibling,We=X.nextSibling,ve=We.nextSibling;return ie.style.setProperty("margin-bottom","1.5rem"),ne.style.setProperty("font-weight","600"),ne.style.setProperty("margin-bottom","0.75rem"),ne.style.setProperty("display","flex"),ne.style.setProperty("align-items","center"),ne.style.setProperty("gap","0.5rem"),Ce.style.setProperty("background","#14b8a6"),Ce.style.setProperty("color","white"),Ce.style.setProperty("padding","0.125rem 0.5rem"),Ce.style.setProperty("border-radius","4px"),Ce.style.setProperty("font-size","0.75rem"),X.style.setProperty("padding","1rem"),X.style.setProperty("background","rgba(20, 184, 166, 0.05)"),X.style.setProperty("border","1px solid rgba(20, 184, 166, 0.2)"),X.style.setProperty("border-radius","8px"),X.style.setProperty("margin-bottom","1rem"),e(X,a($,{get when(){return r()?.payerInfo?.name},get children(){var s=vt();return s.style.setProperty("font-weight","600"),s.style.setProperty("font-size","1rem"),s.style.setProperty("margin-bottom","0.25rem"),e(s,()=>r()?.payerInfo?.name),s}}),null),e(X,a($,{get when(){return r()?.payerInfo?.ein},get children(){var s=wt();return s.firstChild,s.style.setProperty("font-size","0.875rem"),s.style.setProperty("color","var(--text-secondary)"),e(s,()=>r()?.payerInfo?.ein,null),s}}),null),e(X,a($,{get when(){return r()?.payerInfo?.address||r()?.payerInfo?.city},get children(){var s=vt();return s.style.setProperty("font-size","0.875rem"),s.style.setProperty("color","var(--text-secondary)"),s.style.setProperty("margin-top","0.25rem"),e(s,()=>r()?.payerInfo?.address,null),e(s,(()=>{var k=qe(()=>!!r()?.payerInfo?.city);return()=>k()&&`, ${r()?.payerInfo?.city}`})(),null),e(s,(()=>{var k=qe(()=>!!r()?.payerInfo?.state);return()=>k()&&`, ${r()?.payerInfo?.state}`})(),null),e(s,(()=>{var k=qe(()=>!!r()?.payerInfo?.zip);return()=>k()&&` ${r()?.payerInfo?.zip}`})(),null),s}}),null),We.style.setProperty("font-weight","600"),We.style.setProperty("margin-bottom","0.75rem"),ve.style.setProperty("display","grid"),ve.style.setProperty("grid-template-columns","repeat(2, 1fr)"),ve.style.setProperty("gap","0.5rem"),e(ve,a($,{get when(){return r()?.extractedAmounts?.tuitionPaid!==void 0},get children(){var s=vn(),k=s.firstChild,x=k.nextSibling;return x.firstChild,s.style.setProperty("padding","0.75rem"),s.style.setProperty("background","var(--surface-alt, #f9fafb)"),s.style.setProperty("border-radius","6px"),k.style.setProperty("font-size","0.75rem"),k.style.setProperty("color","var(--text-secondary)"),x.style.setProperty("font-weight","600"),x.style.setProperty("font-size","1.125rem"),x.style.setProperty("color","#14b8a6"),e(x,()=>(r()?.extractedAmounts?.tuitionPaid||0).toLocaleString("en-US",{minimumFractionDigits:2}),null),s}}),null),e(ve,a($,{get when(){return r()?.extractedAmounts?.scholarshipsGrants!==void 0},get children(){var s=hn(),k=s.firstChild,x=k.nextSibling;return x.firstChild,s.style.setProperty("padding","0.75rem"),s.style.setProperty("background","var(--surface-alt, #f9fafb)"),s.style.setProperty("border-radius","6px"),k.style.setProperty("font-size","0.75rem"),k.style.setProperty("color","var(--text-secondary)"),x.style.setProperty("font-weight","600"),x.style.setProperty("font-size","1.125rem"),e(x,()=>(r()?.extractedAmounts?.scholarshipsGrants||0).toLocaleString("en-US",{minimumFractionDigits:2}),null),s}}),null),ie}}),null),e(me,a($,{get when(){return qe(()=>!["w2","1099_nec","1099_misc","1099_int","1099_div","1098","1098_t"].includes(r()?.drakeFormType||""))()&&r()?.extractedAmounts},get children(){var ie=bn(),ne=ie.firstChild,Ce=ne.nextSibling;return ie.style.setProperty("margin-bottom","1.5rem"),ne.style.setProperty("font-weight","600"),ne.style.setProperty("margin-bottom","0.75rem"),Ce.style.setProperty("display","grid"),Ce.style.setProperty("grid-template-columns","repeat(2, 1fr)"),Ce.style.setProperty("gap","0.5rem"),e(Ce,a(pt,{get each(){return Object.entries(r()?.extractedAmounts||{})},children:([X,We])=>a($,{when:We!=null&&typeof We=="number",get children(){var ve=Cn(),s=ve.firstChild,k=s.nextSibling;return k.firstChild,ve.style.setProperty("padding","0.75rem"),ve.style.setProperty("background","var(--surface-alt, #f9fafb)"),ve.style.setProperty("border-radius","6px"),ve.style.setProperty("font-size","0.875rem"),s.style.setProperty("color","var(--text-secondary)"),s.style.setProperty("font-size","0.75rem"),s.style.setProperty("text-transform","capitalize"),e(s,()=>X.replace(/([A-Z])/g," $1").trim()),k.style.setProperty("font-weight","600"),e(k,()=>We.toLocaleString("en-US",{minimumFractionDigits:2}),null),ve}})})),ie}}),null),e(me,a($,{get when(){return r()?.errorMessage},get children(){var ie=xn(),ne=ie.firstChild;return ne.nextSibling,ie.style.setProperty("padding","1rem"),ie.style.setProperty("background","rgba(239, 68, 68, 0.1)"),ie.style.setProperty("border","1px solid rgba(239, 68, 68, 0.2)"),ie.style.setProperty("border-radius","8px"),ie.style.setProperty("color","#ef4444"),ie.style.setProperty("font-size","0.875rem"),ie.style.setProperty("margin-bottom","1.5rem"),e(ie,()=>r()?.errorMessage,null),ie}}),null),at.style.setProperty("display","flex"),at.style.setProperty("gap","0.75rem"),at.style.setProperty("padding","1.25rem 1.5rem"),at.style.setProperty("border-top","1px solid var(--border-color, #e5e7eb)"),at.style.setProperty("justify-content","flex-end"),e(at,a(Pt,{variant:"secondary",onClick:W,children:"Close"}),ot),ot.$$mouseout=ie=>{},ot.$$mouseover=ie=>ie.currentTarget.style.background="#f59e0b",ot.$$click=()=>Xe(r()),ot.style.setProperty("padding","0.5rem 1rem"),ot.style.setProperty("background","#f59e0b"),ot.style.setProperty("border","none"),ot.style.setProperty("border-radius","6px"),ot.style.setProperty("color","white"),ot.style.setProperty("font-weight","500"),ot.style.setProperty("cursor","pointer"),ot.style.setProperty("font-size","0.875rem"),ot.style.setProperty("transition","background 0.2s ease"),e(at,a(Pt,{variant:"secondary",onClick:()=>le(r()),children:"QR Code"}),null),e(at,a(Pt,{variant:"secondary",onClick:()=>Je(r()),children:"Re-Analyze"}),null),e(at,a($,{get when(){return pe(r())!=="verified"},get children(){var ie=Pn();return ie.$$mouseout=ne=>ne.currentTarget.style.background="#22c55e",ie.$$mouseover=ne=>ne.currentTarget.style.background="#16a34a",ie.$$click=()=>_e(r()),ie.style.setProperty("padding","0.5rem 1rem"),ie.style.setProperty("background","#22c55e"),ie.style.setProperty("border","none"),ie.style.setProperty("border-radius","6px"),ie.style.setProperty("color","white"),ie.style.setProperty("font-weight","500"),ie.style.setProperty("cursor","pointer"),ie.style.setProperty("font-size","0.875rem"),ie.style.setProperty("transition","background 0.2s ease"),ie}}),null),e(at,a(Pt,{variant:"primary",onClick:()=>de(r()),children:"Open File"}),null),z(ie=>t(tt,Ue(ae(pe(r()))),ie)),F}}),null),e(n,a(Zt,{get qrText(){return Se()},get isOpen(){return K()},onClose:()=>L(!1),get title(){return`${kt[r()?.drakeFormType||"other"]} QR Code`},convertPipeToTab:!0,toUpperCase:!0}),null),z(F=>{var q=mt,O=st,f=Me,ye=J,me=w("#22c55e"),Ie=J,B=w("#f59e0b"),Ee=I(E());return F.e=t(n,q,F.e),F.t=t(o,O,F.t),F.a=t(S,f,F.a),F.o=t(T,ye,F.o),F.i=t(g,me,F.i),F.n=t(oe,Ie,F.n),F.s=t(xe,B,F.s),F.h=t(Pe,Ee,F.h),F},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),n})()};$t(["click","mouseover","mouseout"]);const kn=(l,E={})=>new Promise((G,he)=>{const{width:$e=100,height:fe=100,scale:Ae=2,backgroundColor:Be}=E,te=document.createElement("canvas"),Fe=te.getContext("2d");if(!Fe){he(new Error("Could not get canvas context"));return}te.width=$e*Ae,te.height=fe*Ae;const Le=new Image,r=new Blob([l],{type:"image/svg+xml;charset=utf-8"}),ce=URL.createObjectURL(r);Le.onload=()=>{Be&&(Fe.fillStyle=Be,Fe.fillRect(0,0,te.width,te.height)),Fe.drawImage(Le,0,0,te.width,te.height),URL.revokeObjectURL(ce);const K=te.toDataURL("image/png");G(K)},Le.onerror=K=>{URL.revokeObjectURL(ce),he(new Error("Failed to load SVG image"))},Le.src=ce}),In=(l="#22c55e",E=24)=>{const G=`
    <svg xmlns="http://www.w3.org/2000/svg" width="${E}" height="${E}" viewBox="0 0 24 24" fill="${l}">
      <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
    </svg>
  `;return kn(G,{width:E,height:E,scale:2})},Nn=async l=>{const{client:E,request:G,businessName:he="Stephanie Solution",businessAddress:$e,businessPhone:fe,logo:Ae,baseUrl:Be}=l,te=G.clientSignature,Le=`${Be||(typeof window<"u"?window.location.origin:"https://app.example.com")}/#/signature-validation/${G.id}/${G.accessToken}/engagement`;if(!te||!te.signedAt)throw new Error("No signature found on this engagement letter");const r=new Kt({orientation:"portrait",unit:"mm",format:"letter"}),ce=r.internal.pageSize.getWidth(),K=r.internal.pageSize.getHeight(),L=20,Se=ce-2*L;let b=L;const C=(de,W,Q=11,le="left")=>{r.setFontSize(Q);const _e=r.splitTextToSize(de,Se);return le==="center"?_e.forEach(Xe=>{r.text(Xe,ce/2,W,{align:"center"}),W+=Q*.4}):le==="right"?_e.forEach(Xe=>{r.text(Xe,ce-L,W,{align:"right"}),W+=Q*.4}):(r.text(_e,L,W),W+=_e.length*(Q*.4)),W},i=await In("#22c55e",48),be=()=>{let de=b;if(Ae)try{const le=L;if(r.addImage(Ae,"PNG",le,de-5,20,20),r.setFont("helvetica","bold"),r.setFontSize(18),r.setTextColor(30,58,95),r.text(he,le+20+5,de+5),$e||fe){r.setFont("helvetica","normal"),r.setFontSize(10),r.setTextColor(100,100,100);let _e=de+10;$e&&(r.text($e,le+20+5,_e),_e+=4),fe&&r.text(fe,le+20+5,_e)}de+=25}catch(W){console.error("Error adding logo:",W),ue();return}else{ue();return}b=de},ue=()=>{r.setFont("helvetica","bold"),r.setFontSize(18),r.setTextColor(30,58,95),r.text(he,ce/2,b,{align:"center"}),b+=8,($e||fe)&&(r.setFont("helvetica","normal"),r.setFontSize(10),r.setTextColor(100,100,100),$e&&(r.text($e,ce/2,b,{align:"center"}),b+=5),fe&&(r.text(fe,ce/2,b,{align:"center"}),b+=5))};be(),b+=5,r.setDrawColor(30,58,95),r.setLineWidth(.5),r.line(L,b,ce-L,b),b+=10,r.setFont("helvetica","bold"),r.setFontSize(16),r.setTextColor(0,0,0),r.text("TAX PREPARATION ENGAGEMENT LETTER",ce/2,b,{align:"center"}),b+=10,r.setFontSize(12),r.text(`Tax Year: ${G.taxYear}`,ce/2,b,{align:"center"}),b+=15,r.setFont("helvetica","bold"),r.setFontSize(12),r.text("CLIENT INFORMATION",L,b),b+=7,r.setFont("helvetica","normal"),r.setFontSize(11);const D=`${E.firstName||""} ${E.lastName||""}`.trim()||"N/A";if(r.text(`Name: ${D}`,L,b),b+=6,E.address&&(r.text(`Address: ${E.address}`,L,b),b+=6),E.city||E.state||E.zipCode){const de=`${E.city||""}, ${E.state||""} ${E.zipCode||""}`.trim();r.text(`         ${de}`,L,b),b+=6}E.email&&(r.text(`Email: ${E.email}`,L,b),b+=6),E.phone&&(r.text(`Phone: ${E.phone}`,L,b),b+=6),b+=10,r.setFont("helvetica","bold"),r.setFontSize(12),r.text("AGREEMENT TERMS",L,b),b+=8,r.setFont("helvetica","normal"),r.setFontSize(10);const pe=`This letter confirms and specifies the terms of our engagement to prepare your ${G.taxYear} individual income tax returns.

SCOPE OF SERVICES:
We will prepare your federal and applicable state income tax returns for the tax year ${G.taxYear} based on the information you provide to us. We will not audit or otherwise verify the data you submit, although we may ask for clarification of some information.

CLIENT RESPONSIBILITIES:
You are responsible for providing all information required for the preparation of complete and accurate returns. You should retain all documents, canceled checks, and other data that form the basis of income and deductions.

FEES:
Our fee for these services will be based on the complexity of the return and the time required to prepare it. We will discuss our fee structure with you before beginning work.

CONFIDENTIALITY:
We will maintain the confidentiality of your information in accordance with professional standards and applicable law.

By signing below, you acknowledge that you have read, understand, and agree to the terms of this engagement letter.`;b=C(pe,b,10),b+=15,r.setDrawColor(200,200,200),r.setLineWidth(.3),b+=5,r.setFont("helvetica","bold"),r.setFontSize(12),r.setTextColor(30,58,95),r.text("CLIENT SIGNATURE",L+5,b),b+=8,r.setFont("helvetica","normal"),r.setFontSize(7.18),r.setTextColor(128,128,128),r.text(`Document generated on ${new Date().toLocaleString()}`,ce/1.35,K-12.5,{align:"center"}),r.text(`Reference: ${G.id||"N/A"}`,ce/1.35,K-10,{align:"center"}),r.setFontSize(9),r.setTextColor(34,197,94);const m=ce/1.5-5,je=b+13.5;if(r.addImage(i,"PNG",m,je,5,5),r.text("Terms and conditions accepted",m+6,b+17),b+=5,r.setFillColor(248,250,252),r.setDrawColor(139,92,246),r.setLineWidth(.5),r.roundedRect(L+58,b-1,41,12,2,2,"FD"),r.setFont("helvetica","normal"),r.setFontSize(7),r.setTextColor(100,100,100),r.text("Verify this signature online:",L+60,b-1+5),r.setFont("helvetica","bold"),r.setFontSize(8),r.setTextColor(139,92,246),r.textWithLink("SIGNATURE VERIFICATION",L+60,b-1+9,{url:Le}),te.signatureImage)try{const de=te.signatureImage;r.addImage(de,"PNG",L+5,b-5,60,20),b+=20}catch(de){console.error("Error adding signature image:",de),r.setDrawColor(0,0,0),r.line(L+5,b+15,L+70,b+15),b+=20}else r.setFont("helvetica","italic"),r.setFontSize(14),r.setTextColor(0,0,0),r.text(te.name,L+5,b+10),b+=15;r.setFont("helvetica","normal"),r.setFontSize(10),r.setTextColor(0,0,0),r.text(`Signed by: ${te.name}`,L+3,b),b+=5,r.setTextColor(128,128,128),r.setFontSize(7.5),r.text(`Date: ${te.date}`,L+5,b),b+=5;const Re=new Date(te.signedAt);r.text(`Signed at: ${Re.toLocaleString()}`,L+5,b-2),b+=5;const ae=K-15;if(r.setDrawColor(200,200,200),r.setLineWidth(.3),r.line(L,ae-5,ce-L,ae-5),r.addPage(),b=L,be(),b+=5,r.setDrawColor(30,58,95),r.setLineWidth(.5),r.line(L,b,ce-L,b),b+=10,r.setFont("helvetica","bold"),r.setFontSize(16),r.setTextColor(0,0,0),r.text("CARTA DE COMPROMISO PARA PREPARACION DE IMPUESTOS",ce/2,b,{align:"center"}),b+=10,r.setFontSize(12),r.text(`Ano Fiscal: ${G.taxYear}`,ce/2,b,{align:"center"}),b+=15,r.setFont("helvetica","bold"),r.setFontSize(12),r.text("INFORMACION DEL CLIENTE",L,b),b+=7,r.setFont("helvetica","normal"),r.setFontSize(11),r.text(`Nombre: ${D}`,L,b),b+=6,E.address&&(r.text(`Direccion: ${E.address}`,L,b),b+=6),E.city||E.state||E.zipCode){const de=`${E.city||""}, ${E.state||""} ${E.zipCode||""}`.trim();r.text(`              ${de}`,L,b),b+=6}E.email&&(r.text(`Correo: ${E.email}`,L,b),b+=6),E.phone&&(r.text(`Telefono: ${E.phone}`,L,b),b+=6),b+=10,r.setFont("helvetica","bold"),r.setFontSize(12),r.text("TERMINOS DEL ACUERDO",L,b),b+=8,r.setFont("helvetica","normal"),r.setFontSize(10);const ke=`Esta carta confirma y especifica los terminos de nuestro compromiso para preparar sus declaraciones de impuestos sobre la renta individual del ano ${G.taxYear}.

ALCANCE DE LOS SERVICIOS:
Prepararemos sus declaraciones de impuestos federales y estatales aplicables para el ano fiscal ${G.taxYear} basandonos en la informacion que usted nos proporcione. No auditaremos ni verificaremos de otra manera los datos que nos envie, aunque podemos solicitar aclaraciones sobre alguna informacion.

RESPONSABILIDADES DEL CLIENTE:
Usted es responsable de proporcionar toda la informacion requerida para la preparacion de declaraciones completas y precisas. Debe conservar todos los documentos, cheques cancelados y otros datos que constituyan la base de los ingresos y deducciones.

HONORARIOS:
Nuestros honorarios por estos servicios se basaran en la complejidad de la declaracion y el tiempo requerido para prepararla. Discutiremos nuestra estructura de honorarios con usted antes de comenzar el trabajo.

CONFIDENCIALIDAD:
Mantendremos la confidencialidad de su informacion de acuerdo con los estandares profesionales y la ley aplicable.

Al firmar a continuacion, usted reconoce que ha leido, entendido y acepta los terminos de esta carta de compromiso.`;b=C(ke,b,10),b+=15,r.setDrawColor(200,200,200),r.setLineWidth(.3),b+=5,r.setFont("helvetica","bold"),r.setFontSize(12),r.setTextColor(30,58,95),r.text("FIRMA DEL CLIENTE",L+5,b),b+=8,r.setFont("helvetica","normal"),r.setFontSize(7.18),r.setTextColor(128,128,128),r.text(`Documento generado el ${new Date().toLocaleString()}`,ce/1.35,K-12.5,{align:"center"}),r.text(`Referencia: ${G.id||"N/A"}`,ce/1.35,K-10,{align:"center"}),r.setFontSize(9),r.setTextColor(34,197,94);const we=ce/1.5-5,Ve=b+10.5;if(r.addImage(i,"PNG",we,Ve,5,5),r.text("Terminos y condiciones aceptados",we+6,b+14),r.setFillColor(248,250,252),r.setDrawColor(139,92,246),r.setLineWidth(.5),r.roundedRect(L+58,b-1,41,12,2,2,"FD"),r.setFont("helvetica","normal"),r.setFontSize(7),r.setTextColor(100,100,100),r.text("Verify this signature online:",L+60,b-1+5),r.setFont("helvetica","bold"),r.setFontSize(8),r.setTextColor(139,92,246),r.textWithLink("SIGNATURE VERIFICATION",L+60,b-1+9,{url:Le}),te.signatureImage)try{const de=te.signatureImage;r.addImage(de,"PNG",L+5,b-5,60,20),b+=20}catch(de){console.error("Error adding signature image:",de),r.setDrawColor(0,0,0),r.line(L+5,b+15,L+70,b+15),b+=20}else r.setFont("helvetica","italic"),r.setFontSize(14),r.setTextColor(0,0,0),r.text(te.name,L+5,b+10),b+=15;r.setFont("helvetica","normal"),r.setFontSize(10),r.setTextColor(0,0,0),r.text(`Firmado por: ${te.name}`,L+3,b),b+=5,r.setTextColor(128,128,128),r.setFontSize(7.5),r.text(`Fecha: ${te.date}`,L+5,b),b+=5,r.text(`Firmado el: ${Re.toLocaleString()}`,L+5,b-2),b+=5,r.setDrawColor(200,200,200),r.setLineWidth(.3),r.line(L,ae-5,ce-L,ae-5);const ze=`Engagement_Letter_${D.replace(/\s+/g,"_")}_${G.taxYear}.pdf`;r.save(ze)},Dn=async l=>{const{client:E,request:G,businessName:he="Tax Preparer",businessAddress:$e,businessPhone:fe,businessEFIN:Ae="000000",logo:Be,taxYear:te=new Date().getFullYear()-1,baseUrl:Fe,adjustedGrossIncome:Le,totalTax:r,federalWithholding:ce,refundAmount:K,amountOwed:L}=l,Se=G.clientSigningPin;if(!Se||!Se.pin)throw new Error("No signing PIN found on this document request");const C=`${Fe||(typeof window<"u"?window.location.origin:"https://app.example.com")}/#/signature-validation/${G.id}/${G.accessToken}/pin`,i=new Kt({orientation:"portrait",unit:"mm",format:"letter"}),be=i.internal.pageSize.getWidth(),ue=i.internal.pageSize.getHeight(),D=12,pe=be-2*D;let m=D;const je=(De,Ke=D,v=be-D,p=.3)=>{i.setDrawColor(0),i.setLineWidth(p),i.line(Ke,De,v,De)},Re=(De,Ke,v,p,R=!1)=>{i.setDrawColor(0),i.setLineWidth(.3),R?(i.setFillColor(255,255,255),i.rect(De,Ke,v,p,"FD")):i.rect(De,Ke,v,p)},ae=De=>De==null?"":De.toLocaleString("en-US");i.setFillColor(0,0,0),i.rect(D,m,25,14,"F"),i.setTextColor(255,255,255),i.setFont("helvetica","bold"),i.setFontSize(14),i.text("Form",D+2,m+5),i.setFontSize(18),i.text("8879",D+2,m+12),i.setTextColor(0,0,0),i.setFont("helvetica","normal"),i.setFontSize(7),i.text("Department of the Treasury",D+28,m+3),i.text("Internal Revenue Service",D+28,m+6.5),i.setFont("helvetica","bold"),i.setFontSize(12),i.text("IRS e-file Signature Authorization",D+28,m+11),i.setFont("helvetica","normal"),i.setFontSize(7),i.text("OMB No. 1545-0074",be-D-25,m+3),i.setFillColor(0,0,0),i.rect(be-D-18,m+5,18,9,"F"),i.setTextColor(255,255,255),i.setFont("helvetica","bold"),i.setFontSize(14),i.text(String(te),be-D-9,m+12,{align:"center"}),m+=16,i.setTextColor(0,0,0),i.setFont("helvetica","normal"),i.setFontSize(8),i.text("For use with Forms 1040, 1040-SR, 1040-NR, 1040-SS, and 1040-X.",be/2,m,{align:"center"}),m+=3,i.setFontSize(7),i.text("Go to www.irs.gov/Form8879 for the latest information.",be/2,m,{align:"center"}),m+=4,je(m,D,be-D,.5),m+=1;const we=8;i.setFontSize(6),i.text("Taxpayer's name",D+1,m+2.5),Re(D,m,pe*.55,we),i.setFont("helvetica","bold"),i.setFontSize(10);const Ve=`${E.firstName||""} ${E.lastName||""}`.trim()||"N/A";i.text(Ve,D+25,m+5.5),i.setFont("helvetica","normal"),i.setFontSize(6),i.text("Social security number",D+pe*.55+2,m+2.5),Re(D+pe*.55,m,pe*.45,we),i.setFont("helvetica","bold"),i.setFontSize(10),i.text("XXX-XX-XXXX",D+pe*.55+30,m+5.5),m+=we,i.setFont("helvetica","normal"),i.setFontSize(6),i.text("Spouse's name (if joint return)",D+1,m+2.5),Re(D,m,pe*.55,we),i.setFontSize(6),i.text("Spouse's social security number",D+pe*.55+2,m+2.5),Re(D+pe*.55,m,pe*.45,we),m+=we+2,i.setFillColor(0,0,0),i.rect(D,m,pe,5,"F"),i.setTextColor(255,255,255),i.setFont("helvetica","bold"),i.setFontSize(8),i.text("Part I",D+2,m+3.5),i.text("Tax Return Information (Whole dollars only. See instructions.)",D+18,m+3.5),m+=6,i.setTextColor(0,0,0),i.setFont("helvetica","normal"),i.setFontSize(7),i.text("Enter whole dollars only on lines 1 through 5. For Form 1040-SS filers, complete line 4 only and leave lines 1, 2, 3, and 5 blank.",D,m+2),m+=5;const ze=6,de=pe*.7,W=pe*.25,Q=8,le=(De,Ke,v,p)=>{i.setFont("helvetica","bold"),i.setFontSize(8),i.text(De,D+2,m+4),i.setFont("helvetica","normal"),i.setFontSize(8),i.text(Ke,D+Q,m+4),i.setFontSize(6),i.setTextColor(100,100,100),i.text(v,D+Q,m+7),i.setTextColor(0,0,0),Re(D+de,m,W,ze),i.setFont("helvetica","normal"),i.setFontSize(9);const R=ae(p);R&&i.text(R,D+de+W-3,m+4.5,{align:"right"}),i.setFont("helvetica","bold"),i.setFontSize(8),i.text(De,D+de+W+3,m+4),m+=ze+1};le("1","Adjusted gross income","(Form 1040, 1040-SR, or 1040-NR, line 11; Form 1040-SS, see instructions)",Le),le("2","Total tax","(Form 1040, 1040-SR, or 1040-NR, line 24; Form 1040-SS, see instructions)",r),le("3","Federal income tax withheld","(Form 1040, 1040-SR, 1040-NR, or 1040-SS, line 25d)",ce),le("4","Refund","(Form 1040, 1040-SR, 1040-NR, or 1040-SS, line 35a)",K),le("5","Amount you owe","(Form 1040, 1040-SR, or 1040-NR, line 37; Form 1040-SS, see instructions)",L),m+=2,i.setFillColor(0,0,0),i.rect(D,m,pe,5,"F"),i.setTextColor(255,255,255),i.setFont("helvetica","bold"),i.setFontSize(8),i.text("Part II",D+2,m+3.5),i.text("Taxpayer Declaration and Signature Authorization (Be sure you get a copy of your return)",D+18,m+3.5),m+=7,i.setTextColor(0,0,0),i.setFont("helvetica","normal"),i.setFontSize(7);const _e="Under penalties of perjury, I declare that the information I provided to my electronic return originator (ERO), and the amounts in Part I above, agree with the amounts on my corresponding lines of my "+te+" federal income tax return. To the best of my knowledge and belief, my return is true, correct, and complete.",Xe=i.splitTextToSize(_e,pe);i.text(Xe,D,m),m+=Xe.length*2.8+2,i.setFont("helvetica","bold"),i.setFontSize(7),i.text("I authorize the ERO named below to:",D,m),m+=4,i.setFont("helvetica","normal"),Re(D,m-1,3,3),i.setFillColor(0,0,0),i.rect(D+.5,m-.5,2,2,"F"),i.setFontSize(7);const Je="Enter my PIN as my signature on my "+te+" electronically filed income tax return. I authorize the ERO to enter or generate my PIN, and I have entered my PIN below.",ft=i.splitTextToSize(Je,pe-6);i.text(ft,D+5,m+1),m+=ft.length*2.8+3,Re(D,m-1,3,3);const gt="Enter my PIN as my signature on my "+te+" electronically filed income tax return. I will enter my own PIN below. I am using the Practitioner PIN method. I authorize the ERO named below to enter my PIN on my return only if I have provided the required Authentication Record information.",mt=i.splitTextToSize(gt,pe-6);i.text(mt,D+5,m+1),m+=mt.length*2.8+5,i.setFont("helvetica","bold"),i.setFontSize(9),i.text("Taxpayer's PIN: enter five digits, but don't enter all zeros",D,m);const st=8,ut=D+85,Me=Se.pin||"00000";for(let De=0;De<5;De++)Re(ut+De*(st+1),m-5,st,st),i.setFont("helvetica","bold"),i.setFontSize(14),i.text(Me[De]||"",ut+De*(st+1)+2.5,m+1);m+=8,i.setFontSize(9),i.text("Spouse's PIN: enter five digits, but don't enter all zeros",D,m);for(let De=0;De<5;De++)Re(ut+De*(st+1),m-5,st,st);m+=10,i.setFont("helvetica","normal"),i.setFontSize(7);const J="I understand that my PIN will be used as my signature for my "+te+" income tax return. I consent to the IRS and the ERO disclosing to each other my taxpayer identity, my return, and any return information in connection with e-filing, including my PIN, adjusted gross income, and any self-selected identity information.",w=i.splitTextToSize(J,pe);i.text(w,D,m),m+=w.length*2.8+5;const I=pe*.6,Z=pe*.35;if(i.setFont("helvetica","bold"),i.setFontSize(8),i.text("Taxpayer's signature",D,m),i.text("Date",D+I+5,m),m+=2,Re(D,m,I,18),Se.signatureImage)try{i.addImage(Se.signatureImage,"PNG",D+2,m+1,I-4,16)}catch{i.setFont("helvetica","italic"),i.setFontSize(10),i.setTextColor(100,100,100),i.text("[Signature on file]",D+10,m+10),i.setTextColor(0,0,0)}Re(D+I+5,m,Z,8),i.setFont("helvetica","normal"),i.setFontSize(9);const Oe=Se.setAt?new Date(Se.setAt).toLocaleDateString():new Date().toLocaleDateString();i.text(Oe,D+I+8,m+5.5),m+=20,i.setFont("helvetica","bold"),i.setFontSize(8),i.text("Spouse's signature",D,m),i.text("Date",D+I+5,m),m+=2,Re(D,m,I,12),Re(D+I+5,m,Z,8),m+=15,i.setFillColor(0,0,0),i.rect(D,m,pe,5,"F"),i.setTextColor(255,255,255),i.setFont("helvetica","bold"),i.setFontSize(8),i.text("Part III",D+2,m+3.5),i.text("Electronic Return Originator (ERO) Declaration",D+18,m+3.5),m+=7,i.setTextColor(0,0,0),i.setFont("helvetica","normal"),i.setFontSize(7);const Ge=i.splitTextToSize("I declare that I have reviewed the above taxpayer's return and that the entries on Form 8879 are complete and correct to the best of my knowledge. If I am only an Intermediate Service Provider, I understand that I am not responsible for reviewing the taxpayer's return. I have obtained the taxpayer's signature on Form 8879 before transmitting the return to the IRS; I have provided the taxpayer with a copy of all forms and information to be filed with the IRS; and I have followed all other requirements in Pub. 1345, Handbook for Authorized IRS e-file Providers of Individual Income Tax Returns, and, if applicable, Pub. 1346, Electronic Return File Specifications and Record Layouts for Individual Income Tax Returns. If I am also the Paid Preparer, under penalties of perjury I declare that I have examined the above taxpayer's return and accompanying schedules and statements, and to the best of my knowledge and belief, they are true, correct, and complete. This declaration is based on all information of which I have any knowledge.",pe);i.text(Ge,D,m),m+=Ge.length*2.5+5;const Ue=pe/3;if(i.setFont("helvetica","normal"),i.setFontSize(6),i.text("ERO's EFIN/PIN. Enter your six-digit EFIN",D,m+2),i.text("followed by your five-digit self-selected PIN.",D,m+4.5),Re(D,m+6,Ue-5,8),i.setFontSize(9),i.text(Ae+"00000",D+3,m+11),i.setFontSize(6),i.text("ERO's signature",D+Ue,m+2),Re(D+Ue,m+6,Ue,8),i.text("Date",D+Ue*2+5,m+2),Re(D+Ue*2+5,m+6,Ue-10,8),i.setFontSize(9),i.text(new Date().toLocaleDateString(),D+Ue*2+8,m+11),m+=18,i.setFontSize(6),i.text("ERO firm name (or yours if self-employed), address, and ZIP code",D,m+2),Re(D,m+4,pe,12),Be)try{i.addImage(Be,"PNG",D+2,m+5,10,10),i.setFont("helvetica","bold"),i.setFontSize(9),i.text(he,D+14,m+9),$e&&(i.setFont("helvetica","normal"),i.setFontSize(8),i.text($e,D+14,m+13))}catch{i.setFont("helvetica","bold"),i.setFontSize(9),i.text(he,D+3,m+9),$e&&(i.setFont("helvetica","normal"),i.text($e,D+3,m+13))}else i.setFont("helvetica","bold"),i.setFontSize(9),i.text(he,D+3,m+9),$e&&(i.setFont("helvetica","normal"),i.setFontSize(8),i.text($e,D+3,m+13));fe&&(i.setFontSize(8),i.text("Phone: "+fe,D+pe-45,m+9)),m+=18,i.setFillColor(248,250,252),i.setDrawColor(139,92,246),i.setLineWidth(.5),i.roundedRect(D,m,pe,14,2,2,"FD"),i.setFont("helvetica","bold"),i.setFontSize(7),i.setTextColor(139,92,246),i.text("SIGNATURE VERIFICATION",D+3,m+4),i.setFont("helvetica","normal"),i.setFontSize(6),i.setTextColor(100,100,100),i.text("Verify this e-filing authorization online:",D+3,m+8),i.setTextColor(59,130,246),i.textWithLink(C,D+3,m+11,{url:C}),m=ue-8,i.setFontSize(6),i.setTextColor(100,100,100),i.text("For Paperwork Reduction Act Notice, see your tax return instructions.",D,m),i.text("Cat. No. 17571Q",be/2,m,{align:"center"}),i.text("Form 8879 (Rev. 1-2021)",be-D,m,{align:"right"});const lt=`Form_8879_${`${E.firstName||""}_${E.lastName||""}`.trim().replace(/\s+/g,"_")||"client"}_${te}.pdf`;i.save(lt)};var Fn=y("<div><div></div><span> In Progress"),An=y('<div><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"clip-rule=evenodd>'),Ln=y('<div><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"clip-rule=evenodd>'),Rn=y('<div><div></div><div>Pending Tasks</div><div>Send all pending tasks to <!> <!> for completion</div><button><svg viewBox="0 0 20 20"fill=currentColor><path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z">'),Ht=y("<div>"),Mn=y('<div><div><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"clip-rule=evenodd></path></svg></div><div>All Tasks Complete!</div><div> has completed all required tasks'),En=y('<div><div><button><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"clip-rule=evenodd>'),Bn=y(`<div><div><div><div><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"clip-rule=evenodd></path></svg></div><div><h3>Mark as Not Needed</h3><p></p></div></div><p>This will mark the document as not applicable for this client. They won't be asked to upload it.</p><div><label>Reason (optional)</label><input type=text placeholder="e.g., Client has no W-2 income"></div><div><button>Cancel</button><button>`),On=y("<div><div><div><h3>Client Tasks</h3><div><div><div></div><span> Pending</span></div><div><div></div><span> Complete"),Un=y('<svg viewBox="0 0 20 20"fill=white><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd>'),Wn=y('<svg viewBox="0 0 20 20"fill=white><path fill-rule=evenodd d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"clip-rule=evenodd>'),jn=y("<span>Not Needed"),qt=y("<span>"),Vn=y('<div><div><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"clip-rule=evenodd></path></svg>Matched Documents (<!>)</div><div>'),Hn=y("<div>Completed on "),qn=y('<button><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"clip-rule=evenodd></path></svg>Download Signed Letter (PDF)'),Yt=y('<button><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"clip-rule=evenodd></path></svg>View Validation'),Xt=y('<button><svg viewBox="0 0 20 20"fill=currentColor><path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"></path><path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z">'),Yn=y('<button><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"clip-rule=evenodd></path></svg>Download Form 8879 (PDF)'),Xn=y('<button><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"clip-rule=evenodd></path></svg>Not Needed'),Qn=y("<div><span>Not Needed</span><button>"),Gn=y("<div><div><div></div></div><div><div></div><div></div><div><span> Priority"),Kn=y("<span>- "),Jn=y("<div><span></span><span>"),Zn=y('<svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"clip-rule=evenodd>');const el=l=>{const[E,G]=Ne(!1),[he,$e]=Ne(null),[fe,Ae]=Ne(null),[Be,te]=Ne(null),[Fe,Le]=Ne(new Set),[r,ce]=Ne(!1),[K,L]=Ne(null),[Se,b]=Ne("engagement"),[C,i]=Ne(null),[be,ue]=Ne(!1),[D,pe]=Ne(null),[m,je]=Ne(""),[Re,ae]=Ne(!1),[ke,we]=Ne(new Set),Ve=(u,S)=>`${window.location.origin}/#/signature-validation/${u.id}/${u.accessToken}/${S}`,ze=async(u,S)=>{const T=Ve(u,S);try{await navigator.clipboard.writeText(T),i(u.id+S),setTimeout(()=>i(null),2e3)}catch(g){console.error("Failed to copy:",g),alert("Failed to copy link to clipboard")}},de=u=>!u||!l.documents?[]:l.documents.filter(S=>S.drakeFormType?!!(S.drakeFormType===u||u==="1099"&&S.drakeFormType.startsWith("1099")||u==="1098"&&S.drakeFormType.startsWith("1098")):!1),W=zt(()=>{const u=[];l.documents,l?.taxPortal?.ssn?u.push({id:"upload_ssn",type:"upload_ssn",title:"SSN Provided",description:`SSN ending in ${l?.taxPortal?.ssn.slice(-4)}`,status:"complete",priority:"high",completedAt:l?.taxPortal?.updatedAt}):u.push({id:"upload_ssn",type:"upload_ssn",title:"Upload SSN",description:"Client needs to provide their Social Security Number",status:"pending",priority:"high"});const S=l.documentRequests?.find(ee=>ee.clientSignature?.signedAt),T=!!S;u.push({id:"sign_letter",type:"sign_letter",title:T?"Engagement Letter Signed":"Sign Engagement Letter",description:T?`Signed by ${S?.clientSignature?.name||"client"} on ${new Date(S?.clientSignature?.signedAt||0).toLocaleDateString()}`:"Client needs to sign the tax preparation engagement letter",status:T?"complete":"pending",priority:"high",completedAt:S?.clientSignature?.signedAt,signedRequest:T?S:void 0});const g=l.documentRequests?.find(ee=>ee.clientSigningPin?.pin),c=!!g?.clientSigningPin?.pin;u.push({id:"set_signing_pin",type:"set_signing_pin",title:c?"E-Filing PIN Set":"Set E-Filing PIN",description:c?`5-digit PIN set on ${new Date(g?.clientSigningPin?.setAt||0).toLocaleDateString()}`:"Client needs to create a 5-digit PIN to authorize e-filing their tax return",status:c?"complete":"pending",priority:"high",completedAt:g?.clientSigningPin?.setAt,pinRequest:c?g:void 0});const Y=l.taxPortal?.firstName&&l.taxPortal?.lastName&&l.taxPortal?.address&&l.taxPortal?.city&&l.taxPortal?.state&&l.taxPortal?.zipCode;u.push({id:"verify_info",type:"verify_info",title:"Verify Personal Information",description:Y?"Personal information has been verified":"Client needs to verify their name and address",status:Y?"complete":"pending",priority:"medium",completedAt:Y?l.taxPortal?.updatedAt:void 0});const oe=(l.taxPortal?.dependents?.length||0)>0,xe=l.taxPortal?.hasNoDependents===!0,re=oe||xe;u.push({id:"provide_dependent_info",type:"provide_dependent_info",title:re?xe?"No Dependents (Confirmed)":`${l.taxPortal?.dependents?.length} Dependent(s) Added`:"Provide Dependent Information",description:re?xe?"Client confirmed they have no dependents to claim":`${l.taxPortal?.dependents?.length} dependent(s) have been added`:"Client needs to provide information about any dependents",status:re?"complete":"pending",priority:"medium",completedAt:re?l.taxPortal?.updatedAt:void 0});const Te=de("w2"),j=Te.length>0;u.push({id:"upload_w2",type:"upload_document",title:"Upload W-2",description:j?`${Te.length} W-2 form(s) uploaded`:"Client needs to upload their W-2 form(s) from employer(s)",status:j?"complete":"pending",priority:"high",documentType:"w2",matchedDocuments:j?Te:void 0,matchedDocument:j?Te[0]:void 0,completedAt:j?Te[0].uploadedAt:void 0});const Pe=de("1099"),H=Pe.length>0;u.push({id:"upload_1099",type:"upload_document",title:"Upload 1099 Forms",description:H?`${Pe.length} 1099 form(s) uploaded`:"Upload any 1099 forms (1099-NEC, 1099-MISC, 1099-INT, 1099-DIV)",status:H?"complete":"pending",priority:"medium",documentType:"1099",matchedDocuments:H?Pe:void 0,matchedDocument:H?Pe[0]:void 0,completedAt:H?Pe[0].uploadedAt:void 0});const P=l.documentRequests?.find(ee=>ee.clientReviewConfirmation?.reviewedAt),_=!!P;return u.push({id:"review_summary",type:"review_summary",title:_?"Tax Summary Reviewed":"Review Tax Summary",description:_?`Reviewed and confirmed on ${new Date(P?.clientReviewConfirmation?.reviewedAt||0).toLocaleDateString()}`:"Client needs to review and approve the tax summary before filing",status:_?"complete":"pending",priority:"low",completedAt:P?.clientReviewConfirmation?.reviewedAt}),u});Ft(()=>{const u=W().filter(S=>S.status==="pending").length;l.onTasksChange?.(u)});const Q=zt(()=>{const u=W();return{total:u.length,pending:u.filter(S=>S.status==="pending").length,complete:u.filter(S=>S.status==="complete").length,inProgress:u.filter(S=>S.status==="in_progress").length}}),le=zt(()=>W().filter(u=>u.status==="pending")),_e=async()=>{if(le().length===0){te("No pending tasks to send");return}G(!0),te(null);try{const u=Sr.map(S=>({...S,required:S.type==="w2"||le().some(T=>T.documentType===S.type)}));await Ut(l.taxPortal,{taxYear:l?.taxPortal?.taxYear||new Date().getFullYear(),requestedDocuments:u,instructions:Xe()}),Ae(`Sent ${le().length} pending tasks to ${l?.taxPortal?.firstName} ${l?.taxPortal?.lastName}`),setTimeout(()=>Ae(null),5e3)}catch(u){te(u.message)}finally{G(!1)}},Xe=()=>`Please complete the following tasks:

${le().map((T,g)=>`${g+1}. ${T.title}: ${T.description}`).join(`
`)}`,Je=async u=>{$e(u.id),te(null),console.log(l?.taxPortal);try{const S=`${l?.taxPortal?.firstName||""} ${l?.taxPortal?.lastName||""}`.trim(),T=l?.taxPortal?.email,g=l?.taxPortal?.phone,c=[{type:u.type||"other",label:u.title,required:u.priority==="high",uploaded:!1}];await Ut(l.taxPortal,{taxYear:l?.taxPortal?.taxYear||new Date().getFullYear(),requestedDocuments:c,instructions:`Please complete the following task:

${u.title}: ${u.description}`,task:u}),Ae(`Reminder sent for "${u.title}" to ${S}`),setTimeout(()=>Ae(null),5e3)}catch(S){console.error("Error sending reminder:",S),te(S.message||"Failed to send reminder")}finally{$e(null)}},ft=async(u,S)=>{ae(!0),te(null);try{const T=l.documentRequests?.find(c=>c.status==="pending"||c.status==="partial");if(!T)throw new Error("No active document request found");const g=await jt(T.id,u.documentType||u.type,!0,S||m());if(g.success)we(c=>{const Y=new Set(c);return Y.add(u.id),Y}),Ae(`"${u.title}" marked as not needed`),setTimeout(()=>Ae(null),3e3);else throw new Error(g.error||"Failed to mark as not needed")}catch(T){console.error("Error marking as not needed:",T),te(T.message)}finally{ae(!1),ue(!1),pe(null),je("")}},gt=async u=>{ae(!0),te(null);try{const S=l.documentRequests?.find(g=>g.status==="pending"||g.status==="partial");if(!S)throw new Error("No active document request found");const T=await jt(S.id,u.documentType||u.type,!1);if(T.success)we(g=>{const c=new Set(g);return c.delete(u.id),c}),Ae(`"${u.title}" restored to pending`),setTimeout(()=>Ae(null),3e3);else throw new Error(T.error||"Failed to restore task")}catch(S){console.error("Error restoring task:",S),te(S.message)}finally{ae(!1)}},mt=u=>{pe(u),je(""),ue(!0)},st=u=>({high:{label:"High",color:"#ef4444",bg:"rgba(239, 68, 68, 0.1)"},medium:{label:"Medium",color:"#f59e0b",bg:"rgba(245, 158, 11, 0.1)"},low:{label:"Low",color:"#6b7280",bg:"rgba(107, 114, 128, 0.1)"}})[u],ut=u=>({pending:{label:"Pending",color:"#f59e0b",bg:"rgba(245, 158, 11, 0.1)"},complete:{label:"Complete",color:"#22c55e",bg:"rgba(34, 197, 94, 0.1)"},in_progress:{label:"In Progress",color:"#3b82f6",bg:"rgba(59, 130, 246, 0.1)"}})[u],Me=u=>u?new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",J={display:"flex","flex-direction":"column",gap:"1.5rem"},w={display:"flex","justify-content":"space-between","align-items":"flex-start","flex-wrap":"wrap",gap:"1rem"},I={"font-size":"1.25rem","font-weight":"600",color:"var(--text-primary, #1f2937)",margin:"0"},Z={display:"flex",gap:"1.5rem","margin-top":"0.5rem"},Oe={display:"flex","align-items":"center",gap:"0.5rem","font-size":"0.875rem"},Ye=u=>({width:"8px",height:"8px","border-radius":"50%",background:u}),Ge=u=>({padding:"0.75rem 1rem","border-radius":"8px","font-size":"0.875rem",background:u==="success"?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",color:u==="success"?"#22c55e":"#ef4444",border:`1px solid ${u==="success"?"#22c55e":"#ef4444"}`,display:"flex","align-items":"center",gap:"0.5rem"}),Ue={display:"flex","flex-direction":"column",gap:"0.75rem"},nt=(u,S=!1)=>({display:"flex","align-items":"flex-start",gap:"1rem",padding:"1rem",background:S?"rgba(245, 158, 11, 0.03)":u==="complete"?"rgba(34, 197, 94, 0.03)":"var(--surface-color, #ffffff)",border:`1px solid ${S?"rgba(245, 158, 11, 0.2)":u==="complete"?"rgba(34, 197, 94, 0.2)":"var(--border-color, #e5e7eb)"}`,"border-radius":"8px",transition:"all 0.2s ease",opacity:S?"0.7":"1"}),lt={display:"flex","align-items":"center","justify-content":"center","flex-shrink":"0","padding-top":"0.125rem"},De=(u,S=!1)=>({width:"24px",height:"24px","border-radius":"50%",border:u||S?"none":"2px solid var(--border-color, #d1d5db)",background:S?"#f59e0b":u?"#22c55e":"transparent",display:"flex","align-items":"center","justify-content":"center",cursor:"pointer",transition:"all 0.2s ease"}),Ke={flex:"1","min-width":"0"},v=(u,S=!1)=>({"font-weight":"500","font-size":"0.9375rem",color:S?"#f59e0b":u?"var(--text-secondary, #6b7280)":"var(--text-primary, #1f2937)","text-decoration":u||S?"line-through":"none","margin-bottom":"0.25rem"}),p={"font-size":"0.8125rem",color:"var(--text-muted, #9ca3af)","margin-bottom":"0.5rem"},R={display:"flex",gap:"0.5rem","flex-wrap":"wrap"},M=u=>({display:"inline-flex","align-items":"center",padding:"0.125rem 0.5rem","border-radius":"4px",background:u.bg,color:u.color,"font-size":"0.6875rem","font-weight":"600","text-transform":"uppercase","letter-spacing":"0.05em"}),V={padding:"0.875rem 2rem",background:"var(--primary-color, #3b82f6)",color:"white",border:"none","border-radius":"8px","font-size":"1rem","font-weight":"600",cursor:"pointer",display:"flex","align-items":"center",gap:"0.5rem",transition:"all 0.2s ease","box-shadow":"0 4px 6px rgba(59, 130, 246, 0.25)"},n={...V,background:"var(--border-color, #d1d5db)",cursor:"not-allowed","box-shadow":"none"},o={"font-size":"0.75rem",color:"#22c55e","margin-top":"0.25rem"},h={display:"flex","flex-direction":"column","align-items":"center",padding:"1.5rem",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1))","border-radius":"12px","margin-bottom":"1rem"};return(()=>{var u=On(),S=u.firstChild,T=S.firstChild,g=T.firstChild,c=g.nextSibling,Y=c.firstChild,oe=Y.firstChild,xe=oe.nextSibling,re=xe.firstChild,Te=Y.nextSibling,j=Te.firstChild,Pe=j.nextSibling,H=Pe.firstChild;return t(g,I),t(c,Z),e(xe,()=>Q().pending,re),e(Pe,()=>Q().complete,H),e(c,a($,{get when(){return Q().inProgress>0},get children(){var P=Fn(),_=P.firstChild,ee=_.nextSibling,N=ee.firstChild;return e(ee,()=>Q().inProgress,N),z(ge=>{var F=Oe,q=Ye("#3b82f6");return ge.e=t(P,F,ge.e),ge.t=t(_,q,ge.t),ge},{e:void 0,t:void 0}),P}}),null),e(u,a($,{get when(){return Be()},get children(){var P=An(),_=P.firstChild;return _.style.setProperty("width","16px"),_.style.setProperty("height","16px"),e(P,Be,null),z(ee=>t(P,Ge("error"),ee)),P}}),null),e(u,a($,{get when(){return fe()},get children(){var P=Ln(),_=P.firstChild;return _.style.setProperty("width","16px"),_.style.setProperty("height","16px"),e(P,fe,null),z(ee=>t(P,Ge("success"),ee)),P}}),null),e(u,a($,{get when(){return le().length>0},get children(){return a(ct,{get children(){var P=Rn(),_=P.firstChild,ee=_.nextSibling,N=ee.nextSibling,ge=N.firstChild,F=ge.nextSibling,q=F.nextSibling,O=q.nextSibling;O.nextSibling;var f=N.nextSibling,ye=f.firstChild;return _.style.setProperty("font-size","2.5rem"),_.style.setProperty("margin-bottom","0.5rem"),e(_,()=>le().length),ee.style.setProperty("font-size","1rem"),ee.style.setProperty("font-weight","500"),ee.style.setProperty("color","var(--text-primary)"),ee.style.setProperty("margin-bottom","0.5rem"),N.style.setProperty("font-size","0.875rem"),N.style.setProperty("color","var(--text-secondary)"),N.style.setProperty("margin-bottom","1.5rem"),N.style.setProperty("text-align","center"),e(N,()=>l?.taxPortal?.firstName,F),e(N,()=>l?.taxPortal?.lastName,O),f.$$click=_e,ye.style.setProperty("width","20px"),ye.style.setProperty("height","20px"),e(f,()=>E()?"Sending...":"Send All Pending to Client",null),z(me=>{var Ie=h,B=E()?n:V,Ee=E();return me.e=t(P,Ie,me.e),me.t=t(f,B,me.t),Ee!==me.a&&(f.disabled=me.a=Ee),me},{e:void 0,t:void 0,a:void 0}),P}})}}),null),e(u,a(ct,{get children(){var P=Ht();return e(P,a(pt,{get each(){return W()},children:_=>{const ee=st(_.priority),N=ut(_.status),ge=_.status==="complete",F=ke().has(_.id);return console.log(_),(()=>{var q=Gn(),O=q.firstChild,f=O.firstChild,ye=O.nextSibling,me=ye.firstChild,Ie=me.nextSibling,B=Ie.nextSibling,Ee=B.firstChild,U=Ee.firstChild;return t(O,lt),e(f,a($,{when:ge,get children(){var d=Un();return d.style.setProperty("width","14px"),d.style.setProperty("height","14px"),d}}),null),e(f,a($,{when:F&&!ge,get children(){var d=Wn();return d.style.setProperty("width","14px"),d.style.setProperty("height","14px"),d}}),null),t(ye,Ke),e(me,()=>_.title),t(Ie,p),e(Ie,()=>_.description),e(B,a($,{when:F,get children(){var d=jn();return z(A=>t(d,M({color:"#f59e0b",bg:"rgba(245, 158, 11, 0.1)"}),A)),d}}),Ee),e(B,a($,{when:!F,get children(){var d=qt();return e(d,()=>N.label),z(A=>t(d,M(N),A)),d}}),Ee),e(Ee,()=>ee.label,U),e(B,a($,{get when(){return _.documentType&&!_.matchedDocuments},get children(){var d=qt();return e(d,()=>_.documentType),z(A=>t(d,M({color:"#8b5cf6",bg:"rgba(139, 92, 246, 0.1)"}),A)),d}}),null),e(ye,a($,{get when(){return _.matchedDocuments&&_.matchedDocuments.length>0},get children(){var d=Vn(),A=d.firstChild,se=A.firstChild,He=se.nextSibling,Qe=He.nextSibling;Qe.nextSibling;var et=A.nextSibling;return d.style.setProperty("margin-top","0.75rem"),d.style.setProperty("padding","0.75rem"),d.style.setProperty("background","rgba(34, 197, 94, 0.05)"),d.style.setProperty("border-radius","6px"),d.style.setProperty("border","1px solid rgba(34, 197, 94, 0.2)"),A.style.setProperty("font-size","0.75rem"),A.style.setProperty("font-weight","600"),A.style.setProperty("color","#166534"),A.style.setProperty("margin-bottom","0.5rem"),A.style.setProperty("display","flex"),A.style.setProperty("align-items","center"),A.style.setProperty("gap","0.375rem"),se.style.setProperty("width","14px"),se.style.setProperty("height","14px"),e(A,()=>_.matchedDocuments.length,Qe),et.style.setProperty("display","flex"),et.style.setProperty("flex-direction","column"),et.style.setProperty("gap","0.375rem"),e(et,a(pt,{get each(){return _.matchedDocuments},children:it=>(()=>{var tt=Jn(),Ze=tt.firstChild,rt=Ze.nextSibling;return tt.style.setProperty("display","flex"),tt.style.setProperty("align-items","center"),tt.style.setProperty("gap","0.5rem"),tt.style.setProperty("font-size","0.8125rem"),tt.style.setProperty("color","var(--text-secondary)"),Ze.style.setProperty("display","inline-flex"),Ze.style.setProperty("padding","0.125rem 0.375rem"),Ze.style.setProperty("background","rgba(139, 92, 246, 0.1)"),Ze.style.setProperty("color","#8b5cf6"),Ze.style.setProperty("border-radius","4px"),Ze.style.setProperty("font-size","0.6875rem"),Ze.style.setProperty("font-weight","600"),e(Ze,()=>kt[it.drakeFormType||"other"]),rt.style.setProperty("max-width","200px"),rt.style.setProperty("overflow","hidden"),rt.style.setProperty("text-overflow","ellipsis"),rt.style.setProperty("white-space","nowrap"),e(rt,()=>it.originalFileName),e(tt,a($,{get when(){return it.payerInfo?.name},get children(){var dt=Kn();return dt.firstChild,dt.style.setProperty("color","var(--text-muted)"),dt.style.setProperty("font-size","0.75rem"),e(dt,()=>it.payerInfo?.name,null),dt}}),null),z(()=>bt(rt,"title",it.originalFileName)),tt})()})),d}}),null),e(ye,a($,{get when(){return ge&&_.completedAt&&!_.matchedDocuments},get children(){var d=Hn();return d.firstChild,t(d,o),e(d,()=>Me(_.completedAt),null),d}}),null),e(ye,a($,{get when(){return _.type==="sign_letter"&&_.signedRequest},get children(){return[(()=>{var d=qn(),A=d.firstChild;return d.$$mouseout=se=>{se.currentTarget.style.transform="translateY(0)",se.currentTarget.style.boxShadow="0 2px 4px rgba(59, 130, 246, 0.3)"},d.$$mouseover=se=>{se.currentTarget.style.transform="translateY(-1px)",se.currentTarget.style.boxShadow="0 4px 8px rgba(59, 130, 246, 0.4)"},d.$$click=()=>{_.signedRequest&&Nn({client:l.taxPortal,request:_.signedRequest,logo:l.logo})},d.style.setProperty("margin-top","0.75rem"),d.style.setProperty("padding","0.5rem 1rem"),d.style.setProperty("background","linear-gradient(135deg, #3b82f6, #1d4ed8)"),d.style.setProperty("color","white"),d.style.setProperty("border","none"),d.style.setProperty("border-radius","6px"),d.style.setProperty("font-size","0.8125rem"),d.style.setProperty("font-weight","500"),d.style.setProperty("cursor","pointer"),d.style.setProperty("display","inline-flex"),d.style.setProperty("align-items","center"),d.style.setProperty("gap","0.5rem"),d.style.setProperty("transition","all 0.2s ease"),d.style.setProperty("box-shadow","0 2px 4px rgba(59, 130, 246, 0.3)"),A.style.setProperty("width","16px"),A.style.setProperty("height","16px"),d})(),(()=>{var d=Yt(),A=d.firstChild;return d.$$mouseout=se=>{se.currentTarget.style.transform="translateY(0)",se.currentTarget.style.boxShadow="0 2px 4px rgba(139, 92, 246, 0.3)"},d.$$mouseover=se=>{se.currentTarget.style.transform="translateY(-1px)",se.currentTarget.style.boxShadow="0 4px 8px rgba(139, 92, 246, 0.4)"},d.$$click=()=>{_.signedRequest&&(L(_.signedRequest),b("engagement"),ce(!0))},d.style.setProperty("margin-top","0.5rem"),d.style.setProperty("margin-left","0.5rem"),d.style.setProperty("padding","0.5rem 1rem"),d.style.setProperty("background","linear-gradient(135deg, #8b5cf6, #6d28d9)"),d.style.setProperty("color","white"),d.style.setProperty("border","none"),d.style.setProperty("border-radius","6px"),d.style.setProperty("font-size","0.8125rem"),d.style.setProperty("font-weight","500"),d.style.setProperty("cursor","pointer"),d.style.setProperty("display","inline-flex"),d.style.setProperty("align-items","center"),d.style.setProperty("gap","0.5rem"),d.style.setProperty("transition","all 0.2s ease"),d.style.setProperty("box-shadow","0 2px 4px rgba(139, 92, 246, 0.3)"),A.style.setProperty("width","16px"),A.style.setProperty("height","16px"),d})(),(()=>{var d=Xt(),A=d.firstChild;return d.$$click=()=>_.signedRequest&&ze(_.signedRequest,"engagement"),d.style.setProperty("margin-top","0.5rem"),d.style.setProperty("margin-left","0.5rem"),d.style.setProperty("padding","0.5rem 1rem"),d.style.setProperty("border","1px solid #e2e8f0"),d.style.setProperty("border-radius","6px"),d.style.setProperty("font-size","0.8125rem"),d.style.setProperty("font-weight","500"),d.style.setProperty("cursor","pointer"),d.style.setProperty("display","inline-flex"),d.style.setProperty("align-items","center"),d.style.setProperty("gap","0.5rem"),d.style.setProperty("transition","all 0.2s ease"),A.style.setProperty("width","16px"),A.style.setProperty("height","16px"),e(d,()=>C()===_.signedRequest?.id+"engagement"?"Copied!":"Copy Link",null),z(se=>{var He=C()===_.signedRequest?.id+"engagement"?"#22c55e":"#f1f5f9",Qe=C()===_.signedRequest?.id+"engagement"?"white":"#64748b";return He!==se.e&&((se.e=He)!=null?d.style.setProperty("background",He):d.style.removeProperty("background")),Qe!==se.t&&((se.t=Qe)!=null?d.style.setProperty("color",Qe):d.style.removeProperty("color")),se},{e:void 0,t:void 0}),d})()]}}),null),e(ye,a($,{get when(){return _.type==="set_signing_pin"&&_.pinRequest},get children(){return[(()=>{var d=Yn(),A=d.firstChild;return d.$$mouseout=se=>{se.currentTarget.style.transform="translateY(0)",se.currentTarget.style.boxShadow="0 2px 4px rgba(16, 185, 129, 0.3)"},d.$$mouseover=se=>{se.currentTarget.style.transform="translateY(-1px)",se.currentTarget.style.boxShadow="0 4px 8px rgba(16, 185, 129, 0.4)"},d.$$click=()=>{_.pinRequest&&Dn({client:l.taxPortal,request:_.pinRequest,logo:l.logo})},d.style.setProperty("margin-top","0.75rem"),d.style.setProperty("padding","0.5rem 1rem"),d.style.setProperty("background","linear-gradient(135deg, #10b981, #059669)"),d.style.setProperty("color","white"),d.style.setProperty("border","none"),d.style.setProperty("border-radius","6px"),d.style.setProperty("font-size","0.8125rem"),d.style.setProperty("font-weight","500"),d.style.setProperty("cursor","pointer"),d.style.setProperty("display","inline-flex"),d.style.setProperty("align-items","center"),d.style.setProperty("gap","0.5rem"),d.style.setProperty("transition","all 0.2s ease"),d.style.setProperty("box-shadow","0 2px 4px rgba(16, 185, 129, 0.3)"),A.style.setProperty("width","16px"),A.style.setProperty("height","16px"),d})(),(()=>{var d=Yt(),A=d.firstChild;return d.$$mouseout=se=>{se.currentTarget.style.transform="translateY(0)",se.currentTarget.style.boxShadow="0 2px 4px rgba(139, 92, 246, 0.3)"},d.$$mouseover=se=>{se.currentTarget.style.transform="translateY(-1px)",se.currentTarget.style.boxShadow="0 4px 8px rgba(139, 92, 246, 0.4)"},d.$$click=()=>{_.pinRequest&&(L(_.pinRequest),b("pin"),ce(!0))},d.style.setProperty("margin-top","0.5rem"),d.style.setProperty("margin-left","0.5rem"),d.style.setProperty("padding","0.5rem 1rem"),d.style.setProperty("background","linear-gradient(135deg, #8b5cf6, #6d28d9)"),d.style.setProperty("color","white"),d.style.setProperty("border","none"),d.style.setProperty("border-radius","6px"),d.style.setProperty("font-size","0.8125rem"),d.style.setProperty("font-weight","500"),d.style.setProperty("cursor","pointer"),d.style.setProperty("display","inline-flex"),d.style.setProperty("align-items","center"),d.style.setProperty("gap","0.5rem"),d.style.setProperty("transition","all 0.2s ease"),d.style.setProperty("box-shadow","0 2px 4px rgba(139, 92, 246, 0.3)"),A.style.setProperty("width","16px"),A.style.setProperty("height","16px"),d})(),(()=>{var d=Xt(),A=d.firstChild;return d.$$click=()=>_.pinRequest&&ze(_.pinRequest,"pin"),d.style.setProperty("margin-top","0.5rem"),d.style.setProperty("margin-left","0.5rem"),d.style.setProperty("padding","0.5rem 1rem"),d.style.setProperty("border","1px solid #e2e8f0"),d.style.setProperty("border-radius","6px"),d.style.setProperty("font-size","0.8125rem"),d.style.setProperty("font-weight","500"),d.style.setProperty("cursor","pointer"),d.style.setProperty("display","inline-flex"),d.style.setProperty("align-items","center"),d.style.setProperty("gap","0.5rem"),d.style.setProperty("transition","all 0.2s ease"),A.style.setProperty("width","16px"),A.style.setProperty("height","16px"),e(d,()=>C()===_.pinRequest?.id+"pin"?"Copied!":"Copy Link",null),z(se=>{var He=C()===_.pinRequest?.id+"pin"?"#22c55e":"#f1f5f9",Qe=C()===_.pinRequest?.id+"pin"?"white":"#64748b";return He!==se.e&&((se.e=He)!=null?d.style.setProperty("background",He):d.style.removeProperty("background")),Qe!==se.t&&((se.t=Qe)!=null?d.style.setProperty("color",Qe):d.style.removeProperty("color")),se},{e:void 0,t:void 0}),d})()]}}),null),e(q,a($,{get when(){return!ge&&!ke().has(_.id)},get children(){var d=Ht();return d.style.setProperty("display","flex"),d.style.setProperty("flex-direction","column"),d.style.setProperty("gap","0.5rem"),d.style.setProperty("align-items","flex-end"),e(d,a(Pt,{variant:"secondary",size:"sm",onClick:()=>Je(_),get disabled(){return he()===_.id},get children(){return he()===_.id?"Sending...":"Send Reminder"}}),null),e(d,a($,{get when(){return _.type==="upload_document"},get children(){var A=Xn(),se=A.firstChild;return A.$$mouseout=He=>{He.currentTarget.style.borderColor="#cbd5e1",He.currentTarget.style.color="#94a3b8"},A.$$mouseover=He=>{He.currentTarget.style.borderColor="#f59e0b",He.currentTarget.style.color="#f59e0b"},A.$$click=()=>mt(_),A.style.setProperty("padding","0.375rem 0.75rem"),A.style.setProperty("background","transparent"),A.style.setProperty("color","#94a3b8"),A.style.setProperty("border","1px dashed #cbd5e1"),A.style.setProperty("border-radius","6px"),A.style.setProperty("font-size","0.75rem"),A.style.setProperty("cursor","pointer"),A.style.setProperty("display","flex"),A.style.setProperty("align-items","center"),A.style.setProperty("gap","0.375rem"),A.style.setProperty("transition","all 0.2s ease"),se.style.setProperty("width","14px"),se.style.setProperty("height","14px"),A}}),null),d}}),null),e(q,a($,{get when(){return ke().has(_.id)},get children(){var d=Qn(),A=d.firstChild,se=A.nextSibling;return d.style.setProperty("display","flex"),d.style.setProperty("flex-direction","column"),d.style.setProperty("gap","0.375rem"),d.style.setProperty("align-items","flex-end"),A.style.setProperty("padding","0.25rem 0.5rem"),A.style.setProperty("background","rgba(245, 158, 11, 0.1)"),A.style.setProperty("color","#f59e0b"),A.style.setProperty("border-radius","4px"),A.style.setProperty("font-size","0.6875rem"),A.style.setProperty("font-weight","600"),A.style.setProperty("text-transform","uppercase"),se.$$click=()=>gt(_),se.style.setProperty("padding","0.25rem 0.5rem"),se.style.setProperty("background","transparent"),se.style.setProperty("color","#64748b"),se.style.setProperty("border","none"),se.style.setProperty("font-size","0.75rem"),se.style.setProperty("cursor","pointer"),se.style.setProperty("text-decoration","underline"),e(se,()=>Re()?"Restoring...":"Undo"),z(()=>se.disabled=Re()),d}}),null),z(d=>{var A=nt(_.status,F),se=De(ge,F),He=v(ge,F),Qe=R,et=M(ee);return d.e=t(q,A,d.e),d.t=t(f,se,d.t),d.a=t(me,He,d.a),d.o=t(B,Qe,d.o),d.i=t(Ee,et,d.i),d},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),q})()}})),z(_=>t(P,Ue,_)),P}}),null),e(u,a($,{get when(){return Q().pending===0},get children(){return a(ct,{get children(){var P=Mn(),_=P.firstChild,ee=_.firstChild,N=_.nextSibling,ge=N.nextSibling,F=ge.firstChild;return P.style.setProperty("text-align","center"),P.style.setProperty("padding","2rem"),P.style.setProperty("background","rgba(34, 197, 94, 0.05)"),P.style.setProperty("border-radius","8px"),_.style.setProperty("font-size","3rem"),_.style.setProperty("margin-bottom","0.75rem"),_.style.setProperty("color","#22c55e"),ee.style.setProperty("width","48px"),ee.style.setProperty("height","48px"),N.style.setProperty("font-size","1.125rem"),N.style.setProperty("font-weight","600"),N.style.setProperty("color","#166534"),N.style.setProperty("margin-bottom","0.5rem"),ge.style.setProperty("font-size","0.875rem"),ge.style.setProperty("color","#22c55e"),e(ge,()=>l?.taxPortal?.firstName,F),P}})}}),null),e(u,a($,{get when(){return qe(()=>!!r())()&&K()},get children(){var P=En(),_=P.firstChild,ee=_.firstChild,N=ee.firstChild;return P.$$click=ge=>{ge.target===ge.currentTarget&&ce(!1)},P.style.setProperty("position","fixed"),P.style.setProperty("top","0"),P.style.setProperty("left","0"),P.style.setProperty("right","0"),P.style.setProperty("bottom","0"),P.style.setProperty("background-color","rgba(0, 0, 0, 0.5)"),P.style.setProperty("display","flex"),P.style.setProperty("align-items","center"),P.style.setProperty("justify-content","center"),P.style.setProperty("z-index","1000"),P.style.setProperty("padding","1rem"),_.style.setProperty("background","white"),_.style.setProperty("border-radius","12px"),_.style.setProperty("max-width","900px"),_.style.setProperty("max-height","90vh"),_.style.setProperty("overflow","auto"),_.style.setProperty("box-shadow","0 25px 50px -12px rgba(0, 0, 0, 0.25)"),_.style.setProperty("position","relative"),ee.$$click=()=>ce(!1),ee.style.setProperty("position","absolute"),ee.style.setProperty("top","1rem"),ee.style.setProperty("right","1rem"),ee.style.setProperty("background","#f1f5f9"),ee.style.setProperty("border","none"),ee.style.setProperty("border-radius","50%"),ee.style.setProperty("width","32px"),ee.style.setProperty("height","32px"),ee.style.setProperty("cursor","pointer"),ee.style.setProperty("display","flex"),ee.style.setProperty("align-items","center"),ee.style.setProperty("justify-content","center"),ee.style.setProperty("z-index","10"),N.style.setProperty("width","20px"),N.style.setProperty("height","20px"),N.style.setProperty("color","#64748b"),e(_,a(_r,{get request(){return K()},get type(){return Se()}}),null),P}}),null),e(u,a($,{get when(){return qe(()=>!!be())()&&D()},get children(){var P=Bn(),_=P.firstChild,ee=_.firstChild,N=ee.firstChild,ge=N.firstChild,F=N.nextSibling,q=F.firstChild,O=q.nextSibling,f=ee.nextSibling,ye=f.nextSibling,me=ye.firstChild,Ie=me.nextSibling,B=ye.nextSibling,Ee=B.firstChild,U=Ee.nextSibling;return P.$$click=d=>{d.target===d.currentTarget&&(ue(!1),pe(null))},P.style.setProperty("position","fixed"),P.style.setProperty("top","0"),P.style.setProperty("left","0"),P.style.setProperty("right","0"),P.style.setProperty("bottom","0"),P.style.setProperty("background-color","rgba(0, 0, 0, 0.5)"),P.style.setProperty("display","flex"),P.style.setProperty("align-items","center"),P.style.setProperty("justify-content","center"),P.style.setProperty("z-index","1000"),P.style.setProperty("padding","1rem"),_.style.setProperty("background","white"),_.style.setProperty("border-radius","12px"),_.style.setProperty("max-width","450px"),_.style.setProperty("width","100%"),_.style.setProperty("padding","1.5rem"),_.style.setProperty("box-shadow","0 25px 50px -12px rgba(0, 0, 0, 0.25)"),ee.style.setProperty("display","flex"),ee.style.setProperty("align-items","center"),ee.style.setProperty("gap","0.75rem"),ee.style.setProperty("margin-bottom","1rem"),N.style.setProperty("width","40px"),N.style.setProperty("height","40px"),N.style.setProperty("border-radius","10px"),N.style.setProperty("background","rgba(245, 158, 11, 0.1)"),N.style.setProperty("display","flex"),N.style.setProperty("align-items","center"),N.style.setProperty("justify-content","center"),ge.style.setProperty("width","24px"),ge.style.setProperty("height","24px"),ge.style.setProperty("color","#f59e0b"),q.style.setProperty("font-size","1rem"),q.style.setProperty("font-weight","600"),q.style.setProperty("color","#1f2937"),q.style.setProperty("margin","0"),O.style.setProperty("font-size","0.875rem"),O.style.setProperty("color","#6b7280"),O.style.setProperty("margin","0"),e(O,()=>D()?.title),f.style.setProperty("font-size","0.875rem"),f.style.setProperty("color","#4b5563"),f.style.setProperty("margin-bottom","1rem"),ye.style.setProperty("margin-bottom","1.5rem"),me.style.setProperty("display","block"),me.style.setProperty("font-size","0.875rem"),me.style.setProperty("font-weight","500"),me.style.setProperty("color","#374151"),me.style.setProperty("margin-bottom","0.5rem"),Ie.addEventListener("blur",d=>d.currentTarget.style.borderColor="#d1d5db"),Ie.addEventListener("focus",d=>d.currentTarget.style.borderColor="#f59e0b"),Ie.$$input=d=>je(d.currentTarget.value),Ie.style.setProperty("width","100%"),Ie.style.setProperty("padding","0.625rem 0.75rem"),Ie.style.setProperty("border","1px solid #d1d5db"),Ie.style.setProperty("border-radius","8px"),Ie.style.setProperty("font-size","0.875rem"),Ie.style.setProperty("outline","none"),Ie.style.setProperty("box-sizing","border-box"),B.style.setProperty("display","flex"),B.style.setProperty("gap","0.75rem"),B.style.setProperty("justify-content","flex-end"),Ee.$$click=()=>{ue(!1),pe(null),je("")},Ee.style.setProperty("padding","0.625rem 1rem"),Ee.style.setProperty("background","#f3f4f6"),Ee.style.setProperty("color","#374151"),Ee.style.setProperty("border","none"),Ee.style.setProperty("border-radius","8px"),Ee.style.setProperty("font-size","0.875rem"),Ee.style.setProperty("font-weight","500"),Ee.style.setProperty("cursor","pointer"),U.$$click=()=>D()&&ft(D()),U.style.setProperty("padding","0.625rem 1rem"),U.style.setProperty("color","white"),U.style.setProperty("border","none"),U.style.setProperty("border-radius","8px"),U.style.setProperty("font-size","0.875rem"),U.style.setProperty("font-weight","500"),U.style.setProperty("display","flex"),U.style.setProperty("align-items","center"),U.style.setProperty("gap","0.5rem"),e(U,(()=>{var d=qe(()=>!!Re());return()=>d()?[(()=>{var A=Zn();return A.style.setProperty("width","16px"),A.style.setProperty("height","16px"),A.style.setProperty("animation","spin 1s linear infinite"),A})(),"Processing..."]:"Mark as Not Needed"})()),z(d=>{var A=Re(),se=Re()?"#fbbf24":"#f59e0b",He=Re()?"not-allowed":"pointer";return A!==d.e&&(U.disabled=d.e=A),se!==d.t&&((d.t=se)!=null?U.style.setProperty("background",se):U.style.removeProperty("background")),He!==d.a&&((d.a=He)!=null?U.style.setProperty("cursor",He):U.style.removeProperty("cursor")),d},{e:void 0,t:void 0,a:void 0}),z(()=>Ie.value=m()),P}}),null),z(P=>{var _=J,ee=w,N=Oe,ge=Ye("#f59e0b"),F=Oe,q=Ye("#22c55e");return P.e=t(u,_,P.e),P.t=t(S,ee,P.t),P.a=t(Y,N,P.a),P.o=t(oe,ge,P.o),P.i=t(Te,F,P.i),P.n=t(j,q,P.n),P},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),u})()};$t(["click","input","mouseover","mouseout"]);var tl=y('<svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"clip-rule=evenodd>'),rl=y('<svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"clip-rule=evenodd>'),nl=y('<svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"clip-rule=evenodd>'),ll=y('<button><svg viewBox="0 0 20 20"fill=currentColor><path d="M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.476.859h4.002z">'),il=y("<div><div></div><div>Analyzing <!> document(s)...</div><div>AI is extracting data and verifying information"),Qt=y("<div>"),ol=y("<div><div></div><div>Generating personalized tax strategies..."),sl=y('<div><h4><svg viewBox="0 0 20 20"fill=currentColor><path d="M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.476.859h4.002z"></path></svg>Tax Strategy Suggestions'),al=y("<div><div>No documents to analyze</div><div>Upload tax documents to begin AI analysis"),dl=y('<div><div>Ready to Analyze</div><div> document(s) available</div><div>Click "Analyze All Documents" to extract data and get insights'),yl=y(`<div><div><div><h3>AI Document Analysis</h3><p>Analyze documents for <!> <!> - Tax Year </p></div><div><button><svg viewBox="0 0 20 20"fill=currentColor><path d="M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"></path></svg></button></div></div><style>
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `),cl=y('<div><div><span></span><span><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"clip-rule=evenodd></path></svg>%</span></div><div></div><div>'),ul=y("<div><span></span><span>"),pl=y("<div>Potential Savings: "),gl=y("<div><div><span></span><span></span></div><p>");const ml=l=>{const[E,G]=Ne(!1),[he,$e]=Ne([]),[fe,Ae]=Ne(!1),[Be,te]=Ne(!1),[Fe,Le]=Ne([]),[r,ce]=Ne(!1),K=Me=>{switch(Me){case"good":return{color:"#22c55e",bg:"rgba(34, 197, 94, 0.1)",border:"rgba(34, 197, 94, 0.3)"};case"review":return{color:"#f59e0b",bg:"rgba(245, 158, 11, 0.1)",border:"rgba(245, 158, 11, 0.3)"};case"issue":return{color:"#ef4444",bg:"rgba(239, 68, 68, 0.1)",border:"rgba(239, 68, 68, 0.3)"}}},L=Me=>{switch(Me){case"high":return{color:"#ef4444",bg:"rgba(239, 68, 68, 0.1)"};case"medium":return{color:"#f59e0b",bg:"rgba(245, 158, 11, 0.1)"};case"low":return{color:"#3b82f6",bg:"rgba(59, 130, 246, 0.1)"}}},Se=async()=>{G(!0),$e([]),ce(!1);try{await new Promise(J=>setTimeout(J,1500));const Me=l.documents.map(J=>{let w="review",I="";J.verified&&J.aiConfidence&&J.aiConfidence>=.9?(w="good",I="Document verified and data extracted successfully"):J.uploadStatus==="error"?(w="issue",I=J.errorMessage||"Error processing document"):J.aiConfidence&&J.aiConfidence<.7?(w="issue",I="Low confidence - manual review required"):J.verified?(w="good",I="Document processed successfully"):(w="review",I="Document needs verification");const Z=[];return J.extractedAmounts&&(J.extractedAmounts.wages!==void 0&&Z.push({field:"Wages (Box 1)",value:`$${J.extractedAmounts.wages.toLocaleString()}`}),J.extractedAmounts.federalTaxWithheld!==void 0&&Z.push({field:"Federal Tax Withheld",value:`$${J.extractedAmounts.federalTaxWithheld.toLocaleString()}`}),J.extractedAmounts.nonEmployeeCompensation!==void 0&&Z.push({field:"Non-Employee Compensation",value:`$${J.extractedAmounts.nonEmployeeCompensation.toLocaleString()}`}),J.extractedAmounts.interestIncome!==void 0&&Z.push({field:"Interest Income",value:`$${J.extractedAmounts.interestIncome.toLocaleString()}`}),J.extractedAmounts.ordinaryDividends!==void 0&&Z.push({field:"Dividends",value:`$${J.extractedAmounts.ordinaryDividends.toLocaleString()}`}),J.extractedAmounts.mortgageInterest!==void 0&&Z.push({field:"Mortgage Interest",value:`$${J.extractedAmounts.mortgageInterest.toLocaleString()}`}),J.extractedAmounts.totalAmount!==void 0&&Z.length===0&&Z.push({field:"Total Amount",value:`$${J.extractedAmounts.totalAmount.toLocaleString()}`})),Z.length===0&&Z.push({field:"Status",value:"No data extracted yet"}),{documentId:J.id,documentName:J.originalFileName,category:kt[J.drakeFormType||"other"],extractedData:Z,confidence:J.aiConfidence||Math.random()*.3+.7,status:w,message:I}});$e(Me),ce(!0)}catch(Me){console.error("Analysis error:",Me)}finally{G(!1)}},b=async()=>{te(!0),Ae(!0);try{await new Promise(Oe=>setTimeout(Oe,1200));let Me=0,J=0,w=!1,I=!1;l.documents.forEach(Oe=>{Oe.extractedAmounts&&(Oe.extractedAmounts.wages&&(Me+=Oe.extractedAmounts.wages),Oe.extractedAmounts.nonEmployeeCompensation&&(Me+=Oe.extractedAmounts.nonEmployeeCompensation,I=!0),Oe.extractedAmounts.federalTaxWithheld&&(J+=Oe.extractedAmounts.federalTaxWithheld),Oe.extractedAmounts.mortgageInterest&&(w=!0))});const Z=[];I&&(Z.push({title:"Qualified Business Income Deduction",description:"Self-employment income may qualify for the 20% QBI deduction under Section 199A.",potentialSavings:"Up to 20% of qualified business income",priority:"high"}),Z.push({title:"Self-Employment Tax Deduction",description:"Deduct 50% of self-employment taxes paid from adjusted gross income.",priority:"high"})),w&&Z.push({title:"Itemize vs Standard Deduction",description:"With mortgage interest, compare itemized deductions against the standard deduction.",potentialSavings:"Varies based on total itemized deductions",priority:"medium"}),Z.push({title:"Retirement Contribution Review",description:"Verify maximum IRA/401(k) contributions have been made for tax year "+l.taxYear+".",potentialSavings:"Up to $6,500 (IRA) or $23,000 (401k) in deductions",priority:"medium"}),J>Me*.25&&Z.push({title:"Withholding Adjustment",description:"Consider adjusting W-4 withholding - current withholding appears high relative to income.",priority:"low"}),Z.push({title:"Health Savings Account (HSA)",description:"If enrolled in a high-deductible health plan, maximize HSA contributions for triple tax benefits.",potentialSavings:"Up to $4,150 individual / $8,300 family deduction",priority:"medium"}),Le(Z)}catch(Me){console.error("Strategy error:",Me)}finally{te(!1)}},C={display:"flex","flex-direction":"column",gap:"1.5rem"},i={display:"flex","justify-content":"space-between","align-items":"center","flex-wrap":"wrap",gap:"1rem"},be={"font-size":"1.25rem","font-weight":"600",color:"var(--text-primary, #1f2937)",margin:"0"},ue={"font-size":"0.875rem",color:"var(--text-secondary, #6b7280)","margin-top":"0.25rem"},D={display:"flex",gap:"0.75rem","flex-wrap":"wrap"},pe=Me=>({padding:"0.875rem 1.5rem","font-size":"1rem","font-weight":"600","border-radius":"10px",border:Me?"none":"2px solid var(--border-color, #e5e7eb)",background:Me?"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)":"white",color:Me?"white":"var(--text-primary, #1f2937)",cursor:"pointer",transition:"all 0.2s ease",display:"flex","align-items":"center",gap:"0.5rem","box-shadow":Me?"0 4px 12px rgba(59, 130, 246, 0.3)":"none"}),m={display:"grid","grid-template-columns":"repeat(auto-fill, minmax(320px, 1fr))",gap:"1rem"},je=Me=>{const J=K(Me);return{padding:"1.25rem","border-radius":"12px",border:`1px solid ${J.border}`,background:J.bg,transition:"all 0.2s ease"}},Re={display:"flex","justify-content":"space-between","align-items":"flex-start","margin-bottom":"1rem"},ae={display:"inline-block",padding:"0.25rem 0.75rem","border-radius":"6px",background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6","font-size":"0.75rem","font-weight":"600"},ke=Me=>{let J="#22c55e";return Me<.7?J="#ef4444":Me<.9&&(J="#f59e0b"),{display:"flex","align-items":"center",gap:"0.375rem","font-size":"0.75rem","font-weight":"600",color:J}},we={"font-weight":"600","font-size":"0.9375rem",color:"var(--text-primary, #1f2937)","margin-bottom":"0.5rem","word-break":"break-word"},Ve={display:"flex","justify-content":"space-between",padding:"0.375rem 0","font-size":"0.8125rem","border-bottom":"1px solid rgba(0,0,0,0.05)"},ze={color:"var(--text-secondary, #6b7280)"},de={"font-weight":"600",color:"var(--text-primary, #1f2937)"},W=Me=>({"margin-top":"0.75rem",padding:"0.5rem 0.75rem","border-radius":"6px",background:"rgba(255,255,255,0.5)","font-size":"0.8125rem",color:K(Me).color,display:"flex","align-items":"center",gap:"0.375rem"}),Q=Me=>({padding:"1.25rem","border-radius":"12px",border:"1px solid var(--border-color, #e5e7eb)",background:"white","margin-bottom":"1rem"}),le={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.5rem"},_e={"font-weight":"600","font-size":"1rem",color:"var(--text-primary, #1f2937)"},Xe=Me=>{const J=L(Me);return{padding:"0.25rem 0.625rem","border-radius":"9999px",background:J.bg,color:J.color,"font-size":"0.6875rem","font-weight":"700","text-transform":"uppercase"}},Je={"font-size":"0.875rem",color:"var(--text-secondary, #6b7280)","line-height":"1.5"},ft={"margin-top":"0.75rem",padding:"0.5rem 0.75rem",background:"rgba(34, 197, 94, 0.1)","border-radius":"6px","font-size":"0.8125rem",color:"#22c55e","font-weight":"600"},gt={"text-align":"center",padding:"3rem",color:"var(--text-secondary, #6b7280)"},mt={display:"flex","flex-direction":"column","align-items":"center","justify-content":"center",padding:"3rem",gap:"1rem"},st={width:"40px",height:"40px",border:"3px solid var(--border-color, #e5e7eb)","border-top-color":"var(--primary-color, #3b82f6)","border-radius":"50%",animation:"spin 1s linear infinite"},ut=Me=>{switch(Me){case"good":return(()=>{var J=tl();return J.style.setProperty("width","14px"),J.style.setProperty("height","14px"),J})();case"review":return(()=>{var J=rl();return J.style.setProperty("width","14px"),J.style.setProperty("height","14px"),J})();case"issue":return(()=>{var J=nl();return J.style.setProperty("width","14px"),J.style.setProperty("height","14px"),J})()}};return(()=>{var Me=yl(),J=Me.firstChild,w=J.firstChild,I=w.firstChild,Z=I.nextSibling,Oe=Z.firstChild,Ye=Oe.nextSibling,Ge=Ye.nextSibling,Ue=Ge.nextSibling;Ue.nextSibling;var nt=w.nextSibling,lt=nt.firstChild,De=lt.firstChild,Ke=J.nextSibling;return t(Z,ue),e(Z,()=>l.client.firstName,Ye),e(Z,()=>l.client.lastName,Ue),e(Z,()=>l.taxYear,null),lt.$$click=Se,De.style.setProperty("width","20px"),De.style.setProperty("height","20px"),e(lt,()=>E()?"Analyzing...":"Analyze All Documents",null),e(nt,a($,{get when(){return r()},get children(){var v=ll(),p=v.firstChild;return v.$$click=b,p.style.setProperty("width","20px"),p.style.setProperty("height","20px"),e(v,()=>Be()?"Loading...":"Tax Strategy",null),z(R=>{var M=pe(!1),V=Be();return R.e=t(v,M,R.e),V!==R.t&&(v.disabled=R.t=V),R},{e:void 0,t:void 0}),v}}),null),e(Me,a($,{get when(){return E()},get children(){return a(ct,{get children(){var v=il(),p=v.firstChild,R=p.nextSibling,M=R.firstChild,V=M.nextSibling;V.nextSibling;var n=R.nextSibling;return R.style.setProperty("font-weight","600"),R.style.setProperty("color","var(--text-primary)"),e(R,()=>l.documents.length,V),n.style.setProperty("font-size","0.875rem"),n.style.setProperty("color","var(--text-secondary)"),z(o=>{var h=mt,u=st;return o.e=t(v,h,o.e),o.t=t(p,u,o.t),o},{e:void 0,t:void 0}),v}})}}),Ke),e(Me,a($,{get when(){return qe(()=>!E())()&&he().length>0},get children(){var v=Qt();return t(v,m),e(v,a(pt,{get each(){return he()},children:p=>(()=>{var R=cl(),M=R.firstChild,V=M.firstChild,n=V.nextSibling,o=n.firstChild,h=o.nextSibling,u=M.nextSibling,S=u.nextSibling;return t(M,Re),t(V,ae),e(V,()=>p.category),o.style.setProperty("width","12px"),o.style.setProperty("height","12px"),e(n,()=>Math.round(p.confidence*100),h),e(u,()=>p.documentName),e(S,a(pt,{get each(){return p.extractedData},children:T=>(()=>{var g=ul(),c=g.firstChild,Y=c.nextSibling;return t(g,Ve),t(c,ze),e(c,()=>T.field),t(Y,de),e(Y,()=>T.value),g})()})),e(R,a($,{get when(){return p.message},get children(){var T=Qt();return e(T,()=>ut(p.status),null),e(T,()=>p.message,null),z(g=>t(T,W(p.status),g)),T}}),null),z(T=>{var g=je(p.status),c=ke(p.confidence),Y=we;return T.e=t(R,g,T.e),T.t=t(n,c,T.t),T.a=t(u,Y,T.a),T},{e:void 0,t:void 0,a:void 0}),R})()})),v}}),Ke),e(Me,a($,{get when(){return fe()},get children(){return a(ct,{get children(){var v=sl(),p=v.firstChild,R=p.firstChild;return v.style.setProperty("padding","0.5rem"),R.style.setProperty("width","20px"),R.style.setProperty("height","20px"),R.style.setProperty("vertical-align","middle"),R.style.setProperty("margin-right","0.5rem"),R.style.setProperty("color","#f59e0b"),e(v,a($,{get when(){return Be()},get children(){var M=ol(),V=M.firstChild,n=V.nextSibling;return n.style.setProperty("font-size","0.875rem"),n.style.setProperty("color","var(--text-secondary)"),z(o=>{var h=mt,u=st;return o.e=t(M,h,o.e),o.t=t(V,u,o.t),o},{e:void 0,t:void 0}),M}}),null),e(v,a($,{get when(){return qe(()=>!Be())()&&Fe().length>0},get children(){return a(pt,{get each(){return Fe()},children:M=>(()=>{var V=gl(),n=V.firstChild,o=n.firstChild,h=o.nextSibling,u=n.nextSibling;return t(n,le),t(o,_e),e(o,()=>M.title),e(h,()=>M.priority),t(u,Je),e(u,()=>M.description),e(V,a($,{get when(){return M.potentialSavings},get children(){var S=pl();return S.firstChild,t(S,ft),e(S,()=>M.potentialSavings,null),S}}),null),z(S=>{var T=Q(M.priority),g=Xe(M.priority);return S.e=t(V,T,S.e),S.t=t(h,g,S.t),S},{e:void 0,t:void 0}),V})()})}}),null),z(M=>t(p,{...be,"margin-bottom":"1rem"},M)),v}})}}),Ke),e(Me,a($,{get when(){return!E()&&he().length===0&&l.documents.length===0},get children(){return a(ct,{get children(){var v=al(),p=v.firstChild,R=p.nextSibling;return p.style.setProperty("font-size","3rem"),p.style.setProperty("margin-bottom","1rem"),R.style.setProperty("font-size","1rem"),z(M=>t(v,gt,M)),v}})}}),Ke),e(Me,a($,{get when(){return!E()&&he().length===0&&l.documents.length>0},get children(){return a(ct,{get children(){var v=dl(),p=v.firstChild,R=p.nextSibling,M=R.firstChild,V=R.nextSibling;return p.style.setProperty("font-size","3rem"),p.style.setProperty("margin-bottom","1rem"),R.style.setProperty("font-size","1rem"),R.style.setProperty("margin-bottom","0.5rem"),e(R,()=>l.documents.length,M),V.style.setProperty("font-size","0.875rem"),z(n=>t(v,gt,n)),v}})}}),Ke),z(v=>{var p=C,R=i,M=be,V=D,n=pe(!0),o=E()||l.documents.length===0;return v.e=t(Me,p,v.e),v.t=t(J,R,v.t),v.a=t(I,M,v.a),v.o=t(nt,V,v.o),v.i=t(lt,n,v.i),o!==v.n&&(lt.disabled=v.n=o),v},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),Me})()};$t(["click"]);function ht(l){if(l==null)return"";const E=String(l);return E.includes(",")||E.includes('"')||E.includes(`
`)||E.includes("\r")?`"${E.replace(/"/g,'""')}"`:E}function er(l){if(!l.ss)return null;const E=l.ss.replace(/\D/g,"");return E.length!==9?null:E}function vl(l,E,G){const he=[];if(!l.extractedAmounts||!l.drakeFormType)return he;const $e=Cr[l.drakeFormType];if(!$e)return he;const fe=zr(l.drakeFormType,l.extractedAmounts),Ae=er(E),Be=Ae?Tr(Ae):"",te=E.firstName||"",Fe=E.lastName||"",Le=E.middleName?E.middleName.charAt(0).toUpperCase():void 0,r=l.payerInfo;for(const{box:ce,value:K}of fe){const L={SSN:Be,firstName:te,lastName:Fe,middleInitial:Le,taxYear:G,formType:$e.formCode,boxNumber:ce.boxNumber,amount:K,description:ce.description,payerName:r?.name,payerEIN:r?.ein?Rt(r.ein):void 0,payerAddress:r?[r.address,r.city,r.state,r.zip].filter(Boolean).join(", "):void 0,state:r?.state,stateId:void 0};l.drakeFormType==="w2"&&r&&(L.employerName=r.name,L.employerEIN=r.ein?Rt(r.ein):void 0,L.employerAddress=L.payerAddress),l.drakeFormType==="1098"&&l.extractedAmounts.propertyAddress&&(L.propertyAddress=l.extractedAmounts.propertyAddress),["1098_t","1099_int","1099_div"].includes(l.drakeFormType)&&r&&(L.institutionName=r.name,L.institutionEIN=r.ein?Rt(r.ein):void 0),he.push(L)}return he}function hl(l,E){const G=[];G.push(Ir.join(","));for(const he of l){const $e=[ht(he.SSN),ht(he.firstName),ht(he.middleInitial),ht(he.lastName),ht(he.suffix),ht(he.taxYear),ht(he.formType),ht(he.boxNumber),ht(kr(he.amount)),ht(he.description),ht(he.payerName),ht(he.payerEIN),ht(he.payerAddress),ht(he.state),ht(he.stateId)];G.push($e.join(","))}return G.join(`
`)}function fl(l,E){const G=new Blob([l],{type:"text/csv;charset=utf-8;"}),he=URL.createObjectURL(G),$e=document.createElement("a");$e.href=he,$e.download=E,document.body.appendChild($e),$e.click(),document.body.removeChild($e),URL.revokeObjectURL(he)}function bl(l,E,G){const he=[],$e=[];if(!er(l))return{success:!1,recordCount:0,totalIncome:0,totalWithholding:0,errors:["Client SSN is missing or invalid. Cannot generate export."]};if(!l.firstName||!l.lastName)return{success:!1,recordCount:0,totalIncome:0,totalWithholding:0,errors:["Client first name and last name are required."]};const Ae=E.filter(Se=>!(!Se.verified||Se.drakeFormType==="w2"&&G.includeW2===!1||["1099_misc","1099_nec","1099_int","1099_div"].includes(Se.drakeFormType||"")&&G.include1099===!1||["1098","1098_t"].includes(Se.drakeFormType||"")&&G.include1098===!1||Se.drakeFormType==="schedule_k1"&&G.includeK1===!1||Se.drakeFormType==="receipt"&&G.includeReceipts===!1));if(Ae.length===0)return{success:!1,recordCount:0,totalIncome:0,totalWithholding:0,errors:["No verified documents available for export with the current filter settings."]};const Be=[];let te=0,Fe=0;for(const Se of Ae)try{const b=vl(Se,l,G.taxYear);Be.push(...b);for(const C of b)(C.formType==="W2"&&C.boxNumber==="1"||C.formType==="1099NEC"&&C.boxNumber==="1"||C.formType==="1099MISC"&&["1","2","3"].includes(C.boxNumber)||C.formType==="1099INT"&&C.boxNumber==="1"||C.formType==="1099DIV"&&C.boxNumber==="1a"||C.formType==="K1"&&["1","4","5","6a"].includes(C.boxNumber))&&(te+=C.amount),(C.formType==="W2"&&C.boxNumber==="2"||C.formType==="1099NEC"&&C.boxNumber==="4"||C.formType==="1099MISC"&&C.boxNumber==="4"||C.formType==="1099INT"&&C.boxNumber==="4"||C.formType==="1099DIV"&&C.boxNumber==="4")&&(Fe+=C.amount)}catch(b){$e.push(`Error processing document "${Se.originalFileName}": ${b instanceof Error?b.message:"Unknown error"}`)}if(Be.length===0)return{success:!1,recordCount:0,totalIncome:0,totalWithholding:0,errors:["No records were generated from the documents. Please verify that documents have extracted amounts."]};const Le=hl(Be),r=`${l.lastName}_${l.firstName}`.replace(/\s+/g,"_"),ce=new Date().toISOString().slice(0,10).replace(/-/g,""),L=`Drake_${r}_${G.taxYear}_${ce}.csv`;return{success:!0,csvData:Le,fileName:L,recordCount:Be.length,totalIncome:te,totalWithholding:Fe,errors:he.length>0?he:void 0,warnings:$e.length>0?$e:void 0,exportedAt:Date.now()}}var xl=y('<svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd>'),Pl=y("<div><div><div></div></div><div>"),$l=y("<div><div></div><div>Errors"),Sl=y("<div><div><div></div><div>Total Documents</div></div><div><div></div><div>Verified</div></div><div><div></div><div>Pending Review"),wl=y("<div><div></div>Calculating..."),_l=y("<div><div></div>Exporting..."),Cl=y("<div><button></button><button>"),zl=y('<svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"clip-rule=evenodd>'),Tl=y('<svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"clip-rule=evenodd>'),kl=y("<div><div>"),Il=y('<h4><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13a1 1 0 102 0V9.414l1.293 1.293a1 1 0 001.414-1.414z"clip-rule=evenodd></path></svg>Advance to Next Step'),Nl=y('<div><div><div>Review with Client</div><div>Review calculation results and prepare return</div></div><button><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd></path></svg>Mark Review Complete'),Dl=y('<div><div><div>Client Signatures</div><div>Request client to sign tax return</div></div><button><svg viewBox="0 0 20 20"fill=currentColor><path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"></path><path fill-rule=evenodd d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"clip-rule=evenodd></path></svg>Mark Signatures Obtained'),Fl=y('<div><div><div>File Tax Return</div><div>Mark return as filed with IRS</div></div><button><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"clip-rule=evenodd></path></svg>Mark as Filed'),Nt=y("<div>"),Al=y(`<div><div><svg viewBox="0 0 20 20"fill=#22c55e><path fill-rule=evenodd d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"clip-rule=evenodd></path></svg></div><h3>Tax Return Filed!</h3><p>'s <!> tax return has been successfully filed.`),Ll=y("<li>Review and verify <!> pending document(s)"),Rl=y("<li>Resolve <!> document error(s)"),Ml=y("<li>Run tax calculation to see estimated results"),El=y("<li>Review calculation results with client"),Bl=y("<li>Export data to Drake Tax Software"),Ol=y("<li>Complete and file return"),Ul=y("<li>Upload tax documents to begin"),Wl=y(`<div><div><div><h3>Tax Preparation Progress</h3><p> <!> - Tax Year </p></div></div><div><div><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"clip-rule=evenodd></path></svg>Next Steps</div><ul></ul></div><style>
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `),jl=y("<div><div></div><span>"),Vl=y('<svg viewBox="0 0 20 20"fill=currentColor><path d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V4a2 2 0 00-2-2H6zm1 2a1 1 0 000 2h6a1 1 0 100-2H7zm6 7a1 1 0 011 1v3a1 1 0 11-2 0v-3a1 1 0 011-1zm-3 3a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zm-2-2a1 1 0 011 1v2a1 1 0 11-2 0v-2a1 1 0 011-1z">'),Hl=y('<svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"clip-rule=evenodd>'),ql=y('<div><div><h4><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z"clip-rule=evenodd></path></svg>Form 1040 - Tax Calculation Details</h4><p>Tax Year <!> | </p></div><div>Marginal Rate: <strong>%'),Yl=y("<div>INCOME (Lines 1-9)"),Xl=y("<div><span>1h</span><span>Other earned income</span><span>"),Ql=y("<div><span>2b</span><span>Taxable interest (1099-INT)</span><span>"),Gl=y("<div><span>3b</span><span>Ordinary dividends (1099-DIV)</span><span>"),Kl=y("<div><span>8</span><span>Other income (Schedule 1)</span><span>"),Jl=y("<div><span>Schedule C - Business income (1099-NEC)</span><span>"),Zl=y("<div><span>Schedule E - Rental income</span><span>"),ei=y("<div><span>Schedule E - Royalties</span><span>"),ti=y("<div><span>Other income</span><span>"),ri=y("<div><div><span>1a</span><span>Wages, salaries, tips (W-2 Box 1)</span><span></span></div><div><span>1z</span><span>Total wages</span><span></span></div><div><span>9</span><span>TOTAL INCOME</span><span>"),ni=y("<div>ADJUSTED GROSS INCOME (Lines 10-11)"),li=y("<div><div><span>10</span><span>Adjustments to income</span><span></span></div><div><span>11</span><span>ADJUSTED GROSS INCOME (AGI)</span><span>"),ii=y("<div>DEDUCTIONS (Lines 12-15)"),oi=y("<div><span>SALT (State/Local taxes) - capped</span><span>"),si=y("<div><span>Mortgage interest (1098)</span><span>"),ai=y("<div><div><span>12a</span><span>Standard deduction</span><span></span></div><div><span>12b</span><span>Itemized deductions (Schedule A)</span><span></span></div><div><span>12</span><span><strong>Deduction used:</strong> </span><span></span></div><div><span>15</span><span>TAXABLE INCOME (Line 11 - Line 12)</span><span>"),di=y("<div>TAX CALCULATION (Lines 16-24)"),yi=y("<div><div><span>16</span><span>Tax (from tax table)</span><span></span></div><div><span>Applied: </span><span></span></div><div><span>24</span><span>TOTAL TAX</span><span>"),ci=y("<div>PAYMENTS (Lines 25-33)"),ui=y("<div><span>25a</span><span>Federal tax withheld (W-2 Box 2)</span><span>"),pi=y("<div><span>25b</span><span>Federal tax withheld (1099s)</span><span>"),gi=y("<div><div><span>33</span><span>TOTAL PAYMENTS</span><span>"),mi=y("<div>Line 34 - REFUND"),vi=y("<div>Payments (<!>) - Tax (<!>)"),hi=y("<div>Line 37 - AMOUNT YOU OWE"),fi=y("<div>Tax (<!>) - Payments (<!>)"),bi=y("<div>No refund or amount owed"),xi=y("<p>* This is a preliminary estimate. Actual results may vary based on additional deductions, credits, and IRS verification.");const Mt=[{id:"documents_collected",label:"Documents Collected",description:"All tax documents uploaded"},{id:"verified",label:"Verified",description:"Documents reviewed and verified"},{id:"calculations",label:"Calculations",description:"Tax calculations complete"},{id:"review",label:"Review",description:"Final review by preparer"},{id:"signatures",label:"Signatures",description:"Client signatures obtained"},{id:"filing",label:"Filing",description:"Return filed with IRS"}],Pi=l=>{const[E,G]=Ne(!1),[he,$e]=Ne(!1),[fe,Ae]=Ne(null),[Be,te]=Ne(null),[Fe,Le]=Ne(!1),[r,ce]=Ne(!1),[K,L]=Ne(!1),Se=zt(()=>{const w=l.documents,I=w.length,Z=w.filter(Oe=>Oe.verified).length;return K()?"filing":r()?"signatures":Fe()?"review":fe()?"calculations":I>0&&Z===I?"verified":"documents_collected"}),b=w=>Mt.findIndex(I=>I.id===w),C=zt(()=>{const w=l.documents;return{total:w.length,verified:w.filter(I=>I.verified).length,pending:w.filter(I=>!I.verified&&I.uploadStatus!=="error").length,errors:w.filter(I=>I.uploadStatus==="error").length}}),i=async()=>{G(!0),te(null);try{const w=await mr(l.client.id,l.taxYear,l.documents,l.client);Ae(w)}catch{te({type:"error",text:"Error running tax calculation"})}finally{G(!1)}},be=async()=>{$e(!0),te(null);try{const w={id:l.client.id,firstName:l.client.firstName,middleName:l.client.middleName,lastName:l.client.lastName,ss:l.client.ssn,residences:l.client.address?{current:{addressLineOne:l.client.address,city:l.client.city,state:l.client.state,zipcode:l.client.zipCode}}:void 0},I=bl(w,l.documents,{taxYear:l.taxYear,clientId:l.client.id,outputFormat:"csv",includeHeaders:!0});I.success&&I.csvData&&I.fileName?(fl(I.csvData,I.fileName),te({type:"success",text:`Successfully exported ${I.recordCount} records to ${I.fileName}`})):te({type:"error",text:I.errors?.[0]||"Export failed"})}catch(w){te({type:"error",text:w.message||"Error exporting to Drake"})}finally{$e(!1)}},ue={display:"flex","flex-direction":"column",gap:"1.5rem"},D={display:"flex","justify-content":"space-between","align-items":"center","flex-wrap":"wrap",gap:"1rem"},pe={"font-size":"1.25rem","font-weight":"600",color:"var(--text-primary, #1f2937)",margin:"0"},m={"font-size":"0.875rem",color:"var(--text-secondary, #6b7280)","margin-top":"0.25rem"},je={position:"relative",padding:"2rem 1rem"},Re={display:"flex","justify-content":"space-between",position:"relative"},ae={position:"absolute",top:"20px",left:"50px",right:"50px",height:"4px",background:"var(--border-color, #e5e7eb)","z-index":"0"},ke=w=>({position:"absolute",top:"0",left:"0",height:"100%",width:`${w}%`,background:"linear-gradient(90deg, #22c55e 0%, #3b82f6 100%)","border-radius":"2px",transition:"width 0.5s ease"}),we=(w,I,Z)=>({display:"flex","flex-direction":"column","align-items":"center",gap:"0.5rem",position:"relative","z-index":"1",flex:"1","max-width":"120px"}),Ve=(w,I,Z)=>({width:Z?"44px":"40px",height:Z?"44px":"40px","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center",background:I?"linear-gradient(135deg, #22c55e 0%, #16a34a 100%)":Z?"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)":"white",border:I||Z?"none":"2px solid var(--border-color, #e5e7eb)",color:I||Z?"white":"var(--text-secondary, #6b7280)","font-weight":"600","font-size":"0.875rem",transition:"all 0.3s ease","box-shadow":Z?"0 4px 12px rgba(59, 130, 246, 0.4)":I?"0 4px 12px rgba(34, 197, 94, 0.3)":"none"}),ze=(w,I)=>({"font-size":"0.75rem","font-weight":I?"700":"500",color:I?"var(--primary-color, #3b82f6)":w?"var(--text-primary, #1f2937)":"var(--text-secondary, #6b7280)","text-align":"center","max-width":"100px",transition:"all 0.2s ease"}),de={display:"flex",gap:"1rem","flex-wrap":"wrap","justify-content":"center","margin-top":"1rem"},W=(w,I)=>({padding:"1rem 2rem","font-size":"1rem","font-weight":"600","border-radius":"12px",border:w==="secondary"?"2px solid var(--border-color, #e5e7eb)":"none",background:I?"var(--surface-alt, #f3f4f6)":w==="primary"?"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)":w==="success"?"linear-gradient(135deg, #22c55e 0%, #16a34a 100%)":"white",color:I?"var(--text-secondary, #6b7280)":w==="secondary"?"var(--text-primary, #1f2937)":"white",cursor:I?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex","align-items":"center",gap:"0.75rem","box-shadow":I?"none":w==="primary"?"0 4px 12px rgba(59, 130, 246, 0.3)":w==="success"?"0 4px 12px rgba(34, 197, 94, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.08)","min-width":"200px","justify-content":"center"}),Q={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem","margin-top":"1rem"},le=w=>({padding:"1.25rem","border-radius":"12px",background:`linear-gradient(135deg, ${w}08 0%, ${w}15 100%)`,border:`1px solid ${w}30`,"text-align":"center"}),_e=w=>({"font-size":"1.75rem","font-weight":"700",color:w,"margin-bottom":"0.25rem"}),Xe={"font-size":"0.8125rem",color:"var(--text-secondary, #6b7280)","font-weight":"500"},Je=w=>({padding:"1rem 1.25rem","border-radius":"10px","font-size":"0.9375rem",background:w==="success"?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",color:w==="success"?"#22c55e":"#ef4444",border:`1px solid ${w==="success"?"#22c55e":"#ef4444"}`,display:"flex","align-items":"center",gap:"0.75rem","font-weight":"500"}),ft={"margin-top":"1.5rem",padding:"1.25rem","border-radius":"12px",background:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%)",border:"1px solid #bae6fd"},gt={"font-size":"0.9375rem","font-weight":"600",color:"#0369a1","margin-bottom":"0.75rem",display:"flex","align-items":"center",gap:"0.5rem"},mt={margin:"0","padding-left":"1.5rem","font-size":"0.875rem",color:"#0c4a6e","line-height":"1.75"},st={display:"flex","align-items":"center","justify-content":"center",gap:"0.5rem",padding:"0.5rem"},ut={width:"20px",height:"20px",border:"2px solid rgba(255,255,255,0.3)","border-top-color":"white","border-radius":"50%",animation:"spin 1s linear infinite"},Me=zt(()=>b(Se())/(Mt.length-1)*100),J=()=>(()=>{var w=xl();return w.style.setProperty("width","20px"),w.style.setProperty("height","20px"),w})();return(()=>{var w=Wl(),I=w.firstChild,Z=I.firstChild,Oe=Z.firstChild,Ye=Oe.nextSibling,Ge=Ye.firstChild,Ue=Ge.nextSibling;Ue.nextSibling;var nt=I.nextSibling,lt=nt.firstChild,De=lt.firstChild,Ke=lt.nextSibling;return t(Ye,m),e(Ye,()=>l.client.firstName,Ge),e(Ye,()=>l.client.lastName,Ue),e(Ye,()=>l.taxYear,null),e(w,a(ct,{get children(){return[(()=>{var v=Pl(),p=v.firstChild,R=p.firstChild,M=p.nextSibling;return e(M,a(pt,{each:Mt,children:(V,n)=>{const o=b(Se()),h=n()<o,u=n()===o,S=n()<=o;return(()=>{var T=jl(),g=T.firstChild,c=g.nextSibling;return e(g,a($,{when:h,get fallback(){return n()+1},get children(){return a(J,{})}})),e(c,()=>V.label),z(Y=>{var oe=we(),xe=Ve(S,h,u),re=ze(S,u);return Y.e=t(T,oe,Y.e),Y.t=t(g,xe,Y.t),Y.a=t(c,re,Y.a),Y},{e:void 0,t:void 0,a:void 0}),T})()}})),z(V=>{var n=je,o=ae,h=ke(Me()),u=Re;return V.e=t(v,n,V.e),V.t=t(p,o,V.t),V.a=t(R,h,V.a),V.o=t(M,u,V.o),V},{e:void 0,t:void 0,a:void 0,o:void 0}),v})(),(()=>{var v=Sl(),p=v.firstChild,R=p.firstChild,M=R.nextSibling,V=p.nextSibling,n=V.firstChild,o=n.nextSibling,h=V.nextSibling,u=h.firstChild,S=u.nextSibling;return t(v,Q),e(R,()=>C().total),e(n,()=>C().verified),e(u,()=>C().pending),e(v,a($,{get when(){return C().errors>0},get children(){var T=$l(),g=T.firstChild,c=g.nextSibling;return e(g,()=>C().errors),z(Y=>{var oe=le("#ef4444"),xe=_e("#ef4444"),re=Xe;return Y.e=t(T,oe,Y.e),Y.t=t(g,xe,Y.t),Y.a=t(c,re,Y.a),Y},{e:void 0,t:void 0,a:void 0}),T}}),null),z(T=>{var g=le("#3b82f6"),c=_e("#3b82f6"),Y=Xe,oe=le("#22c55e"),xe=_e("#22c55e"),re=Xe,Te=le("#f59e0b"),j=_e("#f59e0b"),Pe=Xe;return T.e=t(p,g,T.e),T.t=t(R,c,T.t),T.a=t(M,Y,T.a),T.o=t(V,oe,T.o),T.i=t(n,xe,T.i),T.n=t(o,re,T.n),T.s=t(h,Te,T.s),T.h=t(u,j,T.h),T.r=t(S,Pe,T.r),T},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),v})(),(()=>{var v=Cl(),p=v.firstChild,R=p.nextSibling;return p.$$click=i,e(p,a($,{get when(){return E()},get fallback(){return[(()=>{var M=Vl();return M.style.setProperty("width","20px"),M.style.setProperty("height","20px"),M})(),"Run Tax Calculation"]},get children(){var M=wl(),V=M.firstChild;return z(n=>{var o=st,h=ut;return n.e=t(M,o,n.e),n.t=t(V,h,n.t),n},{e:void 0,t:void 0}),M}})),R.$$click=be,e(R,a($,{get when(){return he()},get fallback(){return[(()=>{var M=Hl();return M.style.setProperty("width","20px"),M.style.setProperty("height","20px"),M})(),"Export to Drake"]},get children(){var M=_l(),V=M.firstChild;return z(n=>{var o=st,h=ut;return n.e=t(M,o,n.e),n.t=t(V,h,n.t),n},{e:void 0,t:void 0}),M}})),z(M=>{var V=de,n=W("primary",E()||C().verified===0),o=E()||C().verified===0,h=W("success",he()||C().verified===0),u=he()||C().verified===0;return M.e=t(v,V,M.e),M.t=t(p,n,M.t),o!==M.a&&(p.disabled=M.a=o),M.o=t(R,h,M.o),u!==M.i&&(R.disabled=M.i=u),M},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),v})(),a($,{get when(){return Be()},get children(){var v=kl(),p=v.firstChild;return v.style.setProperty("margin-top","1rem"),e(p,a($,{get when(){return Be().type==="success"},get children(){var R=zl();return R.style.setProperty("width","20px"),R.style.setProperty("height","20px"),R}}),null),e(p,a($,{get when(){return Be().type==="error"},get children(){var R=Tl();return R.style.setProperty("width","20px"),R.style.setProperty("height","20px"),R}}),null),e(p,()=>Be().text,null),z(R=>t(p,Je(Be().type),R)),v}})]}}),nt),e(w,a($,{get when(){return fe()},get children(){return(()=>{const v=fe(),p=g=>g<0?`-$${Math.abs(g).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`:`$${g.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,R={display:"flex","justify-content":"space-between","align-items":"center",padding:"0.5rem 0","border-bottom":"1px solid var(--border-color, #e5e7eb)","font-size":"0.875rem"},M={"font-weight":"600",color:"var(--primary-color, #3b82f6)","min-width":"60px"},V={flex:"1",color:"var(--text-secondary, #6b7280)"},n=(g,c)=>({"font-weight":"600",color:g?"#22c55e":"var(--text-primary, #1f2937)","text-align":"right","min-width":"120px"}),o={background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"white",padding:"0.75rem 1rem","font-weight":"600","font-size":"0.875rem","margin-top":"1rem","border-radius":"8px 8px 0 0"},h={background:"var(--surface-alt, #f9fafb)",padding:"0.75rem 1rem","border-radius":"0 0 8px 8px",border:"1px solid var(--border-color, #e5e7eb)","border-top":"none"},u={display:"flex","justify-content":"space-between","padding-left":"2rem","font-size":"0.8125rem",color:"var(--text-muted, #9ca3af)",padding:"0.25rem 0 0.25rem 2rem"},S={...R,background:"linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(34, 197, 94, 0.05))",padding:"0.75rem","border-radius":"8px",border:"1px solid rgba(34, 197, 94, 0.3)","margin-top":"0.5rem","font-weight":"700"},T=g=>({background:g?"linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(34, 197, 94, 0.05))":"linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(239, 68, 68, 0.05))",border:`2px solid ${g?"#22c55e":"#ef4444"}`,"border-radius":"12px",padding:"1.5rem","text-align":"center","margin-top":"1.5rem"});return a(ct,{get children(){return[(()=>{var g=ql(),c=g.firstChild,Y=c.firstChild,oe=Y.firstChild,xe=Y.nextSibling,re=xe.firstChild,Te=re.nextSibling;Te.nextSibling;var j=c.nextSibling,Pe=j.firstChild,H=Pe.nextSibling,P=H.firstChild;return g.style.setProperty("display","flex"),g.style.setProperty("justify-content","space-between"),g.style.setProperty("align-items","center"),g.style.setProperty("margin-bottom","1rem"),g.style.setProperty("padding-bottom","1rem"),g.style.setProperty("border-bottom","2px solid var(--border-color, #e5e7eb)"),oe.style.setProperty("width","24px"),oe.style.setProperty("height","24px"),oe.style.setProperty("vertical-align","middle"),oe.style.setProperty("margin-right","0.5rem"),oe.style.setProperty("color","#3b82f6"),xe.style.setProperty("font-size","0.875rem"),xe.style.setProperty("color","var(--text-secondary)"),xe.style.setProperty("margin-top","0.25rem"),e(xe,()=>v.taxYear,Te),e(xe,()=>v.filingStatusLabel,null),j.style.setProperty("background","var(--surface-alt, #f3f4f6)"),j.style.setProperty("padding","0.5rem 1rem"),j.style.setProperty("border-radius","8px"),j.style.setProperty("font-size","0.75rem"),j.style.setProperty("color","var(--text-secondary)"),H.style.setProperty("color","#3b82f6"),e(H,()=>(v.line16_marginalRate*100).toFixed(0),P),z(_=>t(Y,{...pe,margin:0},_)),g})(),(()=>{var g=Yl();return z(c=>t(g,o,c)),g})(),(()=>{var g=ri(),c=g.firstChild,Y=c.firstChild,oe=Y.nextSibling,xe=oe.nextSibling,re=c.nextSibling,Te=re.firstChild,j=Te.nextSibling,Pe=j.nextSibling,H=re.nextSibling,P=H.firstChild,_=P.nextSibling,ee=_.nextSibling;return e(xe,()=>p(v.line1a_wages)),e(g,a($,{get when(){return v.line1h_otherEarnedIncome>0},get children(){var N=Xl(),ge=N.firstChild,F=ge.nextSibling,q=F.nextSibling;return e(q,()=>p(v.line1h_otherEarnedIncome)),z(O=>{var f=R,ye=M,me=V,Ie=n();return O.e=t(N,f,O.e),O.t=t(ge,ye,O.t),O.a=t(F,me,O.a),O.o=t(q,Ie,O.o),O},{e:void 0,t:void 0,a:void 0,o:void 0}),N}}),re),e(Pe,()=>p(v.line1z_totalWages)),e(g,a($,{get when(){return v.line2b_taxableInterest>0},get children(){var N=Ql(),ge=N.firstChild,F=ge.nextSibling,q=F.nextSibling;return e(q,()=>p(v.line2b_taxableInterest)),z(O=>{var f=R,ye=M,me=V,Ie=n();return O.e=t(N,f,O.e),O.t=t(ge,ye,O.t),O.a=t(F,me,O.a),O.o=t(q,Ie,O.o),O},{e:void 0,t:void 0,a:void 0,o:void 0}),N}}),H),e(g,a($,{get when(){return v.line3b_ordinaryDividends>0},get children(){var N=Gl(),ge=N.firstChild,F=ge.nextSibling,q=F.nextSibling;return e(q,()=>p(v.line3b_ordinaryDividends)),z(O=>{var f=R,ye=M,me=V,Ie=n();return O.e=t(N,f,O.e),O.t=t(ge,ye,O.t),O.a=t(F,me,O.a),O.o=t(q,Ie,O.o),O},{e:void 0,t:void 0,a:void 0,o:void 0}),N}}),H),e(g,a($,{get when(){return v.line8_otherIncome>0},get children(){return[(()=>{var N=Kl(),ge=N.firstChild,F=ge.nextSibling,q=F.nextSibling;return e(q,()=>p(v.line8_otherIncome)),z(O=>{var f=R,ye=M,me=V,Ie=n();return O.e=t(N,f,O.e),O.t=t(ge,ye,O.t),O.a=t(F,me,O.a),O.o=t(q,Ie,O.o),O},{e:void 0,t:void 0,a:void 0,o:void 0}),N})(),a($,{get when(){return v.line8_breakdown.businessIncome>0},get children(){var N=Jl(),ge=N.firstChild,F=ge.nextSibling;return e(F,()=>p(v.line8_breakdown.businessIncome)),z(q=>t(N,u,q)),N}}),a($,{get when(){return v.line8_breakdown.rentalIncome>0},get children(){var N=Zl(),ge=N.firstChild,F=ge.nextSibling;return e(F,()=>p(v.line8_breakdown.rentalIncome)),z(q=>t(N,u,q)),N}}),a($,{get when(){return v.line8_breakdown.royalties>0},get children(){var N=ei(),ge=N.firstChild,F=ge.nextSibling;return e(F,()=>p(v.line8_breakdown.royalties)),z(q=>t(N,u,q)),N}}),a($,{get when(){return v.line8_breakdown.other>0},get children(){var N=ti(),ge=N.firstChild,F=ge.nextSibling;return e(F,()=>p(v.line8_breakdown.other)),z(q=>t(N,u,q)),N}})]}}),H),e(ee,()=>p(v.line9_totalIncome)),z(N=>{var ge=h,F=R,q=M,O=V,f=n(),ye=R,me=M,Ie=V,B=n(),Ee=S,U=M,d=V,A=n(!0);return N.e=t(g,ge,N.e),N.t=t(c,F,N.t),N.a=t(Y,q,N.a),N.o=t(oe,O,N.o),N.i=t(xe,f,N.i),N.n=t(re,ye,N.n),N.s=t(Te,me,N.s),N.h=t(j,Ie,N.h),N.r=t(Pe,B,N.r),N.d=t(H,Ee,N.d),N.l=t(P,U,N.l),N.u=t(_,d,N.u),N.c=t(ee,A,N.c),N},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0}),g})(),(()=>{var g=ni();return z(c=>t(g,{...o,background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)"},c)),g})(),(()=>{var g=li(),c=g.firstChild,Y=c.firstChild,oe=Y.nextSibling,xe=oe.nextSibling,re=c.nextSibling,Te=re.firstChild,j=Te.nextSibling,Pe=j.nextSibling;return e(xe,()=>p(v.line10_adjustments)),e(Pe,()=>p(v.line11_agi)),z(H=>{var P=h,_=R,ee=M,N=V,ge=n(),F=S,q=M,O=V,f=n(!0);return H.e=t(g,P,H.e),H.t=t(c,_,H.t),H.a=t(Y,ee,H.a),H.o=t(oe,N,H.o),H.i=t(xe,ge,H.i),H.n=t(re,F,H.n),H.s=t(Te,q,H.s),H.h=t(j,O,H.h),H.r=t(Pe,f,H.r),H},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),g})(),(()=>{var g=ii();return z(c=>t(g,{...o,background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)"},c)),g})(),(()=>{var g=ai(),c=g.firstChild,Y=c.firstChild,oe=Y.nextSibling,xe=oe.nextSibling,re=c.nextSibling,Te=re.firstChild,j=Te.nextSibling,Pe=j.nextSibling,H=re.nextSibling,P=H.firstChild,_=P.nextSibling,ee=_.firstChild;ee.nextSibling;var N=_.nextSibling,ge=H.nextSibling,F=ge.firstChild,q=F.nextSibling,O=q.nextSibling;return e(xe,()=>p(v.line12a_standardDeduction)),e(Pe,()=>p(v.line12b_itemizedDeductions)),e(g,a($,{get when(){return v.line12b_itemizedDeductions>0},get children(){return[a($,{get when(){return v.line12b_breakdown.saltDeduction>0},get children(){var f=oi(),ye=f.firstChild,me=ye.nextSibling;return e(me,()=>p(v.line12b_breakdown.saltDeduction)),z(Ie=>t(f,u,Ie)),f}}),a($,{get when(){return v.line12b_breakdown.mortgageInterest>0},get children(){var f=si(),ye=f.firstChild,me=ye.nextSibling;return e(me,()=>p(v.line12b_breakdown.mortgageInterest)),z(Ie=>t(f,u,Ie)),f}})]}}),H),e(_,()=>v.line12_deductionUsed==="itemized"?"Itemized":"Standard",null),e(N,()=>p(v.line12_deductionAmount)),e(O,()=>p(v.line15_taxableIncome)),z(f=>{var ye=h,me=R,Ie=M,B=V,Ee=n(),U=R,d=M,A=V,se=n(),He={...R,background:v.line12_deductionUsed==="itemized"?"rgba(245, 158, 11, 0.1)":"rgba(59, 130, 246, 0.1)",padding:"0.75rem","border-radius":"6px","margin-top":"0.5rem"},Qe=M,et=V,it=n(!0),tt=S,Ze=M,rt=V,dt=n(!0);return f.e=t(g,ye,f.e),f.t=t(c,me,f.t),f.a=t(Y,Ie,f.a),f.o=t(oe,B,f.o),f.i=t(xe,Ee,f.i),f.n=t(re,U,f.n),f.s=t(Te,d,f.s),f.h=t(j,A,f.h),f.r=t(Pe,se,f.r),f.d=t(H,He,f.d),f.l=t(P,Qe,f.l),f.u=t(_,et,f.u),f.c=t(N,it,f.c),f.w=t(ge,tt,f.w),f.m=t(F,Ze,f.m),f.f=t(q,rt,f.f),f.y=t(O,dt,f.y),f},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0}),g})(),(()=>{var g=di();return z(c=>t(g,{...o,background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)"},c)),g})(),(()=>{var g=yi(),c=g.firstChild,Y=c.firstChild,oe=Y.nextSibling,xe=oe.nextSibling,re=c.nextSibling,Te=re.firstChild;Te.firstChild;var j=re.nextSibling,Pe=j.firstChild,H=Pe.nextSibling,P=H.nextSibling;return e(xe,()=>p(v.line16_tax)),e(Te,()=>v.line16_bracketUsed,null),e(P,()=>p(v.line24_totalTax)),z(_=>{var ee=h,N=R,ge=M,F=V,q=n(),O=u,f=S,ye=M,me=V,Ie={...n(!0),color:"#ef4444"};return _.e=t(g,ee,_.e),_.t=t(c,N,_.t),_.a=t(Y,ge,_.a),_.o=t(oe,F,_.o),_.i=t(xe,q,_.i),_.n=t(re,O,_.n),_.s=t(j,f,_.s),_.h=t(Pe,ye,_.h),_.r=t(H,me,_.r),_.d=t(P,Ie,_.d),_},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),g})(),(()=>{var g=ci();return z(c=>t(g,{...o,background:"linear-gradient(135deg, #10b981 0%, #059669 100%)"},c)),g})(),(()=>{var g=gi(),c=g.firstChild,Y=c.firstChild,oe=Y.nextSibling,xe=oe.nextSibling;return e(g,a($,{get when(){return v.line25a_w2Withholding>0},get children(){var re=ui(),Te=re.firstChild,j=Te.nextSibling,Pe=j.nextSibling;return e(Pe,()=>p(v.line25a_w2Withholding)),z(H=>{var P=R,_=M,ee=V,N=n();return H.e=t(re,P,H.e),H.t=t(Te,_,H.t),H.a=t(j,ee,H.a),H.o=t(Pe,N,H.o),H},{e:void 0,t:void 0,a:void 0,o:void 0}),re}}),c),e(g,a($,{get when(){return v.line25b_1099Withholding>0},get children(){var re=pi(),Te=re.firstChild,j=Te.nextSibling,Pe=j.nextSibling;return e(Pe,()=>p(v.line25b_1099Withholding)),z(H=>{var P=R,_=M,ee=V,N=n();return H.e=t(re,P,H.e),H.t=t(Te,_,H.t),H.a=t(j,ee,H.a),H.o=t(Pe,N,H.o),H},{e:void 0,t:void 0,a:void 0,o:void 0}),re}}),c),e(xe,()=>p(v.line33_totalPayments)),z(re=>{var Te=h,j=S,Pe=M,H=V,P=n(!0);return re.e=t(g,Te,re.e),re.t=t(c,j,re.t),re.a=t(Y,Pe,re.a),re.o=t(oe,H,re.o),re.i=t(xe,P,re.i),re},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),g})(),(()=>{var g=Nt();return e(g,a($,{get when(){return v.line34_refund>0},get children(){return[(()=>{var c=mi();return c.style.setProperty("font-size","0.875rem"),c.style.setProperty("color","#166534"),c.style.setProperty("margin-bottom","0.5rem"),c})(),(()=>{var c=Nt();return c.style.setProperty("font-size","2.5rem"),c.style.setProperty("font-weight","700"),c.style.setProperty("color","#22c55e"),e(c,()=>p(v.line34_refund)),c})(),(()=>{var c=vi(),Y=c.firstChild,oe=Y.nextSibling,xe=oe.nextSibling,re=xe.nextSibling;return re.nextSibling,c.style.setProperty("font-size","0.75rem"),c.style.setProperty("color","#166534"),c.style.setProperty("margin-top","0.5rem"),e(c,()=>p(v.line33_totalPayments),oe),e(c,()=>p(v.line24_totalTax),re),c})()]}}),null),e(g,a($,{get when(){return v.line37_amountOwed>0},get children(){return[(()=>{var c=hi();return c.style.setProperty("font-size","0.875rem"),c.style.setProperty("color","#991b1b"),c.style.setProperty("margin-bottom","0.5rem"),c})(),(()=>{var c=Nt();return c.style.setProperty("font-size","2.5rem"),c.style.setProperty("font-weight","700"),c.style.setProperty("color","#ef4444"),e(c,()=>p(v.line37_amountOwed)),c})(),(()=>{var c=fi(),Y=c.firstChild,oe=Y.nextSibling,xe=oe.nextSibling,re=xe.nextSibling;return re.nextSibling,c.style.setProperty("font-size","0.75rem"),c.style.setProperty("color","#991b1b"),c.style.setProperty("margin-top","0.5rem"),e(c,()=>p(v.line24_totalTax),oe),e(c,()=>p(v.line33_totalPayments),re),c})()]}}),null),e(g,a($,{get when(){return v.line34_refund===0&&v.line37_amountOwed===0},get children(){var c=bi();return c.style.setProperty("font-size","1.25rem"),c.style.setProperty("font-weight","600"),c.style.setProperty("color","var(--text-secondary)"),c}}),null),z(c=>t(g,T(v.line34_refund>0),c)),g})(),(()=>{var g=xi();return g.style.setProperty("font-size","0.75rem"),g.style.setProperty("color","var(--text-muted)"),g.style.setProperty("margin-top","1rem"),g.style.setProperty("text-align","center"),g})()]}})})()}}),nt),e(w,a($,{get when(){return qe(()=>!!fe())()&&!K()},get children(){return a(ct,{get children(){return[(()=>{var v=Il(),p=v.firstChild;return p.style.setProperty("width","20px"),p.style.setProperty("height","20px"),p.style.setProperty("vertical-align","middle"),p.style.setProperty("margin-right","0.5rem"),p.style.setProperty("color","#3b82f6"),z(R=>t(v,{...pe,"margin-bottom":"1rem"},R)),v})(),(()=>{var v=Nt();return v.style.setProperty("display","flex"),v.style.setProperty("flex-direction","column"),v.style.setProperty("gap","1rem"),e(v,a($,{get when(){return!Fe()},get children(){var p=Nl(),R=p.firstChild,M=R.firstChild,V=M.nextSibling,n=R.nextSibling,o=n.firstChild;return p.style.setProperty("display","flex"),p.style.setProperty("align-items","center"),p.style.setProperty("justify-content","space-between"),p.style.setProperty("padding","1rem"),p.style.setProperty("background","var(--surface-alt, #f9fafb)"),p.style.setProperty("border-radius","8px"),p.style.setProperty("border","1px solid var(--border-color, #e5e7eb)"),M.style.setProperty("font-weight","600"),M.style.setProperty("margin-bottom","0.25rem"),V.style.setProperty("font-size","0.875rem"),V.style.setProperty("color","var(--text-secondary)"),n.$$click=()=>Le(!0),o.style.setProperty("width","18px"),o.style.setProperty("height","18px"),z(h=>t(n,W("primary",!1),h)),p}}),null),e(v,a($,{get when(){return qe(()=>!!Fe())()&&!r()},get children(){var p=Dl(),R=p.firstChild,M=R.firstChild,V=M.nextSibling,n=R.nextSibling,o=n.firstChild;return p.style.setProperty("display","flex"),p.style.setProperty("align-items","center"),p.style.setProperty("justify-content","space-between"),p.style.setProperty("padding","1rem"),p.style.setProperty("background","linear-gradient(135deg, rgba(139, 92, 246, 0.05), rgba(139, 92, 246, 0.1))"),p.style.setProperty("border-radius","8px"),p.style.setProperty("border","1px solid rgba(139, 92, 246, 0.2)"),M.style.setProperty("font-weight","600"),M.style.setProperty("margin-bottom","0.25rem"),V.style.setProperty("font-size","0.875rem"),V.style.setProperty("color","var(--text-secondary)"),n.$$click=()=>ce(!0),o.style.setProperty("width","18px"),o.style.setProperty("height","18px"),z(h=>t(n,W("primary",!1),h)),p}}),null),e(v,a($,{get when(){return qe(()=>!!r())()&&!K()},get children(){var p=Fl(),R=p.firstChild,M=R.firstChild,V=M.nextSibling,n=R.nextSibling,o=n.firstChild;return p.style.setProperty("display","flex"),p.style.setProperty("align-items","center"),p.style.setProperty("justify-content","space-between"),p.style.setProperty("padding","1rem"),p.style.setProperty("background","linear-gradient(135deg, rgba(34, 197, 94, 0.05), rgba(34, 197, 94, 0.1))"),p.style.setProperty("border-radius","8px"),p.style.setProperty("border","1px solid rgba(34, 197, 94, 0.2)"),M.style.setProperty("font-weight","600"),M.style.setProperty("margin-bottom","0.25rem"),V.style.setProperty("font-size","0.875rem"),V.style.setProperty("color","var(--text-secondary)"),n.$$click=()=>L(!0),o.style.setProperty("width","18px"),o.style.setProperty("height","18px"),z(h=>t(n,W("success",!1),h)),p}}),null),v})()]}})}}),nt),e(w,a($,{get when(){return K()},get children(){return a(ct,{get children(){var v=Al(),p=v.firstChild,R=p.firstChild,M=p.nextSibling,V=M.nextSibling,n=V.firstChild,o=n.nextSibling;return o.nextSibling,v.style.setProperty("text-align","center"),v.style.setProperty("padding","2rem"),v.style.setProperty("background","linear-gradient(135deg, rgba(34, 197, 94, 0.05), rgba(34, 197, 94, 0.15))"),v.style.setProperty("border-radius","12px"),p.style.setProperty("font-size","4rem"),p.style.setProperty("margin-bottom","1rem"),R.style.setProperty("width","64px"),R.style.setProperty("height","64px"),M.style.setProperty("font-size","1.5rem"),M.style.setProperty("font-weight","700"),M.style.setProperty("color","#166534"),M.style.setProperty("margin-bottom","0.5rem"),V.style.setProperty("color","#22c55e"),V.style.setProperty("font-size","1rem"),e(V,()=>l.client.firstName,n),e(V,()=>l.taxYear,o),v}})}}),nt),t(nt,ft),t(lt,gt),De.style.setProperty("width","18px"),De.style.setProperty("height","18px"),t(Ke,mt),e(Ke,a($,{get when(){return C().pending>0},get children(){var v=Ll(),p=v.firstChild,R=p.nextSibling;return R.nextSibling,e(v,()=>C().pending,R),v}}),null),e(Ke,a($,{get when(){return C().errors>0},get children(){var v=Rl(),p=v.firstChild,R=p.nextSibling;return R.nextSibling,e(v,()=>C().errors,R),v}}),null),e(Ke,a($,{get when(){return qe(()=>!fe())()&&C().verified>0},get children(){return Ml()}}),null),e(Ke,a($,{get when(){return fe()},get children(){return[El(),Bl(),Ol()]}}),null),e(Ke,a($,{get when(){return C().total===0},get children(){return Ul()}}),null),z(v=>{var p=ue,R=D,M=pe;return v.e=t(w,p,v.e),v.t=t(I,R,v.t),v.a=t(Oe,M,v.a),v},{e:void 0,t:void 0,a:void 0}),w})()};$t(["click"]);var $i=y("<img alt=QR>"),Si=y("<div><div><div><span>QR - <!> </span><button>×</button></div><div></div><div><div></div><pre></pre><div><button>Download</button><button>Copy"),wi=y("<button>"),_i=y("<span>");const Ci=l=>{const[E,G]=Ne(0),[he,$e]=Ne([]),[fe,Ae]=Ne(!1),Be=()=>{const L=l.client;return[{label:"Basic",text:[L.firstName,"|",L.middleName||"","|",L.lastName,"|","|","123","43","4345","|","|",xt(L.dateOfBirth)||"","|","Laborer","|","|","502","356","3456","|","|","|","|","|","|","|","|","|",L.address,"|","|","|",L.zipCode,"|","|","|","|","|"].join("")},{label:"CHILD",text:[L.firstName,"|",L.middleName||"","|",L.lastName,"|","|","123","43","4345","|","|","|","|","son","|","12","|",xt(L.dateOfBirth)||"","|","|","|"].filter(Boolean).join("")},{label:"EIN",text:["33","2334457","|","emplorhsg","|","address","|","|","40215","|","|","|","|","|","","|","","|","","|","","|"].filter(Boolean).join("")},{label:"vCard",text:`BEGIN:VCARD
VERSION:3.0
FN:${L.firstName||""} ${L.lastName||""}
TEL:${L.phone||""}
EMAIL:${L.email||""}
END:VCARD`}]},te=L=>L.replace(/\|/g,"	").toUpperCase(),Fe=async()=>{Ae(!0);const L=Be(),Se=[];for(const b of L)if(b.text)try{const C=b.label==="vCard"?b.text:te(b.text);Jt({qrText:C});const i=await Ct.toDataURL(C,{width:300,margin:3,errorCorrectionLevel:"M",color:{dark:"#000000",light:"#ffffff"}});Se.push(i)}catch(C){console.error("QR generation error:",C),Se.push("")}else Se.push("");$e(Se),Ae(!1)};Ft(Wt(()=>l.isOpen,L=>{L&&($e([]),Fe())}));const Le=()=>Be(),r=()=>Le()[E()]?.text||"",ce=()=>he()[E()]||"",K=()=>{const L=ce();if(!L)return;const Se=document.createElement("a");Se.href=L,Se.download=`${l.client.firstName}_${l.client.lastName}_QR.png`,Se.click()};return a($,{get when(){return l.isOpen},get children(){var L=Si(),Se=L.firstChild,b=Se.firstChild,C=b.firstChild,i=C.firstChild,be=i.nextSibling;be.nextSibling;var ue=C.nextSibling,D=b.nextSibling,pe=D.nextSibling,m=pe.firstChild,je=m.nextSibling,Re=je.nextSibling,ae=Re.firstChild,ke=ae.nextSibling;return L.$$click=we=>we.target===we.currentTarget&&l.onClose(),L.style.setProperty("position","fixed"),L.style.setProperty("inset","0"),L.style.setProperty("background","rgba(0,0,0,0.5)"),L.style.setProperty("display","flex"),L.style.setProperty("align-items","center"),L.style.setProperty("justify-content","center"),L.style.setProperty("z-index","9999"),Se.style.setProperty("background","white"),Se.style.setProperty("border-radius","12px"),Se.style.setProperty("width","380px"),Se.style.setProperty("max-width","95vw"),Se.style.setProperty("overflow","hidden"),b.style.setProperty("padding","1rem"),b.style.setProperty("background","#1e3a5f"),b.style.setProperty("color","white"),b.style.setProperty("display","flex"),b.style.setProperty("justify-content","space-between"),b.style.setProperty("align-items","center"),C.style.setProperty("font-weight","600"),e(C,()=>l.client.firstName,be),e(C,()=>l.client.lastName,null),Dt(ue,"click",l.onClose,!0),ue.style.setProperty("background","none"),ue.style.setProperty("border","none"),ue.style.setProperty("color","white"),ue.style.setProperty("cursor","pointer"),ue.style.setProperty("font-size","1.5rem"),D.style.setProperty("display","flex"),D.style.setProperty("border-bottom","1px solid #e5e7eb"),e(D,a(pt,{get each(){return Le()},children:(we,Ve)=>(()=>{var ze=wi();return ze.$$click=()=>G(Ve()),ze.style.setProperty("flex","1"),ze.style.setProperty("padding","0.6rem"),ze.style.setProperty("border","none"),ze.style.setProperty("font-weight","500"),ze.style.setProperty("font-size","0.875rem"),ze.style.setProperty("cursor","pointer"),e(ze,()=>we.label),z(de=>{var W=E()===Ve()?"#3b82f6":"#f8fafc",Q=E()===Ve()?"white":"#64748b";return W!==de.e&&((de.e=W)!=null?ze.style.setProperty("background",W):ze.style.removeProperty("background")),Q!==de.t&&((de.t=Q)!=null?ze.style.setProperty("color",Q):ze.style.removeProperty("color")),de},{e:void 0,t:void 0}),ze})()})),pe.style.setProperty("padding","1.25rem"),pe.style.setProperty("text-align","center"),m.style.setProperty("width","256px"),m.style.setProperty("height","256px"),m.style.setProperty("margin","0 auto"),m.style.setProperty("background","#f5f5f5"),m.style.setProperty("border-radius","8px"),m.style.setProperty("display","flex"),m.style.setProperty("align-items","center"),m.style.setProperty("justify-content","center"),e(m,a($,{get when(){return qe(()=>!fe())()&&ce()},get fallback(){return(()=>{var we=_i();return we.style.setProperty("color","#999"),e(we,()=>fe()?"Generating...":"No data"),we})()},get children(){var we=$i();return we.style.setProperty("width","256px"),we.style.setProperty("height","256px"),we.style.setProperty("border-radius","8px"),z(()=>bt(we,"src",ce())),we}})),je.style.setProperty("margin-top","1rem"),je.style.setProperty("padding","0.5rem"),je.style.setProperty("background","#f8fafc"),je.style.setProperty("border-radius","6px"),je.style.setProperty("font-size","0.7rem"),je.style.setProperty("text-align","left"),je.style.setProperty("max-height","70px"),je.style.setProperty("overflow","auto"),je.style.setProperty("white-space","pre-wrap"),je.style.setProperty("word-break","break-all"),e(je,r),Re.style.setProperty("margin-top","1rem"),Re.style.setProperty("display","flex"),Re.style.setProperty("gap","0.5rem"),Re.style.setProperty("justify-content","center"),ae.$$click=K,ae.style.setProperty("padding","0.5rem 1.25rem"),ae.style.setProperty("color","white"),ae.style.setProperty("border","none"),ae.style.setProperty("border-radius","6px"),ke.$$click=()=>navigator.clipboard.writeText(r()),ke.style.setProperty("padding","0.5rem 1.25rem"),ke.style.setProperty("background","#f1f5f9"),ke.style.setProperty("border","1px solid #ddd"),ke.style.setProperty("border-radius","6px"),ke.style.setProperty("cursor","pointer"),z(we=>{var Ve=!ce(),ze=ce()?"#3b82f6":"#ccc",de=ce()?"pointer":"not-allowed";return Ve!==we.e&&(ae.disabled=we.e=Ve),ze!==we.t&&((we.t=ze)!=null?ae.style.setProperty("background",ze):ae.style.removeProperty("background")),de!==we.a&&((we.a=de)!=null?ae.style.setProperty("cursor",de):ae.style.removeProperty("cursor")),we},{e:void 0,t:void 0,a:void 0}),L}})};$t(["click"]);var zi=y('<svg viewBox="0 0 24 24"fill=none stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">'),Ti=y("<div>"),ki=y("<button>Spouse Info"),Ii=y('<div><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"clip-rule=evenodd></path></svg>Personal Information'),Ni=y('<div><div><input type=text placeholder="First name"></div><div><label>Middle Name</label><input type=text placeholder="Middle name"></div><div><label>Last Name *</label><input type=text placeholder="Last name"></div><div><label>Suffix</label><select><option value>None</option><option value=Jr>Jr</option><option value=Sr>Sr</option><option value=II>II</option><option value=III>III</option><option value=IV>IV</option></select></div><div><input type=text placeholder=XXX-XX-XXXX maxlength=11></div><div><input type=date></div><div><label>Occupation</label><input type=text placeholder=Occupation></div><div><label>Email</label><input type=email placeholder=email@example.com></div><div><input type=tel placeholder="(XXX) XXX-XXXX">'),Di=y('<div><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z"clip-rule=evenodd></path></svg>Address'),Fi=y('<div><div><label>Street Address</label><input type=text placeholder="123 Main St"></div><div><label>City</label><input type=text placeholder=City></div><div><label>State</label><select><option value>Select state</option></select></div><div><label>ZIP Code</label><input type=text placeholder=12345 maxlength=10>'),Ai=y('<div><div><svg viewBox="0 0 20 20"fill=currentColor><path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"></path></svg>Spouse Information'),Li=y('<div><div><label>First Name *</label><input type=text placeholder="First name"></div><div><label>Middle Name</label><input type=text placeholder="Middle name"></div><div><label>Last Name *</label><input type=text placeholder="Last name"></div><div><label>Suffix</label><select><option value>None</option><option value=Jr>Jr</option><option value=Sr>Sr</option><option value=II>II</option><option value=III>III</option><option value=IV>IV</option></select></div><div><label>SSN</label><input type=text placeholder=XXX-XX-XXXX maxlength=11></div><div><label>Date of Birth</label><input type=date></div><div><label>Occupation</label><input type=text placeholder=Occupation></div><div><label>Email</label><input type=email placeholder=email@example.com></div><div><label>Phone</label><input type=tel placeholder="(XXX) XXX-XXXX">'),Ri=y('<div><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"clip-rule=evenodd></path></svg>Spouse Tax Options'),Mi=y("<div><label><input type=checkbox><span>Spouse is legally blind</span></label><label><input type=checkbox><span>Spouse can be claimed as dependent on another return"),Ei=y('<div><svg viewBox="0 0 20 20"fill=currentColor><path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"></path></svg>Dependents (<!>)'),Bi=y('<div><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd></path></svg>Task Complete'),Oi=y("<div><div><input type=checkbox><div><div>No Dependents</div><div>Check this box to confirm the client has no dependents to claim"),Ui=y('<button><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z"clip-rule=evenodd></path></svg>Add Dependent'),Wi=y('<div><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z"clip-rule=evenodd></path></svg>Filing Information'),ji=y("<div><div><label>Tax Year</label><select><option value=2026>2026</option><option value=2025>2025</option><option value=2024>2024</option><option value=2023>2023</option></select></div><div><label>Filing Status</label><select><option value>Select filing status"),Vi=y('<div><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z"clip-rule=evenodd></path></svg>Additional Tax Options'),Hi=y("<div><label><input type=checkbox><span>Taxpayer is legally blind</span></label><label><input type=checkbox><span>Can be claimed as dependent on another return</span></label><label><input type=checkbox><span>Had qualifying health insurance coverage"),qi=y('<div><svg viewBox="0 0 20 20"fill=currentColor><path d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"></path><path fill-rule=evenodd d="M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z"clip-rule=evenodd></path></svg>Bank Information (for Direct Deposit)'),Yi=y('<button><svg viewBox="0 0 24 24"fill=none stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z">'),Xi=y('<div><div><label>Account Type</label><select><option value>Select account type</option><option value=checking>Checking</option><option value=savings>Savings</option></select></div><div><label>Bank</label><input type=text placeholder="Bank Name"></div><div><label>Routing Number</label><input type=text placeholder="9 digits"maxlength=9></div><div><label>Account Number</label><input type=text placeholder="Account number"></div><div><label>Account Holder Name</label><input type=text placeholder="Name on account">'),Qi=y('<div><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z"clip-rule=evenodd></path></svg>Notes'),Gi=y('<div><textarea placeholder="Additional notes about this client...">'),Ki=y(`<div><div><div><h3>Client Information</h3><p>Update personal details, spouse information, and dependents</p></div><div><button><svg viewBox="0 0 24 24"fill=none stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"></path></svg>QR Code</button><button></button></div></div><div><button>Personal Info</button><button>Dependents (<!>)</button><button>Tax Details</button></div><style>
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `),Ji=y('<svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"clip-rule=evenodd>'),Et=y("<option>"),Zi=y('<div><div><span>Dependent #</span><button><svg viewBox="0 0 24 24"fill=none stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"></path></svg></button><button title="Remove dependent"><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"clip-rule=evenodd></path></svg></button></div><div><div><label>First Name *</label></div><div><label>Last Name *</label></div><div><label>Relationship *</label><select></select></div><div><label>SSN</label></div><div><label>Date of Birth</label></div><div><label>Months Lived with You</label></div></div><div><label><input type=checkbox><span>Full-time student</span></label><label><input type=checkbox><span>Permanently disabled</span></label><label><input type=checkbox><span>Provided more than half support'),eo=y('<div><label></label><button><svg viewBox="0 0 24 24"fill=none stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z">');const to={son:"Son",daughter:"Daughter",stepson:"Stepson",stepdaughter:"Stepdaughter",foster_child:"Foster Child",brother:"Brother",sister:"Sister",half_brother:"Half Brother",half_sister:"Half Sister",stepbrother:"Stepbrother",stepsister:"Stepsister",parent:"Parent",grandparent:"Grandparent",grandchild:"Grandchild",niece:"Niece",nephew:"Nephew",aunt:"Aunt",uncle:"Uncle",other:"Other"},ro=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY","DC"],no=l=>{const[E,G]=Ne("personal"),[he,$e]=Ne(!1),[fe,Ae]=Ne(null),[Be,te]=Ne(!1),[Fe,Le]=Ne(!1),[r,ce]=Ne(""),K=(w,I)=>{l.onClientChange({[w]:I}),$e(!0),Ae(null)},L=async()=>{try{await l.onSave(),$e(!1),Ae({type:"success",text:"Client information saved successfully"}),setTimeout(()=>Ae(null),3e3)}catch(w){Ae({type:"error",text:w.message||"Failed to save"})}},Se=()=>{const w={id:crypto.randomUUID(),firstName:"",lastName:"",relationship:"son",ssn:"",dateOfBirth:""},I=l.client.dependents||[];K("dependents",[...I,w])},b=(w,I)=>{const Z=[...l.client.dependents||[]];Z[w]={...Z[w],...I},K("dependents",Z)},C=w=>{const I=[...l.client.dependents||[]];I.splice(w,1),K("dependents",I)},i=()=>{const w=l.client.filingStatus;return w==="married_filing_jointly"||w==="married_filing_separately"},be=w=>[w.firstName,"|",w.middleName||"","|",w.lastName,"|","|",St(w.ssn),"|","|","|","|",w?.relationship||"","|","12","|",xt(w.dateOfBirth)||"","|","|","|"].filter(Boolean).join(""),ue=w=>{const I=be(w);ce(I),Le(!0)},D=w=>{let I=[w.firstName,"|",w.middleName||"","|",w.lastName,"|","|",St(w.ssn),"|","|",xt(w.dateOfBirth)||"","|",w?.occupation||"","|","|",w.phone,"|","|","|","|","|","|","|","|","|"].join(""),Z="";w.filingStatus==="married_filing_jointly"&&(Z=["|","|",w.spouse?.firstName,"|",w.spouse?.middleName||"","|",w.spouse?.lastName,"|","|",St(w.spouse?.ssn),"|","|",xt(w.spouse?.dateOfBirth)||"","|",w.spouse?.occupation||"","|","|",w.spouse?.phone,"|","|","|","|","|","|","|","|","|","|","|"].join(""));let Oe=[w.address,"|","|","|",w.zipCode,"|","|","|","|","|"].join("");return`${I}${Z}${Oe}`},pe=w=>{const I=D(w);ce(I),Le(!0)},m=w=>[w.bankName,"|",w.routingNumber||"","|",w.routingNumber||"","|",w.accountNumber||"","|",w.accountNumber||"","|"].join(""),je=w=>{const I=m(w);ce(I),Le(!0)},Re=w=>{ce(w),Le(!0)},ae={display:"flex","flex-direction":"column",gap:"1.5rem"},ke={display:"flex","justify-content":"space-between","align-items":"center","flex-wrap":"wrap",gap:"1rem"},we={"font-size":"1.25rem","font-weight":"600",color:"var(--text-primary)",margin:"0"},Ve={display:"flex",gap:"0.5rem","border-bottom":"2px solid var(--border-color)","padding-bottom":"0"},ze=w=>({padding:"0.75rem 1.5rem","font-size":"0.9375rem","font-weight":w?"600":"500",color:w?"var(--primary-color)":"var(--text-secondary)",background:"transparent",border:"none","border-bottom":w?"2px solid var(--primary-color)":"2px solid transparent",cursor:"pointer","margin-bottom":"-2px",transition:"all 0.2s"}),de={display:"grid","grid-template-columns":"repeat(auto-fill, minmax(280px, 1fr))",gap:"1.25rem","margin-top":"1.5rem"},W={display:"flex","flex-direction":"column",gap:"0.5rem"},Q={"font-size":"0.875rem","font-weight":"500",color:"var(--text-secondary)"},le={padding:"0.75rem 1rem","font-size":"0.9375rem",border:"1px solid var(--border-color)","border-radius":"8px",background:"var(--surface-color)",color:"var(--text-primary)",outline:"none",transition:"border-color 0.2s, box-shadow 0.2s"},_e={...le,cursor:"pointer"},Xe={display:"flex","align-items":"center",gap:"0.75rem",padding:"0.75rem",background:"var(--surface-alt)","border-radius":"8px"},Je={width:"18px",height:"18px",cursor:"pointer"},ft={padding:"1.25rem",border:"1px solid var(--border-color)","border-radius":"12px",background:"var(--surface-alt)","margin-bottom":"1rem"},gt={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"1rem"},mt={padding:"0.5rem",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)","border-radius":"6px",color:"#ef4444",cursor:"pointer"},st={display:"flex","align-items":"center","justify-content":"center",gap:"0.5rem",padding:"1rem",border:"2px dashed var(--border-color)","border-radius":"12px",background:"transparent",color:"var(--text-secondary)",cursor:"pointer","font-size":"0.9375rem","font-weight":"500",transition:"all 0.2s"},ut=w=>({padding:"0.75rem 1.5rem","font-size":"0.9375rem","font-weight":"600","border-radius":"8px",border:"none",background:w?"var(--surface-alt)":"linear-gradient(135deg, #22c55e 0%, #16a34a 100%)",color:w?"var(--text-secondary)":"white",cursor:w?"not-allowed":"pointer","box-shadow":w?"none":"0 4px 12px rgba(34, 197, 94, 0.3)",display:"flex","align-items":"center",gap:"0.5rem"}),Me=w=>({padding:"0.75rem 1rem","border-radius":"8px","font-size":"0.875rem",background:w==="success"?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",color:w==="success"?"#22c55e":"#ef4444",border:`1px solid ${w==="success"?"#22c55e":"#ef4444"}`,display:"flex","align-items":"center",gap:"0.5rem"}),J={"font-size":"1rem","font-weight":"600",color:"var(--text-primary)","margin-bottom":"1rem",display:"flex","align-items":"center",gap:"0.5rem"};return(()=>{var w=Ki(),I=w.firstChild,Z=I.firstChild,Oe=Z.firstChild,Ye=Oe.nextSibling,Ge=Z.nextSibling,Ue=Ge.firstChild,nt=Ue.firstChild,lt=Ue.nextSibling,De=I.nextSibling,Ke=De.firstChild,v=Ke.nextSibling,p=v.firstChild,R=p.nextSibling;R.nextSibling;var M=v.nextSibling,V=De.nextSibling;return t(Oe,we),Ye.style.setProperty("font-size","0.875rem"),Ye.style.setProperty("color","var(--text-secondary)"),Ye.style.setProperty("margin-top","0.25rem"),Ge.style.setProperty("display","flex"),Ge.style.setProperty("gap","0.75rem"),Ge.style.setProperty("align-items","center"),Ue.$$mouseout=n=>{n.currentTarget.style.background="white",n.currentTarget.style.borderColor="var(--border-color)"},Ue.$$mouseover=n=>{n.currentTarget.style.background="var(--surface-alt)",n.currentTarget.style.borderColor="var(--primary-color)"},Ue.$$click=()=>pe(l.client),Ue.style.setProperty("padding","0.75rem 1rem"),Ue.style.setProperty("font-size","0.9375rem"),Ue.style.setProperty("font-weight","500"),Ue.style.setProperty("border-radius","8px"),Ue.style.setProperty("border","1px solid var(--border-color)"),Ue.style.setProperty("background","white"),Ue.style.setProperty("color","var(--text-primary)"),Ue.style.setProperty("cursor","pointer"),Ue.style.setProperty("display","flex"),Ue.style.setProperty("align-items","center"),Ue.style.setProperty("gap","0.5rem"),Ue.style.setProperty("transition","all 0.2s"),nt.style.setProperty("width","18px"),nt.style.setProperty("height","18px"),lt.$$click=L,e(lt,a($,{get when(){return l.isSaving},get fallback(){return[(()=>{var n=Ji();return n.style.setProperty("width","18px"),n.style.setProperty("height","18px"),n})(),"Save Changes"]},get children(){return[(()=>{var n=zi();return n.style.setProperty("width","18px"),n.style.setProperty("height","18px"),n.style.setProperty("animation","spin 1s linear infinite"),n})(),"Saving..."]}})),e(w,a($,{get when(){return fe()},get children(){var n=Ti();return e(n,()=>fe().text),z(o=>t(n,Me(fe().type),o)),n}}),De),t(De,Ve),Ke.$$click=()=>G("personal"),e(De,a($,{get when(){return i()},get children(){var n=ki();return n.$$click=()=>G("spouse"),z(o=>t(n,ze(E()==="spouse"),o)),n}}),v),v.$$click=()=>G("dependents"),e(v,()=>l.client.dependents?.length||0,R),M.$$click=()=>G("tax"),e(w,a($,{get when(){return E()==="personal"},get children(){return a(ct,{get children(){return[(()=>{var n=Ii(),o=n.firstChild;return o.nextSibling,o.style.setProperty("width","20px"),o.style.setProperty("height","20px"),o.style.setProperty("color","#3b82f6"),e(n,a(_t,{get text(){return[l.client?.firstName,"|",l.client.middleName||"","|",l.client.lastName,"|","|",St(l.client?.ssn),"|","|",xt(l.client.dateOfBirth)||"","|",l.client?.occupation||"","|","|",l.client.phone,"|"].join("")||""},handle:Re,label:""}),null),z(h=>t(n,J,h)),n})(),(()=>{var n=Ni(),o=n.firstChild,h=o.firstChild,u=o.nextSibling,S=u.firstChild,T=S.nextSibling,g=u.nextSibling,c=g.firstChild,Y=c.nextSibling,oe=g.nextSibling,xe=oe.firstChild,re=xe.nextSibling,Te=oe.nextSibling,j=Te.firstChild,Pe=Te.nextSibling,H=Pe.firstChild,P=Pe.nextSibling,_=P.firstChild,ee=_.nextSibling,N=P.nextSibling,ge=N.firstChild,F=ge.nextSibling,q=N.nextSibling,O=q.firstChild;return e(o,a(_t,{get text(){return l.client.firstName+(l.client.middleName?" "+l.client.middleName+" ":" ")+l.client.lastName||""},handle:Re,label:"First Name *"}),h),h.$$input=f=>K("firstName",f.currentTarget.value),T.$$input=f=>K("middleName",f.currentTarget.value),Y.$$input=f=>K("lastName",f.currentTarget.value),re.addEventListener("change",f=>K("suffix",f.currentTarget.value||void 0)),e(Te,a(_t,{get text(){return l.client?.ssn||""},handle:Re,label:"SSN"}),j),j.$$input=f=>K("ssn",f.currentTarget.value),e(Pe,a(_t,{get text(){return xt(l.client?.spouse?.dateOfBirth)||""},handle:Re,label:"Date of Birth"}),H),H.$$input=f=>K("dateOfBirth",f.currentTarget.value),ee.$$input=f=>K("occupation",f.currentTarget.value),F.$$input=f=>K("email",f.currentTarget.value),e(q,a(_t,{get text(){return l.client.phone||""},handle:Re,label:"Phone"}),O),O.$$input=f=>K("phone",f.currentTarget.value),z(f=>{var ye=de,me=W,Ie=le,B=W,Ee=Q,U=le,d=W,A=Q,se=le,He=W,Qe=Q,et=_e,it=W,tt=le,Ze=W,rt=le,dt=W,at=Q,ot=le,ie=W,ne=Q,Ce=le,X=W,We=le;return f.e=t(n,ye,f.e),f.t=t(o,me,f.t),f.a=t(h,Ie,f.a),f.o=t(u,B,f.o),f.i=t(S,Ee,f.i),f.n=t(T,U,f.n),f.s=t(g,d,f.s),f.h=t(c,A,f.h),f.r=t(Y,se,f.r),f.d=t(oe,He,f.d),f.l=t(xe,Qe,f.l),f.u=t(re,et,f.u),f.c=t(Te,it,f.c),f.w=t(j,tt,f.w),f.m=t(Pe,Ze,f.m),f.f=t(H,rt,f.f),f.y=t(P,dt,f.y),f.g=t(_,at,f.g),f.p=t(ee,ot,f.p),f.b=t(N,ie,f.b),f.T=t(ge,ne,f.T),f.A=t(F,Ce,f.A),f.O=t(q,X,f.O),f.I=t(O,We,f.I),f},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0}),z(()=>h.value=l.client.firstName||""),z(()=>T.value=l.client.middleName||""),z(()=>Y.value=l.client.lastName||""),z(()=>re.value=l.client.suffix||""),z(()=>j.value=l.client?.ssn||""),z(()=>H.value=l.client?.dateOfBirth||""),z(()=>ee.value=l.client?.occupation||""),z(()=>F.value=l.client?.email||""),z(()=>O.value=l.client.phone||""),n})(),(()=>{var n=Di(),o=n.firstChild;return o.nextSibling,o.style.setProperty("width","20px"),o.style.setProperty("height","20px"),o.style.setProperty("color","#8b5cf6"),e(n,a(_t,{get text(){return[l.client.address,"|","|","|",l.client.zipCode,"|","|","|","|","|"].join("")||""},handle:Re,label:""}),null),z(h=>t(n,{...J,"margin-top":"2rem"},h)),n})(),(()=>{var n=Fi(),o=n.firstChild,h=o.firstChild,u=h.nextSibling,S=o.nextSibling,T=S.firstChild,g=T.nextSibling,c=S.nextSibling,Y=c.firstChild,oe=Y.nextSibling;oe.firstChild;var xe=c.nextSibling,re=xe.firstChild,Te=re.nextSibling;return u.$$input=j=>K("address",j.currentTarget.value),g.$$input=j=>K("city",j.currentTarget.value),oe.addEventListener("change",j=>K("state",j.currentTarget.value)),e(oe,a(pt,{each:ro,children:j=>(()=>{var Pe=Et();return Pe.value=j,e(Pe,j),Pe})()}),null),Te.$$input=j=>K("zipCode",j.currentTarget.value),z(j=>{var Pe=de,H={...W,"grid-column":"span 2"},P=Q,_=le,ee=W,N=Q,ge=le,F=W,q=Q,O=_e,f=W,ye=Q,me=le;return j.e=t(n,Pe,j.e),j.t=t(o,H,j.t),j.a=t(h,P,j.a),j.o=t(u,_,j.o),j.i=t(S,ee,j.i),j.n=t(T,N,j.n),j.s=t(g,ge,j.s),j.h=t(c,F,j.h),j.r=t(Y,q,j.r),j.d=t(oe,O,j.d),j.l=t(xe,f,j.l),j.u=t(re,ye,j.u),j.c=t(Te,me,j.c),j},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0}),z(()=>u.value=l.client.address||""),z(()=>g.value=l.client.city||""),z(()=>oe.value=l.client.state||""),z(()=>Te.value=l.client.zipCode||""),n})()]}})}}),V),e(w,a($,{get when(){return qe(()=>E()==="spouse")()&&i()},get children(){return a(ct,{get children(){return[(()=>{var n=Ai(),o=n.firstChild,h=o.firstChild;return h.nextSibling,h.style.setProperty("width","20px"),h.style.setProperty("height","20px"),h.style.setProperty("color","#ec4899"),e(o,a(_t,{get text(){return[l.client.spouse?.firstName,"|",l.client.spouse?.middleName||"","|",l.client.spouse?.lastName,"|","|",St(l.client.spouse?.ssn),"|","|",xt(l.client?.spouse?.dateOfBirth)||"","|",l.client.spouse?.occupation||"","|","|",l.client.spouse?.phone,"|"].join("")||""},handle:Re,label:""}),null),z(u=>{var S=gt,T=J;return u.e=t(n,S,u.e),u.t=t(o,T,u.t),u},{e:void 0,t:void 0}),n})(),(()=>{var n=Li(),o=n.firstChild,h=o.firstChild,u=h.nextSibling,S=o.nextSibling,T=S.firstChild,g=T.nextSibling,c=S.nextSibling,Y=c.firstChild,oe=Y.nextSibling,xe=c.nextSibling,re=xe.firstChild,Te=re.nextSibling,j=xe.nextSibling,Pe=j.firstChild,H=Pe.nextSibling,P=j.nextSibling,_=P.firstChild,ee=_.nextSibling,N=P.nextSibling,ge=N.firstChild,F=ge.nextSibling,q=N.nextSibling,O=q.firstChild,f=O.nextSibling,ye=q.nextSibling,me=ye.firstChild,Ie=me.nextSibling;return u.$$input=B=>K("spouse",{...l.client.spouse,firstName:B.currentTarget.value,lastName:l.client.spouse?.lastName||""}),g.$$input=B=>K("spouse",{...l.client.spouse,firstName:l.client.spouse?.firstName||"",lastName:l.client.spouse?.lastName||"",middleName:B.currentTarget.value}),oe.$$input=B=>K("spouse",{...l.client.spouse,firstName:l.client.spouse?.firstName||"",lastName:B.currentTarget.value}),Te.addEventListener("change",B=>K("spouse",{...l.client.spouse,firstName:l.client.spouse?.firstName||"",lastName:l.client.spouse?.lastName||"",suffix:B.currentTarget.value||void 0})),H.$$input=B=>K("spouse",{...l.client.spouse,firstName:l.client.spouse?.firstName||"",lastName:l.client.spouse?.lastName||"",ssn:B.currentTarget.value}),ee.$$input=B=>K("spouse",{...l.client.spouse,firstName:l.client.spouse?.firstName||"",lastName:l.client.spouse?.lastName||"",dateOfBirth:B.currentTarget.value}),F.$$input=B=>K("spouse",{...l.client.spouse,firstName:l.client.spouse?.firstName||"",lastName:l.client.spouse?.lastName||"",occupation:B.currentTarget.value}),f.$$input=B=>K("spouse",{...l.client.spouse,firstName:l.client.spouse?.firstName||"",lastName:l.client.spouse?.lastName||"",email:B.currentTarget.value}),Ie.$$input=B=>K("spouse",{...l.client.spouse,firstName:l.client.spouse?.firstName||"",lastName:l.client.spouse?.lastName||"",phone:B.currentTarget.value}),z(B=>{var Ee=de,U=W,d=Q,A=le,se=W,He=Q,Qe=le,et=W,it=Q,tt=le,Ze=W,rt=Q,dt=_e,at=W,ot=Q,ie=le,ne=W,Ce=Q,X=le,We=W,ve=Q,s=le,k=W,x=Q,yt=le,At=W,Lt=Q,It=le;return B.e=t(n,Ee,B.e),B.t=t(o,U,B.t),B.a=t(h,d,B.a),B.o=t(u,A,B.o),B.i=t(S,se,B.i),B.n=t(T,He,B.n),B.s=t(g,Qe,B.s),B.h=t(c,et,B.h),B.r=t(Y,it,B.r),B.d=t(oe,tt,B.d),B.l=t(xe,Ze,B.l),B.u=t(re,rt,B.u),B.c=t(Te,dt,B.c),B.w=t(j,at,B.w),B.m=t(Pe,ot,B.m),B.f=t(H,ie,B.f),B.y=t(P,ne,B.y),B.g=t(_,Ce,B.g),B.p=t(ee,X,B.p),B.b=t(N,We,B.b),B.T=t(ge,ve,B.T),B.A=t(F,s,B.A),B.O=t(q,k,B.O),B.I=t(O,x,B.I),B.S=t(f,yt,B.S),B.W=t(ye,At,B.W),B.C=t(me,Lt,B.C),B.B=t(Ie,It,B.B),B},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0,A:void 0,O:void 0,I:void 0,S:void 0,W:void 0,C:void 0,B:void 0}),z(()=>u.value=l.client.spouse?.firstName||""),z(()=>g.value=l.client.spouse?.middleName||""),z(()=>oe.value=l.client.spouse?.lastName||""),z(()=>Te.value=l.client.spouse?.suffix||""),z(()=>H.value=l.client.spouse?.ssn||""),z(()=>ee.value=l.client.spouse?.dateOfBirth||""),z(()=>F.value=l.client.spouse?.occupation||""),z(()=>f.value=l.client.spouse?.email||""),z(()=>Ie.value=l.client.spouse?.phone||""),n})(),(()=>{var n=Ri(),o=n.firstChild;return o.style.setProperty("width","20px"),o.style.setProperty("height","20px"),o.style.setProperty("color","#f59e0b"),z(h=>t(n,{...J,"margin-top":"2rem"},h)),n})(),(()=>{var n=Mi(),o=n.firstChild,h=o.firstChild,u=o.nextSibling,S=u.firstChild;return n.style.setProperty("display","flex"),n.style.setProperty("flex-direction","column"),n.style.setProperty("gap","0.75rem"),h.addEventListener("change",T=>K("spouse",{...l.client.spouse,firstName:l.client.spouse?.firstName||"",lastName:l.client.spouse?.lastName||"",isBlind:T.currentTarget.checked})),S.addEventListener("change",T=>K("spouse",{...l.client.spouse,firstName:l.client.spouse?.firstName||"",lastName:l.client.spouse?.lastName||"",canBeClaimed:T.currentTarget.checked})),z(T=>{var g=Xe,c=Je,Y=Xe,oe=Je;return T.e=t(o,g,T.e),T.t=t(h,c,T.t),T.a=t(u,Y,T.a),T.o=t(S,oe,T.o),T},{e:void 0,t:void 0,a:void 0,o:void 0}),z(()=>h.checked=l.client.spouse?.isBlind||!1),z(()=>S.checked=l.client.spouse?.canBeClaimed||!1),n})()]}})}}),V),e(w,a($,{get when(){return E()==="dependents"},get children(){return a(ct,{get children(){return[(()=>{var n=Ei(),o=n.firstChild,h=o.nextSibling,u=h.nextSibling;return u.nextSibling,o.style.setProperty("width","20px"),o.style.setProperty("height","20px"),o.style.setProperty("color","#22c55e"),e(n,()=>l.client.dependents?.length||0,u),z(S=>t(n,J,S)),n})(),(()=>{var n=Oi(),o=n.firstChild,h=o.firstChild,u=h.nextSibling,S=u.firstChild,T=S.nextSibling;return n.style.setProperty("padding","1rem"),n.style.setProperty("border-radius","12px"),n.style.setProperty("margin-bottom","1.5rem"),n.style.setProperty("display","flex"),n.style.setProperty("align-items","center"),n.style.setProperty("justify-content","space-between"),n.style.setProperty("gap","1rem"),o.style.setProperty("display","flex"),o.style.setProperty("align-items","center"),o.style.setProperty("gap","0.75rem"),h.addEventListener("change",g=>{K("hasNoDependents",g.currentTarget.checked),g.currentTarget.checked&&(l.client.dependents?.length||0)>0&&K("dependents",[])}),S.style.setProperty("font-weight","600"),S.style.setProperty("color","var(--text-primary)"),T.style.setProperty("font-size","0.8125rem"),T.style.setProperty("color","var(--text-secondary)"),e(n,a($,{get when(){return l.client.hasNoDependents},get children(){var g=Bi(),c=g.firstChild;return g.style.setProperty("display","flex"),g.style.setProperty("align-items","center"),g.style.setProperty("gap","0.5rem"),g.style.setProperty("padding","0.5rem 1rem"),g.style.setProperty("background","#22c55e"),g.style.setProperty("color","white"),g.style.setProperty("border-radius","9999px"),g.style.setProperty("font-size","0.8125rem"),g.style.setProperty("font-weight","600"),c.style.setProperty("width","16px"),c.style.setProperty("height","16px"),g}}),null),z(g=>{var c=l.client.hasNoDependents?"linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(34, 197, 94, 0.2))":"var(--surface-alt)",Y=l.client.hasNoDependents?"2px solid #22c55e":"1px solid var(--border-color)",oe={...Je,"accent-color":"#22c55e"};return c!==g.e&&((g.e=c)!=null?n.style.setProperty("background",c):n.style.removeProperty("background")),Y!==g.t&&((g.t=Y)!=null?n.style.setProperty("border",Y):n.style.removeProperty("border")),g.a=t(h,oe,g.a),g},{e:void 0,t:void 0,a:void 0}),z(()=>h.checked=l.client.hasNoDependents||!1),n})(),a($,{get when(){return!l.client.hasNoDependents},get children(){return[a(pt,{get each(){return l.client.dependents||[]},children:(n,o)=>(()=>{var h=Zi(),u=h.firstChild,S=u.firstChild;S.firstChild;var T=S.nextSibling,g=T.firstChild,c=T.nextSibling,Y=c.firstChild,oe=u.nextSibling,xe=oe.firstChild,re=xe.firstChild,Te=xe.nextSibling,j=Te.firstChild,Pe=Te.nextSibling,H=Pe.firstChild,P=H.nextSibling,_=Pe.nextSibling,ee=_.firstChild,N=_.nextSibling,ge=N.firstChild,F=N.nextSibling,q=F.firstChild,O=oe.nextSibling,f=O.firstChild,ye=f.firstChild,me=f.nextSibling,Ie=me.firstChild,B=me.nextSibling,Ee=B.firstChild;return t(h,ft),S.style.setProperty("font-weight","600"),S.style.setProperty("color","var(--text-primary)"),e(S,()=>o()+1,null),e(S,()=>n.firstName&&`: ${n.firstName} ${n.lastName}`,null),T.$$mouseout=U=>{U.currentTarget.style.background="white",U.currentTarget.style.borderColor="var(--border-color)"},T.$$mouseover=U=>{U.currentTarget.style.background="var(--surface-alt)",U.currentTarget.style.borderColor="var(--primary-color)"},T.$$click=()=>ue(n),T.style.setProperty("padding","0.75rem 1rem"),T.style.setProperty("font-size","0.9375rem"),T.style.setProperty("font-weight","500"),T.style.setProperty("border-radius","8px"),T.style.setProperty("border","1px solid var(--border-color)"),T.style.setProperty("background","white"),T.style.setProperty("color","var(--text-primary)"),T.style.setProperty("cursor","pointer"),T.style.setProperty("display","flex"),T.style.setProperty("align-items","center"),T.style.setProperty("gap","0.5rem"),T.style.setProperty("transition","all 0.2s"),g.style.setProperty("width","18px"),g.style.setProperty("height","18px"),c.$$click=()=>C(o()),t(c,mt),Y.style.setProperty("width","16px"),Y.style.setProperty("height","16px"),e(xe,a(Tt,{style:le,type:"text",get value(){return n.firstName||""},onChange:U=>b(o(),{firstName:U}),placeholder:"First name"}),null),e(Te,a(Tt,{style:le,type:"text",get value(){return n.lastName||""},onChange:U=>b(o(),{lastName:U}),placeholder:"Last name"}),null),P.addEventListener("change",U=>b(o(),{relationship:U.currentTarget.value})),e(P,a(pt,{get each(){return Object.entries(to)},children:([U,d])=>(()=>{var A=Et();return A.value=U,e(A,d),A})()})),e(_,a(Tt,{style:le,type:"text",get value(){return n.ssn||""},onChange:U=>b(o(),{ssn:U}),placeholder:"XXX-XX-XXXX",maxLength:11}),null),e(N,a(Tt,{style:le,type:"date",get value(){return n.dateOfBirth||""},onChange:U=>b(o(),{dateOfBirth:U})}),null),e(F,a(Tt,{style:le,type:"number",min:"0",max:"12",get value(){return n.monthsLivedWithYou||""},onChange:U=>b(o(),{monthsLivedWithYou:parseInt(U)||void 0}),placeholder:"12"}),null),O.style.setProperty("display","grid"),O.style.setProperty("grid-template-columns","repeat(auto-fill, minmax(250px, 1fr))"),O.style.setProperty("gap","0.75rem"),O.style.setProperty("margin-top","1rem"),ye.addEventListener("change",U=>b(o(),{isStudent:U.currentTarget.checked})),Ie.addEventListener("change",U=>b(o(),{isDisabled:U.currentTarget.checked})),Ee.addEventListener("change",U=>b(o(),{providedSupport:U.currentTarget.checked})),z(U=>{var d=gt,A=de,se=W,He=Q,Qe=W,et=Q,it=W,tt=Q,Ze=_e,rt=W,dt=Q,at=W,ot=Q,ie=W,ne=Q,Ce=Xe,X=Je,We=Xe,ve=Je,s=Xe,k=Je;return U.e=t(u,d,U.e),U.t=t(oe,A,U.t),U.a=t(xe,se,U.a),U.o=t(re,He,U.o),U.i=t(Te,Qe,U.i),U.n=t(j,et,U.n),U.s=t(Pe,it,U.s),U.h=t(H,tt,U.h),U.r=t(P,Ze,U.r),U.d=t(_,rt,U.d),U.l=t(ee,dt,U.l),U.u=t(N,at,U.u),U.c=t(ge,ot,U.c),U.w=t(F,ie,U.w),U.m=t(q,ne,U.m),U.f=t(f,Ce,U.f),U.y=t(ye,X,U.y),U.g=t(me,We,U.g),U.p=t(Ie,ve,U.p),U.b=t(B,s,U.b),U.T=t(Ee,k,U.T),U},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0}),z(()=>P.value=n.relationship||"son"),z(()=>ye.checked=n.isStudent||!1),z(()=>Ie.checked=n.isDisabled||!1),z(()=>Ee.checked=n.providedSupport||!1),h})()}),(()=>{var n=Ui(),o=n.firstChild;return n.$$mouseout=h=>{h.currentTarget.style.borderColor="var(--border-color)",h.currentTarget.style.color="var(--text-secondary)"},n.$$mouseover=h=>{h.currentTarget.style.borderColor="var(--primary-color)",h.currentTarget.style.color="var(--primary-color)"},n.$$click=()=>{l.client.hasNoDependents&&K("hasNoDependents",!1),Se()},t(n,st),o.style.setProperty("width","20px"),o.style.setProperty("height","20px"),n})()]}})]}})}}),V),e(w,a($,{get when(){return E()==="tax"},get children(){return a(ct,{get children(){return[(()=>{var n=Wi(),o=n.firstChild;return o.style.setProperty("width","20px"),o.style.setProperty("height","20px"),o.style.setProperty("color","#3b82f6"),z(h=>t(n,J,h)),n})(),(()=>{var n=ji(),o=n.firstChild,h=o.firstChild,u=h.nextSibling,S=o.nextSibling,T=S.firstChild,g=T.nextSibling;return g.firstChild,u.addEventListener("change",c=>K("taxYear",parseInt(c.currentTarget.value))),g.addEventListener("change",c=>K("filingStatus",c.currentTarget.value)),e(g,a(pt,{get each(){return Object.entries(wr)},children:([c,Y])=>(()=>{var oe=Et();return oe.value=c,e(oe,Y),oe})()}),null),z(c=>{var Y=de,oe=W,xe=Q,re=_e,Te=W,j=Q,Pe=_e;return c.e=t(n,Y,c.e),c.t=t(o,oe,c.t),c.a=t(h,xe,c.a),c.o=t(u,re,c.o),c.i=t(S,Te,c.i),c.n=t(T,j,c.n),c.s=t(g,Pe,c.s),c},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),z(()=>u.value=l.client.taxYear||new Date().getFullYear()),z(()=>g.value=l.client.filingStatus||""),n})(),(()=>{var n=Vi(),o=n.firstChild;return o.style.setProperty("width","20px"),o.style.setProperty("height","20px"),o.style.setProperty("color","#f59e0b"),z(h=>t(n,{...J,"margin-top":"2rem"},h)),n})(),(()=>{var n=Hi(),o=n.firstChild,h=o.firstChild,u=o.nextSibling,S=u.firstChild,T=u.nextSibling,g=T.firstChild;return n.style.setProperty("display","grid"),n.style.setProperty("grid-template-columns","repeat(auto-fill, minmax(300px, 1fr))"),n.style.setProperty("gap","0.75rem"),h.addEventListener("change",c=>K("isBlind",c.currentTarget.checked)),S.addEventListener("change",c=>K("canBeClaimed",c.currentTarget.checked)),g.addEventListener("change",c=>K("hasHealthInsurance",c.currentTarget.checked)),z(c=>{var Y=Xe,oe=Je,xe=Xe,re=Je,Te=Xe,j=Je;return c.e=t(o,Y,c.e),c.t=t(h,oe,c.t),c.a=t(u,xe,c.a),c.o=t(S,re,c.o),c.i=t(T,Te,c.i),c.n=t(g,j,c.n),c},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),z(()=>h.checked=l.client.isBlind||!1),z(()=>S.checked=l.client.canBeClaimed||!1),z(()=>g.checked=l.client.hasHealthInsurance||!1),n})(),(()=>{var n=qi(),o=n.firstChild;return o.style.setProperty("width","20px"),o.style.setProperty("height","20px"),o.style.setProperty("color","#22c55e"),z(h=>t(n,{...J,"margin-top":"2rem"},h)),n})(),(()=>{var n=Yi(),o=n.firstChild;return n.$$mouseout=h=>{h.currentTarget.style.background="white",h.currentTarget.style.borderColor="var(--border-color)"},n.$$mouseover=h=>{h.currentTarget.style.background="var(--surface-alt)",h.currentTarget.style.borderColor="var(--primary-color)"},n.$$click=()=>je(l.client.bankInfo),n.style.setProperty("padding","0.75rem 1rem"),n.style.setProperty("font-size","0.9375rem"),n.style.setProperty("font-weight","500"),n.style.setProperty("border-radius","8px"),n.style.setProperty("border","1px solid var(--border-color)"),n.style.setProperty("background","white"),n.style.setProperty("color","var(--text-primary)"),n.style.setProperty("cursor","pointer"),n.style.setProperty("display","flex"),n.style.setProperty("align-items","center"),n.style.setProperty("gap","0.5rem"),n.style.setProperty("transition","all 0.2s"),o.style.setProperty("width","18px"),o.style.setProperty("height","18px"),n})(),(()=>{var n=Xi(),o=n.firstChild,h=o.firstChild,u=h.nextSibling,S=o.nextSibling,T=S.firstChild,g=T.nextSibling,c=S.nextSibling,Y=c.firstChild,oe=Y.nextSibling,xe=c.nextSibling,re=xe.firstChild,Te=re.nextSibling,j=xe.nextSibling,Pe=j.firstChild,H=Pe.nextSibling;return u.addEventListener("change",P=>K("bankInfo",{...l.client.bankInfo,accountType:P.currentTarget.value,routingNumber:l.client.bankInfo?.routingNumber||"",accountNumber:l.client.bankInfo?.accountNumber||"",bankName:l.client.bankInfo?.bankName||""})),g.$$input=P=>K("bankInfo",{...l.client.bankInfo,accountType:l.client.bankInfo?.accountType||"checking",bankName:P.currentTarget.value,accountNumber:l.client.bankInfo?.accountNumber||"",routingNumber:l.client.bankInfo?.routingNumber||""}),oe.$$input=P=>K("bankInfo",{...l.client.bankInfo,accountType:l.client.bankInfo?.accountType||"checking",routingNumber:P.currentTarget.value,accountNumber:l.client.bankInfo?.accountNumber||"",bankName:l.client.bankInfo?.bankName||""}),Te.$$input=P=>K("bankInfo",{...l.client.bankInfo,accountType:l.client.bankInfo?.accountType||"checking",routingNumber:l.client.bankInfo?.routingNumber||"",accountNumber:P.currentTarget.value,bankName:l.client.bankInfo?.bankName||""}),H.$$input=P=>K("bankInfo",{...l.client.bankInfo,accountType:l.client.bankInfo?.accountType||"checking",routingNumber:l.client.bankInfo?.routingNumber||"",accountNumber:l.client.bankInfo?.accountNumber||"",accountHolderName:P.currentTarget.value,bankName:l.client.bankInfo?.bankName||""}),z(P=>{var _=de,ee=W,N=Q,ge=_e,F=W,q=Q,O=le,f=W,ye=Q,me=le,Ie=W,B=Q,Ee=le,U=W,d=Q,A=le;return P.e=t(n,_,P.e),P.t=t(o,ee,P.t),P.a=t(h,N,P.a),P.o=t(u,ge,P.o),P.i=t(S,F,P.i),P.n=t(T,q,P.n),P.s=t(g,O,P.s),P.h=t(c,f,P.h),P.r=t(Y,ye,P.r),P.d=t(oe,me,P.d),P.l=t(xe,Ie,P.l),P.u=t(re,B,P.u),P.c=t(Te,Ee,P.c),P.w=t(j,U,P.w),P.m=t(Pe,d,P.m),P.f=t(H,A,P.f),P},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0}),z(()=>u.value=l.client.bankInfo?.accountType||""),z(()=>g.value=l.client.bankInfo?.bankName||""),z(()=>oe.value=l.client.bankInfo?.routingNumber||""),z(()=>Te.value=l.client.bankInfo?.accountNumber||""),z(()=>H.value=l.client.bankInfo?.accountHolderName||""),n})(),(()=>{var n=Qi(),o=n.firstChild;return o.style.setProperty("width","20px"),o.style.setProperty("height","20px"),o.style.setProperty("color","#6b7280"),z(h=>t(n,{...J,"margin-top":"2rem"},h)),n})(),(()=>{var n=Gi(),o=n.firstChild;return o.$$input=h=>K("notes",h.currentTarget.value),z(h=>{var u=W,S={...le,"min-height":"100px",resize:"vertical"};return h.e=t(n,u,h.e),h.t=t(o,S,h.t),h},{e:void 0,t:void 0}),z(()=>o.value=l.client.notes||""),n})()]}})}}),V),e(w,a(Ci,{get client(){return l.client},get isOpen(){return Be()},onClose:()=>te(!1)}),null),e(w,a(Zt,{get qrText(){return r()},get isOpen(){return Fe()},onClose:()=>Le(!1),title:"QR Code",convertPipeToTab:!0,toUpperCase:!0}),null),z(n=>{var o=ae,h=ke,u=ut(!he()||!!l.isSaving),S=!he()||!!l.isSaving,T=ze(E()==="personal"),g=ze(E()==="dependents"),c=ze(E()==="tax");return n.e=t(w,o,n.e),n.t=t(I,h,n.t),n.a=t(lt,u,n.a),S!==n.o&&(lt.disabled=n.o=S),n.i=t(Ke,T,n.i),n.n=t(v,g,n.n),n.s=t(M,c,n.s),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),w})()},_t=l=>{const E={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.1rem"},G={"font-size":"0.875rem","font-weight":"500",color:"var(--text-secondary)"};return(()=>{var he=eo(),$e=he.firstChild,fe=$e.nextSibling,Ae=fe.firstChild;return t(he,E),t($e,G),e($e,()=>l?.label),fe.$$mouseout=Be=>{Be.currentTarget.style.background="white",Be.currentTarget.style.borderColor="var(--border-color)"},fe.$$mouseover=Be=>{Be.currentTarget.style.background="var(--surface-alt)",Be.currentTarget.style.borderColor="var(--primary-color)"},fe.$$click=()=>l?.handle?.(l?.text),fe.style.setProperty("padding","0"),fe.style.setProperty("font-size","0.9375rem"),fe.style.setProperty("font-weight","500"),fe.style.setProperty("border-radius","8px"),fe.style.setProperty("background","white"),fe.style.setProperty("color","var(--text-primary)"),fe.style.setProperty("cursor","pointer"),fe.style.setProperty("display","flex"),fe.style.setProperty("align-items","center"),fe.style.setProperty("gap","0.5rem"),fe.style.setProperty("transition","all 0.2s"),Ae.style.setProperty("width","18px"),Ae.style.setProperty("height","18px"),he})()};$t(["click","mouseover","mouseout","input"]);var lo=y(`<style>
        @media print {
          body * {
            visibility: hidden;
          }
          .drake-print-view,
          .drake-print-view * {
            visibility: visible !important;
          }
          .drake-print-view {
            position: absolute !important;
            left: 0 !important;
            top: 0 !important;
            transform: none !important;
            width: 100% !important;
            max-width: 100% !important;
            max-height: none !important;
            overflow: visible !important;
            background: white !important;
            border-radius: 0 !important;
          }
          .no-print {
            display: none !important;
            visibility: hidden !important;
          }
          .modal-overlay {
            display: none !important;
          }
          .qr-section {
            page-break-inside: avoid;
          }
          .qr-grid {
            display: grid !important;
            grid-template-columns: repeat(3, 1fr) !important;
            gap: 20px !important;
          }
          .qr-item {
            page-break-inside: avoid;
          }
        }
      `),io=y('<div class="no-print modal-overlay">'),oo=y("<div>Generating QR codes..."),so=y("<div><h1>Drake Tax QR Codes</h1><p> <!> - Tax Year "),ao=y("<div class=qr-section><h2>Section 1: Taxpayer Information</h2><div class=qr-grid>"),yo=y("<div class=qr-section><h2>Section 2: Dependents (<!>)</h2><div class=qr-grid>"),co=y("<div class=qr-section><h2>Section 3: Tax Documents (<!>)</h2><div class=qr-grid>"),uo=y("<div>No QR codes to display. Add taxpayer info, dependents, or documents first."),po=y("<div><strong>Summary:</strong> <!> taxpayer, <!> dependent(s), <!> document(s)"),go=y("<div class=drake-print-view><div class=no-print><span>QR Codes - <!> </span><div><button>Print</button><button>x</button></div></div><div>"),Bt=y("<div>"),Ot=y("<div class=qr-item><img><div>");const mo=l=>{const[E,G]=Ne([]),[he,$e]=Ne(!1),fe=C=>C.replace(/\|/g,"	").toUpperCase(),Ae=()=>{const C=l.client,i=[C.firstName,"|",C.middleName||"","|",C.lastName,"|","|",St(C.ssn||""),"|","|",xt(C.dateOfBirth)||"","|",C.occupation||"","|","|",C.phone?C.phone:"","|","|","|"].join("");return fe(i)},Be=()=>{const C=l.client,i=[C.spouse?.firstName,"|",C.spouse?.middleName||"","|",C.spouse?.lastName,"|","|",St(C?.spouse?.ssn),"|","|",xt(C.spouse?.dateOfBirth)||"","|",C.spouse?.occupation||"","|","|",C.spouse?.phone,"|"].join("");return fe(i)},te=()=>{const C=l.client,i=[C.address||"","|","|","|",C.zipCode||""].join("");return fe(i)},Fe=C=>{const i=[C.firstName,"|",C.middleName||"","|",C.lastName,"|","|",St(C.ssn||""),"|","|","|","|",C.relationship||"","|",C.monthsLivedWithYou?.toString()||"12","|",xt(C.dateOfBirth)||"","|","|","|"].filter(Boolean).join("");return fe(i)},Le=C=>{const i=C.payerInfo,be=C.extractedAmounts;switch(C.drakeFormType){case"w2":{const ue=[i?.ein?.replace(/\D/g,"")||"","|",i?.name||"","|",i?.address||"","|",(i?.city||"")+" "+(i?.state||""),"|",i?.zip||"","|","|","|","|","|",be?.wages?.toString()||"","|",be?.wages?.toString()||"","|",be?.federalTaxWithheld?.toString()||"","|",be?.federalTaxWithheld?.toString()||"","|"].join("");return fe(ue)}case"1099_nec":{const ue=[i?.ein?.replace(/\D/g,"")||"","|",i?.name||"","|",i?.address||"","|",(i?.city||"")+" "+(i?.state||""),"|",i?.zip||"","|","|",be?.nonEmployeeCompensation?.toString()||"","|",be?.nonEmployeeCompensation?.toString()||"","|",be?.federalTaxWithheld1099?.toString()||"","|"].join("");return fe(ue)}case"1099_misc":{const ue=[i?.ein?.replace(/\D/g,"")||"","|",i?.name||"","|",i?.address||"","|",(i?.city||"")+" "+(i?.state||""),"|",i?.zip||"","|","|",be?.rents?.toString()||"","|",be?.royalties?.toString()||"","|",be?.otherIncome?.toString()||"","|",be?.federalTaxWithheld1099?.toString()||"","|"].join("");return fe(ue)}case"1099_int":{const ue=[i?.ein?.replace(/\D/g,"")||"","|",i?.name||"","|",i?.address||"","|",(i?.city||"")+" "+(i?.state||""),"|",i?.zip||"","|","|",be?.interestIncome?.toString()||"","|",be?.interestIncome?.toString()||"","|"].join("");return fe(ue)}case"1099_div":{const ue=[i?.ein?.replace(/\D/g,"")||"","|",i?.name||"","|",i?.address||"","|",(i?.city||"")+" "+(i?.state||""),"|",i?.zip||"","|","|",be?.ordinaryDividends?.toString()||"","|",be?.qualifiedDividends?.toString()||"","|",be?.capitalGainDistributions?.toString()||"","|"].join("");return fe(ue)}case"1098":{const ue=[i?.ein?.replace(/\D/g,"")||"","|",i?.name||"","|",i?.address||"","|",(i?.city||"")+" "+(i?.state||""),"|",i?.zip||"","|","|",be?.mortgageInterest?.toString()||"","|",be?.outstandingPrincipal?.toString()||"","|",be?.pointsPaid?.toString()||"","|"].join("");return fe(ue)}case"1098_t":{const ue=[i?.ein?.replace(/\D/g,"")||"","|",i?.name||"","|",i?.address||"","|",(i?.city||"")+" "+(i?.state||""),"|",i?.zip||"","|","|",be?.paymentsReceived?.toString()||"","|",be?.scholarshipsGrants?.toString()||"","|"].join("");return fe(ue)}default:{const ue=[i?.ein?.replace(/\D/g,"")||"","|",i?.name||"","|",i?.address||"","|",(i?.city||"")+" "+(i?.state||""),"|",i?.zip||"","|","|",be?.totalAmount?.toString()||"","|"].join("");return fe(ue)}}},r=C=>({w2:"W-2","1099_nec":"1099-NEC","1099_misc":"1099-MISC","1099_int":"1099-INT","1099_div":"1099-DIV",1098:"1098","1098_t":"1098-T",schedule_k1:"Schedule K-1",receipt:"Receipt",other:"Document"})[C.drakeFormType||"other"]||"Document",ce=async()=>{$e(!0);const C=[];try{const i=Ae(),be=await Ct.toDataURL(i,{width:200,margin:2,errorCorrectionLevel:"M",color:{dark:"#000000",light:"#ffffff"}});if(C.push({label:"Taxpayer Info session",sublabel:`${l.client.firstName} ${l.client.lastName}`,dataUrl:be,section:"taxpayer"}),l.client.filingStatus==="married_filing_jointly"){const pe=Be(),m=await Ct.toDataURL(pe,{width:200,margin:2,errorCorrectionLevel:"M",color:{dark:"#000000",light:"#ffffff"}});C.push({label:"Spouse session",sublabel:`${l.client?.spouse?.firstName} ${l.client.spouse?.lastName}`,dataUrl:m,section:"taxpayer"})}const ue=te(),D=await Ct.toDataURL(ue,{width:200,margin:2,errorCorrectionLevel:"M",color:{dark:"#000000",light:"#ffffff"}});C.push({label:"Taxpayer Address session",sublabel:`${l.client.address}, ${l.client.zipCode}`,dataUrl:D,section:"taxpayer"});for(const pe of l.dependents){const m=Fe(pe),je=await Ct.toDataURL(m,{width:200,margin:2,errorCorrectionLevel:"M",color:{dark:"#000000",light:"#ffffff"}});C.push({label:"Dependent",sublabel:`${pe.firstName} ${pe.lastName}`,dataUrl:je,section:"dependent"})}for(const pe of l.documents){const m=Le(pe),je=await Ct.toDataURL(m,{width:200,margin:2,errorCorrectionLevel:"M",color:{dark:"#000000",light:"#ffffff"}});C.push({label:r(pe),sublabel:pe.payerInfo?.name||pe.originalFileName,dataUrl:je,section:"document"})}G(C)}catch(i){console.error("QR generation error:",i)}$e(!1)};Ft(Wt(()=>l.isOpen,C=>{C&&(G([]),ce())}));const K=()=>{window.print()},L=()=>E().filter(C=>C.section==="taxpayer"),Se=()=>E().filter(C=>C.section==="dependent"),b=()=>E().filter(C=>C.section==="document");return a($,{get when(){return l.isOpen},get children(){return[lo(),(()=>{var C=io();return Dt(C,"click",l.onClose,!0),C.style.setProperty("position","fixed"),C.style.setProperty("inset","0"),C.style.setProperty("background","rgba(0,0,0,0.5)"),C.style.setProperty("z-index","9998"),C})(),(()=>{var C=go(),i=C.firstChild,be=i.firstChild,ue=be.firstChild,D=ue.nextSibling;D.nextSibling;var pe=be.nextSibling,m=pe.firstChild,je=m.nextSibling,Re=i.nextSibling;return C.style.setProperty("position","fixed"),C.style.setProperty("top","50%"),C.style.setProperty("left","50%"),C.style.setProperty("transform","translate(-50%, -50%)"),C.style.setProperty("background","white"),C.style.setProperty("border-radius","12px"),C.style.setProperty("width","90vw"),C.style.setProperty("max-width","900px"),C.style.setProperty("max-height","90vh"),C.style.setProperty("overflow","auto"),C.style.setProperty("z-index","9999"),i.style.setProperty("padding","1rem 1.5rem"),i.style.setProperty("background","#1e3a5f"),i.style.setProperty("color","white"),i.style.setProperty("display","flex"),i.style.setProperty("justify-content","space-between"),i.style.setProperty("align-items","center"),i.style.setProperty("position","sticky"),i.style.setProperty("top","0"),i.style.setProperty("z-index","10"),be.style.setProperty("font-weight","600"),be.style.setProperty("font-size","1.125rem"),e(be,()=>l.client.firstName,D),e(be,()=>l.client.lastName,null),pe.style.setProperty("display","flex"),pe.style.setProperty("gap","0.75rem"),m.$$click=K,m.style.setProperty("padding","0.5rem 1rem"),m.style.setProperty("background","#3b82f6"),m.style.setProperty("color","white"),m.style.setProperty("border","none"),m.style.setProperty("border-radius","6px"),m.style.setProperty("cursor","pointer"),m.style.setProperty("font-weight","500"),Dt(je,"click",l.onClose,!0),je.style.setProperty("background","none"),je.style.setProperty("border","none"),je.style.setProperty("color","white"),je.style.setProperty("cursor","pointer"),je.style.setProperty("font-size","1.5rem"),je.style.setProperty("line-height","1"),Re.style.setProperty("padding","1.5rem"),e(Re,a($,{get when(){return he()},get children(){var ae=oo();return ae.style.setProperty("text-align","center"),ae.style.setProperty("padding","3rem"),ae.style.setProperty("color","#666"),ae}}),null),e(Re,a($,{get when(){return!he()},get children(){return[(()=>{var ae=so(),ke=ae.firstChild,we=ke.nextSibling,Ve=we.firstChild,ze=Ve.nextSibling;return ze.nextSibling,ae.style.setProperty("text-align","center"),ae.style.setProperty("margin-bottom","1.5rem"),ke.style.setProperty("margin","0"),ke.style.setProperty("font-size","1.5rem"),ke.style.setProperty("color","#1e3a5f"),we.style.setProperty("margin","0.5rem 0 0"),we.style.setProperty("color","#666"),e(we,()=>l.client.firstName,Ve),e(we,()=>l.client.lastName,ze),e(we,()=>l.client.taxYear||new Date().getFullYear(),null),ae})(),a($,{get when(){return L().length>0},get children(){var ae=ao(),ke=ae.firstChild,we=ke.nextSibling;return ae.style.setProperty("margin-bottom","2rem"),ke.style.setProperty("font-size","1rem"),ke.style.setProperty("font-weight","600"),ke.style.setProperty("color","#374151"),ke.style.setProperty("border-bottom","2px solid #e5e7eb"),ke.style.setProperty("padding-bottom","0.5rem"),ke.style.setProperty("margin-bottom","1rem"),we.style.setProperty("display","grid"),we.style.setProperty("grid-template-columns","repeat(auto-fill, minmax(200px, 1fr))"),we.style.setProperty("gap","1.5rem"),e(we,a(pt,{get each(){return L()},children:Ve=>(()=>{var ze=Ot(),de=ze.firstChild,W=de.nextSibling;return ze.style.setProperty("text-align","center"),ze.style.setProperty("padding","1rem"),ze.style.setProperty("border","1px solid #e5e7eb"),ze.style.setProperty("border-radius","8px"),ze.style.setProperty("background","#fafafa"),de.style.setProperty("width","160px"),de.style.setProperty("height","160px"),W.style.setProperty("margin-top","0.75rem"),W.style.setProperty("font-weight","600"),W.style.setProperty("font-size","0.875rem"),W.style.setProperty("color","#1e3a5f"),e(W,()=>Ve.label),e(ze,a($,{get when(){return Ve.sublabel},get children(){var Q=Bt();return Q.style.setProperty("font-size","0.75rem"),Q.style.setProperty("color","#6b7280"),Q.style.setProperty("margin-top","0.25rem"),e(Q,()=>Ve.sublabel),Q}}),null),z(Q=>{var le=Ve.dataUrl,_e=Ve.label;return le!==Q.e&&bt(de,"src",Q.e=le),_e!==Q.t&&bt(de,"alt",Q.t=_e),Q},{e:void 0,t:void 0}),ze})()})),ae}}),a($,{get when(){return Se().length>0},get children(){var ae=yo(),ke=ae.firstChild,we=ke.firstChild,Ve=we.nextSibling;Ve.nextSibling;var ze=ke.nextSibling;return ae.style.setProperty("margin-bottom","2rem"),ke.style.setProperty("font-size","1rem"),ke.style.setProperty("font-weight","600"),ke.style.setProperty("color","#374151"),ke.style.setProperty("border-bottom","2px solid #e5e7eb"),ke.style.setProperty("padding-bottom","0.5rem"),ke.style.setProperty("margin-bottom","1rem"),e(ke,()=>Se().length,Ve),ze.style.setProperty("display","grid"),ze.style.setProperty("grid-template-columns","repeat(auto-fill, minmax(200px, 1fr))"),ze.style.setProperty("gap","1.5rem"),e(ze,a(pt,{get each(){return Se()},children:de=>(()=>{var W=Ot(),Q=W.firstChild,le=Q.nextSibling;return W.style.setProperty("text-align","center"),W.style.setProperty("padding","1rem"),W.style.setProperty("border","1px solid #e5e7eb"),W.style.setProperty("border-radius","8px"),W.style.setProperty("background","#fafafa"),Q.style.setProperty("width","160px"),Q.style.setProperty("height","160px"),le.style.setProperty("margin-top","0.75rem"),le.style.setProperty("font-weight","600"),le.style.setProperty("font-size","0.875rem"),le.style.setProperty("color","#1e3a5f"),e(le,()=>de.label),e(W,a($,{get when(){return de.sublabel},get children(){var _e=Bt();return _e.style.setProperty("font-size","0.75rem"),_e.style.setProperty("color","#6b7280"),_e.style.setProperty("margin-top","0.25rem"),e(_e,()=>de.sublabel),_e}}),null),z(_e=>{var Xe=de.dataUrl,Je=de.label;return Xe!==_e.e&&bt(Q,"src",_e.e=Xe),Je!==_e.t&&bt(Q,"alt",_e.t=Je),_e},{e:void 0,t:void 0}),W})()})),ae}}),a($,{get when(){return b().length>0},get children(){var ae=co(),ke=ae.firstChild,we=ke.firstChild,Ve=we.nextSibling;Ve.nextSibling;var ze=ke.nextSibling;return ae.style.setProperty("margin-bottom","2rem"),ke.style.setProperty("font-size","1rem"),ke.style.setProperty("font-weight","600"),ke.style.setProperty("color","#374151"),ke.style.setProperty("border-bottom","2px solid #e5e7eb"),ke.style.setProperty("padding-bottom","0.5rem"),ke.style.setProperty("margin-bottom","1rem"),e(ke,()=>b().length,Ve),ze.style.setProperty("display","grid"),ze.style.setProperty("grid-template-columns","repeat(auto-fill, minmax(200px, 1fr))"),ze.style.setProperty("gap","1.5rem"),e(ze,a(pt,{get each(){return b()},children:de=>(()=>{var W=Ot(),Q=W.firstChild,le=Q.nextSibling;return W.style.setProperty("text-align","center"),W.style.setProperty("padding","1rem"),W.style.setProperty("border","1px solid #e5e7eb"),W.style.setProperty("border-radius","8px"),W.style.setProperty("background","#fafafa"),Q.style.setProperty("width","160px"),Q.style.setProperty("height","160px"),le.style.setProperty("margin-top","0.75rem"),le.style.setProperty("font-weight","600"),le.style.setProperty("font-size","0.875rem"),le.style.setProperty("color","#1e3a5f"),e(le,()=>de.label),e(W,a($,{get when(){return de.sublabel},get children(){var _e=Bt();return _e.style.setProperty("font-size","0.75rem"),_e.style.setProperty("color","#6b7280"),_e.style.setProperty("margin-top","0.25rem"),_e.style.setProperty("max-width","180px"),_e.style.setProperty("overflow","hidden"),_e.style.setProperty("text-overflow","ellipsis"),_e.style.setProperty("white-space","nowrap"),_e.style.setProperty("margin","0.25rem auto 0"),e(_e,()=>de.sublabel),_e}}),null),z(_e=>{var Xe=de.dataUrl,Je=de.label;return Xe!==_e.e&&bt(Q,"src",_e.e=Xe),Je!==_e.t&&bt(Q,"alt",_e.t=Je),_e},{e:void 0,t:void 0}),W})()})),ae}}),a($,{get when(){return qe(()=>E().length===0)()&&!he()},get children(){var ae=uo();return ae.style.setProperty("text-align","center"),ae.style.setProperty("padding","3rem"),ae.style.setProperty("color","#666"),ae}}),a($,{get when(){return E().length>0},get children(){var ae=po(),ke=ae.firstChild,we=ke.nextSibling,Ve=we.nextSibling,ze=Ve.nextSibling,de=ze.nextSibling,W=de.nextSibling,Q=W.nextSibling;return Q.nextSibling,ae.style.setProperty("margin-top","2rem"),ae.style.setProperty("padding","1rem"),ae.style.setProperty("background","#f8fafc"),ae.style.setProperty("border-radius","8px"),ae.style.setProperty("font-size","0.875rem"),ae.style.setProperty("color","#64748b"),e(ae,()=>L().length,Ve),e(ae,()=>Se().length,de),e(ae,()=>b().length,Q),ae}})]}}),null),C})()]}})};$t(["click"]);var vo=y("<div>"),ho=y(`<div><div><button><svg width=20 height=20 viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M19 12H5M12 19l-7-7 7-7"></path></svg>Back</button><div><h1> <span>Tax Year </span></h1><div></div></div><button><svg width=18 height=18 viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"></path></svg>Print QR Codes</button></div><div></div><style>
        @keyframes slideDown {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `),fo=y("<div><div><div>"),bo=y("<div><div>Loading client workspace..."),Gt=y("<span>"),xo=y("<span> | "),Po=y('<div><div><svg width=32 height=32 viewBox="0 0 24 24"fill=none stroke-width=2 stroke-linecap=round stroke-linejoin=round><path></path></svg></div><h3></h3><div>');const To=()=>{const l=ur(),E=pr(),[G,he]=Ne(null),[$e,fe]=Ne([]),[Ae,Be]=Ne([]),[te,Fe]=Ne(!0),[Le,r]=Ne(null),[ce,K]=Ne(null),[L,Se]=Ne(0),[b,C]=Ne(!1),[i,be]=Ne({}),[ue,D]=Ne(!1),pe=new Date().getFullYear(),[m,je]=Ne(pe),Re=async I=>{Fe(!0),r(null);try{Jt("Loading client data for ID:",I);const[Z,Oe,Ye]=await Promise.all([vr(I),$r(I),hr(I)]);if(!Z){r("Client not found"),Fe(!1);return}he(Z),fe(Oe||[]),Be(Ye||[]);const Ge=(Oe||[]).filter(Ue=>!Ue.verified&&Ue.uploadStatus!=="error").length;Se(Ge)}catch(Z){console.error("Error loading client data:",Z),r("Failed to load client data")}finally{Fe(!1)}};gr(()=>{const I=l.id;if(!I){r("No client ID provided"),Fe(!1);return}Re(I)});const ae=I=>{ce()===I?K(null):K(I)},ke=()=>{E("/accounting/tax-clients")},we=I=>{he(Z=>Z?{...Z,...I}:null),be(Z=>({...Z,...I}))},Ve=async()=>{const I=G();if(I){C(!0);try{await fr(I.id,i()),be({})}finally{C(!1)}}},ze=[{id:"info",title:"INFO",icon:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",color:"#ec4899",getLabel:()=>"Client Details"},{id:"docs",title:"DOCS",icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",color:"#3b82f6",getLabel:()=>`${$e().length} files`},{id:"tasks",title:"TASKS",icon:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4",color:"#f59e0b",getLabel:()=>`${L()} pending`},{id:"ai",title:"AI",icon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z",color:"#8b5cf6",getLabel:()=>"Analyze"},{id:"tax",title:"TAX",icon:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z",color:"#22c55e",getLabel:()=>"Prepare"}],de={padding:"1.5rem","max-width":"1400px",margin:"0 auto","min-height":"100vh"},W={display:"flex","align-items":"center",gap:"1rem","margin-bottom":"2rem"},Q={background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-md)",padding:"0.5rem 1rem",cursor:"pointer",display:"flex","align-items":"center",gap:"0.5rem",color:"var(--text-primary)",transition:"all 0.2s"},le={flex:1},_e={"font-size":"1.75rem","font-weight":"700",margin:0,color:"var(--text-primary)"},Xe={display:"inline-block",background:"var(--primary-color)",color:"white",padding:"0.25rem 0.75rem","border-radius":"9999px","font-size":"0.875rem","font-weight":"600","margin-left":"0.75rem"},Je={color:"var(--text-muted)","font-size":"0.875rem","margin-top":"0.25rem"},ft={display:"grid","grid-template-columns":"repeat(5, 1fr)",gap:"1.25rem","margin-bottom":"2rem"},gt=(I,Z)=>({background:Z?I.color:"var(--surface-color)",border:`2px solid ${Z?I.color:"var(--border-color)"}`,"border-radius":"var(--border-radius-lg)",padding:"2rem",cursor:"pointer",transition:"all 0.2s ease","text-align":"center",transform:Z?"translateY(-4px)":"none","box-shadow":Z?`0 8px 25px ${I.color}40`:"0 2px 8px rgba(0,0,0,0.05)"}),mt=(I,Z)=>({width:"64px",height:"64px","border-radius":"50%",background:Z?"rgba(255,255,255,0.2)":`${I}15`,display:"flex","align-items":"center","justify-content":"center",margin:"0 auto 1rem auto"}),st=I=>({"font-size":"1.25rem","font-weight":"700",margin:"0 0 0.5rem 0",color:I?"white":"var(--text-primary)"}),ut=I=>({"font-size":"0.875rem",color:I?"rgba(255,255,255,0.8)":"var(--text-muted)"}),Me={background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-lg)",padding:"1.5rem","margin-top":"0.5rem",animation:"slideDown 0.2s ease-out"},J={display:"flex","align-items":"center","justify-content":"center","min-height":"400px","font-size":"1.25rem",color:"var(--text-muted)"},w={display:"flex","flex-direction":"column","align-items":"center","justify-content":"center","min-height":"400px",gap:"1rem"};return a($,{get when(){return!Le()},get fallback(){return(()=>{var I=fo(),Z=I.firstChild,Oe=Z.firstChild;return Oe.style.setProperty("font-size","1.25rem"),Oe.style.setProperty("color","var(--error-color)"),e(Oe,Le),e(Z,a(Pt,{onClick:ke,children:"Back to Tax Portal"}),null),z(Ye=>{var Ge=de,Ue=w;return Ye.e=t(I,Ge,Ye.e),Ye.t=t(Z,Ue,Ye.t),Ye},{e:void 0,t:void 0}),I})()},get children(){return a($,{get when(){return!te()},get fallback(){return(()=>{var I=bo(),Z=I.firstChild;return t(Z,J),z(Oe=>t(I,de,Oe)),I})()},get children(){var I=ho(),Z=I.firstChild,Oe=Z.firstChild,Ye=Oe.nextSibling,Ge=Ye.firstChild,Ue=Ge.firstChild,nt=Ue.nextSibling;nt.firstChild;var lt=Ge.nextSibling,De=Ye.nextSibling,Ke=Z.nextSibling,v=Ke.nextSibling;return t(Z,W),Oe.$$mouseout=p=>{p.currentTarget.style.background="var(--surface-color)"},Oe.$$mouseover=p=>{p.currentTarget.style.background="var(--hover-color)"},Oe.$$click=ke,t(Oe,Q),t(Ye,le),t(Ge,_e),e(Ge,()=>G()?.firstName,Ue),e(Ge,()=>G()?.lastName,nt),t(nt,Xe),e(nt,m,null),t(lt,Je),e(lt,(()=>{var p=qe(()=>!!G()?.email);return()=>p()&&(()=>{var R=Gt();return e(R,()=>G()?.email),R})()})(),null),e(lt,(()=>{var p=qe(()=>!!(G()?.email&&G()?.phone));return()=>p()&&xo()})(),null),e(lt,(()=>{var p=qe(()=>!!G()?.phone);return()=>p()&&(()=>{var R=Gt();return e(R,()=>G()?.phone),R})()})(),null),De.$$mouseout=p=>{p.currentTarget.style.background="#8b5cf6"},De.$$mouseover=p=>{p.currentTarget.style.background="#7c3aed"},De.$$click=()=>D(!0),De.style.setProperty("background","#8b5cf6"),De.style.setProperty("color","white"),De.style.setProperty("border","none"),De.style.setProperty("border-radius","var(--border-radius-md)"),De.style.setProperty("padding","0.75rem 1.25rem"),De.style.setProperty("cursor","pointer"),De.style.setProperty("display","flex"),De.style.setProperty("align-items","center"),De.style.setProperty("gap","0.5rem"),De.style.setProperty("font-weight","600"),De.style.setProperty("font-size","0.875rem"),De.style.setProperty("transition","all 0.2s"),t(Ke,ft),e(Ke,()=>ze.map(p=>{const R=ce()===p.id;return(()=>{var M=Po(),V=M.firstChild,n=V.firstChild,o=n.firstChild,h=V.nextSibling,u=h.nextSibling;return M.$$mouseout=S=>{R||(S.currentTarget.style.borderColor="var(--border-color)",S.currentTarget.style.transform="none",S.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.05)")},M.$$mouseover=S=>{R||(S.currentTarget.style.borderColor=p.color,S.currentTarget.style.transform="translateY(-2px)",S.currentTarget.style.boxShadow=`0 4px 15px ${p.color}20`)},M.$$click=()=>ae(p.id),e(h,()=>p.title),e(u,()=>p.getLabel()),z(S=>{var T=gt(p,R),g=mt(p.color,R),c=R?"white":p.color,Y=p.icon,oe=st(R),xe=ut(R);return S.e=t(M,T,S.e),S.t=t(V,g,S.t),c!==S.a&&bt(n,"stroke",S.a=c),Y!==S.o&&bt(o,"d",S.o=Y),S.i=t(h,oe,S.i),S.n=t(u,xe,S.n),S},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),M})()})),e(I,a($,{get when(){return ce()},get children(){var p=vo();return t(p,Me),e(p,a($,{get when(){return ce()==="info"},get children(){return a(no,{get client(){return G()},onClientChange:we,onSave:Ve,get isSaving(){return b()}})}}),null),e(p,a($,{get when(){return ce()==="docs"},get children(){return a(Tn,{get client(){return G()},get taxPortal(){return G()},get documents(){return $e()},get taxYear(){return m()},onDocumentsChange:fe})}}),null),e(p,a($,{get when(){return ce()==="tasks"},get children(){return a(el,{get client(){return G()},get taxPortal(){return G()},get documents(){return $e()},get documentRequests(){return Ae()},onTasksChange:R=>Se(R)})}}),null),e(p,a($,{get when(){return ce()==="ai"},get children(){return a(ml,{get client(){return G()},get documents(){return $e()},get taxYear(){return m()}})}}),null),e(p,a($,{get when(){return ce()==="tax"},get children(){return a(Pi,{get client(){return G()},get documents(){return $e()},get taxYear(){return m()}})}}),null),p}}),v),e(I,a(mo,{get client(){return G()},get documents(){return $e()},get dependents(){return G()?.dependents||[]},get isOpen(){return ue()},onClose:()=>D(!1)}),null),z(p=>t(I,de,p)),I}})}})};$t(["click","mouseover","mouseout"]);export{To as default};
