import{u as Ie,c as C,s as G,o as Ce,e as E,f as ae,g as J,h as Le,a as m,S as T,t as b,j as k,i as o,F as O,b as P,k as q,B as ne,L as we,l as Oe,m as Ne,n as Te,q as Me,p as Re,r as Ue,d as De}from"./index-W3yYPV3L.js";const ce={core:{label:"Core Access",labelEs:"Acceso Principal",icon:"üîë",order:1},finance:{label:"Finance & Accounting",labelEs:"Finanzas y Contabilidad",icon:"üí∞",order:2},inventory:{label:"Inventory",labelEs:"Inventario",icon:"üì¶",order:3},shipping:{label:"Shipping & Logistics",labelEs:"Env√≠os y Log√≠stica",icon:"üöö",order:4},services:{label:"Services",labelEs:"Servicios",icon:"üìã",order:5},tax:{label:"Tax Services",labelEs:"Servicios de Impuestos",icon:"üìä",order:6},pos:{label:"Point of Sale",labelEs:"Punto de Venta",icon:"üõí",order:7},admin:{label:"Administration",labelEs:"Administraci√≥n",icon:"‚öôÔ∏è",order:8}},M=[{key:"onlyRead",label:"Read Only",labelEs:"Solo Lectura",description:"Limited to read-only access across the system",descriptionEs:"Limitado a acceso de solo lectura en todo el sistema",category:"core",icon:"üëÅÔ∏è"},{key:"read_write",label:"Read/Write",labelEs:"Lectura/Escritura",description:"Full read and write permissions",descriptionEs:"Permisos completos de lectura y escritura",category:"core",icon:"‚úèÔ∏è"},{key:"AccountAccess",label:"Account Access",labelEs:"Acceso a Cuentas",description:"Access to accounting features and chart of accounts",descriptionEs:"Acceso a funciones contables y plan de cuentas",category:"finance",icon:"üìí"},{key:"BankingAccess",label:"Banking Access",labelEs:"Acceso Bancario",description:"Access to banking operations and reconciliation",descriptionEs:"Acceso a operaciones bancarias y conciliaci√≥n",category:"finance",icon:"üè¶"},{key:"JournalAccess",label:"Journal Access",labelEs:"Acceso a Diario",description:"Access to journal entries and ledger",descriptionEs:"Acceso a asientos de diario y libro mayor",category:"finance",icon:"üìñ"},{key:"invoiceAccess",label:"Invoice Access",labelEs:"Acceso a Facturas",description:"Access to create and manage invoices",descriptionEs:"Acceso para crear y gestionar facturas",category:"finance",icon:"üßæ"},{key:"RemittanceAccess",label:"Remittance Access",labelEs:"Acceso a Remesas",description:"Access to remittances management",descriptionEs:"Acceso a gesti√≥n de remesas",category:"finance",icon:"üí∏"},{key:"InventoryAccess",label:"Inventory Access",labelEs:"Acceso a Inventario",description:"Access to inventory management",descriptionEs:"Acceso a gesti√≥n de inventario",category:"inventory",icon:"üì¶"},{key:"inventoryDownsection",label:"Inventory Downsection",labelEs:"Baja de Inventario",description:"Access to inventory downsection and adjustments",descriptionEs:"Acceso a baja y ajustes de inventario",category:"inventory",icon:"üìâ"},{key:"PurchaseRequestAccess",label:"Purchase Request",labelEs:"Solicitud de Compra",description:"Access to purchase requests and orders",descriptionEs:"Acceso a solicitudes de compra y √≥rdenes",category:"inventory",icon:"üõçÔ∏è"},{key:"HBLAccess",label:"HBL Access",labelEs:"Acceso HBL",description:"Access to HBL (House Bill of Lading) management",descriptionEs:"Acceso a gesti√≥n de HBL (Gu√≠a A√©rea)",category:"shipping",icon:"‚úàÔ∏è"},{key:"HBLAccessManagement",label:"HBL Management",labelEs:"Gesti√≥n HBL",description:"Full HBL management access with admin features",descriptionEs:"Acceso completo a gesti√≥n HBL con funciones de admin",category:"shipping",icon:"üìã"},{key:"HBLScannerAccess",label:"HBL Scanner Only",labelEs:"Solo Esc√°ner HBL",description:"Scanner access without full HBL privileges",descriptionEs:"Acceso al esc√°ner sin privilegios completos de HBL",category:"shipping",icon:"üì∑"},{key:"offersManagementAccess",label:"YABA Offers Management",labelEs:"Gesti√≥n de Ofertas YABA",description:"Access to manage YABA shipping offers and configurations",descriptionEs:"Acceso para gestionar ofertas y configuraciones de env√≠o YABA",category:"shipping",icon:"üè∑Ô∏è"},{key:"internationalShippingAccess",label:"International Shipping",labelEs:"Env√≠os Internacionales",description:"Access to international shipping module",descriptionEs:"Acceso al m√≥dulo de env√≠os internacionales",category:"shipping",icon:"üåé"},{key:"PassportAccess",label:"Passport Access",labelEs:"Acceso a Pasaportes",description:"Access to passport applications",descriptionEs:"Acceso a solicitudes de pasaporte",category:"services",icon:"üõÇ"},{key:"AdminPassportAccess",label:"Passport Admin",labelEs:"Admin de Pasaportes",description:"Administrative access to passport management",descriptionEs:"Acceso administrativo a gesti√≥n de pasaportes",category:"services",icon:"üõÉ"},{key:"NotaryAccess",label:"Notary Access",labelEs:"Acceso Notarial",description:"Access to notary customer management",descriptionEs:"Acceso a gesti√≥n de clientes notariales",category:"services",icon:"üìú"},{key:"taxWorkflowAccess",label:"Tax Workflow",labelEs:"Flujo de Impuestos",description:"Access to tax preparation workflow",descriptionEs:"Acceso al flujo de preparaci√≥n de impuestos",category:"tax",icon:"üìä"},{key:"taxClientManagement",label:"Tax Client Management",labelEs:"Gesti√≥n de Clientes Tax",description:"Manage tax clients and their documents",descriptionEs:"Gestionar clientes de impuestos y sus documentos",category:"tax",icon:"üë•"},{key:"taxDocumentUpload",label:"Tax Document Upload",labelEs:"Carga de Documentos Tax",description:"Upload and manage tax documents",descriptionEs:"Cargar y gestionar documentos de impuestos",category:"tax",icon:"üì§"},{key:"taxReviewApproval",label:"Tax Review & Approval",labelEs:"Revisi√≥n y Aprobaci√≥n Tax",description:"Review and approve tax returns",descriptionEs:"Revisar y aprobar declaraciones de impuestos",category:"tax",icon:"‚úÖ"},{key:"drakeExportAccess",label:"Drake Export",labelEs:"Exportar a Drake",description:"Access to export data to Drake tax software",descriptionEs:"Acceso para exportar datos al software Drake",category:"tax",icon:"üì§"},{key:"taxReportsAccess",label:"Tax Reports",labelEs:"Reportes de Impuestos",description:"Access to tax reports and analytics",descriptionEs:"Acceso a reportes y an√°lisis de impuestos",category:"tax",icon:"üìà"},{key:"posAccess",label:"POS Access",labelEs:"Acceso POS",description:"Access to Point of Sale terminal",descriptionEs:"Acceso al terminal de Punto de Venta",category:"pos",icon:"üõí"},{key:"posRefundAccess",label:"POS Refunds",labelEs:"Devoluciones POS",description:"Permission to process refunds at POS",descriptionEs:"Permiso para procesar devoluciones en POS",category:"pos",icon:"‚Ü©Ô∏è"},{key:"posDiscountAccess",label:"POS Discounts",labelEs:"Descuentos POS",description:"Permission to apply discounts at POS",descriptionEs:"Permiso para aplicar descuentos en POS",category:"pos",icon:"üè∑Ô∏è"},{key:"posCashDrawerAccess",label:"Cash Drawer",labelEs:"Caja Registradora",description:"Access to open and manage cash drawer",descriptionEs:"Acceso para abrir y gestionar caja registradora",category:"pos",icon:"üíµ"},{key:"EmployeeAccess",label:"Employee Management",labelEs:"Gesti√≥n de Empleados",description:"Access to employee management and timesheets",descriptionEs:"Acceso a gesti√≥n de empleados y hojas de tiempo",category:"admin",icon:"üëî"},{key:"userManagementAccess",label:"User Management",labelEs:"Gesti√≥n de Usuarios",description:"Manage user accounts and permissions",descriptionEs:"Gestionar cuentas de usuario y permisos",category:"admin",icon:"üë§"},{key:"storeManagementAccess",label:"Store Management",labelEs:"Gesti√≥n de Tiendas",description:"Manage store configurations",descriptionEs:"Gestionar configuraciones de tiendas",category:"admin",icon:"üè™"},{key:"reportsAccess",label:"Reports Access",labelEs:"Acceso a Reportes",description:"Access to system reports and dashboards",descriptionEs:"Acceso a reportes del sistema y dashboards",category:"admin",icon:"üìä"},{key:"auditLogAccess",label:"Audit Log",labelEs:"Registro de Auditor√≠a",description:"Access to view audit logs",descriptionEs:"Acceso para ver registros de auditor√≠a",category:"admin",icon:"üìù"},{key:"isAdmin",label:"Super Administrator",labelEs:"Super Administrador",description:"Full system administration rights - bypasses all permission checks",descriptionEs:"Derechos completos de administraci√≥n - omite todas las verificaciones de permisos",category:"admin",icon:"üëë"}],He=()=>{const h={core:[],finance:[],inventory:[],shipping:[],services:[],tax:[],pos:[],admin:[]};return M.forEach(x=>{h[x.category].push(x)}),h},Fe=()=>Object.entries(ce).sort(([,h],[,x])=>h.order-x.order).map(([h])=>h),je=()=>{const h={};return M.forEach(x=>{h[x.key]=!1}),h};M.map(h=>h.key);var le=b("<div>"),ze=b("<div><div><div><strong>Display Name:</strong> </div><div><strong>UID:</strong> </div></div><div><strong>Created:</strong> "),Ge=b("<div><h3>Store Access</h3><div></div><div>No store access granted"),Je=b("<div><h3>Business Access</h3><div><label>Primary Business ID</label><select><option value=all></option></select></div><div><label>Additional Business Access</label><div></div><div>User can access data from all selected businesses"),qe=b("<div>üëë Super Admin - Acceso Total"),Ve=b("<div><h3>Permissions</h3><div><div> / <!> permisos activos"),We=b("<div><h3>HBL Status Location Permissions</h3><div>Control which status locations this user can update HBLs to</div><div></div><div> locations enabled"),Qe=b('<div><div><input type=text placeholder="Search users..."></div><div>'),Ze=b("<div>‚ö†Ô∏è You need administrator privileges to access this page."),Xe=b("<div>Loading users..."),Ke=b("<div><div></div><div></div><div> stores"),es=b("<div>Select a user to view and edit their profile"),V=b("<div><input type=checkbox><label>"),ss=b("<option>"),ts=b("<div><div><div><span></span><span></span></div><span>/</span></div><div>"),rs=b("<span>"),os=b("<div><input type=checkbox><div><div></div><div>");const as=()=>{const{t:h}=Ie(),[x,W]=C([]),[t,L]=C(null),[de,Q]=C(!1),[Z,X]=C(!1),[K,pe]=C(""),[j,U]=C(null),[ee,se]=C([]),[ye,te]=C([]),me=async()=>{try{const s=Ne(Te,"stores"),i=Me(s,Re("name")),Y=await Ue(i),d=[];Y.forEach(l=>{const n=l.data();n.isActive!==!1&&d.push({id:l.id,name:n.name})});const e=[{id:"YY_8802",name:"CENTER"},{id:"YY_8803",name:"BISSONNET"},{id:"YY_8804",name:"IRVIN"},{id:"YY_8805",name:"KATTY"},{id:"YY_8816",name:"YABA GLOBAL"},{id:"YY_8818",name:"YABASURAUSTIN"},{id:"YY_8847",name:"YABAOFICINA AZ"},{id:"YY_3251",name:"YABA FASHION"},{id:"YY_32",name:"YABA MESQUITE"},{id:"YY_76",name:"YABA DALLAS"},{id:"YY_79",name:"YABA 79"},{id:"YY_2376",name:"YABA SAN ANTONIO"},{id:"YY_8635",name:"YABA 8635"},{id:"YY_8665",name:"YABA 8665"},{id:"YY_8901",name:"YABA 8901"},{id:"YY_3303",name:"YABA MIAMI"},{id:"YY_3329",name:"YABA MIAMI 29"},{id:"SS_42",name:"STEPHANIE SOLUTION"}];for(const l of e)d.find(n=>n.id===l.id)||d.push(l);te(d)}catch(s){console.error("Error loading stores from Firestore:",s),te([{id:"YY_8802",name:"CENTER"},{id:"YY_8803",name:"BISSONNET"},{id:"YY_8804",name:"IRVIN"},{id:"YY_8805",name:"KATTY"},{id:"YY_8816",name:"YABA GLOBAL"},{id:"YY_8818",name:"YABASURAUSTIN"},{id:"YY_8847",name:"YABAOFICINA AZ"},{id:"YY_3251",name:"YABA FASHION"},{id:"YY_32",name:"YABA MESQUITE"},{id:"YY_76",name:"YABA DALLAS"},{id:"YY_79",name:"YABA 79"},{id:"YY_2376",name:"YABA SAN ANTONIO"},{id:"YY_8635",name:"YABA 8635"},{id:"YY_8665",name:"YABA 8665"},{id:"YY_8901",name:"YABA 8901"},{id:"YY_3303",name:"YABA MIAMI"},{id:"YY_3329",name:"YABA MIAMI 29"},{id:"SS_42",name:"STEPHANIE SOLUTION"}])}},ue=He(),ge=Fe();let re={businessId:"YB100423253156428",stores:{YY_8802:!1,YY_8803:!1,YY_8804:!1,YY_8805:!1,YY_8816:!1,YY_8818:!1,YY_8847:!1,YY_3251:!1,YY_32:!1,YY_76:!1,YY_79:!1,YY_2376:!1,YY_8635:!1,YY_8665:!1,YY_8901:!1,YY_3303:!1,YY_3329:!1,SS_42:!1},statusLocationPermissions:Object.fromEntries(G.map(s=>[s.id,!1])),permissions:je()};const be=async()=>{try{const s=[],i=await Oe.getBusinessByStatus(!0);i&&i.length>0&&i.forEach(d=>{s.push({id:d.id,name:d.name,isActive:d.isActive!==!1})});const Y=[{id:"SS695841584167881",name:"Stephanie S"},{id:"YB100423253156428",name:"YABA"},{id:"JJCM23753J15918M",name:"GUANCHO"},{id:"LMR470531564CT28",name:"LUISCUETO"}];for(const d of Y)s.find(e=>e.id===d.id)||s.push({...d,isActive:!0});se(s)}catch(s){console.error("Error loading businesses:",s),se([{id:"SS695841584167881",name:"Stephanie S"},{id:"YB100423253156428",name:"YABA"},{id:"JJCM23753J15918M",name:"GUANCHO"},{id:"LMR470531564CT28",name:"LUISCUETO"}])}};Ce(async()=>{await Ae(),await be(),await me()});const Ae=async()=>{try{Q(!0),E("üì• Loading users via API...");const s=await ae.getAll();E(`‚úÖ Received ${s.length} users from API`);const i=s.map(Y=>{let d={uid:Y.uid,...Y};return Object.keys(re).forEach(e=>{d.hasOwnProperty(e)||(d[e]=re[e])}),d});E(`‚úÖ Loaded and normalized ${i.length} users`),E(i),W(i)}catch(s){console.error("‚ùå Error loading users:",s),U({type:"error",text:"Failed to load users from server"})}finally{Q(!1)}},fe=J(()=>{const s=K().toLowerCase();return s?x().filter(i=>i.email?.toLowerCase().includes(s)||i.displayName?.toLowerCase().includes(s)||i.uid?.toLowerCase().includes(s)):x()}),ve=s=>{t()&&L(i=>({...i,stores:{...i.stores,[s]:!i.stores[s]}}))},Pe=s=>{t()&&L(i=>({...i,businessId:s}))},he=s=>{t()&&L(i=>({...i,permissions:{...i.permissions,[s]:!i.permissions?.[s]}}))},_e=s=>{t()&&L(i=>({...i,statusLocationPermissions:{...i.statusLocationPermissions,[s]:!i.statusLocationPermissions?.[s]}}))};J(()=>t()?t().stores&&Object.values(t().stores).some(s=>s):!1);const Ye=async()=>{if(t())try{X(!0),U(null),E("üíæ Saving user permissions via API..."),E("üîÑ Using API endpoint (NOT Firebase directly)");const s={};M.forEach(d=>{s[d.key]=t().permissions?.[d.key]||!1});const i={permissions:s,stores:t().stores,statusLocationPermissions:t().statusLocationPermissions||Object.fromEntries(G.map(d=>[d.id,!1])),businessId:t().businessId,businessIds:t().businessIds||[]};let Y=t().id||t().uid;E("üì° Calling usersApi.updatePermissions (API endpoint)..."),await ae.updatePermissions(Y,i),E("‚úÖ API call completed successfully (no direct Firebase update)"),W(d=>d.map(e=>e.uid===t().uid?t():e)),E("‚úÖ User permissions saved successfully via API"),U({type:"success",text:"User profile updated successfully via API (not direct Firebase)"})}catch(s){console.error("‚ùå Error saving user profile via API:",s),U({type:"error",text:"Failed to save user profile via API endpoint"})}finally{X(!1)}},Se={display:"grid","grid-template-columns":"350px 1fr",gap:"2rem",height:"calc(100vh - 200px)"},Ee={"max-height":"100%","overflow-y":"auto",border:"1px solid var(--border-color)","border-radius":"var(--border-radius)",background:"var(--surface-color)"},xe=s=>({padding:"1rem","border-bottom":"1px solid var(--border-color)",cursor:"pointer",background:s?"var(--primary-color-light)":"transparent",transition:"background 0.2s"}),$e={padding:"0.75rem",border:"none","border-bottom":"1px solid var(--border-color)",background:"var(--surface-color)",width:"100%","font-size":"1rem"},oe={display:"grid","grid-template-columns":"repeat(auto-fill, minmax(200px, 1fr))",gap:"0.75rem"},ie={display:"flex","align-items":"center",gap:"0.5rem",padding:"0.5rem",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-sm)",cursor:"pointer",transition:"all 0.2s"},ke=s=>({padding:"1rem","margin-bottom":"1rem","border-radius":"var(--border-radius)",background:s==="success"?"#d4edda":"#f8d7da",color:s==="success"?"#155724":"#721c24",border:`1px solid ${s==="success"?"#c3e6cb":"#f5c6cb"}`}),Be=J(()=>Le.state.profile?.isAdmin===!0);return m(we,{title:"User Profile Administration",get children(){return m(T,{get when(){return Be()},get fallback(){return m(q,{get children(){var s=Ze();return s.style.setProperty("text-align","center"),s.style.setProperty("padding","2rem"),s.style.setProperty("color","var(--text-muted)"),s}})},get children(){var s=Qe(),i=s.firstChild,Y=i.firstChild,d=i.nextSibling;return k(s,Se),k(i,Ee),Y.$$input=e=>pe(e.currentTarget.value),k(Y,$e),o(i,m(T,{get when(){return!de()},get fallback(){return(()=>{var e=Xe();return e.style.setProperty("padding","2rem"),e.style.setProperty("text-align","center"),e})()},get children(){return m(O,{get each(){return fe()},children:e=>(()=>{var l=Ke(),n=l.firstChild,c=n.nextSibling,r=c.nextSibling,A=r.firstChild;return l.$$click=()=>{E(e),L(e)},n.style.setProperty("font-weight","600"),o(n,()=>e.displayName||"No Name"),c.style.setProperty("font-size","0.875rem"),c.style.setProperty("color","var(--text-muted)"),o(c,()=>e.email),r.style.setProperty("font-size","0.75rem"),r.style.setProperty("color","var(--text-muted)"),r.style.setProperty("margin-top","0.25rem"),o(r,()=>e.permissions?.isAdmin&&"üëë Admin ‚Ä¢ ",A),o(r,()=>Object.values(e.stores||{}).filter(Boolean).length,A),P(a=>k(l,xe(t()?.uid===e.uid),a)),l})()})}}),null),o(d,m(T,{get when(){return t()},get fallback(){return m(q,{get children(){var e=es();return e.style.setProperty("text-align","center"),e.style.setProperty("padding","2rem"),e.style.setProperty("color","var(--text-muted)"),e}})},get children(){return[m(T,{get when(){return j()},get children(){var e=le();return o(e,()=>j().text),P(l=>k(e,ke(j().type),l)),e}}),m(q,{title:"User Information",get subtitle(){return t().email},get children(){return[(()=>{var e=ze(),l=e.firstChild,n=l.firstChild,c=n.firstChild;c.nextSibling;var r=n.nextSibling,A=r.firstChild;A.nextSibling;var a=l.nextSibling,u=a.firstChild;return u.nextSibling,e.style.setProperty("margin-bottom","2rem"),l.style.setProperty("display","flex"),l.style.setProperty("justify-content","space-between"),l.style.setProperty("margin-bottom","1rem"),o(n,()=>t().displayName||"Not set",null),o(r,()=>t().uid,null),o(a,()=>new Date(t().createdAt?.toDate?.()||t().createdAt).toLocaleDateString(),null),e})(),(()=>{var e=Ge(),l=e.firstChild,n=l.nextSibling,c=n.nextSibling;return e.style.setProperty("margin-bottom","2rem"),l.style.setProperty("margin-bottom","1rem"),o(n,m(O,{get each(){return ye()},children:r=>(()=>{var A=V(),a=A.firstChild,u=a.nextSibling;return A.$$click=()=>ve(r?.id),a.style.setProperty("cursor","pointer"),u.style.setProperty("cursor","pointer"),u.style.setProperty("user-select","none"),o(u,()=>r?.name),P(f=>k(A,{...ie,background:t().stores?.[r?.id]?"var(--primary-color-light)":"transparent"},f)),P(()=>a.checked=t().stores?.[r?.id]||!1),A})()})),c.style.setProperty("margin-top","0.5rem"),c.style.setProperty("font-size","0.875rem"),c.style.setProperty("color","var(--text-muted)"),P(r=>k(n,oe,r)),e})(),(()=>{var e=Je(),l=e.firstChild,n=l.nextSibling,c=n.firstChild,r=c.nextSibling,A=r.firstChild,a=n.nextSibling,u=a.firstChild,f=u.nextSibling,S=f.nextSibling;return e.style.setProperty("margin-bottom","2rem"),l.style.setProperty("margin-bottom","1rem"),n.style.setProperty("margin-bottom","1rem"),c.style.setProperty("display","block"),c.style.setProperty("margin-bottom","0.5rem"),c.style.setProperty("font-weight","500"),r.addEventListener("change",p=>Pe(p.currentTarget.value)),r.style.setProperty("width","100%"),r.style.setProperty("padding","0.5rem"),r.style.setProperty("border","1px solid var(--border-color)"),r.style.setProperty("border-radius","var(--border-radius-sm)"),r.style.setProperty("background","var(--surface-color)"),o(A,()=>h("common.all","All")),o(r,m(O,{get each(){return ee()},children:p=>(()=>{var g=ss();return o(g,()=>p.name),P(()=>g.value=p.id),g})()}),null),u.style.setProperty("display","block"),u.style.setProperty("margin-bottom","0.5rem"),u.style.setProperty("font-weight","500"),f.style.setProperty("display","grid"),f.style.setProperty("grid-template-columns","repeat(auto-fill, minmax(200px, 1fr))"),f.style.setProperty("gap","0.75rem"),o(f,m(O,{get each(){return ee()},children:p=>{const g=()=>(t()?.businessIds||[]).includes(p.id)||t()?.businessId===p.id;return(()=>{var y=V(),w=y.firstChild,N=w.nextSibling;return y.$$click=()=>{if(!t())return;const v=t().businessIds||[],z=g()?v.filter($=>$!==p.id):[...v,p.id];L($=>({...$,businessIds:z}))},y.style.setProperty("display","flex"),y.style.setProperty("align-items","center"),y.style.setProperty("gap","0.5rem"),y.style.setProperty("padding","0.5rem"),y.style.setProperty("border","1px solid var(--border-color)"),y.style.setProperty("border-radius","var(--border-radius-sm)"),y.style.setProperty("cursor","pointer"),y.style.setProperty("transition","all 0.2s"),w.style.setProperty("cursor","pointer"),N.style.setProperty("cursor","pointer"),N.style.setProperty("user-select","none"),o(N,()=>p.name),P(v=>(v=g()?"var(--primary-color-light)":"transparent")!=null?y.style.setProperty("background",v):y.style.removeProperty("background")),P(()=>w.checked=g()),y})()}})),S.style.setProperty("margin-top","0.5rem"),S.style.setProperty("font-size","0.875rem"),S.style.setProperty("color","var(--text-muted)"),P(()=>r.value=t()?.businessId),e})(),(()=>{var e=Ve(),l=e.firstChild,n=l.nextSibling,c=n.firstChild,r=c.firstChild,A=r.nextSibling;return A.nextSibling,e.style.setProperty("margin-bottom","2rem"),l.style.setProperty("margin-bottom","1rem"),n.style.setProperty("display","flex"),n.style.setProperty("gap","1rem"),n.style.setProperty("margin-bottom","1.5rem"),n.style.setProperty("flex-wrap","wrap"),c.style.setProperty("padding","0.5rem 1rem"),c.style.setProperty("background","var(--primary-color-light)"),c.style.setProperty("border-radius","var(--border-radius-sm)"),c.style.setProperty("font-size","0.875rem"),o(c,()=>M.filter(a=>t()?.permissions?.[a.key]).length,r),o(c,()=>M.length,A),o(n,m(T,{get when(){return t()?.permissions?.isAdmin},get children(){var a=qe();return a.style.setProperty("padding","0.5rem 1rem"),a.style.setProperty("background","#fef3c7"),a.style.setProperty("color","#92400e"),a.style.setProperty("border-radius","var(--border-radius-sm)"),a.style.setProperty("font-size","0.875rem"),a.style.setProperty("font-weight","600"),a}}),null),o(e,m(O,{each:ge,children:a=>{const u=ce[a],f=ue[a],S=f.filter(p=>t()?.permissions?.[p.key]).length;return(()=>{var p=ts(),g=p.firstChild,y=g.firstChild,w=y.firstChild,N=w.nextSibling,v=y.nextSibling,z=v.firstChild,$=g.nextSibling;return p.style.setProperty("margin-bottom","1.5rem"),p.style.setProperty("border","1px solid var(--border-color)"),p.style.setProperty("border-radius","var(--border-radius)"),p.style.setProperty("overflow","hidden"),g.style.setProperty("display","flex"),g.style.setProperty("align-items","center"),g.style.setProperty("justify-content","space-between"),g.style.setProperty("padding","0.75rem 1rem"),(a==="admin"?"#fef3c7":a==="tax"?"#dbeafe":"var(--background-color)")!=null?g.style.setProperty("background",a==="admin"?"#fef3c7":a==="tax"?"#dbeafe":"var(--background-color)"):g.style.removeProperty("background"),g.style.setProperty("border-bottom","1px solid var(--border-color)"),y.style.setProperty("display","flex"),y.style.setProperty("align-items","center"),y.style.setProperty("gap","0.5rem"),w.style.setProperty("font-size","1.25rem"),o(w,()=>u.icon),N.style.setProperty("font-weight","600"),o(N,()=>u.labelEs),v.style.setProperty("font-size","0.75rem"),v.style.setProperty("padding","0.25rem 0.5rem"),(S>0?"var(--primary-color)":"var(--text-muted)")!=null?v.style.setProperty("background",S>0?"var(--primary-color)":"var(--text-muted)"):v.style.removeProperty("background"),v.style.setProperty("color","white"),v.style.setProperty("border-radius","9999px"),o(v,S,z),o(v,()=>f.length,null),$.style.setProperty("display","grid"),$.style.setProperty("grid-template-columns","repeat(auto-fill, minmax(280px, 1fr))"),$.style.setProperty("gap","0.5rem"),$.style.setProperty("padding","0.75rem"),o($,m(O,{each:f,children:B=>(()=>{var _=os(),D=_.firstChild,H=D.nextSibling,I=H.firstChild,F=I.nextSibling;return _.$$click=()=>he(B.key),_.style.setProperty("display","flex"),_.style.setProperty("align-items","flex-start"),_.style.setProperty("gap","0.5rem"),_.style.setProperty("padding","0.5rem"),_.style.setProperty("border","1px solid var(--border-color)"),_.style.setProperty("border-radius","var(--border-radius-sm)"),_.style.setProperty("cursor","pointer"),_.style.setProperty("transition","all 0.2s"),D.style.setProperty("cursor","pointer"),D.style.setProperty("margin-top","2px"),H.style.setProperty("flex","1"),H.style.setProperty("cursor","pointer"),H.style.setProperty("user-select","none"),I.style.setProperty("display","flex"),I.style.setProperty("align-items","center"),I.style.setProperty("gap","0.25rem"),I.style.setProperty("font-weight","500"),I.style.setProperty("font-size","0.875rem"),o(I,m(T,{get when(){return B.icon},get children(){var R=rs();return o(R,()=>B.icon),R}}),null),o(I,()=>B.labelEs,null),F.style.setProperty("font-size","0.7rem"),F.style.setProperty("color","var(--text-muted)"),F.style.setProperty("line-height","1.3"),o(F,()=>B.descriptionEs),P(R=>(R=t()?.permissions?.[B.key]?B.key==="isAdmin"?"#fef3c7":"var(--primary-color-light)":"transparent")!=null?_.style.setProperty("background",R):_.style.removeProperty("background")),P(()=>D.checked=!!t()?.permissions?.[B.key]),_})()})),p})()}}),null),e})(),(()=>{var e=We(),l=e.firstChild,n=l.nextSibling,c=n.nextSibling,r=c.nextSibling,A=r.firstChild;return e.style.setProperty("margin-bottom","2rem"),l.style.setProperty("margin-bottom","1rem"),n.style.setProperty("font-size","0.875rem"),n.style.setProperty("color","var(--text-muted)"),n.style.setProperty("margin-bottom","1rem"),o(c,m(O,{each:G,children:a=>(()=>{var u=V(),f=u.firstChild,S=f.nextSibling;return u.$$click=()=>_e(a.id),f.style.setProperty("cursor","pointer"),S.style.setProperty("cursor","pointer"),S.style.setProperty("user-select","none"),S.style.setProperty("font-size","0.875rem"),o(S,()=>a.label),P(p=>k(u,{...ie,background:t().statusLocationPermissions?.[a.id]?"var(--primary-color-light)":"transparent"},p)),P(()=>f.checked=!!t().statusLocationPermissions?.[a.id]),u})()})),r.style.setProperty("margin-top","0.5rem"),r.style.setProperty("font-size","0.875rem"),r.style.setProperty("color","var(--text-muted)"),o(r,()=>Object.values(t().statusLocationPermissions||{}).filter(Boolean).length,A),P(a=>k(c,oe,a)),e})(),(()=>{var e=le();return e.style.setProperty("display","flex"),e.style.setProperty("gap","1rem"),e.style.setProperty("justify-content","flex-end"),o(e,m(ne,{variant:"secondary",onClick:()=>L(null),children:"Cancel"}),null),o(e,m(ne,{variant:"primary",onClick:Ye,get disabled(){return Z()},get children(){return Z()?"Saving...":"Save Changes"}}),null),e})()]}})]}})),P(()=>Y.value=K()),s}})}})};De(["input","click"]);export{as as default};
