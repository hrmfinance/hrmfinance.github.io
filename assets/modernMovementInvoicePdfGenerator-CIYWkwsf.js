const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CM4uwrKq.js","assets/index-C_I4bxMN.css"])))=>i.map(i=>d[i]);
import{_ as j}from"./index-CM4uwrKq.js";const H={en:{transferReceipt:"TRANSFER RECEIPT",movementInvoice:"MOVEMENT INVOICE",movementId:"Movement ID",date:"Date",reference:"Reference",movementType:"Movement Type",createdBy:"Created By",fromLocation:"From Location",toLocation:"To Location",location:"Location",notes:"Notes",transferItems:"TRANSFER ITEMS",movementItems:"MOVEMENT ITEMS",sku:"SKU",productName:"Product Name",qty:"Qty",unitCost:"Unit Cost",total:"Total",received:"Received",totalValue:"TOTAL VALUE",receivingConfirmation:"RECEIVING CONFIRMATION",receiverName:"Receiver Name",dateReceived:"Date Received",signature:"Signature",footerTransfer:"Please verify all received quantities and sign above.",footerMovement:"Movement processed successfully.",movementTypes:{in:"IN",out:"OUT",transfer:"TRANSFER",adjustment:"ADJUSTMENT"}},es:{transferReceipt:"RECIBO DE TRANSFERENCIA",movementInvoice:"FACTURA DE MOVIMIENTO",movementId:"ID de Movimiento",date:"Fecha",reference:"Referencia",movementType:"Tipo de Movimiento",createdBy:"Creado Por",fromLocation:"Ubicación de Origen",toLocation:"Ubicación de Destino",location:"Ubicación",notes:"Notas",transferItems:"ARTÍCULOS DE TRANSFERENCIA",movementItems:"ARTÍCULOS DEL MOVIMIENTO",sku:"SKU",productName:"Nombre del Producto",qty:"Cant.",unitCost:"Costo Unit.",total:"Total",received:"Recibido",totalValue:"VALOR TOTAL",receivingConfirmation:"CONFIRMACIÓN DE RECEPCIÓN",receiverName:"Nombre del Receptor",dateReceived:"Fecha de Recepción",signature:"Firma",footerTransfer:"Por favor verifique todas las cantidades recibidas y firme arriba.",footerMovement:"Movimiento procesado exitosamente.",movementTypes:{in:"ENTRADA",out:"SALIDA",transfer:"TRANSFERENCIA",adjustment:"AJUSTE"}}},Y=async(s,X,P="es")=>{try{console.log("Starting modern movement invoice PDF generation...");const n=H[P],$=(await j(()=>import("./index-CM4uwrKq.js").then(r=>r.j),__vite__mapDeps([0,1]))).default;console.log("jsPDF imported successfully");const t=new $;console.log("PDF document created");const c={primary:[45,55,72],secondary:[113,128,150],light:[237,242,247],border:[203,213,224],text:[26,32,44],accent:[66,153,225]};let e=20;const o=15,x=15,l=210,O=297,U=20,u=l-o-x,W=O-U,J=(r=15)=>e+r>W?(t.addPage(),e=20,!0):!1,N=(r,F,a,T)=>{t.setFillColor(...c.light),t.rect(r,F,a,T,"F")},i=(r,F,a,T,v=.5)=>{t.setDrawColor(...c.border),t.setLineWidth(v),t.line(r,F,a,T)};N(o,e-5,u,25),t.setFontSize(24),t.setFont("helvetica","bold"),t.setTextColor(...c.primary),t.text("HRM FINANCE",o+5,e+8),t.setFontSize(18),t.setFont("helvetica","normal");const m=s.movementType==="transfer",y=m?n.transferReceipt:n.movementInvoice,k=t.getTextWidth(y);t.setTextColor(...c.secondary),t.text(y,l-x-k-5,e+8),e+=30,N(o,e-2,u,20),t.setFontSize(11),t.setFont("helvetica","bold"),t.setTextColor(...c.text);const E=`${n.movementId}: ${s.invoiceId||s.id||"N/A"}`,z=t.getTextWidth(E);t.text(E,l-x-z-5,e+6);const V=s.createDate||s.createdDate?new Date(s.createDate||s.createdDate).toLocaleDateString():"N/A",R=`${n.date}: ${V}`,_=t.getTextWidth(R);t.text(R,l-x-_-5,e+12),e+=25,t.setFontSize(14),t.setFont("helvetica","bold"),t.setTextColor(...c.primary),t.text("INFORMACIÓN DEL MOVIMIENTO",o,e),e+=8,i(o,e,l-x,e,1),e+=8,t.setFontSize(10),t.setFont("helvetica","normal"),t.setTextColor(...c.text);const f=o,g=o+u/2;if(t.text(`${n.reference}:`,f,e),t.setFont("helvetica","bold"),t.text(s.referenceNumber||"N/A",f+30,e),t.setFont("helvetica","normal"),t.setTextColor(...c.text),t.text(`${n.createdBy}:`,g,e),t.setFont("helvetica","bold"),t.text(s.createdBy||"N/A",g+40,e),e+=8,m?(t.setFont("helvetica","normal"),t.text(`${n.fromLocation}:`,f,e),t.setFont("helvetica","bold"),t.text(s.fromLocationName||"N/A",f+45,e),t.setFont("helvetica","normal"),t.text(`${n.toLocation}:`,g,e),t.setFont("helvetica","bold"),t.text(s.toLocationName||s.locationName||"N/A",g+40,e)):(t.setFont("helvetica","normal"),t.text(`${n.location}:`,f,e),t.setFont("helvetica","bold"),t.text(s.locationName||"N/A",f+25,e)),e+=10,s.notes||s.generalNotes){t.setFont("helvetica","normal"),t.setTextColor(...c.text),t.text(`${n.notes}:`,f,e),t.setFont("helvetica","italic"),t.setTextColor(...c.secondary);const r=s.notes||s.generalNotes,F=t.splitTextToSize(r,u-25);t.text(F,f+20,e),e+=F.length*5}e+=15;const A=s.items||s.products||[];if(A.length>0){t.setFontSize(14),t.setFont("helvetica","bold"),t.setTextColor(...c.primary);const r=m?n.transferItems:n.movementItems;t.text(r,o,e),e+=8,i(o,e,l-x,e,1),e+=8;const F=8;N(o,e-2,u,F),t.setFontSize(9),t.setFont("helvetica","bold"),t.setTextColor(...c.primary);var d={sku:o+2,product:o+25,qty:o+110,cost:o+130,total:o+155,received:o+175};m&&(d={sku:o+2,product:o+25,qty:o+110,total:o+130,received:o+155}),t.text(n.sku,d.sku,e+4),t.text(n.productName,d.product,e+4),t.text(n.qty,d.qty,e+4),m?(t.text(n.total,d?.cost,e+4),t.text(n.received,d?.received,e+4)):(t.text(n.unitCost,d.cost,e+4),t.text(n.total,d.total,e+4)),e+=F+2,i(o,e,l-x,e),e+=4,t.setFontSize(8),t.setFont("helvetica","normal"),t.setTextColor(...c.text);let a=0,T=0;if(A.forEach(v=>{e>250&&(t.addPage(),e=20),T%2===0&&N(o,e-2,u,6);const h=v.productSku||v.sku||"N/A",I=v.productName||v.name||"N/A",S=Math.abs(v.quantity||v.qty||0),b=parseFloat(v.unitCost||v.cost||0),p=S*b;a+=p,t.text(h,d.sku,e+2);const w=80;let L=I;if(t.getTextWidth(I)>w&&(L=I.substring(0,35)+"..."),t.text(L,d.product,e+2),t.setFont("helvetica","bold"),t.text(S.toString(),d.qty,e+2),t.setFont("helvetica","normal"),m){t.text(`$${p.toFixed(2)}`,d.cost,e+2);const B=v.receivedQuantity||"_____";t.text(B.toString(),d.received,e+2)}else t.text(`$${b.toFixed(2)}`,d.cost,e+2),t.setFont("helvetica","bold"),t.text(`$${p.toFixed(2)}`,d.total,e+2);e+=6,T++}),e+=2,i(o,e,l-x,e),!m||a>0){e+=10;const v=70,h=l-x-v;N(h,e-2,v,12),t.setFontSize(12),t.setFont("helvetica","bold"),t.setTextColor(...c.primary),t.text(`${n.totalValue}:`,h+5,e+4),t.setTextColor(...c.accent),t.text(`$${a.toFixed(2)}`,h+35,e+4)}}if(m){e>200&&(t.addPage(),e=25),e+=20,N(o,e-2,u,8),t.setFontSize(12),t.setFont("helvetica","bold"),t.setTextColor(...c.primary),t.text(n.receivingConfirmation,o+5,e+4),e+=12,i(o,e,l-x,e),e+=10,t.setFontSize(10),t.setFont("helvetica","normal"),t.setTextColor(...c.text);const r=8,F=15;i(o,e,o+80,e),i(o,e+r,o+80,e+r),i(o,e,o,e+r),i(o+80,e,o+80,e+r),t.text(`${n.receiverName}:`,o+2,e-2);const a=o+100;i(a,e,a+80,e),i(a,e+r,a+80,e+r),i(a,e,a,e+r),i(a+80,e,a+80,e+r),t.text(`${n.dateReceived}:`,a+2,e-2),e+=F+r,i(o,e,o+80,e),i(o,e+r,o+80,e+r),i(o,e,o,e+r),i(o+80,e,o+80,e+r),t.text(`${n.signature}:`,o+2,e-2),e+=F+r;const T=20;i(o,e,l-x,e),i(o,e+T,l-x,e+T),i(o,e,o,e+T),i(l-x,e,l-x,e+T),t.text(`${n.notes}:`,o+2,e-2)}const q=Math.max(e+25,275);t.setFont("helvetica","italic"),t.setFontSize(9),t.setTextColor(...c.secondary);const M=m?n.footerTransfer:n.footerMovement,D=t.getTextWidth(M);t.text(M,(l-D)/2,q),console.log("Saving PDF...");const C=`modern-movement-${s.invoiceId||s.id||"unknown"}.pdf`;return t.save(C),console.log("PDF saved successfully:",C),C}catch(n){throw console.error("Error in generateModernMovementInvoicePDF:",n),console.error("Error details:",n),n}};export{Y as generateModernMovementInvoicePDF};
