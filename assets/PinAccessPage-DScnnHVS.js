import{G as L,c as u,t as d,j as t,i as s,a as f,v as q,w as B,B as j,k as R,e as F}from"./index-B3DgzdCj.js";import{x as G}from"./taxPortalApi-CSPxByKN.js";import"./drakeTypes-D3NWVYzt.js";var O=d("<div><h1>Document Upload Portal</h1><p>Enter the 6-digit PIN provided by your tax preparer"),U=d("<form><div></div><div>"),V=d("<div><p>Need help? Contact your tax preparer for assistance."),H=d("<div><div>"),J=d("<div><p>");const W=()=>{const v=L(),[c,x]=u(""),[m,n]=u(""),[p,o]=u(!1),b={width:"100%","min-height":"100vh",display:"flex","align-items":"center","justify-content":"center",background:"linear-gradient(135deg, #f5f7fa 0%, #e4e8ed 100%)",padding:"1rem"},$={width:"100%","max-width":"400px"},_={"text-align":"center","margin-bottom":"2rem"},P={"font-size":"1.75rem","font-weight":"600",color:"var(--text-primary)",margin:"0 0 0.5rem 0"},S={"font-size":"0.95rem",color:"var(--text-muted)",margin:"0"},C={display:"flex","flex-direction":"column",gap:"1.5rem"},w={"text-align":"center"},I={width:"100%","font-size":"2rem","text-align":"center","letter-spacing":"0.5rem",padding:"1rem","font-weight":"600"},N={background:"#fef2f2",border:"1px solid #fecaca","border-radius":"var(--border-radius-sm)",padding:"0.75rem 1rem","text-align":"center"},k={color:"#dc2626","font-size":"0.875rem",margin:"0"},z={"margin-top":"0.5rem"},D={"text-align":"center","margin-top":"1.5rem","padding-top":"1rem","border-top":"1px solid var(--border-color)"},T={"font-size":"0.8rem",color:"var(--text-muted)"},A=a=>{const i=a.replace(/\D/g,"").slice(0,6);x(i),m()&&n("")},h=async a=>{a?.preventDefault();const i=c();if(i.length!==6){n("Please enter a complete 6-digit PIN");return}o(!0),n("");try{const e=await G(i);if(!e){n("Invalid PIN. Please check and try again."),o(!1);return}if(e.status==="expired"||e.expiresAt<Date.now()){n("This PIN has expired. Please contact your tax preparer for a new one."),o(!1);return}if(e.status==="cancelled"){n("This document request has been cancelled."),o(!1);return}v(`/tax-upload/${e.accessToken}`)}catch(e){F("Error validating PIN:",e),n("An error occurred. Please try again."),o(!1)}};return(()=>{var a=H(),i=a.firstChild;return t(a,b),t(i,$),s(i,f(R,{get children(){return[(()=>{var e=O(),r=e.firstChild,l=r.nextSibling;return t(e,_),t(r,P),t(l,S),e})(),(()=>{var e=U(),r=e.firstChild,l=r.nextSibling;return e.addEventListener("submit",h),t(e,C),t(r,w),s(r,f(q,{label:"",type:"text",get value(){return c()},onChange:A,placeholder:"000000",get disabled(){return p()},style:I})),s(e,(()=>{var E=B(()=>!!m());return()=>E()&&(()=>{var g=J(),y=g.firstChild;return t(g,N),t(y,k),s(y,m),g})()})(),l),t(l,z),s(l,f(j,{type:"submit",variant:"primary",size:"lg",get disabled(){return p()||c().length!==6},onClick:h,style:{width:"100%"},get children(){return p()?"Validating...":"Access Portal"}})),e})(),(()=>{var e=V(),r=e.firstChild;return t(e,D),t(r,T),e})()]}})),a})()};export{W as default};
