import{E as U}from"./index-Cf3XqEK3.js";const G={es:{invoice:"FACTURA",invoiceNumber:"Número de Factura",date:"Fecha",customer:"Cliente",store:"Tienda",phone:"Teléfono",id:"Identificación",address:"Dirección",shippingMethod:"Método de Envío",aerial:"Aéreo",maritime:"Marítimo",products:"PRODUCTOS",services:"SERVICIOS Y RESERVAS",item:"Artículo",code:"Código",qty:"Cant.",price:"Precio",arancel:"Arancel",total:"Total",subtotal:"Subtotal",subtotalProducts:"Subtotal Productos",subtotalServices:"Subtotal Servicios",tax:"Impuesto",taxSavings:"Ahorro Impuesto",grandTotal:"TOTAL GENERAL",paymentMethods:"MÉTODOS DE PAGO",cash:"Efectivo",zelle:"Zelle",creditCard:"Tarjeta",totalPaid:"Total Pagado",taxExemption:"Exención por Efectivo",thankYou:"¡Gracias por su compra!",footer:"Esta factura es válida como comprobante de compra",originalTax:"Impuesto Original",finalTax:"Impuesto Final",cashBenefit:"Beneficio por Pago en Efectivo"},en:{invoice:"INVOICE",invoiceNumber:"Invoice Number",date:"Date",customer:"Customer",store:"Store",phone:"Phone",id:"ID",address:"Address",shippingMethod:"Shipping Method",aerial:"Air",maritime:"Sea",products:"PRODUCTS",services:"SERVICES & RESERVATIONS",item:"Item",code:"Code",qty:"Qty",price:"Price",arancel:"Tariff",total:"Total",subtotal:"Subtotal",subtotalProducts:"Products Subtotal",subtotalServices:"Services Subtotal",tax:"Tax",taxSavings:"Tax Savings",grandTotal:"GRAND TOTAL",paymentMethods:"PAYMENT METHODS",cash:"Cash",zelle:"Zelle",creditCard:"Credit Card",totalPaid:"Total Paid",taxExemption:"Cash Exemption",thankYou:"Thank you for your purchase!",footer:"This invoice is valid as proof of purchase",originalTax:"Original Tax",finalTax:"Final Tax",cashBenefit:"Cash Payment Benefit"}},Q=async(r,P="es",H="modern")=>{const i=G[P],f=new U("p","mm","a4"),y=f.internal.pageSize.getWidth(),E=f.internal.pageSize.getHeight(),n=8,s=y-n*2,M=E-15;let t=n;console.log({invoiceData:r});try{const z="#bcbcbc",q="#64748b",C="#10b981",W="#f59e0b",I="#bababa",d=e=>e?`$${parseFloat(e.toString())?.toFixed(2)}`:"-",_=e=>new Date(e).toLocaleDateString(P==="es"?"es-ES":"en-US"),g=e=>t+e>M?(f.addPage(),t=n,!0):!1,S=e=>e?" "+e:"",A=e=>S(e).trim(),b=e=>parseFloat(e?.toString())||0,w=e=>{let a=b(e.qty),l=b(e.price),c=b(e.arancel);return`${(a*l+c)?.toFixed(2)}`},B=e=>{let a=Math.abs(e.qty),l=b(e.salePrice);return`${(a*l)?.toFixed(2)}`},V=()=>{let e=r?.shipper_consignee;return S(e?.fullName).trim()||S(e?.name).trim()},Y=()=>{let e=r?.shipper_consignee;return`${S(e?.firstName)}${S(e?.middleName)}${S(e?.lastName)}${S(e?.lastName2)}`.trim()},F=()=>{let e=r?.shipper_consignee,a=`Calle ${e.ybstreet}${e.ybstreetNo?" # "+e.ybstreetNo:""}${e.ybbetwen1?" / "+e.ybbetwen1:""}${e.ybbetwen2?" y "+e.ybbetwen2:""}${e.ybreparto?", Rpto "+e.ybreparto:""}, ${e.ybcity?e.ybcity:""}, ${e.ybestate?e.ybestate:""}`;return S(e?.address)?S(e?.address):a},o=(e,a,l,c={})=>{f.setFontSize(c.fontSize||8),f.setTextColor(c.color||"#000000"),c.bold?f.setFont("helvetica","bold"):f.setFont("helvetica","normal"),c.align==="center"?f.text(e,a,l,{align:"center"}):c.align==="right"?f.text(e,a,l,{align:"right"}):f.text(e,a,l)},h=(e,a,l,c,m="#e2e8f0")=>{f.setDrawColor(m),f.line(e,a,l,c)},p=(e,a,l,c,m,$)=>{m&&(f.setFillColor(m),f.rect(e,a,l,c,"F")),$&&(f.setDrawColor($),f.rect(e,a,l,c,"S"))};p(n,t,s,18,z),o(i.invoice,y/2,t+12,{fontSize:16,bold:!0,color:"#ffffff",align:"center"}),t+=6;const u=n+3,T=y-n-60;if(o(`${i.invoiceNumber}:`,u,t,{bold:!0,fontSize:8}),o(r.invoice,u+30,t,{fontSize:8}),o(`${i.date}:`,T,t,{bold:!0,fontSize:8}),o(_(r.createDate),T+20,t,{fontSize:8}),t+=6,o(`${i.store}:`,u,t,{bold:!0,fontSize:8}),o(A(r?.store),u+20,t,{fontSize:8}),r.shippingMethod){o(`${i.shippingMethod}:`,T,t,{bold:!0,fontSize:8});const e=A(r?.shippingMethod)==="aereo"?i.aerial:i.maritime;o(e,T+30,t,{fontSize:8})}t+=10,p(n,t,s,5,"#f8fafc"),o(`${i.customer.toUpperCase()}`,n+83,t+3,{bold:!0,fontSize:9}),t+=8;let k=[V()];o(k.join(" • "),u,t,{bold:!0,fontSize:8}),t+=4;const O=[];r?.shipper_consignee?.phoneNumberS&&O.push(`${i.phone}: ${r?.shipper_consignee?.phoneNumberS}`),o(O.join(" • "),u,t,{bold:!1,fontSize:7}),t+=4,p(n,t,s,5,"#f8fafc"),o("DESTINATARIO",n+83,t+3,{bold:!0,fontSize:9}),t+=8;let L=[Y()];o(L.join(" • "),u,t,{bold:!0,fontSize:8}),t+=4;const x=[];if(r?.shipper_consignee?.phoneNumber&&x.push(`${i.phone}: ${r?.shipper_consignee?.phoneNumber}`),r?.shipper_consignee?.cid&&x.push(`${i.id}: ${r?.shipper_consignee?.cid}`),x.length>0&&(o(x.join(" • "),u,t,{fontSize:7}),t+=4),F()&&(o(`${i.address}: ${F()}`,u,t,{fontSize:7}),t+=4),t+=6,r?.reservas?.length>0){g(25),p(n,t,s,5,I),o(i.services,n+3,t+3,{bold:!0,fontSize:9,color:"#ffffff"}),t+=8;const e=[n+2,n+50,n+75,n+105,n+140,n+170];o(i.item,e[0],t,{bold:!0,fontSize:7}),o(i.qty,e[1]+13,t,{bold:!0,fontSize:7,align:"center"}),o(i.price,e[2]+20,t,{bold:!0,fontSize:7,align:"right"}),o(i.arancel,e[3]+20,t,{bold:!0,fontSize:7,align:"right"}),o(i.total,e[4]+35,t,{bold:!0,fontSize:7,align:"right"}),t+=2,h(n,t,n+s,t),t+=3,r?.reservas?.forEach((a,l)=>{l>0&&l%8===0&&g(4);let c=w(a);o(a.type.substring(0,25),e[0],t,{fontSize:7}),o(a.qty.toString(),e[1]+13,t,{fontSize:7,align:"center"}),o(d(a?.price),e[2]+20,t,{fontSize:7,align:"right"}),o(d(a?.arancel),e[3]+25,t,{fontSize:7,align:"right"}),o(c,e[4]+35,t,{fontSize:7,align:"right"}),t+=4}),t+=2,h(n+75,t,n+s,t),t+=3,o(`${i.subtotalServices}:`,e[3]-5,t,{bold:!0,fontSize:7}),o(d(r?.reservaSubtotal),e[4]+35,t,{bold:!0,fontSize:7,align:"right"}),t+=6}if(r?.services?.length>0){g(25),p(n,t,s,5,C),o("SERVICIOS ADICIONALES",n+3,t+3,{bold:!0,fontSize:9,color:"#ffffff"}),t+=8;const e=[n+2,n+50,n+75,n+105,n+140,n+170];o(i.item,e[0],t,{bold:!0,fontSize:7}),o(i.qty,e[1]+13,t,{bold:!0,fontSize:7,align:"center"}),o(i.price,e[2]+20,t,{bold:!0,fontSize:7,align:"right"}),o(i.arancel,e[3]+20,t,{bold:!0,fontSize:7,align:"right"}),o(i.total,e[4]+35,t,{bold:!0,fontSize:7,align:"right"}),t+=2,h(n,t,n+s,t),t+=3,r?.services?.forEach((a,l)=>{l>0&&l%8===0&&g(4);const c=b(a.qty),m=b(a.price),$=b(a.arancel),j=c*m+$;o(a.type.substring(0,25),e[0],t,{fontSize:7}),o(c.toFixed(2),e[1]+13,t,{fontSize:7,align:"center"}),o(d(a?.price),e[2]+20,t,{fontSize:7,align:"right"}),o($>0?d(a?.arancel):"-",e[3]+25,t,{fontSize:7,align:"right"}),o(d(j),e[4]+35,t,{fontSize:7,align:"right"}),t+=4}),t+=2,h(n+75,t,n+s,t),t+=3,o("Subtotal Servicios:",e[3]-5,t,{bold:!0,fontSize:7}),o(d(r?.serviceSubtotal||0),e[4]+35,t,{bold:!0,fontSize:7,align:"right"}),t+=6}if(r?.products?.length>0){g(30),p(n,t,s,5,z),o(i.products,n+3,t+3,{bold:!0,fontSize:9,color:"#ffffff"}),t+=8;const e=[n+2,n+70,n+90,n+115,n+150];o(i.item,e[0],t,{bold:!0,fontSize:7}),o(i.code,e[1],t,{bold:!0,fontSize:7}),o(i.qty,e[2]+8,t,{bold:!0,fontSize:7,align:"center"}),o(i.price,e[3]+20,t,{bold:!0,fontSize:7,align:"right"}),o(i.total,e[4]+25,t,{bold:!0,fontSize:7,align:"right"}),t+=2,h(n,t,n+s,t),t+=3,r?.products?.forEach((a,l)=>{l>0&&l%10===0&&g(4),o(a.product.label.substring(0,35),e[0],t,{fontSize:7}),o(a.product.code,e[1],t,{fontSize:7}),o(Math.abs(a.qty).toString(),e[2]+8,t,{fontSize:7,align:"center"}),o(d(a.salePrice),e[3]+20,t,{fontSize:7,align:"right"}),o(B(a),e[4]+25,t,{fontSize:7,align:"right"}),t+=4}),t+=2,h(n+90,t,n+s,t),t+=3,o(`${i.subtotalProducts}:`,e[3]-5,t,{bold:!0,fontSize:7}),o(d(r.productSubtotal),e[4]+25,t,{bold:!0,fontSize:7,align:"right"}),t+=6}const R=r?.paymentMethods?.cash+r?.paymentMethods?.zelle+r.paymentMethods?.creditCard;if(R>0){g(20),p(n,t,s,5,I),o(i.paymentMethods,n+3,t+3,{bold:!0,fontSize:9,color:"#ffffff"}),t+=8;const e=[];r.paymentMethods.cash>0&&e.push(`${i.cash}: ${d(r.paymentMethods.cash)}`),r.paymentMethods.zelle>0&&e.push(`${i.zelle}: ${d(r.paymentMethods.zelle)}`),r.paymentMethods.creditCard>0&&e.push(`${i.creditCard}: ${d(r.paymentMethods.creditCard)}`),e.forEach(a=>{o(a,n+3,t,{fontSize:8}),t+=4}),h(n,t,n+s,t),t+=3,o(`${i.totalPaid}:`,n+3,t,{bold:!0,fontSize:8}),o(d(R),n+s-3,t,{bold:!0,fontSize:8,align:"right"}),t+=6}if(g(25),p(n,t,s,20,"#fff","#e2e8f0"),t+=5,o(`${i.subtotal}:`,n+s-80,t,{fontSize:8}),o(d(r?.subtotalBeforeTax),n+s-3,t,{fontSize:8,align:"right"}),t+=4,r?.taxPercent>0){const e=r.taxOnTotal?"del total":"del subtotal";if(o(`${i.tax} (${r?.taxPercent}% ${e}):`,n+s-80,t,{fontSize:7}),o(d(r?.taxAmount),n+s-3,t,{fontSize:7,align:"right"}),t+=4,r?.exemptTaxOnCash&&r?.taxSavings&&r?.taxSavings>0){o(`${i.taxSavings}:`,n+s-80,t,{fontSize:7,color:C}),o(`-${d(r.taxSavings)}`,n+s-3,t,{fontSize:7,color:C,align:"right"}),t+=4;const a=r?.cashPaymentRatio?(r?.cashPaymentRatio*100).toFixed(1):"0";o(`${i.cashBenefit} (${a}%)`,n+3,t,{fontSize:6,color:C}),t+=4}}t+=2,h(n+s-80,t,n+s,t,z),t+=3,o(i.grandTotal,n+s-80,t,{fontSize:10,bold:!0,color:"#000"}),o(d(r?.total),n+s-3,t,{fontSize:10,bold:!0,color:"#000",align:"right"}),t+=8,t<M-15&&(t=Math.max(t+5,E-20),o(i.thankYou,y/2,t,{fontSize:9,bold:!0,color:z,align:"center"}),t+=4,o(i.footer,y/2,t,{fontSize:6,color:q,align:"center"}))}catch(z){console.log(z)}const N=`Factura_${r.invoice}_${Date.now()}.pdf`;return f.save(N),N};export{Q as generateEnhancedInvoicePDF};
