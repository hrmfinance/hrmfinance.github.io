import{t as h,h as t,i as n,a as _,f as ge,v as ze,b as R,F as Te,d as Xe,c as Ce,A as Mt,o as ct,P as ke,S as ee,am as Ze,R as Je,g as Ge,ax as It}from"./index-6P6fOAHo.js";var Xt=h(`<nav><style>
    @keyframes pulse {
      0%, 100% {
        box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.3), 0 2px 8px rgba(59, 130, 246, 0.4);
      }
      50% {
        box-shadow: 0 0 0 8px rgba(59, 130, 246, 0.15), 0 2px 12px rgba(59, 130, 246, 0.5);
      }
    }
  </style><div>Pipeline Stages</div><div><div>`),Qt=h("<div><div><span></span></div><div><span></span><span> ");const er=[{number:1,name:"Source Input"},{number:2,name:"Transaction Parse"},{number:3,name:"Context Build"},{number:4,name:"Mapping Resolution"},{number:5,name:"Journal Entry"},{number:6,name:"Validation"},{number:7,name:"Learning & Persist"}],tr=e=>{const a=P=>e.completedStages.includes(P)?"completed":P===e.currentStage?"current":"pending",c={display:"flex","flex-direction":"column",padding:"24px 16px",background:"linear-gradient(180deg, #1e293b 0%, #0f172a 100%)","min-height":"100%","font-family":"system-ui, -apple-system, sans-serif"},S={"font-size":"12px","font-weight":"600","text-transform":"uppercase","letter-spacing":"0.1em",color:"#94a3b8","margin-bottom":"24px","padding-left":"8px"},w={display:"flex","flex-direction":"column",position:"relative"},f={position:"absolute",left:"23px",top:"24px",bottom:"24px",width:"2px",background:"#334155","z-index":"0"},p=P=>({display:"flex","align-items":"center",gap:"16px",padding:"12px 8px","border-radius":"8px",cursor:"pointer",transition:"all 0.2s ease",position:"relative","z-index":"1",background:P==="current"?"rgba(59, 130, 246, 0.1)":"transparent"}),j=P=>{const Y={width:"32px",height:"32px","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","font-size":"14px","font-weight":"600",transition:"all 0.3s ease","flex-shrink":"0"};return P==="completed"?{...Y,background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white","box-shadow":"0 2px 8px rgba(16, 185, 129, 0.4)"}:P==="current"?{...Y,background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"white","box-shadow":"0 0 0 4px rgba(59, 130, 246, 0.3), 0 2px 8px rgba(59, 130, 246, 0.4)",animation:"pulse 2s infinite"}:{...Y,background:"#334155",color:"#94a3b8",border:"2px solid #475569"}},u=()=>({display:"flex","flex-direction":"column",gap:"2px",overflow:"hidden"}),U=P=>({"font-size":"14px","font-weight":P==="current"?"600":"500",color:P==="pending"?"#64748b":"#e2e8f0",transition:"color 0.2s ease","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}),V=P=>({"font-size":"11px","font-weight":"500",color:P==="completed"?"#10b981":P==="current"?"#60a5fa":"#475569","text-transform":"uppercase","letter-spacing":"0.05em"}),q=P=>P==="completed"?"‚úì":P==="current"?"‚Üí":"‚óã",te=P=>P==="completed"?"Completed":P==="current"?"In Progress":"Pending";return(()=>{var P=Xt(),Y=P.firstChild,pe=Y.nextSibling,ye=pe.nextSibling,Z=ye.firstChild;return t(P,c),t(pe,S),t(ye,w),t(Z,f),n(ye,_(Te,{each:er,children:J=>{const K=ge(()=>a(J.number));return(()=>{var W=Qt(),O=W.firstChild,y=O.firstChild,x=O.nextSibling,l=x.firstChild,o=l.nextSibling,z=o.firstChild;return W.$$mouseout=C=>{K()!=="current"?C.currentTarget.style.background="transparent":C.currentTarget.style.background="rgba(59, 130, 246, 0.1)"},W.$$mouseover=C=>{K()!=="current"&&(C.currentTarget.style.background="rgba(255, 255, 255, 0.05)")},W.$$click=()=>e.onStageClick(J.number),n(y,(()=>{var C=ze(()=>K()==="completed");return()=>C()?q("completed"):J.number})()),n(l,()=>J.name),n(o,()=>q(K()),z),n(o,()=>te(K()),null),R(C=>{var A=p(K()),re=j(K()),s=u(),v=U(K()),F=V(K());return C.e=t(W,A,C.e),C.t=t(O,re,C.t),C.a=t(x,s,C.a),C.o=t(l,v,C.o),C.i=t(o,F,C.i),C},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),W})()}}),null),P})()};Xe(["click","mouseover","mouseout"]);var rr=h("<div><span>‚úèÔ∏è</span><span>Edit the JSON below to test with custom data. Changes are validated in real-time."),nr=h('<textarea placeholder="Enter your JSON data here...">'),ar=h("<div><span>‚ö†Ô∏è</span><span>JSON Error: "),ir=h("<pre><code>"),or=h("<span>Source: <strong>"),sr=h("<div><div><div>1</div><div><h3>Data Ingestion</h3><p>Raw data input from external sources</p></div></div><div>Select Data Source</div><div></div><div></div><div><div><span>"),lr=h("<button type=button><span></span><span>"),dr=h("<div><span>üìÑ</span><span>Select a source to view raw data");const cr=[{id:"stripe",label:"Stripe",icon:"üí≥",color:"#635bff"},{id:"shopify",label:"Shopify",icon:"üõí",color:"#96bf48"},{id:"yabaexpress",label:"YabaExpress",icon:"üì¶",color:"#ff6b35"},{id:"manual",label:"Manual",icon:"‚úèÔ∏è",color:"#6b7280"}],ur=e=>{const[a,c]=Ce(""),[S,w]=Ce(null),[f,p]=Ce(!1);Mt(()=>{e.selectedSource==="manual"?f()||(p(!0),j()):p(!1)}),ct(()=>{e.selectedSource==="manual"&&(p(!0),j())});const j=()=>{e.rawData?c(JSON.stringify(e.rawData,null,2)):c(JSON.stringify({entry_type:"cash_sale",date:new Date().toISOString().split("T")[0],description:"Your transaction description",customer_name:"Customer Name",amount:0,payment_method:"cash",items:[{description:"Item 1",quantity:1,price:0}]},null,2)),w(null)},u=s=>{c(s);try{const v=JSON.parse(s);w(null),e.onManualDataChange&&e.onManualDataChange(v)}catch(v){w(v.message)}},U=s=>{e.onSourceChange(s),s==="manual"?(p(!0),j()):p(!1)},V={background:"var(--surface-color, #ffffff)","border-radius":"var(--border-radius, 8px)",padding:"1.5rem","box-shadow":"var(--shadow-sm, 0 1px 2px rgba(0,0,0,0.05))",border:"1px solid var(--border-color, #e5e7eb)",margin:"9px"},q={display:"flex","align-items":"center",gap:"0.75rem","margin-bottom":"1.5rem"},te={display:"flex","align-items":"center","justify-content":"center",width:"32px",height:"32px","border-radius":"50%",background:"linear-gradient(135deg, #3b82f6, #1d4ed8)",color:"#ffffff","font-weight":"700","font-size":"0.875rem","box-shadow":"0 2px 4px rgba(59, 130, 246, 0.3)"},P={"font-size":"1.25rem","font-weight":"600",color:"var(--text-primary, #111827)",margin:"0"},Y={"font-size":"0.875rem",color:"var(--text-muted, #6b7280)",margin:"0.25rem 0 0 0"},pe={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(120px, 1fr))",gap:"0.75rem","margin-bottom":"1.5rem"},ye=(s,v)=>({display:"flex","flex-direction":"column","align-items":"center",gap:"0.5rem",padding:"1rem","border-radius":"8px",border:v?`2px solid ${s.color}`:"2px solid var(--border-color, #e5e7eb)",background:v?`${s.color}15`:"var(--surface-color, #ffffff)",cursor:"pointer",transition:"all 0.2s ease","font-family":"inherit","font-size":"0.875rem","font-weight":"500",color:v?s.color:"var(--text-primary, #111827)"}),Z={"font-size":"1.5rem"},J={background:"var(--code-bg, #1f2937)","border-radius":"8px",padding:"1rem","overflow-x":"auto","max-height":"300px","overflow-y":"auto","font-family":'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace',"font-size":"0.75rem","line-height":"1.5",color:"#e5e7eb"},K=s=>({display:"inline-flex","align-items":"center",gap:"0.375rem",padding:"0.375rem 0.75rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"500",background:s==="validated"?"rgba(34, 197, 94, 0.1)":s==="error"?"rgba(239, 68, 68, 0.1)":"rgba(107, 114, 128, 0.1)",color:s==="validated"?"#16a34a":s==="error"?"#dc2626":"#6b7280",border:`1px solid ${s==="validated"?"rgba(34, 197, 94, 0.3)":s==="error"?"rgba(239, 68, 68, 0.3)":"rgba(107, 114, 128, 0.3)"}`}),W=s=>({width:"6px",height:"6px","border-radius":"50%",background:s==="validated"?"#16a34a":s==="error"?"#dc2626":"#6b7280"}),O={display:"flex","flex-direction":"column","align-items":"center","justify-content":"center",padding:"2rem",color:"var(--text-muted, #6b7280)","text-align":"center"},y={"font-size":"0.75rem","font-weight":"600","text-transform":"uppercase","letter-spacing":"0.05em",color:"var(--text-muted, #6b7280)","margin-bottom":"0.75rem"},x={display:"flex","justify-content":"space-between","align-items":"center","margin-top":"1rem","padding-top":"1rem","border-top":"1px solid var(--border-color, #e5e7eb)"},l={width:"100%","min-height":"300px","max-height":"400px",padding:"1rem","font-family":'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace',"font-size":"0.75rem","line-height":"1.5",background:"var(--code-bg, #1f2937)",color:"#e5e7eb",border:"2px solid transparent","border-radius":"8px",resize:"vertical",outline:"none"},o={...l,"border-color":"#ef4444"},z={display:"flex","align-items":"center",gap:"0.5rem",padding:"0.75rem",background:"rgba(239, 68, 68, 0.1)","border-radius":"6px","margin-top":"0.75rem",color:"#ef4444","font-size":"0.75rem"},C={display:"flex","align-items":"center",gap:"0.5rem",padding:"0.5rem 0.75rem",background:"rgba(59, 130, 246, 0.1)","border-radius":"6px","margin-bottom":"0.75rem",color:"#3b82f6","font-size":"0.75rem"},A=ge(()=>{if(!e.rawData)return null;try{return JSON.stringify(e.rawData,null,2)}catch{return"Invalid JSON data"}}),re=()=>{switch(e.validationStatus){case"validated":return"Source validated";case"error":return e.validationMessage||"Source error";case"pending":return"Validating...";default:return"Awaiting source"}};return(()=>{var s=sr(),v=s.firstChild,F=v.firstChild,k=F.nextSibling,G=k.firstChild,X=G.nextSibling,H=v.nextSibling,N=H.nextSibling,le=N.nextSibling,se=le.nextSibling,me=se.firstChild,ne=me.firstChild;return t(s,V),t(v,q),t(F,te),t(G,P),t(X,Y),t(N,pe),n(N,_(Te,{each:cr,children:$=>(()=>{var D=lr(),Q=D.firstChild,be=Q.nextSibling;return D.$$click=()=>U($.id),t(Q,Z),n(Q,()=>$.icon),n(be,()=>$.label),R(_e=>t(D,ye($,e.selectedSource===$.id),_e)),D})()})),n(le,()=>e.selectedSource==="manual"?"Edit JSON Data":"Raw JSON Data"),n(s,_(ee,{get when(){return ze(()=>e.selectedSource==="manual")()&&f()},get children(){return[(()=>{var $=rr();return t($,C),$})(),(()=>{var $=nr();return $.$$input=D=>u(D.currentTarget.value),ke($,"spellcheck",!1),R(D=>t($,S()?o:l,D)),R(()=>$.value=a()),$})(),_(ee,{get when(){return S()},get children(){var $=ar(),D=$.firstChild,Q=D.nextSibling;return Q.firstChild,t($,z),n(Q,S,null),$}})]}}),se),n(s,_(ee,{get when(){return e.selectedSource!=="manual"||!f()},get children(){return _(ee,{get when(){return ze(()=>!!e.rawData)()&&A()},get fallback(){return(()=>{var $=dr(),D=$.firstChild;return D.style.setProperty("font-size","2rem"),D.style.setProperty("margin-bottom","0.5rem"),R(Q=>t($,{...J,...O},Q)),$})()},get children(){var $=ir(),D=$.firstChild;return n(D,A),R(Q=>t($,J,Q)),$}})}}),se),t(se,x),n(se,_(ee,{get when(){return e.selectedSource},get children(){var $=or(),D=$.firstChild,Q=D.nextSibling;return $.style.setProperty("font-size","0.875rem"),$.style.setProperty("color","var(--text-muted, #6b7280)"),n(Q,()=>e.selectedSource),$}}),me),n(me,re,null),R($=>{var D=y,Q=y,be=K(e.validationStatus||"pending"),_e=W(e.validationStatus||"pending");return $.e=t(H,D,$.e),$.t=t(le,Q,$.t),$.a=t(me,be,$.a),$.o=t(ne,_e,$.o),$},{e:void 0,t:void 0,a:void 0,o:void 0}),s})()};Xe(["input","click"]);var gr=h("<div><div><span>StandardTransaction</span><span>ID: </span></div><pre><code>"),pr=h("<div><div><div>2</div><div><h3>Adapter Transform</h3><p>Field mapping and normalization</p></div></div><div><span>Adapter: <!>Adapter</span><span> field mappings</span></div><div>Pattern Detection</div><div></div><div>Field Mapping Table</div><div><table><thead><tr><th>Source</th><th>Transform</th><th>Target</th><th>Confidence</th></tr></thead><tbody></tbody></table></div><div>Overall Mapping Confidence</div><div><span>Confidence:</span><div><div></div></div><span>%</span></div><div>StandardTransaction Preview"),mr=h("<span> "),fr=h("<tr><td><code></code></td><td><span>‚Üí</span><code></code><span>‚Üí</span></td><td><code></code></td><td><span>%"),yr=h("<div>No transaction data available");const bt=e=>{const a={background:"var(--surface-color, #ffffff)","border-radius":"var(--border-radius, 8px)",padding:"1.5rem","box-shadow":"var(--shadow-sm, 0 1px 2px rgba(0,0,0,0.05))",border:"1px solid var(--border-color, #e5e7eb)",margin:"9px"},c={display:"flex","align-items":"center",gap:"0.75rem","margin-bottom":"1.5rem"},S={display:"flex","align-items":"center","justify-content":"center",width:"32px",height:"32px","border-radius":"50%",background:"linear-gradient(135deg, #8b5cf6, #6d28d9)",color:"#ffffff","font-weight":"700","font-size":"0.875rem","box-shadow":"0 2px 4px rgba(139, 92, 246, 0.3)"},w={"font-size":"1.25rem","font-weight":"600",color:"var(--text-primary, #111827)",margin:"0"},f={"font-size":"0.875rem",color:"var(--text-muted, #6b7280)",margin:"0.25rem 0 0 0"},p={display:"flex","align-items":"center","justify-content":"space-between",padding:"0.75rem 1rem",background:"linear-gradient(135deg, #f3e8ff, #ede9fe)","border-radius":"8px","margin-bottom":"1rem",border:"1px solid #c4b5fd"},j={"font-family":'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace',"font-size":"0.875rem","font-weight":"600",color:"#6d28d9"},u={display:"flex","flex-wrap":"wrap",gap:"0.5rem","margin-bottom":"1.5rem"},U=v=>({display:"inline-flex","align-items":"center",gap:"0.375rem",padding:"0.375rem 0.75rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"500",background:v?"rgba(34, 197, 94, 0.1)":"rgba(107, 114, 128, 0.1)",color:v?"#16a34a":"#6b7280",border:`1px solid ${v?"rgba(34, 197, 94, 0.3)":"rgba(107, 114, 128, 0.3)"}`}),V={"font-size":"0.75rem","font-weight":"600","text-transform":"uppercase","letter-spacing":"0.05em",color:"var(--text-muted, #6b7280)","margin-bottom":"0.75rem"},q={"overflow-x":"auto","margin-bottom":"1.5rem"},te={width:"100%","border-collapse":"collapse","font-size":"0.875rem"},P={padding:"0.75rem","text-align":"left","font-weight":"600",color:"var(--text-muted, #6b7280)","border-bottom":"2px solid var(--border-color, #e5e7eb)",background:"var(--surface-secondary, #f9fafb)","white-space":"nowrap"},Y={padding:"0.75rem","border-bottom":"1px solid var(--border-color, #e5e7eb)","vertical-align":"middle"},pe={"font-family":'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace',"font-size":"0.75rem",padding:"0.25rem 0.5rem",background:"rgba(239, 68, 68, 0.1)",color:"#dc2626","border-radius":"4px"},ye={"font-family":'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace',"font-size":"0.75rem",padding:"0.25rem 0.5rem",background:"rgba(139, 92, 246, 0.1)",color:"#7c3aed","border-radius":"4px"},Z={"font-family":'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace',"font-size":"0.75rem",padding:"0.25rem 0.5rem",background:"rgba(34, 197, 94, 0.1)",color:"#16a34a","border-radius":"4px"},J={color:"var(--text-muted, #6b7280)","font-size":"0.75rem",margin:"0 0.25rem"},K={display:"flex","align-items":"center",gap:"0.75rem",padding:"1rem",background:"var(--surface-secondary, #f9fafb)","border-radius":"8px","margin-bottom":"1.5rem"},W={flex:"1",height:"8px",background:"var(--border-color, #e5e7eb)","border-radius":"9999px",overflow:"hidden"},O=v=>({height:"100%",width:`${v}%`,"border-radius":"9999px",background:v>=80?"linear-gradient(90deg, #22c55e, #16a34a)":v>=60?"linear-gradient(90deg, #eab308, #ca8a04)":"linear-gradient(90deg, #ef4444, #dc2626)",transition:"width 0.5s ease"}),y={"font-size":"0.875rem","font-weight":"600",color:"var(--text-primary, #111827)","min-width":"50px","text-align":"right"},x={background:"var(--code-bg, #1f2937)","border-radius":"8px",padding:"1rem","overflow-x":"auto","max-height":"200px","overflow-y":"auto"},l={display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"0.75rem"},o={"font-size":"0.75rem","font-weight":"600",color:"#9ca3af","text-transform":"uppercase","letter-spacing":"0.05em"},z={"font-family":'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace',"font-size":"0.75rem","line-height":"1.5",color:"#e5e7eb",margin:"0","white-space":"pre-wrap","word-break":"break-word"},C=v=>({"font-size":"0.75rem","font-weight":"500",color:v>=80?"#16a34a":v>=60?"#ca8a04":"#dc2626"}),A=[{type:"currency",label:"Currency",found:!0},{type:"date",label:"Date",found:!0},{type:"reference",label:"Reference",found:!0},{type:"email",label:"Email",found:!1}],re=ge(()=>e.patterns||A),s=ge(()=>{if(!e.standardTransaction)return null;try{return JSON.stringify(e.standardTransaction,null,2)}catch{return"Invalid transaction data"}});return(()=>{var v=pr(),F=v.firstChild,k=F.firstChild,G=k.nextSibling,X=G.firstChild,H=X.nextSibling,N=F.nextSibling,le=N.firstChild,se=le.firstChild,me=se.nextSibling;me.nextSibling;var ne=le.nextSibling,$=ne.firstChild,D=N.nextSibling,Q=D.nextSibling,be=Q.nextSibling,_e=be.nextSibling,Ae=_e.firstChild,Me=Ae.firstChild,m=Me.firstChild,B=m.firstChild,ae=B.nextSibling,fe=ae.nextSibling,Se=fe.nextSibling,de=Me.nextSibling,we=_e.nextSibling,oe=we.nextSibling,he=oe.firstChild,xe=he.nextSibling,Pe=xe.firstChild,d=xe.nextSibling,ce=d.firstChild,i=oe.nextSibling;return t(v,a),t(F,c),t(k,S),t(X,w),t(H,f),t(N,p),t(le,j),n(le,()=>e.sourceType,me),ne.style.setProperty("font-size","0.75rem"),ne.style.setProperty("color","#6d28d9"),n(ne,()=>e.mappings.length,$),t(Q,u),n(Q,_(Te,{get each(){return re()},children:r=>(()=>{var b=mr(),T=b.firstChild;return n(b,()=>r.found?"‚úì":"‚óã",T),n(b,()=>r.label,null),n(b,()=>r.found&&r.count!==void 0&&` (${r.count})`,null),R(g=>t(b,U(r.found),g)),b})()})),t(_e,q),t(Ae,te),n(de,_(Te,{get each(){return e.mappings},children:r=>(()=>{var b=fr(),T=b.firstChild,g=T.firstChild,E=T.nextSibling,L=E.firstChild,ue=L.nextSibling,I=ue.nextSibling,ie=E.nextSibling,$e=ie.firstChild,Fe=ie.nextSibling,Ie=Fe.firstChild,Ne=Ie.firstChild;return t(g,pe),n(g,()=>r.sourceField),t(ue,ye),n(ue,()=>r.transform),t($e,Z),n($e,()=>r.targetField),n(Ie,()=>r.confidence,Ne),R(ve=>{var Be=Y,Le={...Y,"text-align":"center"},je=J,Oe=J,Re=Y,tt={...Y,"text-align":"right"},Ke=C(r.confidence);return ve.e=t(T,Be,ve.e),ve.t=t(E,Le,ve.t),ve.a=t(L,je,ve.a),ve.o=t(I,Oe,ve.o),ve.i=t(ie,Re,ve.i),ve.n=t(Fe,tt,ve.n),ve.s=t(Ie,Ke,ve.s),ve},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),b})()})),t(oe,K),he.style.setProperty("font-size","0.875rem"),he.style.setProperty("color","var(--text-muted, #6b7280)"),t(xe,W),t(d,y),n(d,()=>e.confidence,ce),n(v,_(ee,{get when(){return ze(()=>!!e.standardTransaction)()&&s()},get fallback(){return(()=>{var r=yr();return R(b=>t(r,{...x,display:"flex","align-items":"center","justify-content":"center",color:"#6b7280","min-height":"100px"},b)),r})()},get children(){var r=gr(),b=r.firstChild,T=b.firstChild,g=T.nextSibling;g.firstChild;var E=b.nextSibling,L=E.firstChild;return t(b,l),t(T,o),g.style.setProperty("font-size","0.625rem"),g.style.setProperty("color","#6b7280"),n(g,()=>e.standardTransaction?.id,null),t(E,z),n(L,s),R(ue=>t(r,x,ue)),r}}),null),R(r=>{var b=V,T=V,g=P,E={...P,"text-align":"center"},L=P,ue={...P,"text-align":"right"},I=V,ie=O(e.confidence),$e=V;return r.e=t(D,b,r.e),r.t=t(be,T,r.t),r.a=t(B,g,r.a),r.o=t(ae,E,r.o),r.i=t(fe,L,r.i),r.n=t(Se,ue,r.n),r.s=t(we,I,r.s),r.h=t(Pe,ie,r.h),r.r=t(i,$e,r.r),r},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),v})()};var ht=h("<span>"),xt=h("<pre><code>"),St=h("<div>"),vr=h("<div>Payment Allocation"),br=h("<tr><td colspan=3>Tax</td><td></td><td>"),hr=h("<div><table><thead><tr><th>Description</th><th>Qty</th><th>Unit Price</th><th>Total</th><th>Account</th></tr></thead><tbody><tr><td colspan=3>Total</td><td></td><td>"),xr=h("<div><div><div>3</div><div><h3>Invoice Conversion</h3><p>Generate invoice from standardized transaction</p></div></div><div>Side-by-Side Comparison</div><div><div><div><span>StandardTransaction</span></div></div><div><div><span>Generated Invoice</span></div></div></div><div>Account Code Assignments</div><div>Line Items"),Sr=h("<div>No transaction data"),Cr=h("<div>No invoice generated"),_r=h("<div>No account assignments"),$r=h("<div><span> </span><span></span><span>"),wr=h("<span>Ref: "),Pr=h("<div><span></span><span>"),kr=h("<div>No line items"),Tr=h("<code>"),Ar=h("<tr><td></td><td></td><td></td><td></td><td>");const Ct=e=>{const a={background:"var(--surface-color, #ffffff)","border-radius":"var(--border-radius, 8px)",padding:"1.5rem","box-shadow":"var(--shadow-sm, 0 1px 2px rgba(0,0,0,0.05))",border:"1px solid var(--border-color, #e5e7eb)",margin:"9px"},c={display:"flex","align-items":"center",gap:"0.75rem","margin-bottom":"1.5rem"},S={display:"flex","align-items":"center","justify-content":"center",width:"32px",height:"32px","border-radius":"50%",background:"linear-gradient(135deg, #10b981, #059669)",color:"#ffffff","font-weight":"700","font-size":"0.875rem","box-shadow":"0 2px 4px rgba(16, 185, 129, 0.3)"},w={"font-size":"1.25rem","font-weight":"600",color:"var(--text-primary, #111827)",margin:"0"},f={"font-size":"0.875rem",color:"var(--text-muted, #6b7280)",margin:"0.25rem 0 0 0"},p={display:"grid","grid-template-columns":"1fr 1fr",gap:"1rem","margin-bottom":"1.5rem"},j={background:"var(--code-bg, #1f2937)","border-radius":"8px",padding:"1rem","overflow-x":"auto","max-height":"250px","overflow-y":"auto"},u={display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"0.75rem","padding-bottom":"0.5rem","border-bottom":"1px solid rgba(255, 255, 255, 0.1)"},U={"font-size":"0.75rem","font-weight":"600",color:"#9ca3af","text-transform":"uppercase","letter-spacing":"0.05em"},V={"font-family":'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace',"font-size":"0.7rem","line-height":"1.4",color:"#e5e7eb",margin:"0","white-space":"pre-wrap","word-break":"break-word"},q={"font-size":"0.75rem","font-weight":"600","text-transform":"uppercase","letter-spacing":"0.05em",color:"var(--text-muted, #6b7280)","margin-bottom":"0.75rem"},te={display:"flex","flex-wrap":"wrap",gap:"0.5rem","margin-bottom":"1.5rem"},P=k=>({display:"inline-flex","flex-direction":"column",padding:"0.5rem 0.75rem","border-radius":"8px",background:k==="debit"?"rgba(239, 68, 68, 0.1)":"rgba(34, 197, 94, 0.1)",border:`1px solid ${k==="debit"?"rgba(239, 68, 68, 0.3)":"rgba(34, 197, 94, 0.3)"}`}),Y=k=>({"font-family":'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace',"font-size":"0.75rem","font-weight":"600",color:k==="debit"?"#dc2626":"#16a34a"}),pe={"font-size":"0.625rem",color:"var(--text-muted, #6b7280)","margin-top":"0.125rem"},ye=k=>({"font-size":"0.75rem","font-weight":"500",color:k==="debit"?"#dc2626":"#16a34a","margin-top":"0.25rem"}),Z={display:"flex",gap:"0.75rem","margin-bottom":"1.5rem","flex-wrap":"wrap"},J={display:"flex","flex-direction":"column",padding:"0.75rem 1rem","border-radius":"8px",background:"var(--surface-secondary, #f9fafb)",border:"1px solid var(--border-color, #e5e7eb)","min-width":"140px"},K={"font-size":"0.75rem","font-weight":"600",color:"var(--text-primary, #111827)","margin-bottom":"0.25rem"},W={"font-size":"1rem","font-weight":"700",color:"#059669"},O={"font-size":"0.625rem",color:"var(--text-muted, #6b7280)","margin-top":"0.25rem","font-family":'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace'},y={"overflow-x":"auto"},x={width:"100%","border-collapse":"collapse","font-size":"0.875rem"},l={padding:"0.75rem","text-align":"left","font-weight":"600",color:"var(--text-muted, #6b7280)","border-bottom":"2px solid var(--border-color, #e5e7eb)",background:"var(--surface-secondary, #f9fafb)","white-space":"nowrap"},o={padding:"0.75rem","border-bottom":"1px solid var(--border-color, #e5e7eb)","vertical-align":"middle"},z={"font-family":'ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace',"font-size":"0.625rem",padding:"0.125rem 0.375rem",background:"rgba(107, 114, 128, 0.1)",color:"#6b7280","border-radius":"4px"},C={...o,"font-weight":"600",background:"var(--surface-secondary, #f9fafb)"},A={display:"flex","flex-direction":"column","align-items":"center","justify-content":"center",padding:"2rem",color:"var(--text-muted, #6b7280)","text-align":"center","min-height":"100px"},re=k=>({display:"inline-flex","align-items":"center",padding:"0.25rem 0.5rem","border-radius":"9999px","font-size":"0.625rem","font-weight":"600","text-transform":"uppercase",background:k==="paid"?"rgba(34, 197, 94, 0.1)":k==="pending"?"rgba(234, 179, 8, 0.1)":k==="overdue"?"rgba(239, 68, 68, 0.1)":"rgba(107, 114, 128, 0.1)",color:k==="paid"?"#16a34a":k==="pending"?"#ca8a04":k==="overdue"?"#dc2626":"#6b7280"}),s=(k,G)=>new Intl.NumberFormat("en-US",{style:"currency",currency:G||"USD"}).format(k),v=ge(()=>{if(!e.standardTransaction)return null;try{return JSON.stringify(e.standardTransaction,null,2)}catch{return"Invalid transaction data"}}),F=ge(()=>{if(!e.invoice)return null;try{const{lineItems:k,...G}=e.invoice;return JSON.stringify({...G,lineItems:`[${k.length} items]`},null,2)}catch{return"Invalid invoice data"}});return(()=>{var k=xr(),G=k.firstChild,X=G.firstChild,H=X.nextSibling,N=H.firstChild,le=N.nextSibling,se=G.nextSibling,me=se.nextSibling,ne=me.firstChild,$=ne.firstChild,D=$.firstChild,Q=ne.nextSibling,be=Q.firstChild,_e=be.firstChild,Ae=me.nextSibling,Me=Ae.nextSibling;return t(k,a),t(G,c),t(X,S),t(N,w),t(le,f),t(me,p),n($,_(ee,{get when(){return e.standardTransaction},get children(){var m=ht();return m.style.setProperty("font-size","0.625rem"),m.style.setProperty("color","#6b7280"),n(m,()=>e.standardTransaction?.id),m}}),null),n(ne,_(ee,{get when(){return ze(()=>!!e.standardTransaction)()&&v()},get fallback(){return(()=>{var m=Sr();return R(B=>t(m,A,B)),m})()},get children(){var m=xt(),B=m.firstChild;return n(B,v),R(ae=>t(m,V,ae)),m}}),null),n(be,_(ee,{get when(){return e.invoice},get children(){var m=ht();return n(m,()=>e.invoice?.status),R(B=>t(m,re(e.invoice?.status||"draft"),B)),m}}),null),n(Q,_(ee,{get when(){return ze(()=>!!e.invoice)()&&F()},get fallback(){return(()=>{var m=Cr();return R(B=>t(m,A,B)),m})()},get children(){var m=xt(),B=m.firstChild;return n(B,F),R(ae=>t(m,V,ae)),m}}),null),n(k,_(ee,{get when(){return e.accountAssignments.length>0},get fallback(){return(()=>{var m=_r();return R(B=>t(m,{...A,background:"var(--surface-secondary, #f9fafb)","border-radius":"8px","margin-bottom":"1.5rem"},B)),m})()},get children(){var m=St();return t(m,te),n(m,_(Te,{get each(){return e.accountAssignments},children:B=>(()=>{var ae=$r(),fe=ae.firstChild,Se=fe.firstChild,de=fe.nextSibling,we=de.nextSibling;return n(fe,()=>B.type==="debit"?"DR":"CR",Se),n(fe,()=>B.accountCode,null),t(de,pe),n(de,()=>B.accountName),n(we,()=>s(B.amount,e.standardTransaction?.currency)),R(oe=>{var he=P(B.type),xe=Y(B.type),Pe=ye(B.type);return oe.e=t(ae,he,oe.e),oe.t=t(fe,xe,oe.t),oe.a=t(we,Pe,oe.a),oe},{e:void 0,t:void 0,a:void 0}),ae})()})),m}}),Me),n(k,_(ee,{get when(){return e.invoice?.payments&&e.invoice.payments.length>0},get children(){return[(()=>{var m=vr();return R(B=>t(m,q,B)),m})(),(()=>{var m=St();return t(m,Z),n(m,_(Te,{get each(){return e.invoice?.payments},children:B=>(()=>{var ae=Pr(),fe=ae.firstChild,Se=fe.nextSibling;return t(ae,J),t(fe,K),n(fe,()=>B.method),t(Se,W),n(Se,()=>s(B.amount,e.standardTransaction?.currency)),n(ae,_(ee,{get when(){return B.reference},get children(){var de=wr();return de.firstChild,t(de,O),n(de,()=>B.reference,null),de}}),null),ae})()})),m})()]}}),Me),n(k,_(ee,{get when(){return e.invoice?.lineItems&&e.invoice.lineItems.length>0},get fallback(){return(()=>{var m=kr();return R(B=>t(m,{...A,background:"var(--surface-secondary, #f9fafb)","border-radius":"8px"},B)),m})()},get children(){var m=hr(),B=m.firstChild,ae=B.firstChild,fe=ae.firstChild,Se=fe.firstChild,de=Se.nextSibling,we=de.nextSibling,oe=we.nextSibling,he=oe.nextSibling,xe=ae.nextSibling,Pe=xe.firstChild,d=Pe.firstChild,ce=d.nextSibling,i=ce.nextSibling;return t(m,y),t(B,x),n(xe,_(Te,{get each(){return e.invoice?.lineItems},children:r=>(()=>{var b=Ar(),T=b.firstChild,g=T.nextSibling,E=g.nextSibling,L=E.nextSibling,ue=L.nextSibling;return n(T,()=>r.description),n(g,()=>r.quantity),n(E,()=>s(r.unitPrice,e.standardTransaction?.currency)),n(L,()=>s(r.total,e.standardTransaction?.currency)),n(ue,_(ee,{get when(){return r.accountCode},fallback:"-",get children(){var I=Tr();return t(I,z),n(I,()=>r.accountCode),I}})),R(I=>{var ie=o,$e={...o,"text-align":"center"},Fe={...o,"text-align":"right"},Ie={...o,"text-align":"right"},Ne=o;return I.e=t(T,ie,I.e),I.t=t(g,$e,I.t),I.a=t(E,Fe,I.a),I.o=t(L,Ie,I.o),I.i=t(ue,Ne,I.i),I},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),b})()}),Pe),n(xe,_(ee,{get when(){return e.invoice?.tax!==void 0&&e.invoice.tax>0},get children(){var r=br(),b=r.firstChild,T=b.nextSibling,g=T.nextSibling;return n(T,()=>s(e.invoice?.tax||0,e.standardTransaction?.currency)),R(E=>{var L=C,ue={...C,"text-align":"right"},I=C;return E.e=t(b,L,E.e),E.t=t(T,ue,E.t),E.a=t(g,I,E.a),E},{e:void 0,t:void 0,a:void 0}),r}}),Pe),n(ce,()=>s(e.invoice?.total||0,e.standardTransaction?.currency)),R(r=>{var b=l,T={...l,"text-align":"center"},g={...l,"text-align":"right"},E={...l,"text-align":"right"},L=l,ue={...C,"font-weight":"700"},I={...C,"text-align":"right","font-weight":"700",color:"#059669"},ie=C;return r.e=t(Se,b,r.e),r.t=t(de,T,r.t),r.a=t(we,g,r.a),r.o=t(oe,E,r.o),r.i=t(he,L,r.i),r.n=t(d,ue,r.n),r.s=t(ce,I,r.s),r.h=t(i,ie,r.h),r},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),m}}),null),R(m=>{var B=q,ae=j,fe=u,Se=U,de=j,we=u,oe=U,he=q,xe=q;return m.e=t(se,B,m.e),m.t=t(ne,ae,m.t),m.a=t($,fe,m.a),m.o=t(D,Se,m.o),m.i=t(Q,de,m.i),m.n=t(be,we,m.n),m.s=t(_e,oe,m.s),m.h=t(Ae,he,m.h),m.r=t(Me,xe,m.r),m},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),k})()};var Fr=h("<svg width=800>"),Mr=h("<svg><g><path fill=none></svg>",!1,!0,!1),Ir=h("<svg><animate attributeName=stroke-dashoffset from=100 to=0 dur=1s repeatCount=1></svg>",!1,!0,!1),zr=h("<svg><circle r=4 fill=#4CAF50><animateMotion dur=1.5s repeatCount=indefinite></svg>",!1,!0,!1),Nr=h("<svg><g><text x=0 text-anchor=middle></svg>",!1,!0,!1),Br=h("<svg><rect x=-45 y=-20 width=90 height=40 rx=8 stroke-width=2></svg>",!1,!0,!1),_t=h("<svg><animate attributeName=stroke-width values=2;4;2 dur=1s repeatCount=indefinite></svg>",!1,!0,!1),Rr=h('<svg><polygon points="-50,0 0,-25 50,0 0,25"stroke-width=2></svg>',!1,!0,!1),Dr=h("<div><span>Description</span><span>"),Er=h("<div><div><span></span><span></span></div><div></div><div><div><span>Normal Balance</span><span>"),Lr=h("<div><div>Selected Path:</div><div>"),jr=h("<div><div><div>4</div><h3>Account Mapping</h3></div><div></div><div>"),Or=h("<div><div></div><span>"),Ur=h("<span>"),qr=h("<span>-&gt;");const lt={Asset:"#2196F3",Liability:"#F44336",Revenue:"#4CAF50",Expense:"#FF9800",Equity:"#9C27B0"},$t=e=>{const a={padding:"1.5rem",background:"var(--surface-color, #ffffff)","border-radius":"var(--border-radius, 8px)",border:"1px solid var(--border-color, #e0e0e0)","box-shadow":"var(--shadow-sm, 0 1px 3px rgba(0,0,0,0.1))"},c={display:"flex","align-items":"center",gap:"1rem","margin-bottom":"1.5rem"},S={display:"flex","align-items":"center","justify-content":"center",width:"32px",height:"32px","border-radius":"50%",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white","font-weight":"700","font-size":"1rem"},w={"font-size":"1.25rem","font-weight":"600",color:"var(--text-primary, #1a1a1a)",margin:"0"},f={width:"100%","overflow-x":"auto",padding:"1rem 0",background:"#f8f9fa","border-radius":"8px","margin-bottom":"1.5rem"},p={padding:"1.5rem",background:"white","border-radius":"8px",border:"1px solid var(--border-color, #e0e0e0)"},j={display:"flex","align-items":"center",gap:"0.75rem","margin-bottom":"1rem"},u={"font-size":"1.5rem","font-weight":"700",color:"var(--text-primary, #1a1a1a)"},U={"font-size":"1.125rem",color:"var(--text-secondary, #666666)"},V=Z=>({display:"inline-block",padding:"0.25rem 0.75rem","border-radius":"16px",background:lt[Z]||"#999999",color:"white","font-size":"0.75rem","font-weight":"600","text-transform":"uppercase"}),q={display:"flex","justify-content":"space-between",padding:"0.5rem 0","border-bottom":"1px solid #f0f0f0"},te={color:"var(--text-muted, #999999)","font-size":"0.875rem"},P={"font-weight":"500",color:"var(--text-primary, #1a1a1a)"},Y=ge(()=>{const Z=[],J=[],K=(y,x)=>{J[x]||(J[x]=0),J[x]++,y.children?.forEach(l=>K(l,x+1))};K(e.decisions,0);const W=[],O=(y,x)=>{W[x]||(W[x]=0);const l=J[x],o=W[x],C=800/(l+1)*(o+1),A=x*100+50;Z.push({node:y,x:C,y:A,level:x}),W[x]++,y.children?.forEach(re=>O(re,x+1))};return O(e.decisions,0),Z}),pe=Z=>e.selectedPath.includes(Z),ye=()=>{const Z=Y(),J=Math.max(...Z.map(O=>O.y))+100,K=[],W=(O,y)=>{const x=Z.find(l=>l.node.id===O.id);x&&(y&&K.push({from:y,to:{x:x.x,y:x.y},selected:pe(O.id)}),O.children?.forEach(l=>W(l,{x:x.x,y:x.y})))};return W(e.decisions),(()=>{var O=Fr();return ke(O,"height",J),O.style.setProperty("display","block"),O.style.setProperty("margin","0 auto"),n(O,_(Te,{each:K,children:y=>(()=>{var x=Mr(),l=x.firstChild;return n(l,(()=>{var o=ze(()=>!!y.selected);return()=>o()&&Ir()})()),n(x,(()=>{var o=ze(()=>!!y.selected);return()=>o()&&(()=>{var z=zr(),C=z.firstChild;return R(()=>ke(C,"path",`M ${y.from.x} ${y.from.y+20}
                           C ${y.from.x} ${(y.from.y+y.to.y)/2},
                             ${y.to.x} ${(y.from.y+y.to.y)/2},
                             ${y.to.x} ${y.to.y-20}`)),z})()})(),null),R(o=>{var z=`M ${y.from.x} ${y.from.y+20}
                    C ${y.from.x} ${(y.from.y+y.to.y)/2},
                      ${y.to.x} ${(y.from.y+y.to.y)/2},
                      ${y.to.x} ${y.to.y-20}`,C=y.selected?"#4CAF50":"#e0e0e0",A=y.selected?3:2,re=y.selected?"none":"5,5";return z!==o.e&&ke(l,"d",o.e=z),C!==o.t&&ke(l,"stroke",o.t=C),A!==o.a&&ke(l,"stroke-width",o.a=A),re!==o.o&&ke(l,"stroke-dasharray",o.o=re),o},{e:void 0,t:void 0,a:void 0,o:void 0}),x})()}),null),n(O,_(Te,{each:Z,children:y=>{const x=pe(y.node.id),l=y.node.type==="account",o=l&&y.node.accountType?lt[y.node.accountType]:x?"#4CAF50":"#667eea";return(()=>{var z=Nr(),C=z.firstChild;return n(z,l?(()=>{var A=Br();return ke(A,"fill",x?o:"white"),ke(A,"stroke",o),n(A,x&&_t()),A})():(()=>{var A=Rr();return ke(A,"fill",x?o:"white"),ke(A,"stroke",o),n(A,x&&_t()),A})(),C),ke(C,"y",l?"5":"4"),ke(C,"font-size",l?"14":"11"),ke(C,"font-weight",x?"700":"500"),ke(C,"fill",x?"white":o),n(C,()=>l?`[${y.node.accountCode}]`:y.node.label),R(()=>ke(z,"transform",`translate(${y.x}, ${y.y})`)),z})()}}),null),O})()};return(()=>{var Z=jr(),J=Z.firstChild,K=J.firstChild,W=K.nextSibling,O=J.nextSibling,y=O.nextSibling;return t(Z,a),t(J,c),t(K,S),t(W,w),t(O,f),n(O,ye),y.style.setProperty("display","flex"),y.style.setProperty("gap","1rem"),y.style.setProperty("flex-wrap","wrap"),y.style.setProperty("margin-bottom","1.5rem"),n(y,_(Te,{get each(){return Object.entries(lt)},children:([x,l])=>(()=>{var o=Or(),z=o.firstChild,C=z.nextSibling;return o.style.setProperty("display","flex"),o.style.setProperty("align-items","center"),o.style.setProperty("gap","0.5rem"),z.style.setProperty("width","12px"),z.style.setProperty("height","12px"),z.style.setProperty("border-radius","3px"),l!=null?z.style.setProperty("background",l):z.style.removeProperty("background"),C.style.setProperty("font-size","0.75rem"),C.style.setProperty("color","var(--text-muted, #666666)"),n(C,x),o})()})),n(Z,_(ee,{get when(){return e.accountInfo},get children(){var x=Er(),l=x.firstChild,o=l.firstChild,z=o.nextSibling,C=l.nextSibling,A=C.nextSibling,re=A.firstChild,s=re.firstChild,v=s.nextSibling;return t(x,p),t(l,j),t(o,u),n(o,()=>e.accountInfo.code),n(z,()=>e.accountInfo.type),t(C,U),n(C,()=>e.accountInfo.name),A.style.setProperty("margin-top","1rem"),n(v,()=>e.accountInfo.normalBalance.toUpperCase()),n(A,_(ee,{get when(){return e.accountInfo.description},get children(){var F=Dr(),k=F.firstChild,G=k.nextSibling;return n(G,()=>e.accountInfo.description),R(X=>{var H=q,N=te,le=P;return X.e=t(F,H,X.e),X.t=t(k,N,X.t),X.a=t(G,le,X.a),X},{e:void 0,t:void 0,a:void 0}),F}}),null),R(F=>{var k=V(e.accountInfo.type),G=q,X=te,H=P;return F.e=t(z,k,F.e),F.t=t(re,G,F.t),F.a=t(s,X,F.a),F.o=t(v,H,F.o),F},{e:void 0,t:void 0,a:void 0,o:void 0}),x}}),null),n(Z,_(ee,{get when(){return e.selectedPath.length>0},get children(){var x=Lr(),l=x.firstChild,o=l.nextSibling;return x.style.setProperty("margin-top","1rem"),x.style.setProperty("padding","1rem"),x.style.setProperty("background","#e8f5e9"),x.style.setProperty("border-radius","8px"),l.style.setProperty("font-size","0.875rem"),l.style.setProperty("font-weight","600"),l.style.setProperty("color","#2e7d32"),l.style.setProperty("margin-bottom","0.5rem"),o.style.setProperty("display","flex"),o.style.setProperty("align-items","center"),o.style.setProperty("gap","0.5rem"),o.style.setProperty("flex-wrap","wrap"),n(o,_(Te,{get each(){return e.selectedPath},children:(z,C)=>[(()=>{var A=Ur();return A.style.setProperty("padding","0.25rem 0.5rem"),A.style.setProperty("background","white"),A.style.setProperty("border-radius","4px"),A.style.setProperty("font-size","0.75rem"),A.style.setProperty("font-weight","500"),n(A,z),A})(),_(ee,{get when(){return C()<e.selectedPath.length-1},get children(){var A=qr();return A.style.setProperty("color","#2e7d32"),A}})]})),x}}),null),Z})()};var Jr=h('<div><svg width=16 height=16 viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>Condition Evaluator: '),dt=h("<div>"),Gr=h("<div><span>"),Hr=h('<div><svg width=16 height=16 viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><rect x=3 y=3 width=18 height=18 rx=2 ry=2></rect><line x1=3 y1=9 x2=21 y2=9></line><line x1=9 y1=21 x2=9 y2=9></line></svg>Generated Journal Lines'),Vr=h("<div><div><span>Code</span><span>Account Name</span><span>Debit</span><span>Credit"),Yr=h('<div><svg width=48 height=48 viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=1><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline></svg><div>No rules configured'),Zr=h('<div><div><div>5</div><h3>Rules Engine</h3></div><div><svg width=16 height=16 viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1=16 y1=13 x2=8 y2=13></line><line x1=16 y1=17 x2=8 y2=17></line><polyline points="10 9 9 9 8 9"></polyline></svg>Available Rules</div><div>'),Kr=h("<div><div></div><div><div></div></div><div><div>"),Wr=h("<div><span></span><span></span><span></span><span>"),Xr=h("<div><span></span><div><div></div></div><span></span><span>");const wt=e=>{const a={padding:"1.5rem",background:"var(--surface-color, #ffffff)","border-radius":"var(--border-radius, 8px)",border:"1px solid var(--border-color, #e0e0e0)","box-shadow":"var(--shadow-sm, 0 1px 3px rgba(0,0,0,0.1))"},c={display:"flex","align-items":"center",gap:"1rem","margin-bottom":"1.5rem"},S={display:"flex","align-items":"center","justify-content":"center",width:"32px",height:"32px","border-radius":"50%",background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white","font-weight":"700","font-size":"1rem"},w={"font-size":"1.25rem","font-weight":"600",color:"var(--text-primary, #1a1a1a)",margin:"0"},f={"font-size":"1rem","font-weight":"600",color:"var(--text-primary, #1a1a1a)","margin-bottom":"1rem",display:"flex","align-items":"center",gap:"0.5rem"},p={display:"flex","flex-direction":"column",gap:"0.75rem","margin-bottom":"1.5rem"},j=(l,o)=>({display:"flex","align-items":"center","justify-content":"space-between",padding:"1rem",background:l?"#e3f2fd":o?"white":"#f5f5f5","border-radius":"8px",border:l?"2px solid #2196F3":"1px solid var(--border-color, #e0e0e0)",transition:"all 0.2s ease",opacity:o?1:.6}),u=l=>{let o="#4CAF50";return l>66?o="#F44336":l>33&&(o="#FF9800"),{display:"flex","align-items":"center","justify-content":"center","min-width":"40px",height:"24px","border-radius":"12px",background:o,color:"white","font-size":"0.75rem","font-weight":"700",padding:"0 0.5rem"}},U={"font-weight":"500",color:"var(--text-primary, #1a1a1a)",flex:"1","margin-left":"1rem"},V=l=>({width:"40px",height:"20px","border-radius":"10px",background:l?"#4CAF50":"#e0e0e0",position:"relative",cursor:"pointer",transition:"background 0.2s ease"}),q=l=>({position:"absolute",top:"2px",left:l?"22px":"2px",width:"16px",height:"16px","border-radius":"50%",background:"white","box-shadow":"0 1px 3px rgba(0,0,0,0.3)",transition:"left 0.2s ease"}),te={padding:"1rem",background:"#f8f9fa","border-radius":"8px","margin-bottom":"1.5rem"},P=l=>({display:"flex","align-items":"center",gap:"1rem",padding:"0.75rem",background:l===void 0?"white":l?"#e8f5e9":"#ffebee","border-radius":"6px","margin-bottom":"0.5rem",border:`1px solid ${l===void 0?"#e0e0e0":l?"#a5d6a7":"#ef9a9a"}`}),Y={"font-weight":"600",color:"#1976D2","min-width":"120px"},pe={padding:"0.25rem 0.5rem",background:"#e3f2fd","border-radius":"4px","font-size":"0.75rem","font-weight":"500",color:"#1565C0"},ye={"font-family":"monospace",color:"#7B1FA2"},Z=l=>({display:"flex","align-items":"center","justify-content":"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:l?"#e8f5e9":"#ffebee","border-radius":"8px","font-weight":"600",color:l?"#2e7d32":"#c62828","margin-bottom":"1.5rem"}),J={background:"white","border-radius":"8px",overflow:"hidden",border:"1px solid var(--border-color, #e0e0e0)"},K={display:"grid","grid-template-columns":"100px 1fr 120px 120px",gap:"1rem",padding:"0.75rem 1rem",background:"#f5f5f5","font-weight":"600","font-size":"0.75rem","text-transform":"uppercase",color:"var(--text-muted, #666666)"},W={display:"grid","grid-template-columns":"100px 1fr 120px 120px",gap:"1rem",padding:"0.75rem 1rem","border-bottom":"1px solid #f0f0f0","align-items":"center"},O=l=>l===0?"-":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(l),y=l=>({equals:"=",not_equals:"!=",greater_than:">",less_than:"<",contains:"CONTAINS",in:"IN"})[l]||l,x=()=>e.evaluatedRule?e.conditions.every(l=>l.result===!0):!1;return(()=>{var l=Zr(),o=l.firstChild,z=o.firstChild,C=z.nextSibling,A=o.nextSibling,re=A.nextSibling;return t(l,a),t(o,c),t(z,S),t(C,w),n(re,_(Te,{get each(){return e.rules},children:s=>(()=>{var v=Kr(),F=v.firstChild,k=F.nextSibling,G=k.firstChild,X=k.nextSibling,H=X.firstChild;return n(F,()=>s.priority),t(k,U),n(G,()=>s.name),n(k,_(ee,{get when(){return s.description},get children(){var N=dt();return N.style.setProperty("font-size","0.75rem"),N.style.setProperty("color","var(--text-muted, #999999)"),N.style.setProperty("margin-top","0.25rem"),n(N,()=>s.description),N}}),null),R(N=>{var le=j(e.evaluatedRule?.id===s.id,s.isActive),se=u(s.priority),me=V(s.isActive),ne=q(s.isActive);return N.e=t(v,le,N.e),N.t=t(F,se,N.t),N.a=t(X,me,N.a),N.o=t(H,ne,N.o),N},{e:void 0,t:void 0,a:void 0,o:void 0}),v})()})),n(l,_(ee,{get when(){return e.evaluatedRule},get children(){return[(()=>{var s=Jr(),v=s.firstChild;return v.nextSibling,n(s,()=>e.evaluatedRule.name,null),R(F=>t(s,f,F)),s})(),(()=>{var s=dt();return t(s,te),n(s,_(Te,{get each(){return e.conditions},children:v=>(()=>{var F=Wr(),k=F.firstChild,G=k.nextSibling,X=G.nextSibling,H=X.nextSibling;return t(k,Y),n(k,()=>v.field),t(G,pe),n(G,()=>y(v.operator)),t(X,ye),n(X,(()=>{var N=ze(()=>!!Array.isArray(v.value));return()=>N()?`[${v.value.join(", ")}]`:String(v.value)})()),H.style.setProperty("margin-left","auto"),H.style.setProperty("font-size","1.25rem"),n(H,()=>v.result===void 0?"?":v.result?"‚úì":"‚úó"),R(N=>t(F,P(v.result),N)),F})()})),s})(),(()=>{var s=Gr(),v=s.firstChild;return v.style.setProperty("font-size","1.5rem"),n(v,()=>x()?"‚úì":"‚úó"),n(s,()=>x()?"Rule Matched":"No Match",null),R(F=>t(s,Z(x()),F)),s})()]}}),null),n(l,_(ee,{get when(){return e.journalLines.length>0},get children(){return[(()=>{var s=Hr();return R(v=>t(s,f,v)),s})(),(()=>{var s=Vr(),v=s.firstChild,F=v.firstChild,k=F.nextSibling,G=k.nextSibling,X=G.nextSibling;return t(s,J),G.style.setProperty("text-align","right"),X.style.setProperty("text-align","right"),n(s,_(Te,{get each(){return e.journalLines},children:H=>(()=>{var N=Xr(),le=N.firstChild,se=le.nextSibling,me=se.firstChild,ne=se.nextSibling,$=ne.nextSibling;return t(N,W),le.style.setProperty("font-family","monospace"),le.style.setProperty("font-weight","600"),n(le,()=>H.accountCode),n(me,()=>H.accountName),n(se,_(ee,{get when(){return H.description},get children(){var D=dt();return D.style.setProperty("font-size","0.75rem"),D.style.setProperty("color","var(--text-muted, #999999)"),n(D,()=>H.description),D}}),null),ne.style.setProperty("text-align","right"),n(ne,()=>O(H.debit)),$.style.setProperty("text-align","right"),n($,()=>O(H.credit)),R(D=>{var Q=H.debit>0?"#2196F3":"var(--text-muted, #999999)",be=H.credit>0?"#F44336":"var(--text-muted, #999999)";return Q!==D.e&&((D.e=Q)!=null?ne.style.setProperty("color",Q):ne.style.removeProperty("color")),be!==D.t&&((D.t=be)!=null?$.style.setProperty("color",be):$.style.removeProperty("color")),D},{e:void 0,t:void 0}),N})()}),null),R(H=>t(v,K,H)),s})()]}}),null),n(l,_(ee,{get when(){return e.rules.length===0},get children(){var s=Yr(),v=s.firstChild;return s.style.setProperty("padding","3rem"),s.style.setProperty("text-align","center"),s.style.setProperty("color","var(--text-muted, #999999)"),s.style.setProperty("background","#f8f9fa"),s.style.setProperty("border-radius","8px"),v.style.setProperty("opacity","0.5"),v.style.setProperty("margin-bottom","1rem"),s}}),null),R(s=>{var v=f,F=p;return s.e=t(A,v,s.e),s.t=t(re,F,s.t),s},{e:void 0,t:void 0}),l})()};var Qr=h("<div><span>Created By</span><span>"),en=h("<div><span>Status</span><span>"),tn=h("<div><strong>Description:</strong> "),rn=h('<div><svg width=48 height=48 viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=1><rect x=3 y=3 width=18 height=18 rx=2 ry=2></rect><line x1=3 y1=9 x2=21 y2=9></line><line x1=9 y1=21 x2=9 y2=9></line></svg><div>No journal entries to display'),nn=h("<div><div><div>6</div><h3>Ledger Entry Generation</h3></div><div><div><span>Date</span><span></span></div><div><span>Reference</span><span></span></div><div><span>Document No.</span><span></span></div></div><table><thead><tr><th>Account Code</th><th>Account Name</th><th>Debit</th><th>Credit</th></tr></thead><tbody><tr><td colspan=2><strong>TOTALS</strong></td><td></td><td></td></tr></tbody></table><div><div></div><div><strong></strong><span></span></div></div><div><span></span><span></span><span>"),an=h("<div>"),on=h("<tr><td></td><td><div></div></td><td></td><td>");const Pt=e=>{const a={padding:"1.5rem",background:"var(--surface-color, #ffffff)","border-radius":"var(--border-radius, 8px)",border:"1px solid var(--border-color, #e0e0e0)","box-shadow":"var(--shadow-sm, 0 1px 3px rgba(0,0,0,0.1))"},c={display:"flex","align-items":"center",gap:"1rem","margin-bottom":"1.5rem"},S={display:"flex","align-items":"center","justify-content":"center",width:"32px",height:"32px","border-radius":"50%",background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)",color:"white","font-weight":"700","font-size":"1rem"},w={"font-size":"1.25rem","font-weight":"600",color:"var(--text-primary, #1a1a1a)",margin:"0"},f={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",padding:"1rem",background:"#f8f9fa","border-radius":"8px","margin-bottom":"1.5rem"},p={display:"flex","flex-direction":"column",gap:"0.25rem"},j={"font-size":"0.75rem","text-transform":"uppercase",color:"var(--text-muted, #666666)","font-weight":"500"},u={"font-size":"0.875rem","font-weight":"600",color:"var(--text-primary, #1a1a1a)"},U=o=>{const z={draft:{bg:"#e0e0e0",text:"#616161"},pending:{bg:"#fff3e0",text:"#ef6c00"},posted:{bg:"#e8f5e9",text:"#2e7d32"}},{bg:C,text:A}=z[o]||z.draft;return{display:"inline-block",padding:"0.25rem 0.75rem","border-radius":"16px",background:C,color:A,"font-size":"0.75rem","font-weight":"600","text-transform":"uppercase"}},V={width:"100%",background:"white","border-radius":"8px",overflow:"hidden",border:"1px solid var(--border-color, #e0e0e0)","border-collapse":"collapse","margin-bottom":"1rem"},q={background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white"},te={padding:"1rem","text-align":"left","font-weight":"600","font-size":"0.875rem","border-bottom":"2px solid rgba(255,255,255,0.2)"},P=o=>({background:o%2===0?"white":"#fafafa",transition:"background 0.2s ease"}),Y={padding:"0.875rem 1rem","border-bottom":"1px solid #f0f0f0","vertical-align":"top"},pe={...Y,"font-family":"monospace","font-weight":"600",color:"#1976D2","white-space":"nowrap"},ye=(o,z)=>({...Y,"text-align":"right","font-family":"monospace","font-weight":o?"600":"400",color:o?z?"#1976D2":"#C62828":"var(--text-muted, #999999)"}),Z={background:"#f5f5f5","font-weight":"600"},J={padding:"0.875rem 1rem","border-top":"2px solid #e0e0e0","font-weight":"600"},K=o=>({display:"flex","align-items":"center","justify-content":"center",gap:"0.75rem",padding:"1rem 1.5rem",background:o?"linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%)":"linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%)","border-radius":"8px","margin-top":"1rem",border:`2px solid ${o?"#4CAF50":"#F44336"}`}),W=o=>({display:"flex","align-items":"center","justify-content":"center",width:"32px",height:"32px","border-radius":"50%",background:o?"#4CAF50":"#F44336",color:"white","font-size":"1.25rem","font-weight":"700"}),O=o=>({display:"flex","flex-direction":"column",color:o?"#2e7d32":"#c62828"}),y=o=>o===0?"-":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o),x=o=>{try{return new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return o}},l=ge(()=>Math.abs(e.totals.totalDebits-e.totals.totalCredits));return(()=>{var o=nn(),z=o.firstChild,C=z.firstChild,A=C.nextSibling,re=z.nextSibling,s=re.firstChild,v=s.firstChild,F=v.nextSibling,k=s.nextSibling,G=k.firstChild,X=G.nextSibling,H=k.nextSibling,N=H.firstChild,le=N.nextSibling,se=re.nextSibling,me=se.firstChild,ne=me.firstChild,$=ne.firstChild,D=$.nextSibling,Q=D.nextSibling,be=Q.nextSibling,_e=me.nextSibling,Ae=_e.firstChild,Me=Ae.firstChild,m=Me.nextSibling,B=m.nextSibling,ae=se.nextSibling,fe=ae.firstChild,Se=fe.nextSibling,de=Se.firstChild,we=de.nextSibling,oe=ae.nextSibling,he=oe.firstChild,xe=he.nextSibling,Pe=xe.nextSibling;return t(o,a),t(z,c),t(C,S),t(A,w),t(re,f),n(F,()=>x(e.metadata.date)),n(X,()=>e.metadata.reference),n(le,()=>e.metadata.documentNumber),n(re,_(ee,{get when(){return e.metadata.createdBy},get children(){var d=Qr(),ce=d.firstChild,i=ce.nextSibling;return n(i,()=>e.metadata.createdBy),R(r=>{var b=p,T=j,g=u;return r.e=t(d,b,r.e),r.t=t(ce,T,r.t),r.a=t(i,g,r.a),r},{e:void 0,t:void 0,a:void 0}),d}}),null),n(re,_(ee,{get when(){return e.metadata.status},get children(){var d=en(),ce=d.firstChild,i=ce.nextSibling;return n(i,()=>e.metadata.status),R(r=>{var b=p,T=j,g=U(e.metadata.status);return r.e=t(d,b,r.e),r.t=t(ce,T,r.t),r.a=t(i,g,r.a),r},{e:void 0,t:void 0,a:void 0}),d}}),null),n(o,_(ee,{get when(){return e.metadata.description},get children(){var d=tn(),ce=d.firstChild;return ce.nextSibling,d.style.setProperty("padding","0.75rem 1rem"),d.style.setProperty("background","#e3f2fd"),d.style.setProperty("border-radius","6px"),d.style.setProperty("margin-bottom","1.5rem"),d.style.setProperty("font-size","0.875rem"),d.style.setProperty("color","#1565C0"),n(d,()=>e.metadata.description,null),d}}),se),t(ne,q),n(_e,_(Te,{get each(){return e.entries},children:(d,ce)=>(()=>{var i=on(),r=i.firstChild,b=r.nextSibling,T=b.firstChild,g=b.nextSibling,E=g.nextSibling;return n(r,()=>d.accountCode),n(T,()=>d.accountName),n(b,_(ee,{get when(){return d.description},get children(){var L=an();return L.style.setProperty("font-size","0.75rem"),L.style.setProperty("color","var(--text-muted, #999999)"),L.style.setProperty("margin-top","0.25rem"),n(L,()=>d.description),L}}),null),n(g,()=>y(d.debit)),n(E,()=>y(d.credit)),R(L=>{var ue=P(ce()),I=pe,ie=Y,$e=ye(d.debit>0,!0),Fe=ye(d.credit>0,!1);return L.e=t(i,ue,L.e),L.t=t(r,I,L.t),L.a=t(b,ie,L.a),L.o=t(g,$e,L.o),L.i=t(E,Fe,L.i),L},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),i})()}),Ae),t(Ae,Z),n(m,()=>y(e.totals.totalDebits)),n(B,()=>y(e.totals.totalCredits)),n(fe,()=>e.isBalanced?"‚úì":"!"),de.style.setProperty("font-size","1rem"),n(de,()=>e.isBalanced?"Entry Balanced":"Entry Unbalanced"),we.style.setProperty("font-size","0.875rem"),n(we,(()=>{var d=ze(()=>!!e.isBalanced);return()=>d()?`Total Debits (${y(e.totals.totalDebits)}) = Total Credits (${y(e.totals.totalCredits)})`:`Difference: ${y(l())}`})()),oe.style.setProperty("margin-top","1rem"),oe.style.setProperty("padding","0.75rem"),oe.style.setProperty("background","#f5f5f5"),oe.style.setProperty("border-radius","6px"),oe.style.setProperty("text-align","center"),oe.style.setProperty("font-family","monospace"),oe.style.setProperty("font-size","0.875rem"),he.style.setProperty("color","#1976D2"),he.style.setProperty("font-weight","600"),n(he,()=>y(e.totals.totalDebits)),xe.style.setProperty("margin","0 0.5rem"),n(xe,()=>e.isBalanced?"=":"!="),Pe.style.setProperty("color","#C62828"),Pe.style.setProperty("font-weight","600"),n(Pe,()=>y(e.totals.totalCredits)),n(o,_(ee,{get when(){return e.entries.length===0},get children(){var d=rn(),ce=d.firstChild;return d.style.setProperty("padding","3rem"),d.style.setProperty("text-align","center"),d.style.setProperty("color","var(--text-muted, #999999)"),d.style.setProperty("background","#f8f9fa"),d.style.setProperty("border-radius","8px"),ce.style.setProperty("opacity","0.5"),ce.style.setProperty("margin-bottom","1rem"),d}}),null),R(d=>{var ce=p,i=j,r=u,b=p,T=j,g=u,E=p,L=j,ue=u,I=V,ie={...te,width:"100px"},$e=te,Fe={...te,width:"140px","text-align":"right"},Ie={...te,width:"140px","text-align":"right"},Ne={...J,"text-align":"right"},ve={...J,"text-align":"right","font-family":"monospace",color:"#1976D2"},Be={...J,"text-align":"right","font-family":"monospace",color:"#C62828"},Le=K(e.isBalanced),je=W(e.isBalanced),Oe=O(e.isBalanced),Re=e.isBalanced?"#4CAF50":"#F44336";return d.e=t(s,ce,d.e),d.t=t(v,i,d.t),d.a=t(F,r,d.a),d.o=t(k,b,d.o),d.i=t(G,T,d.i),d.n=t(X,g,d.n),d.s=t(H,E,d.s),d.h=t(N,L,d.h),d.r=t(le,ue,d.r),d.d=t(se,I,d.d),d.l=t($,ie,d.l),d.u=t(D,$e,d.u),d.c=t(Q,Fe,d.c),d.w=t(be,Ie,d.w),d.m=t(Me,Ne,d.m),d.f=t(m,ve,d.f),d.y=t(B,Be,d.y),d.g=t(ae,Le,d.g),d.p=t(fe,je,d.p),d.b=t(Se,Oe,d.b),Re!==d.T&&((d.T=Re)!=null?xe.style.setProperty("color",Re):xe.style.removeProperty("color")),d},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0,p:void 0,b:void 0,T:void 0}),o})()};var sn=h("<span>‚úì"),ln=h("<div><div><div></div><div><h3></h3><p></p></div></div><div><div>Confidence Delta</div><div><span>%</span><div><span></span><span>%</span></div><span>%</span></div></div><div><div><div></div><div>Total Processed</div></div><div><div>%</div><div>Success Rate</div></div><div><div>%</div><div>Avg Confidence</div></div></div><div><div><span>üîÑ</span><span>Feedback Loop</span></div><div><div>‚Ü© Improves future mappings</div></div></div><button><span>üíæ</span><span>Save to Knowledge Base"),dn=h("<span>‚úï"),cn=h("<div><div></div><div>"),un=h("<span>‚Üí");const kt=e=>{const a=ge(()=>e.newConfidence-e.previousConfidence),c=ge(()=>a()>=0),S={display:"flex","flex-direction":"column",gap:"24px",padding:"24px","font-family":"system-ui, -apple-system, sans-serif"},w=ge(()=>({display:"flex","align-items":"center",gap:"16px",padding:"20px 24px","border-radius":"12px",background:e.status==="success"?"linear-gradient(135deg, #10b981 0%, #059669 100%)":"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)","box-shadow":"0 4px 12px rgba(0, 0, 0, 0.15)",color:"white"})),f={width:"48px",height:"48px","border-radius":"50%",background:"rgba(255, 255, 255, 0.2)",display:"flex","align-items":"center","justify-content":"center","font-size":"24px","font-weight":"bold"},p={display:"flex","flex-direction":"column",gap:"4px"},j={"font-size":"18px","font-weight":"600",margin:"0"},u={"font-size":"14px",opacity:"0.9",margin:"0"},U={background:"white","border-radius":"12px",padding:"24px","box-shadow":"0 2px 8px rgba(0, 0, 0, 0.08)",border:"1px solid #e5e7eb"},V={"font-size":"14px","font-weight":"500",color:"#6b7280","margin-bottom":"16px","text-transform":"uppercase","letter-spacing":"0.05em"},q={display:"flex","align-items":"center","justify-content":"center",gap:"20px"},te={"font-size":"32px","font-weight":"700",color:"#1f2937"},P=ge(()=>({display:"flex","flex-direction":"column","align-items":"center",gap:"4px",padding:"8px 16px","border-radius":"8px",background:c()?"#ecfdf5":"#fef2f2"})),Y=ge(()=>({"font-size":"24px",color:c()?"#10b981":"#ef4444",transition:"transform 0.3s ease"})),pe=ge(()=>({"font-size":"14px","font-weight":"600",color:c()?"#059669":"#dc2626"})),ye={display:"grid","grid-template-columns":"repeat(3, 1fr)",gap:"16px"},Z={background:"white","border-radius":"12px",padding:"20px","box-shadow":"0 2px 8px rgba(0, 0, 0, 0.08)",border:"1px solid #e5e7eb","text-align":"center"},J={"font-size":"28px","font-weight":"700",color:"#1f2937","margin-bottom":"4px"},K={"font-size":"13px",color:"#6b7280","font-weight":"500"},W={background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)","border-radius":"12px",padding:"24px",border:"1px solid #e2e8f0"},O={"font-size":"16px","font-weight":"600",color:"#1f2937","margin-bottom":"20px",display:"flex","align-items":"center",gap:"8px"},y={display:"flex","align-items":"center","justify-content":"center",position:"relative",padding:"20px 0"},x={padding:"12px 16px","border-radius":"8px",background:"white","box-shadow":"0 2px 6px rgba(0, 0, 0, 0.1)",border:"1px solid #e5e7eb","font-size":"13px","font-weight":"500",color:"#374151","text-align":"center","min-width":"100px"},l={color:"#9ca3af","font-size":"20px",padding:"0 8px"},o={position:"absolute",bottom:"-10px",left:"50%",transform:"translateX(-50%)",color:"#10b981","font-size":"14px",display:"flex","align-items":"center",gap:"4px",background:"#ecfdf5",padding:"4px 12px","border-radius":"16px","font-weight":"500"},z={display:"flex","align-items":"center","justify-content":"center",gap:"8px",padding:"14px 28px",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",color:"white",border:"none","border-radius":"10px","font-size":"15px","font-weight":"600",cursor:"pointer","box-shadow":"0 4px 12px rgba(59, 130, 246, 0.35)",transition:"all 0.2s ease","align-self":"center"},C=[{label:"Input",icon:"üìÑ"},{label:"Process",icon:"‚öôÔ∏è"},{label:"Result",icon:"‚úì"},{label:"Learn",icon:"üß†"}];return(()=>{var A=ln(),re=A.firstChild,s=re.firstChild,v=s.nextSibling,F=v.firstChild,k=F.nextSibling,G=re.nextSibling,X=G.firstChild,H=X.nextSibling,N=H.firstChild,le=N.firstChild,se=N.nextSibling,me=se.firstChild,ne=me.nextSibling,$=ne.firstChild,D=se.nextSibling,Q=D.firstChild,be=G.nextSibling,_e=be.firstChild,Ae=_e.firstChild,Me=Ae.nextSibling,m=_e.nextSibling,B=m.firstChild,ae=B.firstChild,fe=B.nextSibling,Se=m.nextSibling,de=Se.firstChild,we=de.firstChild,oe=de.nextSibling,he=be.nextSibling,xe=he.firstChild,Pe=xe.nextSibling,d=Pe.firstChild,ce=he.nextSibling;return t(A,S),t(s,f),n(s,_(ee,{get when(){return e.status==="success"},get fallback(){return dn()},get children(){return sn()}})),t(v,p),t(F,j),n(F,()=>e.status==="success"?"Learning Successful":"Learning Failed"),t(k,u),n(k,()=>e.status==="success"?"Knowledge base has been updated with new patterns":"Unable to persist learning - please retry"),t(G,U),t(X,V),t(H,q),n(N,()=>e.previousConfidence,le),n(me,()=>c()?"‚Üë":"‚Üì"),n(ne,()=>c()?"+":"",$),n(ne,()=>a().toFixed(1),$),n(D,()=>e.newConfidence,Q),t(be,ye),n(Ae,()=>e.metrics.totalProcessed.toLocaleString()),n(B,()=>e.metrics.successRate.toFixed(1),ae),n(de,()=>e.metrics.averageConfidence.toFixed(1),we),t(he,W),t(xe,O),t(Pe,y),n(Pe,_(Te,{each:C,children:(i,r)=>[(()=>{var b=cn(),T=b.firstChild,g=T.nextSibling;return t(b,x),T.style.setProperty("font-size","20px"),T.style.setProperty("margin-bottom","4px"),n(T,()=>i.icon),n(g,()=>i.label),b})(),_(ee,{get when(){return r()<C.length-1},get children(){var b=un();return t(b,l),b}})]}),d),t(d,o),ce.$$mouseout=i=>{i.currentTarget.style.transform="translateY(0)",i.currentTarget.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.35)"},ce.$$mouseover=i=>{i.currentTarget.style.transform="translateY(-2px)",i.currentTarget.style.boxShadow="0 6px 16px rgba(59, 130, 246, 0.45)"},t(ce,z),R(i=>{var r=w(),b=te,T=P(),g=Y(),E=pe(),L=te,ue=Z,I=J,ie=K,$e=Z,Fe=J,Ie=K,Ne=Z,ve=J,Be=K;return i.e=t(re,r,i.e),i.t=t(N,b,i.t),i.a=t(se,T,i.a),i.o=t(me,g,i.o),i.i=t(ne,E,i.i),i.n=t(D,L,i.n),i.s=t(_e,ue,i.s),i.h=t(Ae,I,i.h),i.r=t(Me,ie,i.r),i.d=t(m,$e,i.d),i.l=t(B,Fe,i.l),i.u=t(fe,Ie,i.u),i.c=t(Se,Ne,i.c),i.w=t(de,ve,i.w),i.m=t(oe,Be,i.m),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0}),A})()};Xe(["mouseover","mouseout"]);function Qe(e,a,c){const S="Account              | Debit   | Credit",w="-".repeat(42),f=e.map(U=>{const V=U.accountName.padEnd(20).substring(0,20),q=U.debit!==null?U.debit.toFixed(2).padStart(7):"   -   ",te=U.credit!==null?U.credit.toFixed(2).padStart(7):"   -   ";return`${V} | ${q} | ${te}`}),j=Math.abs(a-c)<.01?" BALANCED":" UNBALANCED!",u=`${"TOTALS".padEnd(20)} | ${a.toFixed(2).padStart(7)} | ${c.toFixed(2).padStart(7)}  ${j}`;return[S,w,...f,w,u].join(`
`)}function gn(){const e={id:"ch_1234567890",amount:10825,currency:"usd",status:"succeeded",created:1703980800,metadata:{customer_name:"John Doe",order_id:"ORD-2024-001",invoice_id:"INV-2024-001"},payment_method_details:{type:"card",card:{brand:"visa",last4:"4242",exp_month:12,exp_year:2025}},customer:"cus_abc123",receipt_email:"john.doe@email.com",description:"Payment for Order ORD-2024-001",application_fee_amount:314},a=[{sourceField:"id",targetField:"sourceId",value:"ch_1234567890",confidence:1,transformationType:"direct"},{sourceField:"amount",targetField:"amount",value:108.25,confidence:1,transformationType:"calculated"},{sourceField:"currency",targetField:"currency",value:"usd",confidence:1,transformationType:"direct"},{sourceField:"created",targetField:"date",value:"2024-12-31",confidence:1,transformationType:"parsed"},{sourceField:"metadata.customer_name",targetField:"customer.name",value:"John Doe",confidence:.95,transformationType:"direct"},{sourceField:"receipt_email",targetField:"customer.email",value:"john.doe@email.com",confidence:.9,transformationType:"direct"},{sourceField:"payment_method_details.type",targetField:"paymentMethod",value:"card",confidence:1,transformationType:"direct"},{sourceField:"status",targetField:"status",value:"completed",confidence:1,transformationType:"lookup"},{sourceField:"application_fee_amount",targetField:"fees.processingFee",value:3.14,confidence:1,transformationType:"calculated"},{sourceField:"description",targetField:"description",value:"Payment for Order ORD-2024-001",confidence:.85,transformationType:"direct"}],c={id:"txn_stripe_ch_1234567890",source:"stripe",sourceId:"ch_1234567890",date:"2024-12-31",description:"Payment for Order ORD-2024-001",customer:{name:"John Doe",email:"john.doe@email.com",id:"cus_abc123"},amount:108.25,currency:"USD",lineItems:[{description:"Product Sale",quantity:1,unitPrice:100,totalPrice:100,accountCode:"4001"}],taxes:[{name:"Sales Tax",rate:.0825,amount:8.25,accountCode:"2301"}],fees:[{name:"Stripe Processing Fee",amount:3.14,accountCode:"5403"}],paymentMethod:"card",status:"completed",metadata:{order_id:"ORD-2024-001",invoice_id:"INV-2024-001",card_brand:"visa",card_last4:"4242"}},S=[{accountCode:"1003",accountName:"Cash - Credit Card",accountType:"Asset",debitAmount:105.11,creditAmount:0,description:"Net payment received (108.25 - 3.14 fee)"},{accountCode:"5403",accountName:"CC Processing Fees",accountType:"Expense",debitAmount:3.14,creditAmount:0,description:"Stripe processing fee"},{accountCode:"4001",accountName:"Sales Revenue",accountType:"Revenue",debitAmount:0,creditAmount:100,description:"Product sale revenue"},{accountCode:"2301",accountName:"Sales Tax Payable",accountType:"Liability",debitAmount:0,creditAmount:8.25,description:"Sales tax collected"}],w={id:"je_stripe_001",date:"2024-12-31",description:"Stripe payment received - Order ORD-2024-001",reference:"ch_1234567890",entries:S,isBalanced:!0,totalDebits:108.25,totalCredits:108.25},f=[{accountCode:"1003",accountName:"1003 Cash-CC",debit:105.11,credit:null},{accountCode:"5403",accountName:"5403 CC Fees",debit:3.14,credit:null},{accountCode:"4001",accountName:"4001 Revenue",debit:null,credit:100},{accountCode:"2301",accountName:"2301 Sales Tax",debit:null,credit:8.25}],p={lines:f,totalDebits:108.25,totalCredits:108.25,isBalanced:!0,formattedOutput:Qe(f,108.25,108.25)};return{source:"stripe",name:"Stripe Credit Card Payment",description:"A typical Stripe credit card charge with processing fees and sales tax",rawInput:e,fieldMappings:a,standardTransaction:c,accountMappings:S,journalEntry:w,entryBook:p}}function pn(){const e={id:5678901234,order_number:1025,name:"#1025",email:"jane.smith@email.com",created_at:"2024-12-31T10:30:00-05:00",updated_at:"2024-12-31T10:35:00-05:00",financial_status:"paid",fulfillment_status:"fulfilled",currency:"USD",total_price:"275.94",subtotal_price:"239.97",total_tax:"20.22",total_discounts:"0.00",total_shipping_price_set:{shop_money:{amount:"15.75",currency_code:"USD"}},customer:{id:789456123,email:"jane.smith@email.com",first_name:"Jane",last_name:"Smith",phone:"+1-555-123-4567"},billing_address:{first_name:"Jane",last_name:"Smith",address1:"123 Main Street",city:"Miami",province:"Florida",country:"United States",zip:"33101"},shipping_address:{first_name:"Jane",last_name:"Smith",address1:"123 Main Street",city:"Miami",province:"Florida",country:"United States",zip:"33101"},line_items:[{id:111222333,title:"Premium Widget",variant_title:"Large / Blue",quantity:2,price:"79.99",sku:"WIDGET-LG-BLU",product_id:444555666,taxable:!0,tax_lines:[{title:"FL State Tax",price:"11.20",rate:.07},{title:"Miami-Dade County",price:"1.60",rate:.01}]},{id:222333444,title:"Basic Gadget",variant_title:"Standard",quantity:1,price:"79.99",sku:"GADGET-STD",product_id:555666777,taxable:!0,tax_lines:[{title:"FL State Tax",price:"5.60",rate:.07},{title:"Miami-Dade County",price:"0.80",rate:.01}]}],shipping_lines:[{id:333444555,title:"Standard Shipping",price:"15.75",code:"standard",carrier_identifier:"usps",tax_lines:[{title:"Shipping Tax",price:"1.02",rate:.065}]}],tax_lines:[{title:"FL State Tax",price:"16.80",rate:.07},{title:"Miami-Dade County",price:"2.40",rate:.01},{title:"Shipping Tax",price:"1.02",rate:.065}],payment_gateway_names:["shopify_payments"],processing_method:"direct",source_name:"web",tags:"VIP, Repeat Customer",note:"Please gift wrap",gateway:"shopify_payments",confirmed:!0},a=[{sourceField:"id",targetField:"sourceId",value:"5678901234",confidence:1,transformationType:"direct"},{sourceField:"name",targetField:"orderNumber",value:"#1025",confidence:1,transformationType:"direct"},{sourceField:"total_price",targetField:"amount",value:275.94,confidence:1,transformationType:"parsed"},{sourceField:"currency",targetField:"currency",value:"USD",confidence:1,transformationType:"direct"},{sourceField:"created_at",targetField:"date",value:"2024-12-31",confidence:1,transformationType:"parsed"},{sourceField:"customer.first_name + customer.last_name",targetField:"customer.name",value:"Jane Smith",confidence:.98,transformationType:"calculated"},{sourceField:"customer.email",targetField:"customer.email",value:"jane.smith@email.com",confidence:1,transformationType:"direct"},{sourceField:"subtotal_price",targetField:"subtotal",value:239.97,confidence:1,transformationType:"parsed"},{sourceField:"total_tax",targetField:"totalTax",value:20.22,confidence:1,transformationType:"parsed"},{sourceField:"total_shipping_price_set.shop_money.amount",targetField:"shipping.amount",value:15.75,confidence:.95,transformationType:"parsed"},{sourceField:"shipping_lines[0].title",targetField:"shipping.method",value:"Standard Shipping",confidence:.9,transformationType:"direct"},{sourceField:"financial_status",targetField:"status",value:"completed",confidence:1,transformationType:"lookup"},{sourceField:"payment_gateway_names[0]",targetField:"paymentMethod",value:"shopify_payments",confidence:.95,transformationType:"direct"},{sourceField:"line_items",targetField:"lineItems",value:2,confidence:1,transformationType:"calculated"}],c={id:"txn_shopify_5678901234",source:"shopify",sourceId:"5678901234",date:"2024-12-31",description:"Shopify Order #1025",customer:{name:"Jane Smith",email:"jane.smith@email.com",id:"789456123"},amount:275.94,currency:"USD",lineItems:[{description:"Premium Widget - Large / Blue",quantity:2,unitPrice:79.99,totalPrice:159.98,accountCode:"4001"},{description:"Basic Gadget - Standard",quantity:1,unitPrice:79.99,totalPrice:79.99,accountCode:"4001"}],taxes:[{name:"FL State Tax",rate:.07,amount:16.8,accountCode:"2301"},{name:"Miami-Dade County",rate:.01,amount:2.4,accountCode:"2301"},{name:"Shipping Tax",rate:.065,amount:1.02,accountCode:"2301"}],fees:[{name:"Shopify Processing Fee",amount:8.01,accountCode:"5403"}],shipping:{method:"Standard Shipping",carrier:"USPS",amount:15.75,accountCode:"4201"},paymentMethod:"shopify_payments",status:"completed",metadata:{order_number:"#1025",fulfillment_status:"fulfilled",tags:["VIP","Repeat Customer"],note:"Please gift wrap"}},S=[{accountCode:"1003",accountName:"Cash - Credit Card",accountType:"Asset",debitAmount:267.93,creditAmount:0,description:"Net payment received (275.94 - 8.01 processing fee)"},{accountCode:"5403",accountName:"CC Processing Fees",accountType:"Expense",debitAmount:8.01,creditAmount:0,description:"Shopify Payments processing fee"},{accountCode:"4001",accountName:"Sales Revenue - Products",accountType:"Revenue",debitAmount:0,creditAmount:239.97,description:"Product sales (Premium Widget x2, Basic Gadget x1)"},{accountCode:"4201",accountName:"Transport Service Revenue",accountType:"Revenue",debitAmount:0,creditAmount:15.75,description:"Standard Shipping charge"},{accountCode:"2301",accountName:"Sales Tax Payable",accountType:"Liability",debitAmount:0,creditAmount:20.22,description:"Sales tax collected (FL State + Miami-Dade + Shipping)"}],w={id:"je_shopify_001",date:"2024-12-31",description:"Shopify Order #1025 - Jane Smith",reference:"5678901234",entries:S,isBalanced:!0,totalDebits:275.94,totalCredits:275.94},f=[{accountCode:"1003",accountName:"1003 Cash-CC",debit:267.93,credit:null},{accountCode:"5403",accountName:"5403 CC Fees",debit:8.01,credit:null},{accountCode:"4001",accountName:"4001 Product Rev",debit:null,credit:239.97},{accountCode:"4201",accountName:"4201 Shipping Rev",debit:null,credit:15.75},{accountCode:"2301",accountName:"2301 Sales Tax",debit:null,credit:20.22}],p={lines:f,totalDebits:275.94,totalCredits:275.94,isBalanced:!0,formattedOutput:Qe(f,275.94,275.94)};return{source:"shopify",name:"Shopify E-commerce Order",description:"A typical Shopify order with multiple line items, shipping, and multi-jurisdictional taxes",rawInput:e,fieldMappings:a,standardTransaction:c,accountMappings:S,journalEntry:w,entryBook:p}}function mn(){const e={shipment_id:"YABA-2024-78945",tracking_number:"YX789456123US",created_date:"2024-12-31T14:00:00Z",status:"delivered",origin:{country:"USA",city:"Miami",state:"FL",postal_code:"33166",warehouse_id:"MIA-01"},destination:{country:"Cuba",city:"Havana",province:"La Habana",address:"Calle 23 #456, Vedado"},sender:{id:"SND-456789",name:"Carlos Martinez",phone:"+1-786-555-0123",email:"carlos.martinez@email.com"},recipient:{name:"Maria Garcia",phone:"+53-5-555-1234",ci:"85062512345"},package:{weight_lbs:45.5,dimensions:{length_in:24,width_in:18,height_in:16},volumetric_weight_lbs:41.47,chargeable_weight_lbs:45.5,package_type:"box",contents:"Household items, electronics, clothing"},charges:{freight_per_lb:4.5,freight_total:204.75,customs_fee:35,handling_fee:15,insurance:25,fuel_surcharge:18.5,subtotal:298.25,discount:0,tax:0,total:298.25},payment:{method:"zelle",status:"paid",paid_at:"2024-12-31T14:15:00Z",reference:"ZEL-2024-789456"},customs:{declaration_number:"CU-DEC-2024-123456",declared_value:850,currency:"USD",category:"personal_effects",items:[{description:"Laptop Computer",quantity:1,value:500},{description:"Clothing",quantity:10,value:200},{description:"Kitchen Appliances",quantity:3,value:150}]},timeline:{created:"2024-12-31T14:00:00Z",paid:"2024-12-31T14:15:00Z",received_warehouse:"2024-12-31T16:00:00Z",shipped:"2025-01-02T08:00:00Z",in_transit:"2025-01-02T10:00:00Z",customs_cleared:"2025-01-03T12:00:00Z",out_for_delivery:"2025-01-04T08:00:00Z",delivered:"2025-01-04T14:30:00Z"}},a=[{sourceField:"shipment_id",targetField:"sourceId",value:"YABA-2024-78945",confidence:1,transformationType:"direct"},{sourceField:"tracking_number",targetField:"trackingNumber",value:"YX789456123US",confidence:1,transformationType:"direct"},{sourceField:"created_date",targetField:"date",value:"2024-12-31",confidence:1,transformationType:"parsed"},{sourceField:"sender.name",targetField:"customer.name",value:"Carlos Martinez",confidence:1,transformationType:"direct"},{sourceField:"sender.email",targetField:"customer.email",value:"carlos.martinez@email.com",confidence:.95,transformationType:"direct"},{sourceField:"charges.total",targetField:"amount",value:298.25,confidence:1,transformationType:"direct"},{sourceField:"charges.freight_total",targetField:"lineItems.freight",value:204.75,confidence:1,transformationType:"direct"},{sourceField:"charges.customs_fee",targetField:"fees.customs",value:35,confidence:1,transformationType:"direct"},{sourceField:"charges.handling_fee",targetField:"fees.handling",value:15,confidence:.95,transformationType:"direct"},{sourceField:"charges.insurance",targetField:"fees.insurance",value:25,confidence:1,transformationType:"direct"},{sourceField:"charges.fuel_surcharge",targetField:"fees.fuelSurcharge",value:18.5,confidence:1,transformationType:"direct"},{sourceField:"payment.method",targetField:"paymentMethod",value:"zelle",confidence:1,transformationType:"direct"},{sourceField:"status",targetField:"status",value:"completed",confidence:1,transformationType:"lookup"},{sourceField:"package.chargeable_weight_lbs",targetField:"weight",value:45.5,confidence:1,transformationType:"direct"},{sourceField:"destination.country",targetField:"destination",value:"Cuba",confidence:.9,transformationType:"direct"}],c={id:"txn_yaba_78945",source:"yabaexpress",sourceId:"YABA-2024-78945",date:"2024-12-31",description:"YabaExpress Shipment to Cuba - 45.5 lbs",customer:{name:"Carlos Martinez",email:"carlos.martinez@email.com",id:"SND-456789"},amount:298.25,currency:"USD",lineItems:[{description:"Freight Service (45.5 lbs @ $4.50/lb)",quantity:45.5,unitPrice:4.5,totalPrice:204.75,accountCode:"4202"},{description:"Handling Service",quantity:1,unitPrice:15,totalPrice:15,accountCode:"4301"},{description:"Fuel Surcharge",quantity:1,unitPrice:18.5,totalPrice:18.5,accountCode:"4202"}],taxes:[],fees:[{name:"Customs Fee (Pass-through)",amount:35,accountCode:"1401"},{name:"Transit Insurance",amount:25,accountCode:"1402"}],shipping:{method:"Air Freight",carrier:"YabaExpress",trackingNumber:"YX789456123US",amount:204.75,accountCode:"4202"},paymentMethod:"zelle",status:"completed",metadata:{tracking_number:"YX789456123US",weight_lbs:45.5,destination:"Havana, Cuba",recipient:"Maria Garcia",declared_value:850,customs_declaration:"CU-DEC-2024-123456"}},S=[{accountCode:"1002",accountName:"Cash - Zelle Account",accountType:"Asset",debitAmount:298.25,creditAmount:0,description:"Zelle payment received for shipment"},{accountCode:"4202",accountName:"Freight Revenue - Air",accountType:"Revenue",debitAmount:0,creditAmount:223.25,description:"Air freight service (204.75 + 18.50 fuel surcharge)"},{accountCode:"4301",accountName:"Processing Revenue - Handling",accountType:"Revenue",debitAmount:0,creditAmount:15,description:"Package handling service"},{accountCode:"1401",accountName:"Customs Fees Receivable",accountType:"Asset",debitAmount:35,creditAmount:0,description:"Customs fee collected (pass-through to authorities)"},{accountCode:"2302",accountName:"Customs Fees Payable",accountType:"Liability",debitAmount:0,creditAmount:35,description:"Customs fee to be remitted to authorities"},{accountCode:"1402",accountName:"Transit Insurance Receivable",accountType:"Asset",debitAmount:25,creditAmount:0,description:"Insurance premium collected (pass-through)"},{accountCode:"2303",accountName:"Transit Insurance Payable",accountType:"Liability",debitAmount:0,creditAmount:25,description:"Insurance premium to be paid to insurer"}],w={id:"je_yaba_001",date:"2024-12-31",description:"YabaExpress Shipment YABA-2024-78945 - Carlos Martinez to Cuba",reference:"YABA-2024-78945",entries:S,isBalanced:!0,totalDebits:358.25,totalCredits:358.25},f=[{accountCode:"1002",accountName:"1002 Cash-Zelle",debit:298.25,credit:null},{accountCode:"1401",accountName:"1401 Customs Recv",debit:35,credit:null},{accountCode:"1402",accountName:"1402 Insurance Recv",debit:25,credit:null},{accountCode:"4202",accountName:"4202 Air Freight",debit:null,credit:223.25},{accountCode:"4301",accountName:"4301 Handling Rev",debit:null,credit:15},{accountCode:"2302",accountName:"2302 Customs Pay",debit:null,credit:35},{accountCode:"2303",accountName:"2303 Insurance Pay",debit:null,credit:25}],p={lines:f,totalDebits:358.25,totalCredits:358.25,isBalanced:!0,formattedOutput:Qe(f,358.25,358.25)};return{source:"yabaexpress",name:"YabaExpress International Shipment",description:"A freight/customs shipment with pass-through fees for customs and insurance",rawInput:e,fieldMappings:a,standardTransaction:c,accountMappings:S,journalEntry:w,entryBook:p}}function fn(){const e={entry_type:"cash_sale",date:"2024-12-31",description:"Walk-in customer cash payment",customer_name:"Walk-in Customer",amount:150,payment_method:"cash",category:"service",notes:"Passport photo service and document processing",items:[{description:"Passport Photos (4 pack)",quantity:2,price:25},{description:"Document Processing Fee",quantity:1,price:50},{description:"Express Service",quantity:1,price:50}],received_by:"Employee #123",register_id:"REG-001"},a=[{sourceField:"entry_type",targetField:"transactionType",value:"cash_sale",confidence:1,transformationType:"direct"},{sourceField:"date",targetField:"date",value:"2024-12-31",confidence:1,transformationType:"direct"},{sourceField:"description",targetField:"description",value:"Walk-in customer cash payment",confidence:.9,transformationType:"direct"},{sourceField:"customer_name",targetField:"customer.name",value:"Walk-in Customer",confidence:.8,transformationType:"direct"},{sourceField:"amount",targetField:"amount",value:150,confidence:1,transformationType:"direct"},{sourceField:"payment_method",targetField:"paymentMethod",value:"cash",confidence:1,transformationType:"direct"},{sourceField:"category",targetField:"category",value:"service",confidence:.85,transformationType:"direct"},{sourceField:"items",targetField:"lineItems",value:3,confidence:1,transformationType:"calculated"},{sourceField:"notes",targetField:"metadata.notes",value:"Passport photo service and document processing",confidence:.75,transformationType:"direct"}],c={id:"txn_manual_20241231_001",source:"manual",sourceId:"MANUAL-2024-12-31-001",date:"2024-12-31",description:"Walk-in customer cash payment",customer:{name:"Walk-in Customer"},amount:150,currency:"USD",lineItems:[{description:"Passport Photos (4 pack)",quantity:2,unitPrice:25,totalPrice:50,accountCode:"4101"},{description:"Document Processing Fee",quantity:1,unitPrice:50,totalPrice:50,accountCode:"4101"},{description:"Express Service",quantity:1,unitPrice:50,totalPrice:50,accountCode:"4101"}],taxes:[],fees:[],paymentMethod:"cash",status:"completed",metadata:{notes:"Passport photo service and document processing",received_by:"Employee #123",register_id:"REG-001",category:"service"}},S=[{accountCode:"1001",accountName:"Cash - Operating Account",accountType:"Asset",debitAmount:150,creditAmount:0,description:"Cash received from walk-in customer"},{accountCode:"4101",accountName:"Service Revenue - General",accountType:"Revenue",debitAmount:0,creditAmount:150,description:"Passport photo and document processing services"}],w={id:"je_manual_001",date:"2024-12-31",description:"Cash sale - Passport and document services",reference:"MANUAL-2024-12-31-001",entries:S,isBalanced:!0,totalDebits:150,totalCredits:150},f=[{accountCode:"1001",accountName:"1001 Cash-Operating",debit:150,credit:null},{accountCode:"4101",accountName:"4101 Service Rev",debit:null,credit:150}],p={lines:f,totalDebits:150,totalCredits:150,isBalanced:!0,formattedOutput:Qe(f,150,150)};return{source:"manual",name:"Manual Cash Entry",description:"A simple walk-in customer cash payment for services",rawInput:e,fieldMappings:a,standardTransaction:c,accountMappings:S,journalEntry:w,entryBook:p}}function yn(e){switch(e){case"stripe":return gn();case"shopify":return pn();case"yabaexpress":return mn();case"manual":return fn();default:throw new Error(`Unknown data source: ${e}`)}}async function zt(){try{const e=await Je({query:"getSupervisionAdapters",params:{businessId:Ge.getBusinessId()}});return e?.data||e||[]}catch(e){return console.error("Error getting supervision adapters:",e),[]}}async function Nt(e,a){try{const c=await Je({query:"testSupervisionAdapter",params:{businessId:Ge.getBusinessId()},form:{adapterId:e,samplePayload:a}});return c?.data||c||{success:!1,error:"Unknown error"}}catch(c){return console.error("Error testing supervision adapter:",c),{success:!1,error:c.message}}}async function vn(e){try{const a=await Je({query:"getSupervisionFieldMappings",params:{businessId:Ge.getBusinessId(),adapterId:e}});return a?.data||a||[]}catch(a){return console.error("Error getting field mappings:",a),[]}}async function bn(){try{const e=await Je({query:"getSupervisionAccountMappings",params:{businessId:Ge.getBusinessId()}});return e?.data||e||[]}catch(e){return console.error("Error getting account mappings:",e),[]}}async function hn(){try{const e=await Je({query:"getSupervisionDashboard",params:{businessId:Ge.getBusinessId()}});return e?.data||e||null}catch(e){return console.error("Error getting supervision dashboard:",e),null}}async function xn(){try{const e=await Je({query:"getSupervisionPendingSuggestions",params:{businessId:Ge.getBusinessId()}});return e?.data||e||[]}catch(e){return console.error("Error getting pending suggestions:",e),[]}}async function Sn(e,a){try{const S=(await zt()).find(f=>f.name?.toLowerCase().includes(e)||f.sourceType?.toLowerCase()===e);if(S){const f=await Nt(S.id,a);if(f.success&&f.result)return{success:!0,stages:Pn(e,a,f.result)}}const w=await Ze.learning.processSource(a,{autoCreateEntryBooks:!1,autoLearn:!0});return w.success?{success:!0,stages:kn(e,a,w)}:{success:!1,error:w.error||"Processing failed",stages:Tt(e,a)}}catch(c){return console.error("Error processing transaction:",c),{success:!1,error:c.message,stages:Tt(e,a)}}}async function Cn(e,a){try{const c=await Ze.learning.executeRules(e,a);return{success:c.success,entryBookId:c.entriesCreated>0?"created":void 0,error:c.errors?.join(", ")}}catch(c){return console.error("Error executing rules:",c),{success:!1,error:c.message}}}async function _n(e,a){try{return await Ze.learning.testRule(e,a)}catch(c){return console.error("Error testing rule:",c),{success:!1,error:c.message}}}async function $n(){try{return await Ze.learning.getAutomaticRules()}catch(e){return console.error("Error getting active rules:",e),[]}}async function wn(){try{return await Ze.learning.getStats()}catch(e){return console.error("Error getting learning stats:",e),null}}function Tt(e,a){return{stage1:{source:e,rawData:a,validationStatus:"pending"},stage2:{adapterName:`${e}Adapter`,fieldMappings:[],confidence:0,patterns:[],standardTransaction:null},stage3:{standardTransaction:null,invoice:null,accountAssignments:[],paymentAllocations:[]},stage4:{decisions:{id:"root",label:"No data",type:"question"},selectedPath:[],accountInfo:null},stage5:{rules:[],evaluatedRule:null,journalLines:[]},stage6:{entries:[],totals:{totalDebits:0,totalCredits:0},isBalanced:!0,metadata:{date:new Date().toISOString().split("T")[0],reference:"",documentNumber:"",status:"draft"}},stage7:{status:"failure",previousConfidence:0,newConfidence:0,metrics:{totalProcessed:0,successRate:0,averageConfidence:0}}}}function Pn(e,a,c){const{fieldMappings:S,standardTransaction:w,accountMappings:f,entryBook:p,confidence:j}=c;return{stage1:{source:e,rawData:a,validationStatus:"validated"},stage2:{adapterName:`${e}Adapter`,fieldMappings:S.map(u=>({sourceField:u.sourceField||u.source,targetField:u.targetField||u.target,value:u.value,confidence:u.confidence||.9,transformationType:u.transformationType||"direct"})),confidence:Math.round(j*100)||85,patterns:Bt(a),standardTransaction:w},stage3:{standardTransaction:w,invoice:Rt(a),accountAssignments:f.map(u=>({accountCode:u.accountCode||u.code,accountName:u.accountName||u.name,amount:u.debitAmount||u.creditAmount||u.amount||0,type:u.debitAmount>0?"debit":"credit"})),paymentAllocations:[{method:w?.paymentMethod||a.payment_method||"unknown",amount:w?.amount||a.amount||0}]},stage4:{decisions:Dt(),selectedPath:["root",e],accountInfo:f[0]?{code:f[0].accountCode||f[0].code||"",name:f[0].accountName||f[0].name||"",type:Et(f[0].accountCode||f[0].code),normalBalance:f[0].debitAmount>0?"debit":"credit"}:null},stage5:{rules:[{id:"supervision-rule",name:`${e.charAt(0).toUpperCase()+e.slice(1)} Processing Rule`,priority:1,isActive:!0,conditions:[{field:"source",operator:"equals",value:e,result:!0}]}],evaluatedRule:{id:"supervision-rule",name:`${e.charAt(0).toUpperCase()+e.slice(1)} Processing Rule`,priority:1,isActive:!0,conditions:[{field:"source",operator:"equals",value:e,result:!0}]},journalLines:p?.lines?.map(u=>({accountCode:u.accountCode||u.account?.code||"",accountName:u.accountName||u.account?.name||"",debit:u.debit||0,credit:u.credit||0,description:u.description||""}))||f.map(u=>({accountCode:u.accountCode||u.code||"",accountName:u.accountName||u.name||"",debit:u.debitAmount||0,credit:u.creditAmount||0,description:u.description||""}))},stage6:{entries:p?.lines?.map(u=>({accountCode:u.accountCode||u.account?.code||"",accountName:u.accountName||u.account?.name||"",debit:u.debit||0,credit:u.credit||0,description:u.description||""}))||f.map(u=>({accountCode:u.accountCode||u.code||"",accountName:u.accountName||u.name||"",debit:u.debitAmount||0,credit:u.creditAmount||0,description:u.description||""})),totals:{totalDebits:p?.totalDebit||f.reduce((u,U)=>u+(U.debitAmount||0),0),totalCredits:p?.totalCredit||f.reduce((u,U)=>u+(U.creditAmount||0),0)},isBalanced:p?.isBalanced??!0,metadata:{date:p?.date||w?.date||new Date().toISOString().split("T")[0],reference:p?.reference||w?.sourceId||a.id||"",documentNumber:p?.entryNumber||"",description:p?.description||w?.description||"",status:"posted"}},stage7:{status:"success",previousConfidence:85,newConfidence:Math.round(j*100)||90,metrics:{totalProcessed:1,successRate:100,averageConfidence:Math.round(j*100)||90},entryBookId:p?.id}}}function kn(e,a,c){const S=c.entryBook,w=c.fieldMappings||Tn(a),f=w.length>0?Math.round(w.reduce((p,j)=>p+(j.confidence||.8),0)/w.length*100):85;return{stage1:{source:e,rawData:a,validationStatus:"validated"},stage2:{adapterName:`${e}Adapter`,fieldMappings:w,confidence:f,patterns:Bt(a),standardTransaction:c.standardTransaction||At(a,e)},stage3:{standardTransaction:c.standardTransaction||At(a,e),invoice:c.invoice||Rt(a),accountAssignments:S?.lines?.map(p=>({accountCode:p.accountCode||p.account?.code||"",accountName:p.accountName||p.account?.name||"",amount:p.debit||p.credit||0,type:p.debit>0?"debit":"credit"}))||[],paymentAllocations:[{method:a.payment_method||"unknown",amount:a.amount||0}]},stage4:{decisions:Dt(),selectedPath:["root",e],accountInfo:S?.lines?.[0]?{code:S.lines[0].accountCode||"",name:S.lines[0].accountName||"",type:Et(S.lines[0].accountCode),normalBalance:S.lines[0].debit>0?"debit":"credit"}:null},stage5:{rules:c.matchedRules||[{id:"auto-rule",name:`${e} Auto Processing`,priority:1,isActive:!0,conditions:[{field:"source",operator:"equals",value:e,result:!0}]}],evaluatedRule:c.matchedRules?.[0]||null,journalLines:S?.lines?.map(p=>({accountCode:p.accountCode||"",accountName:p.accountName||"",debit:p.debit||0,credit:p.credit||0,description:p.description||""}))||[]},stage6:{entries:S?.lines?.map(p=>({accountCode:p.accountCode||"",accountName:p.accountName||"",debit:p.debit||0,credit:p.credit||0,description:p.description||""}))||[],totals:{totalDebits:S?.totalDebit||0,totalCredits:S?.totalCredit||0},isBalanced:Math.abs((S?.totalDebit||0)-(S?.totalCredit||0))<.01,metadata:{date:S?.date||new Date().toISOString().split("T")[0],reference:S?.reference||a.id||"",documentNumber:S?.entryNumber||"",description:S?.description||"",status:"posted"}},stage7:{status:"success",previousConfidence:c.previousConfidence||85,newConfidence:c.newConfidence||f,metrics:{totalProcessed:c.totalProcessed||1,successRate:c.successRate||100,averageConfidence:f},entryBookId:S?.id}}}function Tn(e){const a=[],c={id:"sourceId",amount:"amount",total:"amount",total_price:"amount",date:"date",created_at:"date",created:"date",customer_name:"customer.name",customer:"customer",description:"description",currency:"currency",payment_method:"paymentMethod",status:"status"};for(const[S,w]of Object.entries(e)){const f=c[S];f&&a.push({sourceField:S,targetField:f,value:w,confidence:.9,transformationType:"direct"})}return a}function Bt(e){const a=JSON.stringify(e);return[{type:"currency",label:"Currency",found:/usd|eur|currency|amount/i.test(a),count:(a.match(/usd|eur/gi)||[]).length},{type:"date",label:"Date",found:/date|created|timestamp/i.test(a),count:(a.match(/date|created/gi)||[]).length},{type:"reference",label:"Reference",found:/id|reference|number/i.test(a),count:(a.match(/id|reference/gi)||[]).length},{type:"email",label:"Email",found:/@/.test(a)}]}function At(e,a){return{id:`txn_${a}_${e.id||Date.now()}`,source:a,sourceId:e.id||"",date:e.date||e.created_at||new Date().toISOString().split("T")[0],description:e.description||`${a} transaction`,customer:{name:e.customer_name||e.customer||"Unknown"},amount:e.amount||e.total||0,currency:e.currency||"USD",paymentMethod:e.payment_method||"unknown",status:"completed",metadata:e}}function Rt(e){return{id:`INV-${e.id||Date.now()}`,invoiceNumber:e.id||"",date:e.date||new Date().toISOString().split("T")[0],customer:{name:e.customer_name||"Unknown"},lineItems:e.items||[],subtotal:e.amount||0,total:e.amount||0,status:"paid"}}function Dt(e){return{id:"root",label:"Transaction Source?",type:"question",children:[{id:"stripe",label:"Stripe",type:"account",accountCode:"1003",accountType:"Asset"},{id:"shopify",label:"Shopify",type:"account",accountCode:"1003",accountType:"Asset"},{id:"yabaexpress",label:"YabaExpress",type:"account",accountCode:"1002",accountType:"Asset"},{id:"manual",label:"Manual",type:"account",accountCode:"1001",accountType:"Asset"}]}}function Et(e){if(!e)return"Asset";const a=parseInt(e);return a>=1e3&&a<2e3?"Asset":a>=2e3&&a<3e3?"Liability":a>=3e3&&a<4e3?"Equity":a>=4e3&&a<5e3?"Revenue":"Expense"}const Ft={processTransaction:Sn,executeAndCreateEntryBook:Cn,testRule:_n,getActiveRules:$n,getLearningStats:wn,getSupervisionAdapters:zt,testSupervisionAdapter:Nt,getSupervisionFieldMappings:vn,getSupervisionAccountMappings:bn,getSupervisionDashboard:hn,getSupervisionPendingSuggestions:xn};var An=h('<button title="Create the entry book in the system">üìö Create Entry Book'),Fn=h('<div><div></div><div><div><button></button><button title=Reset>‚Ü∫</button><div></div><div></div><button title="Process data through real API"></button><div><span></span></div></div><div><div><div></div></div><span>Stage <!> of 7</span></div><div><span><span>Space</span> Play/Pause</span><span><span>‚Üê</span><span>‚Üí</span> Navigate</span></div></div><div><div>'),Mn=h("<button>x");const Ue=7,In=3e3,zn=e=>{const[a,c]=Ce(1),[S,w]=Ce([]),[f,p]=Ce(!1),[j,u]=Ce(1),[U,V]=Ce("visible"),[q,te]=Ce(e.initialSource||"stripe"),[P,Y]=Ce("sample"),[pe,ye]=Ce(!1),[Z,J]=Ce(null),[K,W]=Ce(null),[O,y]=Ce(null);let x;const l=ge(()=>yn(q())),o=ge(()=>q()==="manual"&&O()?O():l().rawInput),z=i=>{te(i),y(null),J(null),W(null),Y("sample"),c(1),w([])},C=i=>{y(i),J(null),W(null)},A=async()=>{ye(!0),W(null),Y("api");try{const i=await Ft.processTransaction(q(),o());i.success?(J(i),c(1),w([])):(W(i.error||"Processing failed"),Y("sample"))}catch(i){W(i.message),Y("sample")}finally{ye(!1)}},re=async()=>{ye(!0);try{const i=await Ft.executeAndCreateEntryBook("invoice_completed",o());i.success?alert("Entry book created successfully!"):alert("Failed to create entry book: "+i.error)}catch(i){alert("Error: "+i.message)}finally{ye(!1)}},s=()=>{a()>=Ue&&S().length===Ue&&F(),p(!0)},v=()=>{p(!1)},F=()=>{p(!1),c(1),w([]),V("visible")},k=i=>{i<1||i>Ue||(V("exiting"),setTimeout(()=>{c(i);const r=Array.from({length:i-1},(b,T)=>T+1);w(r),V("entering"),setTimeout(()=>V("visible"),50)},200))},G=()=>{a()<Ue?(V("exiting"),setTimeout(()=>{w(i=>[...i,a()]),c(i=>i+1),V("entering"),setTimeout(()=>V("visible"),50)},200)):(w(i=>[...i,Ue]),p(!1))},X=()=>{a()>1&&k(a()-1)};Mt(()=>{if(x&&(clearInterval(x),x=void 0),f()){const i=In/j();x=window.setInterval(()=>{G()},i)}});const H=i=>{switch(i.code){case"Space":i.preventDefault(),f()?v():s();break;case"ArrowRight":i.preventDefault(),v(),G();break;case"ArrowLeft":i.preventDefault(),v(),X();break;case"KeyR":(i.ctrlKey||i.metaKey)&&(i.preventDefault(),F());break}};ct(()=>{window.addEventListener("keydown",H)}),It(()=>{window.removeEventListener("keydown",H),x&&clearInterval(x)});const N={display:"grid","grid-template-columns":"280px 1fr","grid-template-rows":"auto 1fr",height:"100vh",background:"#f8fafc","font-family":"system-ui, -apple-system, sans-serif"},le={"grid-row":"1 / -1","grid-column":"1","overflow-y":"auto"},se={"grid-column":"2","grid-row":"1",display:"flex","align-items":"center","justify-content":"space-between",padding:"16px 24px",background:"white","border-bottom":"1px solid #e2e8f0","box-shadow":"0 1px 3px rgba(0, 0, 0, 0.05)"},me={display:"flex","align-items":"center",gap:"12px"},ne=(i=!1)=>({display:"flex","align-items":"center","justify-content":"center",width:"40px",height:"40px","border-radius":"10px",border:"none",background:i?"#3b82f6":"#f1f5f9",color:i?"white":"#475569","font-size":"18px",cursor:"pointer",transition:"all 0.2s ease"}),$=i=>({padding:"6px 12px","border-radius":"6px",border:"none",background:i?"#3b82f6":"transparent",color:i?"white":"#64748b","font-size":"13px","font-weight":"600",cursor:"pointer",transition:"all 0.2s ease"}),D={display:"flex","align-items":"center",gap:"4px",background:"#f1f5f9",padding:"4px","border-radius":"8px"},Q={display:"flex","align-items":"center",gap:"12px"},be={width:"200px",height:"6px",background:"#e2e8f0","border-radius":"3px",overflow:"hidden"},_e=()=>({height:"100%",background:"linear-gradient(90deg, #3b82f6 0%, #2563eb 100%)","border-radius":"3px",width:`${a()/Ue*100}%`,transition:"width 0.3s ease"}),Ae={"font-size":"13px","font-weight":"600",color:"#475569"},Me={"grid-column":"2","grid-row":"2",overflow:"auto",padding:"24px"},m=()=>({opacity:U()==="visible"?"1":"0",transform:U()==="exiting"?"translateX(-20px)":U()==="entering"?"translateX(20px)":"translateX(0)",transition:"all 0.2s ease-out"}),B={display:"flex","align-items":"center",gap:"16px","font-size":"12px",color:"#94a3b8"},ae={display:"inline-flex","align-items":"center","justify-content":"center","min-width":"24px",height:"24px",padding:"0 6px",background:"#f1f5f9","border-radius":"4px","font-size":"11px","font-weight":"600",color:"#475569",border:"1px solid #e2e8f0","margin-right":"4px"},fe=ge(()=>l().fieldMappings.map(r=>({sourceField:r.sourceField,transform:r.transformationType||"direct",targetField:r.targetField,confidence:Math.round(r.confidence*100)}))),Se=ge(()=>{const r=l().standardTransaction;return{id:r.id,timestamp:r.date,amount:r.amount,currency:r.currency,description:r.description,reference:r.sourceId,metadata:r.metadata}}),de=ge(()=>{const r=l().standardTransaction;return{id:`INV-${r.sourceId}`,invoiceNumber:r.sourceId,date:r.date,customer:r.customer,lineItems:r.lineItems.map((b,T)=>({id:`item-${T}`,description:b.description,quantity:b.quantity,unitPrice:b.unitPrice,total:b.totalPrice,accountCode:b.accountCode})),subtotal:r.lineItems.reduce((b,T)=>b+T.totalPrice,0),tax:r.taxes.reduce((b,T)=>b+T.amount,0),total:r.amount,payments:[{method:r.paymentMethod,amount:r.amount}],status:"paid"}}),we=ge(()=>({id:"root",label:"Transaction Type?",type:"question",children:[{id:"product",label:"Product Sale",type:"account",accountCode:"4001",accountType:"Revenue"},{id:"service",label:"Service",type:"account",accountCode:"4101",accountType:"Revenue"},{id:"payment",label:"Payment Method?",type:"question",children:[{id:"cash",label:"Cash",type:"account",accountCode:"1001",accountType:"Asset"},{id:"card",label:"Credit Card",type:"account",accountCode:"1003",accountType:"Asset"},{id:"zelle",label:"Zelle",type:"account",accountCode:"1002",accountType:"Asset"}]}]})),oe=ge(()=>{const r=l().accountMappings[0];return{code:r.accountCode,name:r.accountName,type:r.accountType,description:r.description,normalBalance:r.debitAmount>0?"debit":"credit"}}),he=ge(()=>{const i=l();return[{id:"rule-1",name:`${i.source.charAt(0).toUpperCase()+i.source.slice(1)} Payment Processing`,priority:1,isActive:!0,conditions:[{field:"source",operator:"equals",value:i.source,result:!0},{field:"status",operator:"equals",value:"completed",result:!0},{field:"amount",operator:"greater_than",value:0,result:!0}],description:`Process ${i.source} transactions`}]}),xe=ge(()=>l().accountMappings.map(r=>({accountCode:r.accountCode,accountName:r.accountName,debit:r.debitAmount,credit:r.creditAmount,description:r.description}))),Pe=ge(()=>l().entryBook.lines.map(r=>({accountCode:r.accountCode,accountName:r.accountName,debit:r.debit||0,credit:r.credit||0}))),d=ge(()=>{const i=l();return{date:i.journalEntry.date,reference:i.journalEntry.reference,documentNumber:i.journalEntry.id,description:i.journalEntry.description,status:"posted"}}),ce=()=>{const i=a(),r=l(),b=Z(),T=P()==="api"&&b?.success;switch(i){case 1:return _(ur,{get selectedSource(){return q()},get rawData(){return o()},onSourceChange:z,onManualDataChange:C,get validationStatus(){return ze(()=>!!pe())()?"pending":K()?"error":"validated"},get validationMessage(){return K()||void 0}});case 2:if(T&&b.stages.stage2){const g=b.stages.stage2;return _(bt,{get sourceType(){return q()},get mappings(){return g.fieldMappings.map(E=>({sourceField:E.sourceField,transform:E.transformationType||"direct",targetField:E.targetField,confidence:Math.round((E.confidence||.9)*100)}))},get confidence(){return g.confidence},get standardTransaction(){return g.standardTransaction},get patterns(){return g.patterns}})}return _(bt,{get sourceType(){return q()},get mappings(){return fe()},get confidence(){return Math.round(r.fieldMappings.reduce((g,E)=>g+E.confidence,0)/r.fieldMappings.length*100)},get standardTransaction(){return Se()},get patterns(){return[{type:"currency",label:"Currency",found:!0,count:1},{type:"date",label:"Date",found:!0,count:1},{type:"reference",label:"Reference",found:!0,count:2},{type:"email",label:"Email",found:!!r.standardTransaction.customer.email}]}});case 3:if(T&&b.stages.stage3){const g=b.stages.stage3;return _(Ct,{get standardTransaction(){return g.standardTransaction},get invoice(){return g.invoice},get accountAssignments(){return g.accountAssignments},get paymentAllocations(){return g.paymentAllocations}})}return _(Ct,{get standardTransaction(){return Se()},get invoice(){return de()},get accountAssignments(){return r.accountMappings.map(g=>({accountCode:g.accountCode,accountName:g.accountName,amount:g.debitAmount||g.creditAmount,type:g.debitAmount>0?"debit":"credit"}))},get paymentAllocations(){return[{method:r.standardTransaction.paymentMethod,amount:r.standardTransaction.amount}]}});case 4:if(T&&b.stages.stage4){const g=b.stages.stage4;return _($t,{get decisions(){return g.decisions},get selectedPath(){return g.selectedPath},get accountInfo(){return g.accountInfo}})}return _($t,{get decisions(){return we()},get selectedPath(){return["root",r.standardTransaction.paymentMethod==="cash"?"cash":r.standardTransaction.paymentMethod==="zelle"?"zelle":"card"]},get accountInfo(){return oe()}});case 5:if(T&&b.stages.stage5){const g=b.stages.stage5;return _(wt,{get rules(){return g.rules},get evaluatedRule(){return g.evaluatedRule},get conditions(){return g.evaluatedRule?.conditions||[]},get journalLines(){return g.journalLines}})}return _(wt,{get rules(){return he()},get evaluatedRule(){return he()[0]},get conditions(){return he()[0].conditions},get journalLines(){return xe()}});case 6:if(T&&b.stages.stage6){const g=b.stages.stage6;return _(Pt,{get entries(){return g.entries},get totals(){return g.totals},get isBalanced(){return g.isBalanced},get metadata(){return g.metadata}})}return _(Pt,{get entries(){return Pe()},get totals(){return{totalDebits:r.entryBook.totalDebits,totalCredits:r.entryBook.totalCredits}},get isBalanced(){return r.entryBook.isBalanced},get metadata(){return d()}});case 7:if(T&&b.stages.stage7){const g=b.stages.stage7;return _(kt,{get status(){return g.status},get previousConfidence(){return g.previousConfidence},get newConfidence(){return g.newConfidence},get metrics(){return g.metrics}})}return _(kt,{status:"success",previousConfidence:85,get newConfidence(){return Math.round(r.fieldMappings.reduce((g,E)=>g+E.confidence,0)/r.fieldMappings.length*100)},get metrics(){return{totalProcessed:1247,successRate:98.5,averageConfidence:Math.round(r.fieldMappings.reduce((g,E)=>g+E.confidence,0)/r.fieldMappings.length*100)}}});default:return null}};return(()=>{var i=Fn(),r=i.firstChild,b=r.nextSibling,T=b.firstChild,g=T.firstChild,E=g.nextSibling,L=E.nextSibling,ue=L.nextSibling,I=ue.nextSibling,ie=I.nextSibling,$e=ie.firstChild,Fe=T.nextSibling,Ie=Fe.firstChild,Ne=Ie.firstChild,ve=Ie.nextSibling,Be=ve.firstChild,Le=Be.nextSibling;Le.nextSibling;var je=Fe.nextSibling,Oe=je.firstChild,Re=Oe.firstChild,tt=Oe.nextSibling,Ke=tt.firstChild,Ht=Ke.nextSibling,ft=b.nextSibling,yt=ft.firstChild;return t(i,N),t(r,le),n(r,_(tr,{get currentStage(){return a()},get completedStages(){return S()},onStageClick:k})),t(b,se),t(T,me),g.$$click=()=>f()?v():s(),n(g,()=>f()?"‚è∏":"‚ñ∂"),E.$$click=F,t(L,D),n(L,()=>[.5,1,2].map(M=>(()=>{var De=Mn(),We=De.firstChild;return De.$$click=()=>u(M),n(De,M,We),R(rt=>t(De,$(j()===M),rt)),De})())),ue.style.setProperty("width","1px"),ue.style.setProperty("height","24px"),ue.style.setProperty("background","#e2e8f0"),ue.style.setProperty("margin","0 8px"),I.$$click=A,I.style.setProperty("display","flex"),I.style.setProperty("align-items","center"),I.style.setProperty("gap","6px"),I.style.setProperty("padding","8px 16px"),I.style.setProperty("border-radius","8px"),I.style.setProperty("border","none"),I.style.setProperty("color","white"),I.style.setProperty("font-size","13px"),I.style.setProperty("font-weight","600"),I.style.setProperty("transition","all 0.2s ease"),n(I,(()=>{var M=ze(()=>!!pe());return()=>M()?"‚è≥ Processing...":P()==="api"?"‚úì API Active":"üöÄ Process with API"})()),n(T,_(ee,{get when(){return ze(()=>P()==="api")()&&Z()},get children(){var M=An();return M.$$click=re,M.style.setProperty("display","flex"),M.style.setProperty("align-items","center"),M.style.setProperty("gap","6px"),M.style.setProperty("padding","8px 16px"),M.style.setProperty("border-radius","8px"),M.style.setProperty("border","2px solid #10b981"),M.style.setProperty("background","white"),M.style.setProperty("color","#10b981"),M.style.setProperty("font-size","13px"),M.style.setProperty("font-weight","600"),M.style.setProperty("cursor","pointer"),M.style.setProperty("transition","all 0.2s ease"),R(()=>M.disabled=pe()),M}}),ie),ie.style.setProperty("display","flex"),ie.style.setProperty("align-items","center"),ie.style.setProperty("gap","4px"),ie.style.setProperty("padding","4px 10px"),ie.style.setProperty("border-radius","12px"),ie.style.setProperty("font-size","11px"),ie.style.setProperty("font-weight","500"),$e.style.setProperty("width","6px"),$e.style.setProperty("height","6px"),$e.style.setProperty("border-radius","50%"),n(ie,()=>P()==="api"?"Live API":"Sample Data",null),t(Fe,Q),t(Ie,be),t(ve,Ae),n(ve,a,Le),t(je,B),t(ft,Me),n(yt,ce),R(M=>{var De=ne(f()),We=f()?"Pause":"Play",rt=ne(),nt=pe()?"#94a3b8":P()==="api"?"#10b981":"#3b82f6",at=pe()?"wait":"pointer",vt=pe(),it=P()==="api"?"rgba(16, 185, 129, 0.1)":"rgba(107, 114, 128, 0.1)",ot=P()==="api"?"#10b981":"#6b7280",st=P()==="api"?"#10b981":"#6b7280",Vt=_e(),Yt=ae,Zt=ae,Kt=ae,Wt=m();return M.e=t(g,De,M.e),We!==M.t&&ke(g,"title",M.t=We),M.a=t(E,rt,M.a),nt!==M.o&&((M.o=nt)!=null?I.style.setProperty("background",nt):I.style.removeProperty("background")),at!==M.i&&((M.i=at)!=null?I.style.setProperty("cursor",at):I.style.removeProperty("cursor")),vt!==M.n&&(I.disabled=M.n=vt),it!==M.s&&((M.s=it)!=null?ie.style.setProperty("background",it):ie.style.removeProperty("background")),ot!==M.h&&((M.h=ot)!=null?ie.style.setProperty("color",ot):ie.style.removeProperty("color")),st!==M.r&&((M.r=st)!=null?$e.style.setProperty("background",st):$e.style.removeProperty("background")),M.d=t(Ne,Vt,M.d),M.l=t(Re,Yt,M.l),M.u=t(Ke,Zt,M.u),M.c=t(Ht,Kt,M.c),M.w=t(yt,Wt,M.w),M},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0}),i})()};Xe(["click"]);const Nn={1:"Data Ingestion",2:"Adapter Transform",3:"Invoice Conversion",4:"Account Mapping",5:"Rules Engine",6:"Entry Book Generation",7:"Learning & Persistence"},Bn={1:"Raw JSON data from external sources",2:"Field mapping and pattern detection",3:"StandardTransaction to Invoice conversion",4:"Decision tree for GL account assignment",5:"Rule evaluation and condition matching",6:"Debit/Credit ledger entry generation",7:"Feedback metrics and learning updates"},[Ee,et]=Ce(1),[Ye,ut]=Ce([]),[Rn,Dn]=Ce("stripe"),[gt,Lt]=Ce(!1),[jt,En]=Ce(1),[Ot,Ut]=Ce({});let Ve=null;const Ln=e=>Ye().includes(e),jn=e=>Ee()===e,pt=()=>Ee()<7,qt=()=>Ee()>1,On=e=>{if(e>Ee()){const a=[...Ye()];for(let c=1;c<e;c++)a.includes(c)||a.push(c);ut(a)}et(e)},Jt=()=>{if(pt()){const e=Ee();Ye().includes(e)||ut([...Ye(),e]),et(e+1)}},Un=()=>{qt()&&et(Ee()-1)},mt=()=>{if(Ve)return;Lt(!0);const a=2e3/jt();Ve=setInterval(()=>{pt()?Jt():He()},a)},He=()=>{Lt(!1),Ve&&(clearInterval(Ve),Ve=null)},qn=()=>{gt()?He():mt()},Gt=()=>{He(),et(1),ut([]),Ut({})},Jn=e=>{He(),Dn(e),Gt()},Gn=e=>{const a=gt();a&&He(),En(e),a&&mt()},Hn=(e,a)=>{Ut(c=>({...c,[e]:a}))},Vn=e=>Ot()[e],qe={currentStage:Ee,completedStages:Ye,selectedSource:Rn,isPlaying:gt,playbackSpeed:jt,stageData:Ot,isStageCompleted:Ln,isCurrentStage:jn,canGoNext:pt,canGoPrev:qt,STAGE_NAMES:Nn,STAGE_DESCRIPTIONS:Bn,goToStage:On,nextStage:Jt,prevStage:Un,play:mt,pause:He,togglePlayback:qn,reset:Gt,changeSource:Jn,changeSpeed:Gn,updateStageData:Hn,getStageData:Vn};var Yn=h("<div><div><h1>üîÑ Accounting Engine Visualization</h1><p>Interactive visualization of the 7-stage transaction processing pipeline</p><div><span><kbd>Space</kbd>Play/Pause</span><span><kbd>‚Üê</kbd><kbd>‚Üí</kbd>Navigate</span><span><kbd>1-7</kbd>Jump to Stage</span><span><kbd>R</kbd>Reset");const Kn=()=>{const e=a=>{if(!(a.target instanceof HTMLInputElement||a.target instanceof HTMLTextAreaElement))switch(a.key){case" ":a.preventDefault(),qe.togglePlayback();break;case"ArrowRight":a.preventDefault(),qe.nextStage();break;case"ArrowLeft":a.preventDefault(),qe.prevStage();break;case"r":case"R":!a.ctrlKey&&!a.metaKey&&(a.preventDefault(),qe.reset());break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":!a.ctrlKey&&!a.metaKey&&(a.preventDefault(),qe.goToStage(parseInt(a.key)));break}};return ct(()=>{document.addEventListener("keydown",e)}),It(()=>{document.removeEventListener("keydown",e),qe.pause()}),(()=>{var a=Yn(),c=a.firstChild,S=c.firstChild,w=S.nextSibling,f=w.nextSibling,p=f.firstChild,j=p.firstChild,u=p.nextSibling,U=u.firstChild,V=U.nextSibling,q=u.nextSibling,te=q.firstChild,P=q.nextSibling,Y=P.firstChild;return a.style.setProperty("min-height","100vh"),a.style.setProperty("background","#f8fafc"),a.style.setProperty("padding","24px"),c.style.setProperty("margin-bottom","24px"),S.style.setProperty("font-size","28px"),S.style.setProperty("font-weight","700"),S.style.setProperty("color","#1e293b"),S.style.setProperty("margin","0 0 8px 0"),w.style.setProperty("color","#64748b"),w.style.setProperty("margin","0"),w.style.setProperty("font-size","14px"),f.style.setProperty("margin-top","12px"),f.style.setProperty("display","flex"),f.style.setProperty("gap","16px"),f.style.setProperty("flex-wrap","wrap"),p.style.setProperty("font-size","12px"),p.style.setProperty("color","#94a3b8"),p.style.setProperty("display","flex"),p.style.setProperty("align-items","center"),p.style.setProperty("gap","4px"),j.style.setProperty("background","#e2e8f0"),j.style.setProperty("padding","2px 6px"),j.style.setProperty("border-radius","4px"),j.style.setProperty("font-family","monospace"),j.style.setProperty("font-size","11px"),u.style.setProperty("font-size","12px"),u.style.setProperty("color","#94a3b8"),u.style.setProperty("display","flex"),u.style.setProperty("align-items","center"),u.style.setProperty("gap","4px"),U.style.setProperty("background","#e2e8f0"),U.style.setProperty("padding","2px 6px"),U.style.setProperty("border-radius","4px"),U.style.setProperty("font-family","monospace"),U.style.setProperty("font-size","11px"),V.style.setProperty("background","#e2e8f0"),V.style.setProperty("padding","2px 6px"),V.style.setProperty("border-radius","4px"),V.style.setProperty("font-family","monospace"),V.style.setProperty("font-size","11px"),q.style.setProperty("font-size","12px"),q.style.setProperty("color","#94a3b8"),q.style.setProperty("display","flex"),q.style.setProperty("align-items","center"),q.style.setProperty("gap","4px"),te.style.setProperty("background","#e2e8f0"),te.style.setProperty("padding","2px 6px"),te.style.setProperty("border-radius","4px"),te.style.setProperty("font-family","monospace"),te.style.setProperty("font-size","11px"),P.style.setProperty("font-size","12px"),P.style.setProperty("color","#94a3b8"),P.style.setProperty("display","flex"),P.style.setProperty("align-items","center"),P.style.setProperty("gap","4px"),Y.style.setProperty("background","#e2e8f0"),Y.style.setProperty("padding","2px 6px"),Y.style.setProperty("border-radius","4px"),Y.style.setProperty("font-family","monospace"),Y.style.setProperty("font-size","11px"),n(a,_(zn,{}),null),a})()};export{Kn as default};
