import{E as L}from"./index-jCBh6VHW.js";const U={es:{invoice:"FACTURA",invoiceNumber:"Número de Factura",date:"Fecha",customer:"Cliente",store:"Tienda",phone:"Teléfono",id:"Identificación",address:"Dirección",shippingMethod:"Método de Envío",aerial:"Aéreo",maritime:"Marítimo",products:"PRODUCTOS",services:"SERVICIOS Y RESERVAS",item:"Artículo",code:"Código",qty:"Cant.",price:"Precio",arancel:"Arancel",total:"Total",subtotal:"Subtotal",subtotalProducts:"Subtotal Productos",subtotalServices:"Subtotal Servicios",tax:"Impuesto",taxSavings:"Ahorro Impuesto",grandTotal:"TOTAL GENERAL",paymentMethods:"MÉTODOS DE PAGO",cash:"Efectivo",zelle:"Zelle",creditCard:"Tarjeta",totalPaid:"Total Pagado",taxExemption:"Exención por Efectivo",thankYou:"¡Gracias por su compra!",footer:"Esta factura es válida como comprobante de compra",originalTax:"Impuesto Original",finalTax:"Impuesto Final",cashBenefit:"Beneficio por Pago en Efectivo"},en:{invoice:"INVOICE",invoiceNumber:"Invoice Number",date:"Date",customer:"Customer",store:"Store",phone:"Phone",id:"ID",address:"Address",shippingMethod:"Shipping Method",aerial:"Air",maritime:"Sea",products:"PRODUCTS",services:"SERVICES & RESERVATIONS",item:"Item",code:"Code",qty:"Qty",price:"Price",arancel:"Tariff",total:"Total",subtotal:"Subtotal",subtotalProducts:"Products Subtotal",subtotalServices:"Services Subtotal",tax:"Tax",taxSavings:"Tax Savings",grandTotal:"GRAND TOTAL",paymentMethods:"PAYMENT METHODS",cash:"Cash",zelle:"Zelle",creditCard:"Credit Card",totalPaid:"Total Paid",taxExemption:"Cash Exemption",thankYou:"Thank you for your purchase!",footer:"This invoice is valid as proof of purchase",originalTax:"Original Tax",finalTax:"Final Tax",cashBenefit:"Cash Payment Benefit"}},Z=async(n,C="es",G="modern")=>{const i=U[C],c=new L("p","mm","a4"),m=c.internal.pageSize.getWidth(),P=c.internal.pageSize.getHeight(),r=8,a=m-r*2,E=P-15;let e=r;console.log({invoiceData:n});try{const p="#bcbcbc",_="#64748b",x="#10b981",H="#f59e0b",N="#bababa",d=t=>t?`$${parseFloat(t.toString())?.toFixed(2)}`:"-",q=t=>new Date(t).toLocaleDateString(C==="es"?"es-ES":"en-US"),g=t=>e+t>E?(c.addPage(),e=r,!0):!1,u=t=>t?" "+t:"",A=t=>u(t).trim(),y=t=>parseFloat(t?.toString())||0,w=t=>{let s=y(t.qty),l=y(t.price),f=y(t.arancel);return`${(s*l+f)?.toFixed(2)}`},B=t=>{let s=Math.abs(t.qty),l=y(t.salePrice);return`${(s*l)?.toFixed(2)}`},Y=()=>{let t=n?.shipper_consignee;return u(t?.fullName).trim()||u(t?.name).trim()},k=()=>{let t=n?.shipper_consignee;return`${u(t?.firstName)}${u(t?.middleName)}${u(t?.lastName)}${u(t?.lastName2)}`.trim()},F=()=>{let t=n?.shipper_consignee,s=`Calle ${t.ybstreet}${t.ybstreetNo?" # "+t.ybstreetNo:""}${t.ybbetwen1?" / "+t.ybbetwen1:""}${t.ybbetwen2?" y "+t.ybbetwen2:""}${t.ybreparto?", Rpto "+t.ybreparto:""}, ${t.ybcity?t.ybcity:""}, ${t.ybestate?t.ybestate:""}`;return u(t?.address)?u(t?.address):s},o=(t,s,l,f={})=>{c.setFontSize(f.fontSize||8),c.setTextColor(f.color||"#000000"),f.bold?c.setFont("helvetica","bold"):c.setFont("helvetica","normal"),f.align==="center"?c.text(t,s,l,{align:"center"}):f.align==="right"?c.text(t,s,l,{align:"right"}):c.text(t,s,l)},b=(t,s,l,f,z="#e2e8f0")=>{c.setDrawColor(z),c.line(t,s,l,f)},S=(t,s,l,f,z,R)=>{z&&(c.setFillColor(z),c.rect(t,s,l,f,"F")),R&&(c.setDrawColor(R),c.rect(t,s,l,f,"S"))};S(r,e,a,18,p),o(i.invoice,m/2,e+12,{fontSize:16,bold:!0,color:"#ffffff",align:"center"}),e+=6;const h=r+3,$=m-r-60;if(o(`${i.invoiceNumber}:`,h,e,{bold:!0,fontSize:8}),o(n.invoice,h+30,e,{fontSize:8}),o(`${i.date}:`,$,e,{bold:!0,fontSize:8}),o(q(n.createDate),$+20,e,{fontSize:8}),e+=6,o(`${i.store}:`,h,e,{bold:!0,fontSize:8}),o(A(n?.store),h+20,e,{fontSize:8}),n.shippingMethod){o(`${i.shippingMethod}:`,$,e,{bold:!0,fontSize:8});const t=A(n?.shippingMethod)==="aereo"?i.aerial:i.maritime;o(t,$+30,e,{fontSize:8})}e+=10,S(r,e,a,5,"#f8fafc"),o(`${i.customer.toUpperCase()}`,r+83,e+3,{bold:!0,fontSize:9}),e+=8;let V=[Y()];o(V.join(" • "),h,e,{bold:!0,fontSize:8}),e+=4;const I=[];n?.shipper_consignee?.phoneNumberS&&I.push(`${i.phone}: ${n?.shipper_consignee?.phoneNumberS}`),o(I.join(" • "),h,e,{bold:!1,fontSize:7}),e+=4,S(r,e,a,5,"#f8fafc"),o("DESTINATARIO",r+83,e+3,{bold:!0,fontSize:9}),e+=8;let j=[k()];o(j.join(" • "),h,e,{bold:!0,fontSize:8}),e+=4;const T=[];if(n?.shipper_consignee?.phoneNumber&&T.push(`${i.phone}: ${n?.shipper_consignee?.phoneNumber}`),n?.shipper_consignee?.cid&&T.push(`${i.id}: ${n?.shipper_consignee?.cid}`),T.length>0&&(o(T.join(" • "),h,e,{fontSize:7}),e+=4),F()&&(o(`${i.address}: ${F()}`,h,e,{fontSize:7}),e+=4),e+=6,n?.reservas?.length>0){g(25),S(r,e,a,5,N),o(i.services,r+3,e+3,{bold:!0,fontSize:9,color:"#ffffff"}),e+=8;const t=[r+2,r+50,r+75,r+105,r+140,r+170];o(i.item,t[0],e,{bold:!0,fontSize:7}),o(i.qty,t[1]+13,e,{bold:!0,fontSize:7,align:"center"}),o(i.price,t[2]+20,e,{bold:!0,fontSize:7,align:"right"}),o(i.arancel,t[3]+20,e,{bold:!0,fontSize:7,align:"right"}),o(i.total,t[4]+35,e,{bold:!0,fontSize:7,align:"right"}),e+=2,b(r,e,r+a,e),e+=3,n?.reservas?.forEach((s,l)=>{l>0&&l%8===0&&g(4);let f=w(s);o(s.type.substring(0,25),t[0],e,{fontSize:7}),o(s.qty.toString(),t[1]+13,e,{fontSize:7,align:"center"}),o(d(s?.price),t[2]+20,e,{fontSize:7,align:"right"}),o(d(s?.arancel),t[3]+25,e,{fontSize:7,align:"right"}),o(f,t[4]+35,e,{fontSize:7,align:"right"}),e+=4}),e+=2,b(r+75,e,r+a,e),e+=3,o(`${i.subtotalServices}:`,t[3]-5,e,{bold:!0,fontSize:7}),o(d(n?.reservaSubtotal),t[4]+35,e,{bold:!0,fontSize:7,align:"right"}),e+=6}if(n?.products?.length>0){g(30),S(r,e,a,5,p),o(i.products,r+3,e+3,{bold:!0,fontSize:9,color:"#ffffff"}),e+=8;const t=[r+2,r+70,r+90,r+115,r+150];o(i.item,t[0],e,{bold:!0,fontSize:7}),o(i.code,t[1],e,{bold:!0,fontSize:7}),o(i.qty,t[2]+8,e,{bold:!0,fontSize:7,align:"center"}),o(i.price,t[3]+20,e,{bold:!0,fontSize:7,align:"right"}),o(i.total,t[4]+25,e,{bold:!0,fontSize:7,align:"right"}),e+=2,b(r,e,r+a,e),e+=3,n?.products?.forEach((s,l)=>{l>0&&l%10===0&&g(4),o(s.product.label.substring(0,35),t[0],e,{fontSize:7}),o(s.product.code,t[1],e,{fontSize:7}),o(Math.abs(s.qty).toString(),t[2]+8,e,{fontSize:7,align:"center"}),o(d(s.salePrice),t[3]+20,e,{fontSize:7,align:"right"}),o(B(s),t[4]+25,e,{fontSize:7,align:"right"}),e+=4}),e+=2,b(r+90,e,r+a,e),e+=3,o(`${i.subtotalProducts}:`,t[3]-5,e,{bold:!0,fontSize:7}),o(d(n.productSubtotal),t[4]+25,e,{bold:!0,fontSize:7,align:"right"}),e+=6}const O=n?.paymentMethods?.cash+n?.paymentMethods?.zelle+n.paymentMethods?.creditCard;if(O>0){g(20),S(r,e,a,5,N),o(i.paymentMethods,r+3,e+3,{bold:!0,fontSize:9,color:"#ffffff"}),e+=8;const t=[];n.paymentMethods.cash>0&&t.push(`${i.cash}: ${d(n.paymentMethods.cash)}`),n.paymentMethods.zelle>0&&t.push(`${i.zelle}: ${d(n.paymentMethods.zelle)}`),n.paymentMethods.creditCard>0&&t.push(`${i.creditCard}: ${d(n.paymentMethods.creditCard)}`),t.forEach(s=>{o(s,r+3,e,{fontSize:8}),e+=4}),b(r,e,r+a,e),e+=3,o(`${i.totalPaid}:`,r+3,e,{bold:!0,fontSize:8}),o(d(O),r+a-3,e,{bold:!0,fontSize:8,align:"right"}),e+=6}if(g(25),S(r,e,a,20,"#fff","#e2e8f0"),e+=5,o(`${i.subtotal}:`,r+a-80,e,{fontSize:8}),o(d(n?.subtotalBeforeTax),r+a-3,e,{fontSize:8,align:"right"}),e+=4,n?.taxPercent>0){const t=n.taxOnTotal?"del total":"del subtotal";if(o(`${i.tax} (${n?.taxPercent}% ${t}):`,r+a-80,e,{fontSize:7}),o(d(n?.taxAmount),r+a-3,e,{fontSize:7,align:"right"}),e+=4,n?.exemptTaxOnCash&&n?.taxSavings&&n?.taxSavings>0){o(`${i.taxSavings}:`,r+a-80,e,{fontSize:7,color:x}),o(`-${d(n.taxSavings)}`,r+a-3,e,{fontSize:7,color:x,align:"right"}),e+=4;const s=n?.cashPaymentRatio?(n?.cashPaymentRatio*100).toFixed(1):"0";o(`${i.cashBenefit} (${s}%)`,r+3,e,{fontSize:6,color:x}),e+=4}}e+=2,b(r+a-80,e,r+a,e,p),e+=3,o(i.grandTotal,r+a-80,e,{fontSize:10,bold:!0,color:"#000"}),o(d(n?.total),r+a-3,e,{fontSize:10,bold:!0,color:"#000",align:"right"}),e+=8,e<E-15&&(e=Math.max(e+5,P-20),o(i.thankYou,m/2,e,{fontSize:9,bold:!0,color:p,align:"center"}),e+=4,o(i.footer,m/2,e,{fontSize:6,color:_,align:"center"}))}catch(p){console.log(p)}const M=`Factura_${n.invoice}_${Date.now()}.pdf`;return c.save(M),M};export{Z as generateEnhancedInvoicePDF};
