const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-dzriQ3Pt.js","assets/index-D90tUTGq.css"])))=>i.map(i=>d[i]);
import{aO as L}from"./index-dzriQ3Pt.js";const h={en:{transferReceipt:"TRANSFER RECEIPT",movementInvoice:"MOVEMENT INVOICE",movementId:"Movement ID",date:"Date",reference:"Reference",movementType:"Movement Type",createdBy:"Created By",fromLocation:"From Location",toLocation:"To Location",location:"Location",notes:"Notes",transferItems:"TRANSFER ITEMS",movementItems:"MOVEMENT ITEMS",sku:"SKU",productName:"Product Name",qty:"Qty",unitCost:"Unit Cost",total:"Total",received:"Received",totalValue:"TOTAL VALUE",receivingConfirmation:"RECEIVING CONFIRMATION",receiverName:"Receiver Name",dateReceived:"Date Received",signature:"Signature",footerTransfer:"Please verify all received quantities and sign above.",footerMovement:"Movement processed successfully.",movementTypes:{in:"IN",out:"OUT",transfer:"TRANSFER",adjustment:"ADJUSTMENT"}},es:{transferReceipt:"RECIBO DE TRANSFERENCIA",movementInvoice:"FACTURA DE MOVIMIENTO",movementId:"ID de Movimiento",date:"Fecha",reference:"Referencia",movementType:"Tipo de Movimiento",createdBy:"Creado Por",fromLocation:"Ubicación de Origen",toLocation:"Ubicación de Destino",location:"Ubicación",notes:"Notas",transferItems:"ARTÍCULOS DE TRANSFERENCIA",movementItems:"ARTÍCULOS DEL MOVIMIENTO",sku:"SKU",productName:"Nombre del Producto",qty:"Cant.",unitCost:"Costo Unit.",total:"Total",received:"Recibido",totalValue:"VALOR TOTAL",receivingConfirmation:"CONFIRMACIÓN DE RECEPCIÓN",receiverName:"Nombre del Receptor",dateReceived:"Fecha de Recepción",signature:"Firma",footerTransfer:"Por favor verifique todas las cantidades recibidas y firme arriba.",footerMovement:"Movimiento procesado exitosamente.",movementTypes:{in:"ENTRADA",out:"SALIDA",transfer:"TRANSFERENCIA",adjustment:"AJUSTE"}}},z=async(n,O,I="es")=>{try{console.log("Starting movement invoice PDF generation...");const _=h[I],E=(await L(()=>import("./index-dzriQ3Pt.js").then(c=>c.aU),__vite__mapDeps([0,1]))).default;console.log("jsPDF imported successfully");const t=new E;console.log("PDF document created");let e=20;const o=20,s=210;t.setFontSize(20),t.text("HRM FINANCE",o,e),t.setFontSize(16);const r=n.movementType==="transfer",f=r?_.transferReceipt:_.movementInvoice,R=t.getTextWidth(f);t.text(f,s-o-R,e),e+=15,t.setFontSize(12);const N=`${_.movementId}: ${n.invoiceId||n.id||"N/A"}`,A=t.getTextWidth(N);t.text(N,s-o-A,e),e+=8,t.setFontSize(10);const g=n.createDate||n.createdDate?new Date(n.createDate||n.createdDate).toLocaleDateString():"N/A",T=`${_.date}: ${g}`,p=t.getTextWidth(T);t.text(T,s-o-p,e),e=40,t.setFontSize(10),t.text(`${_.reference}: ${n.referenceNumber||"N/A"}`,o,e),e+=6;const S=_.movementTypes[n.movementType]||n.movementType?.toUpperCase()||"N/A";t.text(`${_.movementType}: ${S}`,o,e),e+=6,t.text(`${_.createdBy}: ${n.createdBy||"N/A"}`,o,e),e+=10,r?(t.text(`${_.fromLocation}: ${n.fromLocationName||"N/A"}`,o,e),e+=6,t.text(`${_.toLocation}: ${n.toLocationName||n.locationName||"N/A"}`,o,e)):t.text(`${_.location}: ${n.locationName||"N/A"}`,o,e),(n.notes||n.generalNotes)&&(e+=10,t.text(`${_.notes}: ${n.notes||n.generalNotes}`,o,e)),e+=10,t.setDrawColor(200),t.line(o,e,s-o,e),e+=15;const m=n.items||n.products||[];if(m.length>0){t.setFontSize(14),t.setFont(void 0,"bold"),r?t.text(_.transferItems,o,e):t.text(_.movementItems,o,e),t.setFont(void 0,"normal"),e+=10,t.setFontSize(10),t.text(_.sku,o,e),t.text(_.productName,o+35,e),t.text(_.qty,o+100,e),r?(t.text(_.total,o+120,e),t.text(_.received,o+150,e)):(t.text(_.unitCost,o+120,e),t.text(_.total,o+150,e)),e+=2,t.line(o,e,s-o,e),e+=6,t.setFontSize(9);let c=0;if(m.forEach(i=>{e>260&&(t.addPage(),e=20);const $=i.productSku||i.sku||"N/A",d=i.productName||i.name||"N/A",v=Math.abs(i.quantity||i.qty||0),u=parseFloat(i.unitCost||i.cost||0),l=v*u;c+=l,t.text($,o,e);const M=60;let F=d;if(t.getTextWidth(d)>M&&(F=d.substring(0,25)+"..."),t.text(F,o+35,e),t.text(v.toString(),o+100,e),r){const P=i.receivedQuantity||"_________";t.text(P.toString(),o+150,e),t.text(`$${l.toFixed(2)}`,o+120,e)}else t.text(`$${l.toFixed(2)}`,o+150,e),t.text(`$${u.toFixed(2)}`,o+120,e);e+=6}),e+=10,!r||c>0){e+=5,t.setFont(void 0,"bold"),t.setFontSize(12);const i=120;t.text(`${_.totalValue}:`,i,e),t.text(`$${c.toFixed(2)}`,i+50,e)}}r&&(e>200&&(t.addPage(),e=20),e+=20,t.setFontSize(12),t.setFont(void 0,"bold"),t.text(_.receivingConfirmation,o,e),t.setFont(void 0,"normal"),e+=15,t.setFontSize(10),t.text(`${_.receiverName}: ________________________`,o,e),e+=15,t.text(`${_.dateReceived}: ________________________`,o,e),e+=15,t.text(`${_.signature}: ____________________________`,o,e),e+=20,t.text(`${_.notes}: ________________________________`,o,e),e+=8,t.text("_______________________________________",o,e),e+=8,t.text("_______________________________________",o,e));const y=r?Math.max(e+20,270):270;t.setFont(void 0,"normal"),t.setFontSize(10),t.setTextColor(100);const x=r?_.footerTransfer:_.footerMovement,C=t.getTextWidth(x);t.text(x,(s-C)/2,y),console.log("Saving PDF...");const a=`movement-${n.invoiceId||n.id||"unknown"}.pdf`;return t.save(a),console.log("PDF saved successfully:",a),a}catch(_){throw console.error("Error in generateMovementInvoicePDF:",_),console.error("Error details:",_),_}};export{z as generateMovementInvoicePDF};
