import{G as He,c as x,D as Qe,e as ue,t as h,j as y,i as a,a as n,B as D,v as f,b,F as I,S as $,w as X,aB as Ve,M as et,d as tt}from"./index-BKXBQ4nm.js";import{j as rt,l as lt}from"./taxPortalApi-rtCqUayB.js";import{T,b as R,c as at,d as ot}from"./drakeTypes-D3NWVYzt.js";var it=h("<div><div>Loading clients..."),st=h("<div><div></div><div></div><div>"),W=h("<div>"),nt=h("<div><button>Manual Entry</button><button>Import from Notary"),dt=h("<div>Client data loaded. Review and edit fields below before creating."),yt=h("<div><label>Search Notary Client"),mt=h("<div><label>Address (from Notary)</label><div><div>"),pt=h("<div><label>Tax Year</label><div>"),ct=h("<div><div><div><h1>Tax Clients</h1><p>Manage your tax clients and their documents</p></div></div><div><div></div><div><div><span>Status:</span><div></div></div><div><span>Payment:</span><div>"),Q=h("<button>"),ut=h("<span>"),gt=h("<div><div></div><div><div><span> </span></div><div><div><span></span></div><div><span></span></div></div><div>Last activity: ");const bt=()=>{const V=He(),[ee,te]=x([]),[j,re]=x(!0),[A,ge]=x(""),[_,ve]=x("all"),[N,fe]=x("all"),[he,z]=x(!1),[s,u]=x({firstName:"",middleName:"",lastName:"",email:"",phone:"",ssn:"",dateOfBirth:"",address:"",city:"",state:"",zipCode:"",taxYear:2024}),[le,ae]=x(!1),[C,oe]=x(!1),[ie,U]=x(null);Qe(async()=>{re(!0);try{const o=(await rt()).map(m=>({...m,lastActivity:m.updatedAt||m.createdAt,requiredDocs:8}));te(o)}catch(t){ue("Error loading tax clients:",t)}finally{re(!1)}});const q=()=>{let t=ee();const o=A().toLowerCase().trim();return o&&(t=t.filter(m=>m.firstName.toLowerCase().includes(o)||m.lastName.toLowerCase().includes(o)||m.email?.toLowerCase().includes(o)||m.phone?.includes(o))),_()!=="all"&&(t=t.filter(m=>(m.workflowStatus||"intake")===_())),N()!=="all"&&(t=t.filter(m=>(m.paymentStatus||"pending")===N())),t},be=t=>t?new Date(t).toISOString().split("T")[0]:"",Pe=t=>{if(!t.residences)return null;const o=Object.values(t.residences);return o.find(m=>!m.toDate)||o[o.length-1]||null},xe=t=>{U(t);const o=Pe(t);u({firstName:t.firstName||"",middleName:t.middleName||"",lastName:t.lastName||"",email:t.email||"",phone:t.phoneNumber||"",ssn:t.ss||"",dateOfBirth:be(t.dateOfBirth||t.dob),address:o?.addressLineOne||"",city:o?.city||"",state:o?.state||"",zipCode:o?.zipcode||"",taxYear:s().taxYear})},se=t=>{oe(t),U(null),u({firstName:"",middleName:"",lastName:"",email:"",phone:"",ssn:"",dateOfBirth:"",address:"",city:"",state:"",zipCode:"",taxYear:s().taxYear})},we=async()=>{const t=s();if(!(!t.firstName.trim()||!t.lastName.trim())){ae(!0);try{const o=await lt({firstName:t.firstName.trim(),middleName:t.middleName?.trim()||void 0,lastName:t.lastName.trim(),email:t.email.trim()||void 0,phone:t.phone.trim()||void 0,ssn:t.ssn?.trim()||void 0,dateOfBirth:t.dateOfBirth||void 0,address:t.address?.trim()||void 0,city:t.city?.trim()||void 0,state:t.state?.trim()||void 0,zipCode:t.zipCode?.trim()||void 0,taxYear:t.taxYear}),m={...o,workflowStatus:o.workflowStatus||"intake",paymentStatus:o.paymentStatus||"pending",lastActivity:Date.now(),requiredDocs:8};te([m,...ee()]),z(!1),u({firstName:"",middleName:"",lastName:"",email:"",phone:"",ssn:"",dateOfBirth:"",address:"",city:"",state:"",zipCode:"",taxYear:2024}),oe(!1),U(null),V(`/tax-client/${o.id}`)}catch(o){ue("Error creating client:",o),alert("Error creating client. Please try again.")}finally{ae(!1)}}},Ce=t=>{V(`/tax-client/${t}`)},Se=(t,o)=>`${t.charAt(0)}${o.charAt(0)}`.toUpperCase(),B=t=>T[t||"intake"],$e=t=>at[t||"intake"],G=t=>R[t||"pending"],_e=t=>ot[t||"pending"],Ne=t=>{if(!t)return"No activity";const m=Date.now()-t,P=Math.floor(m/(1e3*60*60*24)),k=Math.floor(m/(1e3*60*60)),O=Math.floor(m/(1e3*60));return P>30?new Date(t).toLocaleDateString():P>0?`${P} day${P>1?"s":""} ago`:k>0?`${k} hour${k>1?"s":""} ago`:O>0?`${O} min ago`:"Just now"},ke=[{value:"all",label:"All",color:"#6b7280"},{value:"intake",label:"Intake",color:T.intake},{value:"collecting_docs",label:"Collecting",color:T.collecting_docs},{value:"in_review",label:"In Review",color:T.in_review},{value:"ready_to_file",label:"Ready",color:T.ready_to_file},{value:"filed",label:"Filed",color:T.filed},{value:"completed",label:"Completed",color:T.completed}],Te=[{value:"all",label:"All",color:"#6b7280"},{value:"pending",label:"Pending",color:R.pending},{value:"partial",label:"Partial",color:R.partial},{value:"paid",label:"Paid",color:R.paid}],Ae={padding:"1.5rem","max-width":"1400px",margin:"0 auto","min-height":"100vh",background:"var(--background-color)"},Le={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"1.5rem","flex-wrap":"wrap",gap:"1rem"},ze={display:"flex",gap:"1rem","margin-bottom":"1.5rem","flex-wrap":"wrap","align-items":"center"},Be={flex:"1","min-width":"250px","max-width":"400px"},ne={display:"flex",gap:"0.5rem","flex-wrap":"wrap"},de=(t,o)=>({padding:"0.5rem 1rem",border:`1px solid ${t?o:"var(--border-color)"}`,"border-radius":"9999px",background:t?o:"transparent",color:t?"white":"var(--text-primary)",cursor:"pointer","font-size":"0.875rem","font-weight":"500",transition:"all 0.2s","white-space":"nowrap"}),Oe={display:"grid","grid-template-columns":"repeat(auto-fill, minmax(320px, 1fr))",gap:"1rem"},Ye={background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-md)",padding:"1.25rem",cursor:"pointer",transition:"all 0.2s ease",display:"flex",gap:"1rem","align-items":"flex-start"},Ee=t=>({width:"48px",height:"48px","min-width":"48px","border-radius":"50%",background:`linear-gradient(135deg, ${B(t)}, ${B(t)}dd)`,color:"white",display:"flex","align-items":"center","justify-content":"center","font-weight":"600","font-size":"1rem"}),Fe={flex:"1","min-width":"0"},Me={"font-weight":"600","font-size":"1rem",color:"var(--text-primary)",margin:"0 0 0.25rem 0",display:"flex","align-items":"center",gap:"0.5rem","flex-wrap":"wrap"},De={background:"var(--primary-color)",color:"white",padding:"0.125rem 0.5rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"500"},Ie=t=>({display:"inline-flex","align-items":"center",gap:"0.25rem",padding:"0.25rem 0.5rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"500",background:`${B(t)}20`,color:B(t)}),Xe=t=>({display:"inline-flex","align-items":"center",gap:"0.25rem",padding:"0.25rem 0.5rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"500",background:`${G(t)}20`,color:G(t)}),ye=t=>({width:"8px",height:"8px","border-radius":"50%",background:t}),Re={"font-size":"0.75rem",color:"var(--text-muted)","margin-top":"0.25rem"},me={"text-align":"center",padding:"4rem 2rem",color:"var(--text-muted)"},K={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},We={display:"flex",gap:"1rem","justify-content":"flex-end","margin-top":"1.5rem"};return(()=>{var t=ct(),o=t.firstChild,m=o.firstChild,P=m.firstChild,k=P.nextSibling,O=o.nextSibling,J=O.firstChild,M=J.nextSibling,L=M.firstChild,Y=L.firstChild,pe=Y.nextSibling,E=L.nextSibling,F=E.firstChild,ce=F.nextSibling;return y(t,Ae),y(o,Le),P.style.setProperty("font-size","1.75rem"),P.style.setProperty("font-weight","700"),P.style.setProperty("margin","0 0 0.25rem 0"),P.style.setProperty("color","var(--text-primary)"),k.style.setProperty("color","var(--text-muted)"),k.style.setProperty("margin","0"),k.style.setProperty("font-size","0.875rem"),a(o,n(D,{onClick:()=>z(!0),children:"+ New Client"}),null),y(O,ze),y(J,Be),a(J,n(f,{label:"",placeholder:"Search clients by name, email, or phone...",get value(){return A()},onChange:r=>ge(r)})),M.style.setProperty("display","flex"),M.style.setProperty("flex-direction","column"),M.style.setProperty("gap","0.75rem"),L.style.setProperty("display","flex"),L.style.setProperty("align-items","center"),L.style.setProperty("gap","0.5rem"),L.style.setProperty("flex-wrap","wrap"),Y.style.setProperty("font-size","0.75rem"),Y.style.setProperty("font-weight","600"),Y.style.setProperty("color","var(--text-muted)"),Y.style.setProperty("min-width","60px"),a(pe,n(I,{each:ke,children:r=>(()=>{var e=Q();return e.$$click=()=>ve(r.value),a(e,()=>r.label),b(l=>y(e,de(_()===r.value,r.color),l)),e})()})),E.style.setProperty("display","flex"),E.style.setProperty("align-items","center"),E.style.setProperty("gap","0.5rem"),E.style.setProperty("flex-wrap","wrap"),F.style.setProperty("font-size","0.75rem"),F.style.setProperty("font-weight","600"),F.style.setProperty("color","var(--text-muted)"),F.style.setProperty("min-width","60px"),a(ce,n(I,{each:Te,children:r=>(()=>{var e=Q();return e.$$click=()=>fe(r.value),a(e,()=>r.label),b(l=>y(e,de(N()===r.value,r.color),l)),e})()})),a(t,n($,{get when(){return j()},get children(){var r=it(),e=r.firstChild;return e.style.setProperty("font-size","1.25rem"),e.style.setProperty("margin-bottom","0.5rem"),b(l=>y(r,me,l)),r}}),null),a(t,n($,{get when(){return X(()=>!j())()&&q().length===0},get children(){var r=st(),e=r.firstChild,l=e.nextSibling,d=l.nextSibling;return e.style.setProperty("font-size","3rem"),e.style.setProperty("margin-bottom","1rem"),e.style.setProperty("opacity","0.5"),a(e,()=>A()||_()!=="all"||N()!=="all"?"(no results)":"(empty)"),l.style.setProperty("font-size","1.25rem"),l.style.setProperty("margin-bottom","0.5rem"),a(l,()=>A()||_()!=="all"||N()!=="all"?"No clients match your search criteria":"No tax clients yet"),d.style.setProperty("margin-bottom","1.5rem"),a(d,()=>A()||_()!=="all"||N()!=="all"?"Try adjusting your filters or search term":"Add your first client to get started"),a(r,n($,{get when(){return X(()=>!A()&&_()==="all")()&&N()==="all"},get children(){return n(D,{onClick:()=>z(!0),children:"+ Add First Client"})}}),null),b(i=>y(r,me,i)),r}}),null),a(t,n($,{get when(){return X(()=>!j())()&&q().length>0},get children(){var r=W();return y(r,Oe),a(r,n(I,{get each(){return q()},children:e=>(()=>{var l=gt(),d=l.firstChild,i=d.nextSibling,c=i.firstChild,g=c.firstChild,w=g.firstChild,v=c.nextSibling,S=v.firstChild,je=S.firstChild,Z=S.nextSibling,Ue=Z.firstChild,H=v.nextSibling;return H.firstChild,l.addEventListener("mouseleave",p=>{p.currentTarget.style.boxShadow="none",p.currentTarget.style.borderColor="var(--border-color)"}),l.addEventListener("mouseenter",p=>{p.currentTarget.style.boxShadow="var(--shadow-md)",p.currentTarget.style.borderColor="var(--primary-color)"}),l.$$click=()=>Ce(e.id),y(l,Ye),a(d,()=>Se(e.firstName,e.lastName)),y(i,Fe),y(c,Me),g.style.setProperty("overflow","hidden"),g.style.setProperty("text-overflow","ellipsis"),g.style.setProperty("white-space","nowrap"),a(g,()=>e.firstName,w),a(g,()=>e.lastName,null),a(c,n($,{get when(){return e.taxYear},get children(){var p=ut();return y(p,De),a(p,()=>e.taxYear),p}}),null),v.style.setProperty("display","flex"),v.style.setProperty("gap","0.5rem"),v.style.setProperty("flex-wrap","wrap"),v.style.setProperty("margin-top","0.25rem"),a(S,()=>$e(e.workflowStatus),null),a(Z,()=>_e(e.paymentStatus),null),y(H,Re),a(H,()=>Ne(e.lastActivity),null),b(p=>{var qe=Ee(e.workflowStatus),Ge=Ie(e.workflowStatus),Ke=ye(B(e.workflowStatus)),Je=Xe(e.paymentStatus),Ze=ye(G(e.paymentStatus));return p.e=y(d,qe,p.e),p.t=y(S,Ge,p.t),p.a=y(je,Ke,p.a),p.o=y(Z,Je,p.o),p.i=y(Ue,Ze,p.i),p},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),l})()})),r}}),null),a(t,n(et,{get isOpen(){return he()},onClose:()=>z(!1),title:"New Tax Client",maxWidth:"90vw",get children(){return[(()=>{var r=nt(),e=r.firstChild,l=e.nextSibling;return r.style.setProperty("display","flex"),r.style.setProperty("gap","0.5rem"),r.style.setProperty("margin-bottom","1.5rem"),r.style.setProperty("padding-bottom","1rem"),r.style.setProperty("border-bottom","1px solid var(--border-color)"),e.$$click=()=>se(!1),e.style.setProperty("flex","1"),e.style.setProperty("padding","0.75rem 1rem"),e.style.setProperty("border-radius","var(--border-radius-md)"),e.style.setProperty("cursor","pointer"),e.style.setProperty("font-weight","600"),e.style.setProperty("transition","all 0.2s"),l.$$click=()=>se(!0),l.style.setProperty("flex","1"),l.style.setProperty("padding","0.75rem 1rem"),l.style.setProperty("border-radius","var(--border-radius-md)"),l.style.setProperty("cursor","pointer"),l.style.setProperty("font-weight","600"),l.style.setProperty("transition","all 0.2s"),b(d=>{var i=`2px solid ${C()?"var(--border-color)":"var(--primary-color)"}`,c=C()?"transparent":"var(--primary-color)",g=C()?"var(--text-primary)":"white",w=`2px solid ${C()?"var(--primary-color)":"var(--border-color)"}`,v=C()?"var(--primary-color)":"transparent",S=C()?"white":"var(--text-primary)";return i!==d.e&&((d.e=i)!=null?e.style.setProperty("border",i):e.style.removeProperty("border")),c!==d.t&&((d.t=c)!=null?e.style.setProperty("background",c):e.style.removeProperty("background")),g!==d.a&&((d.a=g)!=null?e.style.setProperty("color",g):e.style.removeProperty("color")),w!==d.o&&((d.o=w)!=null?l.style.setProperty("border",w):l.style.removeProperty("border")),v!==d.i&&((d.i=v)!=null?l.style.setProperty("background",v):l.style.removeProperty("background")),S!==d.n&&((d.n=S)!=null?l.style.setProperty("color",S):l.style.removeProperty("color")),d},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),r})(),n($,{get when(){return C()},get children(){var r=yt(),e=r.firstChild;return r.style.setProperty("margin-bottom","1.5rem"),e.style.setProperty("display","block"),e.style.setProperty("font-weight","500"),e.style.setProperty("margin-bottom","0.5rem"),e.style.setProperty("color","var(--text-primary)"),a(r,n(Ve,{placeholder:"Search by name, email, or A#...",onSelect:xe}),null),a(r,n($,{get when(){return ie()},get children(){var l=dt();return l.style.setProperty("margin-top","0.75rem"),l.style.setProperty("padding","0.75rem"),l.style.setProperty("background","var(--success-light, #d1fae5)"),l.style.setProperty("border-radius","var(--border-radius-sm)"),l.style.setProperty("font-size","0.875rem"),l.style.setProperty("color","var(--success-color, #059669)"),l}}),null),r}}),(()=>{var r=W();return a(r,n(f,{label:"First Name",get value(){return s().firstName},onChange:e=>u({...s(),firstName:e}),required:!0,placeholder:"Enter first name"}),null),a(r,n(f,{label:"Middle Name",get value(){return s().middleName},onChange:e=>u({...s(),middleName:e}),placeholder:"Enter middle name"}),null),a(r,n(f,{label:"Last Name",get value(){return s().lastName},onChange:e=>u({...s(),lastName:e}),required:!0,placeholder:"Enter last name"}),null),a(r,n(f,{label:"SSN",get value(){return s().ssn},onChange:e=>u({...s(),ssn:e}),placeholder:"XXX-XX-XXXX"}),null),b(e=>y(r,K,e)),r})(),(()=>{var r=W();return a(r,n(f,{label:"Email",type:"email",get value(){return s().email},onChange:e=>u({...s(),email:e}),placeholder:"client@email.com"}),null),a(r,n(f,{label:"Phone",type:"tel",get value(){return s().phone},onChange:e=>u({...s(),phone:e}),placeholder:"(555) 123-4567"}),null),a(r,n(f,{label:"Date of Birth",type:"date",get value(){return s().dateOfBirth},onChange:e=>u({...s(),dateOfBirth:e})}),null),b(e=>y(r,{...K,"margin-top":"1rem"},e)),r})(),n($,{get when(){return X(()=>!!C())()&&ie()},get children(){var r=mt(),e=r.firstChild,l=e.nextSibling,d=l.firstChild;return r.style.setProperty("margin-top","1rem"),e.style.setProperty("display","block"),e.style.setProperty("font-weight","500"),e.style.setProperty("margin-bottom","0.5rem"),e.style.setProperty("color","var(--text-primary)"),d.style.setProperty("grid-column","span 2"),a(d,n(f,{label:"",get value(){return s().address},onChange:i=>u({...s(),address:i}),placeholder:"Street address"})),a(l,n(f,{label:"",get value(){return s().city},onChange:i=>u({...s(),city:i}),placeholder:"City"}),null),a(l,n(f,{label:"",get value(){return s().state},onChange:i=>u({...s(),state:i}),placeholder:"State"}),null),a(l,n(f,{label:"",get value(){return s().zipCode},onChange:i=>u({...s(),zipCode:i}),placeholder:"ZIP Code"}),null),b(i=>y(l,K,i)),r}}),(()=>{var r=pt(),e=r.firstChild,l=e.nextSibling;return r.style.setProperty("margin-top","1rem"),e.style.setProperty("display","block"),e.style.setProperty("font-weight","500"),e.style.setProperty("margin-bottom","0.5rem"),e.style.setProperty("color","var(--text-primary)"),l.style.setProperty("display","flex"),l.style.setProperty("gap","0.5rem"),a(l,n(I,{each:[2024,2025],children:d=>(()=>{var i=Q();return i.$$click=()=>u({...s(),taxYear:d}),i.style.setProperty("padding","0.75rem 1.5rem"),i.style.setProperty("border-radius","var(--border-radius-md)"),i.style.setProperty("cursor","pointer"),i.style.setProperty("font-weight","600"),i.style.setProperty("transition","all 0.2s"),a(i,d),b(c=>{var g=`2px solid ${s().taxYear===d?"var(--primary-color)":"var(--border-color)"}`,w=s().taxYear===d?"var(--primary-color)":"transparent",v=s().taxYear===d?"white":"var(--text-primary)";return g!==c.e&&((c.e=g)!=null?i.style.setProperty("border",g):i.style.removeProperty("border")),w!==c.t&&((c.t=w)!=null?i.style.setProperty("background",w):i.style.removeProperty("background")),v!==c.a&&((c.a=v)!=null?i.style.setProperty("color",v):i.style.removeProperty("color")),c},{e:void 0,t:void 0,a:void 0}),i})()})),r})(),(()=>{var r=W();return y(r,We),a(r,n(D,{variant:"secondary",onClick:()=>z(!1),children:"Cancel"}),null),a(r,n(D,{onClick:we,get disabled(){return!s().firstName.trim()||!s().lastName.trim()||le()},get children(){return le()?"Creating...":"Create Client"}}),null),r})()]}}),null),b(r=>{var e=ne,l=ne;return r.e=y(pe,e,r.e),r.t=y(ce,l,r.t),r},{e:void 0,t:void 0}),t})()};tt(["click"]);export{bt as default};
