import{u as te,c as F,$ as Q,t as v,i as e,a as c,b as _,F as R,S as h,j as T,B as D,w as L,M as re,az as N}from"./index-B4TI30WL.js";var se=v("<div>"),oe=v("<div><div><div></div><div></div></div><div><div></div><div></div></div><div><div></div><div>"),le=v("<div><span>丘멆잺</span><div><div></div><div> "),ne=v("<div><h2></h2><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody>"),ie=v("<div><div><span>游뱄</span><h2></h2></div><div></div><div>丘멆잺 "),ae=v("<div><h2></h2><div>"),ye=v("<div><h3></h3><select>"),de=v("<div><div><span></span><span></span></div><div><span></span><span></span></div><div><span></span><span></span></div><div><span></span><span>"),pe=v("<div>丘멆잺 <!> "),ce=v("<div><h3>"),ge=v("<div><div>游닌</div><h3></h3><p>"),me=v("<div><div><div></div></div><div>"),ue=v("<div><div><div><h1></h1><p></p></div><select>"),X=v("<option>"),Pe=v("<tr><td></td><td><span></span><span></span></td><td>"),ve=v("<div><div></div><div>");const he=()=>{const{t:l}=te(),k=new Date().getFullYear(),[I,V]=F(k),[Z,U]=F(!1),[b,Y]=F(1),[W,q]=F(!1),[m]=Q(I,u=>N.tax.getSummary(u)),[B]=Q(I,u=>N.tax.getAnalysis(u)),x=u=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(u),H=[{value:k,label:String(k)},{value:k-1,label:String(k-1)},{value:k-2,label:String(k-2)}],ee=async()=>{q(!0);try{const u=await N.tax.downloadDrakeExport(I()),S=URL.createObjectURL(u),w=document.createElement("a");w.href=S,w.download=`drake-import-${I()}.csv`,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(S),U(!1)}catch(u){console.error("Export failed:",u),alert(l("accounting.exportFailed","Error al exportar"))}finally{q(!1)}},A={background:"var(--surface-color)",border:"1px solid var(--border-color)","border-radius":"var(--border-radius-md)",padding:"1.5rem"},G=u=>({...A,"border-left":`4px solid ${u}`});return(()=>{var u=ue(),S=u.firstChild,w=S.firstChild,j=w.firstChild,M=j.nextSibling,$=w.nextSibling;return u.style.setProperty("padding","1.5rem"),S.style.setProperty("display","flex"),S.style.setProperty("justify-content","space-between"),S.style.setProperty("align-items","center"),S.style.setProperty("margin-bottom","1.5rem"),j.style.setProperty("font-size","1.5rem"),j.style.setProperty("font-weight","700"),j.style.setProperty("margin-bottom","0.25rem"),e(j,()=>l("accounting.taxCenter","Centro de Impuestos")),M.style.setProperty("color","var(--text-muted)"),M.style.setProperty("font-size","0.875rem"),e(M,()=>l("accounting.taxCenterSubtitle","Resumen fiscal y exportaci칩n para software de impuestos")),$.addEventListener("change",r=>V(parseInt(r.currentTarget.value))),$.style.setProperty("padding","0.5rem 1rem"),$.style.setProperty("border","1px solid var(--border-color)"),$.style.setProperty("border-radius","var(--border-radius-sm)"),$.style.setProperty("font-size","1rem"),$.style.setProperty("font-weight","600"),$.style.setProperty("background","var(--surface-color)"),e($,c(R,{each:H,children:r=>(()=>{var n=X();return e(n,()=>r.label),_(()=>n.value=r.value),n})()})),e(u,c(h,{get when(){return m.loading},get children(){var r=se();return r.style.setProperty("text-align","center"),r.style.setProperty("padding","3rem"),e(r,()=>l("common.loading","Cargando...")),r}}),null),e(u,c(h,{get when(){return L(()=>!m.loading)()&&m()},get children(){return[(()=>{var r=oe(),n=r.firstChild,a=n.firstChild,y=a.nextSibling,o=n.nextSibling,s=o.firstChild,t=s.nextSibling,i=o.nextSibling,d=i.firstChild,g=d.nextSibling;return r.style.setProperty("display","grid"),r.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(200px, 1fr))"),r.style.setProperty("gap","1rem"),r.style.setProperty("margin-bottom","2rem"),a.style.setProperty("color","var(--text-muted)"),a.style.setProperty("font-size","0.875rem"),a.style.setProperty("margin-bottom","0.5rem"),e(a,()=>l("accounting.grossIncome","Ingresos Brutos")),y.style.setProperty("font-size","1.75rem"),y.style.setProperty("font-weight","700"),y.style.setProperty("color","#22c55e"),e(y,()=>x(m().grossIncome)),s.style.setProperty("color","var(--text-muted)"),s.style.setProperty("font-size","0.875rem"),s.style.setProperty("margin-bottom","0.5rem"),e(s,()=>l("accounting.deductibleExpenses","Gastos Deducibles")),t.style.setProperty("font-size","1.75rem"),t.style.setProperty("font-weight","700"),e(t,()=>x(m().totalExpenses)),d.style.setProperty("color","var(--text-muted)"),d.style.setProperty("font-size","0.875rem"),d.style.setProperty("margin-bottom","0.5rem"),e(d,()=>l("accounting.netProfit","Ganancia Neta")),g.style.setProperty("font-size","1.75rem"),g.style.setProperty("font-weight","700"),e(g,()=>x(m().netProfit)),_(p=>{var C=G("#22c55e"),z=G("#6b7280"),P=G(m().netProfit>=0?"#22c55e":"#dc2626"),f=m().netProfit>=0?"#22c55e":"#dc2626";return p.e=T(n,C,p.e),p.t=T(o,z,p.t),p.a=T(i,P,p.a),f!==p.o&&((p.o=f)!=null?g.style.setProperty("color",f):g.style.removeProperty("color")),p},{e:void 0,t:void 0,a:void 0,o:void 0}),r})(),c(h,{get when(){return m().uncategorizedTotal>0},get children(){var r=le(),n=r.firstChild,a=n.nextSibling,y=a.firstChild,o=y.nextSibling,s=o.firstChild;return r.style.setProperty("padding","1rem"),r.style.setProperty("background","#fef3c7"),r.style.setProperty("border","1px solid #fcd34d"),r.style.setProperty("border-radius","var(--border-radius-sm)"),r.style.setProperty("color","#92400e"),r.style.setProperty("margin-bottom","1.5rem"),r.style.setProperty("display","flex"),r.style.setProperty("align-items","center"),r.style.setProperty("gap","0.75rem"),n.style.setProperty("font-size","1.5rem"),y.style.setProperty("font-weight","600"),e(y,()=>l("accounting.uncategorizedExpenses","Gastos sin categor칤a fiscal")),o.style.setProperty("font-size","0.875rem"),e(o,()=>x(m().uncategorizedTotal),s),e(o,()=>l("accounting.needsCategorization","necesitan ser categorizados para la declaraci칩n de impuestos"),null),r}}),(()=>{var r=ne(),n=r.firstChild,a=n.nextSibling,y=a.firstChild,o=y.firstChild,s=o.firstChild,t=s.nextSibling,i=t.nextSibling,d=y.nextSibling;return n.style.setProperty("font-size","1.1rem"),n.style.setProperty("font-weight","600"),n.style.setProperty("margin-bottom","1rem"),e(n,()=>l("accounting.categoryBreakdown","Desglose por Categor칤a Fiscal")),a.style.setProperty("width","100%"),a.style.setProperty("border-collapse","collapse"),o.style.setProperty("border-bottom","2px solid var(--border-color)"),s.style.setProperty("padding","0.75rem"),s.style.setProperty("text-align","left"),s.style.setProperty("font-weight","600"),s.style.setProperty("color","var(--text-muted)"),e(s,()=>l("accounting.category","Categor칤a")),t.style.setProperty("padding","0.75rem"),t.style.setProperty("text-align","left"),t.style.setProperty("font-weight","600"),t.style.setProperty("color","var(--text-muted)"),e(t,()=>l("accounting.scheduleCLine","L칤nea Schedule C")),i.style.setProperty("padding","0.75rem"),i.style.setProperty("text-align","right"),i.style.setProperty("font-weight","600"),i.style.setProperty("color","var(--text-muted)"),e(i,()=>l("accounting.amount","Monto")),e(d,c(R,{get each(){return m().formLines},children:g=>(()=>{var p=Pe(),C=p.firstChild,z=C.nextSibling,P=z.firstChild,f=P.nextSibling,E=z.nextSibling;return p.style.setProperty("border-bottom","1px solid var(--border-color)"),C.style.setProperty("padding","0.75rem"),e(C,()=>g.taxCategory),z.style.setProperty("padding","0.75rem"),P.style.setProperty("display","inline-block"),P.style.setProperty("padding","0.125rem 0.5rem"),P.style.setProperty("background","var(--surface-secondary)"),P.style.setProperty("border-radius","4px"),P.style.setProperty("font-size","0.75rem"),P.style.setProperty("font-weight","500"),P.style.setProperty("margin-right","0.5rem"),e(P,()=>g.line),f.style.setProperty("color","var(--text-muted)"),f.style.setProperty("font-size","0.875rem"),e(f,()=>g.lineName),E.style.setProperty("padding","0.75rem"),E.style.setProperty("text-align","right"),E.style.setProperty("font-weight","500"),e(E,()=>x(g.amount)),p})()})),_(g=>T(r,{...A,"margin-bottom":"1.5rem"},g)),r})(),c(h,{get when(){return B()&&!B.loading},get children(){var r=ie(),n=r.firstChild,a=n.firstChild,y=a.nextSibling,o=n.nextSibling,s=o.nextSibling;return s.firstChild,n.style.setProperty("display","flex"),n.style.setProperty("align-items","center"),n.style.setProperty("gap","0.5rem"),n.style.setProperty("margin-bottom","1rem"),a.style.setProperty("font-size","1.5rem"),y.style.setProperty("font-size","1.1rem"),y.style.setProperty("font-weight","600"),e(y,()=>l("accounting.aiTaxAnalysis","An치lisis AI de Optimizaci칩n Fiscal")),o.style.setProperty("white-space","pre-wrap"),o.style.setProperty("line-height","1.6"),o.style.setProperty("color","var(--text-primary)"),e(o,()=>B().analysis),s.style.setProperty("margin-top","1rem"),s.style.setProperty("padding","0.75rem"),s.style.setProperty("background","var(--surface-secondary)"),s.style.setProperty("border-radius","var(--border-radius-sm)"),s.style.setProperty("font-size","0.75rem"),s.style.setProperty("color","var(--text-muted)"),e(s,()=>l("accounting.aiDisclaimer","Este an치lisis es informativo. Consulte con un contador p칰blico certificado (CPA) para asesor칤a fiscal profesional."),null),_(t=>T(r,{...A,"margin-bottom":"1.5rem"},t)),r}}),(()=>{var r=ae(),n=r.firstChild,a=n.nextSibling;return n.style.setProperty("font-size","1.1rem"),n.style.setProperty("font-weight","600"),n.style.setProperty("margin-bottom","1rem"),e(n,()=>l("accounting.exportForTaxSoftware","Exportar para Software de Impuestos")),a.style.setProperty("display","flex"),a.style.setProperty("gap","1rem"),a.style.setProperty("flex-wrap","wrap"),e(a,c(D,{variant:"primary",onClick:()=>U(!0),get children(){return["游닌 ",L(()=>l("accounting.exportDrake","Exportar para Drake"))]}}),null),e(a,c(D,{variant:"secondary",disabled:!0,get children(){return["TurboTax (",L(()=>l("accounting.comingSoon","pr칩ximamente")),")"]}}),null),e(a,c(D,{variant:"secondary",disabled:!0,get children(){return["ProSeries (",L(()=>l("accounting.comingSoon","pr칩ximamente")),")"]}}),null),e(a,c(D,{variant:"secondary",disabled:!0,get children(){return["Lacerte (",L(()=>l("accounting.comingSoon","pr칩ximamente")),")"]}}),null),_(y=>T(r,A,y)),r})()]}}),null),e(u,c(re,{get isOpen(){return Z()},onClose:()=>{U(!1),Y(1)},get title(){return l("accounting.exportWizard","Asistente de Exportaci칩n")},get children(){var r=me(),n=r.firstChild,a=n.firstChild,y=n.nextSibling;return n.style.setProperty("display","flex"),n.style.setProperty("justify-content","space-between"),n.style.setProperty("margin-bottom","2rem"),n.style.setProperty("position","relative"),a.style.setProperty("position","absolute"),a.style.setProperty("top","15px"),a.style.setProperty("left","10%"),a.style.setProperty("right","10%"),a.style.setProperty("height","2px"),a.style.setProperty("background","var(--border-color)"),a.style.setProperty("z-index","0"),e(n,c(R,{each:[1,2,3],children:o=>(()=>{var s=ve(),t=s.firstChild,i=t.nextSibling;return s.style.setProperty("display","flex"),s.style.setProperty("flex-direction","column"),s.style.setProperty("align-items","center"),s.style.setProperty("z-index","1"),t.style.setProperty("width","32px"),t.style.setProperty("height","32px"),t.style.setProperty("border-radius","50%"),t.style.setProperty("display","flex"),t.style.setProperty("align-items","center"),t.style.setProperty("justify-content","center"),t.style.setProperty("font-weight","600"),t.style.setProperty("font-size","0.875rem"),e(t,o),i.style.setProperty("font-size","0.75rem"),i.style.setProperty("margin-top","0.5rem"),i.style.setProperty("color","var(--text-muted)"),e(i,()=>o===1&&l("accounting.selectYear","A침o"),null),e(i,()=>o===2&&l("accounting.review","Revisar"),null),e(i,()=>o===3&&l("accounting.download","Descargar"),null),_(d=>{var g=b()>=o?"var(--primary-color)":"var(--surface-secondary)",p=b()>=o?"white":"var(--text-muted)";return g!==d.e&&((d.e=g)!=null?t.style.setProperty("background",g):t.style.removeProperty("background")),p!==d.t&&((d.t=p)!=null?t.style.setProperty("color",p):t.style.removeProperty("color")),d},{e:void 0,t:void 0}),s})()}),null),e(r,c(h,{get when(){return b()===1},get children(){var o=ye(),s=o.firstChild,t=s.nextSibling;return o.style.setProperty("text-align","center"),o.style.setProperty("padding","1rem"),s.style.setProperty("margin-bottom","1rem"),e(s,()=>l("accounting.selectTaxYear","Seleccionar A침o Fiscal")),t.addEventListener("change",i=>V(parseInt(i.currentTarget.value))),t.style.setProperty("padding","0.75rem 1.5rem"),t.style.setProperty("font-size","1.25rem"),t.style.setProperty("border","2px solid var(--primary-color)"),t.style.setProperty("border-radius","var(--border-radius-sm)"),e(t,c(R,{each:H,children:i=>(()=>{var d=X();return e(d,()=>i.label),_(()=>d.value=i.value),d})()})),_(()=>t.value=I()),o}}),y),e(r,c(h,{get when(){return b()===2},get children(){var o=ce(),s=o.firstChild;return o.style.setProperty("padding","1rem"),s.style.setProperty("margin-bottom","1rem"),e(s,()=>l("accounting.reviewData","Revisar Datos")),e(o,c(h,{get when(){return m()},get children(){return[(()=>{var t=de(),i=t.firstChild,d=i.firstChild,g=d.nextSibling,p=i.nextSibling,C=p.firstChild,z=C.nextSibling,P=p.nextSibling,f=P.firstChild,E=f.nextSibling,O=P.nextSibling,J=O.firstChild,K=J.nextSibling;return t.style.setProperty("background","var(--surface-secondary)"),t.style.setProperty("border-radius","var(--border-radius-sm)"),t.style.setProperty("padding","1rem"),i.style.setProperty("display","flex"),i.style.setProperty("justify-content","space-between"),i.style.setProperty("margin-bottom","0.5rem"),e(d,()=>l("accounting.grossIncome","Ingresos Brutos")),g.style.setProperty("font-weight","600"),e(g,()=>x(m().grossIncome)),p.style.setProperty("display","flex"),p.style.setProperty("justify-content","space-between"),p.style.setProperty("margin-bottom","0.5rem"),e(C,()=>l("accounting.totalExpenses","Total Gastos")),z.style.setProperty("font-weight","600"),e(z,()=>x(m().totalExpenses)),P.style.setProperty("display","flex"),P.style.setProperty("justify-content","space-between"),P.style.setProperty("margin-bottom","0.5rem"),e(f,()=>l("accounting.netProfit","Ganancia Neta")),E.style.setProperty("font-weight","600"),e(E,()=>x(m().netProfit)),O.style.setProperty("display","flex"),O.style.setProperty("justify-content","space-between"),e(J,()=>l("accounting.taxCategories","Categor칤as Fiscales")),K.style.setProperty("font-weight","600"),e(K,()=>m().formLines.length),t})(),c(h,{get when(){return m().uncategorizedTotal>0},get children(){var t=pe(),i=t.firstChild,d=i.nextSibling;return d.nextSibling,t.style.setProperty("margin-top","1rem"),t.style.setProperty("padding","0.75rem"),t.style.setProperty("background","#fef3c7"),t.style.setProperty("border-radius","var(--border-radius-sm)"),t.style.setProperty("color","#92400e"),t.style.setProperty("font-size","0.875rem"),e(t,()=>x(m().uncategorizedTotal),d),e(t,()=>l("accounting.uncategorized","sin categorizar"),null),t}})]}}),null),o}}),y),e(r,c(h,{get when(){return b()===3},get children(){var o=ge(),s=o.firstChild,t=s.nextSibling,i=t.nextSibling;return o.style.setProperty("text-align","center"),o.style.setProperty("padding","1rem"),s.style.setProperty("font-size","3rem"),s.style.setProperty("margin-bottom","1rem"),t.style.setProperty("margin-bottom","0.5rem"),e(t,()=>l("accounting.readyToDownload","Listo para Descargar")),i.style.setProperty("color","var(--text-muted)"),i.style.setProperty("margin-bottom","1.5rem"),e(i,()=>l("accounting.drakeInstructions",'El archivo CSV ser치 compatible con Drake Tax Software. Importe el archivo usando la opci칩n "Import Schedule C Data".')),e(o,c(D,{variant:"primary",onClick:ee,get disabled(){return W()},get children(){return L(()=>!!W())()?l("accounting.exporting","Exportando..."):l("accounting.downloadCSV","Descargar CSV")}}),null),o}}),y),y.style.setProperty("display","flex"),y.style.setProperty("justify-content","space-between"),y.style.setProperty("margin-top","2rem"),y.style.setProperty("padding-top","1rem"),y.style.setProperty("border-top","1px solid var(--border-color)"),e(y,c(D,{variant:"secondary",onClick:()=>Y(Math.max(1,b()-1)),get disabled(){return b()===1},get children(){return l("common.back","Atr치s")}}),null),e(y,c(h,{get when(){return b()<3},get children(){return c(D,{variant:"primary",onClick:()=>Y(Math.min(3,b()+1)),get children(){return l("common.next","Siguiente")}})}}),null),r}}),null),_(()=>$.value=I()),u})()};export{he as default};
