import{a3 as Y,ba as S,bb as L}from"./index-B3DgzdCj.js";const O=async(l,t,T="invoice-resume-report.pdf")=>{const e=new Y("p","mm","a4"),p=e.internal.pageSize.width,y=e.internal.pageSize.height,n=15;let i=n;const s=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(o),x=o=>o?new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):t("invoiceReport.pdf.all"),M=()=>{e.setFillColor(44,62,80),e.rect(0,0,p,40,"F"),e.setTextColor(255,255,255),e.setFontSize(24),e.setFont("helvetica","bold"),e.text(t("invoiceReport.pdf.title"),p/2,20,{align:"center"}),e.setFontSize(12),e.setFont("helvetica","normal"),e.text(t("invoiceReport.pdf.subtitle"),p/2,30,{align:"center"}),i=50,e.setFillColor(236,240,241),e.rect(n,i-5,p-2*n,30,"F"),e.setTextColor(44,62,80),e.setFontSize(10),e.setFont("helvetica","normal"),e.text(`${t("invoiceReport.pdf.reportDate")} ${new Date().toLocaleDateString()}`,n+5,i+5),e.text(`${t("invoiceReport.pdf.dateRange")} ${x(l.dateRange.from)} - ${x(l.dateRange.to)}`,n+5,i+12),e.text(`${t("invoiceReport.pdf.totalInvoices")} ${l.totalInvoices}`,n+5,i+19);let o=L.getLocationById(l.store);const c=p/2+10;e.text(`${t("invoiceReport.store")}: ${l.store==="all"?t("invoiceReport.allStores"):o?.name}`,c,i+5);const r=l.shippingType==="all"?t("invoiceReport.pdf.allTypes"):l.shippingType==="SEA"?t("invoiceReport.maritime"):l.shippingType==="AEREO"?t("invoiceReport.air"):t("invoiceReport.notSet");e.text(`${t("invoiceReport.shippingTypeLabel")}: ${r}`,c,i+12),i+=35},h=o=>{e.setFillColor(52,152,219),e.rect(n,i,p-2*n,8,"F"),e.setTextColor(255,255,255),e.setFontSize(12),e.setFont("helvetica","bold"),e.text(o,n+3,i+5.5),i+=12},m=o=>i+o>y-n?(e.addPage(),i=n,!0):!1;M();let z=!1;l.reservasByShippingAndType.size>0&&Array.from(l.reservasByShippingAndType.values()).forEach(o=>{o.has("Misceláneo")&&(z=!0)}),z&&(m(20),e.setFillColor(255,248,220),e.rect(n,i,p-2*n,15,"F"),e.setTextColor(120,80,0),e.setFontSize(9),e.setFont("helvetica","bold"),e.text(" Nota:",n+3,i+5),e.setFont("helvetica","normal"),e.text("Los items de comida, sapatos, aseo, medicina, medicamentos y similares",n+3,i+10),e.text('son agrupados automaticamente como "Miscelaneo" para mejor organizacion.',n+3,i+14),i+=20),h(t("invoiceReport.pdf.paymentMethodsSummary"));const $=[[t("invoiceReport.cash"),s(l.paymentMethods.cash)],[t("invoiceReport.zelle"),s(l.paymentMethods.zelle)],[t("invoiceReport.other"),s(l.paymentMethods.other)],[t("invoiceReport.pdf.total").toUpperCase(),s(l.paymentMethods.total)]];if(S(e,{startY:i,head:[[t("invoiceReport.pdf.paymentMethod"),t("invoiceReport.pdf.amount")]],body:$,theme:"grid",headStyles:{fillColor:[44,62,80],fontSize:10,fontStyle:"bold"},bodyStyles:{fontSize:10},footStyles:{fillColor:[236,240,241],textColor:[44,62,80],fontStyle:"bold"},columnStyles:{0:{cellWidth:100},1:{halign:"right"}},didParseCell:function(o){o.row.index===$.length-1&&(o.cell.styles.fontStyle="bold",o.cell.styles.fillColor=[236,240,241])}}),i=e.lastAutoTable.finalY+10,l.productsByType.size>0){m(50),h(t("invoiceReport.pdf.productsSummary"));const o=Array.from(l.productsByType.entries()).sort((r,a)=>a[1].total-r[1].total).map(([r,a])=>[r,a.qty.toString(),s(a.total)]),c=Array.from(l.productsByType.values()).reduce((r,a)=>r+a.total,0);S(e,{startY:i,head:[[t("invoiceReport.pdf.product"),t("invoiceReport.pdf.quantity"),t("invoiceReport.pdf.total")]],body:o,foot:[[t("invoiceReport.pdf.total").toUpperCase(),"",s(c)]],theme:"striped",headStyles:{fillColor:[44,62,80],fontSize:10},bodyStyles:{fontSize:9},footStyles:{fillColor:[236,240,241],textColor:[44,62,80],fontStyle:"bold",fontSize:10},columnStyles:{0:{cellWidth:"auto"},1:{halign:"center",cellWidth:30},2:{halign:"right",cellWidth:40}}}),i=e.lastAutoTable.finalY+10}if(l.reservasByShippingAndType.size>0&&Array.from(l.reservasByShippingAndType.entries()).sort((c,r)=>c[0]==="SEA"?-1:r[0]==="SEA"?1:0).forEach(([c,r])=>{m(50);const a=c==="AEREO"?"Aereo":"Maritimo";h(` ${t("invoiceReport.pdf.reservasSummary")} - ${a}`);const v=[];Array.from(r.entries()).sort((d,f)=>f[1].total-d[1].total).forEach(([d,f])=>{const u=d==="Misceláneo"||d==="Miscelaneo",P=d,g=[255,248,220],R=[255,255,255];v.push([{content:P,styles:{fontStyle:"bold",fillColor:u?g:R}},{content:`${f.qty.toFixed(2)} ${t("invoiceReport.pdf.lbs")}`,styles:{halign:"center",fontStyle:"bold",fillColor:u?g:R}},{content:"",styles:{fillColor:[236,240,241]}},{content:s(f.total),styles:{halign:"right",fontStyle:"bold",fillColor:u?g:R}}]),Array.from(f.priceGroups.entries()).sort((b,C)=>b[0]-C[0]).forEach(([b,C])=>{v.push([{content:"",styles:{fillColor:[255,255,255]}},{content:"",styles:{fillColor:[255,255,255]}},{content:`${s(b)} X ${C.qty.toFixed(2)} ${t("invoiceReport.pdf.lbs")}`,styles:{fontSize:8,textColor:[127,140,141]}},{content:"",styles:{fillColor:[255,255,255]}}])})});const W=Array.from(r.values()).reduce((d,f)=>d+f.total,0),w=Array.from(r.values()).reduce((d,f)=>d+f.qty,0);S(e,{startY:i,head:[[t("invoiceReport.pdf.type"),t("invoiceReport.pdf.totalQty"),t("invoiceReport.pdf.priceGroups"),t("invoiceReport.pdf.total")]],body:v,foot:[[{content:` ${t("invoiceReport.pdf.total")} ${a}`.toUpperCase(),styles:{fontStyle:"bold"}},{content:`${w.toFixed(2)} ${t("invoiceReport.pdf.lbs")}`,styles:{halign:"center",fontStyle:"bold"}},"",s(W)]],theme:"grid",headStyles:{fillColor:[44,62,80],fontSize:10},bodyStyles:{fontSize:9},footStyles:{fillColor:c==="AEREO"?[108,92,231]:[52,152,219],textColor:[255,255,255],fontStyle:"bold",fontSize:10},columnStyles:{0:{cellWidth:60},1:{halign:"center",cellWidth:30},2:{cellWidth:"auto"},3:{halign:"right",cellWidth:40}}}),i=e.lastAutoTable.finalY+10}),l.otherServicesByType.size>0){m(50),h(t("invoiceReport.pdf.otherServicesTitle"));const o=Array.from(l.otherServicesByType.entries()).sort((c,r)=>r[1].total-c[1].total).map(([c,r])=>[`${c}`,s(r.total)]);S(e,{startY:i,head:[[t("invoiceReport.pdf.serviceType"),t("invoiceReport.pdf.total")]],body:o,foot:[[t("invoiceReport.totalOtherServices").toUpperCase(),s(l.transportTotal)]],theme:"striped",headStyles:{fillColor:[44,62,80],fontSize:10},bodyStyles:{fontSize:10},footStyles:{fillColor:[236,240,241],textColor:[44,62,80],fontStyle:"bold",fontSize:10},columnStyles:{0:{cellWidth:"auto"},1:{halign:"right",cellWidth:50}}}),i=e.lastAutoTable.finalY+10}m(60),h(t("invoiceReport.pdf.totalSummary"));const E=Array.from(l.productsByType.values()).reduce((o,c)=>o+c.total,0),B=Array.from(l.reservasByShippingAndType.values()).reduce((o,c)=>o+Array.from(c.values()).reduce((r,a)=>r+a.total,0),0),A=[[t("invoiceReport.pdf.productsTotal"),s(E)],[t("invoiceReport.pdf.reservasTotal"),s(B)],[t("invoiceReport.pdf.transportServices"),s(l.transportTotal)],[t("invoiceReport.aranceles"),s(l.arancelesTotal)],[t("invoiceReport.tax"),s(l.taxTotal)],[t("invoiceReport.pdf.grandTotal"),s(l.paymentMethods.total)]];S(e,{startY:i,body:A,theme:"plain",bodyStyles:{fontSize:11},columnStyles:{0:{cellWidth:120,fontStyle:"normal"},1:{halign:"right",cellWidth:60,fontStyle:"normal"}},didParseCell:function(o){o.row.index===A.length-1&&(o.cell.styles.fontStyle="bold",o.cell.styles.fontSize=14,o.cell.styles.fillColor=[231,76,60],o.cell.styles.textColor=[255,255,255])}});const F=e.getNumberOfPages();for(let o=1;o<=F;o++)e.setPage(o),e.setDrawColor(200,200,200),e.line(n,y-15,p-n,y-15),e.setFontSize(8),e.setTextColor(127,140,141),e.setFont("helvetica","normal"),e.text(`${t("invoiceReport.pdf.generatedOn")} ${new Date().toLocaleString()}`,n,y-10),e.text(`${t("invoiceReport.pdf.page")} ${o} ${t("invoiceReport.pdf.of")} ${F}`,p-n,y-10,{align:"right"});return e.save(T),T};export{O as generateInvoiceResumePDF};
