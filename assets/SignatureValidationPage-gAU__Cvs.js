import{aa as D,c as m,D as w,e as j,t as c,j as a,i as d,a as p,b as y,S as f,w as P,d as I}from"./index-CS63pYUf.js";import{S as B}from"./SignatureValidationView-DzzU5dX4.js";import{z as F}from"./taxPortalApi-BbTe9OBi.js";import"./drakeTypes-BxRsJFbg.js";var M=c(`<div><div></div><p>Loading signature validation data...</p><style>
              @keyframes spin {
                to { transform: rotate(360deg); }
              }
            `),N=c('<div><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"clip-rule=evenodd></path></svg><h2>Validation Error</h2><p>'),G=c('<div><h1><svg viewBox="0 0 20 20"fill=currentColor><path fill-rule=evenodd d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"clip-rule=evenodd></path></svg>Signature Validation</h1><p>Verify the authenticity of the electronic signature'),U=c("<div><button>Engagement Letter</button><button>E-Filing PIN (Form 8879)"),H=c("<div><p>This validation page provides an audit trail for electronic signatures.</p><p>Request ID: <!> | Generated: "),J=c("<div><div>");const X=()=>{const g=D(),[o,C]=m(null),[h,x]=m(!0),[v,u]=m(null),$=()=>{if(g.type==="pin"||g.type==="e-filing")return"pin";if(g.type==="engagement"||g.type==="letter")return"engagement";const n=o();return n?.clientSigningPin?.pin?"pin":(n?.clientSignature?.signedAt,"engagement")};w(async()=>{const n=g.accessToken,s=g.id;if(!n||!s){u("Invalid access link. Please check the URL."),x(!1);return}try{const e=await F(s,n,!0);if(e){C(e);const t=!!e.clientSignature?.signedAt,r=!!e.clientSigningPin?.pin;!t&&!r&&u("No signature data found for this document request.")}else u("Document request not found or access denied.")}catch(e){j("Error loading document request:",e),u("Error loading signature data. Please try again.")}finally{x(!1)}});const k={"min-height":"100vh",background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)",padding:"2rem"},q={"max-width":"900px",margin:"0 auto"},z={display:"flex","flex-direction":"column","align-items":"center","justify-content":"center","min-height":"50vh",color:"#64748b"},E={background:"#fef2f2",border:"1px solid #fecaca","border-radius":"12px",padding:"2rem","text-align":"center",color:"#dc2626"},L={"text-align":"center","margin-bottom":"2rem"},V={"font-size":"1.5rem","font-weight":"700",color:"#1e3a5f","margin-bottom":"0.5rem"},T={color:"#64748b","font-size":"0.875rem"},A={display:"flex",gap:"0.5rem","justify-content":"center","margin-bottom":"1.5rem"},_=n=>({padding:"0.75rem 1.5rem","border-radius":"8px",border:"none",background:n?"linear-gradient(135deg, #8b5cf6, #6d28d9)":"#f1f5f9",color:n?"white":"#64748b","font-weight":"500",cursor:"pointer",transition:"all 0.2s ease"}),[b,S]=m($());return w(()=>{o()&&S($())}),(()=>{var n=J(),s=n.firstChild;return a(n,k),a(s,q),d(s,p(f,{get when(){return h()},get children(){var e=M(),t=e.firstChild;return t.style.setProperty("width","48px"),t.style.setProperty("height","48px"),t.style.setProperty("border","4px solid #e2e8f0"),t.style.setProperty("border-top-color","#8b5cf6"),t.style.setProperty("border-radius","50%"),t.style.setProperty("animation","spin 1s linear infinite"),t.style.setProperty("margin-bottom","1rem"),y(r=>a(e,z,r)),e}}),null),d(s,p(f,{get when(){return P(()=>!h())()&&v()},get children(){var e=N(),t=e.firstChild,r=t.nextSibling,i=r.nextSibling;return t.style.setProperty("width","48px"),t.style.setProperty("height","48px"),t.style.setProperty("margin-bottom","1rem"),r.style.setProperty("font-size","1.25rem"),r.style.setProperty("font-weight","600"),r.style.setProperty("margin-bottom","0.5rem"),d(i,v),y(l=>a(e,E,l)),e}}),null),d(s,p(f,{get when(){return P(()=>!h()&&!v())()&&o()},get children(){return[(()=>{var e=G(),t=e.firstChild,r=t.firstChild,i=t.nextSibling;return a(t,V),r.style.setProperty("width","28px"),r.style.setProperty("height","28px"),r.style.setProperty("vertical-align","middle"),r.style.setProperty("margin-right","0.5rem"),r.style.setProperty("color","#8b5cf6"),a(i,T),y(l=>a(e,L,l)),e})(),p(f,{get when(){return P(()=>!!o()?.clientSignature?.signedAt)()&&o()?.clientSigningPin?.pin},get children(){var e=U(),t=e.firstChild,r=t.nextSibling;return a(e,A),t.$$click=()=>S("engagement"),r.$$click=()=>S("pin"),y(i=>{var l=_(b()==="engagement"),R=_(b()==="pin");return i.e=a(t,l,i.e),i.t=a(r,R,i.t),i},{e:void 0,t:void 0}),e}}),p(B,{get request(){return o()},get type(){return b()}}),(()=>{var e=H(),t=e.firstChild,r=t.nextSibling,i=r.firstChild,l=i.nextSibling;return l.nextSibling,e.style.setProperty("margin-top","2rem"),e.style.setProperty("text-align","center"),e.style.setProperty("color","#94a3b8"),e.style.setProperty("font-size","0.75rem"),r.style.setProperty("margin-top","0.25rem"),d(r,()=>o()?.id,l),d(r,()=>new Date().toLocaleString(),null),e})()]}}),null),n})()};I(["click"]);export{X as default};
