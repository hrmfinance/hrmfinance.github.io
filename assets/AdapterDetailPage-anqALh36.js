import{t as s,i as n,b as p,j as e,aa as wt,c as ne,o as _t,g as $e,a,a2 as Ct,S as f,F as ie,w as kt,d as Pt}from"./index-CFoIMCmd.js";import{s as m}from"./supervisionStore-CK6JM6fT.js";import{L as Et}from"./LockStatusBadge-DJUsjalr.js";import{M as W,L as we}from"./ActionButton-Cs1CKkKQ.js";var Tt=s("<span>");const Lt=d=>{const F=()=>{switch(d.source){case W.AI_GENERATED:return{label:"AI",color:"#8B5CF6",bgColor:"rgba(139, 92, 246, 0.1)"};case W.USER_CREATED:return{label:"User",color:"#3B82F6",bgColor:"rgba(59, 130, 246, 0.1)"};case W.USER_MODIFIED:return{label:"Edited",color:"#F59E0B",bgColor:"rgba(245, 158, 11, 0.1)"};case W.SYSTEM_DEFAULT:return{label:"System",color:"#6B7280",bgColor:"rgba(107, 114, 128, 0.1)"};default:return{label:"Unknown",color:"#6B7280",bgColor:"rgba(107, 114, 128, 0.1)"}}},w=()=>F(),u=()=>({display:"inline-flex","align-items":"center","justify-content":"center",padding:"0.25rem 0.625rem","border-radius":"9999px","font-size":"0.75rem","font-weight":"600",color:w().color,background:w().bgColor,border:`1px solid ${w().color}`,"letter-spacing":"0.025em"});return(()=>{var $=Tt();return n($,()=>w().label),p(ae=>e($,u(),ae)),$})()};var Mt=s('<svg width=16 height=16 viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><path d="M19 12H5"></path><polyline points="12 19 5 12 12 5">'),Ft=s("<div><p>Loading adapter details..."),_e=s("<div>"),At=s('<div><div><h1></h1><div><button><svg width=16 height=16 viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>Test</button><button><svg width=16 height=16 viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2><rect x=3 y=11 width=18 height=11 rx=2 ry=2></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>Lock</button></div></div><div><span>Last used: </span><span>|</span><span>Success: '),Bt=s("<div><p>No field mappings configured for this adapter."),Dt=s("<div><h2>FIELD MAPPINGS</h2><table><thead><tr><th>Source Field</th><th>Transform</th><th>Target Field</th><th>Status</th><th>Actions</th></tr></thead><tbody>"),Nt=s("<span>"),zt=s("<div><span>Confidence: <!>%</span><span>(needs review)"),Ot=s("<button>Lock"),Rt=s("<div><div>Version History"),Ut=s("<tr><td><span></span></td><td></td><td><span></span></td><td><div></div></td><td><div><button>Edit</button><button>History"),It=s("<span>-"),Ht=s("<button>Unlock"),Jt=s("<div>No previous versions"),jt=s("<div><span>v</span><span></span><span>"),Kt=s("<div><div>EDIT MAPPING: <!> -> </div><div><div><label>Source Path:</label><input type=text></div><div><label>Transform:</label><select></select></div><div><label>Target Field:</label><input type=text></div></div><div><label>Confidence:</label><div><div><div></div></div><span>%</span></div></div><div><div>Test Cases:</div></div><div><button>Cancel</button><button>Save Mapping"),Gt=s("<option>"),Vt=s("<div><span>Input: </span><span>-></span><span>Output: </span><span>");const ke=[{value:"none",label:"None"},{value:"uppercase",label:"UPPERCASE"},{value:"lowercase",label:"lowercase"},{value:"trim",label:"Trim whitespace"},{value:"toNumber",label:"To Number"},{value:"toString",label:"To String"},{value:"toDate",label:"To Date"},{value:"toBoolean",label:"To Boolean"},{value:"parseJSON",label:"Parse JSON"},{value:"stringifyJSON",label:"Stringify JSON"},{value:"split",label:"Split"},{value:"join",label:"Join"},{value:"replace",label:"Replace"},{value:"extract",label:"Extract"},{value:"custom",label:"Custom"}],Yt=d=>{const F=ke.find(w=>w.value===d);return F?F.label:d},Ce={LOCKED:"#22c55e"},Zt=()=>{const d=wt(),[F,w]=ne(null),[u,$]=ne({sourcePath:"",transform:"none",targetPath:"",confidence:0}),[ae,be]=ne([]),[ve,Pe]=ne(null);_t(()=>{d.id&&(m.loadAdapterById(d.id),m.loadFieldMappings(d.id))});const Ee=$e(()=>m.selectedAdapter()),me=$e(()=>m.fieldMappings()),Te=o=>o?new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}):"Never",Le=o=>{if(!o)return"0/0 (0%)";const i=o.successRate.toFixed(1);return`${o.successCount.toLocaleString()}/${o.processedCount.toLocaleString()} (${i}%)`},Me=o=>o.confidence<.6,Fe=o=>{w(o),$({sourcePath:o.sourcePath,transform:o.transform,targetPath:o.targetPath,confidence:o.confidence*100});const i=o.testCases.map(g=>({input:g.input,output:g.expectedOutput,success:g.isPassing}));be(i.length>0?i:[{input:1e3,output:10,success:!0},{input:2550,output:25.5,success:!0}])},he=()=>{w(null),$({sourcePath:"",transform:"none",targetPath:"",confidence:0}),be([])},Ae=async()=>{const o=F();if(!(!o||!d.id))try{await m.updateFieldMapping(d.id,o.id,{sourcePath:u().sourcePath,transform:u().transform,targetPath:u().targetPath}),he()}catch(i){alert("Failed to save mapping: "+(i instanceof Error?i.message:"Unknown error"))}},Be=async o=>{if(d.id)try{await m.lockFieldMapping(d.id,o,"Locked by user")}catch(i){alert("Failed to lock mapping: "+(i instanceof Error?i.message:"Unknown error"))}},De=async o=>{if(d.id)try{await m.unlockFieldMapping(d.id,o)}catch(i){alert("Failed to unlock mapping: "+(i instanceof Error?i.message:"Unknown error"))}},Ne=async()=>{if(d.id)try{await m.lockAdapter(d.id,"Locked all by user")}catch(o){alert("Failed to lock adapter: "+(o instanceof Error?o.message:"Unknown error"))}},ze=async()=>{if(d.id)try{await m.testAdapter(d.id,{}),alert("Test completed successfully")}catch(o){alert("Test failed: "+(o instanceof Error?o.message:"Unknown error"))}},Oe=o=>{Pe(ve()===o?null:o)},Re={padding:"1.5rem","min-height":"100vh",background:"var(--bg-primary, #f8fafc)"},Ue={display:"inline-flex","align-items":"center",gap:"0.5rem",color:"var(--text-muted, #6b7280)","text-decoration":"none","font-size":"0.875rem","margin-bottom":"1rem",cursor:"pointer"},fe={background:"white","border-radius":"0.75rem",border:"1px solid var(--border-color, #e5e7eb)","margin-bottom":"1.5rem",overflow:"hidden"},Ie={display:"flex","justify-content":"space-between","align-items":"center",padding:"1.25rem 1.5rem","border-bottom":"1px solid var(--border-color, #e5e7eb)"},He={"font-size":"1.5rem","font-weight":"700",color:"var(--text-primary, #1e293b)",margin:"0"},Je={display:"flex",gap:"0.75rem"},pe={display:"inline-flex","align-items":"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"var(--primary-color, #3b82f6)",color:"white",border:"none","border-radius":"0.5rem","font-weight":"500","font-size":"0.875rem",cursor:"pointer"},ye={display:"inline-flex","align-items":"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"white",color:"var(--text-primary, #374151)",border:"1px solid var(--border-color, #e5e7eb)","border-radius":"0.5rem","font-weight":"500","font-size":"0.875rem",cursor:"pointer"},je={...ye,color:Ce.LOCKED,"border-color":Ce.LOCKED},Ke={display:"flex",gap:"1.5rem",padding:"1rem 1.5rem","font-size":"0.875rem",color:"var(--text-muted, #6b7280)",background:"var(--bg-secondary, #f9fafb)"},Ge={"font-size":"0.875rem","font-weight":"600",color:"var(--text-primary, #1e293b)","text-transform":"uppercase","letter-spacing":"0.05em",padding:"1rem 1.5rem","border-bottom":"1px solid var(--border-color, #e5e7eb)",margin:"0"},Ve={width:"100%","border-collapse":"collapse"},Ye={background:"var(--bg-secondary, #f9fafb)","font-size":"0.75rem","font-weight":"600",color:"var(--text-muted, #6b7280)","text-transform":"uppercase","letter-spacing":"0.05em"},j={padding:"0.75rem 1rem","text-align":"left","border-bottom":"1px solid var(--border-color, #e5e7eb)"},qe=o=>({background:o%2===0?"white":"var(--bg-secondary, #f9fafb)"}),K={padding:"1rem","border-bottom":"1px solid var(--border-color, #e5e7eb)","vertical-align":"top"},Qe={...K,width:"140px"},We={...K,"white-space":"nowrap"},Se={"font-family":"monospace","font-size":"0.875rem",color:"var(--text-primary, #1e293b)"},Xe={display:"inline-flex","align-items":"center",gap:"0.25rem",padding:"0.25rem 0.5rem",background:"rgba(139, 92, 246, 0.1)",color:"#8b5cf6","border-radius":"0.25rem","font-size":"0.75rem","font-weight":"500"},Ze={display:"flex","flex-direction":"column",gap:"0.25rem","font-size":"0.75rem",color:"#f59e0b","margin-top":"0.5rem"},et={display:"flex",gap:"0.5rem","margin-top":"0.5rem"},X={padding:"0.25rem 0.5rem","font-size":"0.75rem","font-weight":"500","border-radius":"0.25rem",border:"1px solid var(--border-color, #e5e7eb)",background:"white",color:"var(--text-primary, #374151)",cursor:"pointer"},tt={background:"var(--bg-secondary, #f9fafb)",border:"1px solid var(--border-color, #e5e7eb)","border-radius":"0.5rem",margin:"1.5rem",padding:"1.5rem"},rt={"font-size":"1rem","font-weight":"600",color:"var(--text-primary, #1e293b)","margin-bottom":"1.25rem"},Z={display:"flex","flex-direction":"column",gap:"0.5rem","margin-bottom":"1rem"},ee={"font-size":"0.875rem","font-weight":"500",color:"var(--text-primary, #374151)"},se={padding:"0.625rem 0.875rem",border:"1px solid var(--border-color, #e5e7eb)","border-radius":"0.375rem","font-size":"0.875rem",background:"white",width:"100%","box-sizing":"border-box"},ot={...se,cursor:"pointer"},lt={display:"flex","align-items":"center",gap:"1rem","margin-bottom":"1.5rem"},nt={flex:"1",height:"12px",background:"rgba(0, 0, 0, 0.1)","border-radius":"6px",overflow:"hidden"},it=o=>({width:`${o}%`,height:"100%",background:o>=80?"#10b981":o>=60?"#f59e0b":"#ef4444","border-radius":"6px",transition:"width 0.3s ease"}),at={"margin-top":"1.5rem","padding-top":"1.5rem","border-top":"1px solid var(--border-color, #e5e7eb)"},st={"font-size":"0.875rem","font-weight":"600",color:"var(--text-primary, #1e293b)","margin-bottom":"0.75rem"},dt={display:"flex","align-items":"center",gap:"1rem",padding:"0.5rem 0","font-size":"0.875rem","font-family":"monospace"},ct={color:"#10b981","font-weight":"600"},ut={display:"flex","justify-content":"flex-end",gap:"0.75rem","margin-top":"1.5rem","padding-top":"1.5rem","border-top":"1px solid var(--border-color, #e5e7eb)"},gt={background:"rgba(139, 92, 246, 0.05)",border:"1px solid rgba(139, 92, 246, 0.2)","border-radius":"0.375rem",padding:"0.75rem","margin-top":"0.5rem","font-size":"0.75rem"},bt={display:"flex","justify-content":"space-between",padding:"0.375rem 0","border-bottom":"1px solid rgba(139, 92, 246, 0.1)"};return(()=>{var o=_e();return e(o,Re),n(o,a(Ct,{href:"/supervision/adapters",style:Ue,get children(){return[Mt(),"Back to Adapters"]}}),null),n(o,a(f,{get when(){return m.isLoading()},get children(){var i=Ft();return i.style.setProperty("text-align","center"),i.style.setProperty("padding","4rem"),i}}),null),n(o,a(f,{get when(){return m.error()},get children(){var i=_e();return i.style.setProperty("padding","1rem"),i.style.setProperty("background","rgba(239, 68, 68, 0.1)"),i.style.setProperty("border","1px solid #ef4444"),i.style.setProperty("border-radius","0.5rem"),i.style.setProperty("color","#ef4444"),i.style.setProperty("margin-bottom","1rem"),n(i,()=>m.error()),i}}),null),n(o,a(f,{get when(){return Ee()},children:i=>[(()=>{var g=At(),N=g.firstChild,z=N.firstChild,O=z.nextSibling,G=O.firstChild,V=G.nextSibling,Y=N.nextSibling,R=Y.firstChild;R.firstChild;var te=R.nextSibling,re=te.nextSibling;return re.firstChild,e(N,Ie),e(z,He),n(z,()=>i().displayName),e(O,Je),G.$$click=ze,V.$$click=Ne,e(Y,Ke),n(R,()=>Te(i()?.timestamps?.lastProcessedAt),null),n(re,()=>Le(i()),null),p(_=>{var r=fe,C=pe,b=je;return _.e=e(g,r,_.e),_.t=e(G,C,_.t),_.a=e(V,b,_.a),_},{e:void 0,t:void 0,a:void 0}),g})(),(()=>{var g=Dt(),N=g.firstChild,z=N.nextSibling,O=z.firstChild,G=O.firstChild,V=G.firstChild,Y=V.nextSibling,R=Y.nextSibling,te=R.nextSibling,re=te.nextSibling,_=O.nextSibling;return n(_,a(ie,{get each(){return me()},children:(r,C)=>(()=>{var b=Ut(),A=b.firstChild,B=A.firstChild,y=A.nextSibling,k=y.nextSibling,D=k.firstChild,P=k.nextSibling,h=P.firstChild,U=P.nextSibling,T=U.firstChild,I=T.firstChild,H=I.nextSibling;return n(B,()=>r?.sourcePath),n(y,a(f,{get when(){return r.transform!=="none"},get fallback(){return(()=>{var t=It();return t.style.setProperty("color","#9ca3af"),t})()},get children(){var t=Nt();return e(t,Xe),n(t,()=>Yt(r?.transform)),t}})),n(D,()=>r?.targetPath),h.style.setProperty("display","flex"),h.style.setProperty("flex-direction","column"),h.style.setProperty("gap","0.5rem"),n(h,a(f,{get when(){return r?.lock?.status!==we.UNLOCKED},get children(){return a(Et,{get status(){return r?.lock?.status},size:"sm"})}}),null),n(h,a(f,{get when(){return r?.source===W.AI_GENERATED},get children(){return a(Lt,{get source(){return r?.source}})}}),null),n(h,a(f,{get when(){return Me(r)},get children(){var t=zt(),c=t.firstChild,v=c.firstChild,S=v.nextSibling;S.nextSibling;var x=c.nextSibling;return n(c,()=>Math.round(r?.confidence*100),S),x.style.setProperty("font-style","italic"),p(L=>e(t,Ze,L)),t}}),null),e(T,et),I.$$click=()=>Fe(r),n(T,a(f,{get when(){return r?.lock?.status===we.UNLOCKED},get fallback(){return(()=>{var t=Ht();return t.$$click=()=>De(r.id),p(c=>e(t,X,c)),t})()},get children(){var t=Ot();return t.$$click=()=>Be(r.id),p(c=>e(t,X,c)),t}}),H),H.$$click=()=>Oe(r.id),n(U,a(f,{get when(){return ve()===r.id},get children(){var t=Rt(),c=t.firstChild;return e(t,gt),c.style.setProperty("font-weight","600"),c.style.setProperty("margin-bottom","0.5rem"),n(t,a(f,{get when(){return r.previousVersions.length>0},get fallback(){return(()=>{var v=Jt();return v.style.setProperty("color","#6b7280"),v})()},get children(){return a(ie,{get each(){return r.previousVersions.slice(0,5)},children:v=>(()=>{var S=jt(),x=S.firstChild;x.firstChild;var L=x.nextSibling,M=L.nextSibling;return e(S,bt),n(x,()=>v.version,null),n(L,()=>v.changeDescription),n(M,()=>new Date(v.timestamp).toLocaleDateString()),S})()})}}),null),t}}),null),p(t=>{var c=qe(C()),v=K,S=Se,x=K,L=K,M=Se,de=Qe,J=We,ce=X,oe=X;return t.e=e(b,c,t.e),t.t=e(A,v,t.t),t.a=e(B,S,t.a),t.o=e(y,x,t.o),t.i=e(k,L,t.i),t.n=e(D,M,t.n),t.s=e(P,de,t.s),t.h=e(U,J,t.h),t.r=e(I,ce,t.r),t.d=e(H,oe,t.d),t},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),b})()})),n(g,a(f,{get when(){return kt(()=>me().length===0)()&&!m.isLoading()},get children(){var r=Bt();return r.style.setProperty("text-align","center"),r.style.setProperty("padding","3rem"),r.style.setProperty("color","#6b7280"),r}}),null),n(g,a(f,{get when(){return F()},children:r=>(()=>{var C=Kt(),b=C.firstChild,A=b.firstChild,B=A.nextSibling;B.nextSibling;var y=b.nextSibling,k=y.firstChild,D=k.firstChild,P=D.nextSibling,h=k.nextSibling,U=h.firstChild,T=U.nextSibling,I=h.nextSibling,H=I.firstChild,t=H.nextSibling,c=y.nextSibling,v=c.firstChild,S=v.nextSibling,x=S.firstChild,L=x.firstChild,M=x.nextSibling,de=M.firstChild,J=c.nextSibling,ce=J.firstChild,oe=J.nextSibling,ue=oe.firstChild,xe=ue.nextSibling;return e(C,tt),e(b,rt),n(b,()=>r().sourcePath,B),n(b,()=>r().targetPath,null),y.style.setProperty("display","grid"),y.style.setProperty("grid-template-columns","repeat(3, 1fr)"),y.style.setProperty("gap","1rem"),P.$$input=l=>$({...u(),sourcePath:l.currentTarget.value}),T.addEventListener("change",l=>$({...u(),transform:l.currentTarget.value})),n(T,a(ie,{each:ke,children:l=>(()=>{var E=Gt();return n(E,()=>l.label),p(()=>E.value=l.value),E})()})),t.$$input=l=>$({...u(),targetPath:l.currentTarget.value}),e(S,lt),e(x,nt),M.style.setProperty("font-weight","600"),M.style.setProperty("min-width","50px"),n(M,()=>Math.round(u().confidence),de),e(J,at),e(ce,st),n(J,a(ie,{get each(){return ae()},children:l=>(()=>{var E=Vt(),q=E.firstChild;q.firstChild;var ge=q.nextSibling,Q=ge.nextSibling;Q.firstChild;var le=Q.nextSibling;return e(E,dt),n(q,()=>JSON.stringify(l.input),null),n(Q,()=>JSON.stringify(l.output),null),e(le,ct),n(le,()=>l.success?"(passed)":"(failed)"),E})()}),null),e(oe,ut),ue.$$click=he,xe.$$click=Ae,p(l=>{var E=Z,q=ee,ge=se,Q=Z,le=ee,vt=ot,mt=Z,ht=ee,ft=se,pt=Z,yt=ee,St=it(u().confidence),xt=ye,$t=pe;return l.e=e(k,E,l.e),l.t=e(D,q,l.t),l.a=e(P,ge,l.a),l.o=e(h,Q,l.o),l.i=e(U,le,l.i),l.n=e(T,vt,l.n),l.s=e(I,mt,l.s),l.h=e(H,ht,l.h),l.r=e(t,ft,l.r),l.d=e(c,pt,l.d),l.l=e(v,yt,l.l),l.u=e(L,St,l.u),l.c=e(ue,xt,l.c),l.w=e(xe,$t,l.w),l},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0}),p(()=>P.value=u().sourcePath),p(()=>T.value=u().transform),p(()=>t.value=u().targetPath),C})()}),null),p(r=>{var C=fe,b=Ge,A=Ve,B=Ye,y=j,k=j,D=j,P={...j,width:"140px"},h={...j,width:"200px"};return r.e=e(g,C,r.e),r.t=e(N,b,r.t),r.a=e(z,A,r.a),r.o=e(O,B,r.o),r.i=e(V,y,r.i),r.n=e(Y,k,r.n),r.s=e(R,D,r.s),r.h=e(te,P,r.h),r.r=e(re,h,r.r),r},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),g})()]}),null),o})()};Pt(["click","input"]);export{Zt as default};
