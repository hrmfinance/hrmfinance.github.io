import{c as b,o as ce,p as A,a as t,S as L,t as m,i as r,B as S,I as k,b as W,j as X,F as ue,M as pe,r as K,v as ge,L as me,g as ee}from"./index-wpMFRghj.js";var he=m("<div><strong></strong> "),ve=m("<div><p>Loading businesses..."),Pe=m("<div>"),fe=m("<div><h2></h2><div><div><strong>Business ID Guidelines:</strong><ul><li>Must be 10-20 characters long</li><li>Use only uppercase letters and numbers</li><li>Cannot be changed after creation</li><li>Must be unique across the system</li></ul></div></div><div>"),be=m("<div><div><h1>Business Management</h1><p>Manage business IDs and their configurations</p></div><div>"),xe=m("<div>⚠️ You need administrator privileges to access this page."),$e=m("<div><table><thead><tr><th>Business ID</th><th>Name</th><th>Description</th><th>Status</th><th>Created</th><th>Actions</th></tr></thead><tbody>"),Se=m("<div>No businesses found. Create your first business."),_e=m("<tr><td></td><td></td><td></td><td><span></span></td><td></td><td><div>");const Be=()=>{const[U,te]=b([]),[_,h]=b(!1),[re,N]=b(!1),[f,j]=b(null),[C,B]=b({id:"",name:"",description:""}),[Q,Y]=b({}),[x,c]=b(null);ce(()=>{D()});const D=async()=>{try{h(!0);const e=await A.getAllBusiness(),l=[{id:"YB100423253156428",name:"YABA"},{id:"SS695841584167881",name:"Stephanie S"},{id:"JJCM23753J15918M",name:"GUANCHO"},{id:"LMR470531564CT28",name:"LUISCUETO"}];for(const d of l)e.find(I=>I.id===d.id)||e.push({id:d.id,name:d.name,description:"Default business",isActive:!0,createdAt:new Date().toISOString(),createdBy:"system",updatedAt:new Date().toISOString()});te(e)}catch(e){console.error("Error loading businesses:",e),c({type:"error",text:"Failed to load businesses"})}finally{h(!1)}},se=()=>{const e={},l=C();return l.id.trim()?/^[A-Z0-9]{10,20}$/.test(l.id)||(e.id="Business ID must be 10-20 characters, uppercase letters and numbers only"):e.id="Business ID is required",l.name.trim()||(e.name="Business name is required"),!f()&&U().find(d=>d.id===l.id)&&(e.id="Business ID already exists"),Y(e),Object.keys(e).length===0},ie=async()=>{if(se())try{h(!0),c(null);const e=C(),l=ee.state.user;f()?(await A.updateBusiness(f().id,{name:e.name,description:e.description,updatedAt:new Date().toISOString()}),c({type:"success",text:"Business updated successfully"})):(await A.addBusiness({id:e.id,name:e.name,description:e.description,isActive:!0,createdAt:new Date().toISOString(),createdBy:l?.uid||"unknown",updatedAt:new Date().toISOString()}),c({type:"success",text:"Business created successfully"})),await D(),q()}catch(e){console.error("Error saving business:",e),c({type:"error",text:f()?"Failed to update business":"Failed to create business"})}finally{h(!1)}},ne=e=>{j(e),B({id:e.id,name:e.name,description:e.description||""}),N(!0)},le=async e=>{if(confirm(`Are you sure you want to delete "${e.name}"?`))try{h(!0),await A.deleteBusiness(e.id),c({type:"success",text:"Business deleted successfully"}),await D()}catch(l){console.error("Error deleting business:",l),c({type:"error",text:"Failed to delete business"})}finally{h(!1)}},ae=async e=>{try{h(!0),await A.updateBusiness(e.id,{isActive:!e.isActive,updatedAt:new Date().toISOString()}),c({type:"success",text:`Business ${e.isActive?"deactivated":"activated"} successfully`}),await D()}catch(l){console.error("Error toggling business status:",l),c({type:"error",text:"Failed to update business status"})}finally{h(!1)}},oe=()=>{j(null),B({id:"",name:"",description:""}),Y({}),N(!0)},q=()=>{N(!1),j(null),Y({})},de=()=>ee.state.profile?.isAdmin===!0;return t(me,{title:"Business Management",get children(){return t(L,{get when(){return de()},get fallback(){return t(X,{get children(){var e=xe();return e.style.setProperty("text-align","center"),e.style.setProperty("padding","2rem"),e.style.setProperty("color","var(--text-muted)"),e}})},get children(){var e=be(),l=e.firstChild,d=l.firstChild,I=d.nextSibling,M=l.nextSibling;return e.style.setProperty("padding","2rem"),e.style.setProperty("max-width","1200px"),e.style.setProperty("margin","0 auto"),l.style.setProperty("margin-bottom","2rem"),d.style.setProperty("font-size","2rem"),d.style.setProperty("font-weight","700"),d.style.setProperty("color","var(--text-primary)"),I.style.setProperty("color","var(--text-muted)"),I.style.setProperty("font-size","1.125rem"),M.style.setProperty("display","flex"),M.style.setProperty("justify-content","flex-end"),M.style.setProperty("margin-bottom","2rem"),r(M,t(S,{onClick:oe,variant:"primary",get disabled(){return _()},get children(){return[t(k,{name:"add",size:"1em",style:{"margin-right":"0.5rem"}}),"Create New Business"]}})),r(e,t(L,{get when(){return x()},get children(){var n=he(),i=n.firstChild;return i.nextSibling,n.style.setProperty("padding","1rem"),n.style.setProperty("margin-bottom","1rem"),n.style.setProperty("border-radius","var(--border-radius)"),r(i,()=>x().type==="success"?"✓ Success:":"⚠ Error:"),r(n,()=>x().text,null),W(s=>{var a=x().type==="success"?"var(--success-light)":"var(--error-light)",v=x().type==="success"?"var(--success-dark)":"var(--error-dark)",u=`1px solid ${x().type==="success"?"var(--success-color)":"var(--error-color)"}`;return a!==s.e&&((s.e=a)!=null?n.style.setProperty("background",a):n.style.removeProperty("background")),v!==s.t&&((s.t=v)!=null?n.style.setProperty("color",v):n.style.removeProperty("color")),u!==s.a&&((s.a=u)!=null?n.style.setProperty("border",u):n.style.removeProperty("border")),s},{e:void 0,t:void 0,a:void 0}),n}}),null),r(e,t(X,{get children(){var n=Pe();return n.style.setProperty("padding","1.5rem"),r(n,t(L,{get when(){return _()},get fallback(){return t(L,{get when(){return U().length>0},get fallback(){return(()=>{var i=Se();return i.style.setProperty("text-align","center"),i.style.setProperty("padding","2rem"),i.style.setProperty("color","var(--text-muted)"),i})()},get children(){var i=$e(),s=i.firstChild,a=s.firstChild,v=a.firstChild,u=v.firstChild,y=u.nextSibling,p=y.nextSibling,g=p.nextSibling,J=g.nextSibling,V=J.nextSibling,ye=a.nextSibling;return i.style.setProperty("overflow-x","auto"),s.style.setProperty("width","100%"),s.style.setProperty("border-collapse","collapse"),v.style.setProperty("border-bottom","2px solid var(--border-color)"),u.style.setProperty("padding","1rem"),u.style.setProperty("text-align","left"),y.style.setProperty("padding","1rem"),y.style.setProperty("text-align","left"),p.style.setProperty("padding","1rem"),p.style.setProperty("text-align","left"),g.style.setProperty("padding","1rem"),g.style.setProperty("text-align","center"),J.style.setProperty("padding","1rem"),J.style.setProperty("text-align","left"),V.style.setProperty("padding","1rem"),V.style.setProperty("text-align","center"),r(ye,t(ue,{get each(){return U()},children:o=>(()=>{var T=_e(),z=T.firstChild,E=z.nextSibling,G=E.nextSibling,O=G.nextSibling,P=O.firstChild,F=O.nextSibling,R=F.nextSibling,$=R.firstChild;return T.style.setProperty("border-bottom","1px solid var(--border-light)"),z.style.setProperty("padding","1rem"),z.style.setProperty("font-family","monospace"),r(z,()=>o.id),E.style.setProperty("padding","1rem"),E.style.setProperty("font-weight","500"),r(E,()=>o.name),G.style.setProperty("padding","1rem"),r(G,()=>o.description||"-"),O.style.setProperty("padding","1rem"),O.style.setProperty("text-align","center"),P.style.setProperty("padding","0.25rem 0.5rem"),P.style.setProperty("border-radius","4px"),P.style.setProperty("font-size","0.875rem"),r(P,()=>o.isActive?"Active":"Inactive"),F.style.setProperty("padding","1rem"),F.style.setProperty("font-size","0.875rem"),r(F,()=>new Date(o.createdAt).toLocaleDateString()),R.style.setProperty("padding","1rem"),R.style.setProperty("text-align","center"),$.style.setProperty("display","flex"),$.style.setProperty("gap","0.5rem"),$.style.setProperty("justify-content","center"),r($,t(S,{size:"sm",variant:"secondary",onClick:()=>ne(o),get children(){return t(k,{name:"edit",size:"0.875rem"})}}),null),r($,t(S,{size:"sm",variant:"secondary",onClick:()=>ae(o),get children(){return t(k,{get name(){return o.isActive?"close":"check"},size:"0.875rem"})}}),null),r($,t(S,{size:"sm",variant:"secondary",onClick:()=>le(o),style:{color:"var(--error-color)"},get children(){return t(k,{name:"delete",size:"0.875rem"})}}),null),W(w=>{var H=o.isActive?"var(--success-light)":"var(--error-light)",Z=o.isActive?"var(--success-dark)":"var(--error-dark)";return H!==w.e&&((w.e=H)!=null?P.style.setProperty("background",H):P.style.removeProperty("background")),Z!==w.t&&((w.t=Z)!=null?P.style.setProperty("color",Z):P.style.removeProperty("color")),w},{e:void 0,t:void 0}),T})()})),i}})},get children(){var i=ve(),s=i.firstChild;return i.style.setProperty("text-align","center"),i.style.setProperty("padding","2rem"),r(i,t(k,{name:"loading",size:"2rem"}),s),i}})),n}}),null),r(e,t(pe,{get isOpen(){return re()},onClose:q,size:"medium",get children(){var n=fe(),i=n.firstChild,s=i.nextSibling,a=s.firstChild,v=a.firstChild,u=v.nextSibling,y=s.nextSibling;return n.style.setProperty("padding","2rem"),i.style.setProperty("margin-bottom","1.5rem"),r(i,()=>f()?"Edit Business":"Create New Business"),s.style.setProperty("display","flex"),s.style.setProperty("flex-direction","column"),s.style.setProperty("gap","1rem"),r(s,t(K,{label:"Business ID *",get value(){return C().id},onChange:p=>B(g=>({...g,id:p.toUpperCase()})),placeholder:"e.g., YB100423253156428",get disabled(){return!!f()},get error(){return Q().id}}),a),r(s,t(K,{label:"Business Name *",get value(){return C().name},onChange:p=>B(g=>({...g,name:p})),placeholder:"e.g., YABA Express",get error(){return Q().name}}),a),r(s,t(K,{label:"Description",get value(){return C().description},onChange:p=>B(g=>({...g,description:p})),placeholder:"Optional description",multiline:!0,rows:3}),a),a.style.setProperty("margin-top","0.5rem"),a.style.setProperty("padding","1rem"),a.style.setProperty("background","var(--bg-secondary)"),a.style.setProperty("border-radius","var(--border-radius)"),a.style.setProperty("font-size","0.875rem"),u.style.setProperty("margin","0.5rem 0 0 1rem"),y.style.setProperty("display","flex"),y.style.setProperty("gap","1rem"),y.style.setProperty("justify-content","flex-end"),y.style.setProperty("margin-top","1.5rem"),r(y,t(S,{variant:"outline",onClick:q,get disabled(){return _()},children:"Cancel"}),null),r(y,t(S,{variant:"primary",onClick:ie,get disabled(){return _()},get children(){return ge(()=>!!_())()?"Saving...":f()?"Update":"Create"}}),null),n}}),null),e}})}})};export{Be as default};
