import{c as pe,o as ot,g as ve,t as L,j as t,i as o,a as w,S as D,b as T,a2 as te,F as re,w as Ce,d as nt}from"./index-s_1ENJSQ.js";import{s as C}from"./supervisionStore-CkakQZEw.js";var st=L("<div><div><div>ADAPTERS</div><div></div><div> locked</div></div><div><div>FIELD MAPPINGS</div><div></div><div>Select adapter to view</div></div><div><div>ACCOUNT MAPPINGS</div><div></div></div><div><div>LEARNED RULES</div><div></div></div><div><div>PENDING SUGGESTIONS</div><div>"),dt=L("<div><div><h3>Quick Actions</h3><div></div></div><div><h3>Recent Adapters"),at=L("<div><span>"),ct=L('<input type=text placeholder="Search adapters...">'),yt=L("<table><thead><tr><th>Name</th><th>Source Type</th><th>Confidence</th><th>Status</th><th>Actions</th></tr></thead><tbody>"),vt=L("<div>No adapters found"),ut=L("<tr><td></td><td></td><td><span>%</span></td><td><span></span></td><td><button>Load Mappings</button><button>"),gt=L("<div><p>Select an adapter to view its field mappings</p><select><option value>Select Adapter..."),ht=L("<div><div><span>Showing mappings for: </span><strong></strong></div><button>Change Adapter"),pt=L("<table><thead><tr><th>Source Field</th><th>Target Field</th><th>Transform</th><th>Confidence</th><th>Status</th><th>Actions</th></tr></thead><tbody>"),bt=L("<div>No field mappings found for this adapter"),ft=L("<option>"),xt=L("<tr><td></td><td></td><td></td><td><span>%</span></td><td><span></span></td><td><button>"),$t=L('<input type=text placeholder="Search account mappings...">'),Pt=L("<table><thead><tr><th>Transaction Type</th><th>Debit Account</th><th>Credit Account</th><th>Usage</th><th>Confidence</th><th>Status</th><th>Actions</th></tr></thead><tbody>"),St=L("<div>No account mappings found"),_t=L("<span>ü§ñ"),Ct=L("<tr><td><strong></strong></td><td><div></div><div></div></td><td><div></div><div></div></td><td><div> uses</div><div>% success</div></td><td><span>%</span></td><td><span></span></td><td>"),mt=L("<div><div><button>Find Duplicates</button><button>Auto-Deduplicate"),kt=L('<input type=text placeholder="Search layered rules by name, layer, type, transaction...">'),wt=L("<table><thead><tr><th>Rule / Criteria</th><th>Layer</th><th>Account</th><th>Side</th><th>Usage</th><th>Confidence</th><th>Status</th><th>Actions</th></tr></thead><tbody>"),Lt=L("<div>No layered rules found.<button>Migrate from Account Mappings"),At=L("<div><div></div><div>"),Rt=L("<tr><td><strong></strong><div></div></td><td><span></span></td><td><div><span></span></div><div></div><div></div></td><td><span></span></td><td><div> uses</div><div>% success</div></td><td><span>%</span></td><td><span></span></td><td><button>View</button><button>"),Mt=L('<input type=text placeholder="Search learned rules...">'),Tt=L("<table><thead><tr><th>Name</th><th>Type</th><th>Source</th><th>Confidence</th><th>Success Rate</th><th>Status</th><th>Actions</th></tr></thead><tbody>"),zt=L("<div>No learned rules found"),Nt=L("<div>"),Et=L("<tr><td><strong></strong></td><td></td><td></td><td><span>%</span></td><td><span>/</span></td><td><span></span></td><td><button>Edit</button><button>Test</button><button>"),Ut=L("<div>Loading supervision data..."),Dt=L("<div><div><h1>AI SUPERVISION</h1><button>‚Üª Refresh Data</button></div><div><button>Overview</button><button>Adapters (<!>)</button><button>‚≠ê Layered Rules (<!>)");const Ot=()=>{const[me,ke]=pe(!0),[Q,X]=pe("overview"),[W,ue]=pe(""),[ie,we]=pe(null),Le=async()=>{ke(!0);try{await Promise.all([C.loadAdapters(),C.loadLayeredRules(),C.loadPendingSuggestions()])}catch(e){console.error("Failed to load data:",e)}finally{ke(!1)}},Ae=async e=>{we(e),await C.loadFieldMappings(e)};ot(()=>{Le()});const q=ve(()=>{const e=C.layeredRules()||[];return{adapters:(C.adapters()||[]).length,lockedAdapters:C.lockedAdaptersCount(),fieldMappings:(C.fieldMappings()||[]).length,layeredRules:Array.isArray(e)?e.length:0,lockedLayeredRules:C.lockedLayeredRulesCount(),layeredByLayer:C.layeredRulesByLayer(),accountMappings:(C.accountMappings()||[]).length,learnedRules:(C.learnedRules()||[]).length,pendingSuggestions:C.pendingSuggestionsCount()}}),Re=ve(()=>{const e=W().toLowerCase();return C.adapters().filter(l=>l.name.toLowerCase().includes(e)||l.sourceType?.toLowerCase().includes(e))}),Me=ve(()=>{const e=W().toLowerCase();return C.accountMappings().filter(l=>l.transactionType?.toLowerCase().includes(e)||l.accountCode?.toLowerCase().includes(e)||l.accountName?.toLowerCase().includes(e)||l.debitAccount?.code?.toLowerCase().includes(e)||l.creditAccount?.code?.toLowerCase().includes(e)||l.debitAccount?.type?.toLowerCase().includes(e)||l.creditAccount?.type?.toLowerCase().includes(e))}),Te=ve(()=>{const e=W().toLowerCase();return C.learnedRules().filter(l=>l.name.toLowerCase().includes(e)||l.ruleType?.toLowerCase().includes(e))}),ze=ve(()=>{const e=W().toLowerCase(),l=C.layeredRules()||[];return Array.isArray(l)?l.filter(n=>n.name?.toLowerCase().includes(e)||n.layer?.toLowerCase().includes(e)||n.ruleType?.toLowerCase().includes(e)||n.criteria?.transactionType?.toLowerCase().includes(e)||n.actions?.debitAccount?.code?.toLowerCase().includes(e)||n.actions?.creditAccount?.code?.toLowerCase().includes(e)||n.account?.code?.toLowerCase().includes(e)||n.account?.name?.toLowerCase().includes(e)):[]}),Ne=e=>{switch(e){case"revenue":return"#10b981";case"payment":return"#3b82f6";case"tax":return"#f59e0b";case"cogs":return"#ef4444";case"inventory":return"#8b5cf6";case"discount":return"#ec4899";case"fee":return"#f97316";case"receivable":return"#06b6d4";case"payable":return"#6366f1";default:return"#64748b"}},ne=e=>e?"#22c55e":"#9ca3af",Y=e=>e>=.8?"#22c55e":e>=.6?"#f59e0b":"#ef4444",Ee={"min-height":"100vh",background:"#f8fafc",padding:"24px"},Ue={display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"24px"},De={"font-size":"28px","font-weight":"700",color:"#1e293b"},Ie={display:"flex",gap:"4px",background:"white",padding:"4px","border-radius":"12px","margin-bottom":"24px","box-shadow":"0 1px 3px rgba(0,0,0,0.1)"},be=e=>({padding:"10px 20px",border:"none","border-radius":"8px",background:e?"#3b82f6":"transparent",color:e?"white":"#64748b","font-weight":"500","font-size":"14px",cursor:"pointer",transition:"all 0.2s"}),Fe={display:"grid","grid-template-columns":"repeat(auto-fit, minmax(180px, 1fr))",gap:"16px","margin-bottom":"24px"},se=e=>({background:"white","border-radius":"12px",padding:"20px","border-left":`4px solid ${e}`,"box-shadow":"0 1px 3px rgba(0,0,0,0.1)",cursor:"pointer",transition:"transform 0.2s"}),ge={width:"100%",padding:"12px 16px",border:"1px solid #e2e8f0","border-radius":"8px","font-size":"14px","margin-bottom":"16px"},de={width:"100%",background:"white","border-radius":"12px",overflow:"hidden","box-shadow":"0 1px 3px rgba(0,0,0,0.1)"},x={padding:"14px 16px","text-align":"left","font-size":"12px","font-weight":"600",color:"#64748b","text-transform":"uppercase",background:"#f8fafc","border-bottom":"1px solid #e2e8f0"},$={padding:"14px 16px","border-bottom":"1px solid #f1f5f9","font-size":"14px",color:"#334155"},he={color:"#3b82f6","text-decoration":"none","font-weight":"500"},Z=e=>({display:"inline-flex","align-items":"center",padding:"4px 10px","border-radius":"20px","font-size":"12px","font-weight":"500",background:`${e}15`,color:e}),I={padding:"6px 12px",border:"1px solid #e2e8f0","border-radius":"6px",background:"white",color:"#475569","font-size":"12px",cursor:"pointer","margin-right":"8px"},Oe=()=>[(()=>{var e=st(),l=e.firstChild,n=l.firstChild,y=n.nextSibling,s=y.nextSibling,h=s.firstChild,u=l.nextSibling,p=u.firstChild,R=p.nextSibling,d=R.nextSibling,a=u.nextSibling,r=a.firstChild,i=r.nextSibling,g=a.nextSibling,m=g.firstChild,P=m.nextSibling,S=g.nextSibling,M=S.firstChild,A=M.nextSibling;return t(e,Fe),l.$$click=()=>X("adapters"),n.style.setProperty("font-size","12px"),n.style.setProperty("color","#64748b"),n.style.setProperty("margin-bottom","8px"),y.style.setProperty("font-size","32px"),y.style.setProperty("font-weight","700"),y.style.setProperty("color","#1e293b"),o(y,()=>q().adapters),s.style.setProperty("font-size","13px"),s.style.setProperty("color","#22c55e"),o(s,()=>q().lockedAdapters,h),u.$$click=()=>X("fieldMappings"),p.style.setProperty("font-size","12px"),p.style.setProperty("color","#64748b"),p.style.setProperty("margin-bottom","8px"),R.style.setProperty("font-size","32px"),R.style.setProperty("font-weight","700"),R.style.setProperty("color","#1e293b"),o(R,()=>q().fieldMappings),d.style.setProperty("font-size","13px"),d.style.setProperty("color","#64748b"),a.$$click=()=>X("accountMappings"),r.style.setProperty("font-size","12px"),r.style.setProperty("color","#64748b"),r.style.setProperty("margin-bottom","8px"),i.style.setProperty("font-size","32px"),i.style.setProperty("font-weight","700"),i.style.setProperty("color","#1e293b"),o(i,()=>q().accountMappings),g.$$click=()=>X("learnedRules"),m.style.setProperty("font-size","12px"),m.style.setProperty("color","#64748b"),m.style.setProperty("margin-bottom","8px"),P.style.setProperty("font-size","32px"),P.style.setProperty("font-weight","700"),P.style.setProperty("color","#1e293b"),o(P,()=>q().learnedRules),M.style.setProperty("font-size","12px"),M.style.setProperty("color","#64748b"),M.style.setProperty("margin-bottom","8px"),A.style.setProperty("font-size","32px"),A.style.setProperty("font-weight","700"),A.style.setProperty("color","#1e293b"),o(A,()=>q().pendingSuggestions),T(b=>{var z=se("#3b82f6"),v=se("#8b5cf6"),_=se("#f59e0b"),G=se("#10b981"),E=se("#ef4444");return b.e=t(l,z,b.e),b.t=t(u,v,b.t),b.a=t(a,_,b.a),b.o=t(g,G,b.o),b.i=t(S,E,b.i),b},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),e})(),(()=>{var e=dt(),l=e.firstChild,n=l.firstChild,y=n.nextSibling,s=l.nextSibling,h=s.firstChild;return e.style.setProperty("display","grid"),e.style.setProperty("grid-template-columns","repeat(auto-fit, minmax(300px, 1fr))"),e.style.setProperty("gap","16px"),l.style.setProperty("background","white"),l.style.setProperty("border-radius","12px"),l.style.setProperty("padding","20px"),l.style.setProperty("box-shadow","0 1px 3px rgba(0,0,0,0.1)"),n.style.setProperty("margin","0 0 16px 0"),n.style.setProperty("font-size","16px"),n.style.setProperty("color","#1e293b"),y.style.setProperty("display","flex"),y.style.setProperty("flex-direction","column"),y.style.setProperty("gap","8px"),o(y,w(te,{href:"/supervision/adapters",get style(){return{...he,padding:"12px",background:"#f8fafc","border-radius":"8px",display:"block"}},children:"View All Adapters ‚Üí"}),null),o(y,w(te,{href:"/supervision/account-mappings",get style(){return{...he,padding:"12px",background:"#f8fafc","border-radius":"8px",display:"block"}},children:"Manage Account Mappings ‚Üí"}),null),s.style.setProperty("background","white"),s.style.setProperty("border-radius","12px"),s.style.setProperty("padding","20px"),s.style.setProperty("box-shadow","0 1px 3px rgba(0,0,0,0.1)"),h.style.setProperty("margin","0 0 16px 0"),h.style.setProperty("font-size","16px"),h.style.setProperty("color","#1e293b"),o(s,w(re,{get each(){return C.adapters().slice(0,5)},children:u=>(()=>{var p=at(),R=p.firstChild;return p.style.setProperty("display","flex"),p.style.setProperty("justify-content","space-between"),p.style.setProperty("align-items","center"),p.style.setProperty("padding","8px 0"),p.style.setProperty("border-bottom","1px solid #f1f5f9"),o(p,w(te,{get href(){return`/supervision/adapters/${u.id}`},style:he,get children(){return u.name}}),R),o(R,()=>u.isLocked?"Locked":"Unlocked"),T(d=>t(R,Z(ne(u.isLocked)),d)),p})()}),null),e})()],Ge=()=>[(()=>{var e=ct();return e.$$input=l=>ue(l.currentTarget.value),T(l=>t(e,ge,l)),T(()=>e.value=W()),e})(),(()=>{var e=yt(),l=e.firstChild,n=l.firstChild,y=n.firstChild,s=y.nextSibling,h=s.nextSibling,u=h.nextSibling,p=u.nextSibling,R=l.nextSibling;return o(R,w(re,{get each(){return Re()},children:d=>(()=>{var a=ut(),r=a.firstChild,i=r.nextSibling,g=i.nextSibling,m=g.firstChild,P=m.firstChild,S=g.nextSibling,M=S.firstChild,A=S.nextSibling,b=A.firstChild,z=b.nextSibling;return o(r,w(te,{get href(){return`/supervision/adapters/${d.id}`},style:he,get children(){return d.name||d.displayName}})),o(i,()=>d.sourceType||"-"),o(m,()=>Math.round((d.confidence||0)*100),P),o(M,()=>d.isLocked?"üîí Locked":"üîì Unlocked"),o(A,w(te,{get href(){return`/supervision/adapters/${d.id}`},style:I,children:"View"}),b),b.$$click=()=>Ae(d.id),z.$$click=()=>d.isLocked?C.unlockAdapter(d.id):C.lockAdapter(d.id,"Manual lock"),o(z,()=>d.isLocked?"Unlock":"Lock"),T(v=>{var _=$,G=$,E=$,O=Y(d.confidence),F=$,N=Z(ne(d.isLocked)),V=$,c=I,U=I;return v.e=t(r,_,v.e),v.t=t(i,G,v.t),v.a=t(g,E,v.a),O!==v.o&&((v.o=O)!=null?m.style.setProperty("color",O):m.style.removeProperty("color")),v.i=t(S,F,v.i),v.n=t(M,N,v.n),v.s=t(A,V,v.s),v.h=t(b,c,v.h),v.r=t(z,U,v.r),v},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),a})()})),T(d=>{var a=de,r=x,i=x,g=x,m=x,P=x;return d.e=t(e,a,d.e),d.t=t(y,r,d.t),d.a=t(s,i,d.a),d.o=t(h,g,d.o),d.i=t(u,m,d.i),d.n=t(p,P,d.n),d},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),e})(),w(D,{get when(){return Re().length===0},get children(){var e=vt();return e.style.setProperty("text-align","center"),e.style.setProperty("padding","40px"),e.style.setProperty("color","#64748b"),e}})],Ve=()=>[w(D,{get when(){return!ie()},get children(){var e=gt(),l=e.firstChild,n=l.nextSibling;return n.firstChild,e.style.setProperty("text-align","center"),e.style.setProperty("padding","40px"),e.style.setProperty("background","white"),e.style.setProperty("border-radius","12px"),l.style.setProperty("color","#64748b"),l.style.setProperty("margin-bottom","16px"),n.addEventListener("change",y=>Ae(y.currentTarget.value)),n.style.setProperty("padding","10px 16px"),n.style.setProperty("border","1px solid #e2e8f0"),n.style.setProperty("border-radius","8px"),n.style.setProperty("font-size","14px"),o(n,w(re,{get each(){return C.adapters()},children:y=>(()=>{var s=ft();return o(s,()=>y.name),T(()=>s.value=y.id),s})()}),null),e}}),w(D,{get when(){return ie()},get children(){return[(()=>{var e=ht(),l=e.firstChild,n=l.firstChild,y=n.nextSibling,s=l.nextSibling;return e.style.setProperty("margin-bottom","16px"),e.style.setProperty("display","flex"),e.style.setProperty("justify-content","space-between"),e.style.setProperty("align-items","center"),n.style.setProperty("color","#64748b"),o(y,()=>C.adapters().find(h=>h.id===ie())?.name),s.$$click=()=>we(null),T(h=>t(s,I,h)),e})(),(()=>{var e=pt(),l=e.firstChild,n=l.firstChild,y=n.firstChild,s=y.nextSibling,h=s.nextSibling,u=h.nextSibling,p=u.nextSibling,R=p.nextSibling,d=l.nextSibling;return o(d,w(re,{get each(){return C.fieldMappings()},children:a=>(()=>{var r=xt(),i=r.firstChild,g=i.nextSibling,m=g.nextSibling,P=m.nextSibling,S=P.firstChild,M=S.firstChild,A=P.nextSibling,b=A.firstChild,z=A.nextSibling,v=z.firstChild;return o(i,()=>a.sourceField),o(g,()=>a.targetField),o(m,()=>a.transform?.type||"direct"),o(S,()=>Math.round((a.confidence||0)*100),M),o(b,()=>a.isLocked?"üîí Locked":"üîì Unlocked"),o(z,w(te,{get href(){return`/supervision/adapters/${ie()}?mapping=${a.id}`},style:I,children:"Edit"}),v),v.$$click=()=>a.isLocked?C.unlockFieldMapping(ie(),a.id):C.lockFieldMapping(ie(),a.id,"Manual lock"),o(v,()=>a.isLocked?"Unlock":"Lock"),T(_=>{var G={...$,"font-family":"monospace"},E={...$,"font-family":"monospace"},O=$,F=$,N=Y(a.confidence),V=$,c=Z(ne(a.isLocked)),U=$,B=I;return _.e=t(i,G,_.e),_.t=t(g,E,_.t),_.a=t(m,O,_.a),_.o=t(P,F,_.o),N!==_.i&&((_.i=N)!=null?S.style.setProperty("color",N):S.style.removeProperty("color")),_.n=t(A,V,_.n),_.s=t(b,c,_.s),_.h=t(z,U,_.h),_.r=t(v,B,_.r),_},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),r})()})),T(a=>{var r=de,i=x,g=x,m=x,P=x,S=x,M=x;return a.e=t(e,r,a.e),a.t=t(y,i,a.t),a.a=t(s,g,a.a),a.o=t(h,m,a.o),a.i=t(u,P,a.i),a.n=t(p,S,a.n),a.s=t(R,M,a.s),a},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),e})(),w(D,{get when(){return C.fieldMappings().length===0},get children(){var e=bt();return e.style.setProperty("text-align","center"),e.style.setProperty("padding","40px"),e.style.setProperty("color","#64748b"),e}})]}})],je=()=>[(()=>{var e=$t();return e.$$input=l=>ue(l.currentTarget.value),T(l=>t(e,ge,l)),T(()=>e.value=W()),e})(),(()=>{var e=Pt(),l=e.firstChild,n=l.firstChild,y=n.firstChild,s=y.nextSibling,h=s.nextSibling,u=h.nextSibling,p=u.nextSibling,R=p.nextSibling,d=R.nextSibling,a=l.nextSibling;return o(a,w(re,{get each(){return Me()},children:r=>(()=>{var i=Ct(),g=i.firstChild,m=g.firstChild,P=g.nextSibling,S=P.firstChild,M=S.nextSibling,A=P.nextSibling,b=A.firstChild,z=b.nextSibling,v=A.nextSibling,_=v.firstChild,G=_.firstChild,E=_.nextSibling,O=E.firstChild,F=v.nextSibling,N=F.firstChild,V=N.firstChild,c=F.nextSibling,U=c.firstChild,B=c.nextSibling;return o(m,()=>r.transactionType),o(g,w(D,{get when(){return r.source==="AI_GENERATED"},get children(){var k=_t();return k.style.setProperty("margin-left","8px"),k.style.setProperty("font-size","11px"),k.style.setProperty("color","#3b82f6"),k}}),null),S.style.setProperty("font-family","monospace"),S.style.setProperty("font-weight","600"),o(S,()=>r.debitAccount?.code||r.accountCode||"-"),M.style.setProperty("font-size","11px"),M.style.setProperty("color","#64748b"),o(M,()=>r.debitAccount?.type||""),b.style.setProperty("font-family","monospace"),b.style.setProperty("font-weight","600"),o(b,()=>r.creditAccount?.code||"-"),z.style.setProperty("font-size","11px"),z.style.setProperty("color","#64748b"),o(z,()=>r.creditAccount?.type||""),o(_,()=>r.usageCount||0,G),E.style.setProperty("font-size","11px"),o(E,()=>Math.round((r.successRate||0)*100),O),o(N,()=>Math.round((r.confidence||0)*100),V),o(U,()=>r.isLocked?r.lockInfo?.status==="AI_LOCKED"?"üîê AI Locked":"üîí Locked":"üîì Unlocked"),o(B,w(te,{get href(){return`/supervision/account-mappings?edit=${r.id}`},style:I,children:"View"})),T(k=>{var ae=$,j=$,ce=$,H=$,K=Y(r.successRate||0),ye=$,J=Y(r.confidence||0),le=$,oe=Z(ne(r.isLocked||!1)),ee=$;return k.e=t(g,ae,k.e),k.t=t(P,j,k.t),k.a=t(A,ce,k.a),k.o=t(v,H,k.o),K!==k.i&&((k.i=K)!=null?E.style.setProperty("color",K):E.style.removeProperty("color")),k.n=t(F,ye,k.n),J!==k.s&&((k.s=J)!=null?N.style.setProperty("color",J):N.style.removeProperty("color")),k.h=t(c,le,k.h),k.r=t(U,oe,k.r),k.d=t(B,ee,k.d),k},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),i})()})),T(r=>{var i=de,g=x,m=x,P=x,S=x,M=x,A=x,b=x;return r.e=t(e,i,r.e),r.t=t(y,g,r.t),r.a=t(s,m,r.a),r.o=t(h,P,r.o),r.i=t(u,S,r.i),r.n=t(p,M,r.n),r.s=t(R,A,r.s),r.h=t(d,b,r.h),r},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),e})(),w(D,{get when(){return Me().length===0},get children(){var e=St();return e.style.setProperty("text-align","center"),e.style.setProperty("padding","40px"),e.style.setProperty("color","#64748b"),e}})],Be={revenue:"#10b981",payment:"#3b82f6",tax:"#f59e0b",cogs:"#ef4444",inventory:"#8b5cf6",discount:"#ec4899",fee:"#f97316",receivable:"#06b6d4",payable:"#6366f1"},Ke=()=>[(()=>{var e=mt(),l=e.firstChild,n=l.firstChild,y=n.nextSibling;return e.style.setProperty("display","flex"),e.style.setProperty("flex-wrap","wrap"),e.style.setProperty("gap","8px"),e.style.setProperty("margin-bottom","16px"),o(e,()=>Object.entries(Be).map(([s,h])=>(()=>{var u=At(),p=u.firstChild,R=p.nextSibling;return`${h}15`!=null?u.style.setProperty("background",`${h}15`):u.style.removeProperty("background"),u.style.setProperty("padding","8px 14px"),u.style.setProperty("border-radius","6px"),`3px solid ${h}`!=null?u.style.setProperty("border-left",`3px solid ${h}`):u.style.removeProperty("border-left"),u.style.setProperty("min-width","80px"),p.style.setProperty("font-size","10px"),h!=null?p.style.setProperty("color",h):p.style.removeProperty("color"),p.style.setProperty("font-weight","600"),p.style.setProperty("text-transform","uppercase"),o(p,s),R.style.setProperty("font-size","20px"),R.style.setProperty("font-weight","700"),o(R,()=>q().layeredByLayer[s]||0),u})()),l),l.style.setProperty("margin-left","auto"),l.style.setProperty("display","flex"),l.style.setProperty("gap","8px"),l.style.setProperty("align-items","center"),n.$$click=()=>C.findDuplicates().then(s=>console.log("Duplicates:",s)),y.$$click=()=>C.deduplicateRules().then(s=>console.log("Deduplicated:",s)),T(s=>{var h={...I,background:"#f59e0b",color:"white"},u={...I,background:"#ef4444",color:"white"};return s.e=t(n,h,s.e),s.t=t(y,u,s.t),s},{e:void 0,t:void 0}),e})(),(()=>{var e=kt();return e.$$input=l=>ue(l.currentTarget.value),T(l=>t(e,ge,l)),T(()=>e.value=W()),e})(),(()=>{var e=wt(),l=e.firstChild,n=l.firstChild,y=n.firstChild,s=y.nextSibling,h=s.nextSibling,u=h.nextSibling,p=u.nextSibling,R=p.nextSibling,d=R.nextSibling,a=d.nextSibling,r=l.nextSibling;return o(r,w(re,{get each(){return ze()},children:i=>{const g=i.lock?.status||"unlocked",m=g!=="unlocked",P=i.stats?.confidence??i.confidence??0,S=i.stats?.successRate??i.successRate??0,M=i.stats?.usageCount??i.usageCount??0;return(()=>{var A=Rt(),b=A.firstChild,z=b.firstChild,v=z.nextSibling,_=b.nextSibling,G=_.firstChild,E=_.nextSibling,O=E.firstChild,F=O.firstChild,N=O.nextSibling,V=N.nextSibling,c=E.nextSibling,U=c.firstChild,B=c.nextSibling,k=B.firstChild,ae=k.firstChild,j=k.nextSibling,ce=j.firstChild,H=B.nextSibling,K=H.firstChild,ye=K.firstChild,J=H.nextSibling,le=J.firstChild,oe=J.nextSibling,ee=oe.firstChild,fe=ee.nextSibling;return o(z,()=>i.displayName||i.name||"Rule"),v.style.setProperty("font-size","11px"),v.style.setProperty("color","#64748b"),v.style.setProperty("max-width","250px"),o(v,()=>i.criteriaDescription||[Ce(()=>i.criteria?.transactionType&&`Type: ${i.criteria.transactionType}`),Ce(()=>i.criteria?.itemType&&` | Item: ${i.criteria.itemType}`),Ce(()=>i.criteria?.paymentMethod&&` | Pay: ${i.criteria.paymentMethod}`)]),o(G,()=>i.layer?.toUpperCase()),O.style.setProperty("font-family","monospace"),O.style.setProperty("font-size","12px"),F.style.setProperty("font-weight","600"),o(F,()=>i.account?.code||"-"),N.style.setProperty("font-size","11px"),N.style.setProperty("color","#64748b"),o(N,()=>i.account?.name),V.style.setProperty("font-size","10px"),V.style.setProperty("color","#94a3b8"),o(V,()=>i.account?.type),U.style.setProperty("padding","2px 8px"),U.style.setProperty("border-radius","4px"),U.style.setProperty("font-size","11px"),U.style.setProperty("font-weight","600"),o(U,()=>i.side?.toUpperCase()),o(k,M,ae),j.style.setProperty("font-size","11px"),o(j,()=>Math.round(S*100),ce),o(K,()=>Math.round(P*100),ye),o(le,g==="pending_review"?"‚è≥ Review":g==="ai_locked"?"ü§ñ AI":g==="user_locked"?"üîí Locked":"üîì Open"),ee.$$click=()=>console.log("View rule",i),fe.$$click=()=>m?C.unlockLayeredRule(i.id):C.lockLayeredRule(i.id,"Manual lock"),o(fe,m?"Unlock":"Lock"),T(f=>{var qe=$,He=$,Je=Z(Ne(i.layer)),We=$,xe=i.side==="debit"?"#3b82f6":"#10b981",Xe=$,$e=i.side==="debit"?"#3b82f615":"#10b98115",Pe=i.side==="debit"?"#3b82f6":"#10b981",Ye=$,Se=Y(S),Ze=$,_e=Y(P),et=$,tt=Z(g==="pending_review"?"#f59e0b":g==="ai_locked"?"#8b5cf6":g==="user_locked"?"#22c55e":"#9ca3af"),rt=$,it=I,lt=I;return f.e=t(b,qe,f.e),f.t=t(_,He,f.t),f.a=t(G,Je,f.a),f.o=t(E,We,f.o),xe!==f.i&&((f.i=xe)!=null?F.style.setProperty("color",xe):F.style.removeProperty("color")),f.n=t(c,Xe,f.n),$e!==f.s&&((f.s=$e)!=null?U.style.setProperty("background",$e):U.style.removeProperty("background")),Pe!==f.h&&((f.h=Pe)!=null?U.style.setProperty("color",Pe):U.style.removeProperty("color")),f.r=t(B,Ye,f.r),Se!==f.d&&((f.d=Se)!=null?j.style.setProperty("color",Se):j.style.removeProperty("color")),f.l=t(H,Ze,f.l),_e!==f.u&&((f.u=_e)!=null?K.style.setProperty("color",_e):K.style.removeProperty("color")),f.c=t(J,et,f.c),f.w=t(le,tt,f.w),f.m=t(oe,rt,f.m),f.f=t(ee,it,f.f),f.y=t(fe,lt,f.y),f},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0}),A})()}})),T(i=>{var g=de,m=x,P=x,S=x,M=x,A=x,b=x,z=x,v=x;return i.e=t(e,g,i.e),i.t=t(y,m,i.t),i.a=t(s,P,i.a),i.o=t(h,S,i.o),i.i=t(u,M,i.i),i.n=t(p,A,i.n),i.s=t(R,b,i.s),i.h=t(d,z,i.h),i.r=t(a,v,i.r),i},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),e})(),w(D,{get when(){return ze().length===0},get children(){var e=Lt(),l=e.firstChild,n=l.nextSibling;return e.style.setProperty("text-align","center"),e.style.setProperty("padding","40px"),e.style.setProperty("color","#64748b"),n.$$click=()=>C.migrateToLayeredRules().then(y=>console.log("Migrated:",y)),T(y=>t(n,{...I,"margin-left":"12px"},y)),e}})],Qe=()=>[(()=>{var e=Mt();return e.$$input=l=>ue(l.currentTarget.value),T(l=>t(e,ge,l)),T(()=>e.value=W()),e})(),(()=>{var e=Tt(),l=e.firstChild,n=l.firstChild,y=n.firstChild,s=y.nextSibling,h=s.nextSibling,u=h.nextSibling,p=u.nextSibling,R=p.nextSibling,d=R.nextSibling,a=l.nextSibling;return o(a,w(re,{get each(){return Te()},children:r=>(()=>{var i=Et(),g=i.firstChild,m=g.firstChild,P=g.nextSibling,S=P.nextSibling,M=S.nextSibling,A=M.firstChild,b=A.firstChild,z=M.nextSibling,v=z.firstChild,_=v.firstChild,G=z.nextSibling,E=G.firstChild,O=G.nextSibling,F=O.firstChild,N=F.nextSibling,V=N.nextSibling;return o(m,()=>r.name),o(g,w(D,{get when(){return r.description},get children(){var c=Nt();return c.style.setProperty("font-size","12px"),c.style.setProperty("color","#64748b"),o(c,()=>r.description),c}}),null),o(P,()=>r.ruleType),o(S,()=>r.sourceType),o(A,()=>Math.round((r.confidence||0)*100),b),o(v,()=>r.successCount,_),o(v,()=>r.processedCount,null),o(E,()=>r.isLocked?"üîí Locked":"üîì Unlocked"),F.$$click=()=>console.log("Edit rule",r.id),N.$$click=()=>console.log("Test rule",r.id),V.$$click=()=>r.isLocked?C.unlockLearnedRule(r.id):C.lockLearnedRule(r.id,"Manual lock"),o(V,()=>r.isLocked?"Unlock":"Lock"),T(c=>{var U=$,B=$,k=$,ae=$,j=Y(r.confidence),ce=$,H=r.successCount>r.failureCount?"#22c55e":"#ef4444",K=$,ye=Z(ne(r.isLocked)),J=$,le=I,oe=I,ee=I;return c.e=t(g,U,c.e),c.t=t(P,B,c.t),c.a=t(S,k,c.a),c.o=t(M,ae,c.o),j!==c.i&&((c.i=j)!=null?A.style.setProperty("color",j):A.style.removeProperty("color")),c.n=t(z,ce,c.n),H!==c.s&&((c.s=H)!=null?v.style.setProperty("color",H):v.style.removeProperty("color")),c.h=t(G,K,c.h),c.r=t(E,ye,c.r),c.d=t(O,J,c.d),c.l=t(F,le,c.l),c.u=t(N,oe,c.u),c.c=t(V,ee,c.c),c},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0}),i})()})),T(r=>{var i=de,g=x,m=x,P=x,S=x,M=x,A=x,b=x;return r.e=t(e,i,r.e),r.t=t(y,g,r.t),r.a=t(s,m,r.a),r.o=t(h,P,r.o),r.i=t(u,S,r.i),r.n=t(p,M,r.n),r.s=t(R,A,r.s),r.h=t(d,b,r.h),r},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),e})(),w(D,{get when(){return Te().length===0},get children(){var e=zt();return e.style.setProperty("text-align","center"),e.style.setProperty("padding","40px"),e.style.setProperty("color","#64748b"),e}})];return(()=>{var e=Dt(),l=e.firstChild,n=l.firstChild,y=n.nextSibling,s=l.nextSibling,h=s.firstChild,u=h.nextSibling,p=u.firstChild,R=p.nextSibling;R.nextSibling;var d=u.nextSibling,a=d.firstChild,r=a.nextSibling;return r.nextSibling,t(e,Ee),t(l,Ue),t(n,De),y.$$click=Le,t(s,Ie),h.$$click=()=>X("overview"),u.$$click=()=>X("adapters"),o(u,()=>q().adapters,R),d.$$click=()=>X("layeredRules"),o(d,()=>q().layeredRules,r),o(e,w(D,{get when(){return me()},get children(){var i=Ut();return i.style.setProperty("text-align","center"),i.style.setProperty("padding","60px"),i.style.setProperty("color","#64748b"),i}}),null),o(e,w(D,{get when(){return!me()},get children(){return[w(D,{get when(){return Q()==="overview"},get children(){return Oe()}}),w(D,{get when(){return Q()==="adapters"},get children(){return Ge()}}),w(D,{get when(){return Q()==="fieldMappings"},get children(){return Ve()}}),w(D,{get when(){return Q()==="layeredRules"},get children(){return Ke()}}),w(D,{get when(){return Q()==="accountMappings"},get children(){return je()}}),w(D,{get when(){return Q()==="learnedRules"},get children(){return Qe()}})]}}),null),T(i=>{var g={...I,background:"#3b82f6",color:"white"},m=be(Q()==="overview"),P=be(Q()==="adapters"),S=be(Q()==="layeredRules");return i.e=t(y,g,i.e),i.t=t(h,m,i.t),i.a=t(u,P,i.a),i.o=t(d,S,i.o),i},{e:void 0,t:void 0,a:void 0,o:void 0}),e})()};nt(["click","input"]);export{Ot as default};
