import{E as ee,G as te,c as p,o as re,H as L,h as H,t as o,j as n,i as s,a as y,b as a,S as v,w as T,d as ie}from"./index-ClfekGdk.js";var R=o("<div>"),ne=o("<h2>Verificando..."),ae=o("<p>Por favor espere mientras verificamos su cÃ³digo de autenticaciÃ³n..."),oe=o("<div>âœ…"),le=o("<h2>Â¡AutenticaciÃ³n Exitosa!"),se=o("<p>Has iniciado sesiÃ³n correctamente con tu cÃ³digo de verificaciÃ³n.<br>SerÃ¡s redirigido al panel de control en breve..."),de=o("<div>ğŸ”"),ce=o("<h2>Verificar CÃ³digo"),ue=o("<p>Ingrese el cÃ³digo de verificaciÃ³n que recibiÃ³ por email"),me=o("<form><div><label>Email</label><input type=email placeholder=tu@email.com required></div><div><label>CÃ³digo de VerificaciÃ³n</label><input type=text placeholder=123456 maxlength=6 pattern=[0-9]{6} required></div><button type=submit>"),W=o("<button>Volver al inicio de sesiÃ³n"),ge=o("<div>âŒ"),pe=o("<h2>Error de AutenticaciÃ³n"),ye=o("<p>"),ve=o("<div><strong>ğŸ’¡ Posibles causas:</strong><ul><li>El enlace ya fue utilizado</li><li>El enlace expirÃ³ (vÃ¡lido por 15 minutos)</li><li>El token es invÃ¡lido</li></ul><p>Por favor solicite un nuevo Magic Link desde la pÃ¡gina de inicio de sesiÃ³n."),fe=o("<div><div>");const he=()=>{const[D]=ee(),f=te(),[d,b]=p(!1),[x,z]=p(!1),[h,c]=p(null),[V,G]=p(!1),[k,M]=p(""),[P,N]=p("");re(async()=>{const l=D.token;if(l){b(!0);try{const i=await L.verifyMagicLink(l);i.success&&i.user?(z(!0),await H.signInWithMagicLink(i.user,i.token),setTimeout(()=>{f("/dashboard",{replace:!0})},2e3)):c(i.message||"Token invÃ¡lido o expirado")}catch(i){c(i.message||"Error al verificar el token")}finally{b(!1)}}else{G(!0);const i=L.getPendingRequest();i&&M(i.email)}});const B=async l=>{if(l.preventDefault(),!k()||!P()){c("Por favor ingrese su email y cÃ³digo de verificaciÃ³n");return}b(!0),c(null);try{const i=await L.verifyCode(k(),P());i.success&&i.user?(z(!0),await H.signInWithMagicLink(i.user,i.token),setTimeout(()=>{f("/dashboard",{replace:!0})},2e3)):c(i.message||"CÃ³digo invÃ¡lido o expirado")}catch(i){c(i.message||"Error al verificar el cÃ³digo")}finally{b(!1)}},J={"min-height":"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex","align-items":"center","justify-content":"center",padding:"2rem"},K={background:"white","border-radius":"1rem","box-shadow":"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","max-width":"500px",width:"100%",padding:"3rem","text-align":"center"},O={width:"50px",height:"50px",margin:"0 auto 2rem",border:"3px solid rgba(102, 126, 234, 0.3)","border-top-color":"#667eea","border-radius":"50%",animation:"spin 1s linear infinite"},S={"font-size":"4rem","margin-bottom":"1.5rem"},$={"font-size":"1.5rem","font-weight":"700",color:"#2d3748","margin-bottom":"1rem"},_={color:"#718096","line-height":"1.6","margin-bottom":"2rem"},w={padding:"0.75rem 2rem","font-size":"1rem","font-weight":"600",color:"white",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none","border-radius":"0.5rem",cursor:"pointer",transition:"opacity 0.2s"},E=document.createElement("style");E.textContent=`
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  `,document.head.querySelector("style[data-magic-link-spinner]")||(E.setAttribute("data-magic-link-spinner","true"),document.head.appendChild(E));const q={width:"100%",padding:"0.75rem 1rem","font-size":"1rem",border:"2px solid #e2e8f0","border-radius":"0.5rem","margin-bottom":"1rem",transition:"border-color 0.2s"},A={display:"block","text-align":"left","margin-bottom":"0.5rem","font-weight":"600",color:"#2d3748"};return(()=>{var l=fe(),i=l.firstChild;return n(l,J),s(i,y(v,{get when(){return d()},get children(){return[(()=>{var e=R();return n(e,O),e})(),(()=>{var e=ne();return a(t=>n(e,$,t)),e})(),(()=>{var e=ae();return a(t=>n(e,_,t)),e})()]}}),null),s(i,y(v,{get when(){return T(()=>!d())()&&x()},get children(){return[(()=>{var e=oe();return a(t=>n(e,S,t)),e})(),(()=>{var e=le();return a(t=>n(e,$,t)),e})(),(()=>{var e=se();return a(t=>n(e,_,t)),e})()]}}),null),s(i,y(v,{get when(){return T(()=>!!(V()&&!d()))()&&!x()},get children(){return[(()=>{var e=de();return a(t=>n(e,S,t)),e})(),(()=>{var e=ce();return a(t=>n(e,$,t)),e})(),(()=>{var e=ue();return a(t=>n(e,_,t)),e})(),(()=>{var e=me(),t=e.firstChild,u=t.firstChild,m=u.nextSibling,I=t.nextSibling,j=I.firstChild,C=j.nextSibling,g=I.nextSibling;return e.addEventListener("submit",B),e.style.setProperty("margin-top","2rem"),m.$$input=r=>M(r.currentTarget.value),C.$$input=r=>N(r.currentTarget.value),s(e,y(v,{get when(){return h()},get children(){var r=R();return r.style.setProperty("padding","0.75rem"),r.style.setProperty("margin-bottom","1rem"),r.style.setProperty("background","#fee"),r.style.setProperty("color","#c33"),r.style.setProperty("border-radius","0.5rem"),r.style.setProperty("font-size","0.875rem"),s(r,h),r}}),g),g.addEventListener("mouseleave",r=>{r.currentTarget.style.opacity="1"}),g.addEventListener("mouseenter",r=>{d()||(r.currentTarget.style.opacity="0.9")}),s(g,()=>d()?"Verificando...":"Verificar CÃ³digo"),a(r=>{var Q=A,U=q,X=A,Y={...q,"text-align":"center","font-size":"1.5rem","letter-spacing":"0.5rem","font-weight":"700"},Z=w,F=d();return r.e=n(u,Q,r.e),r.t=n(m,U,r.t),r.a=n(j,X,r.a),r.o=n(C,Y,r.o),r.i=n(g,Z,r.i),F!==r.n&&(g.disabled=r.n=F),r},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),a(()=>m.value=k()),a(()=>C.value=P()),e})(),(()=>{var e=W();return e.addEventListener("mouseleave",t=>{t.currentTarget.style.opacity="1"}),e.addEventListener("mouseenter",t=>{t.currentTarget.style.opacity="0.7"}),e.$$click=()=>f("/login",{replace:!0}),a(t=>n(e,{...w,background:"transparent",color:"#667eea","margin-top":"1rem","font-size":"0.875rem",border:"1px solid #667eea"},t)),e})()]}}),null),s(i,y(v,{get when(){return T(()=>!!(!d()&&!x()&&h()))()&&!V()},get children(){return[(()=>{var e=ge();return a(t=>n(e,S,t)),e})(),(()=>{var e=pe();return a(t=>n(e,$,t)),e})(),(()=>{var e=ye();return s(e,h),a(t=>n(e,_,t)),e})(),(()=>{var e=W();return e.addEventListener("mouseleave",t=>{t.currentTarget.style.opacity="1"}),e.addEventListener("mouseenter",t=>{t.currentTarget.style.opacity="0.9"}),e.$$click=()=>f("/login",{replace:!0}),a(t=>n(e,w,t)),e})(),(()=>{var e=ve(),t=e.firstChild,u=t.nextSibling,m=u.nextSibling;return e.style.setProperty("margin-top","2rem"),e.style.setProperty("padding","1rem"),e.style.setProperty("background","#fff3cd"),e.style.setProperty("border","1px solid #ffc107"),e.style.setProperty("border-radius","0.5rem"),e.style.setProperty("font-size","0.875rem"),e.style.setProperty("color","#856404"),e.style.setProperty("text-align","left"),u.style.setProperty("margin","0.5rem 0 0 0"),u.style.setProperty("padding-left","1.5rem"),m.style.setProperty("margin-top","0.5rem"),m.style.setProperty("margin-bottom","0"),e})()]}}),null),a(e=>n(i,K,e)),l})()};ie(["input","click"]);export{he as default};
