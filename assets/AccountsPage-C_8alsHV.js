const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BvKKROTf.css"])))=>i.map(i=>d[i]);
import{u as He,c as k,o as Je,g as ke,t as x,i as t,a as c,B as ye,w as H,S as T,au as Te,av as Ie,F as ne,b as L,W as Ae,j as y,v as ue,y as Ee,M as Ke,aw as Fe,d as Xe}from"./index-CS63pYUf.js";import{a as Z}from"./accountingStore-D8UftkWj.js";var Ye=x("<div><input type=text><select><option value=all></option></select><div><button></button><button>"),Ze=x("<div><div>"),et=x("<div><table><thead><tr><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody>"),tt=x("<div>"),rt=x("<form><div></div><div></div><div></div><div></div><div>"),ot=x("<div><div><div><h1></h1><div><button> <!> (<!>)</button><button> </button><button> </button></div></div></div> "),nt=x("<div>Cargando plantillas..."),lt=x("<div>Cargando reglas..."),at=x("<option>"),it=x("<div><div><span></span><span>(<!>)</span></div><div><table><thead><tr><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody>"),st=x("<span>"),dt=x("<tr><td></td><td></td><td></td><td></td><td><div><button>"),ze=x("<span>-"),ct=x("<tr><td></td><td></td><td><span></span></td><td></td><td></td><td><button>");const yt=Ie(()=>Fe(()=>import("./AccountTemplates-DUxpmCCd.js"),__vite__mapDeps([0]))),ut=Ie(()=>Fe(()=>import("./AccountingRules-DAGwJMk1.js"),__vite__mapDeps([0]))),vt=()=>{const{t:e}=He(),[R,ee]=k("accounts"),[le,Le]=k(!0),[qe,J]=k(!1),[te,ge]=k(null),[G,pe]=k("flat"),[ae,Me]=k("all"),[ve,Re]=k(""),[j,D]=k({code:"",name:"",accountType:"expense",taxCategory:"",description:"",parentId:""}),[me,K]=k(""),[be,he]=k(!1);Je(async()=>{try{await Z.loadAccounts()}finally{Le(!1)}});const ie=ke(()=>{let o=Z.accounts;ae()!=="all"&&(o=o.filter(A=>A.accountType===ae()));const m=ve().toLowerCase().trim();return m&&(o=o.filter(A=>A.name.toLowerCase().includes(m)||A.code.toLowerCase().includes(m)||A.description?.toLowerCase().includes(m))),o}),De=ke(()=>{const o={asset:[],liability:[],equity:[],revenue:[],expense:[]};return ie().forEach(m=>{o[m.accountType]&&o[m.accountType].push(m)}),o}),Pe={asset:e("accounting.assets","Activos"),liability:e("accounting.liabilities","Pasivos"),equity:e("accounting.equity","Capital"),revenue:e("accounting.revenue","Ingresos"),expense:e("accounting.expenses","Gastos")},re={asset:"#3b82f6",liability:"#ef4444",equity:"#22c55e",revenue:"#10b981",expense:"#f59e0b"},Ne=[{value:"",label:e("accounting.noCategory","Sin categor铆a")},{value:"gross_receipts",label:e("accounting.grossReceipts","Ingresos Brutos")},{value:"advertising",label:e("accounting.advertising","Publicidad")},{value:"car_truck",label:e("accounting.carTruck","Veh铆culos")},{value:"insurance",label:e("accounting.insurance","Seguros")},{value:"rent",label:e("accounting.rent","Renta")},{value:"supplies",label:e("accounting.supplies","Suministros")},{value:"utilities",label:e("accounting.utilities","Servicios")},{value:"wages",label:e("accounting.wages","Salarios")},{value:"other_expenses",label:e("accounting.otherExpenses","Otros Gastos")}],fe=[{value:"asset",label:e("accounting.asset","Activo")},{value:"liability",label:e("accounting.liability","Pasivo")},{value:"equity",label:e("accounting.equityType","Capital")},{value:"revenue",label:e("accounting.revenueType","Ingreso")},{value:"expense",label:e("accounting.expenseType","Gasto")}],xe=()=>{D({code:"",name:"",accountType:"expense",taxCategory:"",description:"",parentId:""}),K("")},Oe=()=>{xe(),ge(null),J(!0)},Ce=o=>{D({code:o.code,name:o.name,accountType:o.accountType,taxCategory:o.taxCategory||"",description:o.description||"",parentId:o.parentId||""}),ge(o),J(!0)},Be=async o=>{o.preventDefault(),K("");const m=j();if(!m.code.trim()){K(e("accounting.codeRequired","El c贸digo es requerido"));return}if(!m.name.trim()){K(e("accounting.nameRequired","El nombre es requerido"));return}he(!0);try{te()?await Z.updateAccount(te().id,m):await Z.addAccount(m),J(!1),xe()}catch(A){K(A.message||e("accounting.saveError","Error al guardar"))}finally{he(!1)}},_e=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o),$e={width:"100%","border-collapse":"collapse"},$={"text-align":"left",padding:"0.75rem","border-bottom":"2px solid var(--border-color)","font-weight":"600",color:"var(--text-muted)","font-size":"0.875rem"},S={padding:"0.75rem","border-bottom":"1px solid var(--border-color)"},se=o=>({padding:"0.75rem 1.5rem",border:"none",background:o?"var(--primary-color)":"transparent",color:o?"white":"var(--text-color)",cursor:"pointer","border-radius":"var(--border-radius-sm)","font-weight":o?"600":"400",transition:"all 0.2s ease","font-size":"0.875rem"}),Ve=()=>{Z.loadAccounts(),ee("accounts")};return(()=>{var o=ot(),m=o.firstChild,A=m.firstChild,X=A.firstChild,N=X.nextSibling,Q=N.firstChild,Ge=Q.firstChild,Se=Ge.nextSibling,je=Se.nextSibling,we=je.nextSibling;we.nextSibling;var Y=Q.nextSibling;Y.firstChild;var oe=Y.nextSibling;oe.firstChild;var U=m.nextSibling;return o.style.setProperty("padding","1.5rem"),m.style.setProperty("display","flex"),m.style.setProperty("justify-content","space-between"),m.style.setProperty("align-items","flex-start"),m.style.setProperty("margin-bottom","1.5rem"),X.style.setProperty("font-size","1.5rem"),X.style.setProperty("font-weight","700"),X.style.setProperty("margin-bottom","0.5rem"),t(X,()=>e("accounting.chartOfAccounts","Plan de Cuentas")),N.style.setProperty("display","flex"),N.style.setProperty("gap","0.25rem"),N.style.setProperty("background","var(--surface-secondary)"),N.style.setProperty("padding","0.25rem"),N.style.setProperty("border-radius","var(--border-radius-md)"),N.style.setProperty("width","fit-content"),Q.$$click=()=>ee("accounts"),t(Q,()=>e("accounting.accounts","Cuentas"),Se),t(Q,()=>ie().length,we),Y.$$click=()=>ee("templates"),t(Y,()=>e("accounting.templates","Plantillas"),null),oe.$$click=()=>ee("rules"),t(oe,()=>e("accounting.rules","Reglas"),null),t(m,c(T,{get when(){return R()==="accounts"},get children(){return c(ye,{variant:"primary",onClick:Oe,get children(){return["+ ",H(()=>e("accounting.newAccount","Nueva Cuenta"))]}})}}),null),t(o,c(T,{get when(){return R()==="templates"},get children(){return c(Te,{get fallback(){return(()=>{var r=nt();return r.style.setProperty("text-align","center"),r.style.setProperty("padding","2rem"),r})()},get children(){return c(yt,{onTemplateApplied:Ve})}})}}),U),t(o,c(T,{get when(){return R()==="rules"},get children(){return c(Te,{get fallback(){return(()=>{var r=lt();return r.style.setProperty("text-align","center"),r.style.setProperty("padding","2rem"),r})()},get children(){return c(ut,{onRuleCreated:()=>{}})}})}}),U),t(o,c(T,{get when(){return R()==="accounts"},get children(){var r=Ye(),i=r.firstChild,p=i.nextSibling,b=p.firstChild,v=p.nextSibling,d=v.firstChild,n=d.nextSibling;return r.style.setProperty("display","flex"),r.style.setProperty("gap","1rem"),r.style.setProperty("margin-bottom","1.5rem"),r.style.setProperty("flex-wrap","wrap"),i.$$input=l=>Re(l.currentTarget.value),i.style.setProperty("flex","1"),i.style.setProperty("min-width","200px"),i.style.setProperty("padding","0.5rem 1rem"),i.style.setProperty("border","1px solid var(--border-color)"),i.style.setProperty("border-radius","var(--border-radius-sm)"),i.style.setProperty("font-size","0.875rem"),p.addEventListener("change",l=>Me(l.currentTarget.value)),p.style.setProperty("padding","0.5rem 1rem"),p.style.setProperty("border","1px solid var(--border-color)"),p.style.setProperty("border-radius","var(--border-radius-sm)"),p.style.setProperty("font-size","0.875rem"),p.style.setProperty("background","var(--surface-color)"),t(b,()=>e("accounting.allTypes","Todos los tipos")),t(p,c(ne,{each:fe,children:l=>(()=>{var h=at();return t(h,()=>l.label),L(()=>h.value=l.value),h})()}),null),v.style.setProperty("display","flex"),v.style.setProperty("gap","0.25rem"),d.$$click=()=>pe("flat"),d.style.setProperty("padding","0.5rem 1rem"),d.style.setProperty("border","1px solid var(--border-color)"),d.style.setProperty("border-radius","var(--border-radius-sm) 0 0 var(--border-radius-sm)"),d.style.setProperty("cursor","pointer"),t(d,()=>e("accounting.flatView","Lista")),n.$$click=()=>pe("hierarchy"),n.style.setProperty("padding","0.5rem 1rem"),n.style.setProperty("border","1px solid var(--border-color)"),n.style.setProperty("border-radius","0 var(--border-radius-sm) var(--border-radius-sm) 0"),n.style.setProperty("cursor","pointer"),t(n,()=>e("accounting.groupedView","Agrupado")),L(l=>{var h=e("accounting.searchAccounts","Buscar cuentas..."),q=G()==="flat"?"var(--primary-color)":"var(--surface-color)",M=G()==="flat"?"white":"inherit",a=G()==="hierarchy"?"var(--primary-color)":"var(--surface-color)",_=G()==="hierarchy"?"white":"inherit";return h!==l.e&&Ae(i,"placeholder",l.e=h),q!==l.t&&((l.t=q)!=null?d.style.setProperty("background",q):d.style.removeProperty("background")),M!==l.a&&((l.a=M)!=null?d.style.setProperty("color",M):d.style.removeProperty("color")),a!==l.o&&((l.o=a)!=null?n.style.setProperty("background",a):n.style.removeProperty("background")),_!==l.i&&((l.i=_)!=null?n.style.setProperty("color",_):n.style.removeProperty("color")),l},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),L(()=>i.value=ve()),L(()=>p.value=ae()),r}}),U),t(o,c(T,{get when(){return le()},get children(){var r=Ze(),i=r.firstChild;return r.style.setProperty("text-align","center"),r.style.setProperty("padding","3rem"),t(i,()=>e("common.loading","Cargando...")),r}}),U),t(o,c(T,{get when(){return H(()=>!le())()&&G()==="hierarchy"},get children(){return c(ne,{get each(){return Object.entries(De()).filter(([r,i])=>i.length>0)},children:([r,i])=>(()=>{var p=it(),b=p.firstChild,v=b.firstChild,d=v.nextSibling,n=d.firstChild,l=n.nextSibling;l.nextSibling;var h=b.nextSibling,q=h.firstChild,M=q.firstChild,a=M.firstChild,_=a.firstChild,E=_.nextSibling,z=E.nextSibling,I=z.nextSibling,C=I.nextSibling,O=M.nextSibling;return p.style.setProperty("margin-bottom","1.5rem"),b.style.setProperty("display","flex"),b.style.setProperty("align-items","center"),b.style.setProperty("gap","0.5rem"),b.style.setProperty("margin-bottom","0.75rem"),v.style.setProperty("display","inline-block"),v.style.setProperty("padding","0.25rem 0.75rem"),v.style.setProperty("border-radius","9999px"),v.style.setProperty("font-size","0.75rem"),v.style.setProperty("font-weight","600"),t(v,()=>Pe[r]),d.style.setProperty("color","var(--text-muted)"),d.style.setProperty("font-size","0.875rem"),t(d,()=>i.length,l),h.style.setProperty("background","var(--surface-color)"),h.style.setProperty("border","1px solid var(--border-color)"),h.style.setProperty("border-radius","var(--border-radius-md)"),h.style.setProperty("overflow","hidden"),t(_,()=>e("accounting.code","C贸digo")),t(E,()=>e("accounting.name","Nombre")),t(z,()=>e("accounting.taxCategory","Categor铆a Fiscal")),t(I,()=>e("accounting.balance","Balance")),t(O,c(ne,{each:i,children:s=>(()=>{var w=dt(),P=w.firstChild,u=P.nextSibling,B=u.nextSibling,V=B.nextSibling,W=V.nextSibling,F=W.firstChild,f=F.firstChild;return Ae(w,"style::hover",{background:"var(--hover-color)"}),t(P,()=>s.code),t(u,()=>s.name),t(B,c(T,{get when(){return s.taxCategory},get fallback(){return(()=>{var g=ze();return g.style.setProperty("color","var(--text-muted)"),g})()},get children(){var g=st();return g.style.setProperty("padding","0.125rem 0.5rem"),g.style.setProperty("border-radius","4px"),g.style.setProperty("font-size","0.75rem"),g.style.setProperty("background","var(--surface-secondary)"),g.style.setProperty("color","var(--text-primary)"),t(g,()=>s.taxCategory),g}})),t(V,()=>_e(s.balance||0)),F.style.setProperty("display","flex"),F.style.setProperty("gap","0.25rem"),f.$$click=()=>Ce(s),f.style.setProperty("padding","0.25rem 0.5rem"),f.style.setProperty("border","none"),f.style.setProperty("background","transparent"),f.style.setProperty("color","var(--primary-color)"),f.style.setProperty("cursor","pointer"),f.style.setProperty("font-size","0.875rem"),t(f,()=>e("common.edit","Editar")),L(g=>{var de={...S,"font-family":"monospace","font-size":"0.875rem"},ce=S,Qe=S,Ue={...S,"text-align":"right","font-weight":"500"},We=S;return g.e=y(P,de,g.e),g.t=y(u,ce,g.t),g.a=y(B,Qe,g.a),g.o=y(V,Ue,g.o),g.i=y(W,We,g.i),g},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),w})()})),L(s=>{var w=re[r]+"20",P=re[r],u=$e,B=$,V=$,W=$,F={...$,"text-align":"right"},f={...$,width:"100px"};return w!==s.e&&((s.e=w)!=null?v.style.setProperty("background",w):v.style.removeProperty("background")),P!==s.t&&((s.t=P)!=null?v.style.setProperty("color",P):v.style.removeProperty("color")),s.a=y(q,u,s.a),s.o=y(_,B,s.o),s.i=y(E,V,s.i),s.n=y(z,W,s.n),s.s=y(I,F,s.s),s.h=y(C,f,s.h),s},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),p})()})}}),U),t(o,c(T,{get when(){return H(()=>!le())()&&G()==="flat"},get children(){var r=et(),i=r.firstChild,p=i.firstChild,b=p.firstChild,v=b.firstChild,d=v.nextSibling,n=d.nextSibling,l=n.nextSibling,h=l.nextSibling,q=h.nextSibling,M=p.nextSibling;return r.style.setProperty("background","var(--surface-color)"),r.style.setProperty("border","1px solid var(--border-color)"),r.style.setProperty("border-radius","var(--border-radius-md)"),r.style.setProperty("overflow","hidden"),t(v,()=>e("accounting.code","C贸digo")),t(d,()=>e("accounting.name","Nombre")),t(n,()=>e("accounting.type","Tipo")),t(l,()=>e("accounting.taxCategory","Categor铆a Fiscal")),t(h,()=>e("accounting.balance","Balance")),t(M,c(ne,{get each(){return ie()},children:a=>(()=>{var _=ct(),E=_.firstChild,z=E.nextSibling,I=z.nextSibling,C=I.firstChild,O=I.nextSibling,s=O.nextSibling,w=s.nextSibling,P=w.firstChild;return t(E,()=>a.code),t(z,()=>a.name),C.style.setProperty("padding","0.125rem 0.5rem"),C.style.setProperty("border-radius","9999px"),C.style.setProperty("font-size","0.75rem"),C.style.setProperty("font-weight","500"),t(C,()=>Pe[a.accountType]),t(O,c(T,{get when(){return a.taxCategory},get fallback(){return(()=>{var u=ze();return u.style.setProperty("color","var(--text-muted)"),u})()},get children(){return a.taxCategory}})),t(s,()=>_e(a.balance||0)),P.$$click=()=>Ce(a),P.style.setProperty("padding","0.25rem 0.5rem"),P.style.setProperty("border","none"),P.style.setProperty("background","transparent"),P.style.setProperty("color","var(--primary-color)"),P.style.setProperty("cursor","pointer"),P.style.setProperty("font-size","0.875rem"),t(P,()=>e("common.edit","Editar")),L(u=>{var B={...S,"font-family":"monospace","font-size":"0.875rem"},V=S,W=S,F=re[a.accountType]+"20",f=re[a.accountType],g=S,de={...S,"text-align":"right","font-weight":"500"},ce=S;return u.e=y(E,B,u.e),u.t=y(z,V,u.t),u.a=y(I,W,u.a),F!==u.o&&((u.o=F)!=null?C.style.setProperty("background",F):C.style.removeProperty("background")),f!==u.i&&((u.i=f)!=null?C.style.setProperty("color",f):C.style.removeProperty("color")),u.n=y(O,g,u.n),u.s=y(s,de,u.s),u.h=y(w,ce,u.h),u},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),_})()})),L(a=>{var _=$e,E=$,z=$,I=$,C=$,O={...$,"text-align":"right"},s={...$,width:"100px"};return a.e=y(i,_,a.e),a.t=y(v,E,a.t),a.a=y(d,z,a.a),a.o=y(n,I,a.o),a.i=y(l,C,a.i),a.n=y(h,O,a.n),a.s=y(q,s,a.s),a},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),r}}),U),t(o,c(Ke,{get isOpen(){return qe()},onClose:()=>J(!1),get title(){return H(()=>!!te())()?e("accounting.editAccount","Editar Cuenta"):e("accounting.newAccount","Nueva Cuenta")},get children(){var r=rt(),i=r.firstChild,p=i.nextSibling,b=p.nextSibling,v=b.nextSibling,d=v.nextSibling;return r.addEventListener("submit",Be),i.style.setProperty("display","grid"),i.style.setProperty("grid-template-columns","1fr 1fr"),i.style.setProperty("gap","1rem"),i.style.setProperty("margin-bottom","1rem"),t(i,c(ue,{get label(){return e("accounting.code","C贸digo")},get value(){return j().code},onChange:n=>D(l=>({...l,code:n})),placeholder:"1000"}),null),t(i,c(Ee,{get label(){return e("accounting.type","Tipo")},get value(){return j().accountType},onChange:n=>D(l=>({...l,accountType:n})),options:fe}),null),p.style.setProperty("margin-bottom","1rem"),t(p,c(ue,{get label(){return e("accounting.name","Nombre")},get value(){return j().name},onChange:n=>D(l=>({...l,name:n})),get placeholder(){return e("accounting.accountName","Nombre de la cuenta")}})),b.style.setProperty("margin-bottom","1rem"),t(b,c(Ee,{get label(){return e("accounting.taxCategory","Categor铆a Fiscal")},get value(){return j().taxCategory},onChange:n=>D(l=>({...l,taxCategory:n})),options:Ne})),v.style.setProperty("margin-bottom","1rem"),t(v,c(ue,{get label(){return e("accounting.description","Descripci贸n")},get value(){return j().description},onChange:n=>D(l=>({...l,description:n})),get placeholder(){return e("accounting.optionalDescription","Descripci贸n opcional")}})),t(r,c(T,{get when(){return me()},get children(){var n=tt();return n.style.setProperty("padding","0.75rem"),n.style.setProperty("background","#fef2f2"),n.style.setProperty("border","1px solid #fecaca"),n.style.setProperty("border-radius","var(--border-radius-sm)"),n.style.setProperty("color","#dc2626"),n.style.setProperty("margin-bottom","1rem"),n.style.setProperty("font-size","0.875rem"),t(n,me),n}}),d),d.style.setProperty("display","flex"),d.style.setProperty("justify-content","flex-end"),d.style.setProperty("gap","0.75rem"),t(d,c(ye,{variant:"secondary",type:"button",onClick:()=>J(!1),get children(){return e("common.cancel","Cancelar")}}),null),t(d,c(ye,{variant:"primary",type:"submit",get disabled(){return be()},get children(){return H(()=>!!be())()?e("common.saving","Guardando..."):H(()=>!!te())()?e("common.save","Guardar"):e("common.create","Crear")}}),null),r}}),null),L(r=>{var i=se(R()==="accounts"),p=se(R()==="templates"),b=se(R()==="rules");return r.e=y(Q,i,r.e),r.t=y(Y,p,r.t),r.a=y(oe,b,r.a),r},{e:void 0,t:void 0,a:void 0}),o})()};Xe(["click","input"]);export{vt as default};
